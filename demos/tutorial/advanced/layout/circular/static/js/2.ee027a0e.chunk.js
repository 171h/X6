(this["webpackJsonp@antv/x6-sites-demos-tutorial.advanced.layout.circular"]=this["webpackJsonp@antv/x6-sites-demos-tutorial.advanced.layout.circular"]||[]).push([[2],[function(j,_,u){"use strict";u.d(_,"a",function(){return g}),u.d(_,"b",function(){return f}),u.d(_,"c",function(){return w}),u.d(_,"d",function(){return E}),u.d(_,"e",function(){return T});var g={};u.r(g),u.d(g,"create",function(){return J}),u.d(g,"fromMat4",function(){return he}),u.d(g,"clone",function(){return ue}),u.d(g,"copy",function(){return de}),u.d(g,"fromValues",function(){return ae}),u.d(g,"set",function(){return le}),u.d(g,"identity",function(){return re}),u.d(g,"transpose",function(){return se}),u.d(g,"invert",function(){return ye}),u.d(g,"adjoint",function(){return Z}),u.d(g,"determinant",function(){return Ee}),u.d(g,"multiply",function(){return k}),u.d(g,"translate",function(){return Te}),u.d(g,"rotate",function(){return De}),u.d(g,"scale",function(){return Ue}),u.d(g,"fromTranslation",function(){return St}),u.d(g,"fromRotation",function(){return Ae}),u.d(g,"fromScaling",function(){return Wt}),u.d(g,"fromMat2d",function(){return At}),u.d(g,"fromQuat",function(){return mt}),u.d(g,"normalFromMat4",function(){return Dt}),u.d(g,"projection",function(){return Ke}),u.d(g,"str",function(){return Tt}),u.d(g,"frob",function(){return Gt}),u.d(g,"add",function(){return gn}),u.d(g,"subtract",function(){return Ut}),u.d(g,"multiplyScalar",function(){return Ht}),u.d(g,"multiplyScalarAndAdd",function(){return Rt}),u.d(g,"exactEquals",function(){return Fe}),u.d(g,"equals",function(){return me}),u.d(g,"mul",function(){return ze}),u.d(g,"sub",function(){return Be});var f={};u.r(f),u.d(f,"create",function(){return ut}),u.d(f,"clone",function(){return xt}),u.d(f,"copy",function(){return $t}),u.d(f,"fromValues",function(){return Qt}),u.d(f,"set",function(){return on}),u.d(f,"identity",function(){return Mn}),u.d(f,"transpose",function(){return Nn}),u.d(f,"invert",function(){return qn}),u.d(f,"adjoint",function(){return nr}),u.d(f,"determinant",function(){return xn}),u.d(f,"multiply",function(){return pn}),u.d(f,"translate",function(){return pr}),u.d(f,"scale",function(){return gr}),u.d(f,"rotate",function(){return Ce}),u.d(f,"rotateX",function(){return Jn}),u.d(f,"rotateY",function(){return Ln}),u.d(f,"rotateZ",function(){return yr}),u.d(f,"fromTranslation",function(){return Un}),u.d(f,"fromScaling",function(){return $e}),u.d(f,"fromRotation",function(){return Re}),u.d(f,"fromXRotation",function(){return Ye}),u.d(f,"fromYRotation",function(){return tt}),u.d(f,"fromZRotation",function(){return gt}),u.d(f,"fromRotationTranslation",function(){return kt}),u.d(f,"fromQuat2",function(){return Pe}),u.d(f,"getTranslation",function(){return pt}),u.d(f,"getScaling",function(){return st}),u.d(f,"getRotation",function(){return Ft}),u.d(f,"fromRotationTranslationScale",function(){return An}),u.d(f,"fromRotationTranslationScaleOrigin",function(){return Gn}),u.d(f,"fromQuat",function(){return Yn}),u.d(f,"frustum",function(){return vr}),u.d(f,"perspective",function(){return zr}),u.d(f,"perspectiveFromFieldOfView",function(){return et}),u.d(f,"ortho",function(){return wt}),u.d(f,"lookAt",function(){return lt}),u.d(f,"targetTo",function(){return Vt}),u.d(f,"str",function(){return cn}),u.d(f,"frob",function(){return We}),u.d(f,"add",function(){return Jt}),u.d(f,"subtract",function(){return vt}),u.d(f,"multiplyScalar",function(){return Kn}),u.d(f,"multiplyScalarAndAdd",function(){return kr}),u.d(f,"exactEquals",function(){return Ur}),u.d(f,"equals",function(){return fa}),u.d(f,"mul",function(){return ea}),u.d(f,"sub",function(){return ia});var E={};u.r(E),u.d(E,"create",function(){return Va}),u.d(E,"clone",function(){return da}),u.d(E,"length",function(){return $a}),u.d(E,"fromValues",function(){return di}),u.d(E,"copy",function(){return Da}),u.d(E,"set",function(){return Ya}),u.d(E,"add",function(){return ro}),u.d(E,"subtract",function(){return ys}),u.d(E,"multiply",function(){return Co}),u.d(E,"divide",function(){return Gs}),u.d(E,"ceil",function(){return Ho}),u.d(E,"floor",function(){return rs}),u.d(E,"min",function(){return as}),u.d(E,"max",function(){return _s}),u.d(E,"round",function(){return Js}),u.d(E,"scale",function(){return fo}),u.d(E,"scaleAndAdd",function(){return To}),u.d(E,"distance",function(){return bs}),u.d(E,"squaredDistance",function(){return bo}),u.d(E,"squaredLength",function(){return Es}),u.d(E,"negate",function(){return vu}),u.d(E,"inverse",function(){return Zs}),u.d(E,"normalize",function(){return Ko}),u.d(E,"dot",function(){return is}),u.d(E,"cross",function(){return cs}),u.d(E,"lerp",function(){return qs}),u.d(E,"hermite",function(){return Ju}),u.d(E,"bezier",function(){return eu}),u.d(E,"random",function(){return Wi}),u.d(E,"transformMat4",function(){return ji}),u.d(E,"transformMat3",function(){return _o}),u.d(E,"transformQuat",function(){return mu}),u.d(E,"rotateX",function(){return Pl}),u.d(E,"rotateY",function(){return Fo}),u.d(E,"rotateZ",function(){return ks}),u.d(E,"angle",function(){return gu}),u.d(E,"zero",function(){return Jl}),u.d(E,"str",function(){return Zl}),u.d(E,"exactEquals",function(){return Iu}),u.d(E,"equals",function(){return yu}),u.d(E,"sub",function(){return os}),u.d(E,"mul",function(){return Bi}),u.d(E,"div",function(){return Mi}),u.d(E,"dist",function(){return Bo}),u.d(E,"sqrDist",function(){return ds}),u.d(E,"len",function(){return Zu}),u.d(E,"sqrLen",function(){return Lu}),u.d(E,"forEach",function(){return ql});var T={};u.r(T),u.d(T,"create",function(){return ec}),u.d(T,"clone",function(){return tu}),u.d(T,"fromValues",function(){return Ns}),u.d(T,"copy",function(){return nu}),u.d(T,"set",function(){return pl}),u.d(T,"add",function(){return Wc}),u.d(T,"subtract",function(){return Hc}),u.d(T,"multiply",function(){return Il}),u.d(T,"divide",function(){return vl}),u.d(T,"ceil",function(){return xc}),u.d(T,"floor",function(){return Ll}),u.d(T,"min",function(){return bu}),u.d(T,"max",function(){return tc}),u.d(T,"round",function(){return wc}),u.d(T,"scale",function(){return Eu}),u.d(T,"scaleAndAdd",function(){return nc}),u.d(T,"distance",function(){return ml}),u.d(T,"squaredDistance",function(){return gl}),u.d(T,"length",function(){return jl}),u.d(T,"squaredLength",function(){return yl}),u.d(T,"negate",function(){return Cc}),u.d(T,"inverse",function(){return $o}),u.d(T,"normalize",function(){return Qa}),u.d(T,"dot",function(){return Rs}),u.d(T,"cross",function(){return Pa}),u.d(T,"lerp",function(){return qu}),u.d(T,"random",function(){return xu}),u.d(T,"transformMat4",function(){return $}),u.d(T,"transformQuat",function(){return R}),u.d(T,"zero",function(){return G}),u.d(T,"str",function(){return Y}),u.d(T,"exactEquals",function(){return fe}),u.d(T,"equals",function(){return Se}),u.d(T,"sub",function(){return Ie}),u.d(T,"mul",function(){return Ze}),u.d(T,"div",function(){return Pt}),u.d(T,"dist",function(){return zt}),u.d(T,"sqrDist",function(){return Cn}),u.d(T,"len",function(){return Sr}),u.d(T,"sqrLen",function(){return Dr}),u.d(T,"forEach",function(){return en});var w={};u.r(w),u.d(w,"create",function(){return sr}),u.d(w,"identity",function(){return Kr}),u.d(w,"setAxisAngle",function(){return ma}),u.d(w,"getAxisAngle",function(){return sa}),u.d(w,"getAngle",function(){return Yo}),u.d(w,"multiply",function(){return ka}),u.d(w,"rotateX",function(){return bi}),u.d(w,"rotateY",function(){return Na}),u.d(w,"rotateZ",function(){return Sa}),u.d(w,"calculateW",function(){return rt}),u.d(w,"exp",function(){return Rn}),u.d(w,"ln",function(){return Qr}),u.d(w,"pow",function(){return mi}),u.d(w,"slerp",function(){return Hi}),u.d(w,"random",function(){return ho}),u.d(w,"invert",function(){return Ao}),u.d(w,"conjugate",function(){return uo}),u.d(w,"fromMat3",function(){return Io}),u.d(w,"fromEuler",function(){return Lo}),u.d(w,"str",function(){return Vi}),u.d(w,"clone",function(){return wu}),u.d(w,"fromValues",function(){return Qo}),u.d(w,"copy",function(){return el}),u.d(w,"set",function(){return ua}),u.d(w,"add",function(){return fs}),u.d(w,"mul",function(){return Cu}),u.d(w,"scale",function(){return Ps}),u.d(w,"dot",function(){return xs}),u.d(w,"lerp",function(){return ju}),u.d(w,"length",function(){return ru}),u.d(w,"len",function(){return Is}),u.d(w,"squaredLength",function(){return au}),u.d(w,"sqrLen",function(){return Uu}),u.d(w,"normalize",function(){return Fu}),u.d(w,"exactEquals",function(){return ws}),u.d(w,"equals",function(){return hs}),u.d(w,"rotationTo",function(){return Eo}),u.d(w,"sqlerp",function(){return Ul}),u.d(w,"setAxes",function(){return Ua});var D=1e-6,O=typeof Float32Array!="undefined"?Float32Array:Array,L=Math.random;function U(b){O=b}var V=Math.PI/180;function z(b){return b*V}function K(b,N){return Math.abs(b-N)<=D*Math.max(1,Math.abs(b),Math.abs(N))}Math.hypot||(Math.hypot=function(){for(var b=0,N=arguments.length;N--;)b+=arguments[N]*arguments[N];return Math.sqrt(b)});function J(){var b=new O(9);return O!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[5]=0,b[6]=0,b[7]=0),b[0]=1,b[4]=1,b[8]=1,b}function he(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[4],b[4]=N[5],b[5]=N[6],b[6]=N[8],b[7]=N[9],b[8]=N[10],b}function ue(b){var N=new O(9);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N[3]=b[3],N[4]=b[4],N[5]=b[5],N[6]=b[6],N[7]=b[7],N[8]=b[8],N}function de(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b[4]=N[4],b[5]=N[5],b[6]=N[6],b[7]=N[7],b[8]=N[8],b}function ae(b,N,te,ee,ce,Ve,ft,yt,Ct){var Xt=new O(9);return Xt[0]=b,Xt[1]=N,Xt[2]=te,Xt[3]=ee,Xt[4]=ce,Xt[5]=Ve,Xt[6]=ft,Xt[7]=yt,Xt[8]=Ct,Xt}function le(b,N,te,ee,ce,Ve,ft,yt,Ct,Xt){return b[0]=N,b[1]=te,b[2]=ee,b[3]=ce,b[4]=Ve,b[5]=ft,b[6]=yt,b[7]=Ct,b[8]=Xt,b}function re(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function se(b,N){if(b===N){var te=N[1],ee=N[2],ce=N[5];b[1]=N[3],b[2]=N[6],b[3]=te,b[5]=N[7],b[6]=ee,b[7]=ce}else b[0]=N[0],b[1]=N[3],b[2]=N[6],b[3]=N[1],b[4]=N[4],b[5]=N[7],b[6]=N[2],b[7]=N[5],b[8]=N[8];return b}function ye(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=N[4],yt=N[5],Ct=N[6],Xt=N[7],un=N[8],_n=un*ft-yt*Xt,Fn=-un*Ve+yt*Ct,jn=Xt*Ve-ft*Ct,Ar=te*_n+ee*Fn+ce*jn;return Ar?(Ar=1/Ar,b[0]=_n*Ar,b[1]=(-un*ee+ce*Xt)*Ar,b[2]=(yt*ee-ce*ft)*Ar,b[3]=Fn*Ar,b[4]=(un*te-ce*Ct)*Ar,b[5]=(-yt*te+ce*Ve)*Ar,b[6]=jn*Ar,b[7]=(-Xt*te+ee*Ct)*Ar,b[8]=(ft*te-ee*Ve)*Ar,b):null}function Z(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=N[4],yt=N[5],Ct=N[6],Xt=N[7],un=N[8];return b[0]=ft*un-yt*Xt,b[1]=ce*Xt-ee*un,b[2]=ee*yt-ce*ft,b[3]=yt*Ct-Ve*un,b[4]=te*un-ce*Ct,b[5]=ce*Ve-te*yt,b[6]=Ve*Xt-ft*Ct,b[7]=ee*Ct-te*Xt,b[8]=te*ft-ee*Ve,b}function Ee(b){var N=b[0],te=b[1],ee=b[2],ce=b[3],Ve=b[4],ft=b[5],yt=b[6],Ct=b[7],Xt=b[8];return N*(Xt*Ve-ft*Ct)+te*(-Xt*ce+ft*yt)+ee*(Ct*ce-Ve*yt)}function k(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=N[4],Ct=N[5],Xt=N[6],un=N[7],_n=N[8],Fn=te[0],jn=te[1],Ar=te[2],Nr=te[3],Wn=te[4],Yr=te[5],Xa=te[6],Ta=te[7],xa=te[8];return b[0]=Fn*ee+jn*ft+Ar*Xt,b[1]=Fn*ce+jn*yt+Ar*un,b[2]=Fn*Ve+jn*Ct+Ar*_n,b[3]=Nr*ee+Wn*ft+Yr*Xt,b[4]=Nr*ce+Wn*yt+Yr*un,b[5]=Nr*Ve+Wn*Ct+Yr*_n,b[6]=Xa*ee+Ta*ft+xa*Xt,b[7]=Xa*ce+Ta*yt+xa*un,b[8]=Xa*Ve+Ta*Ct+xa*_n,b}function Te(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=N[4],Ct=N[5],Xt=N[6],un=N[7],_n=N[8],Fn=te[0],jn=te[1];return b[0]=ee,b[1]=ce,b[2]=Ve,b[3]=ft,b[4]=yt,b[5]=Ct,b[6]=Fn*ee+jn*ft+Xt,b[7]=Fn*ce+jn*yt+un,b[8]=Fn*Ve+jn*Ct+_n,b}function De(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=N[4],Ct=N[5],Xt=N[6],un=N[7],_n=N[8],Fn=Math.sin(te),jn=Math.cos(te);return b[0]=jn*ee+Fn*ft,b[1]=jn*ce+Fn*yt,b[2]=jn*Ve+Fn*Ct,b[3]=jn*ft-Fn*ee,b[4]=jn*yt-Fn*ce,b[5]=jn*Ct-Fn*Ve,b[6]=Xt,b[7]=un,b[8]=_n,b}function Ue(b,N,te){var ee=te[0],ce=te[1];return b[0]=ee*N[0],b[1]=ee*N[1],b[2]=ee*N[2],b[3]=ce*N[3],b[4]=ce*N[4],b[5]=ce*N[5],b[6]=N[6],b[7]=N[7],b[8]=N[8],b}function St(b,N){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=N[0],b[7]=N[1],b[8]=1,b}function Ae(b,N){var te=Math.sin(N),ee=Math.cos(N);return b[0]=ee,b[1]=te,b[2]=0,b[3]=-te,b[4]=ee,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function Wt(b,N){return b[0]=N[0],b[1]=0,b[2]=0,b[3]=0,b[4]=N[1],b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function At(b,N){return b[0]=N[0],b[1]=N[1],b[2]=0,b[3]=N[2],b[4]=N[3],b[5]=0,b[6]=N[4],b[7]=N[5],b[8]=1,b}function mt(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=te+te,yt=ee+ee,Ct=ce+ce,Xt=te*ft,un=ee*ft,_n=ee*yt,Fn=ce*ft,jn=ce*yt,Ar=ce*Ct,Nr=Ve*ft,Wn=Ve*yt,Yr=Ve*Ct;return b[0]=1-_n-Ar,b[3]=un-Yr,b[6]=Fn+Wn,b[1]=un+Yr,b[4]=1-Xt-Ar,b[7]=jn-Nr,b[2]=Fn-Wn,b[5]=jn+Nr,b[8]=1-Xt-_n,b}function Dt(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=N[4],yt=N[5],Ct=N[6],Xt=N[7],un=N[8],_n=N[9],Fn=N[10],jn=N[11],Ar=N[12],Nr=N[13],Wn=N[14],Yr=N[15],Xa=te*yt-ee*ft,Ta=te*Ct-ce*ft,xa=te*Xt-Ve*ft,wa=ee*Ct-ce*yt,Oa=ee*Xt-Ve*yt,Ki=ce*Xt-Ve*Ct,_i=un*Nr-_n*Ar,$i=un*Wn-Fn*Ar,ki=un*Yr-jn*Ar,Ui=_n*Wn-Fn*Nr,bt=_n*Yr-jn*Nr,Je=Fn*Yr-jn*Wn,It=Xa*Je-Ta*bt+xa*Ui+wa*ki-Oa*$i+Ki*_i;return It?(It=1/It,b[0]=(yt*Je-Ct*bt+Xt*Ui)*It,b[1]=(Ct*ki-ft*Je-Xt*$i)*It,b[2]=(ft*bt-yt*ki+Xt*_i)*It,b[3]=(ce*bt-ee*Je-Ve*Ui)*It,b[4]=(te*Je-ce*ki+Ve*$i)*It,b[5]=(ee*ki-te*bt-Ve*_i)*It,b[6]=(Nr*Ki-Wn*Oa+Yr*wa)*It,b[7]=(Wn*xa-Ar*Ki-Yr*Ta)*It,b[8]=(Ar*Oa-Nr*xa+Yr*Xa)*It,b):null}function Ke(b,N,te){return b[0]=2/N,b[1]=0,b[2]=0,b[3]=0,b[4]=-2/te,b[5]=0,b[6]=-1,b[7]=1,b[8]=1,b}function Tt(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"}function Gt(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])}function gn(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b[3]=N[3]+te[3],b[4]=N[4]+te[4],b[5]=N[5]+te[5],b[6]=N[6]+te[6],b[7]=N[7]+te[7],b[8]=N[8]+te[8],b}function Ut(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b[3]=N[3]-te[3],b[4]=N[4]-te[4],b[5]=N[5]-te[5],b[6]=N[6]-te[6],b[7]=N[7]-te[7],b[8]=N[8]-te[8],b}function Ht(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b[3]=N[3]*te,b[4]=N[4]*te,b[5]=N[5]*te,b[6]=N[6]*te,b[7]=N[7]*te,b[8]=N[8]*te,b}function Rt(b,N,te,ee){return b[0]=N[0]+te[0]*ee,b[1]=N[1]+te[1]*ee,b[2]=N[2]+te[2]*ee,b[3]=N[3]+te[3]*ee,b[4]=N[4]+te[4]*ee,b[5]=N[5]+te[5]*ee,b[6]=N[6]+te[6]*ee,b[7]=N[7]+te[7]*ee,b[8]=N[8]+te[8]*ee,b}function Fe(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]&&b[3]===N[3]&&b[4]===N[4]&&b[5]===N[5]&&b[6]===N[6]&&b[7]===N[7]&&b[8]===N[8]}function me(b,N){var te=b[0],ee=b[1],ce=b[2],Ve=b[3],ft=b[4],yt=b[5],Ct=b[6],Xt=b[7],un=b[8],_n=N[0],Fn=N[1],jn=N[2],Ar=N[3],Nr=N[4],Wn=N[5],Yr=N[6],Xa=N[7],Ta=N[8];return Math.abs(te-_n)<=D*Math.max(1,Math.abs(te),Math.abs(_n))&&Math.abs(ee-Fn)<=D*Math.max(1,Math.abs(ee),Math.abs(Fn))&&Math.abs(ce-jn)<=D*Math.max(1,Math.abs(ce),Math.abs(jn))&&Math.abs(Ve-Ar)<=D*Math.max(1,Math.abs(Ve),Math.abs(Ar))&&Math.abs(ft-Nr)<=D*Math.max(1,Math.abs(ft),Math.abs(Nr))&&Math.abs(yt-Wn)<=D*Math.max(1,Math.abs(yt),Math.abs(Wn))&&Math.abs(Ct-Yr)<=D*Math.max(1,Math.abs(Ct),Math.abs(Yr))&&Math.abs(Xt-Xa)<=D*Math.max(1,Math.abs(Xt),Math.abs(Xa))&&Math.abs(un-Ta)<=D*Math.max(1,Math.abs(un),Math.abs(Ta))}var ze=k,Be=Ut;function ut(){var b=new O(16);return O!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b}function xt(b){var N=new O(16);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N[3]=b[3],N[4]=b[4],N[5]=b[5],N[6]=b[6],N[7]=b[7],N[8]=b[8],N[9]=b[9],N[10]=b[10],N[11]=b[11],N[12]=b[12],N[13]=b[13],N[14]=b[14],N[15]=b[15],N}function $t(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b[4]=N[4],b[5]=N[5],b[6]=N[6],b[7]=N[7],b[8]=N[8],b[9]=N[9],b[10]=N[10],b[11]=N[11],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15],b}function Qt(b,N,te,ee,ce,Ve,ft,yt,Ct,Xt,un,_n,Fn,jn,Ar,Nr){var Wn=new O(16);return Wn[0]=b,Wn[1]=N,Wn[2]=te,Wn[3]=ee,Wn[4]=ce,Wn[5]=Ve,Wn[6]=ft,Wn[7]=yt,Wn[8]=Ct,Wn[9]=Xt,Wn[10]=un,Wn[11]=_n,Wn[12]=Fn,Wn[13]=jn,Wn[14]=Ar,Wn[15]=Nr,Wn}function on(b,N,te,ee,ce,Ve,ft,yt,Ct,Xt,un,_n,Fn,jn,Ar,Nr,Wn){return b[0]=N,b[1]=te,b[2]=ee,b[3]=ce,b[4]=Ve,b[5]=ft,b[6]=yt,b[7]=Ct,b[8]=Xt,b[9]=un,b[10]=_n,b[11]=Fn,b[12]=jn,b[13]=Ar,b[14]=Nr,b[15]=Wn,b}function Mn(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function Nn(b,N){if(b===N){var te=N[1],ee=N[2],ce=N[3],Ve=N[6],ft=N[7],yt=N[11];b[1]=N[4],b[2]=N[8],b[3]=N[12],b[4]=te,b[6]=N[9],b[7]=N[13],b[8]=ee,b[9]=Ve,b[11]=N[14],b[12]=ce,b[13]=ft,b[14]=yt}else b[0]=N[0],b[1]=N[4],b[2]=N[8],b[3]=N[12],b[4]=N[1],b[5]=N[5],b[6]=N[9],b[7]=N[13],b[8]=N[2],b[9]=N[6],b[10]=N[10],b[11]=N[14],b[12]=N[3],b[13]=N[7],b[14]=N[11],b[15]=N[15];return b}function qn(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=N[4],yt=N[5],Ct=N[6],Xt=N[7],un=N[8],_n=N[9],Fn=N[10],jn=N[11],Ar=N[12],Nr=N[13],Wn=N[14],Yr=N[15],Xa=te*yt-ee*ft,Ta=te*Ct-ce*ft,xa=te*Xt-Ve*ft,wa=ee*Ct-ce*yt,Oa=ee*Xt-Ve*yt,Ki=ce*Xt-Ve*Ct,_i=un*Nr-_n*Ar,$i=un*Wn-Fn*Ar,ki=un*Yr-jn*Ar,Ui=_n*Wn-Fn*Nr,bt=_n*Yr-jn*Nr,Je=Fn*Yr-jn*Wn,It=Xa*Je-Ta*bt+xa*Ui+wa*ki-Oa*$i+Ki*_i;return It?(It=1/It,b[0]=(yt*Je-Ct*bt+Xt*Ui)*It,b[1]=(ce*bt-ee*Je-Ve*Ui)*It,b[2]=(Nr*Ki-Wn*Oa+Yr*wa)*It,b[3]=(Fn*Oa-_n*Ki-jn*wa)*It,b[4]=(Ct*ki-ft*Je-Xt*$i)*It,b[5]=(te*Je-ce*ki+Ve*$i)*It,b[6]=(Wn*xa-Ar*Ki-Yr*Ta)*It,b[7]=(un*Ki-Fn*xa+jn*Ta)*It,b[8]=(ft*bt-yt*ki+Xt*_i)*It,b[9]=(ee*ki-te*bt-Ve*_i)*It,b[10]=(Ar*Oa-Nr*xa+Yr*Xa)*It,b[11]=(_n*xa-un*Oa-jn*Xa)*It,b[12]=(yt*$i-ft*Ui-Ct*_i)*It,b[13]=(te*Ui-ee*$i+ce*_i)*It,b[14]=(Nr*Ta-Ar*wa-Wn*Xa)*It,b[15]=(un*wa-_n*Ta+Fn*Xa)*It,b):null}function nr(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=N[4],yt=N[5],Ct=N[6],Xt=N[7],un=N[8],_n=N[9],Fn=N[10],jn=N[11],Ar=N[12],Nr=N[13],Wn=N[14],Yr=N[15];return b[0]=yt*(Fn*Yr-jn*Wn)-_n*(Ct*Yr-Xt*Wn)+Nr*(Ct*jn-Xt*Fn),b[1]=-(ee*(Fn*Yr-jn*Wn)-_n*(ce*Yr-Ve*Wn)+Nr*(ce*jn-Ve*Fn)),b[2]=ee*(Ct*Yr-Xt*Wn)-yt*(ce*Yr-Ve*Wn)+Nr*(ce*Xt-Ve*Ct),b[3]=-(ee*(Ct*jn-Xt*Fn)-yt*(ce*jn-Ve*Fn)+_n*(ce*Xt-Ve*Ct)),b[4]=-(ft*(Fn*Yr-jn*Wn)-un*(Ct*Yr-Xt*Wn)+Ar*(Ct*jn-Xt*Fn)),b[5]=te*(Fn*Yr-jn*Wn)-un*(ce*Yr-Ve*Wn)+Ar*(ce*jn-Ve*Fn),b[6]=-(te*(Ct*Yr-Xt*Wn)-ft*(ce*Yr-Ve*Wn)+Ar*(ce*Xt-Ve*Ct)),b[7]=te*(Ct*jn-Xt*Fn)-ft*(ce*jn-Ve*Fn)+un*(ce*Xt-Ve*Ct),b[8]=ft*(_n*Yr-jn*Nr)-un*(yt*Yr-Xt*Nr)+Ar*(yt*jn-Xt*_n),b[9]=-(te*(_n*Yr-jn*Nr)-un*(ee*Yr-Ve*Nr)+Ar*(ee*jn-Ve*_n)),b[10]=te*(yt*Yr-Xt*Nr)-ft*(ee*Yr-Ve*Nr)+Ar*(ee*Xt-Ve*yt),b[11]=-(te*(yt*jn-Xt*_n)-ft*(ee*jn-Ve*_n)+un*(ee*Xt-Ve*yt)),b[12]=-(ft*(_n*Wn-Fn*Nr)-un*(yt*Wn-Ct*Nr)+Ar*(yt*Fn-Ct*_n)),b[13]=te*(_n*Wn-Fn*Nr)-un*(ee*Wn-ce*Nr)+Ar*(ee*Fn-ce*_n),b[14]=-(te*(yt*Wn-Ct*Nr)-ft*(ee*Wn-ce*Nr)+Ar*(ee*Ct-ce*yt)),b[15]=te*(yt*Fn-Ct*_n)-ft*(ee*Fn-ce*_n)+un*(ee*Ct-ce*yt),b}function xn(b){var N=b[0],te=b[1],ee=b[2],ce=b[3],Ve=b[4],ft=b[5],yt=b[6],Ct=b[7],Xt=b[8],un=b[9],_n=b[10],Fn=b[11],jn=b[12],Ar=b[13],Nr=b[14],Wn=b[15],Yr=N*ft-te*Ve,Xa=N*yt-ee*Ve,Ta=N*Ct-ce*Ve,xa=te*yt-ee*ft,wa=te*Ct-ce*ft,Oa=ee*Ct-ce*yt,Ki=Xt*Ar-un*jn,_i=Xt*Nr-_n*jn,$i=Xt*Wn-Fn*jn,ki=un*Nr-_n*Ar,Ui=un*Wn-Fn*Ar,bt=_n*Wn-Fn*Nr;return Yr*bt-Xa*Ui+Ta*ki+xa*$i-wa*_i+Oa*Ki}function pn(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=N[4],Ct=N[5],Xt=N[6],un=N[7],_n=N[8],Fn=N[9],jn=N[10],Ar=N[11],Nr=N[12],Wn=N[13],Yr=N[14],Xa=N[15],Ta=te[0],xa=te[1],wa=te[2],Oa=te[3];return b[0]=Ta*ee+xa*yt+wa*_n+Oa*Nr,b[1]=Ta*ce+xa*Ct+wa*Fn+Oa*Wn,b[2]=Ta*Ve+xa*Xt+wa*jn+Oa*Yr,b[3]=Ta*ft+xa*un+wa*Ar+Oa*Xa,Ta=te[4],xa=te[5],wa=te[6],Oa=te[7],b[4]=Ta*ee+xa*yt+wa*_n+Oa*Nr,b[5]=Ta*ce+xa*Ct+wa*Fn+Oa*Wn,b[6]=Ta*Ve+xa*Xt+wa*jn+Oa*Yr,b[7]=Ta*ft+xa*un+wa*Ar+Oa*Xa,Ta=te[8],xa=te[9],wa=te[10],Oa=te[11],b[8]=Ta*ee+xa*yt+wa*_n+Oa*Nr,b[9]=Ta*ce+xa*Ct+wa*Fn+Oa*Wn,b[10]=Ta*Ve+xa*Xt+wa*jn+Oa*Yr,b[11]=Ta*ft+xa*un+wa*Ar+Oa*Xa,Ta=te[12],xa=te[13],wa=te[14],Oa=te[15],b[12]=Ta*ee+xa*yt+wa*_n+Oa*Nr,b[13]=Ta*ce+xa*Ct+wa*Fn+Oa*Wn,b[14]=Ta*Ve+xa*Xt+wa*jn+Oa*Yr,b[15]=Ta*ft+xa*un+wa*Ar+Oa*Xa,b}function pr(b,N,te){var ee=te[0],ce=te[1],Ve=te[2],ft,yt,Ct,Xt,un,_n,Fn,jn,Ar,Nr,Wn,Yr;return N===b?(b[12]=N[0]*ee+N[4]*ce+N[8]*Ve+N[12],b[13]=N[1]*ee+N[5]*ce+N[9]*Ve+N[13],b[14]=N[2]*ee+N[6]*ce+N[10]*Ve+N[14],b[15]=N[3]*ee+N[7]*ce+N[11]*Ve+N[15]):(ft=N[0],yt=N[1],Ct=N[2],Xt=N[3],un=N[4],_n=N[5],Fn=N[6],jn=N[7],Ar=N[8],Nr=N[9],Wn=N[10],Yr=N[11],b[0]=ft,b[1]=yt,b[2]=Ct,b[3]=Xt,b[4]=un,b[5]=_n,b[6]=Fn,b[7]=jn,b[8]=Ar,b[9]=Nr,b[10]=Wn,b[11]=Yr,b[12]=ft*ee+un*ce+Ar*Ve+N[12],b[13]=yt*ee+_n*ce+Nr*Ve+N[13],b[14]=Ct*ee+Fn*ce+Wn*Ve+N[14],b[15]=Xt*ee+jn*ce+Yr*Ve+N[15]),b}function gr(b,N,te){var ee=te[0],ce=te[1],Ve=te[2];return b[0]=N[0]*ee,b[1]=N[1]*ee,b[2]=N[2]*ee,b[3]=N[3]*ee,b[4]=N[4]*ce,b[5]=N[5]*ce,b[6]=N[6]*ce,b[7]=N[7]*ce,b[8]=N[8]*Ve,b[9]=N[9]*Ve,b[10]=N[10]*Ve,b[11]=N[11]*Ve,b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15],b}function Ce(b,N,te,ee){var ce=ee[0],Ve=ee[1],ft=ee[2],yt=Math.hypot(ce,Ve,ft),Ct,Xt,un,_n,Fn,jn,Ar,Nr,Wn,Yr,Xa,Ta,xa,wa,Oa,Ki,_i,$i,ki,Ui,bt,Je,It,Dn;return yt<D?null:(yt=1/yt,ce*=yt,Ve*=yt,ft*=yt,Ct=Math.sin(te),Xt=Math.cos(te),un=1-Xt,_n=N[0],Fn=N[1],jn=N[2],Ar=N[3],Nr=N[4],Wn=N[5],Yr=N[6],Xa=N[7],Ta=N[8],xa=N[9],wa=N[10],Oa=N[11],Ki=ce*ce*un+Xt,_i=Ve*ce*un+ft*Ct,$i=ft*ce*un-Ve*Ct,ki=ce*Ve*un-ft*Ct,Ui=Ve*Ve*un+Xt,bt=ft*Ve*un+ce*Ct,Je=ce*ft*un+Ve*Ct,It=Ve*ft*un-ce*Ct,Dn=ft*ft*un+Xt,b[0]=_n*Ki+Nr*_i+Ta*$i,b[1]=Fn*Ki+Wn*_i+xa*$i,b[2]=jn*Ki+Yr*_i+wa*$i,b[3]=Ar*Ki+Xa*_i+Oa*$i,b[4]=_n*ki+Nr*Ui+Ta*bt,b[5]=Fn*ki+Wn*Ui+xa*bt,b[6]=jn*ki+Yr*Ui+wa*bt,b[7]=Ar*ki+Xa*Ui+Oa*bt,b[8]=_n*Je+Nr*It+Ta*Dn,b[9]=Fn*Je+Wn*It+xa*Dn,b[10]=jn*Je+Yr*It+wa*Dn,b[11]=Ar*Je+Xa*It+Oa*Dn,N!==b&&(b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b)}function Jn(b,N,te){var ee=Math.sin(te),ce=Math.cos(te),Ve=N[4],ft=N[5],yt=N[6],Ct=N[7],Xt=N[8],un=N[9],_n=N[10],Fn=N[11];return N!==b&&(b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b[4]=Ve*ce+Xt*ee,b[5]=ft*ce+un*ee,b[6]=yt*ce+_n*ee,b[7]=Ct*ce+Fn*ee,b[8]=Xt*ce-Ve*ee,b[9]=un*ce-ft*ee,b[10]=_n*ce-yt*ee,b[11]=Fn*ce-Ct*ee,b}function Ln(b,N,te){var ee=Math.sin(te),ce=Math.cos(te),Ve=N[0],ft=N[1],yt=N[2],Ct=N[3],Xt=N[8],un=N[9],_n=N[10],Fn=N[11];return N!==b&&(b[4]=N[4],b[5]=N[5],b[6]=N[6],b[7]=N[7],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b[0]=Ve*ce-Xt*ee,b[1]=ft*ce-un*ee,b[2]=yt*ce-_n*ee,b[3]=Ct*ce-Fn*ee,b[8]=Ve*ee+Xt*ce,b[9]=ft*ee+un*ce,b[10]=yt*ee+_n*ce,b[11]=Ct*ee+Fn*ce,b}function yr(b,N,te){var ee=Math.sin(te),ce=Math.cos(te),Ve=N[0],ft=N[1],yt=N[2],Ct=N[3],Xt=N[4],un=N[5],_n=N[6],Fn=N[7];return N!==b&&(b[8]=N[8],b[9]=N[9],b[10]=N[10],b[11]=N[11],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b[0]=Ve*ce+Xt*ee,b[1]=ft*ce+un*ee,b[2]=yt*ce+_n*ee,b[3]=Ct*ce+Fn*ee,b[4]=Xt*ce-Ve*ee,b[5]=un*ce-ft*ee,b[6]=_n*ce-yt*ee,b[7]=Fn*ce-Ct*ee,b}function Un(b,N){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=N[0],b[13]=N[1],b[14]=N[2],b[15]=1,b}function $e(b,N){return b[0]=N[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=N[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=N[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function Re(b,N,te){var ee=te[0],ce=te[1],Ve=te[2],ft=Math.hypot(ee,ce,Ve),yt,Ct,Xt;return ft<D?null:(ft=1/ft,ee*=ft,ce*=ft,Ve*=ft,yt=Math.sin(N),Ct=Math.cos(N),Xt=1-Ct,b[0]=ee*ee*Xt+Ct,b[1]=ce*ee*Xt+Ve*yt,b[2]=Ve*ee*Xt-ce*yt,b[3]=0,b[4]=ee*ce*Xt-Ve*yt,b[5]=ce*ce*Xt+Ct,b[6]=Ve*ce*Xt+ee*yt,b[7]=0,b[8]=ee*Ve*Xt+ce*yt,b[9]=ce*Ve*Xt-ee*yt,b[10]=Ve*Ve*Xt+Ct,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)}function Ye(b,N){var te=Math.sin(N),ee=Math.cos(N);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=ee,b[6]=te,b[7]=0,b[8]=0,b[9]=-te,b[10]=ee,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function tt(b,N){var te=Math.sin(N),ee=Math.cos(N);return b[0]=ee,b[1]=0,b[2]=-te,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=te,b[9]=0,b[10]=ee,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function gt(b,N){var te=Math.sin(N),ee=Math.cos(N);return b[0]=ee,b[1]=te,b[2]=0,b[3]=0,b[4]=-te,b[5]=ee,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function kt(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=ee+ee,Ct=ce+ce,Xt=Ve+Ve,un=ee*yt,_n=ee*Ct,Fn=ee*Xt,jn=ce*Ct,Ar=ce*Xt,Nr=Ve*Xt,Wn=ft*yt,Yr=ft*Ct,Xa=ft*Xt;return b[0]=1-(jn+Nr),b[1]=_n+Xa,b[2]=Fn-Yr,b[3]=0,b[4]=_n-Xa,b[5]=1-(un+Nr),b[6]=Ar+Wn,b[7]=0,b[8]=Fn+Yr,b[9]=Ar-Wn,b[10]=1-(un+jn),b[11]=0,b[12]=te[0],b[13]=te[1],b[14]=te[2],b[15]=1,b}function Pe(b,N){var te=new O(3),ee=-N[0],ce=-N[1],Ve=-N[2],ft=N[3],yt=N[4],Ct=N[5],Xt=N[6],un=N[7],_n=ee*ee+ce*ce+Ve*Ve+ft*ft;return _n>0?(te[0]=(yt*ft+un*ee+Ct*Ve-Xt*ce)*2/_n,te[1]=(Ct*ft+un*ce+Xt*ee-yt*Ve)*2/_n,te[2]=(Xt*ft+un*Ve+yt*ce-Ct*ee)*2/_n):(te[0]=(yt*ft+un*ee+Ct*Ve-Xt*ce)*2,te[1]=(Ct*ft+un*ce+Xt*ee-yt*Ve)*2,te[2]=(Xt*ft+un*Ve+yt*ce-Ct*ee)*2),kt(b,N,te),b}function pt(b,N){return b[0]=N[12],b[1]=N[13],b[2]=N[14],b}function st(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[4],ft=N[5],yt=N[6],Ct=N[8],Xt=N[9],un=N[10];return b[0]=Math.hypot(te,ee,ce),b[1]=Math.hypot(Ve,ft,yt),b[2]=Math.hypot(Ct,Xt,un),b}function Ft(b,N){var te=new O(3);st(te,N);var ee=1/te[0],ce=1/te[1],Ve=1/te[2],ft=N[0]*ee,yt=N[1]*ce,Ct=N[2]*Ve,Xt=N[4]*ee,un=N[5]*ce,_n=N[6]*Ve,Fn=N[8]*ee,jn=N[9]*ce,Ar=N[10]*Ve,Nr=ft+un+Ar,Wn=0;return Nr>0?(Wn=Math.sqrt(Nr+1)*2,b[3]=.25*Wn,b[0]=(_n-jn)/Wn,b[1]=(Fn-Ct)/Wn,b[2]=(yt-Xt)/Wn):ft>un&&ft>Ar?(Wn=Math.sqrt(1+ft-un-Ar)*2,b[3]=(_n-jn)/Wn,b[0]=.25*Wn,b[1]=(yt+Xt)/Wn,b[2]=(Fn+Ct)/Wn):un>Ar?(Wn=Math.sqrt(1+un-ft-Ar)*2,b[3]=(Fn-Ct)/Wn,b[0]=(yt+Xt)/Wn,b[1]=.25*Wn,b[2]=(_n+jn)/Wn):(Wn=Math.sqrt(1+Ar-ft-un)*2,b[3]=(yt-Xt)/Wn,b[0]=(Fn+Ct)/Wn,b[1]=(_n+jn)/Wn,b[2]=.25*Wn),b}function An(b,N,te,ee){var ce=N[0],Ve=N[1],ft=N[2],yt=N[3],Ct=ce+ce,Xt=Ve+Ve,un=ft+ft,_n=ce*Ct,Fn=ce*Xt,jn=ce*un,Ar=Ve*Xt,Nr=Ve*un,Wn=ft*un,Yr=yt*Ct,Xa=yt*Xt,Ta=yt*un,xa=ee[0],wa=ee[1],Oa=ee[2];return b[0]=(1-(Ar+Wn))*xa,b[1]=(Fn+Ta)*xa,b[2]=(jn-Xa)*xa,b[3]=0,b[4]=(Fn-Ta)*wa,b[5]=(1-(_n+Wn))*wa,b[6]=(Nr+Yr)*wa,b[7]=0,b[8]=(jn+Xa)*Oa,b[9]=(Nr-Yr)*Oa,b[10]=(1-(_n+Ar))*Oa,b[11]=0,b[12]=te[0],b[13]=te[1],b[14]=te[2],b[15]=1,b}function Gn(b,N,te,ee,ce){var Ve=N[0],ft=N[1],yt=N[2],Ct=N[3],Xt=Ve+Ve,un=ft+ft,_n=yt+yt,Fn=Ve*Xt,jn=Ve*un,Ar=Ve*_n,Nr=ft*un,Wn=ft*_n,Yr=yt*_n,Xa=Ct*Xt,Ta=Ct*un,xa=Ct*_n,wa=ee[0],Oa=ee[1],Ki=ee[2],_i=ce[0],$i=ce[1],ki=ce[2],Ui=(1-(Nr+Yr))*wa,bt=(jn+xa)*wa,Je=(Ar-Ta)*wa,It=(jn-xa)*Oa,Dn=(1-(Fn+Yr))*Oa,hn=(Wn+Xa)*Oa,rr=(Ar+Ta)*Ki,Or=(Wn-Xa)*Ki,jr=(1-(Fn+Nr))*Ki;return b[0]=Ui,b[1]=bt,b[2]=Je,b[3]=0,b[4]=It,b[5]=Dn,b[6]=hn,b[7]=0,b[8]=rr,b[9]=Or,b[10]=jr,b[11]=0,b[12]=te[0]+_i-(Ui*_i+It*$i+rr*ki),b[13]=te[1]+$i-(bt*_i+Dn*$i+Or*ki),b[14]=te[2]+ki-(Je*_i+hn*$i+jr*ki),b[15]=1,b}function Yn(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=te+te,yt=ee+ee,Ct=ce+ce,Xt=te*ft,un=ee*ft,_n=ee*yt,Fn=ce*ft,jn=ce*yt,Ar=ce*Ct,Nr=Ve*ft,Wn=Ve*yt,Yr=Ve*Ct;return b[0]=1-_n-Ar,b[1]=un+Yr,b[2]=Fn-Wn,b[3]=0,b[4]=un-Yr,b[5]=1-Xt-Ar,b[6]=jn+Nr,b[7]=0,b[8]=Fn+Wn,b[9]=jn-Nr,b[10]=1-Xt-_n,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function vr(b,N,te,ee,ce,Ve,ft){var yt=1/(te-N),Ct=1/(ce-ee),Xt=1/(Ve-ft);return b[0]=Ve*2*yt,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Ve*2*Ct,b[6]=0,b[7]=0,b[8]=(te+N)*yt,b[9]=(ce+ee)*Ct,b[10]=(ft+Ve)*Xt,b[11]=-1,b[12]=0,b[13]=0,b[14]=ft*Ve*2*Xt,b[15]=0,b}function zr(b,N,te,ee,ce){var Ve=1/Math.tan(N/2),ft;return b[0]=Ve/te,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Ve,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,ce!=null&&ce!==Infinity?(ft=1/(ee-ce),b[10]=(ce+ee)*ft,b[14]=2*ce*ee*ft):(b[10]=-1,b[14]=-2*ee),b}function et(b,N,te,ee){var ce=Math.tan(N.upDegrees*Math.PI/180),Ve=Math.tan(N.downDegrees*Math.PI/180),ft=Math.tan(N.leftDegrees*Math.PI/180),yt=Math.tan(N.rightDegrees*Math.PI/180),Ct=2/(ft+yt),Xt=2/(ce+Ve);return b[0]=Ct,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Xt,b[6]=0,b[7]=0,b[8]=-((ft-yt)*Ct*.5),b[9]=(ce-Ve)*Xt*.5,b[10]=ee/(te-ee),b[11]=-1,b[12]=0,b[13]=0,b[14]=ee*te/(te-ee),b[15]=0,b}function wt(b,N,te,ee,ce,Ve,ft){var yt=1/(N-te),Ct=1/(ee-ce),Xt=1/(Ve-ft);return b[0]=-2*yt,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*Ct,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*Xt,b[11]=0,b[12]=(N+te)*yt,b[13]=(ce+ee)*Ct,b[14]=(ft+Ve)*Xt,b[15]=1,b}function lt(b,N,te,ee){var ce,Ve,ft,yt,Ct,Xt,un,_n,Fn,jn,Ar=N[0],Nr=N[1],Wn=N[2],Yr=ee[0],Xa=ee[1],Ta=ee[2],xa=te[0],wa=te[1],Oa=te[2];return Math.abs(Ar-xa)<D&&Math.abs(Nr-wa)<D&&Math.abs(Wn-Oa)<D?Mn(b):(un=Ar-xa,_n=Nr-wa,Fn=Wn-Oa,jn=1/Math.hypot(un,_n,Fn),un*=jn,_n*=jn,Fn*=jn,ce=Xa*Fn-Ta*_n,Ve=Ta*un-Yr*Fn,ft=Yr*_n-Xa*un,jn=Math.hypot(ce,Ve,ft),jn?(jn=1/jn,ce*=jn,Ve*=jn,ft*=jn):(ce=0,Ve=0,ft=0),yt=_n*ft-Fn*Ve,Ct=Fn*ce-un*ft,Xt=un*Ve-_n*ce,jn=Math.hypot(yt,Ct,Xt),jn?(jn=1/jn,yt*=jn,Ct*=jn,Xt*=jn):(yt=0,Ct=0,Xt=0),b[0]=ce,b[1]=yt,b[2]=un,b[3]=0,b[4]=Ve,b[5]=Ct,b[6]=_n,b[7]=0,b[8]=ft,b[9]=Xt,b[10]=Fn,b[11]=0,b[12]=-(ce*Ar+Ve*Nr+ft*Wn),b[13]=-(yt*Ar+Ct*Nr+Xt*Wn),b[14]=-(un*Ar+_n*Nr+Fn*Wn),b[15]=1,b)}function Vt(b,N,te,ee){var ce=N[0],Ve=N[1],ft=N[2],yt=ee[0],Ct=ee[1],Xt=ee[2],un=ce-te[0],_n=Ve-te[1],Fn=ft-te[2],jn=un*un+_n*_n+Fn*Fn;jn>0&&(jn=1/Math.sqrt(jn),un*=jn,_n*=jn,Fn*=jn);var Ar=Ct*Fn-Xt*_n,Nr=Xt*un-yt*Fn,Wn=yt*_n-Ct*un;return jn=Ar*Ar+Nr*Nr+Wn*Wn,jn>0&&(jn=1/Math.sqrt(jn),Ar*=jn,Nr*=jn,Wn*=jn),b[0]=Ar,b[1]=Nr,b[2]=Wn,b[3]=0,b[4]=_n*Wn-Fn*Nr,b[5]=Fn*Ar-un*Wn,b[6]=un*Nr-_n*Ar,b[7]=0,b[8]=un,b[9]=_n,b[10]=Fn,b[11]=0,b[12]=ce,b[13]=Ve,b[14]=ft,b[15]=1,b}function cn(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function We(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}function Jt(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b[3]=N[3]+te[3],b[4]=N[4]+te[4],b[5]=N[5]+te[5],b[6]=N[6]+te[6],b[7]=N[7]+te[7],b[8]=N[8]+te[8],b[9]=N[9]+te[9],b[10]=N[10]+te[10],b[11]=N[11]+te[11],b[12]=N[12]+te[12],b[13]=N[13]+te[13],b[14]=N[14]+te[14],b[15]=N[15]+te[15],b}function vt(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b[3]=N[3]-te[3],b[4]=N[4]-te[4],b[5]=N[5]-te[5],b[6]=N[6]-te[6],b[7]=N[7]-te[7],b[8]=N[8]-te[8],b[9]=N[9]-te[9],b[10]=N[10]-te[10],b[11]=N[11]-te[11],b[12]=N[12]-te[12],b[13]=N[13]-te[13],b[14]=N[14]-te[14],b[15]=N[15]-te[15],b}function Kn(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b[3]=N[3]*te,b[4]=N[4]*te,b[5]=N[5]*te,b[6]=N[6]*te,b[7]=N[7]*te,b[8]=N[8]*te,b[9]=N[9]*te,b[10]=N[10]*te,b[11]=N[11]*te,b[12]=N[12]*te,b[13]=N[13]*te,b[14]=N[14]*te,b[15]=N[15]*te,b}function kr(b,N,te,ee){return b[0]=N[0]+te[0]*ee,b[1]=N[1]+te[1]*ee,b[2]=N[2]+te[2]*ee,b[3]=N[3]+te[3]*ee,b[4]=N[4]+te[4]*ee,b[5]=N[5]+te[5]*ee,b[6]=N[6]+te[6]*ee,b[7]=N[7]+te[7]*ee,b[8]=N[8]+te[8]*ee,b[9]=N[9]+te[9]*ee,b[10]=N[10]+te[10]*ee,b[11]=N[11]+te[11]*ee,b[12]=N[12]+te[12]*ee,b[13]=N[13]+te[13]*ee,b[14]=N[14]+te[14]*ee,b[15]=N[15]+te[15]*ee,b}function Ur(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]&&b[3]===N[3]&&b[4]===N[4]&&b[5]===N[5]&&b[6]===N[6]&&b[7]===N[7]&&b[8]===N[8]&&b[9]===N[9]&&b[10]===N[10]&&b[11]===N[11]&&b[12]===N[12]&&b[13]===N[13]&&b[14]===N[14]&&b[15]===N[15]}function fa(b,N){var te=b[0],ee=b[1],ce=b[2],Ve=b[3],ft=b[4],yt=b[5],Ct=b[6],Xt=b[7],un=b[8],_n=b[9],Fn=b[10],jn=b[11],Ar=b[12],Nr=b[13],Wn=b[14],Yr=b[15],Xa=N[0],Ta=N[1],xa=N[2],wa=N[3],Oa=N[4],Ki=N[5],_i=N[6],$i=N[7],ki=N[8],Ui=N[9],bt=N[10],Je=N[11],It=N[12],Dn=N[13],hn=N[14],rr=N[15];return Math.abs(te-Xa)<=D*Math.max(1,Math.abs(te),Math.abs(Xa))&&Math.abs(ee-Ta)<=D*Math.max(1,Math.abs(ee),Math.abs(Ta))&&Math.abs(ce-xa)<=D*Math.max(1,Math.abs(ce),Math.abs(xa))&&Math.abs(Ve-wa)<=D*Math.max(1,Math.abs(Ve),Math.abs(wa))&&Math.abs(ft-Oa)<=D*Math.max(1,Math.abs(ft),Math.abs(Oa))&&Math.abs(yt-Ki)<=D*Math.max(1,Math.abs(yt),Math.abs(Ki))&&Math.abs(Ct-_i)<=D*Math.max(1,Math.abs(Ct),Math.abs(_i))&&Math.abs(Xt-$i)<=D*Math.max(1,Math.abs(Xt),Math.abs($i))&&Math.abs(un-ki)<=D*Math.max(1,Math.abs(un),Math.abs(ki))&&Math.abs(_n-Ui)<=D*Math.max(1,Math.abs(_n),Math.abs(Ui))&&Math.abs(Fn-bt)<=D*Math.max(1,Math.abs(Fn),Math.abs(bt))&&Math.abs(jn-Je)<=D*Math.max(1,Math.abs(jn),Math.abs(Je))&&Math.abs(Ar-It)<=D*Math.max(1,Math.abs(Ar),Math.abs(It))&&Math.abs(Nr-Dn)<=D*Math.max(1,Math.abs(Nr),Math.abs(Dn))&&Math.abs(Wn-hn)<=D*Math.max(1,Math.abs(Wn),Math.abs(hn))&&Math.abs(Yr-rr)<=D*Math.max(1,Math.abs(Yr),Math.abs(rr))}var ea=pn,ia=vt;function Va(){var b=new O(3);return O!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function da(b){var N=new O(3);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N}function $a(b){var N=b[0],te=b[1],ee=b[2];return Math.hypot(N,te,ee)}function di(b,N,te){var ee=new O(3);return ee[0]=b,ee[1]=N,ee[2]=te,ee}function Da(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b}function Ya(b,N,te,ee){return b[0]=N,b[1]=te,b[2]=ee,b}function ro(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b}function ys(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b}function Co(b,N,te){return b[0]=N[0]*te[0],b[1]=N[1]*te[1],b[2]=N[2]*te[2],b}function Gs(b,N,te){return b[0]=N[0]/te[0],b[1]=N[1]/te[1],b[2]=N[2]/te[2],b}function Ho(b,N){return b[0]=Math.ceil(N[0]),b[1]=Math.ceil(N[1]),b[2]=Math.ceil(N[2]),b}function rs(b,N){return b[0]=Math.floor(N[0]),b[1]=Math.floor(N[1]),b[2]=Math.floor(N[2]),b}function as(b,N,te){return b[0]=Math.min(N[0],te[0]),b[1]=Math.min(N[1],te[1]),b[2]=Math.min(N[2],te[2]),b}function _s(b,N,te){return b[0]=Math.max(N[0],te[0]),b[1]=Math.max(N[1],te[1]),b[2]=Math.max(N[2],te[2]),b}function Js(b,N){return b[0]=Math.round(N[0]),b[1]=Math.round(N[1]),b[2]=Math.round(N[2]),b}function fo(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b}function To(b,N,te,ee){return b[0]=N[0]+te[0]*ee,b[1]=N[1]+te[1]*ee,b[2]=N[2]+te[2]*ee,b}function bs(b,N){var te=N[0]-b[0],ee=N[1]-b[1],ce=N[2]-b[2];return Math.hypot(te,ee,ce)}function bo(b,N){var te=N[0]-b[0],ee=N[1]-b[1],ce=N[2]-b[2];return te*te+ee*ee+ce*ce}function Es(b){var N=b[0],te=b[1],ee=b[2];return N*N+te*te+ee*ee}function vu(b,N){return b[0]=-N[0],b[1]=-N[1],b[2]=-N[2],b}function Zs(b,N){return b[0]=1/N[0],b[1]=1/N[1],b[2]=1/N[2],b}function Ko(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=te*te+ee*ee+ce*ce;return Ve>0&&(Ve=1/Math.sqrt(Ve)),b[0]=N[0]*Ve,b[1]=N[1]*Ve,b[2]=N[2]*Ve,b}function is(b,N){return b[0]*N[0]+b[1]*N[1]+b[2]*N[2]}function cs(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=te[0],yt=te[1],Ct=te[2];return b[0]=ce*Ct-Ve*yt,b[1]=Ve*ft-ee*Ct,b[2]=ee*yt-ce*ft,b}function qs(b,N,te,ee){var ce=N[0],Ve=N[1],ft=N[2];return b[0]=ce+ee*(te[0]-ce),b[1]=Ve+ee*(te[1]-Ve),b[2]=ft+ee*(te[2]-ft),b}function Ju(b,N,te,ee,ce,Ve){var ft=Ve*Ve,yt=ft*(2*Ve-3)+1,Ct=ft*(Ve-2)+Ve,Xt=ft*(Ve-1),un=ft*(3-2*Ve);return b[0]=N[0]*yt+te[0]*Ct+ee[0]*Xt+ce[0]*un,b[1]=N[1]*yt+te[1]*Ct+ee[1]*Xt+ce[1]*un,b[2]=N[2]*yt+te[2]*Ct+ee[2]*Xt+ce[2]*un,b}function eu(b,N,te,ee,ce,Ve){var ft=1-Ve,yt=ft*ft,Ct=Ve*Ve,Xt=yt*ft,un=3*Ve*yt,_n=3*Ct*ft,Fn=Ct*Ve;return b[0]=N[0]*Xt+te[0]*un+ee[0]*_n+ce[0]*Fn,b[1]=N[1]*Xt+te[1]*un+ee[1]*_n+ce[1]*Fn,b[2]=N[2]*Xt+te[2]*un+ee[2]*_n+ce[2]*Fn,b}function Wi(b,N){N=N||1;var te=L()*2*Math.PI,ee=L()*2-1,ce=Math.sqrt(1-ee*ee)*N;return b[0]=Math.cos(te)*ce,b[1]=Math.sin(te)*ce,b[2]=ee*N,b}function ji(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=te[3]*ee+te[7]*ce+te[11]*Ve+te[15];return ft=ft||1,b[0]=(te[0]*ee+te[4]*ce+te[8]*Ve+te[12])/ft,b[1]=(te[1]*ee+te[5]*ce+te[9]*Ve+te[13])/ft,b[2]=(te[2]*ee+te[6]*ce+te[10]*Ve+te[14])/ft,b}function _o(b,N,te){var ee=N[0],ce=N[1],Ve=N[2];return b[0]=ee*te[0]+ce*te[3]+Ve*te[6],b[1]=ee*te[1]+ce*te[4]+Ve*te[7],b[2]=ee*te[2]+ce*te[5]+Ve*te[8],b}function mu(b,N,te){var ee=te[0],ce=te[1],Ve=te[2],ft=te[3],yt=N[0],Ct=N[1],Xt=N[2],un=ce*Xt-Ve*Ct,_n=Ve*yt-ee*Xt,Fn=ee*Ct-ce*yt,jn=ce*Fn-Ve*_n,Ar=Ve*un-ee*Fn,Nr=ee*_n-ce*un,Wn=ft*2;return un*=Wn,_n*=Wn,Fn*=Wn,jn*=2,Ar*=2,Nr*=2,b[0]=yt+un+jn,b[1]=Ct+_n+Ar,b[2]=Xt+Fn+Nr,b}function Pl(b,N,te,ee){var ce=[],Ve=[];return ce[0]=N[0]-te[0],ce[1]=N[1]-te[1],ce[2]=N[2]-te[2],Ve[0]=ce[0],Ve[1]=ce[1]*Math.cos(ee)-ce[2]*Math.sin(ee),Ve[2]=ce[1]*Math.sin(ee)+ce[2]*Math.cos(ee),b[0]=Ve[0]+te[0],b[1]=Ve[1]+te[1],b[2]=Ve[2]+te[2],b}function Fo(b,N,te,ee){var ce=[],Ve=[];return ce[0]=N[0]-te[0],ce[1]=N[1]-te[1],ce[2]=N[2]-te[2],Ve[0]=ce[2]*Math.sin(ee)+ce[0]*Math.cos(ee),Ve[1]=ce[1],Ve[2]=ce[2]*Math.cos(ee)-ce[0]*Math.sin(ee),b[0]=Ve[0]+te[0],b[1]=Ve[1]+te[1],b[2]=Ve[2]+te[2],b}function ks(b,N,te,ee){var ce=[],Ve=[];return ce[0]=N[0]-te[0],ce[1]=N[1]-te[1],ce[2]=N[2]-te[2],Ve[0]=ce[0]*Math.cos(ee)-ce[1]*Math.sin(ee),Ve[1]=ce[0]*Math.sin(ee)+ce[1]*Math.cos(ee),Ve[2]=ce[2],b[0]=Ve[0]+te[0],b[1]=Ve[1]+te[1],b[2]=Ve[2]+te[2],b}function gu(b,N){var te=b[0],ee=b[1],ce=b[2],Ve=N[0],ft=N[1],yt=N[2],Ct=Math.sqrt(te*te+ee*ee+ce*ce),Xt=Math.sqrt(Ve*Ve+ft*ft+yt*yt),un=Ct*Xt,_n=un&&is(b,N)/un;return Math.acos(Math.min(Math.max(_n,-1),1))}function Jl(b){return b[0]=0,b[1]=0,b[2]=0,b}function Zl(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"}function Iu(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]}function yu(b,N){var te=b[0],ee=b[1],ce=b[2],Ve=N[0],ft=N[1],yt=N[2];return Math.abs(te-Ve)<=D*Math.max(1,Math.abs(te),Math.abs(Ve))&&Math.abs(ee-ft)<=D*Math.max(1,Math.abs(ee),Math.abs(ft))&&Math.abs(ce-yt)<=D*Math.max(1,Math.abs(ce),Math.abs(yt))}var os=ys,Bi=Co,Mi=Gs,Bo=bs,ds=bo,Zu=$a,Lu=Es,ql=function(){var b=Va();return function(N,te,ee,ce,Ve,ft){var yt,Ct;for(te||(te=3),ee||(ee=0),ce?Ct=Math.min(ce*te+ee,N.length):Ct=N.length,yt=ee;yt<Ct;yt+=te)b[0]=N[yt],b[1]=N[yt+1],b[2]=N[yt+2],Ve(b,b,ft),N[yt]=b[0],N[yt+1]=b[1],N[yt+2]=b[2];return N}}();function ec(){var b=new O(4);return O!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b}function tu(b){var N=new O(4);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N[3]=b[3],N}function Ns(b,N,te,ee){var ce=new O(4);return ce[0]=b,ce[1]=N,ce[2]=te,ce[3]=ee,ce}function nu(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b}function pl(b,N,te,ee,ce){return b[0]=N,b[1]=te,b[2]=ee,b[3]=ce,b}function Wc(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b[3]=N[3]+te[3],b}function Hc(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b[3]=N[3]-te[3],b}function Il(b,N,te){return b[0]=N[0]*te[0],b[1]=N[1]*te[1],b[2]=N[2]*te[2],b[3]=N[3]*te[3],b}function vl(b,N,te){return b[0]=N[0]/te[0],b[1]=N[1]/te[1],b[2]=N[2]/te[2],b[3]=N[3]/te[3],b}function xc(b,N){return b[0]=Math.ceil(N[0]),b[1]=Math.ceil(N[1]),b[2]=Math.ceil(N[2]),b[3]=Math.ceil(N[3]),b}function Ll(b,N){return b[0]=Math.floor(N[0]),b[1]=Math.floor(N[1]),b[2]=Math.floor(N[2]),b[3]=Math.floor(N[3]),b}function bu(b,N,te){return b[0]=Math.min(N[0],te[0]),b[1]=Math.min(N[1],te[1]),b[2]=Math.min(N[2],te[2]),b[3]=Math.min(N[3],te[3]),b}function tc(b,N,te){return b[0]=Math.max(N[0],te[0]),b[1]=Math.max(N[1],te[1]),b[2]=Math.max(N[2],te[2]),b[3]=Math.max(N[3],te[3]),b}function wc(b,N){return b[0]=Math.round(N[0]),b[1]=Math.round(N[1]),b[2]=Math.round(N[2]),b[3]=Math.round(N[3]),b}function Eu(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b[3]=N[3]*te,b}function nc(b,N,te,ee){return b[0]=N[0]+te[0]*ee,b[1]=N[1]+te[1]*ee,b[2]=N[2]+te[2]*ee,b[3]=N[3]+te[3]*ee,b}function ml(b,N){var te=N[0]-b[0],ee=N[1]-b[1],ce=N[2]-b[2],Ve=N[3]-b[3];return Math.hypot(te,ee,ce,Ve)}function gl(b,N){var te=N[0]-b[0],ee=N[1]-b[1],ce=N[2]-b[2],Ve=N[3]-b[3];return te*te+ee*ee+ce*ce+Ve*Ve}function jl(b){var N=b[0],te=b[1],ee=b[2],ce=b[3];return Math.hypot(N,te,ee,ce)}function yl(b){var N=b[0],te=b[1],ee=b[2],ce=b[3];return N*N+te*te+ee*ee+ce*ce}function Cc(b,N){return b[0]=-N[0],b[1]=-N[1],b[2]=-N[2],b[3]=-N[3],b}function $o(b,N){return b[0]=1/N[0],b[1]=1/N[1],b[2]=1/N[2],b[3]=1/N[3],b}function Qa(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=te*te+ee*ee+ce*ce+Ve*Ve;return ft>0&&(ft=1/Math.sqrt(ft)),b[0]=te*ft,b[1]=ee*ft,b[2]=ce*ft,b[3]=Ve*ft,b}function Rs(b,N){return b[0]*N[0]+b[1]*N[1]+b[2]*N[2]+b[3]*N[3]}function Pa(b,N,te,ee){var ce=te[0]*ee[1]-te[1]*ee[0],Ve=te[0]*ee[2]-te[2]*ee[0],ft=te[0]*ee[3]-te[3]*ee[0],yt=te[1]*ee[2]-te[2]*ee[1],Ct=te[1]*ee[3]-te[3]*ee[1],Xt=te[2]*ee[3]-te[3]*ee[2],un=N[0],_n=N[1],Fn=N[2],jn=N[3];return b[0]=_n*Xt-Fn*Ct+jn*yt,b[1]=-(un*Xt)+Fn*ft-jn*Ve,b[2]=un*Ct-_n*ft+jn*ce,b[3]=-(un*yt)+_n*Ve-Fn*ce,b}function qu(b,N,te,ee){var ce=N[0],Ve=N[1],ft=N[2],yt=N[3];return b[0]=ce+ee*(te[0]-ce),b[1]=Ve+ee*(te[1]-Ve),b[2]=ft+ee*(te[2]-ft),b[3]=yt+ee*(te[3]-yt),b}function xu(b,N){N=N||1;var te,ee,ce,Ve,ft,yt;do te=L()*2-1,ee=L()*2-1,ft=te*te+ee*ee;while(ft>=1);do ce=L()*2-1,Ve=L()*2-1,yt=ce*ce+Ve*Ve;while(yt>=1);var Ct=Math.sqrt((1-ft)/yt);return b[0]=N*te,b[1]=N*ee,b[2]=N*ce*Ct,b[3]=N*Ve*Ct,b}function $(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=N[3];return b[0]=te[0]*ee+te[4]*ce+te[8]*Ve+te[12]*ft,b[1]=te[1]*ee+te[5]*ce+te[9]*Ve+te[13]*ft,b[2]=te[2]*ee+te[6]*ce+te[10]*Ve+te[14]*ft,b[3]=te[3]*ee+te[7]*ce+te[11]*Ve+te[15]*ft,b}function R(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=te[0],yt=te[1],Ct=te[2],Xt=te[3],un=Xt*ee+yt*Ve-Ct*ce,_n=Xt*ce+Ct*ee-ft*Ve,Fn=Xt*Ve+ft*ce-yt*ee,jn=-ft*ee-yt*ce-Ct*Ve;return b[0]=un*Xt+jn*-ft+_n*-Ct-Fn*-yt,b[1]=_n*Xt+jn*-yt+Fn*-ft-un*-Ct,b[2]=Fn*Xt+jn*-Ct+un*-yt-_n*-ft,b[3]=N[3],b}function G(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b}function Y(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"}function fe(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]&&b[3]===N[3]}function Se(b,N){var te=b[0],ee=b[1],ce=b[2],Ve=b[3],ft=N[0],yt=N[1],Ct=N[2],Xt=N[3];return Math.abs(te-ft)<=D*Math.max(1,Math.abs(te),Math.abs(ft))&&Math.abs(ee-yt)<=D*Math.max(1,Math.abs(ee),Math.abs(yt))&&Math.abs(ce-Ct)<=D*Math.max(1,Math.abs(ce),Math.abs(Ct))&&Math.abs(Ve-Xt)<=D*Math.max(1,Math.abs(Ve),Math.abs(Xt))}var Ie=Hc,Ze=Il,Pt=vl,zt=ml,Cn=gl,Sr=jl,Dr=yl,en=function(){var b=ec();return function(N,te,ee,ce,Ve,ft){var yt,Ct;for(te||(te=4),ee||(ee=0),ce?Ct=Math.min(ce*te+ee,N.length):Ct=N.length,yt=ee;yt<Ct;yt+=te)b[0]=N[yt],b[1]=N[yt+1],b[2]=N[yt+2],b[3]=N[yt+3],Ve(b,b,ft),N[yt]=b[0],N[yt+1]=b[1],N[yt+2]=b[2],N[yt+3]=b[3];return N}}();function sr(){var b=new O(4);return O!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function Kr(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b}function ma(b,N,te){te=te*.5;var ee=Math.sin(te);return b[0]=ee*N[0],b[1]=ee*N[1],b[2]=ee*N[2],b[3]=Math.cos(te),b}function sa(b,N){var te=Math.acos(N[3])*2,ee=Math.sin(te/2);return ee>D?(b[0]=N[0]/ee,b[1]=N[1]/ee,b[2]=N[2]/ee):(b[0]=1,b[1]=0,b[2]=0),te}function Yo(b,N){var te=xs(b,N);return Math.acos(2*te*te-1)}function ka(b,N,te){var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=te[0],Ct=te[1],Xt=te[2],un=te[3];return b[0]=ee*un+ft*yt+ce*Xt-Ve*Ct,b[1]=ce*un+ft*Ct+Ve*yt-ee*Xt,b[2]=Ve*un+ft*Xt+ee*Ct-ce*yt,b[3]=ft*un-ee*yt-ce*Ct-Ve*Xt,b}function bi(b,N,te){te*=.5;var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=Math.sin(te),Ct=Math.cos(te);return b[0]=ee*Ct+ft*yt,b[1]=ce*Ct+Ve*yt,b[2]=Ve*Ct-ce*yt,b[3]=ft*Ct-ee*yt,b}function Na(b,N,te){te*=.5;var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=Math.sin(te),Ct=Math.cos(te);return b[0]=ee*Ct-Ve*yt,b[1]=ce*Ct+ft*yt,b[2]=Ve*Ct+ee*yt,b[3]=ft*Ct-ce*yt,b}function Sa(b,N,te){te*=.5;var ee=N[0],ce=N[1],Ve=N[2],ft=N[3],yt=Math.sin(te),Ct=Math.cos(te);return b[0]=ee*Ct+ce*yt,b[1]=ce*Ct-ee*yt,b[2]=Ve*Ct+ft*yt,b[3]=ft*Ct-Ve*yt,b}function rt(b,N){var te=N[0],ee=N[1],ce=N[2];return b[0]=te,b[1]=ee,b[2]=ce,b[3]=Math.sqrt(Math.abs(1-te*te-ee*ee-ce*ce)),b}function Rn(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=Math.sqrt(te*te+ee*ee+ce*ce),yt=Math.exp(Ve),Ct=ft>0?yt*Math.sin(ft)/ft:0;return b[0]=te*Ct,b[1]=ee*Ct,b[2]=ce*Ct,b[3]=yt*Math.cos(ft),b}function Qr(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=Math.sqrt(te*te+ee*ee+ce*ce),yt=ft>0?Math.atan2(ft,Ve)/ft:0;return b[0]=te*yt,b[1]=ee*yt,b[2]=ce*yt,b[3]=.5*Math.log(te*te+ee*ee+ce*ce+Ve*Ve),b}function mi(b,N,te){return Qr(b,N),Ps(b,b,te),Rn(b,b),b}function Hi(b,N,te,ee){var ce=N[0],Ve=N[1],ft=N[2],yt=N[3],Ct=te[0],Xt=te[1],un=te[2],_n=te[3],Fn,jn,Ar,Nr,Wn;return jn=ce*Ct+Ve*Xt+ft*un+yt*_n,jn<0&&(jn=-jn,Ct=-Ct,Xt=-Xt,un=-un,_n=-_n),1-jn>D?(Fn=Math.acos(jn),Ar=Math.sin(Fn),Nr=Math.sin((1-ee)*Fn)/Ar,Wn=Math.sin(ee*Fn)/Ar):(Nr=1-ee,Wn=ee),b[0]=Nr*ce+Wn*Ct,b[1]=Nr*Ve+Wn*Xt,b[2]=Nr*ft+Wn*un,b[3]=Nr*yt+Wn*_n,b}function ho(b){var N=L(),te=L(),ee=L(),ce=Math.sqrt(1-N),Ve=Math.sqrt(N);return b[0]=ce*Math.sin(2*Math.PI*te),b[1]=ce*Math.cos(2*Math.PI*te),b[2]=Ve*Math.sin(2*Math.PI*ee),b[3]=Ve*Math.cos(2*Math.PI*ee),b}function Ao(b,N){var te=N[0],ee=N[1],ce=N[2],Ve=N[3],ft=te*te+ee*ee+ce*ce+Ve*Ve,yt=ft?1/ft:0;return b[0]=-te*yt,b[1]=-ee*yt,b[2]=-ce*yt,b[3]=Ve*yt,b}function uo(b,N){return b[0]=-N[0],b[1]=-N[1],b[2]=-N[2],b[3]=N[3],b}function Io(b,N){var te=N[0]+N[4]+N[8],ee;if(te>0)ee=Math.sqrt(te+1),b[3]=.5*ee,ee=.5/ee,b[0]=(N[5]-N[7])*ee,b[1]=(N[6]-N[2])*ee,b[2]=(N[1]-N[3])*ee;else{var ce=0;N[4]>N[0]&&(ce=1),N[8]>N[ce*3+ce]&&(ce=2);var Ve=(ce+1)%3,ft=(ce+2)%3;ee=Math.sqrt(N[ce*3+ce]-N[Ve*3+Ve]-N[ft*3+ft]+1),b[ce]=.5*ee,ee=.5/ee,b[3]=(N[Ve*3+ft]-N[ft*3+Ve])*ee,b[Ve]=(N[Ve*3+ce]+N[ce*3+Ve])*ee,b[ft]=(N[ft*3+ce]+N[ce*3+ft])*ee}return b}function Lo(b,N,te,ee){var ce=.5*Math.PI/180;N*=ce,te*=ce,ee*=ce;var Ve=Math.sin(N),ft=Math.cos(N),yt=Math.sin(te),Ct=Math.cos(te),Xt=Math.sin(ee),un=Math.cos(ee);return b[0]=Ve*Ct*un-ft*yt*Xt,b[1]=ft*yt*un+Ve*Ct*Xt,b[2]=ft*Ct*Xt-Ve*yt*un,b[3]=ft*Ct*un+Ve*yt*Xt,b}function Vi(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"}var wu=tu,Qo=Ns,el=nu,ua=pl,fs=Wc,Cu=ka,Ps=Eu,xs=Rs,ju=qu,ru=jl,Is=ru,au=yl,Uu=au,Fu=Qa,ws=fe,hs=Se,Eo=function(){var b=Va(),N=di(1,0,0),te=di(0,1,0);return function(ee,ce,Ve){var ft=is(ce,Ve);return ft<-.999999?(cs(b,N,ce),Zu(b)<1e-6&&cs(b,te,ce),Ko(b,b),ma(ee,b,Math.PI),ee):ft>.999999?(ee[0]=0,ee[1]=0,ee[2]=0,ee[3]=1,ee):(cs(b,ce,Ve),ee[0]=b[0],ee[1]=b[1],ee[2]=b[2],ee[3]=1+ft,Fu(ee,ee))}}(),Ul=function(){var b=sr(),N=sr();return function(te,ee,ce,Ve,ft,yt){return Hi(b,ee,ft,yt),Hi(N,ce,Ve,yt),Hi(te,b,N,2*yt*(1-yt)),te}}(),Ua=function(){var b=J();return function(N,te,ee,ce){return b[0]=ee[0],b[3]=ee[1],b[6]=ee[2],b[1]=ce[0],b[4]=ce[1],b[7]=ce[2],b[2]=-te[0],b[5]=-te[1],b[8]=-te[2],Fu(N,Io(N,b))}}()},function(j,_,u){"use strict";j.exports=u(297)},function(j,_,u){"use strict";u.d(_,"AST_TOKEN_TYPES",function(){return Ae}),u.d(_,"STORAGE_CLASS",function(){return At}),u.d(_,"Target",function(){return mt}),u.d(_,"DefineValuePlaceholder",function(){return Dt});var g=u(228),f=u.n(g),E=u(28),T=u(137),w=u(139),D=u(124),O=u(125),L=u(126),U=u(127),V=u(128),z=u(129),K=u(79),J=u(131),he=u(132),ue=u(133),de=u(134),ae=u(123);u.d(_,"createEntity",function(){return ae.b});var le=u(16);u.d(_,"IDENTIFIER",function(){return le.a});var re=u(100);u.d(_,"createWorldContainer",function(){return re.a});var se=u(237);u.d(_,"generateAABBFromVertices",function(){return se.a});var ye=u(238);u.d(_,"isSafari",function(){return ye.a});var Z=u(264),Ee=u(265);u.d(_,"AABB",function(){return Ee.a}),u.d(_,"Frustum",function(){return Ee.b});var k=u(121);u.o(k,"gl")&&u.d(_,"gl",function(){return k.gl});var Te=u(250),De=u.n(Te);u.o(Te,"gl")&&u.d(_,"gl",function(){return Te.gl});var Ue=u(251),St=u.n(Ue);u.o(Ue,"gl")&&u.d(_,"gl",function(){return Ue.gl}),u.o(k,"gl")&&u.d(_,"gl",function(){return k.gl});var Ae;(function(Ke){Ke.Void="Void",Ke.Boolean="Boolean",Ke.Float="Float",Ke.Uint32="Uint32",Ke.Int32="Int32",Ke.Vector="Vector",Ke.Vector2Float="vec2<f32>",Ke.Vector3Float="vec3<f32>",Ke.Vector4Float="vec4<f32>",Ke.Vector2Boolean="vec2<bool>",Ke.Vector3Boolean="vec3<bool>",Ke.Vector4Boolean="vec4<bool>",Ke.Vector2Uint="vec2<u32>",Ke.Vector3Uint="vec3<u32>",Ke.Vector4Uint="vec4<u32>",Ke.Vector2Int="vec2<i32>",Ke.Vector3Int="vec3<i32>",Ke.Vector4Int="vec4<i32>",Ke.Matrix="Matrix",Ke.Matrix3x3Float="mat3x3<f32>",Ke.Matrix4x4Float="mat4x4<i32>",Ke.Struct="Struct",Ke.FloatArray="Float[]",Ke.Vector4FloatArray="vec4<f32>[]"})(Ae||(Ae={}));var Wt;(function(Ke){Ke.Program="Program",Ke.Identifier="Identifier",Ke.VariableDeclaration="VariableDeclaration",Ke.BlockStatement="BlockStatement",Ke.ReturnStatement="ReturnStatement",Ke.FunctionDeclaration="FunctionDeclaration",Ke.VariableDeclarator="VariableDeclarator",Ke.AssignmentExpression="AssignmentExpression",Ke.LogicalExpression="LogicalExpression",Ke.BinaryExpression="BinaryExpression",Ke.ArrayExpression="ArrayExpression",Ke.UnaryExpression="UnaryExpression",Ke.UpdateExpression="UpdateExpression",Ke.FunctionExpression="FunctionExpression",Ke.MemberExpression="MemberExpression",Ke.ConditionalExpression="ConditionalExpression",Ke.ExpressionStatement="ExpressionStatement",Ke.CallExpression="CallExpression",Ke.NumThreadStatement="NumThreadStatement",Ke.StorageStatement="StorageStatement",Ke.DoWhileStatement="DoWhileStatement",Ke.WhileStatement="WhileStatement",Ke.ForStatement="ForStatement",Ke.BreakStatement="BreakStatement",Ke.ContinueStatement="ContinueStatement",Ke.IfStatement="IfStatement",Ke.ImportedFunctionStatement="ImportedFunctionStatement"})(Wt||(Wt={}));var At;(function(Ke){Ke.Input="Input",Ke.Output="Output",Ke.Uniform="Uniform",Ke.Workgroup="Workgroup",Ke.UniformConstant="UniformConstant",Ke.Image="Image",Ke.StorageBuffer="StorageBuffer",Ke.Private="Private",Ke.Function="Function"})(At||(At={}));var mt;(function(Ke){Ke.GLSL100="GLSL100",Ke.GLSL450="GLSL450",Ke.WGSL="WGSL"})(mt||(mt={}));var Dt="__DefineValuePlaceholder__"},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f,E){if(!(f instanceof E))throw new TypeError("Cannot call a class as a function")}},function(j,_,u){"use strict";u.d(_,"a",function(){return f});function g(E,T){for(var w=0;w<T.length;w++){var D=T[w];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}function f(E,T,w){return T&&g(E.prototype,T),w&&g(E,w),E}},function(j,_,u){"use strict";u.d(_,"a",function(){return f});function g(E,T){return g=Object.setPrototypeOf||function(D,O){return D.__proto__=O,D},g(E,T)}function f(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(T&&T.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),T&&g(E,T)}},function(j,_,u){"use strict";u.d(_,"a",function(){return T});var g=u(17);function f(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}var E=u(71);function T(w){return function(){var D=Object(g.a)(w),O;if(f()){var L=Object(g.a)(this).constructor;O=Reflect.construct(D,arguments,L)}else O=D.apply(this,arguments);return Object(E.a)(this,O)}}},function(j,_){function u(g,f,E){return f in g?Object.defineProperty(g,f,{value:E,enumerable:!0,configurable:!0,writable:!0}):g[f]=E,g}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.multiBindToService=_.getServiceIdentifierAsString=_.typeConstraint=_.namedConstraint=_.taggedConstraint=_.traverseAncerstors=_.decorate=_.id=_.MetadataReader=_.postConstruct=_.targetName=_.multiInject=_.unmanaged=_.optional=_.LazyServiceIdentifer=_.inject=_.named=_.tagged=_.injectable=_.ContainerModule=_.AsyncContainerModule=_.TargetTypeEnum=_.BindingTypeEnum=_.BindingScopeEnum=_.Container=_.METADATA_KEY=void 0;var g=u(38);_.METADATA_KEY=g;var f=u(492);Object.defineProperty(_,"Container",{enumerable:!0,get:function(){return f.Container}});var E=u(64);Object.defineProperty(_,"BindingScopeEnum",{enumerable:!0,get:function(){return E.BindingScopeEnum}}),Object.defineProperty(_,"BindingTypeEnum",{enumerable:!0,get:function(){return E.BindingTypeEnum}}),Object.defineProperty(_,"TargetTypeEnum",{enumerable:!0,get:function(){return E.TargetTypeEnum}});var T=u(508);Object.defineProperty(_,"AsyncContainerModule",{enumerable:!0,get:function(){return T.AsyncContainerModule}}),Object.defineProperty(_,"ContainerModule",{enumerable:!0,get:function(){return T.ContainerModule}});var w=u(509);Object.defineProperty(_,"injectable",{enumerable:!0,get:function(){return w.injectable}});var D=u(510);Object.defineProperty(_,"tagged",{enumerable:!0,get:function(){return D.tagged}});var O=u(511);Object.defineProperty(_,"named",{enumerable:!0,get:function(){return O.named}});var L=u(233);Object.defineProperty(_,"inject",{enumerable:!0,get:function(){return L.inject}}),Object.defineProperty(_,"LazyServiceIdentifer",{enumerable:!0,get:function(){return L.LazyServiceIdentifer}});var U=u(512);Object.defineProperty(_,"optional",{enumerable:!0,get:function(){return U.optional}});var V=u(513);Object.defineProperty(_,"unmanaged",{enumerable:!0,get:function(){return V.unmanaged}});var z=u(514);Object.defineProperty(_,"multiInject",{enumerable:!0,get:function(){return z.multiInject}});var K=u(515);Object.defineProperty(_,"targetName",{enumerable:!0,get:function(){return K.targetName}});var J=u(516);Object.defineProperty(_,"postConstruct",{enumerable:!0,get:function(){return J.postConstruct}});var he=u(231);Object.defineProperty(_,"MetadataReader",{enumerable:!0,get:function(){return he.MetadataReader}});var ue=u(78);Object.defineProperty(_,"id",{enumerable:!0,get:function(){return ue.id}});var de=u(68);Object.defineProperty(_,"decorate",{enumerable:!0,get:function(){return de.decorate}});var ae=u(236);Object.defineProperty(_,"traverseAncerstors",{enumerable:!0,get:function(){return ae.traverseAncerstors}}),Object.defineProperty(_,"taggedConstraint",{enumerable:!0,get:function(){return ae.taggedConstraint}}),Object.defineProperty(_,"namedConstraint",{enumerable:!0,get:function(){return ae.namedConstraint}}),Object.defineProperty(_,"typeConstraint",{enumerable:!0,get:function(){return ae.typeConstraint}});var le=u(99);Object.defineProperty(_,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return le.getServiceIdentifierAsString}});var re=u(517);Object.defineProperty(_,"multiBindToService",{enumerable:!0,get:function(){return re.multiBindToService}})},function(j,_){function u(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function")}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(f,E){for(var T=0;T<E.length;T++){var w=E[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}function g(f,E,T){return E&&u(f.prototype,E),T&&u(f,T),f}j.exports=g,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var g;(function(Ae){Ae.TextureCompressionBC="texture-compression-bc"})(g=_.ExtensionName||(_.ExtensionName={}));var f;(function(Ae){Ae.ClampToEdge="clamp-to-edge",Ae.Repeat="repeat",Ae.MirrorRepeat="mirror-repeat"})(f=_.AddressMode||(_.AddressMode={}));var E;(function(Ae){Ae.UniformBuffer="uniform-buffer",Ae.StorageBuffer="storage-buffer",Ae.ReadonlyStorageBuffer="readonly-storage-buffer",Ae.Sampler="sampler",Ae.ComparisonSampler="comparison-sampler",Ae.SampledTexture="sampled-texture",Ae.ReadonlyStorageTexture="readonly-storage-texture",Ae.WriteonlyStorageTexture="writeonly-storage-texture"})(E=_.BindingType||(_.BindingType={}));var T;(function(Ae){Ae.Zero="zero",Ae.One="one",Ae.SrcColor="src-color",Ae.OneMinusSrcColor="one-minus-src-color",Ae.SrcAlpha="src-alpha",Ae.OneMinusSrcAlpha="one-minus-src-alpha",Ae.DstColor="dst-color",Ae.OneMinusDstColor="one-minus-dst-color",Ae.DstAlpha="dst-alpha",Ae.OneMinusDstAlpha="one-minus-dst-alpha",Ae.SrcAlphaSaturated="src-alpha-saturated",Ae.BlendColor="blend-color",Ae.OneMinusBlendColor="one-minus-blend-color"})(T=_.BlendFactor||(_.BlendFactor={}));var w;(function(Ae){Ae.Add="add",Ae.Subtract="subtract",Ae.ReverseSubtract="reverse-subtract",Ae.Min="min",Ae.Max="max"})(w=_.BlendOperation||(_.BlendOperation={}));var D;(function(Ae){Ae.Never="never",Ae.Less="less",Ae.Equal="equal",Ae.LessEqual="less-equal",Ae.Greater="greater",Ae.NotEqual="not-equal",Ae.GreaterEqual="greater-equal",Ae.Always="always"})(D=_.CompareFunction||(_.CompareFunction={}));var O;(function(Ae){Ae.None="none",Ae.Front="front",Ae.Back="back"})(O=_.CullMode||(_.CullMode={}));var L;(function(Ae){Ae.Nearest="nearest",Ae.Linear="linear"})(L=_.FilterMode||(_.FilterMode={}));var U;(function(Ae){Ae.CCW="ccw",Ae.CW="cw"})(U=_.FrontFace||(_.FrontFace={}));var V;(function(Ae){Ae.Uint16="uint16",Ae.Uint32="uint32"})(V=_.IndexFormat||(_.IndexFormat={}));var z;(function(Ae){Ae.Vertex="vertex",Ae.Instance="instance"})(z=_.InputStepMode||(_.InputStepMode={}));var K;(function(Ae){Ae.Load="load"})(K=_.LoadOp||(_.LoadOp={}));var J;(function(Ae){Ae.PointList="point-list",Ae.LineList="line-list",Ae.LineStrip="line-strip",Ae.TriangleList="triangle-list",Ae.TriangleStrip="triangle-strip"})(J=_.PrimitiveTopology||(_.PrimitiveTopology={}));var he;(function(Ae){Ae.Keep="keep",Ae.Zero="zero",Ae.Replace="replace",Ae.Invert="invert",Ae.IncrementClamp="increment-clamp",Ae.DecrementClamp="decrement-clamp",Ae.IncrementWrap="increment-wrap",Ae.DecrementWrap="decrement-wrap"})(he=_.StencilOperation||(_.StencilOperation={}));var ue;(function(Ae){Ae.Store="store",Ae.Clear="clear"})(ue=_.StoreOp||(_.StoreOp={}));var de;(function(Ae){Ae.E1d="1d",Ae.E2d="2d",Ae.E3d="3d"})(de=_.TextureDimension||(_.TextureDimension={}));var ae;(function(Ae){Ae.R8Unorm="r8unorm",Ae.R8Snorm="r8snorm",Ae.R8Uint="r8uint",Ae.R8Sint="r8sint",Ae.R16Uint="r16uint",Ae.R16Sint="r16sint",Ae.R16Float="r16float",Ae.RG8Unorm="rg8unorm",Ae.RG8Snorm="rg8snorm",Ae.RG8Uint="rg8uint",Ae.RG8Sint="rg8sint",Ae.R32Uint="r32uint",Ae.R32Sint="r32sint",Ae.R32Float="r32float",Ae.RG16Uint="rg16uint",Ae.RG16Sint="rg16sint",Ae.RG16Float="rg16float",Ae.RGBA8Unorm="rgba8unorm",Ae.RGBA8UnormSRGB="rgba8unorm-srgb",Ae.RGBA8Snorm="rgba8snorm",Ae.RGBA8Uint="rgba8uint",Ae.RGBA8Sint="rgba8sint",Ae.BGRA8Unorm="bgra8unorm",Ae.BGRA8UnormSRGB="bgra8unorm-srgb",Ae.RGB10A2Unorm="rgb10a2unorm",Ae.RG11B10Float="rg11b10float",Ae.RG32Uint="rg32uint",Ae.RG32Sint="rg32sint",Ae.RG32Float="rg32float",Ae.RGBA16Uint="rgba16uint",Ae.RGBA16Sint="rgba16sint",Ae.RGBA16Float="rgba16float",Ae.RGBA32Uint="rgba32uint",Ae.RGBA32Sint="rgba32sint",Ae.RGBA32Float="rgba32float",Ae.Depth32Float="depth32float",Ae.Depth24Plus="depth24plus",Ae.Depth24PlusStencil8="depth24plus-stencil8"})(ae=_.TextureFormat||(_.TextureFormat={}));var le;(function(Ae){Ae.Float="float",Ae.Sint="sint",Ae.Uint="uint"})(le=_.TextureComponentType||(_.TextureComponentType={}));var re;(function(Ae){Ae.E1d="1d",Ae.E2d="2d",Ae.E2dArray="2d-array",Ae.Cube="cube",Ae.CubeArray="cube-array",Ae.E3d="3d"})(re=_.TextureViewDimension||(_.TextureViewDimension={}));var se;(function(Ae){Ae.Uchar2="uchar2",Ae.Uchar4="uchar4",Ae.Char2="char2",Ae.Char4="char4",Ae.Uchar2Norm="uchar2norm",Ae.Uchar4Norm="uchar4norm",Ae.Char2Norm="char2norm",Ae.Char4Norm="char4norm",Ae.Ushort2="ushort2",Ae.Ushort4="ushort4",Ae.Short2="short2",Ae.Short4="short4",Ae.Ushort2Norm="ushort2norm",Ae.Ushort4Norm="ushort4norm",Ae.Short2Norm="short2norm",Ae.Short4Norm="short4norm",Ae.Half2="half2",Ae.Half4="half4",Ae.Float="float",Ae.Float2="float2",Ae.Float3="float3",Ae.Float4="float4",Ae.Uint="uint",Ae.Uint2="uint2",Ae.Uint3="uint3",Ae.Uint4="uint4",Ae.Int="int",Ae.Int2="int2",Ae.Int3="int3",Ae.Int4="int4"})(se=_.VertexFormat||(_.VertexFormat={}));var ye;(function(Ae){Ae.All="all",Ae.StencilOnly="stencil-only",Ae.DepthOnly="depth-only"})(ye=_.TextureAspect||(_.TextureAspect={}));var Z;(function(Ae){Ae.Error="error",Ae.Warning="warning",Ae.Info="info"})(Z=_.CompilationMessageType||(_.CompilationMessageType={}));var Ee;(function(Ae){Ae.Occlusion="occlusion"})(Ee=_.QueryType||(_.QueryType={}));var k;(function(Ae){Ae[Ae.MapRead=1]="MapRead",Ae[Ae.MapWrite=2]="MapWrite",Ae[Ae.CopySrc=4]="CopySrc",Ae[Ae.CopyDst=8]="CopyDst",Ae[Ae.Index=16]="Index",Ae[Ae.Vertex=32]="Vertex",Ae[Ae.Uniform=64]="Uniform",Ae[Ae.Storage=128]="Storage",Ae[Ae.Indirect=256]="Indirect",Ae[Ae.QueryResolve=512]="QueryResolve"})(k=_.BufferUsage||(_.BufferUsage={}));var Te;(function(Ae){Ae[Ae.Red=1]="Red",Ae[Ae.Green=2]="Green",Ae[Ae.Blue=4]="Blue",Ae[Ae.Alpha=8]="Alpha",Ae[Ae.All=15]="All"})(Te=_.ColorWrite||(_.ColorWrite={}));var De;(function(Ae){Ae[Ae.Vertex=1]="Vertex",Ae[Ae.Fragment=2]="Fragment",Ae[Ae.Compute=4]="Compute"})(De=_.ShaderStage||(_.ShaderStage={}));var Ue;(function(Ae){Ae[Ae.CopySrc=1]="CopySrc",Ae[Ae.CopyDst=2]="CopyDst",Ae[Ae.Sampled=4]="Sampled",Ae[Ae.Storage=8]="Storage",Ae[Ae.OutputAttachment=16]="OutputAttachment"})(Ue=_.TextureUsage||(_.TextureUsage={}));var St;(function(Ae){Ae[Ae.Read=1]="Read",Ae[Ae.Write=2]="Write"})(St=_.MapMode||(_.MapMode={}))},function(j,_,u){"use strict";u.d(_,"a",function(){return D});var g=u(101);function f(O){if(Array.isArray(O))return Object(g.a)(O)}function E(O){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(O))return Array.from(O)}var T=u(88);function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(O){return f(O)||E(O)||Object(T.a)(O)||w()}},function(j,_,u){j.exports=u(174)},function(j,_){function u(g,f,E,T){if(!E)return;Object.defineProperty(g,f,{enumerable:E.enumerable,configurable:E.configurable,writable:E.writable,value:E.initializer?E.initializer.call(T):void 0})}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(g,f,E,T,w){var D={};return Object.keys(T).forEach(function(O){D[O]=T[O]}),D.enumerable=!!D.enumerable,D.configurable=!!D.configurable,("value"in D||D.initializer)&&(D.writable=!0),D=E.slice().reverse().reduce(function(O,L){return L(g,f,O)||O},D),w&&D.initializer!==void 0&&(D.value=D.initializer?D.initializer.call(w):void 0,D.initializer=void 0),D.initializer===void 0&&(Object.defineProperty(g,f,D),D=null),D}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";u.d(_,"a",function(){return g});var g={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},g(f)}},function(j,_,u){"use strict";u.d(_,"a",function(){return E});var g=u(27);function f(T,w){var D=Object.keys(T);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(T);w&&(O=O.filter(function(L){return Object.getOwnPropertyDescriptor(T,L).enumerable})),D.push.apply(D,O)}return D}function E(T){for(var w=1;w<arguments.length;w++){var D=arguments[w]!=null?arguments[w]:{};w%2?f(Object(D),!0).forEach(function(O){Object(g.a)(T,O,D[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(D)):f(Object(D)).forEach(function(O){Object.defineProperty(T,O,Object.getOwnPropertyDescriptor(D,O))})}return T}},function(j,_){function u(f,E,T,w,D,O,L){try{var U=f[O](L),V=U.value}catch(z){T(z);return}U.done?E(V):Promise.resolve(V).then(w,D)}function g(f){return function(){var E=this,T=arguments;return new Promise(function(w,D){var O=f.apply(E,T);function L(V){u(O,w,D,L,U,"next",V)}function U(V){u(O,w,D,L,U,"throw",V)}L(void 0)})}}j.exports=g,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(g){return j.exports=u=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},j.exports.default=j.exports,j.exports.__esModule=!0,u(g)}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(){return g=Object.assign||function(f){for(var E=1;E<arguments.length;E++){var T=arguments[E];for(var w in T)Object.prototype.hasOwnProperty.call(T,w)&&(f[w]=T[w])}return f},g.apply(this,arguments)}},function(j,_,u){"use strict";u.d(_,"a",function(){return w});var g=u(267);function f(D,O){var L=D==null?null:typeof Symbol!="undefined"&&D[Symbol.iterator]||D["@@iterator"];if(L==null)return;var U=[],V=!0,z=!1,K,J;try{for(L=L.call(D);!(V=(K=L.next()).done)&&!(U.push(K.value),O&&U.length===O);V=!0);}catch(he){z=!0,J=he}finally{try{!V&&L.return!=null&&L.return()}finally{if(z)throw J}}return U}var E=u(268),T=u(269);function w(D,O){return Object(g.a)(D)||f(D,O)||Object(E.a)(D,O)||Object(T.a)()}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}},function(j,_){function u(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){var g=u(518);function f(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(T&&T.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),T&&g(E,T)}j.exports=f,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){var g=u(41).default,f=u(24);function E(T,w){return w&&(g(w)==="object"||typeof w=="function")?w:f(T)}j.exports=E,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f,E,T){return E in f?Object.defineProperty(f,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):f[E]=T,f}},function(j,_,u){"use strict";u.d(_,"a",function(){return V}),u.d(_,"b",function(){return z});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(10),D=u.n(w),O=u(9),L=u.n(O),U=u(123),V=function K(J){L()(this,K)},z=function(){function K(J){L()(this,K),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=J}return D()(K,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(he){return this.lookup[he]>-1}},{key:"create",value:function(he,ue){this.lookup[he]=this.components.length;var de=new this.clazz(ue||{});return this.components.push(de),this.entities.push(he),de}},{key:"remove",value:function(he){var ue=this.lookup[he];ue>-1&&(ue<this.components.length-1&&(this.components[ue]=this.components[this.components.length-1],this.entities[ue]=this.entities[this.entities.length-1],this.lookup[this.entities[ue]]=ue)),this.components.pop(),this.entities.pop(),delete this.lookup[he]}},{key:"removeKeepSorted",value:function(he){var ue=this.lookup[he];if(ue>-1){var de=this.entities[ue];if(ue<this.components.length-1){for(var ae=ue+1;ae<this.components.length;++ae)this.components[ae-1]=this.components[ae];for(var le=ue+1;le<this.entities.length;++le)this.entities[le-1]=this.entities[le],this.lookup[this.entities[le-1]]=le-1}this.components.pop(),this.entities.pop(),delete this.lookup[de]}}},{key:"moveItem",value:function(he,ue){if(he===ue)return;for(var de=this.components[he],ae=this.entities[he],le=he<ue?1:-1,re=he;re!==ue;re+=le){var se=re+le;this.components[re]=this.components[se],this.entities[re]=this.entities[se],this.lookup[this.entities[re]]=re}this.components[ue]=de,this.entities[ue]=ae,this.lookup[ae]=ue}},{key:"getEntity",value:function(he){return this.entities[he]}},{key:"getComponent",value:function(he){return this.components[he]}},{key:"getComponentByEntity",value:function(he){var ue=this.lookup[he];return ue>-1?this.components[ue]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(he){for(var ue=0,de=Object.keys(this.lookup);ue<de.length;ue++){var ae=de[ue],le=Number(ae);if(this.lookup[le]===he)return le}return U.a}},{key:"find",value:function(he){for(var ue=0;ue<this.getCount();ue++){var de=this.getComponent(ue);if(he(de,ue))return de}return null}},{key:"findIndex",value:function(he){for(var ue=0;ue<this.getCount();ue++){var de=this.getComponent(ue);if(he(de,ue))return ue}return-1}},{key:"forEach",value:function(he){for(var ue=0,de=Object.keys(this.lookup);ue<de.length;ue++){var ae=de[ue],le=Number(ae),re=this.lookup[le];he(le,this.getComponent(re))}}},{key:"forEachAsync",value:function(){var J=T()(f.a.mark(function ue(de){var ae,le,re,se,ye;return f.a.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:ae=0,le=Object.keys(this.lookup);case 1:if(!(ae<le.length)){Ee.next=10;break}return re=le[ae],se=Number(re),ye=this.lookup[se],Ee.next=7,de(se,this.getComponent(ye));case 7:ae++,Ee.next=1;break;case 10:case"end":return Ee.stop()}},ue,this)}));function he(ue){return J.apply(this,arguments)}return he}()},{key:"map",value:function(he){for(var ue=[],de=0,ae=Object.keys(this.lookup);de<ae.length;de++){var le=ae[de],re=Number(le),se=this.lookup[re];ue.push(he(re,this.getComponent(se)))}return ue}}]),K}()},function(j,_,u){var g=u(520),f=u(521),E=u(229),T=u(522);function w(D){return g(D)||f(D)||E(D)||T()}j.exports=w,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";var g=u(143),f=typeof self=="object"&&self&&self.Object===Object&&self,E=g.a||f||Function("return this")();_.a=E},function(j,_,u){var g,f;/*!
* jQuery JavaScript Library v3.6.0
* https://jquery.com/
*
* Includes Sizzle.js
* https://sizzlejs.com/
*
* Copyright OpenJS Foundation and other contributors
* Released under the MIT license
* https://jquery.org/license
*
* Date: 2021-03-02T17:08Z
*/(function(E,T){"use strict";typeof j.exports=="object"?j.exports=E.document?T(E,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return T(w)}:T(E)})(typeof window!="undefined"?window:this,function(E,T){"use strict";var w=[],D=Object.getPrototypeOf,O=w.slice,L=w.flat?function($){return w.flat.call($)}:function($){return w.concat.apply([],$)},U=w.push,V=w.indexOf,z={},K=z.toString,J=z.hasOwnProperty,he=J.toString,ue=he.call(Object),de={},ae=function(R){return typeof R=="function"&&typeof R.nodeType!="number"&&typeof R.item!="function"},le=function(R){return R!=null&&R===R.window},re=E.document,se={type:!0,src:!0,nonce:!0,noModule:!0};function ye($,R,G){G=G||re;var Y,fe,Se=G.createElement("script");if(Se.text=$,R)for(Y in se)fe=R[Y]||R.getAttribute&&R.getAttribute(Y),fe&&Se.setAttribute(Y,fe);G.head.appendChild(Se).parentNode.removeChild(Se)}function Z($){return $==null?$+"":typeof $=="object"||typeof $=="function"?z[K.call($)]||"object":typeof $}var Ee="3.6.0",k=function $(R,G){return new $.fn.init(R,G)};k.fn=k.prototype={jquery:Ee,constructor:k,length:0,toArray:function(){return O.call(this)},get:function(R){return R==null?O.call(this):R<0?this[R+this.length]:this[R]},pushStack:function(R){var G=k.merge(this.constructor(),R);return G.prevObject=this,G},each:function(R){return k.each(this,R)},map:function(R){return this.pushStack(k.map(this,function(G,Y){return R.call(G,Y,G)}))},slice:function(){return this.pushStack(O.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,function(R,G){return(G+1)%2}))},odd:function(){return this.pushStack(k.grep(this,function(R,G){return G%2}))},eq:function(R){var G=this.length,Y=+R+(R<0?G:0);return this.pushStack(Y>=0&&Y<G?[this[Y]]:[])},end:function(){return this.prevObject||this.constructor()},push:U,sort:w.sort,splice:w.splice},k.extend=k.fn.extend=function(){var $,R,G,Y,fe,Se,Ie=arguments[0]||{},Ze=1,Pt=arguments.length,zt=!1;for(typeof Ie=="boolean"&&(zt=Ie,Ie=arguments[Ze]||{},Ze++),typeof Ie!="object"&&!ae(Ie)&&(Ie={}),Ze===Pt&&(Ie=this,Ze--);Ze<Pt;Ze++)if(($=arguments[Ze])!=null)for(R in $){if(Y=$[R],R==="__proto__"||Ie===Y)continue;zt&&Y&&(k.isPlainObject(Y)||(fe=Array.isArray(Y)))?(G=Ie[R],fe&&!Array.isArray(G)?Se=[]:!fe&&!k.isPlainObject(G)?Se={}:Se=G,fe=!1,Ie[R]=k.extend(zt,Se,Y)):Y!==void 0&&(Ie[R]=Y)}return Ie},k.extend({expando:"jQuery"+(Ee+Math.random()).replace(/\D/g,""),isReady:!0,error:function(R){throw new Error(R)},noop:function(){},isPlainObject:function(R){var G,Y;return!R||K.call(R)!=="[object Object]"?!1:(G=D(R),G?(Y=J.call(G,"constructor")&&G.constructor,typeof Y=="function"&&he.call(Y)===ue):!0)},isEmptyObject:function(R){var G;for(G in R)return!1;return!0},globalEval:function(R,G,Y){ye(R,{nonce:G&&G.nonce},Y)},each:function(R,G){var Y,fe=0;if(Te(R))for(Y=R.length;fe<Y&&!(G.call(R[fe],fe,R[fe])===!1);fe++);else for(fe in R)if(G.call(R[fe],fe,R[fe])===!1)break;return R},makeArray:function(R,G){var Y=G||[];return R!=null&&(Te(Object(R))?k.merge(Y,typeof R=="string"?[R]:R):U.call(Y,R)),Y},inArray:function(R,G,Y){return G==null?-1:V.call(G,R,Y)},merge:function(R,G){for(var Y=+G.length,fe=0,Se=R.length;fe<Y;fe++)R[Se++]=G[fe];return R.length=Se,R},grep:function(R,G,Y){for(var fe,Se=[],Ie=0,Ze=R.length,Pt=!Y;Ie<Ze;Ie++)fe=!G(R[Ie],Ie),fe!==Pt&&Se.push(R[Ie]);return Se},map:function(R,G,Y){var fe,Se,Ie=0,Ze=[];if(Te(R))for(fe=R.length;Ie<fe;Ie++)Se=G(R[Ie],Ie,Y),Se!=null&&Ze.push(Se);else for(Ie in R)Se=G(R[Ie],Ie,Y),Se!=null&&Ze.push(Se);return L(Ze)},guid:1,support:de}),typeof Symbol=="function"&&(k.fn[Symbol.iterator]=w[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function($,R){z["[object "+R+"]"]=R.toLowerCase()});function Te($){var R=!!$&&"length"in $&&$.length,G=Z($);return ae($)||le($)?!1:G==="array"||R===0||typeof R=="number"&&R>0&&R-1 in $}var De=function($){var R,G,Y,fe,Se,Ie,Ze,Pt,zt,Cn,Sr,Dr,en,sr,Kr,ma,sa,Yo,ka,bi="sizzle"+1*new Date,Na=$.document,Sa=0,rt=0,Rn=Xt(),Qr=Xt(),mi=Xt(),Hi=Xt(),ho=function(Je,It){return Je===It&&(Sr=!0),0},Ao={}.hasOwnProperty,uo=[],Io=uo.pop,Lo=uo.push,Vi=uo.push,wu=uo.slice,Qo=function(Je,It){for(var Dn=0,hn=Je.length;Dn<hn;Dn++)if(Je[Dn]===It)return Dn;return-1},el="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ua="[\\x20\\t\\r\\n\\f]",fs="(?:\\\\[\\da-fA-F]{1,6}"+ua+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Cu="\\["+ua+"*("+fs+")(?:"+ua+"*([*^$|!~]?=)"+ua+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+fs+"))|)"+ua+"*\\]",Ps=":("+fs+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Cu+")*)|.*)\\)|)",xs=new RegExp(ua+"+","g"),ju=new RegExp("^"+ua+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ua+"+$","g"),ru=new RegExp("^"+ua+"*,"+ua+"*"),Is=new RegExp("^"+ua+"*([>+~]|"+ua+")"+ua+"*"),au=new RegExp(ua+"|>"),Uu=new RegExp(Ps),Fu=new RegExp("^"+fs+"$"),ws={ID:new RegExp("^#("+fs+")"),CLASS:new RegExp("^\\.("+fs+")"),TAG:new RegExp("^("+fs+"|[*])"),ATTR:new RegExp("^"+Cu),PSEUDO:new RegExp("^"+Ps),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ua+"*(even|odd|(([+-]|)(\\d*)n|)"+ua+"*(?:([+-]|)"+ua+"*(\\d+)|))"+ua+"*\\)|)","i"),bool:new RegExp("^(?:"+el+")$","i"),needsContext:new RegExp("^"+ua+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ua+"*((?:-\\d)?\\d*)"+ua+"*\\)|)(?=[^-]|$)","i")},hs=/HTML$/i,Eo=/^(?:input|select|textarea|button)$/i,Ul=/^h\d$/i,Ua=/^[^{]+\{\s*\[native \w/,b=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,N=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+ua+"?|\\\\([^\\r\\n\\f])","g"),ee=function(Je,It){var Dn="0x"+Je.slice(1)-65536;return It||(Dn<0?String.fromCharCode(Dn+65536):String.fromCharCode(Dn>>10|55296,Dn&1023|56320))},ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ve=function(Je,It){return It?Je==="\0"?"\uFFFD":Je.slice(0,-1)+"\\"+Je.charCodeAt(Je.length-1).toString(16)+" ":"\\"+Je},ft=function(){Dr()},yt=wa(function(bt){return bt.disabled===!0&&bt.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Vi.apply(uo=wu.call(Na.childNodes),Na.childNodes),uo[Na.childNodes.length].nodeType}catch(bt){Vi={apply:uo.length?function(Je,It){Lo.apply(Je,wu.call(It))}:function(Je,It){for(var Dn=Je.length,hn=0;Je[Dn++]=It[hn++];);Je.length=Dn-1}}}function Ct(bt,Je,It,Dn){var hn,rr,Or,jr,ta,Gr,za,Fa=Je&&Je.ownerDocument,fi=Je?Je.nodeType:9;if(It=It||[],typeof bt!="string"||!bt||fi!==1&&fi!==9&&fi!==11)return It;if(!Dn&&(Dr(Je),Je=Je||en,Kr)){if(fi!==11&&(ta=b.exec(bt)))if(hn=ta[1]){if(fi===9)if(Or=Je.getElementById(hn)){if(Or.id===hn)return It.push(Or),It}else return It;else if(Fa&&(Or=Fa.getElementById(hn))&&ka(Je,Or)&&Or.id===hn)return It.push(Or),It}else{if(ta[2])return Vi.apply(It,Je.getElementsByTagName(bt)),It;if((hn=ta[3])&&G.getElementsByClassName&&Je.getElementsByClassName)return Vi.apply(It,Je.getElementsByClassName(hn)),It}if(G.qsa&&!Hi[bt+" "]&&(!ma||!ma.test(bt))&&(fi!==1||Je.nodeName.toLowerCase()!=="object")){if(za=bt,Fa=Je,fi===1&&(au.test(bt)||Is.test(bt))){for(Fa=N.test(bt)&&Xa(Je.parentNode)||Je,(Fa!==Je||!G.scope)&&((jr=Je.getAttribute("id"))?jr=jr.replace(ce,Ve):Je.setAttribute("id",jr=bi)),Gr=Ie(bt),rr=Gr.length;rr--;)Gr[rr]=(jr?"#"+jr:":scope")+" "+xa(Gr[rr]);za=Gr.join(",")}try{return Vi.apply(It,Fa.querySelectorAll(za)),It}catch(Zi){Hi(bt,!0)}finally{jr===bi&&Je.removeAttribute("id")}}}return Pt(bt.replace(ju,"$1"),Je,It,Dn)}function Xt(){var bt=[];function Je(It,Dn){return bt.push(It+" ")>Y.cacheLength&&delete Je[bt.shift()],Je[It+" "]=Dn}return Je}function un(bt){return bt[bi]=!0,bt}function _n(bt){var Je=en.createElement("fieldset");try{return!!bt(Je)}catch(It){return!1}finally{Je.parentNode&&Je.parentNode.removeChild(Je),Je=null}}function Fn(bt,Je){for(var It=bt.split("|"),Dn=It.length;Dn--;)Y.attrHandle[It[Dn]]=Je}function jn(bt,Je){var It=Je&&bt,Dn=It&&bt.nodeType===1&&Je.nodeType===1&&bt.sourceIndex-Je.sourceIndex;if(Dn)return Dn;if(It){for(;It=It.nextSibling;)if(It===Je)return-1}return bt?1:-1}function Ar(bt){return function(Je){var It=Je.nodeName.toLowerCase();return It==="input"&&Je.type===bt}}function Nr(bt){return function(Je){var It=Je.nodeName.toLowerCase();return(It==="input"||It==="button")&&Je.type===bt}}function Wn(bt){return function(Je){return"form"in Je?Je.parentNode&&Je.disabled===!1?"label"in Je?"label"in Je.parentNode?Je.parentNode.disabled===bt:Je.disabled===bt:Je.isDisabled===bt||Je.isDisabled!==!bt&&yt(Je)===bt:Je.disabled===bt:"label"in Je?Je.disabled===bt:!1}}function Yr(bt){return un(function(Je){return Je=+Je,un(function(It,Dn){for(var hn,rr=bt([],It.length,Je),Or=rr.length;Or--;)It[hn=rr[Or]]&&(It[hn]=!(Dn[hn]=It[hn]))})})}function Xa(bt){return bt&&typeof bt.getElementsByTagName!="undefined"&&bt}G=Ct.support={},Se=Ct.isXML=function(bt){var Je=bt&&bt.namespaceURI,It=bt&&(bt.ownerDocument||bt).documentElement;return!hs.test(Je||It&&It.nodeName||"HTML")},Dr=Ct.setDocument=function(bt){var Je,It,Dn=bt?bt.ownerDocument||bt:Na;return Dn==en||Dn.nodeType!==9||!Dn.documentElement||(en=Dn,sr=en.documentElement,Kr=!Se(en),Na!=en&&(It=en.defaultView)&&It.top!==It&&(It.addEventListener?It.addEventListener("unload",ft,!1):It.attachEvent&&It.attachEvent("onunload",ft)),G.scope=_n(function(hn){return sr.appendChild(hn).appendChild(en.createElement("div")),typeof hn.querySelectorAll!="undefined"&&!hn.querySelectorAll(":scope fieldset div").length}),G.attributes=_n(function(hn){return hn.className="i",!hn.getAttribute("className")}),G.getElementsByTagName=_n(function(hn){return hn.appendChild(en.createComment("")),!hn.getElementsByTagName("*").length}),G.getElementsByClassName=Ua.test(en.getElementsByClassName),G.getById=_n(function(hn){return sr.appendChild(hn).id=bi,!en.getElementsByName||!en.getElementsByName(bi).length}),G.getById?(Y.filter.ID=function(hn){var rr=hn.replace(te,ee);return function(Or){return Or.getAttribute("id")===rr}},Y.find.ID=function(hn,rr){if(typeof rr.getElementById!="undefined"&&Kr){var Or=rr.getElementById(hn);return Or?[Or]:[]}}):(Y.filter.ID=function(hn){var rr=hn.replace(te,ee);return function(Or){var jr=typeof Or.getAttributeNode!="undefined"&&Or.getAttributeNode("id");return jr&&jr.value===rr}},Y.find.ID=function(hn,rr){if(typeof rr.getElementById!="undefined"&&Kr){var Or,jr,ta,Gr=rr.getElementById(hn);if(Gr){if(Or=Gr.getAttributeNode("id"),Or&&Or.value===hn)return[Gr];for(ta=rr.getElementsByName(hn),jr=0;Gr=ta[jr++];)if(Or=Gr.getAttributeNode("id"),Or&&Or.value===hn)return[Gr]}return[]}}),Y.find.TAG=G.getElementsByTagName?function(hn,rr){if(typeof rr.getElementsByTagName!="undefined")return rr.getElementsByTagName(hn);if(G.qsa)return rr.querySelectorAll(hn)}:function(hn,rr){var Or,jr=[],ta=0,Gr=rr.getElementsByTagName(hn);if(hn==="*"){for(;Or=Gr[ta++];)Or.nodeType===1&&jr.push(Or);return jr}return Gr},Y.find.CLASS=G.getElementsByClassName&&function(hn,rr){if(typeof rr.getElementsByClassName!="undefined"&&Kr)return rr.getElementsByClassName(hn)},sa=[],ma=[],(G.qsa=Ua.test(en.querySelectorAll))&&(_n(function(hn){var rr;sr.appendChild(hn).innerHTML="<a id='"+bi+"'></a><select id='"+bi+"-\r\\' msallowcapture=''><option selected=''></option></select>",hn.querySelectorAll("[msallowcapture^='']").length&&ma.push("[*^$]="+ua+`*(?:''|"")`),hn.querySelectorAll("[selected]").length||ma.push("\\["+ua+"*(?:value|"+el+")"),hn.querySelectorAll("[id~="+bi+"-]").length||ma.push("~="),rr=en.createElement("input"),rr.setAttribute("name",""),hn.appendChild(rr),hn.querySelectorAll("[name='']").length||ma.push("\\["+ua+"*name"+ua+"*="+ua+`*(?:''|"")`),hn.querySelectorAll(":checked").length||ma.push(":checked"),hn.querySelectorAll("a#"+bi+"+*").length||ma.push(".#.+[+~]"),hn.querySelectorAll("\\\f"),ma.push("[\\r\\n\\f]")}),_n(function(hn){hn.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var rr=en.createElement("input");rr.setAttribute("type","hidden"),hn.appendChild(rr).setAttribute("name","D"),hn.querySelectorAll("[name=d]").length&&ma.push("name"+ua+"*[*^$|!~]?="),hn.querySelectorAll(":enabled").length!==2&&ma.push(":enabled",":disabled"),sr.appendChild(hn).disabled=!0,hn.querySelectorAll(":disabled").length!==2&&ma.push(":enabled",":disabled"),hn.querySelectorAll("*,:x"),ma.push(",.*:")})),(G.matchesSelector=Ua.test(Yo=sr.matches||sr.webkitMatchesSelector||sr.mozMatchesSelector||sr.oMatchesSelector||sr.msMatchesSelector))&&_n(function(hn){G.disconnectedMatch=Yo.call(hn,"*"),Yo.call(hn,"[s!='']:x"),sa.push("!=",Ps)}),ma=ma.length&&new RegExp(ma.join("|")),sa=sa.length&&new RegExp(sa.join("|")),Je=Ua.test(sr.compareDocumentPosition),ka=Je||Ua.test(sr.contains)?function(hn,rr){var Or=hn.nodeType===9?hn.documentElement:hn,jr=rr&&rr.parentNode;return hn===jr||!!(jr&&jr.nodeType===1&&(Or.contains?Or.contains(jr):hn.compareDocumentPosition&&hn.compareDocumentPosition(jr)&16))}:function(hn,rr){if(rr){for(;rr=rr.parentNode;)if(rr===hn)return!0}return!1},ho=Je?function(hn,rr){if(hn===rr)return Sr=!0,0;var Or=!hn.compareDocumentPosition-!rr.compareDocumentPosition;return Or||(Or=(hn.ownerDocument||hn)==(rr.ownerDocument||rr)?hn.compareDocumentPosition(rr):1,Or&1||!G.sortDetached&&rr.compareDocumentPosition(hn)===Or?hn==en||hn.ownerDocument==Na&&ka(Na,hn)?-1:rr==en||rr.ownerDocument==Na&&ka(Na,rr)?1:Cn?Qo(Cn,hn)-Qo(Cn,rr):0:Or&4?-1:1)}:function(hn,rr){if(hn===rr)return Sr=!0,0;var Or,jr=0,ta=hn.parentNode,Gr=rr.parentNode,za=[hn],Fa=[rr];if(!ta||!Gr)return hn==en?-1:rr==en?1:ta?-1:Gr?1:Cn?Qo(Cn,hn)-Qo(Cn,rr):0;if(ta===Gr)return jn(hn,rr);for(Or=hn;Or=Or.parentNode;)za.unshift(Or);for(Or=rr;Or=Or.parentNode;)Fa.unshift(Or);for(;za[jr]===Fa[jr];)jr++;return jr?jn(za[jr],Fa[jr]):za[jr]==Na?-1:Fa[jr]==Na?1:0}),en},Ct.matches=function(bt,Je){return Ct(bt,null,null,Je)},Ct.matchesSelector=function(bt,Je){if(Dr(bt),G.matchesSelector&&Kr&&!Hi[Je+" "]&&(!sa||!sa.test(Je))&&(!ma||!ma.test(Je)))try{var It=Yo.call(bt,Je);if(It||G.disconnectedMatch||bt.document&&bt.document.nodeType!==11)return It}catch(Dn){Hi(Je,!0)}return Ct(Je,en,null,[bt]).length>0},Ct.contains=function(bt,Je){return(bt.ownerDocument||bt)!=en&&Dr(bt),ka(bt,Je)},Ct.attr=function(bt,Je){(bt.ownerDocument||bt)!=en&&Dr(bt);var It=Y.attrHandle[Je.toLowerCase()],Dn=It&&Ao.call(Y.attrHandle,Je.toLowerCase())?It(bt,Je,!Kr):void 0;return Dn!==void 0?Dn:G.attributes||!Kr?bt.getAttribute(Je):(Dn=bt.getAttributeNode(Je))&&Dn.specified?Dn.value:null},Ct.escape=function(bt){return(bt+"").replace(ce,Ve)},Ct.error=function(bt){throw new Error("Syntax error, unrecognized expression: "+bt)},Ct.uniqueSort=function(bt){var Je,It=[],Dn=0,hn=0;if(Sr=!G.detectDuplicates,Cn=!G.sortStable&&bt.slice(0),bt.sort(ho),Sr){for(;Je=bt[hn++];)Je===bt[hn]&&(Dn=It.push(hn));for(;Dn--;)bt.splice(It[Dn],1)}return Cn=null,bt},fe=Ct.getText=function(bt){var Je,It="",Dn=0,hn=bt.nodeType;if(hn){if(hn===1||hn===9||hn===11){if(typeof bt.textContent=="string")return bt.textContent;for(bt=bt.firstChild;bt;bt=bt.nextSibling)It+=fe(bt)}else if(hn===3||hn===4)return bt.nodeValue}else for(;Je=bt[Dn++];)It+=fe(Je);return It},Y=Ct.selectors={cacheLength:50,createPseudo:un,match:ws,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Je){return Je[1]=Je[1].replace(te,ee),Je[3]=(Je[3]||Je[4]||Je[5]||"").replace(te,ee),Je[2]==="~="&&(Je[3]=" "+Je[3]+" "),Je.slice(0,4)},CHILD:function(Je){return Je[1]=Je[1].toLowerCase(),Je[1].slice(0,3)==="nth"?(Je[3]||Ct.error(Je[0]),Je[4]=+(Je[4]?Je[5]+(Je[6]||1):2*(Je[3]==="even"||Je[3]==="odd")),Je[5]=+(Je[7]+Je[8]||Je[3]==="odd")):Je[3]&&Ct.error(Je[0]),Je},PSEUDO:function(Je){var It,Dn=!Je[6]&&Je[2];return ws.CHILD.test(Je[0])?null:(Je[3]?Je[2]=Je[4]||Je[5]||"":Dn&&Uu.test(Dn)&&(It=Ie(Dn,!0))&&(It=Dn.indexOf(")",Dn.length-It)-Dn.length)&&(Je[0]=Je[0].slice(0,It),Je[2]=Dn.slice(0,It)),Je.slice(0,3))}},filter:{TAG:function(Je){var It=Je.replace(te,ee).toLowerCase();return Je==="*"?function(){return!0}:function(Dn){return Dn.nodeName&&Dn.nodeName.toLowerCase()===It}},CLASS:function(Je){var It=Rn[Je+" "];return It||(It=new RegExp("(^|"+ua+")"+Je+"("+ua+"|$)"))&&Rn(Je,function(Dn){return It.test(typeof Dn.className=="string"&&Dn.className||typeof Dn.getAttribute!="undefined"&&Dn.getAttribute("class")||"")})},ATTR:function(Je,It,Dn){return function(hn){var rr=Ct.attr(hn,Je);return rr==null?It==="!=":It?(rr+="",It==="="?rr===Dn:It==="!="?rr!==Dn:It==="^="?Dn&&rr.indexOf(Dn)===0:It==="*="?Dn&&rr.indexOf(Dn)>-1:It==="$="?Dn&&rr.slice(-Dn.length)===Dn:It==="~="?(" "+rr.replace(xs," ")+" ").indexOf(Dn)>-1:It==="|="?rr===Dn||rr.slice(0,Dn.length+1)===Dn+"-":!1):!0}},CHILD:function(Je,It,Dn,hn,rr){var Or=Je.slice(0,3)!=="nth",jr=Je.slice(-4)!=="last",ta=It==="of-type";return hn===1&&rr===0?function(Gr){return!!Gr.parentNode}:function(Gr,za,Fa){var fi,Zi,zi,ai,Yi,Ei,ao=Or!==jr?"nextSibling":"previousSibling",ps=Gr.parentNode,iu=ta&&Gr.nodeName.toLowerCase(),Xs=!Fa&&!ta,Cs=!1;if(ps){if(Or){for(;ao;){for(ai=Gr;ai=ai[ao];)if(ta?ai.nodeName.toLowerCase()===iu:ai.nodeType===1)return!1;Ei=ao=Je==="only"&&!Ei&&"nextSibling"}return!0}if(Ei=[jr?ps.firstChild:ps.lastChild],jr&&Xs){for(ai=ps,zi=ai[bi]||(ai[bi]={}),Zi=zi[ai.uniqueID]||(zi[ai.uniqueID]={}),fi=Zi[Je]||[],Yi=fi[0]===Sa&&fi[1],Cs=Yi&&fi[2],ai=Yi&&ps.childNodes[Yi];ai=++Yi&&ai&&ai[ao]||(Cs=Yi=0)||Ei.pop();)if(ai.nodeType===1&&++Cs&&ai===Gr){Zi[Je]=[Sa,Yi,Cs];break}}else if(Xs&&(ai=Gr,zi=ai[bi]||(ai[bi]={}),Zi=zi[ai.uniqueID]||(zi[ai.uniqueID]={}),fi=Zi[Je]||[],Yi=fi[0]===Sa&&fi[1],Cs=Yi),Cs===!1)for(;(ai=++Yi&&ai&&ai[ao]||(Cs=Yi=0)||Ei.pop())&&!((ta?ai.nodeName.toLowerCase()===iu:ai.nodeType===1)&&++Cs&&(Xs&&(zi=ai[bi]||(ai[bi]={}),Zi=zi[ai.uniqueID]||(zi[ai.uniqueID]={}),Zi[Je]=[Sa,Cs]),ai===Gr)););return Cs-=rr,Cs===hn||Cs%hn===0&&Cs/hn>=0}}},PSEUDO:function(Je,It){var Dn,hn=Y.pseudos[Je]||Y.setFilters[Je.toLowerCase()]||Ct.error("unsupported pseudo: "+Je);return hn[bi]?hn(It):hn.length>1?(Dn=[Je,Je,"",It],Y.setFilters.hasOwnProperty(Je.toLowerCase())?un(function(rr,Or){for(var jr,ta=hn(rr,It),Gr=ta.length;Gr--;)jr=Qo(rr,ta[Gr]),rr[jr]=!(Or[jr]=ta[Gr])}):function(rr){return hn(rr,0,Dn)}):hn}},pseudos:{not:un(function(bt){var Je=[],It=[],Dn=Ze(bt.replace(ju,"$1"));return Dn[bi]?un(function(hn,rr,Or,jr){for(var ta,Gr=Dn(hn,null,jr,[]),za=hn.length;za--;)(ta=Gr[za])&&(hn[za]=!(rr[za]=ta))}):function(hn,rr,Or){return Je[0]=hn,Dn(Je,null,Or,It),Je[0]=null,!It.pop()}}),has:un(function(bt){return function(Je){return Ct(bt,Je).length>0}}),contains:un(function(bt){return bt=bt.replace(te,ee),function(Je){return(Je.textContent||fe(Je)).indexOf(bt)>-1}}),lang:un(function(bt){return Fu.test(bt||"")||Ct.error("unsupported lang: "+bt),bt=bt.replace(te,ee).toLowerCase(),function(Je){var It;do if(It=Kr?Je.lang:Je.getAttribute("xml:lang")||Je.getAttribute("lang"))return It=It.toLowerCase(),It===bt||It.indexOf(bt+"-")===0;while((Je=Je.parentNode)&&Je.nodeType===1);return!1}}),target:function(Je){var It=$.location&&$.location.hash;return It&&It.slice(1)===Je.id},root:function(Je){return Je===sr},focus:function(Je){return Je===en.activeElement&&(!en.hasFocus||en.hasFocus())&&!!(Je.type||Je.href||~Je.tabIndex)},enabled:Wn(!1),disabled:Wn(!0),checked:function(Je){var It=Je.nodeName.toLowerCase();return It==="input"&&!!Je.checked||It==="option"&&!!Je.selected},selected:function(Je){return Je.parentNode&&Je.parentNode.selectedIndex,Je.selected===!0},empty:function(Je){for(Je=Je.firstChild;Je;Je=Je.nextSibling)if(Je.nodeType<6)return!1;return!0},parent:function(Je){return!Y.pseudos.empty(Je)},header:function(Je){return Ul.test(Je.nodeName)},input:function(Je){return Eo.test(Je.nodeName)},button:function(Je){var It=Je.nodeName.toLowerCase();return It==="input"&&Je.type==="button"||It==="button"},text:function(Je){var It;return Je.nodeName.toLowerCase()==="input"&&Je.type==="text"&&((It=Je.getAttribute("type"))==null||It.toLowerCase()==="text")},first:Yr(function(){return[0]}),last:Yr(function(bt,Je){return[Je-1]}),eq:Yr(function(bt,Je,It){return[It<0?It+Je:It]}),even:Yr(function(bt,Je){for(var It=0;It<Je;It+=2)bt.push(It);return bt}),odd:Yr(function(bt,Je){for(var It=1;It<Je;It+=2)bt.push(It);return bt}),lt:Yr(function(bt,Je,It){for(var Dn=It<0?It+Je:It>Je?Je:It;--Dn>=0;)bt.push(Dn);return bt}),gt:Yr(function(bt,Je,It){for(var Dn=It<0?It+Je:It;++Dn<Je;)bt.push(Dn);return bt})}},Y.pseudos.nth=Y.pseudos.eq;for(R in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Y.pseudos[R]=Ar(R);for(R in{submit:!0,reset:!0})Y.pseudos[R]=Nr(R);function Ta(){}Ta.prototype=Y.filters=Y.pseudos,Y.setFilters=new Ta,Ie=Ct.tokenize=function(bt,Je){var It,Dn,hn,rr,Or,jr,ta,Gr=Qr[bt+" "];if(Gr)return Je?0:Gr.slice(0);for(Or=bt,jr=[],ta=Y.preFilter;Or;){(!It||(Dn=ru.exec(Or)))&&(Dn&&(Or=Or.slice(Dn[0].length)||Or),jr.push(hn=[])),It=!1,(Dn=Is.exec(Or))&&(It=Dn.shift(),hn.push({value:It,type:Dn[0].replace(ju," ")}),Or=Or.slice(It.length));for(rr in Y.filter)(Dn=ws[rr].exec(Or))&&(!ta[rr]||(Dn=ta[rr](Dn)))&&(It=Dn.shift(),hn.push({value:It,type:rr,matches:Dn}),Or=Or.slice(It.length));if(!It)break}return Je?Or.length:Or?Ct.error(bt):Qr(bt,jr).slice(0)};function xa(bt){for(var Je=0,It=bt.length,Dn="";Je<It;Je++)Dn+=bt[Je].value;return Dn}function wa(bt,Je,It){var Dn=Je.dir,hn=Je.next,rr=hn||Dn,Or=It&&rr==="parentNode",jr=rt++;return Je.first?function(ta,Gr,za){for(;ta=ta[Dn];)if(ta.nodeType===1||Or)return bt(ta,Gr,za);return!1}:function(ta,Gr,za){var Fa,fi,Zi,zi=[Sa,jr];if(za){for(;ta=ta[Dn];)if((ta.nodeType===1||Or)&&bt(ta,Gr,za))return!0}else for(;ta=ta[Dn];)if(ta.nodeType===1||Or)if(Zi=ta[bi]||(ta[bi]={}),fi=Zi[ta.uniqueID]||(Zi[ta.uniqueID]={}),hn&&hn===ta.nodeName.toLowerCase())ta=ta[Dn]||ta;else{if((Fa=fi[rr])&&Fa[0]===Sa&&Fa[1]===jr)return zi[2]=Fa[2];if(fi[rr]=zi,zi[2]=bt(ta,Gr,za))return!0}return!1}}function Oa(bt){return bt.length>1?function(Je,It,Dn){for(var hn=bt.length;hn--;)if(!bt[hn](Je,It,Dn))return!1;return!0}:bt[0]}function Ki(bt,Je,It){for(var Dn=0,hn=Je.length;Dn<hn;Dn++)Ct(bt,Je[Dn],It);return It}function _i(bt,Je,It,Dn,hn){for(var rr,Or=[],jr=0,ta=bt.length,Gr=Je!=null;jr<ta;jr++)(rr=bt[jr])&&((!It||It(rr,Dn,hn))&&(Or.push(rr),Gr&&Je.push(jr)));return Or}function $i(bt,Je,It,Dn,hn,rr){return Dn&&!Dn[bi]&&(Dn=$i(Dn)),hn&&!hn[bi]&&(hn=$i(hn,rr)),un(function(Or,jr,ta,Gr){var za,Fa,fi,Zi=[],zi=[],ai=jr.length,Yi=Or||Ki(Je||"*",ta.nodeType?[ta]:ta,[]),Ei=bt&&(Or||!Je)?_i(Yi,Zi,bt,ta,Gr):Yi,ao=It?hn||(Or?bt:ai||Dn)?[]:jr:Ei;if(It&&It(Ei,ao,ta,Gr),Dn)for(za=_i(ao,zi),Dn(za,[],ta,Gr),Fa=za.length;Fa--;)(fi=za[Fa])&&(ao[zi[Fa]]=!(Ei[zi[Fa]]=fi));if(Or){if(hn||bt){if(hn){for(za=[],Fa=ao.length;Fa--;)(fi=ao[Fa])&&za.push(Ei[Fa]=fi);hn(null,ao=[],za,Gr)}for(Fa=ao.length;Fa--;)(fi=ao[Fa])&&(za=hn?Qo(Or,fi):Zi[Fa])>-1&&(Or[za]=!(jr[za]=fi))}}else ao=_i(ao===jr?ao.splice(ai,ao.length):ao),hn?hn(null,jr,ao,Gr):Vi.apply(jr,ao)})}function ki(bt){for(var Je,It,Dn,hn=bt.length,rr=Y.relative[bt[0].type],Or=rr||Y.relative[" "],jr=rr?1:0,ta=wa(function(Fa){return Fa===Je},Or,!0),Gr=wa(function(Fa){return Qo(Je,Fa)>-1},Or,!0),za=[function(Fa,fi,Zi){var zi=!rr&&(Zi||fi!==zt)||((Je=fi).nodeType?ta(Fa,fi,Zi):Gr(Fa,fi,Zi));return Je=null,zi}];jr<hn;jr++)if(It=Y.relative[bt[jr].type])za=[wa(Oa(za),It)];else{if(It=Y.filter[bt[jr].type].apply(null,bt[jr].matches),It[bi]){for(Dn=++jr;Dn<hn&&!Y.relative[bt[Dn].type];Dn++);return $i(jr>1&&Oa(za),jr>1&&xa(bt.slice(0,jr-1).concat({value:bt[jr-2].type===" "?"*":""})).replace(ju,"$1"),It,jr<Dn&&ki(bt.slice(jr,Dn)),Dn<hn&&ki(bt=bt.slice(Dn)),Dn<hn&&xa(bt))}za.push(It)}return Oa(za)}function Ui(bt,Je){var It=Je.length>0,Dn=bt.length>0,hn=function(Or,jr,ta,Gr,za){var Fa,fi,Zi,zi=0,ai="0",Yi=Or&&[],Ei=[],ao=zt,ps=Or||Dn&&Y.find.TAG("*",za),iu=Sa+=ao==null?1:Math.random()||.1,Xs=ps.length;for(za&&(zt=jr==en||jr||za);ai!==Xs&&(Fa=ps[ai])!=null;ai++){if(Dn&&Fa){for(fi=0,!jr&&Fa.ownerDocument!=en&&(Dr(Fa),ta=!Kr);Zi=bt[fi++];)if(Zi(Fa,jr||en,ta)){Gr.push(Fa);break}za&&(Sa=iu)}It&&((Fa=!Zi&&Fa)&&zi--,Or&&Yi.push(Fa))}if(zi+=ai,It&&ai!==zi){for(fi=0;Zi=Je[fi++];)Zi(Yi,Ei,jr,ta);if(Or){if(zi>0)for(;ai--;)Yi[ai]||Ei[ai]||(Ei[ai]=Io.call(Gr));Ei=_i(Ei)}Vi.apply(Gr,Ei),za&&!Or&&Ei.length>0&&zi+Je.length>1&&Ct.uniqueSort(Gr)}return za&&(Sa=iu,zt=ao),Yi};return It?un(hn):hn}return Ze=Ct.compile=function(bt,Je){var It,Dn=[],hn=[],rr=mi[bt+" "];if(!rr){for(Je||(Je=Ie(bt)),It=Je.length;It--;)rr=ki(Je[It]),rr[bi]?Dn.push(rr):hn.push(rr);rr=mi(bt,Ui(hn,Dn)),rr.selector=bt}return rr},Pt=Ct.select=function(bt,Je,It,Dn){var hn,rr,Or,jr,ta,Gr=typeof bt=="function"&&bt,za=!Dn&&Ie(bt=Gr.selector||bt);if(It=It||[],za.length===1){if(rr=za[0]=za[0].slice(0),rr.length>2&&(Or=rr[0]).type==="ID"&&Je.nodeType===9&&Kr&&Y.relative[rr[1].type]){if(Je=(Y.find.ID(Or.matches[0].replace(te,ee),Je)||[])[0],Je)Gr&&(Je=Je.parentNode);else return It;bt=bt.slice(rr.shift().value.length)}for(hn=ws.needsContext.test(bt)?0:rr.length;hn--&&!(Or=rr[hn],Y.relative[jr=Or.type]);)if((ta=Y.find[jr])&&(Dn=ta(Or.matches[0].replace(te,ee),N.test(rr[0].type)&&Xa(Je.parentNode)||Je))){if(rr.splice(hn,1),bt=Dn.length&&xa(rr),!bt)return Vi.apply(It,Dn),It;break}}return(Gr||Ze(bt,za))(Dn,Je,!Kr,It,!Je||N.test(bt)&&Xa(Je.parentNode)||Je),It},G.sortStable=bi.split("").sort(ho).join("")===bi,G.detectDuplicates=!!Sr,Dr(),G.sortDetached=_n(function(bt){return bt.compareDocumentPosition(en.createElement("fieldset"))&1}),_n(function(bt){return bt.innerHTML="<a href='#'></a>",bt.firstChild.getAttribute("href")==="#"})||Fn("type|href|height|width",function(bt,Je,It){if(!It)return bt.getAttribute(Je,Je.toLowerCase()==="type"?1:2)}),(!G.attributes||!_n(function(bt){return bt.innerHTML="<input/>",bt.firstChild.setAttribute("value",""),bt.firstChild.getAttribute("value")===""}))&&Fn("value",function(bt,Je,It){if(!It&&bt.nodeName.toLowerCase()==="input")return bt.defaultValue}),_n(function(bt){return bt.getAttribute("disabled")==null})||Fn(el,function(bt,Je,It){var Dn;if(!It)return bt[Je]===!0?Je.toLowerCase():(Dn=bt.getAttributeNode(Je))&&Dn.specified?Dn.value:null}),Ct}(E);k.find=De,k.expr=De.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=De.uniqueSort,k.text=De.getText,k.isXMLDoc=De.isXML,k.contains=De.contains,k.escapeSelector=De.escape;var Ue=function(R,G,Y){for(var fe=[],Se=Y!==void 0;(R=R[G])&&R.nodeType!==9;)if(R.nodeType===1){if(Se&&k(R).is(Y))break;fe.push(R)}return fe},St=function(R,G){for(var Y=[];R;R=R.nextSibling)R.nodeType===1&&R!==G&&Y.push(R);return Y},Ae=k.expr.match.needsContext;function Wt($,R){return $.nodeName&&$.nodeName.toLowerCase()===R.toLowerCase()}var At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function mt($,R,G){return ae(R)?k.grep($,function(Y,fe){return!!R.call(Y,fe,Y)!==G}):R.nodeType?k.grep($,function(Y){return Y===R!==G}):typeof R!="string"?k.grep($,function(Y){return V.call(R,Y)>-1!==G}):k.filter(R,$,G)}k.filter=function($,R,G){var Y=R[0];return G&&($=":not("+$+")"),R.length===1&&Y.nodeType===1?k.find.matchesSelector(Y,$)?[Y]:[]:k.find.matches($,k.grep(R,function(fe){return fe.nodeType===1}))},k.fn.extend({find:function(R){var G,Y,fe=this.length,Se=this;if(typeof R!="string")return this.pushStack(k(R).filter(function(){for(G=0;G<fe;G++)if(k.contains(Se[G],this))return!0}));for(Y=this.pushStack([]),G=0;G<fe;G++)k.find(R,Se[G],Y);return fe>1?k.uniqueSort(Y):Y},filter:function(R){return this.pushStack(mt(this,R||[],!1))},not:function(R){return this.pushStack(mt(this,R||[],!0))},is:function(R){return!!mt(this,typeof R=="string"&&Ae.test(R)?k(R):R||[],!1).length}});var Dt,Ke=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Tt=k.fn.init=function($,R,G){var Y,fe;if(!$)return this;if(G=G||Dt,typeof $=="string")if($[0]==="<"&&$[$.length-1]===">"&&$.length>=3?Y=[null,$,null]:Y=Ke.exec($),Y&&(Y[1]||!R))if(Y[1]){if(R=R instanceof k?R[0]:R,k.merge(this,k.parseHTML(Y[1],R&&R.nodeType?R.ownerDocument||R:re,!0)),At.test(Y[1])&&k.isPlainObject(R))for(Y in R)ae(this[Y])?this[Y](R[Y]):this.attr(Y,R[Y]);return this}else return fe=re.getElementById(Y[2]),fe&&(this[0]=fe,this.length=1),this;else return!R||R.jquery?(R||G).find($):this.constructor(R).find($);else{if($.nodeType)return this[0]=$,this.length=1,this;if(ae($))return G.ready!==void 0?G.ready($):$(k)}return k.makeArray($,this)};Tt.prototype=k.fn,Dt=k(re);var Gt=/^(?:parents|prev(?:Until|All))/,gn={children:!0,contents:!0,next:!0,prev:!0};k.fn.extend({has:function(R){var G=k(R,this),Y=G.length;return this.filter(function(){for(var fe=0;fe<Y;fe++)if(k.contains(this,G[fe]))return!0})},closest:function(R,G){var Y,fe=0,Se=this.length,Ie=[],Ze=typeof R!="string"&&k(R);if(!Ae.test(R)){for(;fe<Se;fe++)for(Y=this[fe];Y&&Y!==G;Y=Y.parentNode)if(Y.nodeType<11&&(Ze?Ze.index(Y)>-1:Y.nodeType===1&&k.find.matchesSelector(Y,R))){Ie.push(Y);break}}return this.pushStack(Ie.length>1?k.uniqueSort(Ie):Ie)},index:function(R){return R?typeof R=="string"?V.call(k(R),this[0]):V.call(this,R.jquery?R[0]:R):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(R,G){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(R,G))))},addBack:function(R){return this.add(R==null?this.prevObject:this.prevObject.filter(R))}});function Ut($,R){for(;($=$[R])&&$.nodeType!==1;);return $}k.each({parent:function(R){var G=R.parentNode;return G&&G.nodeType!==11?G:null},parents:function(R){return Ue(R,"parentNode")},parentsUntil:function(R,G,Y){return Ue(R,"parentNode",Y)},next:function(R){return Ut(R,"nextSibling")},prev:function(R){return Ut(R,"previousSibling")},nextAll:function(R){return Ue(R,"nextSibling")},prevAll:function(R){return Ue(R,"previousSibling")},nextUntil:function(R,G,Y){return Ue(R,"nextSibling",Y)},prevUntil:function(R,G,Y){return Ue(R,"previousSibling",Y)},siblings:function(R){return St((R.parentNode||{}).firstChild,R)},children:function(R){return St(R.firstChild)},contents:function(R){return R.contentDocument!=null&&D(R.contentDocument)?R.contentDocument:(Wt(R,"template")&&(R=R.content||R),k.merge([],R.childNodes))}},function($,R){k.fn[$]=function(G,Y){var fe=k.map(this,R,G);return $.slice(-5)!=="Until"&&(Y=G),Y&&typeof Y=="string"&&(fe=k.filter(Y,fe)),this.length>1&&(gn[$]||k.uniqueSort(fe),Gt.test($)&&fe.reverse()),this.pushStack(fe)}});var Ht=/[^\x20\t\r\n\f]+/g;function Rt($){var R={};return k.each($.match(Ht)||[],function(G,Y){R[Y]=!0}),R}k.Callbacks=function($){$=typeof $=="string"?Rt($):k.extend({},$);var R,G,Y,fe,Se=[],Ie=[],Ze=-1,Pt=function(){for(fe=fe||$.once,Y=R=!0;Ie.length;Ze=-1)for(G=Ie.shift();++Ze<Se.length;)Se[Ze].apply(G[0],G[1])===!1&&$.stopOnFalse&&(Ze=Se.length,G=!1);$.memory||(G=!1),R=!1,fe&&(G?Se=[]:Se="")},zt={add:function(){return Se&&(G&&!R&&(Ze=Se.length-1,Ie.push(G)),function Sr(Dr){k.each(Dr,function(en,sr){ae(sr)?(!$.unique||!zt.has(sr))&&Se.push(sr):sr&&sr.length&&Z(sr)!=="string"&&Sr(sr)})}(arguments),G&&!R&&Pt()),this},remove:function(){return k.each(arguments,function(Sr,Dr){for(var en;(en=k.inArray(Dr,Se,en))>-1;)Se.splice(en,1),en<=Ze&&Ze--}),this},has:function(Sr){return Sr?k.inArray(Sr,Se)>-1:Se.length>0},empty:function(){return Se&&(Se=[]),this},disable:function(){return fe=Ie=[],Se=G="",this},disabled:function(){return!Se},lock:function(){return fe=Ie=[],!G&&!R&&(Se=G=""),this},locked:function(){return!!fe},fireWith:function(Sr,Dr){return fe||(Dr=Dr||[],Dr=[Sr,Dr.slice?Dr.slice():Dr],Ie.push(Dr),R||Pt()),this},fire:function(){return zt.fireWith(this,arguments),this},fired:function(){return!!Y}};return zt};function Fe($){return $}function me($){throw $}function ze($,R,G,Y){var fe;try{$&&ae(fe=$.promise)?fe.call($).done(R).fail(G):$&&ae(fe=$.then)?fe.call($,R,G):R.apply(void 0,[$].slice(Y))}catch(Se){G.apply(void 0,[Se])}}k.extend({Deferred:function(R){var G=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],Y="pending",fe={state:function(){return Y},always:function(){return Se.done(arguments).fail(arguments),this},catch:function(Ze){return fe.then(null,Ze)},pipe:function(){var Ze=arguments;return k.Deferred(function(Pt){k.each(G,function(zt,Cn){var Sr=ae(Ze[Cn[4]])&&Ze[Cn[4]];Se[Cn[1]](function(){var Dr=Sr&&Sr.apply(this,arguments);Dr&&ae(Dr.promise)?Dr.promise().progress(Pt.notify).done(Pt.resolve).fail(Pt.reject):Pt[Cn[0]+"With"](this,Sr?[Dr]:arguments)})}),Ze=null}).promise()},then:function(Ze,Pt,zt){var Cn=0;function Sr(Dr,en,sr,Kr){return function(){var ma=this,sa=arguments,Yo=function(){var Na,Sa;if(Dr<Cn)return;if(Na=sr.apply(ma,sa),Na===en.promise())throw new TypeError("Thenable self-resolution");Sa=Na&&(typeof Na=="object"||typeof Na=="function")&&Na.then,ae(Sa)?Kr?Sa.call(Na,Sr(Cn,en,Fe,Kr),Sr(Cn,en,me,Kr)):(Cn++,Sa.call(Na,Sr(Cn,en,Fe,Kr),Sr(Cn,en,me,Kr),Sr(Cn,en,Fe,en.notifyWith))):(sr!==Fe&&(ma=void 0,sa=[Na]),(Kr||en.resolveWith)(ma,sa))},ka=Kr?Yo:function(){try{Yo()}catch(bi){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(bi,ka.stackTrace),Dr+1>=Cn&&(sr!==me&&(ma=void 0,sa=[bi]),en.rejectWith(ma,sa))}};Dr?ka():(k.Deferred.getStackHook&&(ka.stackTrace=k.Deferred.getStackHook()),E.setTimeout(ka))}}return k.Deferred(function(Dr){G[0][3].add(Sr(0,Dr,ae(zt)?zt:Fe,Dr.notifyWith)),G[1][3].add(Sr(0,Dr,ae(Ze)?Ze:Fe)),G[2][3].add(Sr(0,Dr,ae(Pt)?Pt:me))}).promise()},promise:function(Ze){return Ze!=null?k.extend(Ze,fe):fe}},Se={};return k.each(G,function(Ie,Ze){var Pt=Ze[2],zt=Ze[5];fe[Ze[1]]=Pt.add,zt&&Pt.add(function(){Y=zt},G[3-Ie][2].disable,G[3-Ie][3].disable,G[0][2].lock,G[0][3].lock),Pt.add(Ze[3].fire),Se[Ze[0]]=function(){return Se[Ze[0]+"With"](this===Se?void 0:this,arguments),this},Se[Ze[0]+"With"]=Pt.fireWith}),fe.promise(Se),R&&R.call(Se,Se),Se},when:function(R){var G=arguments.length,Y=G,fe=Array(Y),Se=O.call(arguments),Ie=k.Deferred(),Ze=function(zt){return function(Cn){fe[zt]=this,Se[zt]=arguments.length>1?O.call(arguments):Cn,--G||Ie.resolveWith(fe,Se)}};if(G<=1&&(ze(R,Ie.done(Ze(Y)).resolve,Ie.reject,!G),Ie.state()==="pending"||ae(Se[Y]&&Se[Y].then)))return Ie.then();for(;Y--;)ze(Se[Y],Ze(Y),Ie.reject);return Ie.promise()}});var Be=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function($,R){E.console&&E.console.warn&&$&&Be.test($.name)&&E.console.warn("jQuery.Deferred exception: "+$.message,$.stack,R)},k.readyException=function($){E.setTimeout(function(){throw $})};var ut=k.Deferred();k.fn.ready=function($){return ut.then($).catch(function(R){k.readyException(R)}),this},k.extend({isReady:!1,readyWait:1,ready:function(R){if(R===!0?--k.readyWait:k.isReady)return;if(k.isReady=!0,R!==!0&&--k.readyWait>0)return;ut.resolveWith(re,[k])}}),k.ready.then=ut.then;function xt(){re.removeEventListener("DOMContentLoaded",xt),E.removeEventListener("load",xt),k.ready()}re.readyState==="complete"||re.readyState!=="loading"&&!re.documentElement.doScroll?E.setTimeout(k.ready):(re.addEventListener("DOMContentLoaded",xt),E.addEventListener("load",xt));var $t=function $(R,G,Y,fe,Se,Ie,Ze){var Pt=0,zt=R.length,Cn=Y==null;if(Z(Y)==="object"){Se=!0;for(Pt in Y)$(R,G,Pt,Y[Pt],!0,Ie,Ze)}else if(fe!==void 0&&(Se=!0,ae(fe)||(Ze=!0),Cn&&(Ze?(G.call(R,fe),G=null):(Cn=G,G=function(Dr,en,sr){return Cn.call(k(Dr),sr)})),G))for(;Pt<zt;Pt++)G(R[Pt],Y,Ze?fe:fe.call(R[Pt],Pt,G(R[Pt],Y)));return Se?R:Cn?G.call(R):zt?G(R[0],Y):Ie},Qt=/^-ms-/,on=/-([a-z])/g;function Mn($,R){return R.toUpperCase()}function Nn($){return $.replace(Qt,"ms-").replace(on,Mn)}var qn=function(R){return R.nodeType===1||R.nodeType===9||!+R.nodeType};function nr(){this.expando=k.expando+nr.uid++}nr.uid=1,nr.prototype={cache:function(R){var G=R[this.expando];return G||(G={},qn(R)&&(R.nodeType?R[this.expando]=G:Object.defineProperty(R,this.expando,{value:G,configurable:!0}))),G},set:function(R,G,Y){var fe,Se=this.cache(R);if(typeof G=="string")Se[Nn(G)]=Y;else for(fe in G)Se[Nn(fe)]=G[fe];return Se},get:function(R,G){return G===void 0?this.cache(R):R[this.expando]&&R[this.expando][Nn(G)]},access:function(R,G,Y){return G===void 0||G&&typeof G=="string"&&Y===void 0?this.get(R,G):(this.set(R,G,Y),Y!==void 0?Y:G)},remove:function(R,G){var Y,fe=R[this.expando];if(fe===void 0)return;if(G!==void 0)for(Array.isArray(G)?G=G.map(Nn):(G=Nn(G),G=G in fe?[G]:G.match(Ht)||[]),Y=G.length;Y--;)delete fe[G[Y]];(G===void 0||k.isEmptyObject(fe))&&(R.nodeType?R[this.expando]=void 0:delete R[this.expando])},hasData:function(R){var G=R[this.expando];return G!==void 0&&!k.isEmptyObject(G)}};var xn=new nr,pn=new nr,pr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,gr=/[A-Z]/g;function Ce($){return $==="true"?!0:$==="false"?!1:$==="null"?null:$===+$+""?+$:pr.test($)?JSON.parse($):$}function Jn($,R,G){var Y;if(G===void 0&&$.nodeType===1)if(Y="data-"+R.replace(gr,"-$&").toLowerCase(),G=$.getAttribute(Y),typeof G=="string"){try{G=Ce(G)}catch(fe){}pn.set($,R,G)}else G=void 0;return G}k.extend({hasData:function(R){return pn.hasData(R)||xn.hasData(R)},data:function(R,G,Y){return pn.access(R,G,Y)},removeData:function(R,G){pn.remove(R,G)},_data:function(R,G,Y){return xn.access(R,G,Y)},_removeData:function(R,G){xn.remove(R,G)}}),k.fn.extend({data:function(R,G){var Y,fe,Se,Ie=this[0],Ze=Ie&&Ie.attributes;if(R===void 0){if(this.length&&(Se=pn.get(Ie),Ie.nodeType===1&&!xn.get(Ie,"hasDataAttrs"))){for(Y=Ze.length;Y--;)Ze[Y]&&(fe=Ze[Y].name,fe.indexOf("data-")===0&&(fe=Nn(fe.slice(5)),Jn(Ie,fe,Se[fe])));xn.set(Ie,"hasDataAttrs",!0)}return Se}return typeof R=="object"?this.each(function(){pn.set(this,R)}):$t(this,function(Pt){var zt;if(Ie&&Pt===void 0)return zt=pn.get(Ie,R),zt!==void 0?zt:(zt=Jn(Ie,R),zt!==void 0?zt:void 0);this.each(function(){pn.set(this,R,Pt)})},null,G,arguments.length>1,null,!0)},removeData:function(R){return this.each(function(){pn.remove(this,R)})}}),k.extend({queue:function(R,G,Y){var fe;if(R)return G=(G||"fx")+"queue",fe=xn.get(R,G),Y&&(!fe||Array.isArray(Y)?fe=xn.access(R,G,k.makeArray(Y)):fe.push(Y)),fe||[]},dequeue:function(R,G){G=G||"fx";var Y=k.queue(R,G),fe=Y.length,Se=Y.shift(),Ie=k._queueHooks(R,G),Ze=function(){k.dequeue(R,G)};Se==="inprogress"&&(Se=Y.shift(),fe--),Se&&(G==="fx"&&Y.unshift("inprogress"),delete Ie.stop,Se.call(R,Ze,Ie)),!fe&&Ie&&Ie.empty.fire()},_queueHooks:function(R,G){var Y=G+"queueHooks";return xn.get(R,Y)||xn.access(R,Y,{empty:k.Callbacks("once memory").add(function(){xn.remove(R,[G+"queue",Y])})})}}),k.fn.extend({queue:function(R,G){var Y=2;return typeof R!="string"&&(G=R,R="fx",Y--),arguments.length<Y?k.queue(this[0],R):G===void 0?this:this.each(function(){var fe=k.queue(this,R,G);k._queueHooks(this,R),R==="fx"&&fe[0]!=="inprogress"&&k.dequeue(this,R)})},dequeue:function(R){return this.each(function(){k.dequeue(this,R)})},clearQueue:function(R){return this.queue(R||"fx",[])},promise:function(R,G){var Y,fe=1,Se=k.Deferred(),Ie=this,Ze=this.length,Pt=function(){--fe||Se.resolveWith(Ie,[Ie])};for(typeof R!="string"&&(G=R,R=void 0),R=R||"fx";Ze--;)Y=xn.get(Ie[Ze],R+"queueHooks"),Y&&Y.empty&&(fe++,Y.empty.add(Pt));return Pt(),Se.promise(G)}});var Ln=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,yr=new RegExp("^(?:([+-])=|)("+Ln+")([a-z%]*)$","i"),Un=["Top","Right","Bottom","Left"],$e=re.documentElement,Re=function(R){return k.contains(R.ownerDocument,R)},Ye={composed:!0};$e.getRootNode&&(Re=function(R){return k.contains(R.ownerDocument,R)||R.getRootNode(Ye)===R.ownerDocument});var tt=function(R,G){return R=G||R,R.style.display==="none"||R.style.display===""&&Re(R)&&k.css(R,"display")==="none"};function gt($,R,G,Y){var fe,Se,Ie=20,Ze=Y?function(){return Y.cur()}:function(){return k.css($,R,"")},Pt=Ze(),zt=G&&G[3]||(k.cssNumber[R]?"":"px"),Cn=$.nodeType&&(k.cssNumber[R]||zt!=="px"&&+Pt)&&yr.exec(k.css($,R));if(Cn&&Cn[3]!==zt){for(Pt=Pt/2,zt=zt||Cn[3],Cn=+Pt||1;Ie--;)k.style($,R,Cn+zt),(1-Se)*(1-(Se=Ze()/Pt||.5))<=0&&(Ie=0),Cn=Cn/Se;Cn=Cn*2,k.style($,R,Cn+zt),G=G||[]}return G&&(Cn=+Cn||+Pt||0,fe=G[1]?Cn+(G[1]+1)*G[2]:+G[2],Y&&(Y.unit=zt,Y.start=Cn,Y.end=fe)),fe}var kt={};function Pe($){var R,G=$.ownerDocument,Y=$.nodeName,fe=kt[Y];return fe||(R=G.body.appendChild(G.createElement(Y)),fe=k.css(R,"display"),R.parentNode.removeChild(R),fe==="none"&&(fe="block"),kt[Y]=fe,fe)}function pt($,R){for(var G,Y,fe=[],Se=0,Ie=$.length;Se<Ie;Se++){if(Y=$[Se],!Y.style)continue;G=Y.style.display,R?(G==="none"&&(fe[Se]=xn.get(Y,"display")||null,fe[Se]||(Y.style.display="")),Y.style.display===""&&tt(Y)&&(fe[Se]=Pe(Y))):G!=="none"&&(fe[Se]="none",xn.set(Y,"display",G))}for(Se=0;Se<Ie;Se++)fe[Se]!=null&&($[Se].style.display=fe[Se]);return $}k.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(R){return typeof R=="boolean"?R?this.show():this.hide():this.each(function(){tt(this)?k(this).show():k(this).hide()})}});var st=/^(?:checkbox|radio)$/i,Ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,An=/^$|^module$|\/(?:java|ecma)script/i;(function(){var $=re.createDocumentFragment(),R=$.appendChild(re.createElement("div")),G=re.createElement("input");G.setAttribute("type","radio"),G.setAttribute("checked","checked"),G.setAttribute("name","t"),R.appendChild(G),de.checkClone=R.cloneNode(!0).cloneNode(!0).lastChild.checked,R.innerHTML="<textarea>x</textarea>",de.noCloneChecked=!!R.cloneNode(!0).lastChild.defaultValue,R.innerHTML="<option></option>",de.option=!!R.lastChild})();var Gn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Gn.tbody=Gn.tfoot=Gn.colgroup=Gn.caption=Gn.thead,Gn.th=Gn.td,de.option||(Gn.optgroup=Gn.option=[1,"<select multiple='multiple'>","</select>"]);function Yn($,R){var G;return typeof $.getElementsByTagName!="undefined"?G=$.getElementsByTagName(R||"*"):typeof $.querySelectorAll!="undefined"?G=$.querySelectorAll(R||"*"):G=[],R===void 0||R&&Wt($,R)?k.merge([$],G):G}function vr($,R){for(var G=0,Y=$.length;G<Y;G++)xn.set($[G],"globalEval",!R||xn.get(R[G],"globalEval"))}var zr=/<|&#?\w+;/;function et($,R,G,Y,fe){for(var Se,Ie,Ze,Pt,zt,Cn,Sr=R.createDocumentFragment(),Dr=[],en=0,sr=$.length;en<sr;en++)if(Se=$[en],Se||Se===0)if(Z(Se)==="object")k.merge(Dr,Se.nodeType?[Se]:Se);else if(!zr.test(Se))Dr.push(R.createTextNode(Se));else{for(Ie=Ie||Sr.appendChild(R.createElement("div")),Ze=(Ft.exec(Se)||["",""])[1].toLowerCase(),Pt=Gn[Ze]||Gn._default,Ie.innerHTML=Pt[1]+k.htmlPrefilter(Se)+Pt[2],Cn=Pt[0];Cn--;)Ie=Ie.lastChild;k.merge(Dr,Ie.childNodes),Ie=Sr.firstChild,Ie.textContent=""}for(Sr.textContent="",en=0;Se=Dr[en++];){if(Y&&k.inArray(Se,Y)>-1){fe&&fe.push(Se);continue}if(zt=Re(Se),Ie=Yn(Sr.appendChild(Se),"script"),zt&&vr(Ie),G)for(Cn=0;Se=Ie[Cn++];)An.test(Se.type||"")&&G.push(Se)}return Sr}var wt=/^([^.]*)(?:\.(.+)|)/;function lt(){return!0}function Vt(){return!1}function cn($,R){return $===We()===(R==="focus")}function We(){try{return re.activeElement}catch($){}}function Jt($,R,G,Y,fe,Se){var Ie,Ze;if(typeof R=="object"){typeof G!="string"&&(Y=Y||G,G=void 0);for(Ze in R)Jt($,Ze,G,Y,R[Ze],Se);return $}if(Y==null&&fe==null?(fe=G,Y=G=void 0):fe==null&&(typeof G=="string"?(fe=Y,Y=void 0):(fe=Y,Y=G,G=void 0)),fe===!1)fe=Vt;else if(!fe)return $;return Se===1&&(Ie=fe,fe=function(zt){return k().off(zt),Ie.apply(this,arguments)},fe.guid=Ie.guid||(Ie.guid=k.guid++)),$.each(function(){k.event.add(this,R,fe,Y,G)})}k.event={global:{},add:function(R,G,Y,fe,Se){var Ie,Ze,Pt,zt,Cn,Sr,Dr,en,sr,Kr,ma,sa=xn.get(R);if(!qn(R))return;for(Y.handler&&(Ie=Y,Y=Ie.handler,Se=Ie.selector),Se&&k.find.matchesSelector($e,Se),Y.guid||(Y.guid=k.guid++),(zt=sa.events)||(zt=sa.events=Object.create(null)),(Ze=sa.handle)||(Ze=sa.handle=function(Yo){return typeof k!="undefined"&&k.event.triggered!==Yo.type?k.event.dispatch.apply(R,arguments):void 0}),G=(G||"").match(Ht)||[""],Cn=G.length;Cn--;){if(Pt=wt.exec(G[Cn])||[],sr=ma=Pt[1],Kr=(Pt[2]||"").split(".").sort(),!sr)continue;Dr=k.event.special[sr]||{},sr=(Se?Dr.delegateType:Dr.bindType)||sr,Dr=k.event.special[sr]||{},Sr=k.extend({type:sr,origType:ma,data:fe,handler:Y,guid:Y.guid,selector:Se,needsContext:Se&&k.expr.match.needsContext.test(Se),namespace:Kr.join(".")},Ie),(en=zt[sr])||(en=zt[sr]=[],en.delegateCount=0,(!Dr.setup||Dr.setup.call(R,fe,Kr,Ze)===!1)&&(R.addEventListener&&R.addEventListener(sr,Ze))),Dr.add&&(Dr.add.call(R,Sr),Sr.handler.guid||(Sr.handler.guid=Y.guid)),Se?en.splice(en.delegateCount++,0,Sr):en.push(Sr),k.event.global[sr]=!0}},remove:function(R,G,Y,fe,Se){var Ie,Ze,Pt,zt,Cn,Sr,Dr,en,sr,Kr,ma,sa=xn.hasData(R)&&xn.get(R);if(!sa||!(zt=sa.events))return;for(G=(G||"").match(Ht)||[""],Cn=G.length;Cn--;){if(Pt=wt.exec(G[Cn])||[],sr=ma=Pt[1],Kr=(Pt[2]||"").split(".").sort(),!sr){for(sr in zt)k.event.remove(R,sr+G[Cn],Y,fe,!0);continue}for(Dr=k.event.special[sr]||{},sr=(fe?Dr.delegateType:Dr.bindType)||sr,en=zt[sr]||[],Pt=Pt[2]&&new RegExp("(^|\\.)"+Kr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ze=Ie=en.length;Ie--;)Sr=en[Ie],(Se||ma===Sr.origType)&&(!Y||Y.guid===Sr.guid)&&(!Pt||Pt.test(Sr.namespace))&&(!fe||fe===Sr.selector||fe==="**"&&Sr.selector)&&(en.splice(Ie,1),Sr.selector&&en.delegateCount--,Dr.remove&&Dr.remove.call(R,Sr));Ze&&!en.length&&((!Dr.teardown||Dr.teardown.call(R,Kr,sa.handle)===!1)&&k.removeEvent(R,sr,sa.handle),delete zt[sr])}k.isEmptyObject(zt)&&xn.remove(R,"handle events")},dispatch:function(R){var G,Y,fe,Se,Ie,Ze,Pt=new Array(arguments.length),zt=k.event.fix(R),Cn=(xn.get(this,"events")||Object.create(null))[zt.type]||[],Sr=k.event.special[zt.type]||{};for(Pt[0]=zt,G=1;G<arguments.length;G++)Pt[G]=arguments[G];if(zt.delegateTarget=this,Sr.preDispatch&&Sr.preDispatch.call(this,zt)===!1)return;for(Ze=k.event.handlers.call(this,zt,Cn),G=0;(Se=Ze[G++])&&!zt.isPropagationStopped();)for(zt.currentTarget=Se.elem,Y=0;(Ie=Se.handlers[Y++])&&!zt.isImmediatePropagationStopped();)(!zt.rnamespace||Ie.namespace===!1||zt.rnamespace.test(Ie.namespace))&&(zt.handleObj=Ie,zt.data=Ie.data,fe=((k.event.special[Ie.origType]||{}).handle||Ie.handler).apply(Se.elem,Pt),fe!==void 0&&((zt.result=fe)===!1&&(zt.preventDefault(),zt.stopPropagation())));return Sr.postDispatch&&Sr.postDispatch.call(this,zt),zt.result},handlers:function(R,G){var Y,fe,Se,Ie,Ze,Pt=[],zt=G.delegateCount,Cn=R.target;if(zt&&Cn.nodeType&&!(R.type==="click"&&R.button>=1)){for(;Cn!==this;Cn=Cn.parentNode||this)if(Cn.nodeType===1&&!(R.type==="click"&&Cn.disabled===!0)){for(Ie=[],Ze={},Y=0;Y<zt;Y++)fe=G[Y],Se=fe.selector+" ",Ze[Se]===void 0&&(Ze[Se]=fe.needsContext?k(Se,this).index(Cn)>-1:k.find(Se,this,null,[Cn]).length),Ze[Se]&&Ie.push(fe);Ie.length&&Pt.push({elem:Cn,handlers:Ie})}}return Cn=this,zt<G.length&&Pt.push({elem:Cn,handlers:G.slice(zt)}),Pt},addProp:function(R,G){Object.defineProperty(k.Event.prototype,R,{enumerable:!0,configurable:!0,get:ae(G)?function(){if(this.originalEvent)return G(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[R]},set:function(fe){Object.defineProperty(this,R,{enumerable:!0,configurable:!0,writable:!0,value:fe})}})},fix:function(R){return R[k.expando]?R:new k.Event(R)},special:{load:{noBubble:!0},click:{setup:function(R){var G=this||R;return st.test(G.type)&&G.click&&Wt(G,"input")&&vt(G,"click",lt),!1},trigger:function(R){var G=this||R;return st.test(G.type)&&G.click&&Wt(G,"input")&&vt(G,"click"),!0},_default:function(R){var G=R.target;return st.test(G.type)&&G.click&&Wt(G,"input")&&xn.get(G,"click")||Wt(G,"a")}},beforeunload:{postDispatch:function(R){R.result!==void 0&&R.originalEvent&&(R.originalEvent.returnValue=R.result)}}}};function vt($,R,G){if(!G){xn.get($,R)===void 0&&k.event.add($,R,lt);return}xn.set($,R,!1),k.event.add($,R,{namespace:!1,handler:function(fe){var Se,Ie,Ze=xn.get(this,R);if(fe.isTrigger&1&&this[R]){if(Ze.length)(k.event.special[R]||{}).delegateType&&fe.stopPropagation();else if(Ze=O.call(arguments),xn.set(this,R,Ze),Se=G(this,R),this[R](),Ie=xn.get(this,R),Ze!==Ie||Se?xn.set(this,R,!1):Ie={},Ze!==Ie)return fe.stopImmediatePropagation(),fe.preventDefault(),Ie&&Ie.value}else Ze.length&&(xn.set(this,R,{value:k.event.trigger(k.extend(Ze[0],k.Event.prototype),Ze.slice(1),this)}),fe.stopImmediatePropagation())}})}k.removeEvent=function($,R,G){$.removeEventListener&&$.removeEventListener(R,G)},k.Event=function($,R){if(!(this instanceof k.Event))return new k.Event($,R);$&&$.type?(this.originalEvent=$,this.type=$.type,this.isDefaultPrevented=$.defaultPrevented||$.defaultPrevented===void 0&&$.returnValue===!1?lt:Vt,this.target=$.target&&$.target.nodeType===3?$.target.parentNode:$.target,this.currentTarget=$.currentTarget,this.relatedTarget=$.relatedTarget):this.type=$,R&&k.extend(this,R),this.timeStamp=$&&$.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Vt,isPropagationStopped:Vt,isImmediatePropagationStopped:Vt,isSimulated:!1,preventDefault:function(){var R=this.originalEvent;this.isDefaultPrevented=lt,R&&!this.isSimulated&&R.preventDefault()},stopPropagation:function(){var R=this.originalEvent;this.isPropagationStopped=lt,R&&!this.isSimulated&&R.stopPropagation()},stopImmediatePropagation:function(){var R=this.originalEvent;this.isImmediatePropagationStopped=lt,R&&!this.isSimulated&&R.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function($,R){k.event.special[$]={setup:function(){return vt(this,$,cn),!1},trigger:function(){return vt(this,$),!0},_default:function(){return!0},delegateType:R}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function($,R){k.event.special[$]={delegateType:R,bindType:R,handle:function(Y){var fe,Se=this,Ie=Y.relatedTarget,Ze=Y.handleObj;return(!Ie||Ie!==Se&&!k.contains(Se,Ie))&&(Y.type=Ze.origType,fe=Ze.handler.apply(this,arguments),Y.type=R),fe}}}),k.fn.extend({on:function(R,G,Y,fe){return Jt(this,R,G,Y,fe)},one:function(R,G,Y,fe){return Jt(this,R,G,Y,fe,1)},off:function(R,G,Y){var fe,Se;if(R&&R.preventDefault&&R.handleObj)return fe=R.handleObj,k(R.delegateTarget).off(fe.namespace?fe.origType+"."+fe.namespace:fe.origType,fe.selector,fe.handler),this;if(typeof R=="object"){for(Se in R)this.off(Se,G,R[Se]);return this}return(G===!1||typeof G=="function")&&(Y=G,G=void 0),Y===!1&&(Y=Vt),this.each(function(){k.event.remove(this,R,Y,G)})}});var Kn=/<script|<style|<link/i,kr=/checked\s*(?:[^=]|=\s*.checked.)/i,Ur=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function fa($,R){return Wt($,"table")&&Wt(R.nodeType!==11?R:R.firstChild,"tr")&&k($).children("tbody")[0]||$}function ea($){return $.type=($.getAttribute("type")!==null)+"/"+$.type,$}function ia($){return($.type||"").slice(0,5)==="true/"?$.type=$.type.slice(5):$.removeAttribute("type"),$}function Va($,R){var G,Y,fe,Se,Ie,Ze,Pt;if(R.nodeType!==1)return;if(xn.hasData($)&&(Se=xn.get($),Pt=Se.events,Pt)){xn.remove(R,"handle events");for(fe in Pt)for(G=0,Y=Pt[fe].length;G<Y;G++)k.event.add(R,fe,Pt[fe][G])}pn.hasData($)&&(Ie=pn.access($),Ze=k.extend({},Ie),pn.set(R,Ze))}function da($,R){var G=R.nodeName.toLowerCase();G==="input"&&st.test($.type)?R.checked=$.checked:(G==="input"||G==="textarea")&&(R.defaultValue=$.defaultValue)}function $a($,R,G,Y){R=L(R);var fe,Se,Ie,Ze,Pt,zt,Cn=0,Sr=$.length,Dr=Sr-1,en=R[0],sr=ae(en);if(sr||Sr>1&&typeof en=="string"&&!de.checkClone&&kr.test(en))return $.each(function(Kr){var ma=$.eq(Kr);sr&&(R[0]=en.call(this,Kr,ma.html())),$a(ma,R,G,Y)});if(Sr&&(fe=et(R,$[0].ownerDocument,!1,$,Y),Se=fe.firstChild,fe.childNodes.length===1&&(fe=Se),Se||Y)){for(Ie=k.map(Yn(fe,"script"),ea),Ze=Ie.length;Cn<Sr;Cn++)Pt=fe,Cn!==Dr&&(Pt=k.clone(Pt,!0,!0),Ze&&k.merge(Ie,Yn(Pt,"script"))),G.call($[Cn],Pt,Cn);if(Ze)for(zt=Ie[Ie.length-1].ownerDocument,k.map(Ie,ia),Cn=0;Cn<Ze;Cn++)Pt=Ie[Cn],An.test(Pt.type||"")&&!xn.access(Pt,"globalEval")&&k.contains(zt,Pt)&&(Pt.src&&(Pt.type||"").toLowerCase()!=="module"?k._evalUrl&&!Pt.noModule&&k._evalUrl(Pt.src,{nonce:Pt.nonce||Pt.getAttribute("nonce")},zt):ye(Pt.textContent.replace(Ur,""),Pt,zt))}return $}function di($,R,G){for(var Y,fe=R?k.filter(R,$):$,Se=0;(Y=fe[Se])!=null;Se++)!G&&Y.nodeType===1&&k.cleanData(Yn(Y)),Y.parentNode&&(G&&Re(Y)&&vr(Yn(Y,"script")),Y.parentNode.removeChild(Y));return $}k.extend({htmlPrefilter:function(R){return R},clone:function(R,G,Y){var fe,Se,Ie,Ze,Pt=R.cloneNode(!0),zt=Re(R);if(!de.noCloneChecked&&(R.nodeType===1||R.nodeType===11)&&!k.isXMLDoc(R))for(Ze=Yn(Pt),Ie=Yn(R),fe=0,Se=Ie.length;fe<Se;fe++)da(Ie[fe],Ze[fe]);if(G)if(Y)for(Ie=Ie||Yn(R),Ze=Ze||Yn(Pt),fe=0,Se=Ie.length;fe<Se;fe++)Va(Ie[fe],Ze[fe]);else Va(R,Pt);return Ze=Yn(Pt,"script"),Ze.length>0&&vr(Ze,!zt&&Yn(R,"script")),Pt},cleanData:function(R){for(var G,Y,fe,Se=k.event.special,Ie=0;(Y=R[Ie])!==void 0;Ie++)if(qn(Y)){if(G=Y[xn.expando]){if(G.events)for(fe in G.events)Se[fe]?k.event.remove(Y,fe):k.removeEvent(Y,fe,G.handle);Y[xn.expando]=void 0}Y[pn.expando]&&(Y[pn.expando]=void 0)}}}),k.fn.extend({detach:function(R){return di(this,R,!0)},remove:function(R){return di(this,R)},text:function(R){return $t(this,function(G){return G===void 0?k.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=G)})},null,R,arguments.length)},append:function(){return $a(this,arguments,function(R){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var G=fa(this,R);G.appendChild(R)}})},prepend:function(){return $a(this,arguments,function(R){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var G=fa(this,R);G.insertBefore(R,G.firstChild)}})},before:function(){return $a(this,arguments,function(R){this.parentNode&&this.parentNode.insertBefore(R,this)})},after:function(){return $a(this,arguments,function(R){this.parentNode&&this.parentNode.insertBefore(R,this.nextSibling)})},empty:function(){for(var R,G=0;(R=this[G])!=null;G++)R.nodeType===1&&(k.cleanData(Yn(R,!1)),R.textContent="");return this},clone:function(R,G){return R=R??!1,G=G??R,this.map(function(){return k.clone(this,R,G)})},html:function(R){return $t(this,function(G){var Y=this[0]||{},fe=0,Se=this.length;if(G===void 0&&Y.nodeType===1)return Y.innerHTML;if(typeof G=="string"&&!Kn.test(G)&&!Gn[(Ft.exec(G)||["",""])[1].toLowerCase()]){G=k.htmlPrefilter(G);try{for(;fe<Se;fe++)Y=this[fe]||{},Y.nodeType===1&&(k.cleanData(Yn(Y,!1)),Y.innerHTML=G);Y=0}catch(Ie){}}Y&&this.empty().append(G)},null,R,arguments.length)},replaceWith:function(){var R=[];return $a(this,arguments,function(G){var Y=this.parentNode;k.inArray(this,R)<0&&(k.cleanData(Yn(this)),Y&&Y.replaceChild(G,this))},R)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function($,R){k.fn[$]=function(G){for(var Y,fe=[],Se=k(G),Ie=Se.length-1,Ze=0;Ze<=Ie;Ze++)Y=Ze===Ie?this:this.clone(!0),k(Se[Ze])[R](Y),U.apply(fe,Y.get());return this.pushStack(fe)}});var Da=new RegExp("^("+Ln+")(?!px)[a-z%]+$","i"),Ya=function(R){var G=R.ownerDocument.defaultView;return(!G||!G.opener)&&(G=E),G.getComputedStyle(R)},ro=function(R,G,Y){var fe,Se,Ie={};for(Se in G)Ie[Se]=R.style[Se],R.style[Se]=G[Se];fe=Y.call(R);for(Se in G)R.style[Se]=Ie[Se];return fe},ys=new RegExp(Un.join("|"),"i");(function(){function $(){if(!zt)return;Pt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",zt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",$e.appendChild(Pt).appendChild(zt);var Cn=E.getComputedStyle(zt);G=Cn.top!=="1%",Ze=R(Cn.marginLeft)===12,zt.style.right="60%",Se=R(Cn.right)===36,Y=R(Cn.width)===36,zt.style.position="absolute",fe=R(zt.offsetWidth/3)===12,$e.removeChild(Pt),zt=null}function R(Cn){return Math.round(parseFloat(Cn))}var G,Y,fe,Se,Ie,Ze,Pt=re.createElement("div"),zt=re.createElement("div");if(!zt.style)return;zt.style.backgroundClip="content-box",zt.cloneNode(!0).style.backgroundClip="",de.clearCloneStyle=zt.style.backgroundClip==="content-box",k.extend(de,{boxSizingReliable:function(){return $(),Y},pixelBoxStyles:function(){return $(),Se},pixelPosition:function(){return $(),G},reliableMarginLeft:function(){return $(),Ze},scrollboxSize:function(){return $(),fe},reliableTrDimensions:function(){var Sr,Dr,en,sr;return Ie==null&&(Sr=re.createElement("table"),Dr=re.createElement("tr"),en=re.createElement("div"),Sr.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Dr.style.cssText="border:1px solid",Dr.style.height="1px",en.style.height="9px",en.style.display="block",$e.appendChild(Sr).appendChild(Dr).appendChild(en),sr=E.getComputedStyle(Dr),Ie=parseInt(sr.height,10)+parseInt(sr.borderTopWidth,10)+parseInt(sr.borderBottomWidth,10)===Dr.offsetHeight,$e.removeChild(Sr)),Ie}})})();function Co($,R,G){var Y,fe,Se,Ie,Ze=$.style;return G=G||Ya($),G&&(Ie=G.getPropertyValue(R)||G[R],Ie===""&&!Re($)&&(Ie=k.style($,R)),!de.pixelBoxStyles()&&Da.test(Ie)&&ys.test(R)&&(Y=Ze.width,fe=Ze.minWidth,Se=Ze.maxWidth,Ze.minWidth=Ze.maxWidth=Ze.width=Ie,Ie=G.width,Ze.width=Y,Ze.minWidth=fe,Ze.maxWidth=Se)),Ie!==void 0?Ie+"":Ie}function Gs($,R){return{get:function(){if($()){delete this.get;return}return(this.get=R).apply(this,arguments)}}}var Ho=["Webkit","Moz","ms"],rs=re.createElement("div").style,as={};function _s($){for(var R=$[0].toUpperCase()+$.slice(1),G=Ho.length;G--;)if($=Ho[G]+R,$ in rs)return $}function Js($){var R=k.cssProps[$]||as[$];return R||($ in rs?$:as[$]=_s($)||$)}var fo=/^(none|table(?!-c[ea]).+)/,To=/^--/,bs={position:"absolute",visibility:"hidden",display:"block"},bo={letterSpacing:"0",fontWeight:"400"};function Es($,R,G){var Y=yr.exec(R);return Y?Math.max(0,Y[2]-(G||0))+(Y[3]||"px"):R}function vu($,R,G,Y,fe,Se){var Ie=R==="width"?1:0,Ze=0,Pt=0;if(G===(Y?"border":"content"))return 0;for(;Ie<4;Ie+=2)G==="margin"&&(Pt+=k.css($,G+Un[Ie],!0,fe)),Y?(G==="content"&&(Pt-=k.css($,"padding"+Un[Ie],!0,fe)),G!=="margin"&&(Pt-=k.css($,"border"+Un[Ie]+"Width",!0,fe))):(Pt+=k.css($,"padding"+Un[Ie],!0,fe),G!=="padding"?Pt+=k.css($,"border"+Un[Ie]+"Width",!0,fe):Ze+=k.css($,"border"+Un[Ie]+"Width",!0,fe));return!Y&&Se>=0&&(Pt+=Math.max(0,Math.ceil($["offset"+R[0].toUpperCase()+R.slice(1)]-Se-Pt-Ze-.5))||0),Pt}function Zs($,R,G){var Y=Ya($),fe=!de.boxSizingReliable()||G,Se=fe&&k.css($,"boxSizing",!1,Y)==="border-box",Ie=Se,Ze=Co($,R,Y),Pt="offset"+R[0].toUpperCase()+R.slice(1);if(Da.test(Ze)){if(!G)return Ze;Ze="auto"}return(!de.boxSizingReliable()&&Se||!de.reliableTrDimensions()&&Wt($,"tr")||Ze==="auto"||!parseFloat(Ze)&&k.css($,"display",!1,Y)==="inline")&&$.getClientRects().length&&(Se=k.css($,"boxSizing",!1,Y)==="border-box",Ie=Pt in $,Ie&&(Ze=$[Pt])),Ze=parseFloat(Ze)||0,Ze+vu($,R,G||(Se?"border":"content"),Ie,Y,Ze)+"px"}k.extend({cssHooks:{opacity:{get:function(R,G){if(G){var Y=Co(R,"opacity");return Y===""?"1":Y}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(R,G,Y,fe){if(!R||R.nodeType===3||R.nodeType===8||!R.style)return;var Se,Ie,Ze,Pt=Nn(G),zt=To.test(G),Cn=R.style;if(zt||(G=Js(Pt)),Ze=k.cssHooks[G]||k.cssHooks[Pt],Y!==void 0){if(Ie=typeof Y,Ie==="string"&&(Se=yr.exec(Y))&&Se[1]&&(Y=gt(R,G,Se),Ie="number"),Y==null||Y!==Y)return;Ie==="number"&&!zt&&(Y+=Se&&Se[3]||(k.cssNumber[Pt]?"":"px")),!de.clearCloneStyle&&Y===""&&G.indexOf("background")===0&&(Cn[G]="inherit"),(!Ze||!("set"in Ze)||(Y=Ze.set(R,Y,fe))!==void 0)&&(zt?Cn.setProperty(G,Y):Cn[G]=Y)}else return Ze&&"get"in Ze&&(Se=Ze.get(R,!1,fe))!==void 0?Se:Cn[G]},css:function(R,G,Y,fe){var Se,Ie,Ze,Pt=Nn(G),zt=To.test(G);return zt||(G=Js(Pt)),Ze=k.cssHooks[G]||k.cssHooks[Pt],Ze&&"get"in Ze&&(Se=Ze.get(R,!0,Y)),Se===void 0&&(Se=Co(R,G,fe)),Se==="normal"&&G in bo&&(Se=bo[G]),Y===""||Y?(Ie=parseFloat(Se),Y===!0||isFinite(Ie)?Ie||0:Se):Se}}),k.each(["height","width"],function($,R){k.cssHooks[R]={get:function(Y,fe,Se){if(fe)return fo.test(k.css(Y,"display"))&&(!Y.getClientRects().length||!Y.getBoundingClientRect().width)?ro(Y,bs,function(){return Zs(Y,R,Se)}):Zs(Y,R,Se)},set:function(Y,fe,Se){var Ie,Ze=Ya(Y),Pt=!de.scrollboxSize()&&Ze.position==="absolute",zt=Pt||Se,Cn=zt&&k.css(Y,"boxSizing",!1,Ze)==="border-box",Sr=Se?vu(Y,R,Se,Cn,Ze):0;return Cn&&Pt&&(Sr-=Math.ceil(Y["offset"+R[0].toUpperCase()+R.slice(1)]-parseFloat(Ze[R])-vu(Y,R,"border",!1,Ze)-.5)),Sr&&(Ie=yr.exec(fe))&&(Ie[3]||"px")!=="px"&&(Y.style[R]=fe,fe=k.css(Y,R)),Es(Y,fe,Sr)}}}),k.cssHooks.marginLeft=Gs(de.reliableMarginLeft,function($,R){if(R)return(parseFloat(Co($,"marginLeft"))||$.getBoundingClientRect().left-ro($,{marginLeft:0},function(){return $.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function($,R){k.cssHooks[$+R]={expand:function(Y){for(var fe=0,Se={},Ie=typeof Y=="string"?Y.split(" "):[Y];fe<4;fe++)Se[$+Un[fe]+R]=Ie[fe]||Ie[fe-2]||Ie[0];return Se}},$!=="margin"&&(k.cssHooks[$+R].set=Es)}),k.fn.extend({css:function(R,G){return $t(this,function(Y,fe,Se){var Ie,Ze,Pt={},zt=0;if(Array.isArray(fe)){for(Ie=Ya(Y),Ze=fe.length;zt<Ze;zt++)Pt[fe[zt]]=k.css(Y,fe[zt],!1,Ie);return Pt}return Se!==void 0?k.style(Y,fe,Se):k.css(Y,fe)},R,G,arguments.length>1)}});function Ko($,R,G,Y,fe){return new Ko.prototype.init($,R,G,Y,fe)}k.Tween=Ko,Ko.prototype={constructor:Ko,init:function(R,G,Y,fe,Se,Ie){this.elem=R,this.prop=Y,this.easing=Se||k.easing._default,this.options=G,this.start=this.now=this.cur(),this.end=fe,this.unit=Ie||(k.cssNumber[Y]?"":"px")},cur:function(){var R=Ko.propHooks[this.prop];return R&&R.get?R.get(this):Ko.propHooks._default.get(this)},run:function(R){var G,Y=Ko.propHooks[this.prop];return this.options.duration?this.pos=G=k.easing[this.easing](R,this.options.duration*R,0,1,this.options.duration):this.pos=G=R,this.now=(this.end-this.start)*G+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Y&&Y.set?Y.set(this):Ko.propHooks._default.set(this),this}},Ko.prototype.init.prototype=Ko.prototype,Ko.propHooks={_default:{get:function(R){var G;return R.elem.nodeType!==1||R.elem[R.prop]!=null&&R.elem.style[R.prop]==null?R.elem[R.prop]:(G=k.css(R.elem,R.prop,""),!G||G==="auto"?0:G)},set:function(R){k.fx.step[R.prop]?k.fx.step[R.prop](R):R.elem.nodeType===1&&(k.cssHooks[R.prop]||R.elem.style[Js(R.prop)]!=null)?k.style(R.elem,R.prop,R.now+R.unit):R.elem[R.prop]=R.now}}},Ko.propHooks.scrollTop=Ko.propHooks.scrollLeft={set:function(R){R.elem.nodeType&&R.elem.parentNode&&(R.elem[R.prop]=R.now)}},k.easing={linear:function(R){return R},swing:function(R){return .5-Math.cos(R*Math.PI)/2},_default:"swing"},k.fx=Ko.prototype.init,k.fx.step={};var is,cs,qs=/^(?:toggle|show|hide)$/,Ju=/queueHooks$/;function eu(){cs&&(re.hidden===!1&&E.requestAnimationFrame?E.requestAnimationFrame(eu):E.setTimeout(eu,k.fx.interval),k.fx.tick())}function Wi(){return E.setTimeout(function(){is=void 0}),is=Date.now()}function ji($,R){var G,Y=0,fe={height:$};for(R=R?1:0;Y<4;Y+=2-R)G=Un[Y],fe["margin"+G]=fe["padding"+G]=$;return R&&(fe.opacity=fe.width=$),fe}function _o($,R,G){for(var Y,fe=(Fo.tweeners[R]||[]).concat(Fo.tweeners["*"]),Se=0,Ie=fe.length;Se<Ie;Se++)if(Y=fe[Se].call(G,R,$))return Y}function mu($,R,G){var Y,fe,Se,Ie,Ze,Pt,zt,Cn,Sr="width"in R||"height"in R,Dr=this,en={},sr=$.style,Kr=$.nodeType&&tt($),ma=xn.get($,"fxshow");G.queue||(Ie=k._queueHooks($,"fx"),Ie.unqueued==null&&(Ie.unqueued=0,Ze=Ie.empty.fire,Ie.empty.fire=function(){Ie.unqueued||Ze()}),Ie.unqueued++,Dr.always(function(){Dr.always(function(){Ie.unqueued--,k.queue($,"fx").length||Ie.empty.fire()})}));for(Y in R)if(fe=R[Y],qs.test(fe)){if(delete R[Y],Se=Se||fe==="toggle",fe===(Kr?"hide":"show"))if(fe==="show"&&ma&&ma[Y]!==void 0)Kr=!0;else continue;en[Y]=ma&&ma[Y]||k.style($,Y)}if(Pt=!k.isEmptyObject(R),!Pt&&k.isEmptyObject(en))return;Sr&&$.nodeType===1&&(G.overflow=[sr.overflow,sr.overflowX,sr.overflowY],zt=ma&&ma.display,zt==null&&(zt=xn.get($,"display")),Cn=k.css($,"display"),Cn==="none"&&(zt?Cn=zt:(pt([$],!0),zt=$.style.display||zt,Cn=k.css($,"display"),pt([$]))),(Cn==="inline"||Cn==="inline-block"&&zt!=null)&&(k.css($,"float")==="none"&&(Pt||(Dr.done(function(){sr.display=zt}),zt==null&&(Cn=sr.display,zt=Cn==="none"?"":Cn)),sr.display="inline-block"))),G.overflow&&(sr.overflow="hidden",Dr.always(function(){sr.overflow=G.overflow[0],sr.overflowX=G.overflow[1],sr.overflowY=G.overflow[2]})),Pt=!1;for(Y in en)Pt||(ma?"hidden"in ma&&(Kr=ma.hidden):ma=xn.access($,"fxshow",{display:zt}),Se&&(ma.hidden=!Kr),Kr&&pt([$],!0),Dr.done(function(){Kr||pt([$]),xn.remove($,"fxshow");for(Y in en)k.style($,Y,en[Y])})),Pt=_o(Kr?ma[Y]:0,Y,Dr),Y in ma||(ma[Y]=Pt.start,Kr&&(Pt.end=Pt.start,Pt.start=0))}function Pl($,R){var G,Y,fe,Se,Ie;for(G in $)if(Y=Nn(G),fe=R[Y],Se=$[G],Array.isArray(Se)&&(fe=Se[1],Se=$[G]=Se[0]),G!==Y&&($[Y]=Se,delete $[G]),Ie=k.cssHooks[Y],Ie&&"expand"in Ie){Se=Ie.expand(Se),delete $[Y];for(G in Se)G in $||($[G]=Se[G],R[G]=fe)}else R[Y]=fe}function Fo($,R,G){var Y,fe,Se=0,Ie=Fo.prefilters.length,Ze=k.Deferred().always(function(){delete Pt.elem}),Pt=function(){if(fe)return!1;for(var Dr=is||Wi(),en=Math.max(0,zt.startTime+zt.duration-Dr),sr=en/zt.duration||0,Kr=1-sr,ma=0,sa=zt.tweens.length;ma<sa;ma++)zt.tweens[ma].run(Kr);return Ze.notifyWith($,[zt,Kr,en]),Kr<1&&sa?en:(sa||Ze.notifyWith($,[zt,1,0]),Ze.resolveWith($,[zt]),!1)},zt=Ze.promise({elem:$,props:k.extend({},R),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},G),originalProperties:R,originalOptions:G,startTime:is||Wi(),duration:G.duration,tweens:[],createTween:function(Dr,en){var sr=k.Tween($,zt.opts,Dr,en,zt.opts.specialEasing[Dr]||zt.opts.easing);return zt.tweens.push(sr),sr},stop:function(Dr){var en=0,sr=Dr?zt.tweens.length:0;if(fe)return this;for(fe=!0;en<sr;en++)zt.tweens[en].run(1);return Dr?(Ze.notifyWith($,[zt,1,0]),Ze.resolveWith($,[zt,Dr])):Ze.rejectWith($,[zt,Dr]),this}}),Cn=zt.props;for(Pl(Cn,zt.opts.specialEasing);Se<Ie;Se++)if(Y=Fo.prefilters[Se].call(zt,$,Cn,zt.opts),Y)return ae(Y.stop)&&(k._queueHooks(zt.elem,zt.opts.queue).stop=Y.stop.bind(Y)),Y;return k.map(Cn,_o,zt),ae(zt.opts.start)&&zt.opts.start.call($,zt),zt.progress(zt.opts.progress).done(zt.opts.done,zt.opts.complete).fail(zt.opts.fail).always(zt.opts.always),k.fx.timer(k.extend(Pt,{elem:$,anim:zt,queue:zt.opts.queue})),zt}k.Animation=k.extend(Fo,{tweeners:{"*":[function($,R){var G=this.createTween($,R);return gt(G.elem,$,yr.exec(R),G),G}]},tweener:function(R,G){ae(R)?(G=R,R=["*"]):R=R.match(Ht);for(var Y,fe=0,Se=R.length;fe<Se;fe++)Y=R[fe],Fo.tweeners[Y]=Fo.tweeners[Y]||[],Fo.tweeners[Y].unshift(G)},prefilters:[mu],prefilter:function(R,G){G?Fo.prefilters.unshift(R):Fo.prefilters.push(R)}}),k.speed=function($,R,G){var Y=$&&typeof $=="object"?k.extend({},$):{complete:G||!G&&R||ae($)&&$,duration:$,easing:G&&R||R&&!ae(R)&&R};return k.fx.off?Y.duration=0:typeof Y.duration!="number"&&(Y.duration in k.fx.speeds?Y.duration=k.fx.speeds[Y.duration]:Y.duration=k.fx.speeds._default),(Y.queue==null||Y.queue===!0)&&(Y.queue="fx"),Y.old=Y.complete,Y.complete=function(){ae(Y.old)&&Y.old.call(this),Y.queue&&k.dequeue(this,Y.queue)},Y},k.fn.extend({fadeTo:function(R,G,Y,fe){return this.filter(tt).css("opacity",0).show().end().animate({opacity:G},R,Y,fe)},animate:function(R,G,Y,fe){var Se=k.isEmptyObject(R),Ie=k.speed(G,Y,fe),Ze=function(){var zt=Fo(this,k.extend({},R),Ie);(Se||xn.get(this,"finish"))&&zt.stop(!0)};return Ze.finish=Ze,Se||Ie.queue===!1?this.each(Ze):this.queue(Ie.queue,Ze)},stop:function(R,G,Y){var fe=function(Ie){var Ze=Ie.stop;delete Ie.stop,Ze(Y)};return typeof R!="string"&&(Y=G,G=R,R=void 0),G&&this.queue(R||"fx",[]),this.each(function(){var Se=!0,Ie=R!=null&&R+"queueHooks",Ze=k.timers,Pt=xn.get(this);if(Ie)Pt[Ie]&&Pt[Ie].stop&&fe(Pt[Ie]);else for(Ie in Pt)Pt[Ie]&&Pt[Ie].stop&&Ju.test(Ie)&&fe(Pt[Ie]);for(Ie=Ze.length;Ie--;)Ze[Ie].elem===this&&(R==null||Ze[Ie].queue===R)&&(Ze[Ie].anim.stop(Y),Se=!1,Ze.splice(Ie,1));(Se||!Y)&&k.dequeue(this,R)})},finish:function(R){return R!==!1&&(R=R||"fx"),this.each(function(){var G,Y=xn.get(this),fe=Y[R+"queue"],Se=Y[R+"queueHooks"],Ie=k.timers,Ze=fe?fe.length:0;for(Y.finish=!0,k.queue(this,R,[]),Se&&Se.stop&&Se.stop.call(this,!0),G=Ie.length;G--;)Ie[G].elem===this&&Ie[G].queue===R&&(Ie[G].anim.stop(!0),Ie.splice(G,1));for(G=0;G<Ze;G++)fe[G]&&fe[G].finish&&fe[G].finish.call(this);delete Y.finish})}}),k.each(["toggle","show","hide"],function($,R){var G=k.fn[R];k.fn[R]=function(Y,fe,Se){return Y==null||typeof Y=="boolean"?G.apply(this,arguments):this.animate(ji(R,!0),Y,fe,Se)}}),k.each({slideDown:ji("show"),slideUp:ji("hide"),slideToggle:ji("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function($,R){k.fn[$]=function(G,Y,fe){return this.animate(R,G,Y,fe)}}),k.timers=[],k.fx.tick=function(){var $,R=0,G=k.timers;for(is=Date.now();R<G.length;R++)$=G[R],!$()&&G[R]===$&&G.splice(R--,1);G.length||k.fx.stop(),is=void 0},k.fx.timer=function($){k.timers.push($),k.fx.start()},k.fx.interval=13,k.fx.start=function(){if(cs)return;cs=!0,eu()},k.fx.stop=function(){cs=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function($,R){return $=k.fx&&k.fx.speeds[$]||$,R=R||"fx",this.queue(R,function(G,Y){var fe=E.setTimeout(G,$);Y.stop=function(){E.clearTimeout(fe)}})},function(){var $=re.createElement("input"),R=re.createElement("select"),G=R.appendChild(re.createElement("option"));$.type="checkbox",de.checkOn=$.value!=="",de.optSelected=G.selected,$=re.createElement("input"),$.value="t",$.type="radio",de.radioValue=$.value==="t"}();var ks,gu=k.expr.attrHandle;k.fn.extend({attr:function(R,G){return $t(this,k.attr,R,G,arguments.length>1)},removeAttr:function(R){return this.each(function(){k.removeAttr(this,R)})}}),k.extend({attr:function(R,G,Y){var fe,Se,Ie=R.nodeType;if(Ie===3||Ie===8||Ie===2)return;if(typeof R.getAttribute=="undefined")return k.prop(R,G,Y);if((Ie!==1||!k.isXMLDoc(R))&&(Se=k.attrHooks[G.toLowerCase()]||(k.expr.match.bool.test(G)?ks:void 0)),Y!==void 0){if(Y===null){k.removeAttr(R,G);return}return Se&&"set"in Se&&(fe=Se.set(R,Y,G))!==void 0?fe:(R.setAttribute(G,Y+""),Y)}return Se&&"get"in Se&&(fe=Se.get(R,G))!==null?fe:(fe=k.find.attr(R,G),fe??void 0)},attrHooks:{type:{set:function(R,G){if(!de.radioValue&&G==="radio"&&Wt(R,"input")){var Y=R.value;return R.setAttribute("type",G),Y&&(R.value=Y),G}}}},removeAttr:function(R,G){var Y,fe=0,Se=G&&G.match(Ht);if(Se&&R.nodeType===1)for(;Y=Se[fe++];)R.removeAttribute(Y)}}),ks={set:function(R,G,Y){return G===!1?k.removeAttr(R,Y):R.setAttribute(Y,Y),Y}},k.each(k.expr.match.bool.source.match(/\w+/g),function($,R){var G=gu[R]||k.find.attr;gu[R]=function(Y,fe,Se){var Ie,Ze,Pt=fe.toLowerCase();return Se||(Ze=gu[Pt],gu[Pt]=Ie,Ie=G(Y,fe,Se)!=null?Pt:null,gu[Pt]=Ze),Ie}});var Jl=/^(?:input|select|textarea|button)$/i,Zl=/^(?:a|area)$/i;k.fn.extend({prop:function(R,G){return $t(this,k.prop,R,G,arguments.length>1)},removeProp:function(R){return this.each(function(){delete this[k.propFix[R]||R]})}}),k.extend({prop:function(R,G,Y){var fe,Se,Ie=R.nodeType;return Ie===3||Ie===8||Ie===2?void 0:((Ie!==1||!k.isXMLDoc(R))&&(G=k.propFix[G]||G,Se=k.propHooks[G]),Y!==void 0?Se&&"set"in Se&&(fe=Se.set(R,Y,G))!==void 0?fe:R[G]=Y:Se&&"get"in Se&&(fe=Se.get(R,G))!==null?fe:R[G])},propHooks:{tabIndex:{get:function(R){var G=k.find.attr(R,"tabindex");return G?parseInt(G,10):Jl.test(R.nodeName)||Zl.test(R.nodeName)&&R.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),de.optSelected||(k.propHooks.selected={get:function(R){var G=R.parentNode;return G&&G.parentNode&&G.parentNode.selectedIndex,null},set:function(R){var G=R.parentNode;G&&(G.selectedIndex,G.parentNode&&G.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this});function Iu($){var R=$.match(Ht)||[];return R.join(" ")}function yu($){return $.getAttribute&&$.getAttribute("class")||""}function os($){return Array.isArray($)?$:typeof $=="string"?$.match(Ht)||[]:[]}k.fn.extend({addClass:function(R){var G,Y,fe,Se,Ie,Ze,Pt,zt=0;if(ae(R))return this.each(function(Cn){k(this).addClass(R.call(this,Cn,yu(this)))});if(G=os(R),G.length){for(;Y=this[zt++];)if(Se=yu(Y),fe=Y.nodeType===1&&" "+Iu(Se)+" ",fe){for(Ze=0;Ie=G[Ze++];)fe.indexOf(" "+Ie+" ")<0&&(fe+=Ie+" ");Pt=Iu(fe),Se!==Pt&&Y.setAttribute("class",Pt)}}return this},removeClass:function(R){var G,Y,fe,Se,Ie,Ze,Pt,zt=0;if(ae(R))return this.each(function(Cn){k(this).removeClass(R.call(this,Cn,yu(this)))});if(!arguments.length)return this.attr("class","");if(G=os(R),G.length){for(;Y=this[zt++];)if(Se=yu(Y),fe=Y.nodeType===1&&" "+Iu(Se)+" ",fe){for(Ze=0;Ie=G[Ze++];)for(;fe.indexOf(" "+Ie+" ")>-1;)fe=fe.replace(" "+Ie+" "," ");Pt=Iu(fe),Se!==Pt&&Y.setAttribute("class",Pt)}}return this},toggleClass:function(R,G){var Y=typeof R,fe=Y==="string"||Array.isArray(R);return typeof G=="boolean"&&fe?G?this.addClass(R):this.removeClass(R):ae(R)?this.each(function(Se){k(this).toggleClass(R.call(this,Se,yu(this),G),G)}):this.each(function(){var Se,Ie,Ze,Pt;if(fe)for(Ie=0,Ze=k(this),Pt=os(R);Se=Pt[Ie++];)Ze.hasClass(Se)?Ze.removeClass(Se):Ze.addClass(Se);else(R===void 0||Y==="boolean")&&(Se=yu(this),Se&&xn.set(this,"__className__",Se),this.setAttribute&&this.setAttribute("class",Se||R===!1?"":xn.get(this,"__className__")||""))})},hasClass:function(R){var G,Y,fe=0;for(G=" "+R+" ";Y=this[fe++];)if(Y.nodeType===1&&(" "+Iu(yu(Y))+" ").indexOf(G)>-1)return!0;return!1}});var Bi=/\r/g;k.fn.extend({val:function(R){var G,Y,fe,Se=this[0];return arguments.length?(fe=ae(R),this.each(function(Ie){var Ze;if(this.nodeType!==1)return;fe?Ze=R.call(this,Ie,k(this).val()):Ze=R,Ze==null?Ze="":typeof Ze=="number"?Ze+="":Array.isArray(Ze)&&(Ze=k.map(Ze,function(Pt){return Pt==null?"":Pt+""})),G=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()],(!G||!("set"in G)||G.set(this,Ze,"value")===void 0)&&(this.value=Ze)})):Se?(G=k.valHooks[Se.type]||k.valHooks[Se.nodeName.toLowerCase()],G&&"get"in G&&(Y=G.get(Se,"value"))!==void 0?Y:(Y=Se.value,typeof Y=="string"?Y.replace(Bi,""):Y??"")):void 0}}),k.extend({valHooks:{option:{get:function(R){var G=k.find.attr(R,"value");return G??Iu(k.text(R))}},select:{get:function(R){var G,Y,fe,Se=R.options,Ie=R.selectedIndex,Ze=R.type==="select-one",Pt=Ze?null:[],zt=Ze?Ie+1:Se.length;for(Ie<0?fe=zt:fe=Ze?Ie:0;fe<zt;fe++)if(Y=Se[fe],(Y.selected||fe===Ie)&&!Y.disabled&&(!Y.parentNode.disabled||!Wt(Y.parentNode,"optgroup"))){if(G=k(Y).val(),Ze)return G;Pt.push(G)}return Pt},set:function(R,G){for(var Y,fe,Se=R.options,Ie=k.makeArray(G),Ze=Se.length;Ze--;)fe=Se[Ze],(fe.selected=k.inArray(k.valHooks.option.get(fe),Ie)>-1)&&(Y=!0);return Y||(R.selectedIndex=-1),Ie}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(R,G){if(Array.isArray(G))return R.checked=k.inArray(k(R).val(),G)>-1}},de.checkOn||(k.valHooks[this].get=function($){return $.getAttribute("value")===null?"on":$.value})}),de.focusin="onfocusin"in E;var Mi=/^(?:focusinfocus|focusoutblur)$/,Bo=function(R){R.stopPropagation()};k.extend(k.event,{trigger:function(R,G,Y,fe){var Se,Ie,Ze,Pt,zt,Cn,Sr,Dr,en=[Y||re],sr=J.call(R,"type")?R.type:R,Kr=J.call(R,"namespace")?R.namespace.split("."):[];if(Ie=Dr=Ze=Y=Y||re,Y.nodeType===3||Y.nodeType===8)return;if(Mi.test(sr+k.event.triggered))return;if(sr.indexOf(".")>-1&&(Kr=sr.split("."),sr=Kr.shift(),Kr.sort()),zt=sr.indexOf(":")<0&&"on"+sr,R=R[k.expando]?R:new k.Event(sr,typeof R=="object"&&R),R.isTrigger=fe?2:3,R.namespace=Kr.join("."),R.rnamespace=R.namespace?new RegExp("(^|\\.)"+Kr.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,R.result=void 0,R.target||(R.target=Y),G=G==null?[R]:k.makeArray(G,[R]),Sr=k.event.special[sr]||{},!fe&&Sr.trigger&&Sr.trigger.apply(Y,G)===!1)return;if(!fe&&!Sr.noBubble&&!le(Y)){for(Pt=Sr.delegateType||sr,Mi.test(Pt+sr)||(Ie=Ie.parentNode);Ie;Ie=Ie.parentNode)en.push(Ie),Ze=Ie;Ze===(Y.ownerDocument||re)&&en.push(Ze.defaultView||Ze.parentWindow||E)}for(Se=0;(Ie=en[Se++])&&!R.isPropagationStopped();)Dr=Ie,R.type=Se>1?Pt:Sr.bindType||sr,Cn=(xn.get(Ie,"events")||Object.create(null))[R.type]&&xn.get(Ie,"handle"),Cn&&Cn.apply(Ie,G),Cn=zt&&Ie[zt],Cn&&Cn.apply&&qn(Ie)&&(R.result=Cn.apply(Ie,G),R.result===!1&&R.preventDefault());return R.type=sr,!fe&&!R.isDefaultPrevented()&&((!Sr._default||Sr._default.apply(en.pop(),G)===!1)&&qn(Y)&&(zt&&ae(Y[sr])&&!le(Y)&&(Ze=Y[zt],Ze&&(Y[zt]=null),k.event.triggered=sr,R.isPropagationStopped()&&Dr.addEventListener(sr,Bo),Y[sr](),R.isPropagationStopped()&&Dr.removeEventListener(sr,Bo),k.event.triggered=void 0,Ze&&(Y[zt]=Ze)))),R.result},simulate:function(R,G,Y){var fe=k.extend(new k.Event,Y,{type:R,isSimulated:!0});k.event.trigger(fe,null,G)}}),k.fn.extend({trigger:function(R,G){return this.each(function(){k.event.trigger(R,G,this)})},triggerHandler:function(R,G){var Y=this[0];if(Y)return k.event.trigger(R,G,Y,!0)}}),de.focusin||k.each({focus:"focusin",blur:"focusout"},function($,R){var G=function(fe){k.event.simulate(R,fe.target,k.event.fix(fe))};k.event.special[R]={setup:function(){var fe=this.ownerDocument||this.document||this,Se=xn.access(fe,R);Se||fe.addEventListener($,G,!0),xn.access(fe,R,(Se||0)+1)},teardown:function(){var fe=this.ownerDocument||this.document||this,Se=xn.access(fe,R)-1;Se?xn.access(fe,R,Se):(fe.removeEventListener($,G,!0),xn.remove(fe,R))}}});var ds=E.location,Zu={guid:Date.now()},Lu=/\?/;k.parseXML=function($){var R,G;if(!$||typeof $!="string")return null;try{R=new E.DOMParser().parseFromString($,"text/xml")}catch(Y){}return G=R&&R.getElementsByTagName("parsererror")[0],(!R||G)&&k.error("Invalid XML: "+(G?k.map(G.childNodes,function(Y){return Y.textContent}).join(`
`):$)),R};var ql=/\[\]$/,ec=/\r?\n/g,tu=/^(?:submit|button|image|reset|file)$/i,Ns=/^(?:input|select|textarea|keygen)/i;function nu($,R,G,Y){var fe;if(Array.isArray(R))k.each(R,function(Se,Ie){G||ql.test($)?Y($,Ie):nu($+"["+(typeof Ie=="object"&&Ie!=null?Se:"")+"]",Ie,G,Y)});else if(!G&&Z(R)==="object")for(fe in R)nu($+"["+fe+"]",R[fe],G,Y);else Y($,R)}k.param=function($,R){var G,Y=[],fe=function(Ie,Ze){var Pt=ae(Ze)?Ze():Ze;Y[Y.length]=encodeURIComponent(Ie)+"="+encodeURIComponent(Pt??"")};if($==null)return"";if(Array.isArray($)||$.jquery&&!k.isPlainObject($))k.each($,function(){fe(this.name,this.value)});else for(G in $)nu(G,$[G],R,fe);return Y.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var R=k.prop(this,"elements");return R?k.makeArray(R):this}).filter(function(){var R=this.type;return this.name&&!k(this).is(":disabled")&&Ns.test(this.nodeName)&&!tu.test(R)&&(this.checked||!st.test(R))}).map(function(R,G){var Y=k(this).val();return Y==null?null:Array.isArray(Y)?k.map(Y,function(fe){return{name:G.name,value:fe.replace(ec,`\r
`)}}):{name:G.name,value:Y.replace(ec,`\r
`)}}).get()}});var pl=/%20/g,Wc=/#.*$/,Hc=/([?&])_=[^&]*/,Il=/^(.*?):[ \t]*([^\r\n]*)$/mg,vl=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xc=/^(?:GET|HEAD)$/,Ll=/^\/\//,bu={},tc={},wc="*/".concat("*"),Eu=re.createElement("a");Eu.href=ds.href;function nc($){return function(R,G){typeof R!="string"&&(G=R,R="*");var Y,fe=0,Se=R.toLowerCase().match(Ht)||[];if(ae(G))for(;Y=Se[fe++];)Y[0]==="+"?(Y=Y.slice(1)||"*",($[Y]=$[Y]||[]).unshift(G)):($[Y]=$[Y]||[]).push(G)}}function ml($,R,G,Y){var fe={},Se=$===tc;function Ie(Ze){var Pt;return fe[Ze]=!0,k.each($[Ze]||[],function(zt,Cn){var Sr=Cn(R,G,Y);if(typeof Sr=="string"&&!Se&&!fe[Sr])return R.dataTypes.unshift(Sr),Ie(Sr),!1;if(Se)return!(Pt=Sr)}),Pt}return Ie(R.dataTypes[0])||!fe["*"]&&Ie("*")}function gl($,R){var G,Y,fe=k.ajaxSettings.flatOptions||{};for(G in R)R[G]!==void 0&&((fe[G]?$:Y||(Y={}))[G]=R[G]);return Y&&k.extend(!0,$,Y),$}function jl($,R,G){for(var Y,fe,Se,Ie,Ze=$.contents,Pt=$.dataTypes;Pt[0]==="*";)Pt.shift(),Y===void 0&&(Y=$.mimeType||R.getResponseHeader("Content-Type"));if(Y){for(fe in Ze)if(Ze[fe]&&Ze[fe].test(Y)){Pt.unshift(fe);break}}if(Pt[0]in G)Se=Pt[0];else{for(fe in G){if(!Pt[0]||$.converters[fe+" "+Pt[0]]){Se=fe;break}Ie||(Ie=fe)}Se=Se||Ie}if(Se)return Se!==Pt[0]&&Pt.unshift(Se),G[Se]}function yl($,R,G,Y){var fe,Se,Ie,Ze,Pt,zt={},Cn=$.dataTypes.slice();if(Cn[1])for(Ie in $.converters)zt[Ie.toLowerCase()]=$.converters[Ie];for(Se=Cn.shift();Se;)if($.responseFields[Se]&&(G[$.responseFields[Se]]=R),!Pt&&Y&&$.dataFilter&&(R=$.dataFilter(R,$.dataType)),Pt=Se,Se=Cn.shift(),Se){if(Se==="*")Se=Pt;else if(Pt!=="*"&&Pt!==Se){if(Ie=zt[Pt+" "+Se]||zt["* "+Se],!Ie){for(fe in zt)if(Ze=fe.split(" "),Ze[1]===Se&&(Ie=zt[Pt+" "+Ze[0]]||zt["* "+Ze[0]],Ie)){Ie===!0?Ie=zt[fe]:zt[fe]!==!0&&(Se=Ze[0],Cn.unshift(Ze[1]));break}}if(Ie!==!0)if(Ie&&$.throws)R=Ie(R);else try{R=Ie(R)}catch(Sr){return{state:"parsererror",error:Ie?Sr:"No conversion from "+Pt+" to "+Se}}}}return{state:"success",data:R}}k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ds.href,type:"GET",isLocal:vl.test(ds.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(R,G){return G?gl(gl(R,k.ajaxSettings),G):gl(k.ajaxSettings,R)},ajaxPrefilter:nc(bu),ajaxTransport:nc(tc),ajax:function(R,G){typeof R=="object"&&(G=R,R=void 0),G=G||{};var Y,fe,Se,Ie,Ze,Pt,zt,Cn,Sr,Dr,en=k.ajaxSetup({},G),sr=en.context||en,Kr=en.context&&(sr.nodeType||sr.jquery)?k(sr):k.event,ma=k.Deferred(),sa=k.Callbacks("once memory"),Yo=en.statusCode||{},ka={},bi={},Na="canceled",Sa={readyState:0,getResponseHeader:function(Qr){var mi;if(zt){if(!Ie)for(Ie={};mi=Il.exec(Se);)Ie[mi[1].toLowerCase()+" "]=(Ie[mi[1].toLowerCase()+" "]||[]).concat(mi[2]);mi=Ie[Qr.toLowerCase()+" "]}return mi==null?null:mi.join(", ")},getAllResponseHeaders:function(){return zt?Se:null},setRequestHeader:function(Qr,mi){return zt==null&&(Qr=bi[Qr.toLowerCase()]=bi[Qr.toLowerCase()]||Qr,ka[Qr]=mi),this},overrideMimeType:function(Qr){return zt==null&&(en.mimeType=Qr),this},statusCode:function(Qr){var mi;if(Qr)if(zt)Sa.always(Qr[Sa.status]);else for(mi in Qr)Yo[mi]=[Yo[mi],Qr[mi]];return this},abort:function(Qr){var mi=Qr||Na;return Y&&Y.abort(mi),rt(0,mi),this}};if(ma.promise(Sa),en.url=((R||en.url||ds.href)+"").replace(Ll,ds.protocol+"//"),en.type=G.method||G.type||en.method||en.type,en.dataTypes=(en.dataType||"*").toLowerCase().match(Ht)||[""],en.crossDomain==null){Pt=re.createElement("a");try{Pt.href=en.url,Pt.href=Pt.href,en.crossDomain=Eu.protocol+"//"+Eu.host!==Pt.protocol+"//"+Pt.host}catch(Rn){en.crossDomain=!0}}if(en.data&&en.processData&&typeof en.data!="string"&&(en.data=k.param(en.data,en.traditional)),ml(bu,en,G,Sa),zt)return Sa;Cn=k.event&&en.global,Cn&&k.active++===0&&k.event.trigger("ajaxStart"),en.type=en.type.toUpperCase(),en.hasContent=!xc.test(en.type),fe=en.url.replace(Wc,""),en.hasContent?en.data&&en.processData&&(en.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(en.data=en.data.replace(pl,"+")):(Dr=en.url.slice(fe.length),en.data&&(en.processData||typeof en.data=="string")&&(fe+=(Lu.test(fe)?"&":"?")+en.data,delete en.data),en.cache===!1&&(fe=fe.replace(Hc,"$1"),Dr=(Lu.test(fe)?"&":"?")+"_="+Zu.guid+++Dr),en.url=fe+Dr),en.ifModified&&(k.lastModified[fe]&&Sa.setRequestHeader("If-Modified-Since",k.lastModified[fe]),k.etag[fe]&&Sa.setRequestHeader("If-None-Match",k.etag[fe])),(en.data&&en.hasContent&&en.contentType!==!1||G.contentType)&&Sa.setRequestHeader("Content-Type",en.contentType),Sa.setRequestHeader("Accept",en.dataTypes[0]&&en.accepts[en.dataTypes[0]]?en.accepts[en.dataTypes[0]]+(en.dataTypes[0]!=="*"?", "+wc+"; q=0.01":""):en.accepts["*"]);for(Sr in en.headers)Sa.setRequestHeader(Sr,en.headers[Sr]);if(en.beforeSend&&(en.beforeSend.call(sr,Sa,en)===!1||zt))return Sa.abort();if(Na="abort",sa.add(en.complete),Sa.done(en.success),Sa.fail(en.error),Y=ml(tc,en,G,Sa),!Y)rt(-1,"No Transport");else{if(Sa.readyState=1,Cn&&Kr.trigger("ajaxSend",[Sa,en]),zt)return Sa;en.async&&en.timeout>0&&(Ze=E.setTimeout(function(){Sa.abort("timeout")},en.timeout));try{zt=!1,Y.send(ka,rt)}catch(Rn){if(zt)throw Rn;rt(-1,Rn)}}function rt(Rn,Qr,mi,Hi){var ho,Ao,uo,Io,Lo,Vi=Qr;if(zt)return;zt=!0,Ze&&E.clearTimeout(Ze),Y=void 0,Se=Hi||"",Sa.readyState=Rn>0?4:0,ho=Rn>=200&&Rn<300||Rn===304,mi&&(Io=jl(en,Sa,mi)),!ho&&k.inArray("script",en.dataTypes)>-1&&k.inArray("json",en.dataTypes)<0&&(en.converters["text script"]=function(){}),Io=yl(en,Io,Sa,ho),ho?(en.ifModified&&(Lo=Sa.getResponseHeader("Last-Modified"),Lo&&(k.lastModified[fe]=Lo),Lo=Sa.getResponseHeader("etag"),Lo&&(k.etag[fe]=Lo)),Rn===204||en.type==="HEAD"?Vi="nocontent":Rn===304?Vi="notmodified":(Vi=Io.state,Ao=Io.data,uo=Io.error,ho=!uo)):(uo=Vi,(Rn||!Vi)&&(Vi="error",Rn<0&&(Rn=0))),Sa.status=Rn,Sa.statusText=(Qr||Vi)+"",ho?ma.resolveWith(sr,[Ao,Vi,Sa]):ma.rejectWith(sr,[Sa,Vi,uo]),Sa.statusCode(Yo),Yo=void 0,Cn&&Kr.trigger(ho?"ajaxSuccess":"ajaxError",[Sa,en,ho?Ao:uo]),sa.fireWith(sr,[Sa,Vi]),Cn&&(Kr.trigger("ajaxComplete",[Sa,en]),--k.active||k.event.trigger("ajaxStop"))}return Sa},getJSON:function(R,G,Y){return k.get(R,G,Y,"json")},getScript:function(R,G){return k.get(R,void 0,G,"script")}}),k.each(["get","post"],function($,R){k[R]=function(G,Y,fe,Se){return ae(Y)&&(Se=Se||fe,fe=Y,Y=void 0),k.ajax(k.extend({url:G,type:R,dataType:Se,data:Y,success:fe},k.isPlainObject(G)&&G))}}),k.ajaxPrefilter(function($){var R;for(R in $.headers)R.toLowerCase()==="content-type"&&($.contentType=$.headers[R]||"")}),k._evalUrl=function($,R,G){return k.ajax({url:$,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(fe){k.globalEval(fe,R,G)}})},k.fn.extend({wrapAll:function(R){var G;return this[0]&&(ae(R)&&(R=R.call(this[0])),G=k(R,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&G.insertBefore(this[0]),G.map(function(){for(var Y=this;Y.firstElementChild;)Y=Y.firstElementChild;return Y}).append(this)),this},wrapInner:function(R){return ae(R)?this.each(function(G){k(this).wrapInner(R.call(this,G))}):this.each(function(){var G=k(this),Y=G.contents();Y.length?Y.wrapAll(R):G.append(R)})},wrap:function(R){var G=ae(R);return this.each(function(Y){k(this).wrapAll(G?R.call(this,Y):R)})},unwrap:function(R){return this.parent(R).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function($){return!k.expr.pseudos.visible($)},k.expr.pseudos.visible=function($){return!!($.offsetWidth||$.offsetHeight||$.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch($){}};var Cc={0:200,1223:204},$o=k.ajaxSettings.xhr();de.cors=!!$o&&"withCredentials"in $o,de.ajax=$o=!!$o,k.ajaxTransport(function($){var R,G;if(de.cors||$o&&!$.crossDomain)return{send:function(fe,Se){var Ie,Ze=$.xhr();if(Ze.open($.type,$.url,$.async,$.username,$.password),$.xhrFields)for(Ie in $.xhrFields)Ze[Ie]=$.xhrFields[Ie];$.mimeType&&Ze.overrideMimeType&&Ze.overrideMimeType($.mimeType),!$.crossDomain&&!fe["X-Requested-With"]&&(fe["X-Requested-With"]="XMLHttpRequest");for(Ie in fe)Ze.setRequestHeader(Ie,fe[Ie]);R=function(zt){return function(){R&&(R=G=Ze.onload=Ze.onerror=Ze.onabort=Ze.ontimeout=Ze.onreadystatechange=null,zt==="abort"?Ze.abort():zt==="error"?typeof Ze.status!="number"?Se(0,"error"):Se(Ze.status,Ze.statusText):Se(Cc[Ze.status]||Ze.status,Ze.statusText,(Ze.responseType||"text")!=="text"||typeof Ze.responseText!="string"?{binary:Ze.response}:{text:Ze.responseText},Ze.getAllResponseHeaders()))}},Ze.onload=R(),G=Ze.onerror=Ze.ontimeout=R("error"),Ze.onabort!==void 0?Ze.onabort=G:Ze.onreadystatechange=function(){Ze.readyState===4&&E.setTimeout(function(){R&&G()})},R=R("abort");try{Ze.send($.hasContent&&$.data||null)}catch(Pt){if(R)throw Pt}},abort:function(){R&&R()}}}),k.ajaxPrefilter(function($){$.crossDomain&&($.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(R){return k.globalEval(R),R}}}),k.ajaxPrefilter("script",function($){$.cache===void 0&&($.cache=!1),$.crossDomain&&($.type="GET")}),k.ajaxTransport("script",function($){if($.crossDomain||$.scriptAttrs){var R,G;return{send:function(fe,Se){R=k("<script>").attr($.scriptAttrs||{}).prop({charset:$.scriptCharset,src:$.url}).on("load error",G=function(Ze){R.remove(),G=null,Ze&&Se(Ze.type==="error"?404:200,Ze.type)}),re.head.appendChild(R[0])},abort:function(){G&&G()}}}});var Qa=[],Rs=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var R=Qa.pop()||k.expando+"_"+Zu.guid++;return this[R]=!0,R}}),k.ajaxPrefilter("json jsonp",function($,R,G){var Y,fe,Se,Ie=$.jsonp!==!1&&(Rs.test($.url)?"url":typeof $.data=="string"&&($.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Rs.test($.data)&&"data");if(Ie||$.dataTypes[0]==="jsonp")return Y=$.jsonpCallback=ae($.jsonpCallback)?$.jsonpCallback():$.jsonpCallback,Ie?$[Ie]=$[Ie].replace(Rs,"$1"+Y):$.jsonp!==!1&&($.url+=(Lu.test($.url)?"&":"?")+$.jsonp+"="+Y),$.converters["script json"]=function(){return Se||k.error(Y+" was not called"),Se[0]},$.dataTypes[0]="json",fe=E[Y],E[Y]=function(){Se=arguments},G.always(function(){fe===void 0?k(E).removeProp(Y):E[Y]=fe,$[Y]&&($.jsonpCallback=R.jsonpCallback,Qa.push(Y)),Se&&ae(fe)&&fe(Se[0]),Se=fe=void 0}),"script"}),de.createHTMLDocument=function(){var $=re.implementation.createHTMLDocument("").body;return $.innerHTML="<form></form><form></form>",$.childNodes.length===2}(),k.parseHTML=function($,R,G){if(typeof $!="string")return[];typeof R=="boolean"&&(G=R,R=!1);var Y,fe,Se;return R||(de.createHTMLDocument?(R=re.implementation.createHTMLDocument(""),Y=R.createElement("base"),Y.href=re.location.href,R.head.appendChild(Y)):R=re),fe=At.exec($),Se=!G&&[],fe?[R.createElement(fe[1])]:(fe=et([$],R,Se),Se&&Se.length&&k(Se).remove(),k.merge([],fe.childNodes))},k.fn.load=function($,R,G){var Y,fe,Se,Ie=this,Ze=$.indexOf(" ");return Ze>-1&&(Y=Iu($.slice(Ze)),$=$.slice(0,Ze)),ae(R)?(G=R,R=void 0):R&&typeof R=="object"&&(fe="POST"),Ie.length>0&&k.ajax({url:$,type:fe||"GET",dataType:"html",data:R}).done(function(Pt){Se=arguments,Ie.html(Y?k("<div>").append(k.parseHTML(Pt)).find(Y):Pt)}).always(G&&function(Pt,zt){Ie.each(function(){G.apply(this,Se||[Pt.responseText,zt,Pt])})}),this},k.expr.pseudos.animated=function($){return k.grep(k.timers,function(R){return $===R.elem}).length},k.offset={setOffset:function(R,G,Y){var fe,Se,Ie,Ze,Pt,zt,Cn,Sr=k.css(R,"position"),Dr=k(R),en={};Sr==="static"&&(R.style.position="relative"),Pt=Dr.offset(),Ie=k.css(R,"top"),zt=k.css(R,"left"),Cn=(Sr==="absolute"||Sr==="fixed")&&(Ie+zt).indexOf("auto")>-1,Cn?(fe=Dr.position(),Ze=fe.top,Se=fe.left):(Ze=parseFloat(Ie)||0,Se=parseFloat(zt)||0),ae(G)&&(G=G.call(R,Y,k.extend({},Pt))),G.top!=null&&(en.top=G.top-Pt.top+Ze),G.left!=null&&(en.left=G.left-Pt.left+Se),"using"in G?G.using.call(R,en):Dr.css(en)}},k.fn.extend({offset:function(R){if(arguments.length)return R===void 0?this:this.each(function(Se){k.offset.setOffset(this,R,Se)});var G,Y,fe=this[0];return fe?fe.getClientRects().length?(G=fe.getBoundingClientRect(),Y=fe.ownerDocument.defaultView,{top:G.top+Y.pageYOffset,left:G.left+Y.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(!this[0])return;var R,G,Y,fe=this[0],Se={top:0,left:0};if(k.css(fe,"position")==="fixed")G=fe.getBoundingClientRect();else{for(G=this.offset(),Y=fe.ownerDocument,R=fe.offsetParent||Y.documentElement;R&&(R===Y.body||R===Y.documentElement)&&k.css(R,"position")==="static";)R=R.parentNode;R&&R!==fe&&R.nodeType===1&&(Se=k(R).offset(),Se.top+=k.css(R,"borderTopWidth",!0),Se.left+=k.css(R,"borderLeftWidth",!0))}return{top:G.top-Se.top-k.css(fe,"marginTop",!0),left:G.left-Se.left-k.css(fe,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){for(var R=this.offsetParent;R&&k.css(R,"position")==="static";)R=R.offsetParent;return R||$e})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function($,R){var G=R==="pageYOffset";k.fn[$]=function(Y){return $t(this,function(fe,Se,Ie){var Ze;if(le(fe)?Ze=fe:fe.nodeType===9&&(Ze=fe.defaultView),Ie===void 0)return Ze?Ze[R]:fe[Se];Ze?Ze.scrollTo(G?Ze.pageXOffset:Ie,G?Ie:Ze.pageYOffset):fe[Se]=Ie},$,Y,arguments.length)}}),k.each(["top","left"],function($,R){k.cssHooks[R]=Gs(de.pixelPosition,function(G,Y){if(Y)return Y=Co(G,R),Da.test(Y)?k(G).position()[R]+"px":Y})}),k.each({Height:"height",Width:"width"},function($,R){k.each({padding:"inner"+$,content:R,"":"outer"+$},function(G,Y){k.fn[Y]=function(fe,Se){var Ie=arguments.length&&(G||typeof fe!="boolean"),Ze=G||(fe===!0||Se===!0?"margin":"border");return $t(this,function(Pt,zt,Cn){var Sr;return le(Pt)?Y.indexOf("outer")===0?Pt["inner"+$]:Pt.document.documentElement["client"+$]:Pt.nodeType===9?(Sr=Pt.documentElement,Math.max(Pt.body["scroll"+$],Sr["scroll"+$],Pt.body["offset"+$],Sr["offset"+$],Sr["client"+$])):Cn===void 0?k.css(Pt,zt,Ze):k.style(Pt,zt,Cn,Ze)},R,Ie?fe:void 0,Ie)}})}),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function($,R){k.fn[R]=function(G){return this.on(R,G)}}),k.fn.extend({bind:function(R,G,Y){return this.on(R,null,G,Y)},unbind:function(R,G){return this.off(R,null,G)},delegate:function(R,G,Y,fe){return this.on(G,R,Y,fe)},undelegate:function(R,G,Y){return arguments.length===1?this.off(R,"**"):this.off(G,R||"**",Y)},hover:function(R,G){return this.mouseenter(R).mouseleave(G||R)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function($,R){k.fn[R]=function(G,Y){return arguments.length>0?this.on(R,null,G,Y):this.trigger(R)}});var Pa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;k.proxy=function($,R){var G,Y,fe;return typeof R=="string"&&(G=$[R],R=$,$=G),ae($)?(Y=O.call(arguments,2),fe=function(){return $.apply(R||this,Y.concat(O.call(arguments)))},fe.guid=$.guid=$.guid||k.guid++,fe):void 0},k.holdReady=function($){$?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=Wt,k.isFunction=ae,k.isWindow=le,k.camelCase=Nn,k.type=Z,k.now=Date.now,k.isNumeric=function($){var R=k.type($);return(R==="number"||R==="string")&&!isNaN($-parseFloat($))},k.trim=function($){return $==null?"":($+"").replace(Pa,"")},!(g=[],f=function(){return k}.apply(_,g),f!==void 0&&(j.exports=f));var qu=E.jQuery,xu=E.$;return k.noConflict=function($){return E.$===k&&(E.$=xu),$&&E.jQuery===k&&(E.jQuery=qu),k},typeof T=="undefined"&&(E.jQuery=E.$=k),k})},function(j,_,u){var g,f;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var E={}.hasOwnProperty;function T(){for(var w=[],D=0;D<arguments.length;D++){var O=arguments[D];if(!O)continue;var L=typeof O;if(L==="string"||L==="number")w.push(O);else if(Array.isArray(O)){if(O.length){var U=T.apply(null,O);U&&w.push(U)}}else if(L==="object")if(O.toString===Object.prototype.toString)for(var V in O)E.call(O,V)&&O[V]&&w.push(V);else w.push(O.toString())}return w.join(" ")}j.exports?(T.default=T,j.exports=T):!(g=[],f=function(){return T}.apply(_,g),f!==void 0&&(j.exports=f))})()},function(j,_,u){if(!1)var g,f;else j.exports=u(307)()},function(j,_,u){var g;try{g={cloneDeep:u(426),constant:u(159),defaults:u(427),each:u(193),filter:u(196),find:u(428),flatten:u(223),forEach:u(194),forIn:u(435),has:u(207),isUndefined:u(208),last:u(436),map:u(209),mapValues:u(437),max:u(438),merge:u(440),min:u(446),minBy:u(447),now:u(448),pick:u(449),range:u(454),reduce:u(211),sortBy:u(457),uniqueId:u(462),values:u(216),zipObject:u(463)}}catch(f){}g||(g=window._),j.exports=g},function(j,_,u){"use strict";var g=u(22),f=u(27),E=u(46),T=u(1),w=u(32),D=u.n(w),O=u(142),L=u(18),U=u(39),V={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function z(re){var se=re.primaryColor,ye=re.secondaryColor;V.primaryColor=se,V.secondaryColor=ye||Object(U.b)(se),V.calculated=!!ye}function K(){return Object(L.a)({},V)}var J=function(se){var ye=se.icon,Z=se.className,Ee=se.onClick,k=se.style,Te=se.primaryColor,De=se.secondaryColor,Ue=Object(E.a)(se,["icon","className","onClick","style","primaryColor","secondaryColor"]),St=V;if(Te&&(St={primaryColor:Te,secondaryColor:De||Object(U.b)(Te)}),Object(U.f)(),Object(U.g)(Object(U.c)(ye),"icon should be icon definiton, but got ".concat(ye)),!Object(U.c)(ye))return null;var Ae=ye;return Ae&&typeof Ae.icon=="function"&&(Ae=Object(L.a)(Object(L.a)({},Ae),{},{icon:Ae.icon(St.primaryColor,St.secondaryColor)})),Object(U.a)(Ae.icon,"svg-".concat(Ae.name),Object(L.a)({className:Z,onClick:Ee,style:k,"data-icon":Ae.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Ue))};J.displayName="IconReact",J.getTwoToneColors=K,J.setTwoToneColors=z;var he=J;function ue(re){var se=Object(U.d)(re),ye=Object(g.a)(se,2),Z=ye[0],Ee=ye[1];return he.setTwoToneColors({primaryColor:Z,secondaryColor:Ee})}function de(){var re=he.getTwoToneColors();return re.calculated?[re.primaryColor,re.secondaryColor]:re.primaryColor}ue("#1890ff");var ae=T.forwardRef(function(re,se){var ye,Z=re.className,Ee=re.icon,k=re.spin,Te=re.rotate,De=re.tabIndex,Ue=re.onClick,St=re.twoToneColor,Ae=Object(E.a)(re,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),Wt=T.useContext(O.a),At=Wt.prefixCls,mt=At===void 0?"anticon":At,Dt=D()(mt,(ye={},Object(f.a)(ye,"".concat(mt,"-").concat(Ee.name),!!Ee.name),Object(f.a)(ye,"".concat(mt,"-spin"),!!k||Ee.name==="loading"),ye),Z),Ke=De;Ke===void 0&&Ue&&(Ke=-1);var Tt=Te?{msTransform:"rotate(".concat(Te,"deg)"),transform:"rotate(".concat(Te,"deg)")}:void 0,Gt=Object(U.d)(St),gn=Object(g.a)(Gt,2),Ut=gn[0],Ht=gn[1];return T.createElement("span",Object.assign({role:"img","aria-label":Ee.name},Ae,{ref:se,tabIndex:Ke,onClick:Ue,className:Dt}),T.createElement(he,{icon:Ee,primaryColor:Ut,secondaryColor:Ht,style:Tt}))});ae.displayName="AntdIcon",ae.getTwoToneColor=de,ae.setTwoToneColor=ue;var le=_.a=ae},function(j,_){function u(g,f){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){var u=Array.isArray;j.exports=u},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.NON_CUSTOM_TAG_KEYS=_.POST_CONSTRUCT=_.DESIGN_PARAM_TYPES=_.PARAM_TYPES=_.TAGGED_PROP=_.TAGGED=_.MULTI_INJECT_TAG=_.INJECT_TAG=_.OPTIONAL_TAG=_.UNMANAGED_TAG=_.NAME_TAG=_.NAMED_TAG=void 0,_.NAMED_TAG="named",_.NAME_TAG="name",_.UNMANAGED_TAG="unmanaged",_.OPTIONAL_TAG="optional",_.INJECT_TAG="inject",_.MULTI_INJECT_TAG="multi_inject",_.TAGGED="inversify:tagged",_.TAGGED_PROP="inversify:tagged_props",_.PARAM_TYPES="inversify:paramtypes",_.DESIGN_PARAM_TYPES="design:paramtypes",_.POST_CONSTRUCT="post_construct";function g(){return[_.INJECT_TAG,_.MULTI_INJECT_TAG,_.NAME_TAG,_.UNMANAGED_TAG,_.NAMED_TAG,_.OPTIONAL_TAG]}_.NON_CUSTOM_TAG_KEYS=g()},function(j,_,u){"use strict";u.d(_,"g",function(){return Gn}),u.d(_,"c",function(){return Yn}),u.d(_,"a",function(){return zr}),u.d(_,"b",function(){return et}),u.d(_,"d",function(){return wt}),u.d(_,"e",function(){return lt}),u.d(_,"f",function(){return cn});var g=u(18),f=u(42);function E(We,Jt){w(We)&&(We="100%");var vt=D(We);return We=Jt===360?We:Math.min(Jt,Math.max(0,parseFloat(We))),vt&&(We=parseInt(String(We*Jt),10)/100),Math.abs(We-Jt)<1e-6?1:(Jt===360?We=(We<0?We%Jt+Jt:We%Jt)/parseFloat(String(Jt)):We=We%Jt/parseFloat(String(Jt)),We)}function T(We){return Math.min(1,Math.max(0,We))}function w(We){return typeof We=="string"&&We.indexOf(".")!==-1&&parseFloat(We)===1}function D(We){return typeof We=="string"&&We.indexOf("%")!==-1}function O(We){return We=parseFloat(We),(isNaN(We)||We<0||We>1)&&(We=1),We}function L(We){return We<=1?Number(We)*100+"%":We}function U(We){return We.length===1?"0"+We:String(We)}function V(We,Jt,vt){return{r:E(We,255)*255,g:E(Jt,255)*255,b:E(vt,255)*255}}function z(We,Jt,vt){We=E(We,255),Jt=E(Jt,255),vt=E(vt,255);var Kn=Math.max(We,Jt,vt),kr=Math.min(We,Jt,vt),Ur=0,fa=0,ea=(Kn+kr)/2;if(Kn===kr)fa=0,Ur=0;else{var ia=Kn-kr;fa=ea>.5?ia/(2-Kn-kr):ia/(Kn+kr);switch(Kn){case We:Ur=(Jt-vt)/ia+(Jt<vt?6:0);break;case Jt:Ur=(vt-We)/ia+2;break;case vt:Ur=(We-Jt)/ia+4;break;default:break}Ur/=6}return{h:Ur,s:fa,l:ea}}function K(We,Jt,vt){return vt<0&&(vt+=1),vt>1&&(vt-=1),vt<1/6?We+(Jt-We)*(6*vt):vt<1/2?Jt:vt<2/3?We+(Jt-We)*(2/3-vt)*6:We}function J(We,Jt,vt){var Kn,kr,Ur;if(We=E(We,360),Jt=E(Jt,100),vt=E(vt,100),Jt===0)kr=vt,Ur=vt,Kn=vt;else{var fa=vt<.5?vt*(1+Jt):vt+Jt-vt*Jt,ea=2*vt-fa;Kn=K(ea,fa,We+1/3),kr=K(ea,fa,We),Ur=K(ea,fa,We-1/3)}return{r:Kn*255,g:kr*255,b:Ur*255}}function he(We,Jt,vt){We=E(We,255),Jt=E(Jt,255),vt=E(vt,255);var Kn=Math.max(We,Jt,vt),kr=Math.min(We,Jt,vt),Ur=0,fa=Kn,ea=Kn-kr,ia=Kn===0?0:ea/Kn;if(Kn===kr)Ur=0;else{switch(Kn){case We:Ur=(Jt-vt)/ea+(Jt<vt?6:0);break;case Jt:Ur=(vt-We)/ea+2;break;case vt:Ur=(We-Jt)/ea+4;break;default:break}Ur/=6}return{h:Ur,s:ia,v:fa}}function ue(We,Jt,vt){We=E(We,360)*6,Jt=E(Jt,100),vt=E(vt,100);var Kn=Math.floor(We),kr=We-Kn,Ur=vt*(1-Jt),fa=vt*(1-kr*Jt),ea=vt*(1-(1-kr)*Jt),ia=Kn%6,Va=[vt,fa,Ur,Ur,ea,vt][ia],da=[ea,vt,vt,fa,Ur,Ur][ia],$a=[Ur,Ur,ea,vt,vt,fa][ia];return{r:Va*255,g:da*255,b:$a*255}}function de(We,Jt,vt,Kn){var kr=[U(Math.round(We).toString(16)),U(Math.round(Jt).toString(16)),U(Math.round(vt).toString(16))];return Kn&&kr[0].startsWith(kr[0].charAt(1))&&kr[1].startsWith(kr[1].charAt(1))&&kr[2].startsWith(kr[2].charAt(1))?kr[0].charAt(0)+kr[1].charAt(0)+kr[2].charAt(0):kr.join("")}function ae(We,Jt,vt,Kn,kr){var Ur=[U(Math.round(We).toString(16)),U(Math.round(Jt).toString(16)),U(Math.round(vt).toString(16)),U(re(Kn))];return kr&&Ur[0].startsWith(Ur[0].charAt(1))&&Ur[1].startsWith(Ur[1].charAt(1))&&Ur[2].startsWith(Ur[2].charAt(1))&&Ur[3].startsWith(Ur[3].charAt(1))?Ur[0].charAt(0)+Ur[1].charAt(0)+Ur[2].charAt(0)+Ur[3].charAt(0):Ur.join("")}function le(We,Jt,vt,Kn){var kr=[U(re(Kn)),U(Math.round(We).toString(16)),U(Math.round(Jt).toString(16)),U(Math.round(vt).toString(16))];return kr.join("")}function re(We){return Math.round(parseFloat(We)*255).toString(16)}function se(We){return ye(We)/255}function ye(We){return parseInt(We,16)}function Z(We){return{r:We>>16,g:(We&65280)>>8,b:We&255}}var Ee={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function k(We){var Jt={r:0,g:0,b:0},vt=1,Kn=null,kr=null,Ur=null,fa=!1,ea=!1;return typeof We=="string"&&(We=At(We)),typeof We=="object"&&(mt(We.r)&&mt(We.g)&&mt(We.b)?(Jt=V(We.r,We.g,We.b),fa=!0,ea=String(We.r).substr(-1)==="%"?"prgb":"rgb"):mt(We.h)&&mt(We.s)&&mt(We.v)?(Kn=L(We.s),kr=L(We.v),Jt=ue(We.h,Kn,kr),fa=!0,ea="hsv"):mt(We.h)&&mt(We.s)&&mt(We.l)&&(Kn=L(We.s),Ur=L(We.l),Jt=J(We.h,Kn,Ur),fa=!0,ea="hsl"),Object.prototype.hasOwnProperty.call(We,"a")&&(vt=We.a)),vt=O(vt),{ok:fa,format:We.format||ea,r:Math.min(255,Math.max(Jt.r,0)),g:Math.min(255,Math.max(Jt.g,0)),b:Math.min(255,Math.max(Jt.b,0)),a:vt}}var Te="[-\\+]?\\d+%?",De="[-\\+]?\\d*\\.\\d+%?",Ue="(?:"+De+")|(?:"+Te+")",St="[\\s|\\(]+("+Ue+")[,|\\s]+("+Ue+")[,|\\s]+("+Ue+")\\s*\\)?",Ae="[\\s|\\(]+("+Ue+")[,|\\s]+("+Ue+")[,|\\s]+("+Ue+")[,|\\s]+("+Ue+")\\s*\\)?",Wt={CSS_UNIT:new RegExp(Ue),rgb:new RegExp("rgb"+St),rgba:new RegExp("rgba"+Ae),hsl:new RegExp("hsl"+St),hsla:new RegExp("hsla"+Ae),hsv:new RegExp("hsv"+St),hsva:new RegExp("hsva"+Ae),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function At(We){if(We=We.trim().toLowerCase(),We.length===0)return!1;var Jt=!1;if(Ee[We])We=Ee[We],Jt=!0;else if(We==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var vt=Wt.rgb.exec(We);return vt?{r:vt[1],g:vt[2],b:vt[3]}:(vt=Wt.rgba.exec(We),vt?{r:vt[1],g:vt[2],b:vt[3],a:vt[4]}:(vt=Wt.hsl.exec(We),vt?{h:vt[1],s:vt[2],l:vt[3]}:(vt=Wt.hsla.exec(We),vt?{h:vt[1],s:vt[2],l:vt[3],a:vt[4]}:(vt=Wt.hsv.exec(We),vt?{h:vt[1],s:vt[2],v:vt[3]}:(vt=Wt.hsva.exec(We),vt?{h:vt[1],s:vt[2],v:vt[3],a:vt[4]}:(vt=Wt.hex8.exec(We),vt?{r:ye(vt[1]),g:ye(vt[2]),b:ye(vt[3]),a:se(vt[4]),format:Jt?"name":"hex8"}:(vt=Wt.hex6.exec(We),vt?{r:ye(vt[1]),g:ye(vt[2]),b:ye(vt[3]),format:Jt?"name":"hex"}:(vt=Wt.hex4.exec(We),vt?{r:ye(vt[1]+vt[1]),g:ye(vt[2]+vt[2]),b:ye(vt[3]+vt[3]),a:se(vt[4]+vt[4]),format:Jt?"name":"hex8"}:(vt=Wt.hex3.exec(We),vt?{r:ye(vt[1]+vt[1]),g:ye(vt[2]+vt[2]),b:ye(vt[3]+vt[3]),format:Jt?"name":"hex"}:!1)))))))))}function mt(We){return Boolean(Wt.CSS_UNIT.exec(String(We)))}var Dt=2,Ke=.16,Tt=.05,Gt=.05,gn=.15,Ut=5,Ht=4,Rt=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Fe(We){var Jt=We.r,vt=We.g,Kn=We.b,kr=he(Jt,vt,Kn);return{h:kr.h*360,s:kr.s,v:kr.v}}function me(We){var Jt=We.r,vt=We.g,Kn=We.b;return"#".concat(de(Jt,vt,Kn,!1))}function ze(We,Jt,vt){var Kn=vt/100,kr={r:(Jt.r-We.r)*Kn+We.r,g:(Jt.g-We.g)*Kn+We.g,b:(Jt.b-We.b)*Kn+We.b};return kr}function Be(We,Jt,vt){var Kn;return Math.round(We.h)>=60&&Math.round(We.h)<=240?Kn=vt?Math.round(We.h)-Dt*Jt:Math.round(We.h)+Dt*Jt:Kn=vt?Math.round(We.h)+Dt*Jt:Math.round(We.h)-Dt*Jt,Kn<0?Kn+=360:Kn>=360&&(Kn-=360),Kn}function ut(We,Jt,vt){if(We.h===0&&We.s===0)return We.s;var Kn;return vt?Kn=We.s-Ke*Jt:Jt===Ht?Kn=We.s+Ke:Kn=We.s+Tt*Jt,Kn>1&&(Kn=1),vt&&Jt===Ut&&Kn>.1&&(Kn=.1),Kn<.06&&(Kn=.06),Number(Kn.toFixed(2))}function xt(We,Jt,vt){var Kn;return vt?Kn=We.v+Gt*Jt:Kn=We.v-gn*Jt,Kn>1&&(Kn=1),Number(Kn.toFixed(2))}function $t(We){for(var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=[],Kn=k(We),kr=Ut;kr>0;kr-=1){var Ur=Fe(Kn),fa=me(k({h:Be(Ur,kr,!0),s:ut(Ur,kr,!0),v:xt(Ur,kr,!0)}));vt.push(fa)}vt.push(me(Kn));for(var ea=1;ea<=Ht;ea+=1){var ia=Fe(Kn),Va=me(k({h:Be(ia,ea),s:ut(ia,ea),v:xt(ia,ea)}));vt.push(Va)}return Jt.theme==="dark"?Rt.map(function(da){var $a=da.index,di=da.opacity,Da=me(ze(k(Jt.backgroundColor||"#141414"),k(vt[$a]),di*100));return Da}):vt}var Qt={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},on={},Mn={};Object.keys(Qt).forEach(function(We){on[We]=$t(Qt[We]),on[We].primary=on[We][5],Mn[We]=$t(Qt[We],{theme:"dark",backgroundColor:"#141414"}),Mn[We].primary=Mn[We][5]});var Nn=on.red,qn=on.volcano,nr=on.gold,xn=on.orange,pn=on.yellow,pr=on.lime,gr=on.green,Ce=on.cyan,Jn=on.blue,Ln=on.geekblue,yr=on.purple,Un=on.magenta,$e=on.grey,Re=u(1),Ye=u.n(Re),tt=u(278),gt=u(65),kt="rc-util-key";function Pe(We){if(We.attachTo)return We.attachTo;var Jt=document.querySelector("head");return Jt||document.body}function pt(We){var Jt,vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Object(gt.a)())return null;var Kn=document.createElement("style");if((Jt=vt.csp)===null||Jt===void 0?void 0:Jt.nonce){var kr;Kn.nonce=(kr=vt.csp)===null||kr===void 0?void 0:kr.nonce}Kn.innerHTML=We;var Ur=Pe(vt),fa=Ur.firstChild;return vt.prepend&&Ur.prepend?Ur.prepend(Kn):vt.prepend&&fa?Ur.insertBefore(Kn,fa):Ur.appendChild(Kn),Kn}var st=new Map;function Ft(We,Jt){var vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Kn=Pe(vt);if(!st.has(Kn)){var kr=pt("",vt),Ur=kr.parentNode;st.set(Kn,Ur),Ur.removeChild(kr)}var fa=Array.from(st.get(Kn).children).find(function($a){return $a.tagName==="STYLE"&&$a[kt]===Jt});if(fa){var ea,ia;if(((ea=vt.csp)===null||ea===void 0?void 0:ea.nonce)&&fa.nonce!==((ia=vt.csp)===null||ia===void 0?void 0:ia.nonce)){var Va;fa.nonce=(Va=vt.csp)===null||Va===void 0?void 0:Va.nonce}return fa.innerHTML!==We&&(fa.innerHTML=We),fa}var da=pt(We,vt);return da[kt]=Jt,da}var An=u(142);function Gn(We,Jt){Object(tt.a)(We,"[@ant-design/icons] ".concat(Jt))}function Yn(We){return Object(f.a)(We)==="object"&&typeof We.name=="string"&&typeof We.theme=="string"&&(Object(f.a)(We.icon)==="object"||typeof We.icon=="function")}function vr(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(We).reduce(function(Jt,vt){var Kn=We[vt];switch(vt){case"class":Jt.className=Kn,delete Jt.class;break;default:Jt[vt]=Kn}return Jt},{})}function zr(We,Jt,vt){return vt?Ye.a.createElement(We.tag,Object(g.a)(Object(g.a)({key:Jt},vr(We.attrs)),vt),(We.children||[]).map(function(Kn,kr){return zr(Kn,"".concat(Jt,"-").concat(We.tag,"-").concat(kr))})):Ye.a.createElement(We.tag,Object(g.a)({key:Jt},vr(We.attrs)),(We.children||[]).map(function(Kn,kr){return zr(Kn,"".concat(Jt,"-").concat(We.tag,"-").concat(kr))}))}function et(We){return $t(We)[0]}function wt(We){return We?Array.isArray(We)?We:[We]:[]}var lt={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},Vt=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,cn=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vt,vt=Object(Re.useContext)(An.a),Kn=vt.csp;Object(Re.useEffect)(function(){Ft(Jt,"@ant-design-icons",{prepend:!0,csp:Kn})},[])}},function(j,_,u){j.exports=u(174)},function(j,_){function u(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(j.exports=u=function(E){return typeof E},j.exports.default=j.exports,j.exports.__esModule=!0):(j.exports=u=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},j.exports.default=j.exports,j.exports.__esModule=!0),u(g)}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(T){return typeof T}:g=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},g(f)}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});var g;(function(f){f[f.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",f[f.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",f[f.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",f[f.POINTS=0]="POINTS",f[f.LINES=1]="LINES",f[f.LINE_LOOP=2]="LINE_LOOP",f[f.LINE_STRIP=3]="LINE_STRIP",f[f.TRIANGLES=4]="TRIANGLES",f[f.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",f[f.TRIANGLE_FAN=6]="TRIANGLE_FAN",f[f.ZERO=0]="ZERO",f[f.ONE=1]="ONE",f[f.SRC_COLOR=768]="SRC_COLOR",f[f.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",f[f.SRC_ALPHA=770]="SRC_ALPHA",f[f.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",f[f.DST_ALPHA=772]="DST_ALPHA",f[f.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",f[f.DST_COLOR=774]="DST_COLOR",f[f.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",f[f.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",f[f.FUNC_ADD=32774]="FUNC_ADD",f[f.BLEND_EQUATION=32777]="BLEND_EQUATION",f[f.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",f[f.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",f[f.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",f[f.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",f[f.MAX_EXT=32776]="MAX_EXT",f[f.MIN_EXT=32775]="MIN_EXT",f[f.BLEND_DST_RGB=32968]="BLEND_DST_RGB",f[f.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",f[f.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",f[f.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",f[f.CONSTANT_COLOR=32769]="CONSTANT_COLOR",f[f.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",f[f.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",f[f.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",f[f.BLEND_COLOR=32773]="BLEND_COLOR",f[f.ARRAY_BUFFER=34962]="ARRAY_BUFFER",f[f.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",f[f.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",f[f.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",f[f.STREAM_DRAW=35040]="STREAM_DRAW",f[f.STATIC_DRAW=35044]="STATIC_DRAW",f[f.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",f[f.BUFFER_SIZE=34660]="BUFFER_SIZE",f[f.BUFFER_USAGE=34661]="BUFFER_USAGE",f[f.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",f[f.FRONT=1028]="FRONT",f[f.BACK=1029]="BACK",f[f.FRONT_AND_BACK=1032]="FRONT_AND_BACK",f[f.CULL_FACE=2884]="CULL_FACE",f[f.BLEND=3042]="BLEND",f[f.DITHER=3024]="DITHER",f[f.STENCIL_TEST=2960]="STENCIL_TEST",f[f.DEPTH_TEST=2929]="DEPTH_TEST",f[f.SCISSOR_TEST=3089]="SCISSOR_TEST",f[f.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",f[f.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",f[f.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",f[f.NO_ERROR=0]="NO_ERROR",f[f.INVALID_ENUM=1280]="INVALID_ENUM",f[f.INVALID_VALUE=1281]="INVALID_VALUE",f[f.INVALID_OPERATION=1282]="INVALID_OPERATION",f[f.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",f[f.CW=2304]="CW",f[f.CCW=2305]="CCW",f[f.LINE_WIDTH=2849]="LINE_WIDTH",f[f.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",f[f.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",f[f.CULL_FACE_MODE=2885]="CULL_FACE_MODE",f[f.FRONT_FACE=2886]="FRONT_FACE",f[f.DEPTH_RANGE=2928]="DEPTH_RANGE",f[f.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",f[f.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",f[f.DEPTH_FUNC=2932]="DEPTH_FUNC",f[f.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",f[f.STENCIL_FUNC=2962]="STENCIL_FUNC",f[f.STENCIL_FAIL=2964]="STENCIL_FAIL",f[f.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",f[f.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",f[f.STENCIL_REF=2967]="STENCIL_REF",f[f.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",f[f.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",f[f.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",f[f.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",f[f.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",f[f.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",f[f.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",f[f.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",f[f.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",f[f.VIEWPORT=2978]="VIEWPORT",f[f.SCISSOR_BOX=3088]="SCISSOR_BOX",f[f.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",f[f.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",f[f.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",f[f.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",f[f.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",f[f.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",f[f.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",f[f.RED_BITS=3410]="RED_BITS",f[f.GREEN_BITS=3411]="GREEN_BITS",f[f.BLUE_BITS=3412]="BLUE_BITS",f[f.ALPHA_BITS=3413]="ALPHA_BITS",f[f.DEPTH_BITS=3414]="DEPTH_BITS",f[f.STENCIL_BITS=3415]="STENCIL_BITS",f[f.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",f[f.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",f[f.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",f[f.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",f[f.SAMPLES=32937]="SAMPLES",f[f.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",f[f.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",f[f.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",f[f.DONT_CARE=4352]="DONT_CARE",f[f.FASTEST=4353]="FASTEST",f[f.NICEST=4354]="NICEST",f[f.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",f[f.BYTE=5120]="BYTE",f[f.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",f[f.SHORT=5122]="SHORT",f[f.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",f[f.INT=5124]="INT",f[f.UNSIGNED_INT=5125]="UNSIGNED_INT",f[f.FLOAT=5126]="FLOAT",f[f.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",f[f.ALPHA=6406]="ALPHA",f[f.RGB=6407]="RGB",f[f.RGBA=6408]="RGBA",f[f.LUMINANCE=6409]="LUMINANCE",f[f.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",f[f.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",f[f.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",f[f.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",f[f.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",f[f.VERTEX_SHADER=35633]="VERTEX_SHADER",f[f.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",f[f.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",f[f.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",f[f.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",f[f.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",f[f.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",f[f.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",f[f.SHADER_TYPE=35663]="SHADER_TYPE",f[f.DELETE_STATUS=35712]="DELETE_STATUS",f[f.LINK_STATUS=35714]="LINK_STATUS",f[f.VALIDATE_STATUS=35715]="VALIDATE_STATUS",f[f.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",f[f.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",f[f.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",f[f.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",f[f.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",f[f.NEVER=512]="NEVER",f[f.LESS=513]="LESS",f[f.EQUAL=514]="EQUAL",f[f.LEQUAL=515]="LEQUAL",f[f.GREATER=516]="GREATER",f[f.NOTEQUAL=517]="NOTEQUAL",f[f.GEQUAL=518]="GEQUAL",f[f.ALWAYS=519]="ALWAYS",f[f.KEEP=7680]="KEEP",f[f.REPLACE=7681]="REPLACE",f[f.INCR=7682]="INCR",f[f.DECR=7683]="DECR",f[f.INVERT=5386]="INVERT",f[f.INCR_WRAP=34055]="INCR_WRAP",f[f.DECR_WRAP=34056]="DECR_WRAP",f[f.VENDOR=7936]="VENDOR",f[f.RENDERER=7937]="RENDERER",f[f.VERSION=7938]="VERSION",f[f.NEAREST=9728]="NEAREST",f[f.LINEAR=9729]="LINEAR",f[f.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",f[f.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",f[f.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",f[f.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",f[f.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",f[f.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",f[f.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",f[f.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",f[f.TEXTURE_2D=3553]="TEXTURE_2D",f[f.TEXTURE=5890]="TEXTURE",f[f.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",f[f.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",f[f.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",f[f.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",f[f.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",f[f.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",f[f.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",f[f.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",f[f.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",f[f.TEXTURE0=33984]="TEXTURE0",f[f.TEXTURE1=33985]="TEXTURE1",f[f.TEXTURE2=33986]="TEXTURE2",f[f.TEXTURE3=33987]="TEXTURE3",f[f.TEXTURE4=33988]="TEXTURE4",f[f.TEXTURE5=33989]="TEXTURE5",f[f.TEXTURE6=33990]="TEXTURE6",f[f.TEXTURE7=33991]="TEXTURE7",f[f.TEXTURE8=33992]="TEXTURE8",f[f.TEXTURE9=33993]="TEXTURE9",f[f.TEXTURE10=33994]="TEXTURE10",f[f.TEXTURE11=33995]="TEXTURE11",f[f.TEXTURE12=33996]="TEXTURE12",f[f.TEXTURE13=33997]="TEXTURE13",f[f.TEXTURE14=33998]="TEXTURE14",f[f.TEXTURE15=33999]="TEXTURE15",f[f.TEXTURE16=34e3]="TEXTURE16",f[f.TEXTURE17=34001]="TEXTURE17",f[f.TEXTURE18=34002]="TEXTURE18",f[f.TEXTURE19=34003]="TEXTURE19",f[f.TEXTURE20=34004]="TEXTURE20",f[f.TEXTURE21=34005]="TEXTURE21",f[f.TEXTURE22=34006]="TEXTURE22",f[f.TEXTURE23=34007]="TEXTURE23",f[f.TEXTURE24=34008]="TEXTURE24",f[f.TEXTURE25=34009]="TEXTURE25",f[f.TEXTURE26=34010]="TEXTURE26",f[f.TEXTURE27=34011]="TEXTURE27",f[f.TEXTURE28=34012]="TEXTURE28",f[f.TEXTURE29=34013]="TEXTURE29",f[f.TEXTURE30=34014]="TEXTURE30",f[f.TEXTURE31=34015]="TEXTURE31",f[f.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",f[f.REPEAT=10497]="REPEAT",f[f.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",f[f.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",f[f.FLOAT_VEC2=35664]="FLOAT_VEC2",f[f.FLOAT_VEC3=35665]="FLOAT_VEC3",f[f.FLOAT_VEC4=35666]="FLOAT_VEC4",f[f.INT_VEC2=35667]="INT_VEC2",f[f.INT_VEC3=35668]="INT_VEC3",f[f.INT_VEC4=35669]="INT_VEC4",f[f.BOOL=35670]="BOOL",f[f.BOOL_VEC2=35671]="BOOL_VEC2",f[f.BOOL_VEC3=35672]="BOOL_VEC3",f[f.BOOL_VEC4=35673]="BOOL_VEC4",f[f.FLOAT_MAT2=35674]="FLOAT_MAT2",f[f.FLOAT_MAT3=35675]="FLOAT_MAT3",f[f.FLOAT_MAT4=35676]="FLOAT_MAT4",f[f.SAMPLER_2D=35678]="SAMPLER_2D",f[f.SAMPLER_CUBE=35680]="SAMPLER_CUBE",f[f.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",f[f.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",f[f.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",f[f.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",f[f.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",f[f.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",f[f.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",f[f.COMPILE_STATUS=35713]="COMPILE_STATUS",f[f.LOW_FLOAT=36336]="LOW_FLOAT",f[f.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",f[f.HIGH_FLOAT=36338]="HIGH_FLOAT",f[f.LOW_INT=36339]="LOW_INT",f[f.MEDIUM_INT=36340]="MEDIUM_INT",f[f.HIGH_INT=36341]="HIGH_INT",f[f.FRAMEBUFFER=36160]="FRAMEBUFFER",f[f.RENDERBUFFER=36161]="RENDERBUFFER",f[f.RGBA4=32854]="RGBA4",f[f.RGB5_A1=32855]="RGB5_A1",f[f.RGB565=36194]="RGB565",f[f.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",f[f.STENCIL_INDEX=6401]="STENCIL_INDEX",f[f.STENCIL_INDEX8=36168]="STENCIL_INDEX8",f[f.DEPTH_STENCIL=34041]="DEPTH_STENCIL",f[f.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",f[f.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",f[f.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",f[f.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",f[f.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",f[f.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",f[f.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",f[f.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",f[f.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",f[f.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",f[f.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",f[f.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",f[f.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",f[f.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",f[f.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",f[f.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",f[f.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",f[f.NONE=0]="NONE",f[f.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",f[f.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",f[f.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",f[f.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",f[f.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",f[f.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",f[f.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",f[f.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",f[f.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",f[f.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",f[f.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",f[f.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",f[f.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",f[f.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",f[f.COPY_SRC=1]="COPY_SRC",f[f.COPY_DST=2]="COPY_DST",f[f.SAMPLED=4]="SAMPLED",f[f.STORAGE=8]="STORAGE",f[f.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(g||(g={}))},function(j,_,u){"use strict";var g=u(34),f=u(50).Graph;j.exports={addDummyNode:E,simplify:T,asNonCompoundGraph:w,successorWeights:D,predecessorWeights:O,intersectRect:L,buildLayerMatrix:U,normalizeRanks:V,removeEmptyRanks:z,addBorderNode:K,maxRank:J,partition:he,time:ue,notime:de};function E(ae,le,re,se){var ye;do ye=g.uniqueId(se);while(ae.hasNode(ye));return re.dummy=le,ae.setNode(ye,re),ye}function T(ae){var le=new f().setGraph(ae.graph());return g.forEach(ae.nodes(),function(re){le.setNode(re,ae.node(re))}),g.forEach(ae.edges(),function(re){var se=le.edge(re.v,re.w)||{weight:0,minlen:1},ye=ae.edge(re);le.setEdge(re.v,re.w,{weight:se.weight+ye.weight,minlen:Math.max(se.minlen,ye.minlen)})}),le}function w(ae){var le=new f({multigraph:ae.isMultigraph()}).setGraph(ae.graph());return g.forEach(ae.nodes(),function(re){ae.children(re).length||le.setNode(re,ae.node(re))}),g.forEach(ae.edges(),function(re){le.setEdge(re,ae.edge(re))}),le}function D(ae){var le=g.map(ae.nodes(),function(re){var se={};return g.forEach(ae.outEdges(re),function(ye){se[ye.w]=(se[ye.w]||0)+ae.edge(ye).weight}),se});return g.zipObject(ae.nodes(),le)}function O(ae){var le=g.map(ae.nodes(),function(re){var se={};return g.forEach(ae.inEdges(re),function(ye){se[ye.v]=(se[ye.v]||0)+ae.edge(ye).weight}),se});return g.zipObject(ae.nodes(),le)}function L(ae,le){var re=ae.x,se=ae.y,ye=le.x-re,Z=le.y-se,Ee=ae.width/2,k=ae.height/2;if(!ye&&!Z)throw new Error("Not possible to find intersection inside of the rectangle");var Te,De;return Math.abs(Z)*Ee>Math.abs(ye)*k?(Z<0&&(k=-k),Te=k*ye/Z,De=k):(ye<0&&(Ee=-Ee),Te=Ee,De=Ee*Z/ye),{x:re+Te,y:se+De}}function U(ae){var le=g.map(g.range(J(ae)+1),function(){return[]});return g.forEach(ae.nodes(),function(re){var se=ae.node(re),ye=se.rank;g.isUndefined(ye)||(le[ye][se.order]=re)}),le}function V(ae){var le=g.min(g.map(ae.nodes(),function(re){return ae.node(re).rank}));g.forEach(ae.nodes(),function(re){var se=ae.node(re);g.has(se,"rank")&&(se.rank-=le)})}function z(ae){var le=g.min(g.map(ae.nodes(),function(Z){return ae.node(Z).rank})),re=[];g.forEach(ae.nodes(),function(Z){var Ee=ae.node(Z).rank-le;re[Ee]||(re[Ee]=[]),re[Ee].push(Z)});var se=0,ye=ae.graph().nodeRankFactor;g.forEach(re,function(Z,Ee){g.isUndefined(Z)&&Ee%ye!==0?--se:se&&g.forEach(Z,function(k){ae.node(k).rank+=se})})}function K(ae,le,re,se){var ye={width:0,height:0};return arguments.length>=4&&(ye.rank=re,ye.order=se),E(ae,"border",ye,le)}function J(ae){return g.max(g.map(ae.nodes(),function(le){var re=ae.node(le).rank;if(!g.isUndefined(re))return re}))}function he(ae,le){var re={lhs:[],rhs:[]};return g.forEach(ae,function(se){le(se)?re.lhs.push(se):re.rhs.push(se)}),re}function ue(ae,le){var re=g.now();try{return le()}finally{console.log(ae+" time: "+(g.now()-re)+"ms")}}function de(ae,le){return le()}},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.STACK_OVERFLOW=_.CIRCULAR_DEPENDENCY_IN_FACTORY=_.POST_CONSTRUCT_ERROR=_.MULTIPLE_POST_CONSTRUCT_METHODS=_.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=_.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=_.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=_.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=_.ARGUMENTS_LENGTH_MISMATCH=_.INVALID_DECORATOR_OPERATION=_.INVALID_TO_SELF_VALUE=_.INVALID_FUNCTION_BINDING=_.INVALID_MIDDLEWARE_RETURN=_.NO_MORE_SNAPSHOTS_AVAILABLE=_.INVALID_BINDING_TYPE=_.NOT_IMPLEMENTED=_.CIRCULAR_DEPENDENCY=_.UNDEFINED_INJECT_ANNOTATION=_.MISSING_INJECT_ANNOTATION=_.MISSING_INJECTABLE_ANNOTATION=_.NOT_REGISTERED=_.CANNOT_UNBIND=_.AMBIGUOUS_MATCH=_.KEY_NOT_FOUND=_.NULL_ARGUMENT=_.DUPLICATED_METADATA=_.DUPLICATED_INJECTABLE_DECORATOR=void 0,_.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",_.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",_.NULL_ARGUMENT="NULL argument",_.KEY_NOT_FOUND="Key Not Found",_.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",_.CANNOT_UNBIND="Could not unbind serviceIdentifier:",_.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",_.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",_.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var g=function(D){return"@inject called with undefined this could mean that the class "+D+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};_.UNDEFINED_INJECT_ANNOTATION=g,_.CIRCULAR_DEPENDENCY="Circular dependency found:",_.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",_.INVALID_BINDING_TYPE="Invalid binding type:",_.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",_.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",_.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",_.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",_.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var f=function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];return"The number of constructor arguments in the derived class "+(D[0]+" must be >= than the number of constructor arguments of its base class.")};_.ARGUMENTS_LENGTH_MISMATCH=f,_.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",_.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",_.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",_.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",_.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var E=function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];return"@postConstruct error in class "+D[0]+": "+D[1]};_.POST_CONSTRUCT_ERROR=E;var T=function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];return"It looks like there is a circular dependency "+("in one of the '"+D[0]+"' bindings. Please investigate bindings with")+("service identifier '"+D[1]+"'.")};_.CIRCULAR_DEPENDENCY_IN_FACTORY=T,_.STACK_OVERFLOW="Maximum call stack size exceeded"},function(j,_,u){"use strict";u.d(_,"a",function(){return f});function g(E,T){if(E==null)return{};var w={},D=Object.keys(E),O,L;for(L=0;L<D.length;L++){if(O=D[L],T.indexOf(O)>=0)continue;w[O]=E[O]}return w}function f(E,T){if(E==null)return{};var w=g(E,T),D,O;if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(E);for(O=0;O<L.length;O++){if(D=L[O],T.indexOf(D)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(E,D))continue;w[D]=E[D]}}return w}},function(j,_,u){var g;try{g={clone:u(314),constant:u(159),each:u(193),filter:u(196),has:u(207),isArray:u(37),isEmpty:u(390),isFunction:u(94),isUndefined:u(208),keys:u(67),map:u(209),reduce:u(211),size:u(393),transform:u(399),union:u(400),values:u(216)}}catch(f){}g||(g=window._),j.exports=g},function(j,_){function u(g){var f=typeof g;return g!=null&&(f=="object"||f=="function")}j.exports=u},function(j,_,u){"use strict";(function(g){var f=u(143),E=typeof exports=="object"&&exports&&!exports.nodeType&&exports,T=E&&typeof g=="object"&&g&&!g.nodeType&&g,w=T&&T.exports===E,D=w&&f.a.process,O=function(){try{var L=T&&T.require&&T.require("util").types;return L||D&&D.binding&&D.binding("util")}catch(U){}}();_.a=O}).call(this,u(147)(j))},function(j,_,u){var g;try{g=u(312)}catch(f){}g||(g=window.graphlib),j.exports=g},function(j,_,u){var g=u(176),f=typeof self=="object"&&self&&self.Object===Object&&self,E=g||f||Function("return this")();j.exports=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Metadata=void 0;var g=u(38),f=function(){function E(T,w){this.key=T,this.value=w}return E.prototype.toString=function(){return this.key===g.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},E}();_.Metadata=f},function(j,_,u){"use strict";function g(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")return;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(f){console.error(f)}}g(),j.exports=u(298)},function(j,_,u){"use strict";(function(g){var f=u(30),E=u(282),T=typeof exports=="object"&&exports&&!exports.nodeType&&exports,w=T&&typeof g=="object"&&g&&!g.nodeType&&g,D=w&&w.exports===T,O=D?f.a.Buffer:void 0,L=O?O.isBuffer:void 0,U=L||E.a;_.a=U}).call(this,u(147)(j))},function(j,_,u){"use strict";u.d(_,"a",function(){return D});var g=function(L){return+setTimeout(L,16)},f=function(L){return clearTimeout(L)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(g=function(L){return window.requestAnimationFrame(L)},f=function(L){return window.cancelAnimationFrame(L)});var E=0,T=new Map;function w(O){T.delete(O)}function D(O){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;E+=1;var U=E;function V(z){if(z===0)w(U),O();else{var K=g(function(){V(z-1)});T.set(U,K)}}return V(L),U}D.cancel=function(O){var L=T.get(O);return w(L),f(L)}},function(j,_){function u(g){return g!=null&&typeof g=="object"}j.exports=u},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f,E){if(!(f instanceof E))throw new TypeError("Cannot call a class as a function")}},function(j,_,u){"use strict";u.d(_,"a",function(){return f});function g(E,T){for(var w=0;w<T.length;w++){var D=T[w];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}function f(E,T,w){return T&&g(E.prototype,T),w&&g(E,w),E}},function(j,_,u){"use strict";u.d(_,"a",function(){return f});function g(E,T){return g=Object.setPrototypeOf||function(D,O){return D.__proto__=O,D},g(E,T)}function f(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(T&&T.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),T&&g(E,T)}},function(j,_,u){"use strict";u.d(_,"a",function(){return T});var g=u(170);function f(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(w){return!1}}var E=u(270);function T(w){var D=f();return function(){var L=Object(g.a)(w),U;if(D){var V=Object(g.a)(this).constructor;U=Reflect.construct(L,arguments,V)}else U=L.apply(this,arguments);return Object(E.a)(this,U)}}},function(j,_,u){"use strict";u.d(_,"a",function(){return $t});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(14),D=u.n(w),O=u(9),L=u.n(O),U=u(10),V=u.n(U),z=u(15),K=u.n(z),J=u(36),he=u.n(J),ue=u(0),de=u(8),ae=u.n(de),le=u(16),re=u(43),se,ye,Z,Ee,k,Te,De,Ue,St,Ae,Wt,At,mt,Dt,Ke,Tt,Gt,gn,Ut,Ht,Rt,Fe,me,ze;function Be(Qt,on){var Mn;if(typeof Symbol=="undefined"||Qt[Symbol.iterator]==null){if(Array.isArray(Qt)||(Mn=ut(Qt))||on&&Qt&&typeof Qt.length=="number"){Mn&&(Qt=Mn);var Nn=0,qn=function(){};return{s:qn,n:function(){return Nn>=Qt.length?{done:!0}:{done:!1,value:Qt[Nn++]}},e:function(gr){throw gr},f:qn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var nr=!0,xn=!1,pn;return{s:function(){Mn=Qt[Symbol.iterator]()},n:function(){var gr=Mn.next();return nr=gr.done,gr},e:function(gr){xn=!0,pn=gr},f:function(){try{!nr&&Mn.return!=null&&Mn.return()}finally{if(xn)throw pn}}}}function ut(Qt,on){if(!Qt)return;if(typeof Qt=="string")return xt(Qt,on);var Mn=Object.prototype.toString.call(Qt).slice(8,-1);if(Mn==="Object"&&Qt.constructor&&(Mn=Qt.constructor.name),Mn==="Map"||Mn==="Set")return Array.from(Qt);if(Mn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mn))return xt(Qt,on)}function xt(Qt,on){(on==null||on>Qt.length)&&(on=Qt.length);for(var Mn=0,Nn=new Array(on);Mn<on;Mn++)Nn[Mn]=Qt[Mn];return Nn}var $t=(se=Object(de.injectable)(),ye=Object(de.inject)(le.a.MeshComponentManager),Z=Object(de.inject)(le.a.GeometryComponentManager),Ee=Object(de.inject)(le.a.MaterialComponentManager),k=Object(de.inject)(le.a.CullableComponentManager),Te=Object(de.inject)(le.a.TransformComponentManager),De=Object(de.inject)(le.a.HierarchyComponentManager),Ue=Object(de.inject)(le.a.Systems),St=Object(de.named)(le.a.FrameGraphSystem),Ae=Object(de.inject)(le.a.RenderEngine),Wt=Object(de.inject)(le.a.ResourcePool),se(At=(mt=(ze=me=function(){function Qt(){var on=this;L()(this,Qt),D()(this,"mesh",Dt,this),D()(this,"geometry",Ke,this),D()(this,"material",Tt,this),D()(this,"cullable",Gt,this),D()(this,"transform",gn,this),D()(this,"hierarchy",Ut,this),D()(this,"frameGraphSystem",Ht,this),D()(this,"engine",Rt,this),D()(this,"resourcePool",Fe,this),this.modelCache={},this.setup=function(Mn,Nn,qn){var nr=Mn.createRenderTarget(Nn,"color buffer",{width:1,height:1,usage:re.a.RENDER_ATTACHMENT|re.a.SAMPLED|re.a.COPY_SRC});qn.data={output:Nn.write(Mn,nr)}},this.execute=function(){var Mn=T()(f.a.mark(function Nn(qn,nr,xn){var pn,pr,gr,Ce,Jn,Ln;return f.a.wrap(function(Un){for(;;)switch(Un.prev=Un.next){case 0:pn=qn.getResourceNode(nr.data.output),pr=on.resourcePool.getOrCreateResource(pn.resource),gr=Be(xn),Un.prev=3,gr.s();case 5:if((Ce=gr.n()).done){Un.next=11;break}return Jn=Ce.value,Un.next=9,on.initView(Jn);case 9:Un.next=5;break;case 11:Un.next=16;break;case 13:Un.prev=13,Un.t0=Un.catch(3),gr.e(Un.t0);case 16:return Un.prev=16,gr.f(),Un.finish(16);case 19:Ln=on.engine.getCanvas(),pr.resize({width:Ln.width,height:Ln.height}),on.engine.setScissor({enable:!1}),on.engine.clear({framebuffer:pr,color:xn[0].getClearColor(),depth:1}),on.engine.useFramebuffer(pr,function(){var $e=Be(xn),Re;try{for($e.s();!(Re=$e.n()).done;){var Ye=Re.value;on.renderView(Ye)}}catch(tt){$e.e(tt)}finally{$e.f()}});case 24:case"end":return Un.stop()}},Nn,null,[[3,13,16,19]])}));return function(Nn,qn,nr){return Mn.apply(this,arguments)}}()}return V()(Qt,[{key:"renderView",value:function(Mn){var Nn=Mn.getScene(),qn=Mn.getCamera(),nr=qn.getViewTransform(),xn=ue.b.multiply(ue.b.create(),qn.getPerspective(),nr);qn.getFrustum().extractFromVPMatrix(xn);var pn=Mn.getViewport(),pr=pn.x,gr=pn.y,Ce=pn.width,Jn=pn.height;this.engine.viewport({x:pr,y:gr,width:Ce,height:Jn});var Ln=Be(Nn.getEntities()),yr;try{for(Ln.s();!(yr=Ln.n()).done;){var Un=yr.value;this.renderMesh(Un,{camera:qn,view:Mn,viewMatrix:nr})}}catch($e){Ln.e($e)}finally{Ln.f()}}},{key:"renderMesh",value:function(Mn,Nn){var qn=Nn.camera,nr=Nn.view,xn=Nn.viewMatrix,pn=this.mesh.getComponentByEntity(Mn);if(!pn||!pn.visible)return;var pr=pn.material,gr=pn.geometry;if(!gr||gr.dirty||!pr)return;var Ce=this.transform.getComponentByEntity(Mn),Jn=ue.b.multiply(ue.b.create(),xn,Ce.worldTransform),Ln=nr.getViewport(),yr=Ln.width,Un=Ln.height;pr.setUniform({projectionMatrix:qn.getPerspective(),modelViewMatrix:Jn,modelMatrix:Ce.worldTransform,viewMatrix:xn,cameraPosition:qn.getPosition(),u_viewport:[yr,Un]}),pn.model&&(pn.model.draw({uniforms:pr.uniforms.reduce(function($e,Re){return $e[Re.name]=Re.data,$e},{})}),pr.uniforms.forEach(function($e){$e.dirty=!1}),pr.dirty=!1)}},{key:"initMesh",value:function(){var on=T()(f.a.mark(function Nn(qn,nr){var xn,pn,pr,gr,Ce,Jn,Ln,yr;return f.a.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(xn=this.mesh.getComponentByEntity(qn),xn){$e.next=3;break}return $e.abrupt("return");case 3:if(pn=xn.material,pr=xn.geometry,!(!pr||pr.dirty||!pn)){$e.next=7;break}return $e.abrupt("return");case 7:if(xn.model){$e.next=24;break}if(gr="m-".concat(pn.entity,"-g-").concat(pr.entity),!this.modelCache[gr]){$e.next=12;break}return xn.model=this.modelCache[gr],$e.abrupt("return");case 12:return pn.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Ce=this.engine,Jn=Ce.createModel,Ln=Ce.createAttribute,yr={vs:pn.vertexShaderGLSL,fs:pn.fragmentShaderGLSL,defines:pn.defines,attributes:pr.attributes.reduce(function(Re,Ye){return Ye.data&&Ye.buffer&&(Re[Ye.name]=Ln({buffer:Ye.buffer,attributes:Ye.attributes,arrayStride:Ye.arrayStride,stepMode:Ye.stepMode,divisor:Ye.stepMode==="vertex"?0:1})),Re},{}),uniforms:pn.uniforms.reduce(function(Re,Ye){return Re[Ye.name]=Ye.data,Re},{}),scissor:{enable:!0,box:function(){return nr.getViewport()}}},pn.cull&&(yr.cull=pn.cull),pn.depth&&(yr.depth=pn.depth),pn.blend&&(yr.blend=pn.blend),pr.indicesBuffer&&(yr.elements=pr.indicesBuffer),pr.maxInstancedCount&&(yr.instances=pr.maxInstancedCount,yr.count=pr.vertexCount||3),$e.next=22,Jn(yr);case 22:xn.model=$e.sent,this.modelCache[gr]=xn.model;case 24:case"end":return $e.stop()}},Nn,this)}));function Mn(Nn,qn){return on.apply(this,arguments)}return Mn}()},{key:"initView",value:function(){var on=T()(f.a.mark(function Nn(qn){var nr,xn,pn,pr;return f.a.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:nr=qn.getScene(),xn=Be(nr.getEntities()),Ce.prev=2,xn.s();case 4:if((pn=xn.n()).done){Ce.next=10;break}return pr=pn.value,Ce.next=8,this.initMesh(pr,qn);case 8:Ce.next=4;break;case 10:Ce.next=15;break;case 12:Ce.prev=12,Ce.t0=Ce.catch(2),xn.e(Ce.t0);case 15:return Ce.prev=15,xn.f(),Ce.finish(15);case 18:case"end":return Ce.stop()}},Nn,this,[[2,12,15,18]])}));function Mn(Nn){return on.apply(this,arguments)}return Mn}()}]),Qt}(),me.IDENTIFIER="Render Pass",ze),Dt=K()(mt.prototype,"mesh",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=K()(mt.prototype,"geometry",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=K()(mt.prototype,"material",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=K()(mt.prototype,"cullable",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gn=K()(mt.prototype,"transform",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=K()(mt.prototype,"hierarchy",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=K()(mt.prototype,"frameGraphSystem",[Ue,St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=K()(mt.prototype,"engine",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=K()(mt.prototype,"resourcePool",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt))||At)},function(j,_,u){var g=u(94),f=u(153);function E(T){return T!=null&&f(T.length)&&!g(T)}j.exports=E},function(j,_,u){var g=u(370),f=u(380),E=u(77),T=u(37),w=u(387);function D(O){return typeof O=="function"?O:O==null?E:typeof O=="object"?T(O)?f(O[0],O[1]):g(O):w(O)}j.exports=D},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.TargetTypeEnum=_.BindingTypeEnum=_.BindingScopeEnum=void 0;var g={Request:"Request",Singleton:"Singleton",Transient:"Transient"};_.BindingScopeEnum=g;var f={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};_.BindingTypeEnum=f;var E={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};_.TargetTypeEnum=E},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}},function(j,_,u){"use strict";u.d(_,"b",function(){return U}),u.d(_,"a",function(){return V});var g=u(69),f=u.n(g),E=u(9),T=u.n(E),w=u(10),D=u.n(w),O=u(0),L=u(130),U;(function(z){z[z.OUTSIDE=4294967295]="OUTSIDE",z[z.INSIDE=0]="INSIDE",z[z.INDETERMINATE=2147483647]="INDETERMINATE"})(U||(U={}));var V=function(){function z(K){if(T()(this,z),this.planes=[],K)this.planes=K;else for(var J=0;J<6;J++)this.planes.push(new L.a)}return D()(z,[{key:"extractFromVPMatrix",value:function(J){var he=f()(J,16),ue=he[0],de=he[1],ae=he[2],le=he[3],re=he[4],se=he[5],ye=he[6],Z=he[7],Ee=he[8],k=he[9],Te=he[10],De=he[11],Ue=he[12],St=he[13],Ae=he[14],Wt=he[15];O.d.set(this.planes[0].normal,le-ue,Z-re,De-Ee),this.planes[0].distance=-(Wt-Ue),O.d.set(this.planes[1].normal,le+ue,Z+re,De+Ee),this.planes[1].distance=-(Wt+Ue),O.d.set(this.planes[2].normal,le+de,Z+se,De+k),this.planes[2].distance=-(Wt+St),O.d.set(this.planes[3].normal,le-de,Z-se,De-k),this.planes[3].distance=-(Wt-St),O.d.set(this.planes[4].normal,le-ae,Z-ye,De-Te),this.planes[4].distance=-(Wt-Ae),O.d.set(this.planes[5].normal,le+ae,Z+ye,De+Te),this.planes[5].distance=-(Wt+Ae),this.planes.forEach(function(At){At.normalize(),At.updatePNVertexFlag()})}}]),z}()},function(j,_,u){var g=u(179),f=u(155),E=u(62);function T(w){return E(w)?g(w):f(w)}j.exports=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.tagProperty=_.tagParameter=_.decorate=void 0;var g=u(45),f=u(38);function E(U,V,z,K){var J=f.TAGGED;w(J,U,V,K,z)}_.tagParameter=E;function T(U,V,z){var K=f.TAGGED_PROP;w(K,U.constructor,V,z)}_.tagProperty=T;function w(U,V,z,K,J){var he={},ue=typeof J=="number",de=J!==void 0&&ue?J.toString():z;if(ue&&z!==void 0)throw new Error(g.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(U,V)&&(he=Reflect.getMetadata(U,V));var ae=he[de];if(!Array.isArray(ae))ae=[];else for(var le=0,re=ae;le<re.length;le++){var se=re[le];if(se.key===K.key)throw new Error(g.DUPLICATED_METADATA+" "+se.key.toString())}ae.push(K),he[de]=ae,Reflect.defineMetadata(U,he,V)}function D(U,V){Reflect.decorate(U,V)}function O(U,V){return function(z,K){V(z,K,U)}}function L(U,V,z){typeof z=="number"?D([O(z,U)],V):typeof z=="string"?Reflect.decorate([U],V,z):D([U],V)}_.decorate=L},function(j,_,u){var g=u(489),f=u(490),E=u(229),T=u(491);function w(D,O){return g(D)||f(D,O)||E(D,O)||T()}j.exports=w,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";var g=u(27),f=u(18),E=u(22),T=u(42),w=u(1),D=u(141),O=u(80),L=u(32),U=u.n(L),V=u(65);function z(tt,gt){var kt={};return kt[tt.toLowerCase()]=gt.toLowerCase(),kt["Webkit".concat(tt)]="webkit".concat(gt),kt["Moz".concat(tt)]="moz".concat(gt),kt["ms".concat(tt)]="MS".concat(gt),kt["O".concat(tt)]="o".concat(gt.toLowerCase()),kt}function K(tt,gt){var kt={animationend:z("Animation","AnimationEnd"),transitionend:z("Transition","TransitionEnd")};return tt&&("AnimationEvent"in gt||delete kt.animationend.animation,"TransitionEvent"in gt||delete kt.transitionend.transition),kt}var J=K(Object(V.a)(),typeof window!="undefined"?window:{}),he={};if(Object(V.a)()){var ue=document.createElement("div");he=ue.style}var de={};function ae(tt){if(de[tt])return de[tt];var gt=J[tt];if(gt)for(var kt=Object.keys(gt),Pe=kt.length,pt=0;pt<Pe;pt+=1){var st=kt[pt];if(Object.prototype.hasOwnProperty.call(gt,st)&&st in he)return de[tt]=gt[st],de[tt]}return""}var le=ae("animationend"),re=ae("transitionend"),se=!!(le&&re),ye=le||"animationend",Z=re||"transitionend";function Ee(tt,gt){if(!tt)return null;if(Object(T.a)(tt)==="object"){var kt=gt.replace(/-\w/g,function(Pe){return Pe[1].toUpperCase()});return tt[kt]}return"".concat(tt,"-").concat(gt)}var k="none",Te="appear",De="enter",Ue="leave",St="none",Ae="prepare",Wt="start",At="active",mt="end";function Dt(tt){var gt=Object(w.useRef)(!1),kt=Object(w.useState)(tt),Pe=Object(E.a)(kt,2),pt=Pe[0],st=Pe[1];function Ft(An){gt.current||st(An)}return Object(w.useEffect)(function(){return function(){gt.current=!0}},[]),[pt,Ft]}var Ke=Object(V.a)()?w.useLayoutEffect:w.useEffect,Tt=Ke,Gt=u(55),gn=function(){var tt=w.useRef(null);function gt(){Gt.a.cancel(tt.current)}function kt(Pe){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;gt();var st=Object(Gt.a)(function(){pt<=1?Pe({isCanceled:function(){return st!==tt.current}}):kt(Pe,pt-1)});tt.current=st}return w.useEffect(function(){return function(){gt()}},[]),[kt,gt]},Ut=[Ae,Wt,At,mt],Ht=!1,Rt=!0;function Fe(tt){return tt===At||tt===mt}var me=function(tt,gt){var kt=w.useState(St),Pe=Object(E.a)(kt,2),pt=Pe[0],st=Pe[1],Ft=gn(),An=Object(E.a)(Ft,2),Gn=An[0],Yn=An[1];function vr(){st(Ae)}return Tt(function(){if(pt!==St&&pt!==mt){var zr=Ut.indexOf(pt),et=Ut[zr+1],wt=gt(pt);wt===Ht?st(et):Gn(function(lt){function Vt(){if(lt.isCanceled())return;st(et)}wt===!0?Vt():Promise.resolve(wt).then(Vt)})}},[tt,pt]),w.useEffect(function(){return function(){Yn()}},[]),[vr,pt]},ze=function(tt){var gt=Object(w.useRef)(),kt=Object(w.useRef)(tt);kt.current=tt;var Pe=w.useCallback(function(Ft){kt.current(Ft)},[]);function pt(Ft){Ft&&(Ft.removeEventListener(Z,Pe),Ft.removeEventListener(ye,Pe))}function st(Ft){gt.current&&gt.current!==Ft&&pt(gt.current),Ft&&Ft!==gt.current&&(Ft.addEventListener(Z,Pe),Ft.addEventListener(ye,Pe),gt.current=Ft)}return w.useEffect(function(){return function(){pt(gt.current)}},[]),[st,pt]};function Be(tt,gt,kt,Pe){var pt=Pe.motionEnter,st=pt===void 0?!0:pt,Ft=Pe.motionAppear,An=Ft===void 0?!0:Ft,Gn=Pe.motionLeave,Yn=Gn===void 0?!0:Gn,vr=Pe.motionDeadline,zr=Pe.motionLeaveImmediately,et=Pe.onAppearPrepare,wt=Pe.onEnterPrepare,lt=Pe.onLeavePrepare,Vt=Pe.onAppearStart,cn=Pe.onEnterStart,We=Pe.onLeaveStart,Jt=Pe.onAppearActive,vt=Pe.onEnterActive,Kn=Pe.onLeaveActive,kr=Pe.onAppearEnd,Ur=Pe.onEnterEnd,fa=Pe.onLeaveEnd,ea=Pe.onVisibleChanged,ia=Dt(),Va=Object(E.a)(ia,2),da=Va[0],$a=Va[1],di=Dt(k),Da=Object(E.a)(di,2),Ya=Da[0],ro=Da[1],ys=Dt(null),Co=Object(E.a)(ys,2),Gs=Co[0],Ho=Co[1],rs=Object(w.useRef)(!1),as=Object(w.useRef)(null),_s=Object(w.useRef)(!1),Js=Object(w.useRef)(null);function fo(){var Wi=kt();return Wi||Js.current}var To=Object(w.useRef)(!1);function bs(Wi){var ji=fo();if(Wi&&!Wi.deadline&&Wi.target!==ji)return;var _o;Ya===Te&&To.current?_o=kr==null?void 0:kr(ji,Wi):Ya===De&&To.current?_o=Ur==null?void 0:Ur(ji,Wi):Ya===Ue&&To.current&&(_o=fa==null?void 0:fa(ji,Wi)),_o!==!1&&!_s.current&&(ro(k),Ho(null))}var bo=ze(bs),Es=Object(E.a)(bo,1),vu=Es[0],Zs=w.useMemo(function(){var Wi,ji,_o;switch(Ya){case"appear":return Wi={},Object(g.a)(Wi,Ae,et),Object(g.a)(Wi,Wt,Vt),Object(g.a)(Wi,At,Jt),Wi;case"enter":return ji={},Object(g.a)(ji,Ae,wt),Object(g.a)(ji,Wt,cn),Object(g.a)(ji,At,vt),ji;case"leave":return _o={},Object(g.a)(_o,Ae,lt),Object(g.a)(_o,Wt,We),Object(g.a)(_o,At,Kn),_o;default:return{}}},[Ya]),Ko=me(Ya,function(Wi){if(Wi===Ae){var ji=Zs[Ae];return ji?ji(fo()):Ht}if(qs in Zs){var _o;Ho(((_o=Zs[qs])===null||_o===void 0?void 0:_o.call(Zs,fo(),null))||null)}return qs===At&&(vu(fo()),vr>0&&(clearTimeout(as.current),as.current=setTimeout(function(){bs({deadline:!0})},vr))),Rt}),is=Object(E.a)(Ko,2),cs=is[0],qs=is[1],Ju=Fe(qs);To.current=Ju,Tt(function(){$a(gt);var Wi=rs.current;if(rs.current=!0,!tt)return;var ji;!Wi&&gt&&An&&(ji=Te),Wi&&gt&&st&&(ji=De),(Wi&&!gt&&Yn||!Wi&&zr&&!gt&&Yn)&&(ji=Ue),ji&&(ro(ji),cs())},[gt]),Object(w.useEffect)(function(){(Ya===Te&&!An||Ya===De&&!st||Ya===Ue&&!Yn)&&ro(k)},[An,st,Yn]),Object(w.useEffect)(function(){return function(){clearTimeout(as.current),_s.current=!0}},[]),Object(w.useEffect)(function(){da!==void 0&&Ya===k&&(ea==null||ea(da))},[da,Ya]);var eu=Gs;return Zs[Ae]&&qs===Wt&&(eu=Object(f.a)({transition:"none"},eu)),[Ya,qs,eu,da??gt]}var ut=u(57),xt=u(58),$t=u(59),Qt=u(60),on=function(tt){Object($t.a)(kt,tt);var gt=Object(Qt.a)(kt);function kt(){return Object(ut.a)(this,kt),gt.apply(this,arguments)}return Object(xt.a)(kt,[{key:"render",value:function(){return this.props.children}}]),kt}(w.Component),Mn=on;function Nn(tt){var gt=tt;Object(T.a)(tt)==="object"&&(gt=tt.transitionSupport);function kt(pt){return!!(pt.motionName&&gt)}var Pe=w.forwardRef(function(pt,st){var Ft=pt.visible,An=Ft===void 0?!0:Ft,Gn=pt.removeOnLeave,Yn=Gn===void 0?!0:Gn,vr=pt.forceRender,zr=pt.children,et=pt.motionName,wt=pt.leavedClassName,lt=pt.eventProps,Vt=kt(pt),cn=Object(w.useRef)(),We=Object(w.useRef)();function Jt(){try{return Object(D.a)(cn.current||We.current)}catch(ro){return null}}var vt=Be(Vt,An,Jt,pt),Kn=Object(E.a)(vt,4),kr=Kn[0],Ur=Kn[1],fa=Kn[2],ea=Kn[3],ia=w.useRef(ea);ea&&(ia.current=!0);var Va=Object(w.useRef)(st);Va.current=st;var da=w.useCallback(function(ro){cn.current=ro,Object(O.b)(Va.current,ro)},[]),$a,di=Object(f.a)(Object(f.a)({},lt),{},{visible:An});if(!zr)$a=null;else if(kr===k||!kt(pt))ea?$a=zr(Object(f.a)({},di),da):!Yn&&ia.current?$a=zr(Object(f.a)(Object(f.a)({},di),{},{className:wt}),da):vr?$a=zr(Object(f.a)(Object(f.a)({},di),{},{style:{display:"none"}}),da):$a=null;else{var Da,Ya;Ur===Ae?Ya="prepare":Fe(Ur)?Ya="active":Ur===Wt&&(Ya="start"),$a=zr(Object(f.a)(Object(f.a)({},di),{},{className:U()(Ee(et,kr),(Da={},Object(g.a)(Da,Ee(et,"".concat(kr,"-").concat(Ya)),Ya),Object(g.a)(Da,et,typeof et=="string"),Da)),style:fa}),da)}return w.createElement(Mn,{ref:We},$a)});return Pe.displayName="CSSMotion",Pe}var qn=Nn(se),nr=u(21),xn=u(46),pn="add",pr="keep",gr="remove",Ce="removed";function Jn(tt){var gt;return tt&&Object(T.a)(tt)==="object"&&"key"in tt?gt=tt:gt={key:tt},Object(f.a)(Object(f.a)({},gt),{},{key:String(gt.key)})}function Ln(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return tt.map(Jn)}function yr(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],kt=[],Pe=0,pt=gt.length,st=Ln(tt),Ft=Ln(gt);st.forEach(function(Yn){for(var vr=!1,zr=Pe;zr<pt;zr+=1){var et=Ft[zr];if(et.key===Yn.key){Pe<zr&&(kt=kt.concat(Ft.slice(Pe,zr).map(function(wt){return Object(f.a)(Object(f.a)({},wt),{},{status:pn})})),Pe=zr),kt.push(Object(f.a)(Object(f.a)({},et),{},{status:pr})),Pe+=1,vr=!0;break}}vr||kt.push(Object(f.a)(Object(f.a)({},Yn),{},{status:gr}))}),Pe<pt&&(kt=kt.concat(Ft.slice(Pe).map(function(Yn){return Object(f.a)(Object(f.a)({},Yn),{},{status:pn})})));var An={};kt.forEach(function(Yn){var vr=Yn.key;An[vr]=(An[vr]||0)+1});var Gn=Object.keys(An).filter(function(Yn){return An[Yn]>1});return Gn.forEach(function(Yn){kt=kt.filter(function(vr){var zr=vr.key,et=vr.status;return zr!==Yn||et!==gr}),kt.forEach(function(vr){vr.key===Yn&&(vr.status=pr)})}),kt}var Un=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function $e(tt){var gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qn,kt=function(Pe){Object($t.a)(st,Pe);var pt=Object(Qt.a)(st);function st(){var Ft;return Object(ut.a)(this,st),Ft=pt.apply(this,arguments),Ft.state={keyEntities:[]},Ft.removeKey=function(An){Ft.setState(function(Gn){var Yn=Gn.keyEntities;return{keyEntities:Yn.map(function(vr){return vr.key!==An?vr:Object(f.a)(Object(f.a)({},vr),{},{status:Ce})})}})},Ft}return Object(xt.a)(st,[{key:"render",value:function(){var An=this,Gn=this.state.keyEntities,Yn=this.props,vr=Yn.component,zr=Yn.children,et=Yn.onVisibleChanged,wt=Object(xn.a)(Yn,["component","children","onVisibleChanged"]),lt=vr||w.Fragment,Vt={};return Un.forEach(function(cn){Vt[cn]=wt[cn],delete wt[cn]}),delete wt.keys,w.createElement(lt,wt,Gn.map(function(cn){var We=cn.status,Jt=Object(xn.a)(cn,["status"]),vt=We===pn||We===pr;return w.createElement(gt,Object(nr.a)({},Vt,{key:Jt.key,visible:vt,eventProps:Jt,onVisibleChanged:function(kr){et==null||et(kr,{key:Jt.key}),kr||An.removeKey(Jt.key)}}),zr)}))}}],[{key:"getDerivedStateFromProps",value:function(An,Gn){var Yn=An.keys,vr=Gn.keyEntities,zr=Ln(Yn),et=yr(vr,zr);return{keyEntities:et.filter(function(wt){var lt=vr.find(function(Vt){var cn=Vt.key;return wt.key===cn});return!(lt&&lt.status===Ce&&wt.status===gr)})}}}]),st}(w.Component);return kt.defaultProps={component:"div"},kt}var Re=$e(se),Ye=_.a=qn},function(j,_,u){"use strict";u.d(_,"a",function(){return E});function g(T){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(D){return typeof D}:g=function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},g(T)}var f=u(23);function E(T,w){return w&&(g(w)==="object"||typeof w=="function")?w:Object(f.a)(T)}},function(j,_,u){var g=u(255),f=u(254),E=u(262),T=u(168),w=u(263),D=[0,0];j.exports.computeMiter=function(L,U,V,z,K){return g(L,V,z),E(L,L),f(U,-L[1],L[0]),f(D,-V[1],V[0]),K/w(U,D)},j.exports.normal=function(L,U){return f(L,-U[1],U[0]),L},j.exports.direction=function(L,U,V){return T(L,U,V),E(L,L),L}},,function(j,_,u){var g=u(325),f=u(330);function E(T,w){var D=f(T,w);return g(D)?D:void 0}j.exports=E},function(j,_,u){var g=u(83),f=u(326),E=u(327),T="[object Null]",w="[object Undefined]",D=g?g.toStringTag:void 0;function O(L){return L==null?L===void 0?w:T:D&&D in Object(L)?f(L):E(L)}j.exports=O},function(j,_,u){var g=u(179),f=u(350),E=u(62);function T(w){return E(w)?g(w,!0):f(w)}j.exports=T},function(j,_){function u(g){return g}j.exports=u},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.id=void 0;var g=0;function f(){return g++}_.id=f},function(j,_,u){"use strict";u.d(_,"a",function(){return gn});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(14),D=u.n(w),O=u(9),L=u.n(O),U=u(10),V=u.n(U),z=u(15),K=u.n(z),J=u(36),he=u.n(J),ue=u(8),de=u.n(ue),ae=u(16),le=u(146),re=u(61),se,ye,Z,Ee,k,Te,De,Ue,St,Ae,Wt,At,mt;function Dt(Ut,Ht){var Rt;if(typeof Symbol=="undefined"||Ut[Symbol.iterator]==null){if(Array.isArray(Ut)||(Rt=Ke(Ut))||Ht&&Ut&&typeof Ut.length=="number"){Rt&&(Ut=Rt);var Fe=0,me=function(){};return{s:me,n:function(){return Fe>=Ut.length?{done:!0}:{done:!1,value:Ut[Fe++]}},e:function($t){throw $t},f:me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ze=!0,Be=!1,ut;return{s:function(){Rt=Ut[Symbol.iterator]()},n:function(){var $t=Rt.next();return ze=$t.done,$t},e:function($t){Be=!0,ut=$t},f:function(){try{!ze&&Rt.return!=null&&Rt.return()}finally{if(Be)throw ut}}}}function Ke(Ut,Ht){if(!Ut)return;if(typeof Ut=="string")return Tt(Ut,Ht);var Rt=Object.prototype.toString.call(Ut).slice(8,-1);if(Rt==="Object"&&Ut.constructor&&(Rt=Ut.constructor.name),Rt==="Map"||Rt==="Set")return Array.from(Ut);if(Rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rt))return Tt(Ut,Ht)}function Tt(Ut,Ht){(Ht==null||Ht>Ut.length)&&(Ht=Ut.length);for(var Rt=0,Fe=new Array(Ht);Rt<Ht;Rt++)Fe[Rt]=Ut[Rt];return Fe}var Gt={NONE:0,ENCODE:1,HIGHLIGHT:2},gn=(se=Object(ue.injectable)(),ye=Object(ue.inject)(ae.a.RenderEngine),Z=Object(ue.inject)(ae.a.ResourcePool),Ee=Object(ue.inject)(ae.a.RenderPassFactory),k=Object(ue.inject)(ae.a.MeshComponentManager),se(Te=(De=(mt=At=function(){function Ut(){var Ht=this;L()(this,Ut),D()(this,"engine",Ue,this),D()(this,"resourcePool",St,this),D()(this,"renderPassFactory",Ae,this),D()(this,"mesh",Wt,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(Rt,Fe,me){var ze=Rt.createRenderTarget(Fe,"picking fbo",{width:1,height:1});me.data={output:Fe.write(Rt,ze)},Fe.hasSideEffect=!0},this.execute=function(){var Rt=T()(f.a.mark(function Fe(me,ze,Be){var ut,xt,$t;return f.a.wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(Ht.views=Be,!Ht.alreadyInRendering){on.next=3;break}return on.abrupt("return");case 3:ut=Dt(Be);try{for($t=function(){var Nn=xt.value,qn=Nn.getViewport(),nr=qn.width,xn=qn.height;Ht.alreadyInRendering=!0;var pn=me.getResourceNode(ze.data.output);Ht.pickingFBO=Ht.resourcePool.getOrCreateResource(pn.resource),Ht.pickingFBO.resize({width:nr,height:xn}),Ht.engine.useFramebuffer(Ht.pickingFBO,function(){Ht.engine.clear({framebuffer:Ht.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var pr=Ht.renderPassFactory(re.a.IDENTIFIER),gr=[],Ce=Nn.getScene(),Jn=Dt(Ce.getEntities()),Ln;try{for(Jn.s();!(Ln=Jn.n()).done;){var yr=Ln.value,Un=Ht.mesh.getComponentByEntity(yr),$e=Un.material;$e.setUniform("u_PickingStage",Gt.ENCODE),gr.push(Un)}}catch(Re){Jn.e(Re)}finally{Jn.f()}pr.renderView(Nn),gr.forEach(function(Re){var Ye=Re.material;Ye.setUniform("u_PickingStage",Gt.HIGHLIGHT)}),Ht.alreadyInRendering=!1})},ut.s();!(xt=ut.n()).done;)$t()}catch(Mn){ut.e(Mn)}finally{ut.f()}case 5:case"end":return on.stop()}},Fe)}));return function(Fe,me,ze){return Rt.apply(this,arguments)}}(),this.pick=function(Rt,Fe){var me=Rt.x,ze=Rt.y,Be=Ht.engine,ut=Be.readPixels,xt=Be.useFramebuffer,$t=Fe.getViewport(),Qt=$t.width,on=$t.height,Mn=me*window.devicePixelRatio,Nn=ze*window.devicePixelRatio;if(Mn>Qt||Mn<0||Nn>on||Nn<0)return;var qn,nr;return xt(Ht.pickingFBO,function(){qn=ut({x:Math.round(Mn),y:Math.round(on-(ze+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Ht.pickingFBO}),(qn[0]!==0||qn[1]!==0||qn[2]!==0)&&(nr=Object(le.a)(qn),Ht.highlightEnabled&&Ht.highlightPickedFeature(qn,Fe))}),nr}}return V()(Ut,[{key:"enableHighlight",value:function(Rt){this.highlightEnabled=Rt}},{key:"setHighlightColor",value:function(Rt){this.highlightColor=Rt}},{key:"highlightPickedFeature",value:function(Rt,Fe){if(Rt){var me=Dt(Fe.getScene().getEntities()),ze;try{for(me.s();!(ze=me.n()).done;){var Be=ze.value,ut=this.mesh.getComponentByEntity(Be),xt=ut.material;xt.setUniform("u_PickingStage",Gt.HIGHLIGHT),xt.setUniform("u_PickingColor",[Rt[0],Rt[1],Rt[2]]),xt.setUniform("u_HighlightColor",this.highlightColor)}}catch($t){me.e($t)}finally{me.f()}}}}]),Ut}(),At.IDENTIFIER="PixelPicking Pass",mt),Ue=K()(De.prototype,"engine",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=K()(De.prototype,"resourcePool",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=K()(De.prototype,"renderPassFactory",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=K()(De.prototype,"mesh",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De))||Te)},function(j,_,u){"use strict";u.d(_,"b",function(){return T}),u.d(_,"a",function(){return w}),u.d(_,"c",function(){return D});var g=u(42),f=u(271),E=u.n(f);function T(O,L){typeof O=="function"?O(L):Object(g.a)(O)==="object"&&O&&"current"in O&&(O.current=L)}function w(){for(var O=arguments.length,L=new Array(O),U=0;U<O;U++)L[U]=arguments[U];return function(V){L.forEach(function(z){T(z,V)})}}function D(O){var L,U,V=Object(f.isMemo)(O)?O.type.type:O.type;return typeof V=="function"&&!((L=V.prototype)===null||L===void 0?void 0:L.render)?!1:!(typeof O=="function"&&!((U=O.prototype)===null||U===void 0?void 0:U.render))}},function(j,_,u){"use strict";u.d(_,"a",function(){return E});var g=u(53),f=u.n(g);function E(T,w,D,O){var L=f.a.unstable_batchedUpdates?function(V){f.a.unstable_batchedUpdates(D,V)}:D;return T.addEventListener&&T.addEventListener(w,L,O),{remove:function(){T.removeEventListener&&T.removeEventListener(w,L)}}}},function(j,_){function u(g,f){return g===f||g!==g&&f!==f}j.exports=u},function(j,_,u){var g=u(51),f=g.Symbol;j.exports=f},function(j,_,u){(function(g){var f=u(51),E=u(346),T=_&&!_.nodeType&&_,w=T&&typeof g=="object"&&g&&!g.nodeType&&g,D=w&&w.exports===T,O=D?f.Buffer:void 0,L=O?O.isBuffer:void 0,U=L||E;g.exports=U}).call(this,u(152)(j))},function(j,_,u){var g=u(355),f=u(149),E=u(356),T=u(188),w=u(357),D=u(75),O=u(177),L="[object Map]",U="[object Object]",V="[object Promise]",z="[object Set]",K="[object WeakMap]",J="[object DataView]",he=O(g),ue=O(f),de=O(E),ae=O(T),le=O(w),re=D;(g&&re(new g(new ArrayBuffer(1)))!=J||f&&re(new f)!=L||E&&re(E.resolve())!=V||T&&re(new T)!=z||w&&re(new w)!=K)&&(re=function(ye){var Z=D(ye),Ee=Z==U?ye.constructor:void 0,k=Ee?O(Ee):"";if(k)switch(k){case he:return J;case ue:return L;case de:return V;case ae:return z;case le:return K}return Z}),j.exports=re},function(j,_,u){var g=u(75),f=u(56),E="[object Symbol]";function T(w){return typeof w=="symbol"||f(w)&&g(w)==E}j.exports=T},function(j,_,u){"use strict";u.d(_,"a",function(){return D});var g=u(9),f=u.n(g),E=u(10),T=u.n(E),w=u(0),D=function(){function O(L,U){f()(this,O),this.center=void 0,this.halfExtents=void 0,this.min=w.d.create(),this.max=w.d.create(),this.update(L,U)}return T()(O,[{key:"update",value:function(U,V){this.center=U||w.d.create(),this.halfExtents=V||w.d.fromValues(.5,.5,.5),this.min=w.d.sub(this.min,this.center,this.halfExtents),this.max=w.d.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(U,V){w.d.add(this.center,V,U),w.d.scale(this.center,this.center,.5),w.d.sub(this.halfExtents,V,U),w.d.scale(this.halfExtents,this.halfExtents,.5),w.d.copy(this.min,U),w.d.copy(this.max,V)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(U){var V=this.center,z=V[0],K=V[1],J=V[2],he=this.halfExtents,ue=he[0],de=he[1],ae=he[2],le=z-ue,re=z+ue,se=K-de,ye=K+de,Z=J-ae,Ee=J+ae,k=U.center,Te=k[0],De=k[1],Ue=k[2],St=U.halfExtents,Ae=St[0],Wt=St[1],At=St[2],mt=Te-Ae,Dt=Te+Ae,Ke=De-Wt,Tt=De+Wt,Gt=Ue-At,gn=Ue+At;mt<le&&(le=mt),Dt>re&&(re=Dt),Ke<se&&(se=Ke),Tt>ye&&(ye=Tt),Gt<Z&&(Z=Gt),gn>Ee&&(Ee=gn),V[0]=(le+re)*.5,V[1]=(se+ye)*.5,V[2]=(Z+Ee)*.5,he[0]=(re-le)*.5,he[1]=(ye-se)*.5,he[2]=(Ee-Z)*.5,this.min[0]=le,this.min[1]=se,this.min[2]=Z,this.max[0]=re,this.max[1]=ye,this.max[2]=Ee}},{key:"intersects",value:function(U){var V=this.getMax(),z=this.getMin(),K=U.getMax(),J=U.getMin();return z[0]<=K[0]&&V[0]>=J[0]&&z[1]<=K[1]&&V[1]>=J[1]&&z[2]<=K[2]&&V[2]>=J[2]}},{key:"containsPoint",value:function(U){var V=this.getMin(),z=this.getMax();return!(U[0]<V[0]||U[0]>z[0]||U[1]<V[1]||U[1]>z[1]||U[2]<V[2]||U[2]>z[2])}},{key:"getNegativeFarPoint",value:function(U){return U.pnVertexFlag===273?w.d.copy(w.d.create(),this.min):U.pnVertexFlag===272?w.d.fromValues(this.min[0],this.min[1],this.max[2]):U.pnVertexFlag===257?w.d.fromValues(this.min[0],this.max[1],this.min[2]):U.pnVertexFlag===256?w.d.fromValues(this.min[0],this.max[1],this.max[2]):U.pnVertexFlag===17?w.d.fromValues(this.max[0],this.min[1],this.min[2]):U.pnVertexFlag===16?w.d.fromValues(this.max[0],this.min[1],this.max[2]):U.pnVertexFlag===1?w.d.fromValues(this.max[0],this.max[1],this.min[2]):w.d.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(U){return U.pnVertexFlag===273?w.d.copy(w.d.create(),this.max):U.pnVertexFlag===272?w.d.fromValues(this.max[0],this.max[1],this.min[2]):U.pnVertexFlag===257?w.d.fromValues(this.max[0],this.min[1],this.max[2]):U.pnVertexFlag===256?w.d.fromValues(this.max[0],this.min[1],this.min[2]):U.pnVertexFlag===17?w.d.fromValues(this.min[0],this.max[1],this.max[2]):U.pnVertexFlag===16?w.d.fromValues(this.min[0],this.max[1],this.min[2]):U.pnVertexFlag===1?w.d.fromValues(this.min[0],this.min[1],this.max[2]):w.d.fromValues(this.min[0],this.min[1],this.min[2])}}]),O}()},function(j,_,u){"use strict";u.d(_,"a",function(){return f});var g=u(101);function f(E,T){if(!E)return;if(typeof E=="string")return Object(g.a)(E,T);var w=Object.prototype.toString.call(E).slice(8,-1);if(w==="Object"&&E.constructor&&(w=E.constructor.name),w==="Map"||w==="Set")return Array.from(w);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return Object(g.a)(E,T)}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f,E){return f?f.contains(E):!1}},function(j,_,u){"use strict";u.d(_,"b",function(){return E}),u.d(_,"c",function(){return T}),u.d(_,"a",function(){return w});var g=u(1),f=u.n(g),E=g.isValidElement;function T(D,O,L){return E(D)?g.cloneElement(D,typeof L=="function"?L(D.props||{}):L):O}function w(D,O){return T(D,D,O)}},function(j,_,u){"use strict";u.d(_,"a",function(){return At});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(14),D=u.n(w),O=u(9),L=u.n(O),U=u(15),V=u.n(U),z=u(36),K=u.n(z),J=u(8),he=u.n(J),ue=u(16),de=u(43),ae=u(61),le,re,se,ye,Z,Ee,k,Te,De,Ue=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,St=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ae=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,Wt=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,At=(le=Object(J.injectable)(),re=Object(J.inject)(ue.a.RenderEngine),se=Object(J.inject)(ue.a.ResourcePool),le(ye=(Z=(De=Te=function mt(){var Dt=this;L()(this,mt),D()(this,"engine",Ee,this),D()(this,"resourcePool",k,this),this.model=void 0,this.setup=function(Ke,Tt,Gt){var gn=Ke.getPass(ae.a.IDENTIFIER);if(gn){var Ut=Ke.createRenderTarget(Tt,"render to screen",{width:1,height:1});Gt.data={input:Tt.read(gn.data.output),output:Tt.write(Ke,Ut)}}},this.execute=function(){var Ke=T()(f.a.mark(function Tt(Gt,gn){var Ut,Ht,Rt,Fe,me,ze,Be;return f.a.wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(Ut=Dt.engine,Ht=Ut.createModel,Rt=Ut.createAttribute,Fe=Ut.createBuffer,Dt.model){xt.next=6;break}return xt.next=4,Ht({vs:Dt.engine.supportWebGPU?Wt:St,fs:Dt.engine.supportWebGPU?Ae:Ue,attributes:{a_Position:Rt({buffer:Fe({data:[-4,-4,4,-4,0,4],type:de.a.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:me=xt.sent,Dt.model=me;case 6:ze=Gt.getResourceNode(gn.data.input),Be=Dt.resourcePool.getOrCreateResource(ze.resource),Dt.engine.useFramebuffer(null,function(){Dt.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),Dt.model.draw({uniforms:{u_Texture:Be}})});case 9:case"end":return xt.stop()}},Tt)}));return function(Tt,Gt){return Ke.apply(this,arguments)}}(),this.tearDown=function(){Dt.model=void 0}},Te.IDENTIFIER="Copy Pass",De),Ee=V()(Z.prototype,"engine",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=V()(Z.prototype,"resourcePool",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z))||ye)},,function(j,_){var u;u=function(){return this}();try{u=u||new Function("return this")()}catch(g){typeof window=="object"&&(u=window)}j.exports=u},function(j,_,u){var g=u(75),f=u(48),E="[object AsyncFunction]",T="[object Function]",w="[object GeneratorFunction]",D="[object Proxy]";function O(L){if(!f(L))return!1;var U=g(L);return U==T||U==w||U==E||U==D}j.exports=O},function(j,_,u){var g=u(108),f=u(109);function E(T,w,D,O){var L=!D;D||(D={});for(var U=-1,V=w.length;++U<V;){var z=w[U],K=O?O(D[z],T[z],z,D,T):void 0;K===void 0&&(K=T[z]),L?f(D,z,K):g(D,z,K)}return D}j.exports=E},function(j,_,u){var g=u(345),f=u(56),E=Object.prototype,T=E.hasOwnProperty,w=E.propertyIsEnumerable,D=g(function(){return arguments}())?g:function(O){return f(O)&&T.call(O,"callee")&&!w.call(O,"callee")};j.exports=D},function(j,_,u){var g=u(347),f=u(111),E=u(154),T=E&&E.isTypedArray,w=T?f(T):g;j.exports=w},function(j,_,u){var g=u(86),f=1/0;function E(T){if(typeof T=="string"||g(T))return T;var w=T+"";return w=="0"&&1/T==-f?"-0":w}j.exports=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.circularDependencyToException=_.listMetadataForTarget=_.listRegisteredBindingsForServiceIdentifier=_.getServiceIdentifierAsString=_.getFunctionName=void 0;var g=u(45);function f(U){if(typeof U=="function"){var V=U;return V.name}else{if(typeof U=="symbol")return U.toString();var V=U;return V}}_.getServiceIdentifierAsString=f;function E(U,V,z){var K="",J=z(U,V);return J.length!==0&&(K=`
Registered bindings:`,J.forEach(function(he){var ue="Object";he.implementationType!==null&&(ue=L(he.implementationType)),K=K+`
 `+ue,he.constraint.metaData&&(K=K+" - "+he.constraint.metaData)})),K}_.listRegisteredBindingsForServiceIdentifier=E;function T(U,V){return U.parentRequest===null?!1:U.parentRequest.serviceIdentifier===V?!0:T(U.parentRequest,V)}function w(U){function V(K,J){J===void 0&&(J=[]);var he=f(K.serviceIdentifier);return J.push(he),K.parentRequest!==null?V(K.parentRequest,J):J}var z=V(U);return z.reverse().join(" --> ")}function D(U){U.childRequests.forEach(function(V){if(T(V,V.serviceIdentifier)){var z=w(V);throw new Error(g.CIRCULAR_DEPENDENCY+" "+z)}else D(V)})}_.circularDependencyToException=D;function O(U,V){if(V.isTagged()||V.isNamed()){var z="",K=V.getNamedTag(),J=V.getCustomTags();return K!==null&&(z+=K.toString()+`
`),J!==null&&J.forEach(function(he){z+=he.toString()+`
`})," "+U+`
 `+U+" - "+z}else return" "+U}_.listMetadataForTarget=O;function L(U){if(U.name)return U.name;var V=U.toString(),z=V.match(/^function\s*([^\s(]+)/);return z?z[1]:"Anonymous function: "+V}_.getFunctionName=L},function(j,_,u){"use strict";u.d(_,"a",function(){return pn});var g=u(228),f=u(8),E=u(284),T=u.n(E),w=u(28),D=u(14),O=u.n(D),L=u(9),U=u.n(L),V=u(10),z=u.n(V),K=u(15),J=u.n(K),he=u(36),ue=u(16),de=u(43),ae,le,re,se,ye,Z,Ee=(ae=Object(f.injectable)(),le=Object(f.inject)(ue.a.RenderEngine),ae(re=(se=(Z=function(){function pr(){U()(this,pr),O()(this,"engine",ye,this),this.resourcePool={}}return z()(pr,[{key:"getOrCreateResource",value:function(Ce){if(!this.resourcePool[Ce.name]){var Jn=Ce.descriptor,Ln=Jn.width,yr=Jn.height,Un=Jn.usage;this.resourcePool[Ce.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:Ln,height:yr,wrapS:de.a.CLAMP_TO_EDGE,wrapT:de.a.CLAMP_TO_EDGE,usage:Un})})}return this.resourcePool[Ce.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),pr}(),Z),ye=J()(se.prototype,"engine",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se))||re),k=u(137),Te=u(139),De=u(124),Ue=u(125),St=u(126),Ae=u(127),Wt=u(128),At=u(129),mt=u(91),Dt=u(79),Ke=u(61),Tt=u(131),Gt=u(132),gn=u(25),Ut=u.n(gn),Ht=u(26),Rt=u.n(Ht),Fe=u(20),me=u.n(Fe);function ze(pr){var gr=Be();return function(){var Jn=me()(pr),Ln;if(gr){var yr=me()(this).constructor;Ln=Reflect.construct(Jn,arguments,yr)}else Ln=Jn.apply(this,arguments);return Rt()(this,Ln)}}function Be(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(pr){return!1}}var ut=function(pr){Ut()(Ce,pr);var gr=ze(Ce);function Ce(Jn){var Ln;return U()(this,Ce),Ln=gr.call(this,Jn),Ln.name=void 0,Ln.name=Jn.name||"",Ln}return Ce}(w.a),xt=u(133),$t=u(134),Qt=u(135),on=u(136),Mn=u(138),Nn=new f.Container,qn=T()(Nn,!1),nr=function(gr){var Ce=qn.lazyInject(gr);return function(Jn,Ln,yr){Ce.call(this,Jn,Ln),yr&&(yr.initializer=function(){return Jn[Ln]})}},xn=function(gr){var Ce=qn.lazyMultiInject(gr);return function(Jn,Ln,yr){Ce.call(this,Jn,Ln),yr&&(yr.initializer=function(){return Jn[Ln]})}};Nn.bind(ue.a.ShaderModuleService).to(Mn.a).inSingletonScope(),Nn.bind(ue.a.NameComponentManager).toConstantValue(new w.b(ut)),Nn.bind(ue.a.HierarchyComponentManager).toConstantValue(new w.b(Gt.a)),Nn.bind(ue.a.TransformComponentManager).toConstantValue(new w.b($t.a)),Nn.bind(ue.a.MeshComponentManager).toConstantValue(new w.b(Wt.a)),Nn.bind(ue.a.CullableComponentManager).toConstantValue(new w.b(Ae.a)),Nn.bind(ue.a.GeometryComponentManager).toConstantValue(new w.b(Te.a)),Nn.bind(ue.a.MaterialComponentManager).toConstantValue(new w.b(Ue.a));function pn(){var pr=new f.Container;return pr.parent=Nn,pr.bind(ue.a.Systems).to(xt.a).inSingletonScope().whenTargetNamed(ue.a.SceneGraphSystem),pr.bind(ue.a.Systems).to(k.a).inSingletonScope().whenTargetNamed(ue.a.FrameGraphSystem),pr.bind(ue.a.Systems).to(At.a).inSingletonScope().whenTargetNamed(ue.a.MeshSystem),pr.bind(ue.a.Systems).to(De.a).inSingletonScope().whenTargetNamed(ue.a.GeometrySystem),pr.bind(ue.a.Systems).to(St.a).inSingletonScope().whenTargetNamed(ue.a.MaterialSystem),pr.bind(ue.a.Systems).to(Tt.a).inSingletonScope().whenTargetNamed(ue.a.RendererSystem),pr.bind(ue.a.ResourcePool).to(Ee).inSingletonScope(),pr.bind(ue.a.ConfigService).to(Qt.a).inSingletonScope(),pr.bind(ue.a.InteractorService).to(on.a).inSingletonScope(),pr.bind(ue.a.RenderPass).to(Ke.a).inSingletonScope().whenTargetNamed(Ke.a.IDENTIFIER),pr.bind(ue.a.RenderPass).to(mt.a).inSingletonScope().whenTargetNamed(mt.a.IDENTIFIER),pr.bind(ue.a.RenderPass).to(Dt.a).inSingletonScope().whenTargetNamed(Dt.a.IDENTIFIER),pr.bind(ue.a.RenderPassFactory).toFactory(function(gr){return function(Ce){return gr.container.getNamed(ue.a.RenderPass,Ce)}}),pr}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f,E){(E==null||E>f.length)&&(E=f.length);for(var T=0,w=new Array(E);T<E;T++)w[T]=f[T];return w}},function(j,_,u){j.exports={EPSILON:u(252),create:u(253),clone:u(523),fromValues:u(524),copy:u(525),set:u(254),equals:u(526),exactEquals:u(527),add:u(255),subtract:u(168),sub:u(528),multiply:u(256),mul:u(529),divide:u(257),div:u(530),inverse:u(531),min:u(532),max:u(533),rotate:u(534),floor:u(535),ceil:u(536),round:u(537),scale:u(538),scaleAndAdd:u(539),distance:u(258),dist:u(540),squaredDistance:u(259),sqrDist:u(541),length:u(260),len:u(542),squaredLength:u(261),sqrLen:u(543),negate:u(544),normalize:u(262),dot:u(263),cross:u(545),lerp:u(546),random:u(547),transformMat2:u(548),transformMat2d:u(549),transformMat3:u(550),transformMat4:u(551),forEach:u(552),limit:u(553)}},function(j,_,u){var g=u(104),f=u(320),E=u(321),T=u(322),w=u(323),D=u(324);function O(L){var U=this.__data__=new g(L);this.size=U.size}O.prototype.clear=f,O.prototype.delete=E,O.prototype.get=T,O.prototype.has=w,O.prototype.set=D,j.exports=O},function(j,_,u){var g=u(315),f=u(316),E=u(317),T=u(318),w=u(319);function D(O){var L=-1,U=O==null?0:O.length;for(this.clear();++L<U;){var V=O[L];this.set(V[0],V[1])}}D.prototype.clear=g,D.prototype.delete=f,D.prototype.get=E,D.prototype.has=T,D.prototype.set=w,j.exports=D},function(j,_,u){var g=u(82);function f(E,T){for(var w=E.length;w--;)if(g(E[w][0],T))return w;return-1}j.exports=f},function(j,_,u){var g=u(74),f=g(Object,"create");j.exports=f},function(j,_,u){var g=u(339);function f(E,T){var w=E.__data__;return g(T)?w[typeof T=="string"?"string":"hash"]:w.map}j.exports=f},function(j,_,u){var g=u(109),f=u(82),E=Object.prototype,T=E.hasOwnProperty;function w(D,O,L){var U=D[O];(!(T.call(D,O)&&f(U,L))||L===void 0&&!(O in D))&&g(D,O,L)}j.exports=w},function(j,_,u){var g=u(178);function f(E,T,w){T=="__proto__"&&g?g(E,T,{configurable:!0,enumerable:!0,value:w,writable:!0}):E[T]=w}j.exports=f},function(j,_){var u=9007199254740991,g=/^(?:0|[1-9]\d*)$/;function f(E,T){var w=typeof E;return T=T??u,!!T&&(w=="number"||w!="symbol"&&g.test(E))&&E>-1&&E%1==0&&E<T}j.exports=f},function(j,_){function u(g){return function(f){return g(f)}}j.exports=u},function(j,_){var u=Object.prototype;function g(f){var E=f&&f.constructor,T=typeof E=="function"&&E.prototype||u;return f===T}j.exports=g},function(j,_,u){var g=u(180),f=g(Object.getPrototypeOf,Object);j.exports=f},function(j,_,u){var g=u(160),f=u(368),E=f(g);j.exports=E},function(j,_,u){var g=u(116),f=u(98);function E(T,w){w=g(w,T);for(var D=0,O=w.length;T!=null&&D<O;)T=T[f(w[D++])];return D&&D==O?T:void 0}j.exports=E},function(j,_,u){var g=u(37),f=u(163),E=u(382),T=u(203);function w(D,O){return g(D)?D:f(D,O)?[D]:E(T(D))}j.exports=w},function(j,_){function u(g,f){for(var E=-1,T=g==null?0:g.length,w=Array(T);++E<T;)w[E]=f(g[E],E,g);return w}j.exports=u},function(j,_,u){var g=u(77),f=u(212),E=u(213);function T(w,D){return E(f(w,D,g),w+"")}j.exports=T},function(j,_,u){var g=u(82),f=u(62),E=u(110),T=u(48);function w(D,O,L){if(!T(L))return!1;var U=typeof O;return(U=="number"?f(L)&&E(O,L.length):U=="string"&&O in L)?g(L[O],D):!1}j.exports=w},function(j,_,u){"use strict";var g=u(34);j.exports={longestPath:f,slack:E};function f(T){var w={};function D(O){var L=T.node(O);if(g.has(w,O))return L.rank;w[O]=!0;var U=g.min(g.map(T.outEdges(O),function(V){return D(V.w)-T.edge(V).minlen}));return(U===Number.POSITIVE_INFINITY||U===void 0||U===null)&&(U=0),L.rank=U}g.forEach(T.sources(),D)}function E(T,w){return T.node(w.w).rank-T.node(w.v).rank-T.edge(w).minlen}},function(j,_,u){"use strict";var g=u(43);u.d(_,"gl",function(){return g.a});var f=u(239),E=u.n(f),T=u(240),w=u.n(T),D=u(241),O=u.n(D),L=u(242),U=u.n(L),V=u(243),z=u.n(V),K=u(244),J=u.n(K),he=u(245),ue=u(246),de=u.n(ue),ae=u(247),le=u.n(ae),re=u(248),se=u.n(re),ye=u(249),Z=u.n(ye)},function(j,_,u){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;function T(D){if(D==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(D)}function w(){try{if(!Object.assign)return!1;var D=new String("abc");if(D[5]="de",Object.getOwnPropertyNames(D)[0]==="5")return!1;for(var O={},L=0;L<10;L++)O["_"+String.fromCharCode(L)]=L;var U=Object.getOwnPropertyNames(O).map(function(z){return O[z]});if(U.join("")!=="0123456789")return!1;var V={};return"abcdefghijklmnopqrst".split("").forEach(function(z){V[z]=z}),!(Object.keys(Object.assign({},V)).join("")!=="abcdefghijklmnopqrst")}catch(z){return!1}}j.exports=w()?Object.assign:function(D,O){for(var L,U=T(D),V,z=1;z<arguments.length;z++){L=Object(arguments[z]);for(var K in L)f.call(L,K)&&(U[K]=L[K]);if(g){V=g(L);for(var J=0;J<V.length;J++)E.call(L,V[J])&&(U[V[J]]=L[V[J]])}}return U}},function(j,_,u){"use strict";u.d(_,"a",function(){return g}),u.d(_,"b",function(){return E});var g=-1,f=1;function E(){return f++}},function(j,_,u){"use strict";u.d(_,"a",function(){return St});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(14),D=u.n(w),O=u(9),L=u.n(O),U=u(10),V=u.n(U),z=u(15),K=u.n(z),J=u(36),he=u.n(J),ue=u(8),de=u.n(ue),ae=u(2),le=u(16),re=u(43),se,ye,Z,Ee,k,Te,De,Ue,St=(se=Object(ue.injectable)(),ye=Object(ue.inject)(le.a.GeometryComponentManager),Z=Object(ue.inject)(le.a.RenderEngine),se(Ee=(k=(Ue=function(){function Ae(){L()(this,Ae),D()(this,"geometry",Te,this),D()(this,"engine",De,this)}return V()(Ae,[{key:"execute",value:function(){var Wt=T()(f.a.mark(function mt(){var Dt=this;return f.a.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:this.geometry.forEach(function(Gt,gn){gn.dirty&&(gn.attributes.forEach(function(Ut){if(Ut.dirty&&Ut.data){if(!Ut.buffer)Ut.buffer=Dt.engine.createBuffer({data:Ut.data,type:re.a.FLOAT});else{var Ht;(Ht=Ut.buffer)===null||Ht===void 0||Ht.subData({data:Ut.data,offset:0})}Ut.dirty=!1}}),gn.indices&&(gn.indicesBuffer?gn.indicesBuffer.subData({data:gn.indices,offset:0}):gn.indicesBuffer=Dt.engine.createElements({data:gn.indices,count:gn.indices.length,type:re.a.UNSIGNED_INT,usage:re.a.STATIC_DRAW})),gn.dirty=!1)});case 1:case"end":return Tt.stop()}},mt,this)}));function At(){return Wt.apply(this,arguments)}return At}()},{key:"tearDown",value:function(){this.geometry.forEach(function(At,mt){mt.indicesBuffer&&mt.indicesBuffer.destroy(),mt.attributes.forEach(function(Dt){Dt.buffer&&Dt.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},mt=At.vertexCount,Dt=Object(ae.createEntity)();return this.geometry.create(Dt,{vertexCount:mt})}},{key:"createInstancedBufferGeometry",value:function(At){var mt=At.maxInstancedCount,Dt=At.vertexCount,Ke=Object(ae.createEntity)();return this.geometry.create(Ke,{maxInstancedCount:mt,vertexCount:Dt})}}]),Ae}(),Ue),Te=K()(k.prototype,"geometry",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=K()(k.prototype,"engine",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k))||Ee)},function(j,_,u){"use strict";u.d(_,"a",function(){return ye});var g=u(7),f=u.n(g),E=u(9),T=u.n(E),w=u(10),D=u.n(w),O=u(24),L=u.n(O),U=u(25),V=u.n(U),z=u(26),K=u.n(z),J=u(20),he=u.n(J),ue=u(2),de=u(28);function ae(Z,Ee){var k=Object.keys(Z);if(Object.getOwnPropertySymbols){var Te=Object.getOwnPropertySymbols(Z);Ee&&(Te=Te.filter(function(De){return Object.getOwnPropertyDescriptor(Z,De).enumerable})),k.push.apply(k,Te)}return k}function le(Z){for(var Ee=1;Ee<arguments.length;Ee++){var k=arguments[Ee]!=null?arguments[Ee]:{};Ee%2?ae(Object(k),!0).forEach(function(Te){f()(Z,Te,k[Te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(k)):ae(Object(k)).forEach(function(Te){Object.defineProperty(Z,Te,Object.getOwnPropertyDescriptor(k,Te))})}return Z}function re(Z){var Ee=se();return function(){var Te=he()(Z),De;if(Ee){var Ue=he()(this).constructor;De=Reflect.construct(Te,arguments,Ue)}else De=Te.apply(this,arguments);return K()(this,De)}}function se(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Z){return!1}}var ye=function(Z){V()(k,Z);var Ee=re(k);function k(Te){var De;return T()(this,k),De=Ee.call(this,Te),De.vertexShaderGLSL=void 0,De.fragmentShaderGLSL=void 0,De.defines={},De.dirty=!0,De.uniforms=[],De.cull={enable:!0,face:ue.gl.BACK},De.depth={enable:!0},De.blend=void 0,De.entity=void 0,De.type=void 0,Object.assign(L()(De),Te),De}return D()(k,[{key:"setDefines",value:function(De){return this.defines=le(le({},this.defines),De),this}},{key:"setCull",value:function(De){return this.cull=De,this}},{key:"setDepth",value:function(De){return this.depth=De,this}},{key:"setBlend",value:function(De){return this.blend=De,this}},{key:"setUniform",value:function(De,Ue){var St=this;if(typeof De!="string")return Object.keys(De).forEach(function(Wt){return St.setUniform(Wt,De[Wt])}),this;var Ae=this.uniforms.find(function(Wt){return Wt.name===De});return Ae?(Ae.dirty=!0,Ae.data=Ue):this.uniforms.push({name:De,dirty:!0,data:Ue}),this.dirty=!0,this}}]),k}(de.a)},function(j,_,u){"use strict";u.d(_,"a",function(){return Dt});var g=u(7),f=u.n(g),E=u(13),T=u.n(E),w=u(19),D=u.n(w),O=u(14),L=u.n(O),U=u(9),V=u.n(U),z=u(10),K=u.n(z),J=u(15),he=u.n(J),ue=u(36),de=u.n(ue),ae=u(8),le=u.n(ae),re=u(2),se=u(16),ye,Z,Ee,k,Te,De,Ue,St,Ae,Wt;function At(Ke,Tt){var Gt=Object.keys(Ke);if(Object.getOwnPropertySymbols){var gn=Object.getOwnPropertySymbols(Ke);Tt&&(gn=gn.filter(function(Ut){return Object.getOwnPropertyDescriptor(Ke,Ut).enumerable})),Gt.push.apply(Gt,gn)}return Gt}function mt(Ke){for(var Tt=1;Tt<arguments.length;Tt++){var Gt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?At(Object(Gt),!0).forEach(function(gn){f()(Ke,gn,Gt[gn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ke,Object.getOwnPropertyDescriptors(Gt)):At(Object(Gt)).forEach(function(gn){Object.defineProperty(Ke,gn,Object.getOwnPropertyDescriptor(Gt,gn))})}return Ke}var Dt=(ye=Object(ae.injectable)(),Z=Object(ae.inject)(se.a.MaterialComponentManager),Ee=Object(ae.inject)(se.a.RenderEngine),k=Object(ae.inject)(se.a.ShaderModuleService),ye(Te=(De=(Wt=function(){function Ke(){V()(this,Ke),L()(this,"material",Ue,this),L()(this,"engine",St,this),L()(this,"shaderModule",Ae,this)}return K()(Ke,[{key:"execute",value:function(){var Tt=D()(T.a.mark(function gn(){return T.a.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:case"end":return Ht.stop()}},gn)}));function Gt(){return Tt.apply(this,arguments)}return Gt}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(Gt){var gn=Object(re.createEntity)(),Ut=Gt.vertexShader,Ht=Gt.fragmentShader,Rt=[];if(!this.engine.supportWebGPU){var Fe="material-".concat(gn);this.shaderModule.registerModule(Fe,{vs:Gt.vertexShader,fs:Gt.fragmentShader});var me=this.shaderModule.getModule(Fe);Ut=me.vs,Ht=me.fs,me.uniforms&&(Rt=Object.keys(me.uniforms).map(function(ze){return{dirty:!0,name:ze,data:me.uniforms[ze]}}))}return this.material.create(gn,mt(mt({vertexShaderGLSL:Ut,fragmentShaderGLSL:Ht},Gt),{},{uniforms:Rt}))}}]),Ke}(),Wt),Ue=he()(De.prototype,"material",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=he()(De.prototype,"engine",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=he()(De.prototype,"shaderModule",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De))||Te)},function(j,_,u){"use strict";u.d(_,"a",function(){return ue});var g=u(9),f=u.n(g),E=u(24),T=u.n(E),w=u(25),D=u.n(w),O=u(26),L=u.n(O),U=u(20),V=u.n(U),z=u(28);function K(de){var ae=J();return function(){var re=V()(de),se;if(ae){var ye=V()(this).constructor;se=Reflect.construct(re,arguments,ye)}else se=re.apply(this,arguments);return L()(this,se)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(de){return!1}}var he;(function(de){de[de.Standard=0]="Standard"})(he||(he={}));var ue=function(de){D()(le,de);var ae=K(le);function le(re){var se;return f()(this,le),se=ae.call(this,re),se.strategy=he.Standard,se.visibilityPlaneMask=0,se.visible=!1,Object.assign(T()(se),re),se}return le}(z.a)},function(j,_,u){"use strict";u.d(_,"a",function(){return ue});var g=u(9),f=u.n(g),E=u(24),T=u.n(E),w=u(25),D=u.n(w),O=u(26),L=u.n(O),U=u(20),V=u.n(U),z=u(28),K=u(87);function J(de){var ae=he();return function(){var re=V()(de),se;if(ae){var ye=V()(this).constructor;se=Reflect.construct(re,arguments,ye)}else se=re.apply(this,arguments);return L()(this,se)}}function he(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(de){return!1}}var ue=function(de){D()(le,de);var ae=J(le);function le(re){var se;return f()(this,le),se=ae.call(this,re),se.material=void 0,se.geometry=void 0,se.aabb=new K.a,se.aabbDirty=!0,se.model=void 0,se.visible=!0,se.children=[],Object.assign(T()(se),re),se}return le}(z.a)},function(j,_,u){"use strict";u.d(_,"a",function(){return Ut});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(14),D=u.n(w),O=u(9),L=u.n(O),U=u(10),V=u.n(U),z=u(15),K=u.n(z),J=u(36),he=u.n(J),ue=u(0),de=u(8),ae=u.n(de),le=u(16),re=u(66),se=u(146),ye,Z,Ee,k,Te,De,Ue,St,Ae,Wt,At,mt,Dt,Ke;function Tt(Ht,Rt){var Fe;if(typeof Symbol=="undefined"||Ht[Symbol.iterator]==null){if(Array.isArray(Ht)||(Fe=Gt(Ht))||Rt&&Ht&&typeof Ht.length=="number"){Fe&&(Ht=Fe);var me=0,ze=function(){};return{s:ze,n:function(){return me>=Ht.length?{done:!0}:{done:!1,value:Ht[me++]}},e:function(Qt){throw Qt},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Be=!0,ut=!1,xt;return{s:function(){Fe=Ht[Symbol.iterator]()},n:function(){var Qt=Fe.next();return Be=Qt.done,Qt},e:function(Qt){ut=!0,xt=Qt},f:function(){try{!Be&&Fe.return!=null&&Fe.return()}finally{if(ut)throw xt}}}}function Gt(Ht,Rt){if(!Ht)return;if(typeof Ht=="string")return gn(Ht,Rt);var Fe=Object.prototype.toString.call(Ht).slice(8,-1);if(Fe==="Object"&&Ht.constructor&&(Fe=Ht.constructor.name),Fe==="Map"||Fe==="Set")return Array.from(Ht);if(Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe))return gn(Ht,Rt)}function gn(Ht,Rt){(Rt==null||Rt>Ht.length)&&(Rt=Ht.length);for(var Fe=0,me=new Array(Rt);Fe<Rt;Fe++)me[Fe]=Ht[Fe];return me}var Ut=(ye=Object(de.injectable)(),Z=Object(de.inject)(le.a.MeshComponentManager),Ee=Object(de.inject)(le.a.CullableComponentManager),k=Object(de.inject)(le.a.GeometryComponentManager),Te=Object(de.inject)(le.a.HierarchyComponentManager),De=Object(de.inject)(le.a.TransformComponentManager),ye(Ue=(St=(Ke=function(){function Ht(){L()(this,Ht),D()(this,"mesh",Ae,this),D()(this,"cullable",Wt,this),D()(this,"geometry",At,this),D()(this,"hierarchy",mt,this),D()(this,"transform",Dt,this),this.planes=void 0}return V()(Ht,[{key:"setFrustumPlanes",value:function(Fe){this.planes=Fe}},{key:"execute",value:function(){var Rt=T()(f.a.mark(function me(ze){var Be,ut,xt,$t,Qt,on,Mn,Nn,qn,nr,xn,pn,pr,gr,Ce,Jn,Ln,yr,Un,$e,Re;return f.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:Be=Tt(ze);try{for(Be.s();!(ut=Be.n()).done;){xt=ut.value,$t=xt.getScene(),Qt=xt.getCamera(),on=Tt($t.getEntities());try{for(on.s();!(Mn=on.n()).done;)Nn=Mn.value,qn=this.mesh.getComponentByEntity(Nn),qn&&(nr=this.hierarchy.getComponentByEntity(Nn),xn=this.cullable.getComponentByEntity(Nn),pn=qn.geometry,pr=this.transform.getComponentByEntity(Nn),pn&&pn.aabb&&pr&&qn.aabbDirty&&(gr=pr.worldTransform,Ce=pn.aabb,Jn=Ce.center,Ln=Ce.halfExtents,yr=ue.d.transformMat4(ue.d.create(),Jn,gr),Un=Object(se.b)(gr,ue.a.create()),$e=ue.d.transformMat3(ue.d.create(),Ln,Un),qn.aabb.update(yr,$e),qn.aabbDirty=!1),xn&&pn&&(Re=this.cullable.getComponentByEntity((nr==null?void 0:nr.parentID)||-1),xn.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(qn.aabb,(Re==null?void 0:Re.visibilityPlaneMask)||re.b.INDETERMINATE,this.planes||Qt.getFrustum().planes),xn.visible=xn.visibilityPlaneMask!==re.b.OUTSIDE))}catch(gt){on.e(gt)}finally{on.f()}}}catch(gt){Be.e(gt)}finally{Be.f()}case 2:case"end":return tt.stop()}},me,this)}));function Fe(me){return Rt.apply(this,arguments)}return Fe}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(Fe,me,ze){if(me===re.b.OUTSIDE||me===re.b.INSIDE)return me;for(var Be=re.b.INSIDE,ut=0,xt=ze.length;ut<xt;++ut){var $t=ut<31?1<<ut:0;if(ut<31&&(me&$t)===0)continue;var Qt=ze[ut],on=Qt.normal,Mn=Qt.distance;if(ue.d.dot(on,Fe.getNegativeFarPoint(ze[ut]))+Mn>0)return re.b.OUTSIDE;ue.d.dot(on,Fe.getPositiveFarPoint(ze[ut]))+Mn>0&&(Be|=$t)}return Be}}]),Ht}(),Ke),Ae=K()(St.prototype,"mesh",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=K()(St.prototype,"cullable",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At=K()(St.prototype,"geometry",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=K()(St.prototype,"hierarchy",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=K()(St.prototype,"transform",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St))||Ue)},function(j,_,u){"use strict";u.d(_,"a",function(){return D});var g=u(9),f=u.n(g),E=u(10),T=u.n(E),w=u(0),D=function(){function O(L,U){f()(this,O),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=L||0,this.normal=U||w.d.fromValues(0,1,0),this.updatePNVertexFlag()}return T()(O,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(U){return w.d.dot(U,this.normal)-this.distance}},{key:"normalize",value:function(){var U=1/w.d.len(this.normal);w.d.scale(this.normal,this.normal,U),this.distance*=U}},{key:"intersectsLine",value:function(U,V,z){var K=this.distanceToPoint(U),J=this.distanceToPoint(V),he=K/(K-J),ue=he>=0&&he<=1;return ue&&z&&w.d.lerp(z,U,V,he),ue}}]),O}()},function(j,_,u){"use strict";u.d(_,"a",function(){return Ke});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(14),D=u.n(w),O=u(9),L=u.n(O),U=u(10),V=u.n(U),z=u(15),K=u.n(z),J=u(36),he=u.n(J),ue=u(8),de=u.n(ue),ae=u(16),le=u(91),re=u(79),se=u(61),ye,Z,Ee,k,Te,De,Ue,St,Ae,Wt,At,mt,Dt,Ke=(ye=Object(ue.injectable)(),Z=Object(ue.inject)(ae.a.Systems),Ee=Object(ue.named)(ae.a.FrameGraphSystem),k=Object(ue.inject)(ae.a.RenderPassFactory),Te=Object(ue.inject)(ae.a.ConfigService),De=Object(ue.inject)(ae.a.ResourcePool),ye(Ue=(St=(Dt=function(){function Tt(){L()(this,Tt),D()(this,"frameGraphSystem",Ae,this),D()(this,"renderPassFactory",Wt,this),D()(this,"configService",At,this),D()(this,"resourcePool",mt,this)}return V()(Tt,[{key:"execute",value:function(){var Gt=T()(f.a.mark(function Ut(Ht){var Rt,Fe,me,ze,Be,ut,xt,$t,Qt;return f.a.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:Rt=this.renderPassFactory(se.a.IDENTIFIER),Fe=Rt.setup,me=Rt.execute,ze=this.frameGraphSystem.addPass(se.a.IDENTIFIER,Fe,me),Be=this.renderPassFactory(le.a.IDENTIFIER),ut=Be.setup,xt=Be.execute,$t=Be.tearDown,Qt=this.frameGraphSystem.addPass(le.a.IDENTIFIER,ut,xt,$t),this.frameGraphSystem.present(Qt.data.output);case 5:case"end":return Mn.stop()}},Ut,this)}));function gn(Ut){return Gt.apply(this,arguments)}return gn}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(gn,Ut){var Ht=this.renderPassFactory(re.a.IDENTIFIER);return Ht.pick(gn,Ut)}}]),Tt}(),Dt),Ae=K()(St.prototype,"frameGraphSystem",[Z,Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=K()(St.prototype,"renderPassFactory",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At=K()(St.prototype,"configService",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=K()(St.prototype,"resourcePool",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St))||Ue)},function(j,_,u){"use strict";u.d(_,"a",function(){return he});var g=u(9),f=u.n(g),E=u(24),T=u.n(E),w=u(25),D=u.n(w),O=u(26),L=u.n(O),U=u(20),V=u.n(U),z=u(28);function K(ue){var de=J();return function(){var le=V()(ue),re;if(de){var se=V()(this).constructor;re=Reflect.construct(le,arguments,se)}else re=le.apply(this,arguments);return L()(this,re)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ue){return!1}}var he=function(ue){D()(ae,ue);var de=K(ae);function ae(le){var re;return f()(this,ae),re=de.call(this,le),re.parentID=void 0,Object.assign(T()(re),le),re}return ae}(z.a)},function(j,_,u){"use strict";u.d(_,"a",function(){return Ae});var g=u(13),f=u.n(g),E=u(19),T=u.n(E),w=u(14),D=u.n(w),O=u(9),L=u.n(O),U=u(10),V=u.n(U),z=u(15),K=u.n(z),J=u(36),he=u.n(J),ue=u(0),de=u(8),ae=u.n(de),le=u(16),re,se,ye,Z,Ee,k,Te,De,Ue,St,Ae=(re=Object(de.injectable)(),se=Object(de.inject)(le.a.HierarchyComponentManager),ye=Object(de.inject)(le.a.TransformComponentManager),Z=Object(de.inject)(le.a.MeshComponentManager),re(Ee=(k=(St=function(){function Wt(){L()(this,Wt),D()(this,"hierarchy",Te,this),D()(this,"transform",De,this),D()(this,"mesh",Ue,this)}return V()(Wt,[{key:"execute",value:function(){var At=T()(f.a.mark(function Dt(){return f.a.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return Tt.stop()}},Dt,this)}));function mt(){return At.apply(this,arguments)}return mt}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var mt=this;this.transform.forEach(function(Dt,Ke){(Ke.isDirty()||Ke.isLocalDirty())&&(mt.setMeshAABBDirty(mt.mesh.getComponentByEntity(Dt)),Ke.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var mt=this;this.hierarchy.forEach(function(Dt,Ke){var Tt=mt.transform.getComponentByEntity(Dt),Gt=mt.transform.getComponentByEntity(Ke.parentID);Tt!==null&&Gt!==null&&Tt.updateTransformWithParent(Gt)})}},{key:"attach",value:function(mt,Dt,Ke){this.hierarchy.contains(mt)&&this.detach(mt),this.hierarchy.create(mt,{parentID:Dt});var Tt=this.mesh.getComponentByEntity(Dt);if(this.setMeshAABBDirty(Tt),Tt&&Tt.children.indexOf(mt)===-1&&Tt.children.push(mt),this.hierarchy.getCount()>1)for(var Gt=this.hierarchy.getCount()-1;Gt>0;--Gt)for(var gn=this.hierarchy.getEntity(Gt),Ut=0;Ut<Gt;++Ut){var Ht=this.hierarchy.getComponent(Ut);if(Ht.parentID===gn){this.hierarchy.moveItem(Gt,Ut),++Gt;break}}var Rt=this.hierarchy.getComponentByEntity(mt),Fe=this.transform.getComponentByEntity(Dt);Fe===null&&(Fe=this.transform.create(Dt));var me=this.transform.getComponentByEntity(mt);me===null&&(me=this.transform.create(mt),Fe=this.transform.getComponentByEntity(Dt)),me.parent=Fe,!Ke&&Fe&&(me.matrixTransform(ue.b.invert(ue.b.create(),Fe.worldTransform)),me.updateTransform()),Fe&&me.updateTransformWithParent(Fe)}},{key:"detach",value:function(mt){var Dt=this.hierarchy.getComponentByEntity(mt);if(Dt!==null){var Ke=this.transform.getComponentByEntity(mt);Ke!==null&&(Ke.parent=null,Ke.applyTransform()),this.hierarchy.removeKeepSorted(mt);var Tt=this.mesh.getComponentByEntity(Dt.parentID);if(Tt){var Gt=Tt.children.indexOf(mt);Tt.children.splice(Gt,1)}this.setMeshAABBDirty(Tt)}}},{key:"detachChildren",value:function(mt){var Dt=this.mesh.getComponentByEntity(mt);Dt&&(Dt.children=[]);for(var Ke=0;Ke<this.hierarchy.getCount();){var Tt;if(((Tt=this.hierarchy.getComponent(Ke))===null||Tt===void 0?void 0:Tt.parentID)===mt){var Gt=this.hierarchy.getEntity(Ke);this.detach(Gt)}else++Ke}}},{key:"setMeshAABBDirty",value:function(mt){mt&&(mt.aabbDirty=!0)}}]),Wt}(),St),Te=K()(k.prototype,"hierarchy",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=K()(k.prototype,"transform",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=K()(k.prototype,"mesh",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k))||Ee)},function(j,_,u){"use strict";u.d(_,"a",function(){return ae});var g=u(9),f=u.n(g),E=u(10),T=u.n(E),w=u(24),D=u.n(w),O=u(25),L=u.n(O),U=u(26),V=u.n(U),z=u(20),K=u.n(z),J=u(0),he=u(28);function ue(le){var re=de();return function(){var ye=K()(le),Z;if(re){var Ee=K()(this).constructor;Z=Reflect.construct(ye,arguments,Ee)}else Z=ye.apply(this,arguments);return V()(this,Z)}}function de(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(le){return!1}}var ae=function(le){L()(se,le);var re=ue(se);function se(ye){var Z;return f()(this,se),Z=re.call(this,ye),Z.dirtyFlag=void 0,Z.localDirtyFlag=void 0,Z.parent=null,Z.localPosition=J.d.fromValues(0,0,0),Z.localRotation=J.c.fromValues(0,0,0,1),Z.localScale=J.d.fromValues(1,1,1),Z.localTransform=J.b.create(),Z.position=J.d.fromValues(0,0,0),Z.rotation=J.c.fromValues(0,0,0,1),Z.scaling=J.d.fromValues(1,1,1),Z.worldTransform=J.b.create(),Z.matrixTransform=function(){var Ee=J.b.create();return function(k){J.b.multiply(Ee,Z.getLocalTransform(),k),J.b.getScaling(Z.localScale,Ee),J.b.getTranslation(Z.localPosition,Ee),J.b.getRotation(Z.localRotation,Ee)}}(),Z.rotateRollPitchYaw=function(){var Ee=J.c.create(),k=J.c.create(),Te=J.c.create();return function(De,Ue,St){Z.setDirty(),J.c.fromEuler(Ee,De,0,0),J.c.fromEuler(k,0,Ue,0),J.c.fromEuler(Te,0,0,St),J.c.multiply(Z.localRotation,Ee,Z.localRotation),J.c.multiply(Z.localRotation,Z.localRotation,k),J.c.multiply(Z.localRotation,Te,Z.localRotation),J.c.normalize(Z.localRotation,Z.localRotation)}}(),Z.lerp=function(){var Ee=J.d.create(),k=J.c.create(),Te=J.d.create(),De=J.d.create(),Ue=J.c.create(),St=J.d.create();return function(Ae,Wt,At){Z.setDirty(),J.b.getScaling(Ee,Ae.worldTransform),J.b.getTranslation(Te,Ae.worldTransform),J.b.getRotation(k,Ae.worldTransform),J.b.getScaling(De,Wt.worldTransform),J.b.getTranslation(St,Wt.worldTransform),J.b.getRotation(Ue,Wt.worldTransform),J.d.lerp(Z.localScale,Ee,De,At),J.c.slerp(Z.localRotation,k,Ue,At),J.d.lerp(Z.localPosition,Te,St,At)}}(),Z.translate=function(){var Ee=J.d.create();return function(k){return J.d.add(Ee,Z.getPosition(),k),Z.setPosition(Ee),Z.setDirty(!0),D()(Z)}}(),Z.translateLocal=function(){return function(Ee){return J.d.transformQuat(Ee,Ee,Z.localRotation),J.d.add(Z.localPosition,Z.localPosition,Ee),Z.setLocalDirty(!0),D()(Z)}}(),Z.setPosition=function(){var Ee=J.b.create();return function(k){return Z.position=k,Z.setLocalDirty(!0),Z.parent===null?J.d.copy(Z.localPosition,k):(J.b.copy(Ee,Z.parent.worldTransform),J.b.invert(Ee,Ee),J.d.transformMat4(Z.localPosition,k,Ee)),D()(Z)}}(),Z.rotate=function(){var Ee=J.c.create();return function(k){if(Z.parent===null)J.c.multiply(Z.localRotation,Z.localRotation,k),J.c.normalize(Z.localRotation,Z.localRotation);else{var Te=Z.getRotation(),De=Z.parent.getRotation();J.c.copy(Ee,De),J.c.invert(Ee,Ee),J.c.multiply(Ee,Ee,k),J.c.multiply(Z.localRotation,k,Te),J.c.normalize(Z.localRotation,Z.localRotation)}return Z.setLocalDirty(),D()(Z)}}(),Z.rotateLocal=function(){return function(Ee){return J.c.multiply(Z.localRotation,Z.localRotation,Ee),J.c.normalize(Z.localRotation,Z.localRotation),Z.setLocalDirty(!0),D()(Z)}}(),Z.setRotation=function(){var Ee=J.c.create();return function(k){return Z.parent===null?J.c.copy(Z.localRotation,k):(J.c.copy(Ee,Z.parent.getRotation()),J.c.invert(Ee,Ee),J.c.copy(Z.localRotation,Ee),J.c.mul(Z.localRotation,Z.localRotation,k)),Z.setLocalDirty(!0),D()(Z)}}(),Z}return T()(se,[{key:"setLocalPosition",value:function(Z){J.d.copy(this.localPosition,Z),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(Z){J.d.copy(this.localScale,Z),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(Z){return J.c.copy(this.localRotation,Z),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Z?this.dirtyFlag|=se.DIRTY:this.dirtyFlag&=~se.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Z?(this.localDirtyFlag|=se.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~se.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&(this.parent===null&&(J.b.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1)))}},{key:"updateTransformWithParent",value:function(Z){J.b.multiply(this.worldTransform,Z.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),J.b.getScaling(this.localScale,this.worldTransform),J.b.getTranslation(this.localPosition,this.worldTransform),J.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=J.d.fromValues(0,0,0),this.localRotation=J.c.fromValues(0,0,0,1),this.localScale=J.d.fromValues(1,1,1)}},{key:"scaleLocal",value:function(Z){return this.setLocalDirty(),J.d.multiply(this.localScale,this.localScale,Z),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(J.b.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return J.b.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return J.b.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return J.b.getScaling(this.scaling,this.worldTransform),this.scaling}}]),se}(he.a);ae.DIRTY=1<<0},function(j,_,u){"use strict";u.d(_,"a",function(){return V});var g=u(9),f=u.n(g),E=u(10),T=u.n(E),w=u(8),D=u.n(w),O,L,U,V=(O=Object(w.injectable)(),O(L=(U=function(){function z(){f()(this,z),this.config=void 0}return T()(z,[{key:"get",value:function(){return this.config}},{key:"set",value:function(J){this.config=J}}]),z}(),U))||L)},function(j,_,u){"use strict";u.d(_,"a",function(){return V});var g=u(9),f=u.n(g),E=u(10),T=u.n(E),w=u(8),D=u.n(w),O,L,U;(function(z){z.PANSTART="PANSTART",z.PANEND="PANEND",z.PANMOVE="PANMOVE",z.PINCH="PINCH",z.KEYDOWN="KEYDOWN",z.KEYUP="KEYUP",z.HOVER="HOVER"})(U||(U={}));var V=(O=Object(w.injectable)(),O(L=function(){function z(){f()(this,z)}return T()(z,[{key:"listen",value:function(J){}},{key:"on",value:function(J,he){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),z}())||L)},function(j,_,u){"use strict";u.d(_,"a",function(){return Fe});var g=u(69),f=u.n(g),E=u(13),T=u.n(E),w=u(19),D=u.n(w),O=u(14),L=u.n(O),U=u(9),V=u.n(U),z=u(10),K=u.n(z),J=u(15),he=u.n(J),ue=u(36),de=u(8),ae=u(16),le=function me(){V()(this,me),this.index=void 0},re=function me(){V()(this,me),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},se=function(){function me(){V()(this,me),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return K()(me,[{key:"read",value:function(Be){return this.reads.find(function(ut){return ut.index===Be.index})||this.reads.push(Be),Be}},{key:"sample",value:function(Be){return this.read(Be),Be}},{key:"write",value:function(Be,ut){var xt=this.writes.find(function(Mn){return Mn.index===ut.index});if(xt)return ut;var $t=Be.getResourceNode(ut);$t.resource.version++,$t.resource.imported&&(this.hasSideEffect=!0);var Qt=Be.createResourceNode($t.resource),on=Be.getResourceNode(Qt);return on.writer=this,this.writes.push(Qt),Qt}}]),me}(),ye=u(25),Z=u.n(ye),Ee=u(26),k=u.n(Ee),Te=u(20),De=u.n(Te),Ue=function me(){V()(this,me),this.first=void 0,this.last=void 0};function St(me){var ze=Ae();return function(){var ut=De()(me),xt;if(ze){var $t=De()(this).constructor;xt=Reflect.construct(ut,arguments,$t)}else xt=ut.apply(this,arguments);return k()(this,xt)}}function Ae(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(me){return!1}}var Wt=function(me){Z()(Be,me);var ze=St(Be);function Be(){var ut;V()(this,Be);for(var xt=arguments.length,$t=new Array(xt),Qt=0;Qt<xt;Qt++)$t[Qt]=arguments[Qt];return ut=ze.call.apply(ze,[this].concat($t)),ut.version=0,ut.refs=0,ut.name=void 0,ut.imported=void 0,ut.priority=void 0,ut.discardStart=!0,ut.discardEnd=!1,ut.descriptor=void 0,ut.resource=void 0,ut}return K()(Be,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),Be}(Ue),At=function me(){V()(this,me),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},mt,Dt,Ke,Tt,Gt,gn;function Ut(me,ze){var Be;if(typeof Symbol=="undefined"||me[Symbol.iterator]==null){if(Array.isArray(me)||(Be=Ht(me))||ze&&me&&typeof me.length=="number"){Be&&(me=Be);var ut=0,xt=function(){};return{s:xt,n:function(){return ut>=me.length?{done:!0}:{done:!1,value:me[ut++]}},e:function(Nn){throw Nn},f:xt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $t=!0,Qt=!1,on;return{s:function(){Be=me[Symbol.iterator]()},n:function(){var Nn=Be.next();return $t=Nn.done,Nn},e:function(Nn){Qt=!0,on=Nn},f:function(){try{!$t&&Be.return!=null&&Be.return()}finally{if(Qt)throw on}}}}function Ht(me,ze){if(!me)return;if(typeof me=="string")return Rt(me,ze);var Be=Object.prototype.toString.call(me).slice(8,-1);if(Be==="Object"&&me.constructor&&(Be=me.constructor.name),Be==="Map"||Be==="Set")return Array.from(me);if(Be==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Be))return Rt(me,ze)}function Rt(me,ze){(ze==null||ze>me.length)&&(ze=me.length);for(var Be=0,ut=new Array(ze);Be<ze;Be++)ut[Be]=me[Be];return ut}var Fe=(mt=Object(de.injectable)(),Dt=Object(de.inject)(ae.a.RenderEngine),mt(Ke=(Tt=(gn=function(){function me(){V()(this,me),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],L()(this,"engine",Gt,this)}return K()(me,[{key:"execute",value:function(){var ze=D()(T.a.mark(function ut(xt){return T.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:return this.compile(),Qt.next=3,this.executePassNodes(xt);case 3:case"end":return Qt.stop()}},ut,this)}));function Be(ut){return ze.apply(this,arguments)}return Be}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(Be){Be.tearDown&&Be.tearDown()}),this.reset()}},{key:"addPass",value:function(Be,ut,xt,$t){var Qt=new re;Qt.execute=xt,$t&&(Qt.tearDown=$t),Qt.name=Be;var on=new se;return on.name=Be,this.passNodes.push(on),this.frameGraphPasses.push(Qt),ut(this,on,Qt),Qt}},{key:"getPass",value:function(Be){return this.frameGraphPasses.find(function(ut){return ut.name===Be})}},{key:"compile",value:function(){var Be=this,ut=Ut(this.passNodes),xt;try{for(ut.s();!(xt=ut.n()).done;){var $t=xt.value;$t.refCount=$t.writes.length+($t.hasSideEffect?1:0),$t.reads.forEach(function(vr){Be.resourceNodes[vr.index].readerCount++})}}catch(vr){ut.e(vr)}finally{ut.f()}var Qt=[],on=Ut(this.resourceNodes),Mn;try{for(on.s();!(Mn=on.n()).done;){var Nn=Mn.value;Nn.readerCount===0&&Qt.push(Nn)}}catch(vr){on.e(vr)}finally{on.f()}for(;Qt.length;){var qn=Qt.pop(),nr=qn&&qn.writer;if(nr&&--nr.refCount===0){var xn=Ut(nr.reads),pn;try{for(xn.s();!(pn=xn.n()).done;){var pr=pn.value,gr=this.resourceNodes[pr.index];--gr.readerCount===0&&Qt.push(gr)}}catch(vr){xn.e(vr)}finally{xn.f()}}}this.resourceNodes.forEach(function(vr){vr.resource.refs+=vr.readerCount});var Ce=Ut(this.passNodes),Jn;try{for(Ce.s();!(Jn=Ce.n()).done;){var Ln=Jn.value;if(!Ln.refCount)continue;var yr=Ut(Ln.reads),Un;try{for(yr.s();!(Un=yr.n()).done;){var $e=Un.value,Re=this.resourceNodes[$e.index].resource;Re.first=Re.first?Re.first:Ln,Re.last=Ln}}catch(vr){yr.e(vr)}finally{yr.f()}var Ye=Ut(Ln.writes),tt;try{for(Ye.s();!(tt=Ye.n()).done;){var gt=tt.value,kt=this.resourceNodes[gt.index].resource;kt.first=kt.first?kt.first:Ln,kt.last=Ln}}catch(vr){Ye.e(vr)}finally{Ye.f()}}}catch(vr){Ce.e(vr)}finally{Ce.f()}for(var Pe=0;Pe<2;Pe++){var pt=Ut(this.resourceNodes),st;try{for(pt.s();!(st=pt.n()).done;){var Ft=st.value,An=Ft.resource;if(An.priority===Pe&&An.refs){var Gn=An.first,Yn=An.last;Gn&&Yn&&(Gn.devirtualize.push(An),Yn.destroy.push(An))}}}catch(vr){pt.e(vr)}finally{pt.f()}}}},{key:"executePassNodes",value:function(){var ze=D()(T.a.mark(function ut(xt){var $t,Qt,on,Mn,Nn,qn,nr,xn,pn,pr,gr,Ce,Jn,Ln,yr,Un,$e;return T.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:$t=Ut(this.passNodes.entries()),Ye.prev=1,$t.s();case 3:if((Qt=$t.n()).done){Ye.next=18;break}if(on=f()(Qt.value,2),Mn=on[0],Nn=on[1],!Nn.refCount){Ye.next=16;break}qn=Ut(Nn.devirtualize);try{for(qn.s();!(nr=qn.n()).done;)xn=nr.value,xn.preExecuteDevirtualize(this.engine)}catch(tt){qn.e(tt)}finally{qn.f()}pn=Ut(Nn.destroy);try{for(pn.s();!(pr=pn.n()).done;)gr=pr.value,gr.preExecuteDestroy(this.engine)}catch(tt){pn.e(tt)}finally{pn.f()}return Ye.next=12,this.frameGraphPasses[Mn].execute(this,this.frameGraphPasses[Mn],xt);case 12:Ce=Ut(Nn.devirtualize);try{for(Ce.s();!(Jn=Ce.n()).done;)Ln=Jn.value,Ln.postExecuteDevirtualize(this.engine)}catch(tt){Ce.e(tt)}finally{Ce.f()}yr=Ut(Nn.destroy);try{for(yr.s();!(Un=yr.n()).done;)$e=Un.value,$e.postExecuteDestroy(this.engine)}catch(tt){yr.e(tt)}finally{yr.f()}case 16:Ye.next=3;break;case 18:Ye.next=23;break;case 20:Ye.prev=20,Ye.t0=Ye.catch(1),$t.e(Ye.t0);case 23:return Ye.prev=23,$t.f(),Ye.finish(23);case 26:this.reset();case 27:case"end":return Ye.stop()}},ut,this,[[1,20,23,26]])}));function Be(ut){return ze.apply(this,arguments)}return Be}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(Be){return this.resourceNodes[Be.index]}},{key:"createResourceNode",value:function(Be){var ut=new At;ut.resource=Be,ut.version=Be.version,this.resourceNodes.push(ut);var xt=new le;return xt.index=this.resourceNodes.length-1,xt}},{key:"createTexture",value:function(Be,ut,xt){var $t=new Wt;return $t.name=ut,$t.descriptor=xt,this.createResourceNode($t)}},{key:"createRenderTarget",value:function(Be,ut,xt){var $t=new Wt;return $t.name=ut,$t.descriptor=xt,this.createResourceNode($t)}},{key:"present",value:function(Be){this.addPass("Present",function(ut,xt){xt.read(Be),xt.hasSideEffect=!0},D()(T.a.mark(function ut(){return T.a.wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:case"end":return $t.stop()}},ut)})))}}]),me}(),gn),Gt=he()(Tt.prototype,"engine",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt))||Ke)},function(j,_,u){"use strict";u.d(_,"a",function(){return Ee});var g=u(7),f=u.n(g),E=u(9),T=u.n(E),w=u(10),D=u.n(w),O=u(8);function L(k){var Te=0;switch(k){case"vec2":case"ivec2":Te=2;break;case"vec3":case"ivec3":Te=3;break;case"vec4":case"ivec4":case"mat2":Te=4;break;case"mat3":Te=9;break;case"mat4":Te=16;break;default:}return Te}var U=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function V(k){var Te={};return k=k.replace(U,function(De,Ue,St){var Ae=St.split(":"),Wt=Ae[0].trim(),At="";Ae.length>1&&(At=Ae[1].trim());switch(Ue){case"bool":At=At==="true";break;case"float":case"int":At=Number(At);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":At?At=At.replace("[","").replace("]","").split(",").reduce(function(mt,Dt){return mt.push(Number(Dt.trim())),mt},[]):At=new Array(L(Ue)).fill(0);break;default:}return Te[Wt]=At,"uniform ".concat(Ue," ").concat(Wt,`;
`)}),{content:k,uniforms:Te}}function z(k){return k.filter(function(Te,De,Ue){return Ue.indexOf(Te)===De})}var K,J,he;function ue(k,Te){var De=Object.keys(k);if(Object.getOwnPropertySymbols){var Ue=Object.getOwnPropertySymbols(k);Te&&(Ue=Ue.filter(function(St){return Object.getOwnPropertyDescriptor(k,St).enumerable})),De.push.apply(De,Ue)}return De}function de(k){for(var Te=1;Te<arguments.length;Te++){var De=arguments[Te]!=null?arguments[Te]:{};Te%2?ue(Object(De),!0).forEach(function(Ue){f()(k,Ue,De[Ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(De)):ue(Object(De)).forEach(function(Ue){Object.defineProperty(k,Ue,Object.getOwnPropertyDescriptor(De,Ue))})}return k}var ae=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,le=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,re=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,se=/precision\s+(high|low|medium)p\s+float/,ye=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Z=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Ee=(K=Object(O.injectable)(),K(J=(he=function(){function k(){T()(this,k),this.moduleCache={},this.rawContentCache={}}return D()(k,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:le,fs:ae}),this.registerModule("sdf2d",{vs:"",fs:re})}},{key:"registerModule",value:function(De,Ue){if(this.rawContentCache[De])return;var St=Ue.vs,Ae=St===void 0?"":St,Wt=Ue.fs,At=Wt===void 0?"":Wt,mt=Ue.uniforms,Dt=V(Ae),Ke=Dt.content,Tt=Dt.uniforms,Gt=V(At),gn=Gt.content,Ut=Gt.uniforms;this.rawContentCache[De]={fs:gn,uniforms:de(de(de({},Tt),Ut),mt),vs:Ke}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(De){var Ue=this;if(this.moduleCache[De])return this.moduleCache[De];var St=this.rawContentCache[De].vs||"",Ae=this.rawContentCache[De].fs||"",Wt=this.processModule(St,[],"vs"),At=Wt.content,mt=Wt.includeList,Dt=this.processModule(Ae,[],"fs"),Ke=Dt.content,Tt=Dt.includeList,Gt=Ke,gn=z(mt.concat(Tt).concat(De)).reduce(function(Ut,Ht){return de(de({},Ut),Ue.rawContentCache[Ht].uniforms)},{});return se.test(Ke)||(Gt=ye+Ke),this.moduleCache[De]={fs:Gt.trim(),uniforms:gn,vs:At.trim()},this.moduleCache[De]}},{key:"processModule",value:function(De,Ue,St){var Ae=this,Wt=De.replace(Z,function(At,mt){var Dt=mt.split(" "),Ke=Dt[0].replace(/"/g,"");if(Ue.indexOf(Ke)>-1)return"";var Tt=Ae.rawContentCache[Ke][St];Ue.push(Ke);var Gt=Ae.processModule(Tt||"",Ue,St),gn=Gt.content;return gn});return{content:Wt,includeList:Ue}}}]),k}(),he))||J)},function(j,_,u){"use strict";u.d(_,"a",function(){return pr});var g=u(7),f=u.n(g),E=u(9),T=u.n(E),w=u(10),D=u.n(w),O=u(24),L=u.n(O),U=u(25),V=u.n(U),z=u(26),K=u.n(z),J=u(20),he=u.n(J),ue=u(0),de=u(28),ae=u(41),le=u.n(ae),re=9007199254740991,se="[object Arguments]",ye="[object Array]",Z="[object Boolean]",Ee="[object Date]",k="[object Error]",Te="[object Function]",De="[object Map]",Ue="[object Number]",St="[object Object]",Ae="[object RegExp]",Wt="[object Set]",At="[object String]",mt="[object WeakMap]",Dt="[object ArrayBuffer]",Ke="[object DataView]",Tt="[object Float32Array]",Gt="[object Float64Array]",gn="[object Int8Array]",Ut="[object Int16Array]",Ht="[object Int32Array]",Rt="[object Uint8Array]",Fe="[object Uint8ClampedArray]",me="[object Uint16Array]",ze="[object Uint32Array]",Be={};Be[Tt]=Be[Gt]=Be[gn]=Be[Ut]=Be[Ht]=Be[Rt]=Be[Fe]=Be[me]=Be[ze]=!0,Be[se]=Be[ye]=Be[Dt]=Be[Z]=Be[Ke]=Be[Ee]=Be[k]=Be[Te]=Be[De]=Be[Ue]=Be[St]=Be[Ae]=Be[Wt]=Be[At]=Be[mt]=!1;function ut(gr){return function(Ce){return gr(Ce)}}var xt=Object.prototype,$t=xt.toString;function Qt(gr){return Mn(gr)&&on(gr.length)&&!!Be[$t.call(gr)]}function on(gr){return typeof gr=="number"&&gr>-1&&gr%1===0&&gr<=re}function Mn(gr){return!!gr&&le()(gr)==="object"}var Nn=Qt;function qn(gr,Ce){var Jn=Object.keys(gr);if(Object.getOwnPropertySymbols){var Ln=Object.getOwnPropertySymbols(gr);Ce&&(Ln=Ln.filter(function(yr){return Object.getOwnPropertyDescriptor(gr,yr).enumerable})),Jn.push.apply(Jn,Ln)}return Jn}function nr(gr){for(var Ce=1;Ce<arguments.length;Ce++){var Jn=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?qn(Object(Jn),!0).forEach(function(Ln){f()(gr,Ln,Jn[Ln])}):Object.getOwnPropertyDescriptors?Object.defineProperties(gr,Object.getOwnPropertyDescriptors(Jn)):qn(Object(Jn)).forEach(function(Ln){Object.defineProperty(gr,Ln,Object.getOwnPropertyDescriptor(Jn,Ln))})}return gr}function xn(gr){var Ce=pn();return function(){var Ln=he()(gr),yr;if(Ce){var Un=he()(this).constructor;yr=Reflect.construct(Ln,arguments,Un)}else yr=Ln.apply(this,arguments);return K()(this,yr)}}function pn(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(gr){return!1}}var pr=function(gr){V()(Jn,gr);var Ce=xn(Jn);function Jn(Ln){var yr;return T()(this,Jn),yr=Ce.call(this,Ln),yr.dirty=!0,yr.attributes=[],yr.indices=void 0,yr.indicesBuffer=void 0,yr.vertexCount=0,yr.maxInstancedCount=void 0,yr.aabb=void 0,yr.entity=void 0,Object.assign(L()(yr),Ln),yr}return D()(Jn,[{key:"setAttribute",value:function(yr,Un,$e,Re){var Ye=this.attributes.find(function(tt){return tt.name===yr});return Ye?(Ye.data=Un,Ye.dirty=!0):this.attributes.push(nr(nr({dirty:!0,name:yr,data:Un},$e),{},{bufferGetter:Re})),this.dirty=!0,this}},{key:"setIndex",value:function(yr){return this.indices=new Uint32Array(yr.buffer?yr.buffer:yr),this.dirty=!0,this}},{key:"applyMatrix",value:function(yr){var Un=this.attributes.find(function(Pe){var pt=Pe.name;return pt==="position"}),$e=this.attributes.find(function(Pe){var pt=Pe.name;return pt==="normal"});if(Un&&(Un.dirty=!0,Un.data&&Un.data.length))for(var Re=0;Re<Un.data.length;Re+=3){var Ye=ue.e.fromValues(Un.data[Re],Un.data[Re+1],Un.data[Re+2],1);ue.e.transformMat4(Ye,Ye,yr),Nn(Un.data)?Un.data.set([Ye[0],Ye[1],Ye[2]],Re):(Un.data[Re]=Ye[0],Un.data[Re+1]=Ye[1],Un.data[Re+2]=Ye[2])}if($e){var tt=ue.a.normalFromMat4(ue.a.create(),yr);if($e.data&&$e.data.length)for(var gt=0;gt<$e.data.length;gt+=3){var kt=ue.d.fromValues($e.data[gt],$e.data[gt+1],$e.data[gt+2]);ue.d.transformMat3(kt,kt,tt),ue.d.normalize(kt,kt),Nn($e.data)?$e.data.set([kt[0],kt[1],kt[2]],gt):($e.data[gt]=kt[0],$e.data[gt+1]=kt[1],$e.data[gt+2]=kt[2])}}}}]),Jn}(de.a)},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}},function(j,_,u){"use strict";u.d(_,"a",function(){return E});var g=u(53),f=u.n(g);function E(T){return T instanceof HTMLElement?T:f.a.findDOMNode(T)}},function(j,_,u){"use strict";var g=u(1),f=u.n(g),E=Object(g.createContext)({});_.a=E},function(j,_,u){"use strict";(function(g){var f=typeof g=="object"&&g&&g.Object===Object&&g;_.a=f}).call(this,u(93))},function(j,_,u){"use strict";(function(g){var f=u(30),E=typeof exports=="object"&&exports&&!exports.nodeType&&exports,T=E&&typeof g=="object"&&g&&!g.nodeType&&g,w=T&&T.exports===E,D=w?f.a.Buffer:void 0,O=D?D.allocUnsafe:void 0;function L(U,V){if(V)return U.slice();var z=U.length,K=O?O(z):new U.constructor(z);return U.copy(K),K}_.a=L}).call(this,u(147)(j))},function(j,_,u){"use strict";u.d(_,"a",function(){return w});function g(D){if(Array.isArray(D))return D}function f(D,O){if(typeof Symbol=="undefined"||!(Symbol.iterator in Object(D)))return;var L=[],U=!0,V=!1,z=void 0;try{for(var K=D[Symbol.iterator](),J;!(U=(J=K.next()).done)&&!(L.push(J.value),O&&L.length===O);U=!0);}catch(he){V=!0,z=he}finally{try{!U&&K.return!=null&&K.return()}finally{if(V)throw z}}return L}var E=u(88);function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(D,O){return g(D)||f(D,O)||Object(E.a)(D,O)||T()}},function(j,_,u){"use strict";u.d(_,"b",function(){return O}),u.d(_,"a",function(){return L});var g=u(69),f=u.n(g),E=u(0);function T(V){return typeof V=="number"}function w(V){return V===void 0?0:V>360||V<-360?V%360:V}function D(V,z,K){return T(V)?E.d.fromValues(V,z,K):V.length===3?E.d.clone(V):E.d.fromValues(V[0],V[1],V[2])}function O(V,z){return z[0]=V[0],z[1]=V[1],z[2]=V[2],z[3]=V[4],z[4]=V[5],z[5]=V[6],z[6]=V[8],z[7]=V[9],z[8]=V[10],z}function L(V){var z=f()(V,3),K=z[0],J=z[1],he=z[2],ue=K+J*256+he*65536-1;return ue}function U(V){return[V+1&255,V+1>>8&255,V+1>>8>>8&255]}},function(j,_){j.exports=function(u){if(!u.webpackPolyfill){var g=Object.create(u);g.children||(g.children=[]),Object.defineProperty(g,"loaded",{enumerable:!0,get:function(){return g.l}}),Object.defineProperty(g,"id",{enumerable:!0,get:function(){return g.i}}),Object.defineProperty(g,"exports",{enumerable:!0}),g.webpackPolyfill=1}return g}},function(j,_,u){"use strict";var g=u(47);j.exports=w;var f="\0",E="\0",T="";function w(z){this._isDirected=g.has(z,"directed")?z.directed:!0,this._isMultigraph=g.has(z,"multigraph")?z.multigraph:!1,this._isCompound=g.has(z,"compound")?z.compound:!1,this._label=void 0,this._defaultNodeLabelFn=g.constant(void 0),this._defaultEdgeLabelFn=g.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[E]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}w.prototype._nodeCount=0,w.prototype._edgeCount=0,w.prototype.isDirected=function(){return this._isDirected},w.prototype.isMultigraph=function(){return this._isMultigraph},w.prototype.isCompound=function(){return this._isCompound},w.prototype.setGraph=function(z){return this._label=z,this},w.prototype.graph=function(){return this._label},w.prototype.setDefaultNodeLabel=function(z){return g.isFunction(z)||(z=g.constant(z)),this._defaultNodeLabelFn=z,this},w.prototype.nodeCount=function(){return this._nodeCount},w.prototype.nodes=function(){return g.keys(this._nodes)},w.prototype.sources=function(){var z=this;return g.filter(this.nodes(),function(K){return g.isEmpty(z._in[K])})},w.prototype.sinks=function(){var z=this;return g.filter(this.nodes(),function(K){return g.isEmpty(z._out[K])})},w.prototype.setNodes=function(z,K){var J=arguments,he=this;return g.each(z,function(ue){J.length>1?he.setNode(ue,K):he.setNode(ue)}),this},w.prototype.setNode=function(z,K){return g.has(this._nodes,z)?(arguments.length>1&&(this._nodes[z]=K),this):(this._nodes[z]=arguments.length>1?K:this._defaultNodeLabelFn(z),this._isCompound&&(this._parent[z]=E,this._children[z]={},this._children[E][z]=!0),this._in[z]={},this._preds[z]={},this._out[z]={},this._sucs[z]={},++this._nodeCount,this)},w.prototype.node=function(z){return this._nodes[z]},w.prototype.hasNode=function(z){return g.has(this._nodes,z)},w.prototype.removeNode=function(z){var K=this;if(g.has(this._nodes,z)){var J=function(ue){K.removeEdge(K._edgeObjs[ue])};delete this._nodes[z],this._isCompound&&(this._removeFromParentsChildList(z),delete this._parent[z],g.each(this.children(z),function(he){K.setParent(he)}),delete this._children[z]),g.each(g.keys(this._in[z]),J),delete this._in[z],delete this._preds[z],g.each(g.keys(this._out[z]),J),delete this._out[z],delete this._sucs[z],--this._nodeCount}return this},w.prototype.setParent=function(z,K){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(g.isUndefined(K))K=E;else{K+="";for(var J=K;!g.isUndefined(J);J=this.parent(J))if(J===z)throw new Error("Setting "+K+" as parent of "+z+" would create a cycle");this.setNode(K)}return this.setNode(z),this._removeFromParentsChildList(z),this._parent[z]=K,this._children[K][z]=!0,this},w.prototype._removeFromParentsChildList=function(z){delete this._children[this._parent[z]][z]},w.prototype.parent=function(z){if(this._isCompound){var K=this._parent[z];if(K!==E)return K}},w.prototype.children=function(z){if(g.isUndefined(z)&&(z=E),this._isCompound){var K=this._children[z];if(K)return g.keys(K)}else{if(z===E)return this.nodes();if(this.hasNode(z))return[]}},w.prototype.predecessors=function(z){var K=this._preds[z];if(K)return g.keys(K)},w.prototype.successors=function(z){var K=this._sucs[z];if(K)return g.keys(K)},w.prototype.neighbors=function(z){var K=this.predecessors(z);if(K)return g.union(K,this.successors(z))},w.prototype.isLeaf=function(z){var K;return this.isDirected()?K=this.successors(z):K=this.neighbors(z),K.length===0},w.prototype.filterNodes=function(z){var K=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});K.setGraph(this.graph());var J=this;g.each(this._nodes,function(de,ae){z(ae)&&K.setNode(ae,de)}),g.each(this._edgeObjs,function(de){K.hasNode(de.v)&&K.hasNode(de.w)&&K.setEdge(de,J.edge(de))});var he={};function ue(de){var ae=J.parent(de);return ae===void 0||K.hasNode(ae)?(he[de]=ae,ae):ae in he?he[ae]:ue(ae)}return this._isCompound&&g.each(K.nodes(),function(de){K.setParent(de,ue(de))}),K},w.prototype.setDefaultEdgeLabel=function(z){return g.isFunction(z)||(z=g.constant(z)),this._defaultEdgeLabelFn=z,this},w.prototype.edgeCount=function(){return this._edgeCount},w.prototype.edges=function(){return g.values(this._edgeObjs)},w.prototype.setPath=function(z,K){var J=this,he=arguments;return g.reduce(z,function(ue,de){return he.length>1?J.setEdge(ue,de,K):J.setEdge(ue,de),de}),this},w.prototype.setEdge=function(){var z,K,J,he,ue=!1,de=arguments[0];typeof de=="object"&&de!==null&&"v"in de?(z=de.v,K=de.w,J=de.name,arguments.length===2&&(he=arguments[1],ue=!0)):(z=de,K=arguments[1],J=arguments[3],arguments.length>2&&(he=arguments[2],ue=!0)),z=""+z,K=""+K,g.isUndefined(J)||(J=""+J);var ae=L(this._isDirected,z,K,J);if(g.has(this._edgeLabels,ae))return ue&&(this._edgeLabels[ae]=he),this;if(!g.isUndefined(J)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(z),this.setNode(K),this._edgeLabels[ae]=ue?he:this._defaultEdgeLabelFn(z,K,J);var le=U(this._isDirected,z,K,J);return z=le.v,K=le.w,Object.freeze(le),this._edgeObjs[ae]=le,D(this._preds[K],z),D(this._sucs[z],K),this._in[K][ae]=le,this._out[z][ae]=le,this._edgeCount++,this},w.prototype.edge=function(z,K,J){var he=arguments.length===1?V(this._isDirected,arguments[0]):L(this._isDirected,z,K,J);return this._edgeLabels[he]},w.prototype.hasEdge=function(z,K,J){var he=arguments.length===1?V(this._isDirected,arguments[0]):L(this._isDirected,z,K,J);return g.has(this._edgeLabels,he)},w.prototype.removeEdge=function(z,K,J){var he=arguments.length===1?V(this._isDirected,arguments[0]):L(this._isDirected,z,K,J),ue=this._edgeObjs[he];return ue&&(z=ue.v,K=ue.w,delete this._edgeLabels[he],delete this._edgeObjs[he],O(this._preds[K],z),O(this._sucs[z],K),delete this._in[K][he],delete this._out[z][he],this._edgeCount--),this},w.prototype.inEdges=function(z,K){var J=this._in[z];if(J){var he=g.values(J);return K?g.filter(he,function(ue){return ue.v===K}):he}},w.prototype.outEdges=function(z,K){var J=this._out[z];if(J){var he=g.values(J);return K?g.filter(he,function(ue){return ue.w===K}):he}},w.prototype.nodeEdges=function(z,K){var J=this.inEdges(z,K);if(J)return J.concat(this.outEdges(z,K))};function D(z,K){z[K]?z[K]++:z[K]=1}function O(z,K){--z[K]||delete z[K]}function L(z,K,J,he){var ue=""+K,de=""+J;if(!z&&ue>de){var ae=ue;ue=de,de=ae}return ue+T+de+T+(g.isUndefined(he)?f:he)}function U(z,K,J,he){var ue=""+K,de=""+J;if(!z&&ue>de){var ae=ue;ue=de,de=ae}var le={v:ue,w:de};return he&&(le.name=he),le}function V(z,K){return L(z,K.v,K.w,K.name)}},function(j,_,u){var g=u(74),f=u(51),E=g(f,"Map");j.exports=E},function(j,_,u){var g=u(331),f=u(338),E=u(340),T=u(341),w=u(342);function D(O){var L=-1,U=O==null?0:O.length;for(this.clear();++L<U;){var V=O[L];this.set(V[0],V[1])}}D.prototype.clear=g,D.prototype.delete=f,D.prototype.get=E,D.prototype.has=T,D.prototype.set=w,j.exports=D},function(j,_){function u(g,f){for(var E=-1,T=g==null?0:g.length;++E<T&&!(f(g[E],E,g)===!1););return g}j.exports=u},function(j,_){j.exports=function(u){return u.webpackPolyfill||(u.deprecate=function(){},u.paths=[],u.children||(u.children=[]),Object.defineProperty(u,"loaded",{enumerable:!0,get:function(){return u.l}}),Object.defineProperty(u,"id",{enumerable:!0,get:function(){return u.i}}),u.webpackPolyfill=1),u}},function(j,_){var u=9007199254740991;function g(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=u}j.exports=g},function(j,_,u){(function(g){var f=u(176),E=_&&!_.nodeType&&_,T=E&&typeof g=="object"&&g&&!g.nodeType&&g,w=T&&T.exports===E,D=w&&f.process,O=function(){try{var L=T&&T.require&&T.require("util").types;return L||D&&D.binding&&D.binding("util")}catch(U){}}();g.exports=O}).call(this,u(152)(j))},function(j,_,u){var g=u(112),f=u(348),E=Object.prototype,T=E.hasOwnProperty;function w(D){if(!g(D))return f(D);var O=[];for(var L in Object(D))T.call(D,L)&&L!="constructor"&&O.push(L);return O}j.exports=w},function(j,_,u){var g=u(183),f=u(184),E=Object.prototype,T=E.propertyIsEnumerable,w=Object.getOwnPropertySymbols,D=w?function(O){return O==null?[]:(O=Object(O),g(w(O),function(L){return T.call(O,L)}))}:f;j.exports=D},function(j,_){function u(g,f){for(var E=-1,T=f.length,w=g.length;++E<T;)g[w+E]=f[E];return g}j.exports=u},function(j,_,u){var g=u(189);function f(E){var T=new E.constructor(E.byteLength);return new g(T).set(new g(E)),T}j.exports=f},function(j,_){function u(g){return function(){return g}}j.exports=u},function(j,_,u){var g=u(161),f=u(67);function E(T,w){return T&&g(T,w,f)}j.exports=E},function(j,_,u){var g=u(367),f=g();j.exports=f},function(j,_){function u(g){var f=-1,E=Array(g.size);return g.forEach(function(T){E[++f]=T}),E}j.exports=u},function(j,_,u){var g=u(37),f=u(86),E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/;function w(D,O){if(g(D))return!1;var L=typeof D;return L=="number"||L=="symbol"||L=="boolean"||D==null||f(D)?!0:T.test(D)||!E.test(D)||O!=null&&D in Object(O)}j.exports=w},function(j,_,u){var g=u(157),f=u(401);function E(T,w,D,O,L){var U=-1,V=T.length;for(D||(D=f),L||(L=[]);++U<V;){var z=T[U];w>0&&D(z)?w>1?E(z,w-1,D,O,L):g(L,z):O||(L[L.length]=z)}return L}j.exports=E},function(j,_,u){var g=u(86);function f(E,T,w){for(var D=-1,O=E.length;++D<O;){var L=E[D],U=T(L);if(U!=null&&(V===void 0?U===U&&!g(U):w(U,V)))var V=U,z=L}return z}j.exports=f},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BindingOnSyntax=void 0;var g=u(167),f=function(){function E(T){this._binding=T}return E.prototype.onActivation=function(T){return this._binding.onActivation=T,new g.BindingWhenSyntax(this._binding)},E}();_.BindingOnSyntax=f},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BindingWhenSyntax=void 0;var g=u(166),f=u(236),E=function(){function T(w){this._binding=w}return T.prototype.when=function(w){return this._binding.constraint=w,new g.BindingOnSyntax(this._binding)},T.prototype.whenTargetNamed=function(w){return this._binding.constraint=f.namedConstraint(w),new g.BindingOnSyntax(this._binding)},T.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(w){var D=w.target!==null&&!w.target.isNamed()&&!w.target.isTagged();return D},new g.BindingOnSyntax(this._binding)},T.prototype.whenTargetTagged=function(w,D){return this._binding.constraint=f.taggedConstraint(w)(D),new g.BindingOnSyntax(this._binding)},T.prototype.whenInjectedInto=function(w){return this._binding.constraint=function(D){return f.typeConstraint(w)(D.parentRequest)},new g.BindingOnSyntax(this._binding)},T.prototype.whenParentNamed=function(w){return this._binding.constraint=function(D){return f.namedConstraint(w)(D.parentRequest)},new g.BindingOnSyntax(this._binding)},T.prototype.whenParentTagged=function(w,D){return this._binding.constraint=function(O){return f.taggedConstraint(w)(D)(O.parentRequest)},new g.BindingOnSyntax(this._binding)},T.prototype.whenAnyAncestorIs=function(w){return this._binding.constraint=function(D){return f.traverseAncerstors(D,f.typeConstraint(w))},new g.BindingOnSyntax(this._binding)},T.prototype.whenNoAncestorIs=function(w){return this._binding.constraint=function(D){return!f.traverseAncerstors(D,f.typeConstraint(w))},new g.BindingOnSyntax(this._binding)},T.prototype.whenAnyAncestorNamed=function(w){return this._binding.constraint=function(D){return f.traverseAncerstors(D,f.namedConstraint(w))},new g.BindingOnSyntax(this._binding)},T.prototype.whenNoAncestorNamed=function(w){return this._binding.constraint=function(D){return!f.traverseAncerstors(D,f.namedConstraint(w))},new g.BindingOnSyntax(this._binding)},T.prototype.whenAnyAncestorTagged=function(w,D){return this._binding.constraint=function(O){return f.traverseAncerstors(O,f.taggedConstraint(w)(D))},new g.BindingOnSyntax(this._binding)},T.prototype.whenNoAncestorTagged=function(w,D){return this._binding.constraint=function(O){return!f.traverseAncerstors(O,f.taggedConstraint(w)(D))},new g.BindingOnSyntax(this._binding)},T.prototype.whenAnyAncestorMatches=function(w){return this._binding.constraint=function(D){return f.traverseAncerstors(D,w)},new g.BindingOnSyntax(this._binding)},T.prototype.whenNoAncestorMatches=function(w){return this._binding.constraint=function(D){return!f.traverseAncerstors(D,w)},new g.BindingOnSyntax(this._binding)},T}();_.BindingWhenSyntax=E},function(j,_){j.exports=u;function u(g,f,E){return g[0]=f[0]-E[0],g[1]=f[1]-E[1],g}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f,E){(E==null||E>f.length)&&(E=f.length);for(var T=0,w=new Array(E);T<E;T++)w[T]=f[T];return w}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},g(f)}},function(j,_,u){"use strict";u.d(_,"a",function(){return Yn}),u.d(_,"b",function(){return vr});function g(et,wt){var lt=Object.keys(et);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(et);wt&&(Vt=Vt.filter(function(cn){return Object.getOwnPropertyDescriptor(et,cn).enumerable})),lt.push.apply(lt,Vt)}return lt}function f(et){for(var wt=1;wt<arguments.length;wt++){var lt=arguments[wt]!=null?arguments[wt]:{};wt%2?g(Object(lt),!0).forEach(function(Vt){T(et,Vt,lt[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(lt)):g(Object(lt)).forEach(function(Vt){Object.defineProperty(et,Vt,Object.getOwnPropertyDescriptor(lt,Vt))})}return et}function E(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(lt){return typeof lt}:E=function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},E(et)}function T(et,wt,lt){return wt in et?Object.defineProperty(et,wt,{value:lt,enumerable:!0,configurable:!0,writable:!0}):et[wt]=lt,et}var w,D={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function O(){if(w!==void 0)return w;w="";var et=document.createElement("p").style,wt="Transform";for(var lt in D)lt+wt in et&&(w=lt);return w}function L(){return O()?"".concat(O(),"TransitionProperty"):"transitionProperty"}function U(){return O()?"".concat(O(),"Transform"):"transform"}function V(et,wt){var lt=L();lt&&(et.style[lt]=wt,lt!=="transitionProperty"&&(et.style.transitionProperty=wt))}function z(et,wt){var lt=U();lt&&(et.style[lt]=wt,lt!=="transform"&&(et.style.transform=wt))}function K(et){return et.style.transitionProperty||et.style[L()]}function J(et){var wt=window.getComputedStyle(et,null),lt=wt.getPropertyValue("transform")||wt.getPropertyValue(U());if(lt&&lt!=="none"){var Vt=lt.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(Vt[12]||Vt[4],0),y:parseFloat(Vt[13]||Vt[5],0)}}return{x:0,y:0}}var he=/matrix\((.*)\)/,ue=/matrix3d\((.*)\)/;function de(et,wt){var lt=window.getComputedStyle(et,null),Vt=lt.getPropertyValue("transform")||lt.getPropertyValue(U());if(Vt&&Vt!=="none"){var cn,We=Vt.match(he);if(We)We=We[1],cn=We.split(",").map(function(vt){return parseFloat(vt,10)}),cn[4]=wt.x,cn[5]=wt.y,z(et,"matrix(".concat(cn.join(","),")"));else{var Jt=Vt.match(ue)[1];cn=Jt.split(",").map(function(vt){return parseFloat(vt,10)}),cn[12]=wt.x,cn[13]=wt.y,z(et,"matrix3d(".concat(cn.join(","),")"))}}else z(et,"translateX(".concat(wt.x,"px) translateY(").concat(wt.y,"px) translateZ(0)"))}var ae=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,le;function re(et){var wt=et.style.display;et.style.display="none",et.offsetHeight,et.style.display=wt}function se(et,wt,lt){var Vt=lt;if(E(wt)==="object"){for(var cn in wt)wt.hasOwnProperty(cn)&&se(et,cn,wt[cn]);return}if(typeof Vt!="undefined"){typeof Vt=="number"&&(Vt="".concat(Vt,"px")),et.style[wt]=Vt;return}return le(et,wt)}function ye(et){var wt,lt,Vt,cn=et.ownerDocument,We=cn.body,Jt=cn&&cn.documentElement;return wt=et.getBoundingClientRect(),lt=wt.left,Vt=wt.top,lt-=Jt.clientLeft||We.clientLeft||0,Vt-=Jt.clientTop||We.clientTop||0,{left:lt,top:Vt}}function Z(et,wt){var lt=et["page".concat(wt?"Y":"X","Offset")],Vt="scroll".concat(wt?"Top":"Left");if(typeof lt!="number"){var cn=et.document;lt=cn.documentElement[Vt],typeof lt!="number"&&(lt=cn.body[Vt])}return lt}function Ee(et){return Z(et)}function k(et){return Z(et,!0)}function Te(et){var wt=ye(et),lt=et.ownerDocument,Vt=lt.defaultView||lt.parentWindow;return wt.left+=Ee(Vt),wt.top+=k(Vt),wt}function De(et){return et!=null&&et==et.window}function Ue(et){return De(et)?et.document:et.nodeType===9?et:et.ownerDocument}function St(et,wt,lt){var Vt=lt,cn="",We=Ue(et);return Vt=Vt||We.defaultView.getComputedStyle(et,null),Vt&&(cn=Vt.getPropertyValue(wt)||Vt[wt]),cn}var Ae=new RegExp("^(".concat(ae,")(?!px)[a-z%]+$"),"i"),Wt=/^(top|right|bottom|left)$/,At="currentStyle",mt="runtimeStyle",Dt="left",Ke="px";function Tt(et,wt){var lt=et[At]&&et[At][wt];if(Ae.test(lt)&&!Wt.test(wt)){var Vt=et.style,cn=Vt[Dt],We=et[mt][Dt];et[mt][Dt]=et[At][Dt],Vt[Dt]=wt==="fontSize"?"1em":lt||0,lt=Vt.pixelLeft+Ke,Vt[Dt]=cn,et[mt][Dt]=We}return lt===""?"auto":lt}typeof window!="undefined"&&(le=window.getComputedStyle?St:Tt);function Gt(et,wt){return et==="left"?wt.useCssRight?"right":et:wt.useCssBottom?"bottom":et}function gn(et){if(et==="left")return"right";if(et==="right")return"left";if(et==="top")return"bottom";if(et==="bottom")return"top"}function Ut(et,wt,lt){se(et,"position")==="static"&&(et.style.position="relative");var Vt=-999,cn=-999,We=Gt("left",lt),Jt=Gt("top",lt),vt=gn(We),Kn=gn(Jt);We!=="left"&&(Vt=999),Jt!=="top"&&(cn=999);var kr="",Ur=Te(et);("left"in wt||"top"in wt)&&(kr=K(et)||"",V(et,"none")),"left"in wt&&(et.style[vt]="",et.style[We]="".concat(Vt,"px")),"top"in wt&&(et.style[Kn]="",et.style[Jt]="".concat(cn,"px")),re(et);var fa=Te(et),ea={};for(var ia in wt)if(wt.hasOwnProperty(ia)){var Va=Gt(ia,lt),da=ia==="left"?Vt:cn,$a=Ur[ia]-fa[ia];Va===ia?ea[Va]=da+$a:ea[Va]=da-$a}se(et,ea),re(et),("left"in wt||"top"in wt)&&V(et,kr);var di={};for(var Da in wt)if(wt.hasOwnProperty(Da)){var Ya=Gt(Da,lt),ro=wt[Da]-Ur[Da];Da===Ya?di[Ya]=ea[Ya]+ro:di[Ya]=ea[Ya]-ro}se(et,di)}function Ht(et,wt){var lt=Te(et),Vt=J(et),cn={x:Vt.x,y:Vt.y};"left"in wt&&(cn.x=Vt.x+wt.left-lt.left),"top"in wt&&(cn.y=Vt.y+wt.top-lt.top),de(et,cn)}function Rt(et,wt,lt){if(lt.ignoreShake){var Vt=Te(et),cn=Vt.left.toFixed(0),We=Vt.top.toFixed(0),Jt=wt.left.toFixed(0),vt=wt.top.toFixed(0);if(cn===Jt&&We===vt)return}lt.useCssRight||lt.useCssBottom?Ut(et,wt,lt):lt.useCssTransform&&U()in document.body.style?Ht(et,wt):Ut(et,wt,lt)}function Fe(et,wt){for(var lt=0;lt<et.length;lt++)wt(et[lt])}function me(et){return le(et,"boxSizing")==="border-box"}var ze=["margin","border","padding"],Be=-1,ut=2,xt=1,$t=0;function Qt(et,wt,lt){var Vt={},cn=et.style,We;for(We in wt)wt.hasOwnProperty(We)&&(Vt[We]=cn[We],cn[We]=wt[We]);lt.call(et);for(We in wt)wt.hasOwnProperty(We)&&(cn[We]=Vt[We])}function on(et,wt,lt){var Vt=0,cn,We,Jt;for(We=0;We<wt.length;We++)if(cn=wt[We],cn)for(Jt=0;Jt<lt.length;Jt++){var vt=void 0;cn==="border"?vt="".concat(cn).concat(lt[Jt],"Width"):vt=cn+lt[Jt],Vt+=parseFloat(le(et,vt))||0}return Vt}var Mn={getParent:function(wt){var lt=wt;do lt.nodeType===11&&lt.host?lt=lt.host:lt=lt.parentNode;while(lt&&lt.nodeType!==1&&lt.nodeType!==9);return lt}};Fe(["Width","Height"],function(et){Mn["doc".concat(et)]=function(wt){var lt=wt.document;return Math.max(lt.documentElement["scroll".concat(et)],lt.body["scroll".concat(et)],Mn["viewport".concat(et)](lt))},Mn["viewport".concat(et)]=function(wt){var lt="client".concat(et),Vt=wt.document,cn=Vt.body,We=Vt.documentElement,Jt=We[lt];return Vt.compatMode==="CSS1Compat"&&Jt||cn&&cn[lt]||Jt}});function Nn(et,wt,lt){var Vt=lt;if(De(et))return wt==="width"?Mn.viewportWidth(et):Mn.viewportHeight(et);if(et.nodeType===9)return wt==="width"?Mn.docWidth(et):Mn.docHeight(et);var cn=wt==="width"?["Left","Right"]:["Top","Bottom"],We=wt==="width"?et.getBoundingClientRect().width:et.getBoundingClientRect().height,Jt=me(et),vt=0;(We==null||We<=0)&&(We=void 0,vt=le(et,wt),(vt==null||Number(vt)<0)&&(vt=et.style[wt]||0),vt=parseFloat(vt)||0),Vt===void 0&&(Vt=Jt?xt:Be);var Kn=We!==void 0||Jt,kr=We||vt;return Vt===Be?Kn?kr-on(et,["border","padding"],cn):vt:Kn?Vt===xt?kr:kr+(Vt===ut?-on(et,["border"],cn):on(et,["margin"],cn)):vt+on(et,ze.slice(Vt),cn)}var qn={position:"absolute",visibility:"hidden",display:"block"};function nr(){for(var et=arguments.length,wt=new Array(et),lt=0;lt<et;lt++)wt[lt]=arguments[lt];var Vt,cn=wt[0];return cn.offsetWidth!==0?Vt=Nn.apply(void 0,wt):Qt(cn,qn,function(){Vt=Nn.apply(void 0,wt)}),Vt}Fe(["width","height"],function(et){var wt=et.charAt(0).toUpperCase()+et.slice(1);Mn["outer".concat(wt)]=function(Vt,cn){return Vt&&nr(Vt,et,cn?$t:xt)};var lt=et==="width"?["Left","Right"]:["Top","Bottom"];Mn[et]=function(Vt,cn){var We=cn;if(We!==void 0){if(Vt){var Jt=me(Vt);return Jt&&(We+=on(Vt,["padding","border"],lt)),se(Vt,et,We)}return}return Vt&&nr(Vt,et,Be)}});function xn(et,wt){for(var lt in wt)wt.hasOwnProperty(lt)&&(et[lt]=wt[lt]);return et}var pn={getWindow:function(wt){if(wt&&wt.document&&wt.setTimeout)return wt;var lt=wt.ownerDocument||wt;return lt.defaultView||lt.parentWindow},getDocument:Ue,offset:function(wt,lt,Vt){if(typeof lt!="undefined")Rt(wt,lt,Vt||{});else return Te(wt)},isWindow:De,each:Fe,css:se,clone:function(wt){var lt,Vt={};for(lt in wt)wt.hasOwnProperty(lt)&&(Vt[lt]=wt[lt]);var cn=wt.overflow;if(cn)for(lt in wt)wt.hasOwnProperty(lt)&&(Vt.overflow[lt]=wt.overflow[lt]);return Vt},mix:xn,getWindowScrollLeft:function(wt){return Ee(wt)},getWindowScrollTop:function(wt){return k(wt)},merge:function(){for(var wt={},lt=0;lt<arguments.length;lt++)pn.mix(wt,lt<0||arguments.length<=lt?void 0:arguments[lt]);return wt},viewportWidth:0,viewportHeight:0};xn(pn,Mn);var pr=pn.getParent;function gr(et){if(pn.isWindow(et)||et.nodeType===9)return null;var wt=pn.getDocument(et),lt=wt.body,Vt,cn=pn.css(et,"position"),We=cn==="fixed"||cn==="absolute";if(!We)return et.nodeName.toLowerCase()==="html"?null:pr(et);for(Vt=pr(et);Vt&&Vt!==lt&&Vt.nodeType!==9;Vt=pr(Vt))if(cn=pn.css(Vt,"position"),cn!=="static")return Vt;return null}var Ce=pn.getParent;function Jn(et){if(pn.isWindow(et)||et.nodeType===9)return!1;var wt=pn.getDocument(et),lt=wt.body,Vt=null;for(Vt=Ce(et);Vt&&Vt!==lt&&Vt!==wt;Vt=Ce(Vt)){var cn=pn.css(Vt,"position");if(cn==="fixed")return!0}return!1}function Ln(et,wt){for(var lt={left:0,right:Infinity,top:0,bottom:Infinity},Vt=gr(et),cn=pn.getDocument(et),We=cn.defaultView||cn.parentWindow,Jt=cn.body,vt=cn.documentElement;Vt;){if((navigator.userAgent.indexOf("MSIE")===-1||Vt.clientWidth!==0)&&Vt!==Jt&&Vt!==vt&&pn.css(Vt,"overflow")!=="visible"){var Kn=pn.offset(Vt);Kn.left+=Vt.clientLeft,Kn.top+=Vt.clientTop,lt.top=Math.max(lt.top,Kn.top),lt.right=Math.min(lt.right,Kn.left+Vt.clientWidth),lt.bottom=Math.min(lt.bottom,Kn.top+Vt.clientHeight),lt.left=Math.max(lt.left,Kn.left)}else if(Vt===Jt||Vt===vt)break;Vt=gr(Vt)}var kr=null;if(!pn.isWindow(et)&&et.nodeType!==9){kr=et.style.position;var Ur=pn.css(et,"position");Ur==="absolute"&&(et.style.position="fixed")}var fa=pn.getWindowScrollLeft(We),ea=pn.getWindowScrollTop(We),ia=pn.viewportWidth(We),Va=pn.viewportHeight(We),da=vt.scrollWidth,$a=vt.scrollHeight,di=window.getComputedStyle(Jt);if(di.overflowX==="hidden"&&(da=We.innerWidth),di.overflowY==="hidden"&&($a=We.innerHeight),et.style&&(et.style.position=kr),wt||Jn(et))lt.left=Math.max(lt.left,fa),lt.top=Math.max(lt.top,ea),lt.right=Math.min(lt.right,fa+ia),lt.bottom=Math.min(lt.bottom,ea+Va);else{var Da=Math.max(da,fa+ia);lt.right=Math.min(lt.right,Da);var Ya=Math.max($a,ea+Va);lt.bottom=Math.min(lt.bottom,Ya)}return lt.top>=0&&lt.left>=0&&lt.bottom>lt.top&&lt.right>lt.left?lt:null}function yr(et,wt,lt,Vt){var cn=pn.clone(et),We={width:wt.width,height:wt.height};return Vt.adjustX&&cn.left<lt.left&&(cn.left=lt.left),Vt.resizeWidth&&cn.left>=lt.left&&cn.left+We.width>lt.right&&(We.width-=cn.left+We.width-lt.right),Vt.adjustX&&cn.left+We.width>lt.right&&(cn.left=Math.max(lt.right-We.width,lt.left)),Vt.adjustY&&cn.top<lt.top&&(cn.top=lt.top),Vt.resizeHeight&&cn.top>=lt.top&&cn.top+We.height>lt.bottom&&(We.height-=cn.top+We.height-lt.bottom),Vt.adjustY&&cn.top+We.height>lt.bottom&&(cn.top=Math.max(lt.bottom-We.height,lt.top)),pn.mix(cn,We)}function Un(et){var wt,lt,Vt;if(!pn.isWindow(et)&&et.nodeType!==9)wt=pn.offset(et),lt=pn.outerWidth(et),Vt=pn.outerHeight(et);else{var cn=pn.getWindow(et);wt={left:pn.getWindowScrollLeft(cn),top:pn.getWindowScrollTop(cn)},lt=pn.viewportWidth(cn),Vt=pn.viewportHeight(cn)}return wt.width=lt,wt.height=Vt,wt}function $e(et,wt){var lt=wt.charAt(0),Vt=wt.charAt(1),cn=et.width,We=et.height,Jt=et.left,vt=et.top;return lt==="c"?vt+=We/2:lt==="b"&&(vt+=We),Vt==="c"?Jt+=cn/2:Vt==="r"&&(Jt+=cn),{left:Jt,top:vt}}function Re(et,wt,lt,Vt,cn){var We=$e(wt,lt[1]),Jt=$e(et,lt[0]),vt=[Jt.left-We.left,Jt.top-We.top];return{left:Math.round(et.left-vt[0]+Vt[0]-cn[0]),top:Math.round(et.top-vt[1]+Vt[1]-cn[1])}}function Ye(et,wt,lt){return et.left<lt.left||et.left+wt.width>lt.right}function tt(et,wt,lt){return et.top<lt.top||et.top+wt.height>lt.bottom}function gt(et,wt,lt){return et.left>lt.right||et.left+wt.width<lt.left}function kt(et,wt,lt){return et.top>lt.bottom||et.top+wt.height<lt.top}function Pe(et,wt,lt){var Vt=[];return pn.each(et,function(cn){Vt.push(cn.replace(wt,function(We){return lt[We]}))}),Vt}function pt(et,wt){return et[wt]=-et[wt],et}function st(et,wt){var lt;return/%$/.test(et)?lt=parseInt(et.substring(0,et.length-1),10)/100*wt:lt=parseInt(et,10),lt||0}function Ft(et,wt){et[0]=st(et[0],wt.width),et[1]=st(et[1],wt.height)}function An(et,wt,lt,Vt){var cn=lt.points,We=lt.offset||[0,0],Jt=lt.targetOffset||[0,0],vt=lt.overflow,Kn=lt.source||et;We=[].concat(We),Jt=[].concat(Jt),vt=vt||{};var kr={},Ur=0,fa=!!(vt&&vt.alwaysByViewport),ea=Ln(Kn,fa),ia=Un(Kn);Ft(We,ia),Ft(Jt,wt);var Va=Re(ia,wt,cn,We,Jt),da=pn.merge(ia,Va);if(ea&&(vt.adjustX||vt.adjustY)&&Vt){if(vt.adjustX&&Ye(Va,ia,ea)){var $a=Pe(cn,/[lr]/gi,{l:"r",r:"l"}),di=pt(We,0),Da=pt(Jt,0),Ya=Re(ia,wt,$a,di,Da);gt(Ya,ia,ea)||(Ur=1,cn=$a,We=di,Jt=Da)}if(vt.adjustY&&tt(Va,ia,ea)){var ro=Pe(cn,/[tb]/gi,{t:"b",b:"t"}),ys=pt(We,1),Co=pt(Jt,1),Gs=Re(ia,wt,ro,ys,Co);kt(Gs,ia,ea)||(Ur=1,cn=ro,We=ys,Jt=Co)}Ur&&(Va=Re(ia,wt,cn,We,Jt),pn.mix(da,Va));var Ho=Ye(Va,ia,ea),rs=tt(Va,ia,ea);if(Ho||rs){var as=cn;Ho&&(as=Pe(cn,/[lr]/gi,{l:"r",r:"l"})),rs&&(as=Pe(cn,/[tb]/gi,{t:"b",b:"t"})),cn=as,We=lt.offset||[0,0],Jt=lt.targetOffset||[0,0]}kr.adjustX=vt.adjustX&&Ho,kr.adjustY=vt.adjustY&&rs,(kr.adjustX||kr.adjustY)&&(da=yr(Va,ia,ea,kr))}return da.width!==ia.width&&pn.css(Kn,"width",pn.width(Kn)+da.width-ia.width),da.height!==ia.height&&pn.css(Kn,"height",pn.height(Kn)+da.height-ia.height),pn.offset(Kn,{left:da.left,top:da.top},{useCssRight:lt.useCssRight,useCssBottom:lt.useCssBottom,useCssTransform:lt.useCssTransform,ignoreShake:lt.ignoreShake}),{points:cn,offset:We,targetOffset:Jt,overflow:kr}}function Gn(et,wt){var lt=Ln(et,wt),Vt=Un(et);return!lt||Vt.left+Vt.width<=lt.left||Vt.top+Vt.height<=lt.top||Vt.left>=lt.right||Vt.top>=lt.bottom}function Yn(et,wt,lt){var Vt=lt.target||wt,cn=Un(Vt),We=!Gn(Vt,lt.overflow&&lt.overflow.alwaysByViewport);return An(et,cn,lt,We)}Yn.__getOffsetParent=gr,Yn.__getVisibleRectForElement=Ln;function vr(et,wt,lt){var Vt,cn,We=pn.getDocument(et),Jt=We.defaultView||We.parentWindow,vt=pn.getWindowScrollLeft(Jt),Kn=pn.getWindowScrollTop(Jt),kr=pn.viewportWidth(Jt),Ur=pn.viewportHeight(Jt);"pageX"in wt?Vt=wt.pageX:Vt=vt+wt.clientX,"pageY"in wt?cn=wt.pageY:cn=Kn+wt.clientY;var fa={left:Vt,top:cn,width:0,height:0},ea=Vt>=0&&Vt<=vt+kr&&cn>=0&&cn<=Kn+Ur,ia=[lt.points[0],"cc"];return An(et,fa,f(f({},lt),{},{points:ia}),ea)}var zr=Yn},function(j,_,u){j.exports={graphlib:u(50),layout:u(425),debug:u(486),util:{time:u(44).time,notime:u(44).notime},version:u(487)}},function(j,_,u){"use strict";u.d(_,"a",function(){return Es});var g=u(3),f=u(23),E=u(5),T=u(6),w=u(4),D=function(){function P(){Object(g.a)(this,P),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return Object(w.a)(P,[{key:"layout",value:function(v){return this.init(v),this.execute(!0)}},{key:"init",value:function(v){this.nodes=v.nodes||[],this.edges=v.edges||[],this.combos=v.combos||[]}},{key:"execute",value:function(v){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(v){v&&Object.assign(this,v)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}]),P}(),O=function(M){return typeof M=="string"},L=function(M){var v=Object.create(null);return function(m){var l=v[m];return l||(v[m]=M(m))}},U=/-(\w)/g,V=L(function(P){return P.replace(U,function(M,v){return v?v.toUpperCase():""})}),z=Array.isArray,K=function(M){return typeof M=="number"},J=function(M){return Number.isNaN(Number(M))},he=function(M){var v=parseFloat(M);return J(v)?M:v},ue=function(M,v,m){for(var l=[],A=0;A<M;A++)l[A]=0;return m&&m.forEach(function(B){B.source&&(l[v[B.source]]+=1),B.target&&(l[v[B.target]]+=1)}),l},de=function(M){for(var v=[],m=M.length,l=0;l<m;l+=1){v[l]=[];for(var A=0;A<m;A+=1)l===A?v[l][A]=0:M[l][A]===0||!M[l][A]?v[l][A]=Infinity:v[l][A]=M[l][A]}for(var B=0;B<m;B+=1)for(var X=0;X<m;X+=1)for(var H=0;H<m;H+=1)v[X][H]>v[X][B]+v[B][H]&&(v[X][H]=v[X][B]+v[B][H]);return v},ae=function(M,v){var m=M.nodes,l=M.edges,A=[],B={};if(!m)throw new Error("invalid nodes data!");return m&&m.forEach(function(X,H){B[X.id]=H;var ne=[];A.push(ne)}),l&&l.forEach(function(X){var H=X.source,ne=X.target,oe=B[H],be=B[ne];A[oe][be]=1,v||(A[be][oe]=1)}),A},le=function(M,v){var m=[];return M.forEach(function(l){var A=[];l.forEach(function(B){A.push(B*v)}),m.push(A)}),m},re=function P(M,v){if(M&&M.children){for(var m=M.children.length-1;m>=0;m--)if(!P(M.children[m],v))return}return!!v(M)},se=function(M,v){if(typeof v!="function")return;re(M,v)},ye=function(M){return M!==null&&typeof M=="object"},Z=function P(M){if(M===null)return M;if(M instanceof Date)return new Date(M.getTime());if(M instanceof Array){var v=[];return M.forEach(function(l){v.push(l)}),v.map(function(l){return P(l)})}if(typeof M=="object"&&M!=={}){var m=Object.assign({},M);return Object.keys(m).forEach(function(l){m[l]=P(m[l])}),m}return M},Ee=function(M){return typeof M=="function"},k=new Map,Te=function(M,v){if(k.get(M)&&console.warn("The layout with the name ".concat(M," exists already, it will be overridden")),ye(v)){var m=function(l){Object(E.a)(B,l);var A=Object(T.a)(B);function B(X){var H;Object(g.a)(this,B),H=A.call(this);var ne=Object(f.a)(H),oe={},be=ne.getDefaultCfg();return Object.assign(oe,be,v,X),Object.keys(oe).forEach(function(we){var Ne=oe[we];ne[we]=Ne}),H}return B}(D);k.set(M,m)}else k.set(M,v)},De=function(M){k.has(M)&&k.delete(M)},Ue=function(M){return k.has(M)?k.get(M):null},St=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.begin=[0,0],l.preventOverlap=!0,l.preventOverlapPadding=10,l.condense=!1,l.sortBy="degree",l.nodeSize=30,l.nodes=[],l.edges=[],l.width=300,l.height=300,l.row=0,l.col=0,l.cellWidth=0,l.cellHeight=0,l.cellUsed={},l.id2manPos={},l.onLayoutEnd=function(){},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=A.length,X=l.begin;if(B===0){l.onLayoutEnd&&l.onLayoutEnd();return}if(B===1){A[0].x=X[0],A[0].y=X[1],l.onLayoutEnd&&l.onLayoutEnd();return}var H=l.edges,ne=[];A.forEach(function(En){ne.push(En)});var oe={};if(ne.forEach(function(En,an){oe[En.id]=an}),(l.sortBy==="degree"||!O(l.sortBy)||ne[0][l.sortBy]===void 0)&&(l.sortBy="degree",J(A[0].degree))){var be=ue(ne.length,oe,H);ne.forEach(function(En,an){En.degree=be[an]})}ne.sort(function(En,an){return an[l.sortBy]-En[l.sortBy]}),!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight);var we=l.rows,Ne=l.cols!=null?l.cols:l.columns;if(l.cells=B,we!=null&&Ne!=null?(l.rows=we,l.cols=Ne):we!=null&&Ne==null?(l.rows=we,l.cols=Math.ceil(l.cells/l.rows)):we==null&&Ne!=null?(l.cols=Ne,l.rows=Math.ceil(l.cells/l.cols)):(l.splits=Math.sqrt(l.cells*l.height/l.width),l.rows=Math.round(l.splits),l.cols=Math.round(l.width/l.height*l.splits)),l.cols*l.rows>l.cells){var xe=l.small(),ke=l.large();(xe-1)*ke>=l.cells?l.small(xe-1):(ke-1)*xe>=l.cells&&l.large(ke-1)}else for(;l.cols*l.rows<l.cells;){var Me=l.small(),He=l.large();(He+1)*Me>=l.cells?l.large(He+1):l.small(Me+1)}l.cellWidth=l.width/l.cols,l.cellHeight=l.height/l.rows,l.condense&&(l.cellWidth=0,l.cellHeight=0),l.preventOverlap&&ne.forEach(function(En){(!En.x||!En.y)&&(En.x=0,En.y=0);var an,rn;z(En.size)?(an=En.size[0],rn=En.size[1]):K(En.size)&&(an=En.size,rn=En.size),(an===void 0||rn===void 0)&&(z(l.nodeSize)?(an=l.nodeSize[0],rn=l.nodeSize[1]):K(l.nodeSize)?(an=l.nodeSize,rn=l.nodeSize):(an=30,rn=30));var Hn=l.preventOverlapPadding,Zn=an+Hn,Rr=rn+Hn;l.cellWidth=Math.max(l.cellWidth,Zn),l.cellHeight=Math.max(l.cellHeight,Rr)}),l.cellUsed={},l.row=0,l.col=0,l.id2manPos={};for(var Xe=0;Xe<ne.length;Xe++){var dt=ne[Xe],Ot=void 0;if(l.position&&(Ot=l.position(dt)),Ot&&(Ot.row!==void 0||Ot.col!==void 0)){var _t={row:Ot.row,col:Ot.col};if(_t.col===void 0)for(_t.col=0;l.used(_t.row,_t.col);)_t.col++;else if(_t.row===void 0)for(_t.row=0;l.used(_t.row,_t.col);)_t.row++;l.id2manPos[dt.id]=_t,l.use(_t.row,_t.col)}l.getPos(dt)}return l.onLayoutEnd&&l.onLayoutEnd(),{edges:H,nodes:ne}}},{key:"small",value:function(l){var A=this,B,X=A.rows||5,H=A.cols||5;if(l==null)B=Math.min(X,H);else{var ne=Math.min(X,H);ne===A.rows?A.rows=l:A.cols=l}return B}},{key:"large",value:function(l){var A=this,B,X=A.rows||5,H=A.cols||5;if(l==null)B=Math.max(X,H);else{var ne=Math.max(X,H);ne===A.rows?A.rows=l:A.cols=l}return B}},{key:"used",value:function(l,A){var B=this;return B.cellUsed["c-".concat(l,"-").concat(A)]||!1}},{key:"use",value:function(l,A){var B=this;B.cellUsed["c-".concat(l,"-").concat(A)]=!0}},{key:"moveToNextCell",value:function(){var l=this,A=l.cols||5;l.col++,l.col>=A&&(l.col=0,l.row++)}},{key:"getPos",value:function(l){var A=this,B=A.begin,X=A.cellWidth,H=A.cellHeight,ne,oe,be=A.id2manPos[l.id];if(be)ne=be.col*X+X/2+B[0],oe=be.row*H+H/2+B[1];else{for(;A.used(A.row,A.col);)A.moveToNextCell();ne=A.col*X+X/2+B[0],oe=A.row*H+H/2+B[1],A.use(A.row,A.col),A.moveToNextCell()}l.x=ne,l.y=oe}},{key:"getType",value:function(){return"grid"}}]),v}(D),Ae=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.center=[0,0],l.width=300,l.height=300,l.nodes=[],l.edges=[],l.onLayoutEnd=function(){},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=.9,X=l.center;return!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight),A&&A.forEach(function(H){H.x=(Math.random()-.5)*B*l.width+X[0],H.y=(Math.random()-.5)*B*l.height+X[1]}),l.onLayoutEnd&&l.onLayoutEnd(),{nodes:A,edges:this.edges}}},{key:"getType",value:function(){return"random"}}]),v}(D),Wt=function(M,v){var m;return M?K(M)?m=function(A){return M}:m=M:m=function(A){return v||1},m},At=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.maxIteration=1e3,l.edgeStrength=200,l.nodeStrength=1e3,l.coulombDisScale=.005,l.damping=.9,l.maxSpeed=1e3,l.minMovement=.5,l.interval=.02,l.factor=1,l.linkDistance=1,l.gravity=10,l.preventOverlap=!0,l.tick=function(){},l.nodes=[],l.edges=[],l.width=300,l.height=300,l.nodeMap={},l.nodeIdxMap={},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var l=this,A=l.nodes;if(l.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(l.timeInterval),!A||A.length===0){l.onLayoutEnd&&l.onLayoutEnd();return}!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight),l.center||(l.center=[l.width/2,l.height/2]);var B=l.center;if(A.length===1){A[0].x=B[0],A[0].y=B[1],l.onLayoutEnd&&l.onLayoutEnd();return}var X={},H={};A.forEach(function(xe,ke){K(xe.x)||(xe.x=Math.random()*l.width),K(xe.y)||(xe.y=Math.random()*l.height),X[xe.id]=xe,H[xe.id]=ke}),l.nodeMap=X,l.nodeIdxMap=H,l.linkDistance=Wt(l.linkDistance,1),l.nodeStrength=Wt(l.nodeStrength,1),l.edgeStrength=Wt(l.edgeStrength,1);var ne=l.nodeSize,oe;if(l.preventOverlap){var be=l.nodeSpacing,we;K(be)?we=function(){return be}:Ee(be)?we=be:we=function(){return 0},ne?z(ne)?oe=function(ke){var Me=ne[0]>ne[1]?ne[0]:ne[1];return Me+we(ke)}:oe=function(ke){return ne+we(ke)}:oe=function(ke){if(ke.size){if(z(ke.size)){var Me=ke.size[0]>ke.size[1]?ke.size[0]:ke.size[1];return Me+we(ke)}return ke.size+we(ke)}return 10+we(ke)}}l.nodeSize=oe;var Ne=l.edges;l.degrees=ue(A.length,l.nodeIdxMap,Ne),l.getMass||(l.getMass=function(xe){var ke=l.degrees[l.nodeIdxMap[xe.id]]||1;return ke}),l.run()}},{key:"run",value:function(){var l=this,A=l.nodes,B=l.edges,X=l.maxIteration;if(typeof window=="undefined")return;var H=0;this.timeInterval=window.setInterval(function(){var ne=[],oe=[];if(!A)return;A.forEach(function(xe,ke){ne[2*ke]=0,ne[2*ke+1]=0,oe[2*ke]=0,oe[2*ke+1]=0}),l.calRepulsive(ne,A),B&&l.calAttractive(ne,B),l.calGravity(ne,A);var be=Math.max(.02,l.interval-H*.002);l.updateVelocity(ne,oe,be,A);var we=[];A.forEach(function(xe){we.push({x:xe.x,y:xe.y})}),l.updatePosition(oe,be,A),l.tick&&l.tick();var Ne=0;A.forEach(function(xe,ke){var Me=xe.x-we[ke].x,He=xe.y-we[ke].y;Ne+=Math.sqrt(Me*Me+He*He)}),Ne/=A.length,Ne<l.minMovement&&(window.clearInterval(l.timeInterval),l.onLayoutEnd&&l.onLayoutEnd()),H++,H>=X&&(l.onLayoutEnd&&l.onLayoutEnd(),window.clearInterval(l.timeInterval))},0)}},{key:"calRepulsive",value:function(l,A){var B=this,X=B.getMass,H=B.nodeStrength,ne=B.factor,oe=B.coulombDisScale,be=B.preventOverlap,we=B.nodeSize;A.forEach(function(Ne,xe){var ke=X?X(Ne):1;A.forEach(function(Me,He){if(xe>=He)return;var Xe=Ne.x-Me.x,dt=Ne.y-Me.y,Ot=Math.sqrt(Xe*Xe+dt*dt)+.01,_t=(Ot+.1)*oe,En=Xe/Ot,an=dt/Ot,rn=(H(Ne)+H(Me))/2*ne/(_t*_t),Hn=X?X(Me):1;if(l[2*xe]+=En*rn,l[2*xe+1]+=an*rn,l[2*He]-=En*rn,l[2*He+1]-=an*rn,be&&Ot<(we(Ne)+we(Me))/2){var Zn=(H(Ne)+H(Me))/2/(Ot*Ot);l[2*xe]+=En*Zn/ke,l[2*xe+1]+=an*Zn/ke,l[2*He]-=En*Zn/Hn,l[2*He+1]-=an*Zn/Hn}})})}},{key:"calAttractive",value:function(l,A){var B=this,X=B.nodeMap,H=B.nodeIdxMap,ne=B.linkDistance,oe=B.edgeStrength,be=B.getMass;A.forEach(function(we,Ne){var xe=X[we.source],ke=X[we.target],Me=ke.x-xe.x,He=ke.y-xe.y,Xe=Math.sqrt(Me*Me+He*He)+.01,dt=Me/Xe,Ot=He/Xe,_t=ne(we)||1,En=_t-Xe,an=En*oe(we),rn=H[we.source],Hn=H[we.target],Zn=be?be(xe):1,Rr=be?be(ke):1;l[2*rn]-=dt*an/Zn,l[2*rn+1]-=Ot*an/Zn,l[2*Hn]+=dt*an/Rr,l[2*Hn+1]+=Ot*an/Rr})}},{key:"calGravity",value:function(l,A){for(var B=this,X=B.center,H=B.gravity,ne=B.degrees,oe=A.length,be=0;be<oe;be++){var we=A[be],Ne=we.x-X[0],xe=we.y-X[1],ke=H;if(B.getCenter){var Me=B.getCenter(we,ne[be]);Me&&K(Me[0])&&K(Me[1])&&K(Me[2])&&(Ne=we.x-Me[0],xe=we.y-Me[1],ke=Me[2])}if(!ke)continue;l[2*be]-=ke*Ne,l[2*be+1]-=ke*xe}}},{key:"updateVelocity",value:function(l,A,B,X){var H=this,ne=B*H.damping;X.forEach(function(oe,be){var we=l[2*be]*ne||.01,Ne=l[2*be+1]*ne||.01,xe=Math.sqrt(we*we+Ne*Ne);if(xe>H.maxSpeed){var ke=H.maxSpeed/xe;we=ke*we,Ne=ke*Ne}A[2*be]=we,A[2*be+1]=Ne})}},{key:"updatePosition",value:function(l,A,B){B.forEach(function(X,H){if(K(X.fx)&&K(X.fy)){X.x=X.fx,X.y=X.fy;return}var ne=l[2*H]*A,oe=l[2*H+1]*A;X.x+=ne,X.y+=oe})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var l=this;l.stop(),l.tick=null,l.nodes=null,l.edges=null,l.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}]),v}(D),mt=function(P){var M=+this._x.call(null,P),v=+this._y.call(null,P);return Dt(this.cover(M,v),M,v,P)};function Dt(P,M,v,m){if(isNaN(M)||isNaN(v))return P;var l,A=P._root,B={data:m},X=P._x0,H=P._y0,ne=P._x1,oe=P._y1,be,we,Ne,xe,ke,Me,He,Xe;if(!A)return P._root=B,P;for(;A.length;)if((ke=M>=(be=(X+ne)/2))?X=be:ne=be,(Me=v>=(we=(H+oe)/2))?H=we:oe=we,l=A,!(A=A[He=Me<<1|ke]))return l[He]=B,P;if(Ne=+P._x.call(null,A.data),xe=+P._y.call(null,A.data),M===Ne&&v===xe)return B.next=A,l?l[He]=B:P._root=B,P;do l=l?l[He]=new Array(4):P._root=new Array(4),(ke=M>=(be=(X+ne)/2))?X=be:ne=be,(Me=v>=(we=(H+oe)/2))?H=we:oe=we;while((He=Me<<1|ke)===(Xe=(xe>=we)<<1|Ne>=be));return l[Xe]=A,l[He]=B,P}function Ke(P){var M,v,m=P.length,l,A,B=new Array(m),X=new Array(m),H=Infinity,ne=Infinity,oe=-Infinity,be=-Infinity;for(v=0;v<m;++v){if(isNaN(l=+this._x.call(null,M=P[v]))||isNaN(A=+this._y.call(null,M)))continue;B[v]=l,X[v]=A,l<H&&(H=l),l>oe&&(oe=l),A<ne&&(ne=A),A>be&&(be=A)}if(H>oe||ne>be)return this;for(this.cover(H,ne).cover(oe,be),v=0;v<m;++v)Dt(this,B[v],X[v],P[v]);return this}var Tt=function(P,M){if(isNaN(P=+P)||isNaN(M=+M))return this;var v=this._x0,m=this._y0,l=this._x1,A=this._y1;if(isNaN(v))l=(v=Math.floor(P))+1,A=(m=Math.floor(M))+1;else{for(var B=l-v||1,X=this._root,H,ne;v>P||P>=l||m>M||M>=A;){ne=(M<m)<<1|P<v,H=new Array(4),H[ne]=X,X=H,B*=2;switch(ne){case 0:l=v+B,A=m+B;break;case 1:v=l-B,A=m+B;break;case 2:l=v+B,m=A-B;break;case 3:v=l-B,m=A-B;break}}this._root&&this._root.length&&(this._root=X)}return this._x0=v,this._y0=m,this._x1=l,this._y1=A,this},Gt=function(){var P=[];return this.visit(function(M){if(!M.length)do P.push(M.data);while(M=M.next)}),P},gn=function(P){return arguments.length?this.cover(+P[0][0],+P[0][1]).cover(+P[1][0],+P[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ut=function(P,M,v,m,l){this.node=P,this.x0=M,this.y0=v,this.x1=m,this.y1=l},Ht=function(P,M,v){var m,l=this._x0,A=this._y0,B,X,H,ne,oe=this._x1,be=this._y1,we=[],Ne=this._root,xe,ke;for(Ne&&we.push(new Ut(Ne,l,A,oe,be)),v==null?v=Infinity:(l=P-v,A=M-v,oe=P+v,be=M+v,v*=v);xe=we.pop();){if(!(Ne=xe.node)||(B=xe.x0)>oe||(X=xe.y0)>be||(H=xe.x1)<l||(ne=xe.y1)<A)continue;if(Ne.length){var Me=(B+H)/2,He=(X+ne)/2;we.push(new Ut(Ne[3],Me,He,H,ne),new Ut(Ne[2],B,He,Me,ne),new Ut(Ne[1],Me,X,H,He),new Ut(Ne[0],B,X,Me,He)),(ke=(M>=He)<<1|P>=Me)&&(xe=we[we.length-1],we[we.length-1]=we[we.length-1-ke],we[we.length-1-ke]=xe)}else{var Xe=P-+this._x.call(null,Ne.data),dt=M-+this._y.call(null,Ne.data),Ot=Xe*Xe+dt*dt;if(Ot<v){var _t=Math.sqrt(v=Ot);l=P-_t,A=M-_t,oe=P+_t,be=M+_t,m=Ne.data}}}return m},Rt=function(P){if(isNaN(oe=+this._x.call(null,P))||isNaN(be=+this._y.call(null,P)))return this;var M,v=this._root,m,l,A,B=this._x0,X=this._y0,H=this._x1,ne=this._y1,oe,be,we,Ne,xe,ke,Me,He;if(!v)return this;if(v.length)for(;;){if((xe=oe>=(we=(B+H)/2))?B=we:H=we,(ke=be>=(Ne=(X+ne)/2))?X=Ne:ne=Ne,!(M=v,v=v[Me=ke<<1|xe]))return this;if(!v.length)break;(M[Me+1&3]||M[Me+2&3]||M[Me+3&3])&&(m=M,He=Me)}for(;v.data!==P;)if(!(l=v,v=v.next))return this;return(A=v.next)&&delete v.next,l?(A?l.next=A:delete l.next,this):M?(A?M[Me]=A:delete M[Me],(v=M[0]||M[1]||M[2]||M[3])&&v===(M[3]||M[2]||M[1]||M[0])&&!v.length&&(m?m[He]=v:this._root=v),this):(this._root=A,this)};function Fe(P){for(var M=0,v=P.length;M<v;++M)this.remove(P[M]);return this}var me=function(){return this._root},ze=function(){var P=0;return this.visit(function(M){if(!M.length)do++P;while(M=M.next)}),P},Be=function(P){var M=[],v,m=this._root,l,A,B,X,H;for(m&&M.push(new Ut(m,this._x0,this._y0,this._x1,this._y1));v=M.pop();)if(!P(m=v.node,A=v.x0,B=v.y0,X=v.x1,H=v.y1)&&m.length){var ne=(A+X)/2,oe=(B+H)/2;(l=m[3])&&M.push(new Ut(l,ne,oe,X,H)),(l=m[2])&&M.push(new Ut(l,A,oe,ne,H)),(l=m[1])&&M.push(new Ut(l,ne,B,X,oe)),(l=m[0])&&M.push(new Ut(l,A,B,ne,oe))}return this},ut=function(P){var M=[],v=[],m;for(this._root&&M.push(new Ut(this._root,this._x0,this._y0,this._x1,this._y1));m=M.pop();){var l=m.node;if(l.length){var A,B=m.x0,X=m.y0,H=m.x1,ne=m.y1,oe=(B+H)/2,be=(X+ne)/2;(A=l[0])&&M.push(new Ut(A,B,X,oe,be)),(A=l[1])&&M.push(new Ut(A,oe,X,H,be)),(A=l[2])&&M.push(new Ut(A,B,be,oe,ne)),(A=l[3])&&M.push(new Ut(A,oe,be,H,ne))}v.push(m)}for(;m=v.pop();)P(m.node,m.x0,m.y0,m.x1,m.y1);return this};function xt(P){return P[0]}var $t=function(P){return arguments.length?(this._x=P,this):this._x};function Qt(P){return P[1]}var on=function(P){return arguments.length?(this._y=P,this):this._y};function Mn(P,M,v){var m=new Nn(M??xt,v??Qt,NaN,NaN,NaN,NaN);return P==null?m:m.addAll(P)}function Nn(P,M,v,m,l,A){this._x=P,this._y=M,this._x0=v,this._y0=m,this._x1=l,this._y1=A,this._root=void 0}function qn(P){for(var M={data:P.data},v=M;P=P.next;)v=v.next={data:P.data};return M}var nr=Mn.prototype=Nn.prototype;nr.copy=function(){var P=new Nn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),M=this._root,v,m;if(!M)return P;if(!M.length)return P._root=qn(M),P;for(v=[{source:M,target:P._root=new Array(4)}];M=v.pop();)for(var l=0;l<4;++l)(m=M.source[l])&&(m.length?v.push({source:m,target:M.target[l]=new Array(4)}):M.target[l]=qn(m));return P},nr.add=mt,nr.addAll=Ke,nr.cover=Tt,nr.data=Gt,nr.extent=gn,nr.find=Ht,nr.remove=Rt,nr.removeAll=Fe,nr.root=me,nr.size=ze,nr.visit=Be,nr.visitAfter=ut,nr.x=$t,nr.y=on;var xn=function(P){return function(){return P}},pn=function(P){return(P()-.5)*1e-6},pr={value:function(){}};function gr(){for(var P=0,M=arguments.length,v={},m;P<M;++P){if(!(m=arguments[P]+"")||m in v||/[\s.]/.test(m))throw new Error("illegal type: "+m);v[m]=[]}return new Ce(v)}function Ce(P){this._=P}function Jn(P,M){return P.trim().split(/^|\s+/).map(function(v){var m="",l=v.indexOf(".");if(l>=0&&(m=v.slice(l+1),v=v.slice(0,l)),v&&!M.hasOwnProperty(v))throw new Error("unknown type: "+v);return{type:v,name:m}})}Ce.prototype=gr.prototype={constructor:Ce,on:function(M,v){var m=this._,l=Jn(M+"",m),A,B=-1,X=l.length;if(arguments.length<2){for(;++B<X;)if((A=(M=l[B]).type)&&(A=Ln(m[A],M.name)))return A;return}if(v!=null&&typeof v!="function")throw new Error("invalid callback: "+v);for(;++B<X;)if(A=(M=l[B]).type)m[A]=yr(m[A],M.name,v);else if(v==null)for(A in m)m[A]=yr(m[A],M.name,null);return this},copy:function(){var M={},v=this._;for(var m in v)M[m]=v[m].slice();return new Ce(M)},call:function(M,v){if((A=arguments.length-2)>0)for(var m=new Array(A),l=0,A,B;l<A;++l)m[l]=arguments[l+2];if(!this._.hasOwnProperty(M))throw new Error("unknown type: "+M);for(B=this._[M],l=0,A=B.length;l<A;++l)B[l].value.apply(v,m)},apply:function(M,v,m){if(!this._.hasOwnProperty(M))throw new Error("unknown type: "+M);for(var l=this._[M],A=0,B=l.length;A<B;++A)l[A].value.apply(v,m)}};function Ln(P,M){for(var v=0,m=P.length,l;v<m;++v)if((l=P[v]).name===M)return l.value}function yr(P,M,v){for(var m=0,l=P.length;m<l;++m)if(P[m].name===M){P[m]=pr,P=P.slice(0,m).concat(P.slice(m+1));break}return v!=null&&P.push({name:M,value:v}),P}var Un=gr,$e=0,Re=0,Ye=0,tt=1e3,gt,kt,Pe=0,pt=0,st=0,Ft=typeof performance=="object"&&performance.now?performance:Date,An=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(P){setTimeout(P,17)};function Gn(){return pt||(An(Yn),pt=Ft.now()+st)}function Yn(){pt=0}function vr(){this._call=this._time=this._next=null}vr.prototype=zr.prototype={constructor:vr,restart:function(M,v,m){if(typeof M!="function")throw new TypeError("callback is not a function");m=(m==null?Gn():+m)+(v==null?0:+v),!this._next&&kt!==this&&(kt?kt._next=this:gt=this,kt=this),this._call=M,this._time=m,cn()},stop:function(){this._call&&(this._call=null,this._time=Infinity,cn())}};function zr(P,M,v){var m=new vr;return m.restart(P,M,v),m}function et(){Gn(),++$e;for(var P=gt,M;P;)(M=pt-P._time)>=0&&P._call.call(null,M),P=P._next;--$e}function wt(){pt=(Pe=Ft.now())+st,$e=Re=0;try{et()}finally{$e=0,Vt(),pt=0}}function lt(){var P=Ft.now(),M=P-Pe;M>tt&&(st-=M,Pe=P)}function Vt(){for(var P,M=gt,v,m=Infinity;M;)M._call?(m>M._time&&(m=M._time),P=M,M=M._next):(v=M._next,M._next=null,M=P?P._next=v:gt=v);kt=P,cn(m)}function cn(P){if($e)return;Re&&(Re=clearTimeout(Re));var M=P-pt;M>24?(P<Infinity&&(Re=setTimeout(wt,P-Ft.now()-st)),Ye&&(Ye=clearInterval(Ye))):(Ye||(Pe=Ft.now(),Ye=setInterval(lt,tt)),$e=1,An(wt))}var We=1664525,Jt=1013904223,vt=4294967296,Kn=function(){var P=1;return function(){return(P=(We*P+Jt)%vt)/vt}};function kr(P){return P.x}function Ur(P){return P.y}var fa=10,ea=Math.PI*(3-Math.sqrt(5)),ia=function(P){var M,v=1,m=.001,l=1-Math.pow(m,1/300),A=0,B=.6,X=new Map,H=zr(be),ne=Un("tick","end"),oe=Kn();P==null&&(P=[]);function be(){we(),ne.call("tick",M),v<m&&(H.stop(),ne.call("end",M))}function we(ke){var Me,He=P.length,Xe;ke===void 0&&(ke=1);for(var dt=0;dt<ke;++dt)for(v+=(A-v)*l,X.forEach(function(Ot){Ot(v)}),Me=0;Me<He;++Me)Xe=P[Me],Xe.fx==null?Xe.x+=Xe.vx*=B:(Xe.x=Xe.fx,Xe.vx=0),Xe.fy==null?Xe.y+=Xe.vy*=B:(Xe.y=Xe.fy,Xe.vy=0);return M}function Ne(){for(var ke=0,Me=P.length,He;ke<Me;++ke){if(He=P[ke],He.index=ke,He.fx!=null&&(He.x=He.fx),He.fy!=null&&(He.y=He.fy),isNaN(He.x)||isNaN(He.y)){var Xe=fa*Math.sqrt(.5+ke),dt=ke*ea;He.x=Xe*Math.cos(dt),He.y=Xe*Math.sin(dt)}(isNaN(He.vx)||isNaN(He.vy))&&(He.vx=He.vy=0)}}function xe(ke){return ke.initialize&&ke.initialize(P,oe),ke}return Ne(),M={tick:we,restart:function(){return H.restart(be),M},stop:function(){return H.stop(),M},nodes:function(Me){return arguments.length?(P=Me,Ne(),X.forEach(xe),M):P},alpha:function(Me){return arguments.length?(v=+Me,M):v},alphaMin:function(Me){return arguments.length?(m=+Me,M):m},alphaDecay:function(Me){return arguments.length?(l=+Me,M):+l},alphaTarget:function(Me){return arguments.length?(A=+Me,M):A},velocityDecay:function(Me){return arguments.length?(B=1-Me,M):1-B},randomSource:function(Me){return arguments.length?(oe=Me,X.forEach(xe),M):oe},force:function(Me,He){return arguments.length>1?(He==null?X.delete(Me):X.set(Me,xe(He)),M):X.get(Me)},find:function(Me,He,Xe){var dt=0,Ot=P.length,_t,En,an,rn,Hn;for(Xe==null?Xe=Infinity:Xe*=Xe,dt=0;dt<Ot;++dt)rn=P[dt],_t=Me-rn.x,En=He-rn.y,an=_t*_t+En*En,an<Xe&&(Hn=rn,Xe=an);return Hn},on:function(Me,He){return arguments.length>1?(ne.on(Me,He),M):ne.on(Me)}}},Va=function(){var P,M,v,m,l=xn(-30),A,B=1,X=Infinity,H=.81;function ne(Ne){var xe,ke=P.length,Me=Mn(P,kr,Ur).visitAfter(be);for(m=Ne,xe=0;xe<ke;++xe)M=P[xe],Me.visit(we)}function oe(){if(!P)return;var Ne,xe=P.length,ke;for(A=new Array(xe),Ne=0;Ne<xe;++Ne)ke=P[Ne],A[ke.index]=+l(ke,Ne,P)}function be(Ne){var xe=0,ke,Me,He=0,Xe,dt,Ot;if(Ne.length){for(Xe=dt=Ot=0;Ot<4;++Ot)(ke=Ne[Ot])&&(Me=Math.abs(ke.value))&&(xe+=ke.value,He+=Me,Xe+=Me*ke.x,dt+=Me*ke.y);Ne.x=Xe/He,Ne.y=dt/He}else{ke=Ne,ke.x=ke.data.x,ke.y=ke.data.y;do xe+=A[ke.data.index];while(ke=ke.next)}Ne.value=xe}function we(Ne,xe,ke,Me){if(!Ne.value)return!0;var He=Ne.x-M.x,Xe=Ne.y-M.y,dt=Me-xe,Ot=He*He+Xe*Xe;if(dt*dt/H<Ot)return Ot<X&&(He===0&&(He=pn(v),Ot+=He*He),Xe===0&&(Xe=pn(v),Ot+=Xe*Xe),Ot<B&&(Ot=Math.sqrt(B*Ot)),M.vx+=He*Ne.value*m/Ot,M.vy+=Xe*Ne.value*m/Ot),!0;if(Ne.length||Ot>=X)return;(Ne.data!==M||Ne.next)&&(He===0&&(He=pn(v),Ot+=He*He),Xe===0&&(Xe=pn(v),Ot+=Xe*Xe),Ot<B&&(Ot=Math.sqrt(B*Ot)));do Ne.data!==M&&(dt=A[Ne.data.index]*m/Ot,M.vx+=He*dt,M.vy+=Xe*dt);while(Ne=Ne.next)}return ne.initialize=function(Ne,xe){P=Ne,v=xe,oe()},ne.strength=function(Ne){return arguments.length?(l=typeof Ne=="function"?Ne:xn(+Ne),oe(),ne):l},ne.distanceMin=function(Ne){return arguments.length?(B=Ne*Ne,ne):Math.sqrt(B)},ne.distanceMax=function(Ne){return arguments.length?(X=Ne*Ne,ne):Math.sqrt(X)},ne.theta=function(Ne){return arguments.length?(H=Ne*Ne,ne):Math.sqrt(H)},ne},da=function(P,M){var v,m=1;P==null&&(P=0),M==null&&(M=0);function l(){var A,B=v.length,X,H=0,ne=0;for(A=0;A<B;++A)X=v[A],H+=X.x,ne+=X.y;for(H=(H/B-P)*m,ne=(ne/B-M)*m,A=0;A<B;++A)X=v[A],X.x-=H,X.y-=ne}return l.initialize=function(A){v=A},l.x=function(A){return arguments.length?(P=+A,l):P},l.y=function(A){return arguments.length?(M=+A,l):M},l.strength=function(A){return arguments.length?(m=+A,l):m},l};function $a(P){return P.index}function di(P,M){var v=P.get(M);if(!v)throw new Error("node not found: "+M);return v}var Da=function(P){var M=$a,v=be,m,l=xn(30),A,B,X,H,ne,oe=1;P==null&&(P=[]);function be(Me){return 1/Math.min(X[Me.source.index],X[Me.target.index])}function we(Me){for(var He=0,Xe=P.length;He<oe;++He)for(var dt=0,Ot,_t,En,an,rn,Hn,Zn;dt<Xe;++dt)Ot=P[dt],_t=Ot.source,En=Ot.target,an=En.x+En.vx-_t.x-_t.vx||pn(ne),rn=En.y+En.vy-_t.y-_t.vy||pn(ne),Hn=Math.sqrt(an*an+rn*rn),Hn=(Hn-A[dt])/Hn*Me*m[dt],an*=Hn,rn*=Hn,En.vx-=an*(Zn=H[dt]),En.vy-=rn*Zn,_t.vx+=an*(Zn=1-Zn),_t.vy+=rn*Zn}function Ne(){if(!B)return;var Me,He=B.length,Xe=P.length,dt=new Map(B.map(function(_t,En){return[M(_t,En,B),_t]})),Ot;for(Me=0,X=new Array(He);Me<Xe;++Me)Ot=P[Me],Ot.index=Me,typeof Ot.source!="object"&&(Ot.source=di(dt,Ot.source)),typeof Ot.target!="object"&&(Ot.target=di(dt,Ot.target)),X[Ot.source.index]=(X[Ot.source.index]||0)+1,X[Ot.target.index]=(X[Ot.target.index]||0)+1;for(Me=0,H=new Array(Xe);Me<Xe;++Me)Ot=P[Me],H[Me]=X[Ot.source.index]/(X[Ot.source.index]+X[Ot.target.index]);m=new Array(Xe),xe(),A=new Array(Xe),ke()}function xe(){if(!B)return;for(var Me=0,He=P.length;Me<He;++Me)m[Me]=+v(P[Me],Me,P)}function ke(){if(!B)return;for(var Me=0,He=P.length;Me<He;++Me)A[Me]=+l(P[Me],Me,P)}return we.initialize=function(Me,He){B=Me,ne=He,Ne()},we.links=function(Me){return arguments.length?(P=Me,Ne(),we):P},we.id=function(Me){return arguments.length?(M=Me,we):M},we.iterations=function(Me){return arguments.length?(oe=+Me,we):oe},we.strength=function(Me){return arguments.length?(v=typeof Me=="function"?Me:xn(+Me),xe(),we):v},we.distance=function(Me){return arguments.length?(l=typeof Me=="function"?Me:xn(+Me),ke(),we):l},we};function Ya(P){return P.x+P.vx}function ro(P){return P.y+P.vy}var ys=function(P){var M,v,m,l=1,A=1;typeof P!="function"&&(P=xn(P==null?1:+P));function B(){for(var ne,oe=M.length,be,we,Ne,xe,ke,Me,He=0;He<A;++He)for(be=Mn(M,Ya,ro).visitAfter(X),ne=0;ne<oe;++ne)we=M[ne],ke=v[we.index],Me=ke*ke,Ne=we.x+we.vx,xe=we.y+we.vy,be.visit(Xe);function Xe(dt,Ot,_t,En,an){var rn=dt.data,Hn=dt.r,Zn=ke+Hn;if(rn){if(rn.index>we.index){var Rr=Ne-rn.x-rn.vx,ar=xe-rn.y-rn.vy,la=Rr*Rr+ar*ar;la<Zn*Zn&&(Rr===0&&(Rr=pn(m),la+=Rr*Rr),ar===0&&(ar=pn(m),la+=ar*ar),la=(Zn-(la=Math.sqrt(la)))/la*l,we.vx+=(Rr*=la)*(Zn=(Hn*=Hn)/(Me+Hn)),we.vy+=(ar*=la)*Zn,rn.vx-=Rr*(Zn=1-Zn),rn.vy-=ar*Zn)}return}return Ot>Ne+Zn||En<Ne-Zn||_t>xe+Zn||an<xe-Zn}}function X(ne){if(ne.data)return ne.r=v[ne.data.index];for(var oe=ne.r=0;oe<4;++oe)ne[oe]&&ne[oe].r>ne.r&&(ne.r=ne[oe].r)}function H(){if(!M)return;var ne,oe=M.length,be;for(v=new Array(oe),ne=0;ne<oe;++ne)be=M[ne],v[be.index]=+P(be,ne,M)}return B.initialize=function(ne,oe){M=ne,m=oe,H()},B.iterations=function(ne){return arguments.length?(A=+ne,B):A},B.strength=function(ne){return arguments.length?(l=+ne,B):l},B.radius=function(ne){return arguments.length?(P=typeof ne=="function"?ne:xn(+ne),H(),B):P},B},Co=u(145),Gs=function(P){var M=xn(.1),v,m,l;typeof P!="function"&&(P=xn(P==null?0:+P));function A(X){for(var H=0,ne=v.length,oe;H<ne;++H)oe=v[H],oe.vx+=(l[H]-oe.x)*m[H]*X}function B(){if(!v)return;var X,H=v.length;for(m=new Array(H),l=new Array(H),X=0;X<H;++X)m[X]=isNaN(l[X]=+P(v[X],X,v))?0:+M(v[X],X,v)}return A.initialize=function(X){v=X,B()},A.strength=function(X){return arguments.length?(M=typeof X=="function"?X:xn(+X),B(),A):M},A.x=function(X){return arguments.length?(P=typeof X=="function"?X:xn(+X),B(),A):P},A},Ho=function(P){var M=xn(.1),v,m,l;typeof P!="function"&&(P=xn(P==null?0:+P));function A(X){for(var H=0,ne=v.length,oe;H<ne;++H)oe=v[H],oe.vy+=(l[H]-oe.y)*m[H]*X}function B(){if(!v)return;var X,H=v.length;for(m=new Array(H),l=new Array(H),X=0;X<H;++X)m[X]=isNaN(l[X]=+P(v[X],X,v))?0:+M(v[X],X,v)}return A.initialize=function(X){v=X,B()},A.strength=function(X){return arguments.length?(M=typeof X=="function"?X:xn(+X),B(),A):M},A.y=function(X){return arguments.length?(P=typeof X=="function"?X:xn(+X),B(),A):P},A};function rs(){function P($r){return function(){return $r}}var M=function(Ia){return Ia.cluster},v=P(1),m=P(-1),l=P(100),A=P(.1),B=[0,0],X=[],H={},ne=[],oe=100,be=100,we={none:{x:0,y:0}},Ne=[],xe,ke="force",Me=!0,He=.1;function Xe($r){if(!Me)return Xe;xe.tick(),rn();for(var Ia=0,go=X.length,xi,yo=$r*He;Ia<go;++Ia)xi=X[Ia],xi.vx+=(we[M(xi)].x-xi.x)*yo,xi.vy+=(we[M(xi)].y-xi.y)*yo}function dt(){if(!X)return;Ot()}function Ot(){if(!X||!X.length)return;if(M(X[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var $r=_t();xe=ia($r.nodes).force("x",Gs(oe).strength(.1)).force("y",Ho(be).strength(.1)).force("collide",ys(function(Ia){return Ia.r}).iterations(4)).force("charge",Va().strength(m)).force("links",Da($r.nodes.length?$r.links:[]).distance(l).strength(A)),Ne=xe.nodes(),rn()}function _t(){var $r=[],Ia=[],go={},xi=[],yo={},si=[];return yo=En(X),si=an(ne),xi=Object.keys(yo),xi.forEach(function(ts,_l){var to=yo[ts];$r.push({id:ts,size:to.count,r:Math.sqrt(to.sumforceNodeSize/Math.PI)}),go[ts]=_l}),si.forEach(function(ts){var _l=go[ts.source],to=go[ts.target];_l!==void 0&&to!==void 0&&Ia.push({source:_l,target:to,count:ts.count})}),{nodes:$r,links:Ia}}function En($r){var Ia={};return $r.forEach(function(go){var xi=M(go);Ia[xi]||(Ia[xi]={count:0,sumforceNodeSize:0})}),$r.forEach(function(go){var xi=M(go),yo=v(go),si=Ia[xi];si.count=si.count+1,si.sumforceNodeSize=si.sumforceNodeSize+Math.PI*(yo*yo)*1.3,Ia[xi]=si}),Ia}function an($r){var Ia={},go=[];$r.forEach(function(yo){var si=Hn(yo),ts=0;Ia[si]!==void 0&&(ts=Ia[si]),ts+=1,Ia[si]=ts});var xi=Object.entries(Ia);return xi.forEach(function(yo){var si=Object(Co.a)(yo,2),ts=si[0],_l=si[1],to=ts.split("~")[0],md=ts.split("~")[1];to!==void 0&&md!==void 0&&go.push({source:to,target:md,count:_l})}),go}function rn(){return we={none:{x:0,y:0}},Ne.forEach(function($r){we[$r.id]={x:$r.x-B[0],y:$r.y-B[1]}}),we}function Hn($r){var Ia=M(H[$r.source]),go=M(H[$r.target]);return Ia<=go?"".concat(Ia,"~").concat(go):"".concat(go,"~").concat(Ia)}function Zn($r){H={},$r.forEach(function(Ia){H[Ia.id]=Ia})}function Rr($r){return arguments.length?(ke=$r,dt(),Xe):ke}function ar($r){return arguments.length?typeof $r=="string"?(M=function(go){return go[$r]},Xe):(M=$r,Xe):M}function la($r){return arguments.length?(Me=$r,Xe):Me}function ya($r){return arguments.length?(He=$r,Xe):He}function ti($r){return arguments.length?(oe=$r,Xe):oe}function vi($r){return arguments.length?(be=$r,Xe):be}function Za($r){return arguments.length?(Zn($r||[]),X=$r||[],Xe):X}function La($r){return arguments.length?(ne=$r||[],dt(),Xe):ne}function qa($r){return arguments.length?(typeof $r=="function"?v=$r:v=P(+$r),dt(),Xe):v}function _a($r){return arguments.length?(typeof $r=="function"?m=$r:m=P(+$r),dt(),Xe):m}function ca($r){return arguments.length?(typeof $r=="function"?l=$r:l=P(+$r),dt(),Xe):l}function Ti($r){return arguments.length?(typeof $r=="function"?A=$r:A=P(+$r),dt(),Xe):A}function Ci($r){return arguments.length?(B=$r,Xe):B}return Xe.initialize=function($r){X=$r,dt()},Xe.template=Rr,Xe.groupBy=ar,Xe.enableGrouping=la,Xe.strength=ya,Xe.centerX=ti,Xe.centerY=vi,Xe.nodes=Za,Xe.links=La,Xe.forceNodeSize=qa,Xe.nodeSize=Xe.forceNodeSize,Xe.forceCharge=_a,Xe.forceLinkDistance=ca,Xe.forceLinkStrength=Ti,Xe.offset=Ci,Xe.getFocis=rn,Xe}var as={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},_s=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.center=[0,0],l.nodeStrength=null,l.edgeStrength=null,l.preventOverlap=!1,l.clusterNodeStrength=null,l.clusterEdgeStrength=null,l.clusterEdgeDistance=null,l.clusterNodeSize=null,l.clusterFociStrength=null,l.linkDistance=50,l.alphaDecay=.028,l.alphaMin=.001,l.alpha=.3,l.collideStrength=1,l.workerEnabled=!1,l.tick=function(){},l.onLayoutEnd=function(){},l.ticking=void 0,m&&l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(l){var A=this;A.nodes=l.nodes||[];var B=l.edges||[];A.edges=B.map(function(X){var H={},ne=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(X).forEach(function(oe){ne.indexOf(oe)>-1||(H[oe]=X[oe])}),H}),A.ticking=!1}},{key:"execute",value:function(l){var A=this,B=A.nodes,X=A.edges;if(A.ticking)return;var H=A.forceSimulation,ne=A.alphaMin,oe=A.alphaDecay,be=A.alpha;if(H){if(l){if(A.clustering&&A.clusterForce&&(A.clusterForce.nodes(B),A.clusterForce.links(X)),H.nodes(B),X&&A.edgeForce)A.edgeForce.links(X);else if(X&&!A.edgeForce){var He=Da().id(function(Xe){return Xe.id}).links(X);A.edgeStrength&&He.strength(A.edgeStrength),A.linkDistance&&He.distance(A.linkDistance),A.edgeForce=He,H.force("link",He)}}A.preventOverlap&&A.overlapProcess(H),H.alpha(be).restart(),this.ticking=!0}else try{var we=Va();if(A.nodeStrength&&we.strength(A.nodeStrength),H=ia().nodes(B),A.clustering){var Ne=rs();Ne.centerX(A.center[0]).centerY(A.center[1]).template("force").strength(A.clusterFociStrength),X&&Ne.links(X),B&&Ne.nodes(B),Ne.forceLinkDistance(A.clusterEdgeDistance).forceLinkStrength(A.clusterEdgeStrength).forceCharge(A.clusterNodeStrength).forceNodeSize(A.clusterNodeSize),A.clusterForce=Ne,H.force("group",Ne)}if(H.force("center",da(A.center[0],A.center[1])).force("charge",we).alpha(be).alphaDecay(oe).alphaMin(ne),A.preventOverlap&&A.overlapProcess(H),X){var xe=Da().id(function(Xe){return Xe.id}).links(X);A.edgeStrength&&xe.strength(A.edgeStrength),A.linkDistance&&xe.distance(A.linkDistance),A.edgeForce=xe,H.force("link",xe)}if(A.workerEnabled&&!fo()&&(A.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!A.workerEnabled)H.on("tick",function(){A.tick()}).on("end",function(){A.ticking=!1,A.onLayoutEnd&&A.onLayoutEnd()}),A.ticking=!0;else{H.stop();for(var ke=Js(H),Me=1;Me<=ke;Me++)H.tick(),postMessage({nodes:B,currentTick:Me,totalTicks:ke,type:as.TICK},void 0);A.ticking=!1}A.forceSimulation=H,A.ticking=!0}catch(Xe){A.ticking=!1,console.warn(Xe)}}},{key:"overlapProcess",value:function(l){var A=this,B=A.nodeSize,X=A.nodeSpacing,H,ne,oe=A.collideStrength;if(K(X)?ne=function(){return X}:Ee(X)?ne=X:ne=function(){return 0},!B)H=function(ke){if(ke.size){if(z(ke.size)){var Me=ke.size[0]>ke.size[1]?ke.size[0]:ke.size[1];return Me/2+ne(ke)}return ke.size/2+ne(ke)}return 10+ne(ke)};else if(Ee(B))H=function(ke){var Me=B(ke);return Me+ne(ke)};else if(z(B)){var be=B[0]>B[1]?B[0]:B[1],we=be/2;H=function(ke){return we+ne(ke)}}else if(K(B)){var Ne=B/2;H=function(ke){return Ne+ne(ke)}}else H=function(){return 10};l.force("collisionForce",ys(H).strength(oe))}},{key:"updateCfg",value:function(l){var A=this;A.ticking&&(A.forceSimulation.stop(),A.ticking=!1),A.forceSimulation=null,Object.assign(A,l)}},{key:"destroy",value:function(){var l=this;l.ticking&&(l.forceSimulation.stop(),l.ticking=!1),l.nodes=null,l.edges=null,l.destroyed=!0}}]),v}(D);function Js(P){var M=P.alphaMin(),v=P.alphaTarget(),m=P.alpha(),l=Math.log((M-v)/(m-v))/Math.log(1-P.alphaDecay()),A=Math.ceil(l);return A}function fo(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function To(P,M,v,m){P.forEach(function(l,A){P[A].children=[],P[A].parent=[]}),m?M.forEach(function(l){var A=0;l.source&&(A=v[l.source]);var B=0;l.target&&(B=v[l.target]);var X=P[A].children,H=P[B].parent;X.push(P[B].id),H.push(P[A].id)}):M.forEach(function(l){var A=0;l.source&&(A=v[l.source]);var B=0;l.target&&(B=v[l.target]);var X=P[A].children,H=P[B].children;X.push(P[B].id),H.push(P[A].id)})}function bs(P,M,v){for(var m=v.length,l=0;l<m;l++)if(P.id===v[l].source&&M.id===v[l].target||M.id===v[l].source&&P.id===v[l].target)return!0;return!1}function bo(P,M){var v=P.degree,m=M.degree;return v<m?-1:v>m?1:0}var Es=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.radius=null,l.startRadius=null,l.endRadius=null,l.startAngle=0,l.endAngle=2*Math.PI,l.clockwise=!0,l.divisions=1,l.ordering=null,l.angleRatio=1,l.nodes=[],l.edges=[],l.nodeMap={},l.degrees=[],l.width=300,l.height=300,l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=l.edges,X=A.length;if(X===0){l.onLayoutEnd&&l.onLayoutEnd();return}!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight),l.center||(l.center=[l.width/2,l.height/2]);var H=l.center;if(X===1){A[0].x=H[0],A[0].y=H[1],l.onLayoutEnd&&l.onLayoutEnd();return}var ne=l.radius,oe=l.startRadius,be=l.endRadius,we=l.divisions,Ne=l.startAngle,xe=l.endAngle,ke=(xe-Ne)/X,Me={};A.forEach(function(Rr,ar){Me[Rr.id]=ar}),l.nodeMap=Me;var He=ue(A.length,Me,B);l.degrees=He,!ne&&!oe&&!be?ne=l.height>l.width?l.width/2:l.height/2:!oe&&be?oe=be:oe&&!be&&(be=oe);var Xe=l.angleRatio,dt=ke*Xe,Ot=l.ordering,_t=[];Ot==="topology"?_t=l.topologyOrdering():Ot==="topology-directed"?_t=l.topologyOrdering(!0):Ot==="degree"?_t=l.degreeOrdering():_t=A;for(var En=l.clockwise,an=Math.ceil(X/we),rn=0;rn<X;++rn){var Hn=ne;!Hn&&oe!==null&&be!==null&&(Hn=oe+rn*(be-oe)/(X-1)),Hn||(Hn=10+rn*100/(X-1));var Zn=Ne+rn%an*dt+2*Math.PI/we*Math.floor(rn/an);En||(Zn=xe-rn%an*dt-2*Math.PI/we*Math.floor(rn/an)),_t[rn].x=H[0]+Math.cos(Zn)*Hn,_t[rn].y=H[1]+Math.sin(Zn)*Hn,_t[rn].weight=He[rn]}return l.onLayoutEnd&&l.onLayoutEnd(),{nodes:_t,edges:this.edges}}},{key:"topologyOrdering",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,A=this,B=A.degrees,X=A.edges,H=A.nodes,ne=Z(H),oe=A.nodeMap,be=[ne[0]],we=[H[0]],Ne=[],xe=H.length;Ne[0]=!0,To(ne,X,oe,l);var ke=0;return ne.forEach(function(Me,He){if(He!==0)if((He===xe-1||B[He]!==B[He+1]||bs(be[ke],Me,X))&&!Ne[He])be.push(Me),we.push(H[oe[Me.id]]),Ne[He]=!0,ke++;else{for(var Xe=be[ke].children,dt=!1,Ot=0;Ot<Xe.length;Ot++){var _t=oe[Xe[Ot]];if(B[_t]===B[He]&&!Ne[_t]){be.push(ne[_t]),we.push(H[oe[ne[_t].id]]),Ne[_t]=!0,dt=!0;break}}for(var En=0;!dt&&!(Ne[En]||(be.push(ne[En]),we.push(H[oe[ne[En].id]]),Ne[En]=!0,dt=!0),En++,En===xe););}}),we}},{key:"degreeOrdering",value:function(){var l=this,A=l.nodes,B=[],X=l.degrees;return A.forEach(function(H,ne){H.degree=X[ne],B.push(H)}),B.sort(bo),B}},{key:"getType",value:function(){return"circular"}}]),v}(D),vu=u(172),Zs=u.n(vu),Ko=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.rankdir="TB",l.nodesep=50,l.ranksep=50,l.controlPoints=!1,l.sortByCombo=!1,l.nodes=[],l.edges=[],l.onLayoutEnd=function(){},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var l=this,A=this,B=A.nodes,X=A.nodeSize,H=A.rankdir,ne=A.combos;if(!B)return;var oe=A.edges||[],be=new Zs.a.graphlib.Graph({multigraph:!0,compound:!0}),we;X?z(X)?we=function(){return X}:we=function(){return[X,X]}:we=function(Xe){return Xe.size?z(Xe.size)?Xe.size:[Xe.size,Xe.size]:[40,40]};var Ne=is(A.nodesepFunc,A.nodesep,50),xe=is(A.ranksepFunc,A.ranksep,50);(H==="LR"||H==="RL")&&(Ne=is(A.ranksepFunc,A.ranksep,50),xe=is(A.nodesepFunc,A.nodesep,50)),be.setDefaultEdgeLabel(function(){return{}}),be.setGraph(A);var ke={};B.forEach(function(He){var Xe=we(He),dt=xe(He),Ot=Ne(He),_t=Xe[0]+2*Ot,En=Xe[1]+2*dt;be.setNode(He.id,{width:_t,height:En}),l.sortByCombo&&He.comboId&&(ke[He.comboId]||(ke[He.comboId]=!0,be.setNode(He.comboId,{})),be.setParent(He.id,He.comboId))}),this.sortByCombo&&ne&&ne.forEach(function(He){if(!He.parentId)return;ke[He.parentId]||(ke[He.parentId]=!0,be.setNode(He.parentId,{})),be.setParent(He.id,He.parentId)}),oe.forEach(function(He){be.setEdge(He.source,He.target,{weight:He.weight||1})}),Zs.a.layout(be);var Me;return be.nodes().forEach(function(He){Me=be.node(He);var Xe=B.findIndex(function(dt){return dt.id===He});if(!B[Xe])return;B[Xe].x=Me.x,B[Xe].y=Me.y}),be.edges().forEach(function(He){Me=be.edge(He);var Xe=oe.findIndex(function(dt){return dt.source===He.v&&dt.target===He.w});A.controlPoints&&oe[Xe].type!=="loop"&&(oe[Xe].controlPoints=Me.points.slice(1,Me.points.length-1))}),A.onLayoutEnd&&A.onLayoutEnd(),{nodes:B,edges:oe}}},{key:"getType",value:function(){return"dagre"}}]),v}(D);function is(P,M,v){var m;return P?m=P:K(M)?m=function(){return M}:m=function(){return v},m}var cs=u(12),qs=u(71),Ju=Object.prototype.toString;function eu(P){return Ju.call(P).endsWith("Array]")}function Wi(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!eu(P))throw new TypeError("input must be an array");if(P.length===0)throw new TypeError("input must not be empty");var v=M.fromIndex,m=v===void 0?0:v,l=M.toIndex,A=l===void 0?P.length:l;if(m<0||m>=P.length||!Number.isInteger(m))throw new Error("fromIndex must be a positive integer smaller than length");if(A<=m||A>P.length||!Number.isInteger(A))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var B=P[m],X=m+1;X<A;X++)P[X]>B&&(B=P[X]);return B}var ji=Wi;function _o(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!eu(P))throw new TypeError("input must be an array");if(P.length===0)throw new TypeError("input must not be empty");var v=M.fromIndex,m=v===void 0?0:v,l=M.toIndex,A=l===void 0?P.length:l;if(m<0||m>=P.length||!Number.isInteger(m))throw new Error("fromIndex must be a positive integer smaller than length");if(A<=m||A>P.length||!Number.isInteger(A))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var B=P[m],X=m+1;X<A;X++)P[X]<B&&(B=P[X]);return B}var mu=_o;function Pl(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(eu(P)){if(P.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var v;if(M.output!==void 0){if(!eu(M.output))throw new TypeError("output option must be an array if specified");v=M.output}else v=new Array(P.length);var m=mu(P),l=ji(P);if(m===l)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var A=M.min,B=A===void 0?M.autoMinMax?m:0:A,X=M.max,H=X===void 0?M.autoMinMax?l:1:X;if(B>=H)throw new RangeError("min option must be smaller than max option");for(var ne=(H-B)/(l-m),oe=0;oe<P.length;oe++)v[oe]=(P[oe]-m)*ne+B;return v}var Fo=Pl,ks=" ".repeat(2),gu=" ".repeat(4);function Jl(){return Zl(this)}function Zl(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=M.maxRows,m=v===void 0?15:v,l=M.maxColumns,A=l===void 0?10:l,B=M.maxNumSize,X=B===void 0?8:B;return"".concat(P.constructor.name,` {
`).concat(ks,`[
`).concat(gu).concat(Iu(P,m,A,X),`
`).concat(ks,`]
`).concat(ks,"rows: ").concat(P.rows,`
`).concat(ks,"columns: ").concat(P.columns,`
}`)}function Iu(P,M,v,m){for(var l=P.rows,A=P.columns,B=Math.min(l,M),X=Math.min(A,v),H=[],ne=0;ne<B;ne++){for(var oe=[],be=0;be<X;be++)oe.push(yu(P.get(ne,be),m));H.push("".concat(oe.join(" ")))}return X!==A&&(H[H.length-1]+=" ... ".concat(A-v," more columns")),B!==l&&H.push("... ".concat(l-M," more rows")),H.join(`
`.concat(gu))}function yu(P,M){var v=String(P);if(v.length<=M)return v.padEnd(M," ");var m=P.toPrecision(M-2);if(m.length<=M)return m;var l=P.toExponential(M-2),A=l.indexOf("e"),B=l.slice(A);return l.slice(0,M-B.length)+B}function os(P,M){P.prototype.add=function(m){return typeof m=="number"?this.addS(m):this.addM(m)},P.prototype.addS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)+m);return this},P.prototype.addM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)+m.get(l,A));return this},P.add=function(m,l){var A=new M(m);return A.add(l)},P.prototype.sub=function(m){return typeof m=="number"?this.subS(m):this.subM(m)},P.prototype.subS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)-m);return this},P.prototype.subM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)-m.get(l,A));return this},P.sub=function(m,l){var A=new M(m);return A.sub(l)},P.prototype.subtract=P.prototype.sub,P.prototype.subtractS=P.prototype.subS,P.prototype.subtractM=P.prototype.subM,P.subtract=P.sub,P.prototype.mul=function(m){return typeof m=="number"?this.mulS(m):this.mulM(m)},P.prototype.mulS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)*m);return this},P.prototype.mulM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)*m.get(l,A));return this},P.mul=function(m,l){var A=new M(m);return A.mul(l)},P.prototype.multiply=P.prototype.mul,P.prototype.multiplyS=P.prototype.mulS,P.prototype.multiplyM=P.prototype.mulM,P.multiply=P.mul,P.prototype.div=function(m){return typeof m=="number"?this.divS(m):this.divM(m)},P.prototype.divS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)/m);return this},P.prototype.divM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)/m.get(l,A));return this},P.div=function(m,l){var A=new M(m);return A.div(l)},P.prototype.divide=P.prototype.div,P.prototype.divideS=P.prototype.divS,P.prototype.divideM=P.prototype.divM,P.divide=P.div,P.prototype.mod=function(m){return typeof m=="number"?this.modS(m):this.modM(m)},P.prototype.modS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)%m);return this},P.prototype.modM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)%m.get(l,A));return this},P.mod=function(m,l){var A=new M(m);return A.mod(l)},P.prototype.modulus=P.prototype.mod,P.prototype.modulusS=P.prototype.modS,P.prototype.modulusM=P.prototype.modM,P.modulus=P.mod,P.prototype.and=function(m){return typeof m=="number"?this.andS(m):this.andM(m)},P.prototype.andS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)&m);return this},P.prototype.andM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)&m.get(l,A));return this},P.and=function(m,l){var A=new M(m);return A.and(l)},P.prototype.or=function(m){return typeof m=="number"?this.orS(m):this.orM(m)},P.prototype.orS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)|m);return this},P.prototype.orM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)|m.get(l,A));return this},P.or=function(m,l){var A=new M(m);return A.or(l)},P.prototype.xor=function(m){return typeof m=="number"?this.xorS(m):this.xorM(m)},P.prototype.xorS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)^m);return this},P.prototype.xorM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)^m.get(l,A));return this},P.xor=function(m,l){var A=new M(m);return A.xor(l)},P.prototype.leftShift=function(m){return typeof m=="number"?this.leftShiftS(m):this.leftShiftM(m)},P.prototype.leftShiftS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)<<m);return this},P.prototype.leftShiftM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)<<m.get(l,A));return this},P.leftShift=function(m,l){var A=new M(m);return A.leftShift(l)},P.prototype.signPropagatingRightShift=function(m){return typeof m=="number"?this.signPropagatingRightShiftS(m):this.signPropagatingRightShiftM(m)},P.prototype.signPropagatingRightShiftS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)>>m);return this},P.prototype.signPropagatingRightShiftM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)>>m.get(l,A));return this},P.signPropagatingRightShift=function(m,l){var A=new M(m);return A.signPropagatingRightShift(l)},P.prototype.rightShift=function(m){return typeof m=="number"?this.rightShiftS(m):this.rightShiftM(m)},P.prototype.rightShiftS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)>>>m);return this},P.prototype.rightShiftM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,this.get(l,A)>>>m.get(l,A));return this},P.rightShift=function(m,l){var A=new M(m);return A.rightShift(l)},P.prototype.zeroFillRightShift=P.prototype.rightShift,P.prototype.zeroFillRightShiftS=P.prototype.rightShiftS,P.prototype.zeroFillRightShiftM=P.prototype.rightShiftM,P.zeroFillRightShift=P.rightShift,P.prototype.not=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,~this.get(m,l));return this},P.not=function(m){var l=new M(m);return l.not()},P.prototype.abs=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.abs(this.get(m,l)));return this},P.abs=function(m){var l=new M(m);return l.abs()},P.prototype.acos=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.acos(this.get(m,l)));return this},P.acos=function(m){var l=new M(m);return l.acos()},P.prototype.acosh=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.acosh(this.get(m,l)));return this},P.acosh=function(m){var l=new M(m);return l.acosh()},P.prototype.asin=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.asin(this.get(m,l)));return this},P.asin=function(m){var l=new M(m);return l.asin()},P.prototype.asinh=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.asinh(this.get(m,l)));return this},P.asinh=function(m){var l=new M(m);return l.asinh()},P.prototype.atan=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.atan(this.get(m,l)));return this},P.atan=function(m){var l=new M(m);return l.atan()},P.prototype.atanh=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.atanh(this.get(m,l)));return this},P.atanh=function(m){var l=new M(m);return l.atanh()},P.prototype.cbrt=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.cbrt(this.get(m,l)));return this},P.cbrt=function(m){var l=new M(m);return l.cbrt()},P.prototype.ceil=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.ceil(this.get(m,l)));return this},P.ceil=function(m){var l=new M(m);return l.ceil()},P.prototype.clz32=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.clz32(this.get(m,l)));return this},P.clz32=function(m){var l=new M(m);return l.clz32()},P.prototype.cos=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.cos(this.get(m,l)));return this},P.cos=function(m){var l=new M(m);return l.cos()},P.prototype.cosh=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.cosh(this.get(m,l)));return this},P.cosh=function(m){var l=new M(m);return l.cosh()},P.prototype.exp=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.exp(this.get(m,l)));return this},P.exp=function(m){var l=new M(m);return l.exp()},P.prototype.expm1=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.expm1(this.get(m,l)));return this},P.expm1=function(m){var l=new M(m);return l.expm1()},P.prototype.floor=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.floor(this.get(m,l)));return this},P.floor=function(m){var l=new M(m);return l.floor()},P.prototype.fround=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.fround(this.get(m,l)));return this},P.fround=function(m){var l=new M(m);return l.fround()},P.prototype.log=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.log(this.get(m,l)));return this},P.log=function(m){var l=new M(m);return l.log()},P.prototype.log1p=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.log1p(this.get(m,l)));return this},P.log1p=function(m){var l=new M(m);return l.log1p()},P.prototype.log10=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.log10(this.get(m,l)));return this},P.log10=function(m){var l=new M(m);return l.log10()},P.prototype.log2=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.log2(this.get(m,l)));return this},P.log2=function(m){var l=new M(m);return l.log2()},P.prototype.round=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.round(this.get(m,l)));return this},P.round=function(m){var l=new M(m);return l.round()},P.prototype.sign=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.sign(this.get(m,l)));return this},P.sign=function(m){var l=new M(m);return l.sign()},P.prototype.sin=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.sin(this.get(m,l)));return this},P.sin=function(m){var l=new M(m);return l.sin()},P.prototype.sinh=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.sinh(this.get(m,l)));return this},P.sinh=function(m){var l=new M(m);return l.sinh()},P.prototype.sqrt=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.sqrt(this.get(m,l)));return this},P.sqrt=function(m){var l=new M(m);return l.sqrt()},P.prototype.tan=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.tan(this.get(m,l)));return this},P.tan=function(m){var l=new M(m);return l.tan()},P.prototype.tanh=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.tanh(this.get(m,l)));return this},P.tanh=function(m){var l=new M(m);return l.tanh()},P.prototype.trunc=function(){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,Math.trunc(this.get(m,l)));return this},P.trunc=function(m){var l=new M(m);return l.trunc()},P.pow=function(m,l){var A=new M(m);return A.pow(l)},P.prototype.pow=function(m){return typeof m=="number"?this.powS(m):this.powM(m)},P.prototype.powS=function(m){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,Math.pow(this.get(l,A),m));return this},P.prototype.powM=function(m){if(m=M.checkMatrix(m),this.rows!==m.rows||this.columns!==m.columns)throw new RangeError("Matrices dimensions must be equal");for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.set(l,A,Math.pow(this.get(l,A),m.get(l,A)));return this}}function Bi(P,M,v){var m=v?P.rows:P.rows-1;if(M<0||M>m)throw new RangeError("Row index out of range")}function Mi(P,M,v){var m=v?P.columns:P.columns-1;if(M<0||M>m)throw new RangeError("Column index out of range")}function Bo(P,M){if(M.to1DArray&&(M=M.to1DArray()),M.length!==P.columns)throw new RangeError("vector size must be the same as the number of columns");return M}function ds(P,M){if(M.to1DArray&&(M=M.to1DArray()),M.length!==P.rows)throw new RangeError("vector size must be the same as the number of rows");return M}function Zu(P,M,v){return{row:Lu(P,M),column:ql(P,v)}}function Lu(P,M){if(typeof M!="object")throw new TypeError("unexpected type for row indices");var v=M.some(function(m){return m<0||m>=P.rows});if(v)throw new RangeError("row indices are out of range");return Array.isArray(M)||(M=Array.from(M)),M}function ql(P,M){if(typeof M!="object")throw new TypeError("unexpected type for column indices");var v=M.some(function(m){return m<0||m>=P.columns});if(v)throw new RangeError("column indices are out of range");return Array.isArray(M)||(M=Array.from(M)),M}function ec(P,M,v,m,l){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Ns("startRow",M),Ns("endRow",v),Ns("startColumn",m),Ns("endColumn",l),M>v||m>l||M<0||M>=P.rows||v<0||v>=P.rows||m<0||m>=P.columns||l<0||l>=P.columns)throw new RangeError("Submatrix indices are out of range")}function tu(P){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=[],m=0;m<P;m++)v.push(M);return v}function Ns(P,M){if(typeof M!="number")throw new TypeError("".concat(P," must be a number"))}function nu(P){if(P.isEmpty())throw new Error("Empty matrix has no elements to index")}function pl(P){for(var M=tu(P.rows),v=0;v<P.rows;++v)for(var m=0;m<P.columns;++m)M[v]+=P.get(v,m);return M}function Wc(P){for(var M=tu(P.columns),v=0;v<P.rows;++v)for(var m=0;m<P.columns;++m)M[m]+=P.get(v,m);return M}function Hc(P){for(var M=0,v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)M+=P.get(v,m);return M}function Il(P){for(var M=tu(P.rows,1),v=0;v<P.rows;++v)for(var m=0;m<P.columns;++m)M[v]*=P.get(v,m);return M}function vl(P){for(var M=tu(P.columns,1),v=0;v<P.rows;++v)for(var m=0;m<P.columns;++m)M[m]*=P.get(v,m);return M}function xc(P){for(var M=1,v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)M*=P.get(v,m);return M}function Ll(P,M,v){for(var m=P.rows,l=P.columns,A=[],B=0;B<m;B++){for(var X=0,H=0,ne=0,oe=0;oe<l;oe++)ne=P.get(B,oe)-v[B],X+=ne,H+=ne*ne;M?A.push((H-X*X/l)/(l-1)):A.push((H-X*X/l)/l)}return A}function bu(P,M,v){for(var m=P.rows,l=P.columns,A=[],B=0;B<l;B++){for(var X=0,H=0,ne=0,oe=0;oe<m;oe++)ne=P.get(oe,B)-v[B],X+=ne,H+=ne*ne;M?A.push((H-X*X/m)/(m-1)):A.push((H-X*X/m)/m)}return A}function tc(P,M,v){for(var m=P.rows,l=P.columns,A=m*l,B=0,X=0,H=0,ne=0;ne<m;ne++)for(var oe=0;oe<l;oe++)H=P.get(ne,oe)-v,B+=H,X+=H*H;return M?(X-B*B/A)/(A-1):(X-B*B/A)/A}function wc(P,M){for(var v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)P.set(v,m,P.get(v,m)-M[v])}function Eu(P,M){for(var v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)P.set(v,m,P.get(v,m)-M[m])}function nc(P,M){for(var v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)P.set(v,m,P.get(v,m)-M)}function ml(P){for(var M=[],v=0;v<P.rows;v++){for(var m=0,l=0;l<P.columns;l++)m+=Math.pow(P.get(v,l),2)/(P.columns-1);M.push(Math.sqrt(m))}return M}function gl(P,M){for(var v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)P.set(v,m,P.get(v,m)/M[v])}function jl(P){for(var M=[],v=0;v<P.columns;v++){for(var m=0,l=0;l<P.rows;l++)m+=Math.pow(P.get(l,v),2)/(P.rows-1);M.push(Math.sqrt(m))}return M}function yl(P,M){for(var v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)P.set(v,m,P.get(v,m)/M[m])}function Cc(P){for(var M=P.size-1,v=0,m=0;m<P.columns;m++)for(var l=0;l<P.rows;l++)v+=Math.pow(P.get(l,m),2)/M;return Math.sqrt(v)}function $o(P,M){for(var v=0;v<P.rows;v++)for(var m=0;m<P.columns;m++)P.set(v,m,P.get(v,m)/M)}var Qa=function(){function P(){Object(g.a)(this,P)}return Object(w.a)(P,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(v){if(typeof v!="function")throw new TypeError("callback must be a function");for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)v.call(this,m,l);return this}},{key:"to1DArray",value:function(){for(var v=[],m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)v.push(this.get(m,l));return v}},{key:"to2DArray",value:function(){for(var v=[],m=0;m<this.rows;m++){v.push([]);for(var l=0;l<this.columns;l++)v[m].push(this.get(m,l))}return v}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var v=0;v<this.rows;v++)for(var m=0;m<=v;m++)if(this.get(v,m)!==this.get(m,v))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var v=0,m=0,l=-1,A=!0,B=!1;v<this.rows&&A;){for(m=0,B=!1;m<this.columns&&B===!1;)this.get(v,m)===0?m++:this.get(v,m)===1&&m>l?(B=!0,l=m):(A=!1,B=!0);v++}return A}},{key:"isReducedEchelonForm",value:function(){for(var v=0,m=0,l=-1,A=!0,B=!1;v<this.rows&&A;){for(m=0,B=!1;m<this.columns&&B===!1;)this.get(v,m)===0?m++:this.get(v,m)===1&&m>l?(B=!0,l=m):(A=!1,B=!0);for(var X=m+1;X<this.rows;X++)this.get(v,X)!==0&&(A=!1);v++}return A}},{key:"echelonForm",value:function(){for(var v=this.clone(),m=0,l=0;m<v.rows&&l<v.columns;){for(var A=m,B=m;B<v.rows;B++)v.get(B,l)>v.get(A,l)&&(A=B);if(v.get(A,l)===0)l++;else{v.swapRows(m,A);for(var X=v.get(m,l),H=l;H<v.columns;H++)v.set(m,H,v.get(m,H)/X);for(var ne=m+1;ne<v.rows;ne++){var oe=v.get(ne,l)/v.get(m,l);v.set(ne,l,0);for(var be=l+1;be<v.columns;be++)v.set(ne,be,v.get(ne,be)-v.get(m,be)*oe)}m++,l++}}return v}},{key:"reducedEchelonForm",value:function(){for(var v=this.echelonForm(),m=v.columns,l=v.rows,A=l-1;A>=0;)if(v.maxRow(A)===0)A--;else{for(var B=0,X=!1;B<l&&X===!1;)v.get(A,B)===1?X=!0:B++;for(var H=0;H<A;H++)for(var ne=v.get(H,B),oe=B;oe<m;oe++){var be=v.get(H,oe)-ne*v.get(A,oe);v.set(H,oe,be)}A--}return v}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof v!="object")throw new TypeError("options must be an object");var m=v.rows,l=m===void 0?1:m,A=v.columns,B=A===void 0?1:A;if(!Number.isInteger(l)||l<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(B)||B<=0)throw new TypeError("columns must be a positive integer");for(var X=new Pa(this.rows*l,this.columns*B),H=0;H<l;H++)for(var ne=0;ne<B;ne++)X.setSubMatrix(this,this.rows*H,this.columns*ne);return X}},{key:"fill",value:function(v){for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,v);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(v){Bi(this,v);for(var m=[],l=0;l<this.columns;l++)m.push(this.get(v,l));return m}},{key:"getRowVector",value:function(v){return Pa.rowVector(this.getRow(v))}},{key:"setRow",value:function(v,m){Bi(this,v),m=Bo(this,m);for(var l=0;l<this.columns;l++)this.set(v,l,m[l]);return this}},{key:"swapRows",value:function(v,m){Bi(this,v),Bi(this,m);for(var l=0;l<this.columns;l++){var A=this.get(v,l);this.set(v,l,this.get(m,l)),this.set(m,l,A)}return this}},{key:"getColumn",value:function(v){Mi(this,v);for(var m=[],l=0;l<this.rows;l++)m.push(this.get(l,v));return m}},{key:"getColumnVector",value:function(v){return Pa.columnVector(this.getColumn(v))}},{key:"setColumn",value:function(v,m){Mi(this,v),m=ds(this,m);for(var l=0;l<this.rows;l++)this.set(l,v,m[l]);return this}},{key:"swapColumns",value:function(v,m){Mi(this,v),Mi(this,m);for(var l=0;l<this.rows;l++){var A=this.get(l,v);this.set(l,v,this.get(l,m)),this.set(l,m,A)}return this}},{key:"addRowVector",value:function(v){v=Bo(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)+v[l]);return this}},{key:"subRowVector",value:function(v){v=Bo(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)-v[l]);return this}},{key:"mulRowVector",value:function(v){v=Bo(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)*v[l]);return this}},{key:"divRowVector",value:function(v){v=Bo(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)/v[l]);return this}},{key:"addColumnVector",value:function(v){v=ds(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)+v[m]);return this}},{key:"subColumnVector",value:function(v){v=ds(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)-v[m]);return this}},{key:"mulColumnVector",value:function(v){v=ds(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)*v[m]);return this}},{key:"divColumnVector",value:function(v){v=ds(this,v);for(var m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.set(m,l,this.get(m,l)/v[m]);return this}},{key:"mulRow",value:function(v,m){Bi(this,v);for(var l=0;l<this.columns;l++)this.set(v,l,this.get(v,l)*m);return this}},{key:"mulColumn",value:function(v,m){Mi(this,v);for(var l=0;l<this.rows;l++)this.set(l,v,this.get(l,v)*m);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var v=this.get(0,0),m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.get(m,l)>v&&(v=this.get(m,l));return v}},{key:"maxIndex",value:function(){nu(this);for(var v=this.get(0,0),m=[0,0],l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.get(l,A)>v&&(v=this.get(l,A),m[0]=l,m[1]=A);return m}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var v=this.get(0,0),m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)this.get(m,l)<v&&(v=this.get(m,l));return v}},{key:"minIndex",value:function(){nu(this);for(var v=this.get(0,0),m=[0,0],l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)this.get(l,A)<v&&(v=this.get(l,A),m[0]=l,m[1]=A);return m}},{key:"maxRow",value:function(v){if(Bi(this,v),this.isEmpty())return NaN;for(var m=this.get(v,0),l=1;l<this.columns;l++)this.get(v,l)>m&&(m=this.get(v,l));return m}},{key:"maxRowIndex",value:function(v){Bi(this,v),nu(this);for(var m=this.get(v,0),l=[v,0],A=1;A<this.columns;A++)this.get(v,A)>m&&(m=this.get(v,A),l[1]=A);return l}},{key:"minRow",value:function(v){if(Bi(this,v),this.isEmpty())return NaN;for(var m=this.get(v,0),l=1;l<this.columns;l++)this.get(v,l)<m&&(m=this.get(v,l));return m}},{key:"minRowIndex",value:function(v){Bi(this,v),nu(this);for(var m=this.get(v,0),l=[v,0],A=1;A<this.columns;A++)this.get(v,A)<m&&(m=this.get(v,A),l[1]=A);return l}},{key:"maxColumn",value:function(v){if(Mi(this,v),this.isEmpty())return NaN;for(var m=this.get(0,v),l=1;l<this.rows;l++)this.get(l,v)>m&&(m=this.get(l,v));return m}},{key:"maxColumnIndex",value:function(v){Mi(this,v),nu(this);for(var m=this.get(0,v),l=[0,v],A=1;A<this.rows;A++)this.get(A,v)>m&&(m=this.get(A,v),l[0]=A);return l}},{key:"minColumn",value:function(v){if(Mi(this,v),this.isEmpty())return NaN;for(var m=this.get(0,v),l=1;l<this.rows;l++)this.get(l,v)<m&&(m=this.get(l,v));return m}},{key:"minColumnIndex",value:function(v){Mi(this,v),nu(this);for(var m=this.get(0,v),l=[0,v],A=1;A<this.rows;A++)this.get(A,v)<m&&(m=this.get(A,v),l[0]=A);return l}},{key:"diag",value:function(){for(var v=Math.min(this.rows,this.columns),m=[],l=0;l<v;l++)m.push(this.get(l,l));return m}},{key:"norm",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",m=0;if(v==="max")return this.max();if(v==="frobenius"){for(var l=0;l<this.rows;l++)for(var A=0;A<this.columns;A++)m=m+this.get(l,A)*this.get(l,A);return Math.sqrt(m)}else throw new RangeError("unknown norm type: ".concat(v))}},{key:"cumulativeSum",value:function(){for(var v=0,m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)v+=this.get(m,l),this.set(m,l,v);return this}},{key:"dot",value:function(v){P.isMatrix(v)&&(v=v.to1DArray());var m=this.to1DArray();if(m.length!==v.length)throw new RangeError("vectors do not have the same size");for(var l=0,A=0;A<m.length;A++)l+=m[A]*v[A];return l}},{key:"mmul",value:function(v){v=Pa.checkMatrix(v);for(var m=this.rows,l=this.columns,A=v.columns,B=new Pa(m,A),X=new Float64Array(l),H=0;H<A;H++){for(var ne=0;ne<l;ne++)X[ne]=v.get(ne,H);for(var oe=0;oe<m;oe++){for(var be=0,we=0;we<l;we++)be+=this.get(oe,we)*X[we];B.set(oe,H,be)}}return B}},{key:"strassen2x2",value:function(v){v=Pa.checkMatrix(v);var m=new Pa(2,2),l=this.get(0,0),A=v.get(0,0),B=this.get(0,1),X=v.get(0,1),H=this.get(1,0),ne=v.get(1,0),oe=this.get(1,1),be=v.get(1,1),we=(l+oe)*(A+be),Ne=(H+oe)*A,xe=l*(X-be),ke=oe*(ne-A),Me=(l+B)*be,He=(H-l)*(A+X),Xe=(B-oe)*(ne+be),dt=we+ke-Me+Xe,Ot=xe+Me,_t=Ne+ke,En=we-Ne+xe+He;return m.set(0,0,dt),m.set(0,1,Ot),m.set(1,0,_t),m.set(1,1,En),m}},{key:"strassen3x3",value:function(v){v=Pa.checkMatrix(v);var m=new Pa(3,3),l=this.get(0,0),A=this.get(0,1),B=this.get(0,2),X=this.get(1,0),H=this.get(1,1),ne=this.get(1,2),oe=this.get(2,0),be=this.get(2,1),we=this.get(2,2),Ne=v.get(0,0),xe=v.get(0,1),ke=v.get(0,2),Me=v.get(1,0),He=v.get(1,1),Xe=v.get(1,2),dt=v.get(2,0),Ot=v.get(2,1),_t=v.get(2,2),En=(l+A+B-X-H-be-we)*He,an=(l-X)*(-xe+He),rn=H*(-Ne+xe+Me-He-Xe-dt+_t),Hn=(-l+X+H)*(Ne-xe+He),Zn=(X+H)*(-Ne+xe),Rr=l*Ne,ar=(-l+oe+be)*(Ne-ke+Xe),la=(-l+oe)*(ke-Xe),ya=(oe+be)*(-Ne+ke),ti=(l+A+B-H-ne-oe-be)*Xe,vi=be*(-Ne+ke+Me-He-Xe-dt+Ot),Za=(-B+be+we)*(He+dt-Ot),La=(B-we)*(He-Ot),qa=B*dt,_a=(be+we)*(-dt+Ot),ca=(-B+H+ne)*(Xe+dt-_t),Ti=(B-ne)*(Xe-_t),Ci=(H+ne)*(-dt+_t),$r=A*Me,Ia=ne*Ot,go=X*ke,xi=oe*xe,yo=we*_t,si=Rr+qa+$r,ts=En+Hn+Zn+Rr+Za+qa+_a,_l=Rr+ar+ya+ti+qa+ca+Ci,to=an+rn+Hn+Rr+qa+ca+Ti,md=an+Hn+Zn+Rr+Ia,fh=qa+ca+Ti+Ci+go,hh=Rr+ar+la+vi+Za+La+qa,Wf=Za+La+qa+_a+xi,ph=Rr+ar+la+ya+yo;return m.set(0,0,si),m.set(0,1,ts),m.set(0,2,_l),m.set(1,0,to),m.set(1,1,md),m.set(1,2,fh),m.set(2,0,hh),m.set(2,1,Wf),m.set(2,2,ph),m}},{key:"mmulStrassen",value:function(v){v=Pa.checkMatrix(v);var m=this.clone(),l=m.rows,A=m.columns,B=v.rows,X=v.columns;A!==B&&console.warn("Multiplying ".concat(l," x ").concat(A," and ").concat(B," x ").concat(X," matrix: dimensions do not match."));function H(we,Ne,xe){var ke=we.rows,Me=we.columns;if(ke===Ne&&Me===xe)return we;var He=P.zeros(Ne,xe);return He=He.setSubMatrix(we,0,0),He}var ne=Math.max(l,B),oe=Math.max(A,X);m=H(m,ne,oe),v=H(v,ne,oe);function be(we,Ne,xe,ke){if(xe<=512||ke<=512)return we.mmul(Ne);xe%2===1&&ke%2===1?(we=H(we,xe+1,ke+1),Ne=H(Ne,xe+1,ke+1)):xe%2===1?(we=H(we,xe+1,ke),Ne=H(Ne,xe+1,ke)):ke%2===1&&(we=H(we,xe,ke+1),Ne=H(Ne,xe,ke+1));var Me=parseInt(we.rows/2,10),He=parseInt(we.columns/2,10),Xe=we.subMatrix(0,Me-1,0,He-1),dt=Ne.subMatrix(0,Me-1,0,He-1),Ot=we.subMatrix(0,Me-1,He,we.columns-1),_t=Ne.subMatrix(0,Me-1,He,Ne.columns-1),En=we.subMatrix(Me,we.rows-1,0,He-1),an=Ne.subMatrix(Me,Ne.rows-1,0,He-1),rn=we.subMatrix(Me,we.rows-1,He,we.columns-1),Hn=Ne.subMatrix(Me,Ne.rows-1,He,Ne.columns-1),Zn=be(P.add(Xe,rn),P.add(dt,Hn),Me,He),Rr=be(P.add(En,rn),dt,Me,He),ar=be(Xe,P.sub(_t,Hn),Me,He),la=be(rn,P.sub(an,dt),Me,He),ya=be(P.add(Xe,Ot),Hn,Me,He),ti=be(P.sub(En,Xe),P.add(dt,_t),Me,He),vi=be(P.sub(Ot,rn),P.add(an,Hn),Me,He),Za=P.add(Zn,la);Za.sub(ya),Za.add(vi);var La=P.add(ar,ya),qa=P.add(Rr,la),_a=P.sub(Zn,Rr);_a.add(ar),_a.add(ti);var ca=P.zeros(2*Za.rows,2*Za.columns);return ca=ca.setSubMatrix(Za,0,0),ca=ca.setSubMatrix(La,Za.rows,0),ca=ca.setSubMatrix(qa,0,Za.columns),ca=ca.setSubMatrix(_a,Za.rows,Za.columns),ca.subMatrix(0,xe-1,0,ke-1)}return be(m,v,ne,oe)}},{key:"scaleRows",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof v!="object")throw new TypeError("options must be an object");var m=v.min,l=m===void 0?0:m,A=v.max,B=A===void 0?1:A;if(!Number.isFinite(l))throw new TypeError("min must be a number");if(!Number.isFinite(B))throw new TypeError("max must be a number");if(l>=B)throw new RangeError("min must be smaller than max");for(var X=new Pa(this.rows,this.columns),H=0;H<this.rows;H++){var ne=this.getRow(H);ne.length>0&&Fo(ne,{min:l,max:B,output:ne}),X.setRow(H,ne)}return X}},{key:"scaleColumns",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof v!="object")throw new TypeError("options must be an object");var m=v.min,l=m===void 0?0:m,A=v.max,B=A===void 0?1:A;if(!Number.isFinite(l))throw new TypeError("min must be a number");if(!Number.isFinite(B))throw new TypeError("max must be a number");if(l>=B)throw new RangeError("min must be smaller than max");for(var X=new Pa(this.rows,this.columns),H=0;H<this.columns;H++){var ne=this.getColumn(H);ne.length&&Fo(ne,{min:l,max:B,output:ne}),X.setColumn(H,ne)}return X}},{key:"flipRows",value:function(){for(var v=Math.ceil(this.columns/2),m=0;m<this.rows;m++)for(var l=0;l<v;l++){var A=this.get(m,l),B=this.get(m,this.columns-1-l);this.set(m,l,B),this.set(m,this.columns-1-l,A)}return this}},{key:"flipColumns",value:function(){for(var v=Math.ceil(this.rows/2),m=0;m<this.columns;m++)for(var l=0;l<v;l++){var A=this.get(l,m),B=this.get(this.rows-1-l,m);this.set(l,m,B),this.set(this.rows-1-l,m,A)}return this}},{key:"kroneckerProduct",value:function(v){v=Pa.checkMatrix(v);for(var m=this.rows,l=this.columns,A=v.rows,B=v.columns,X=new Pa(m*A,l*B),H=0;H<m;H++)for(var ne=0;ne<l;ne++)for(var oe=0;oe<A;oe++)for(var be=0;be<B;be++)X.set(A*H+oe,B*ne+be,this.get(H,ne)*v.get(oe,be));return X}},{key:"kroneckerSum",value:function(v){if(v=Pa.checkMatrix(v),!this.isSquare()||!v.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var m=this.rows,l=v.rows,A=this.kroneckerProduct(Pa.eye(l,l)),B=Pa.eye(m,m).kroneckerProduct(v);return A.add(B)}},{key:"transpose",value:function(){for(var v=new Pa(this.columns,this.rows),m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)v.set(l,m,this.get(m,l));return v}},{key:"sortRows",value:function(){for(var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rs,m=0;m<this.rows;m++)this.setRow(m,this.getRow(m).sort(v));return this}},{key:"sortColumns",value:function(){for(var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rs,m=0;m<this.columns;m++)this.setColumn(m,this.getColumn(m).sort(v));return this}},{key:"subMatrix",value:function(v,m,l,A){ec(this,v,m,l,A);for(var B=new Pa(m-v+1,A-l+1),X=v;X<=m;X++)for(var H=l;H<=A;H++)B.set(X-v,H-l,this.get(X,H));return B}},{key:"subMatrixRow",value:function(v,m,l){if(m===void 0&&(m=0),l===void 0&&(l=this.columns-1),m>l||m<0||m>=this.columns||l<0||l>=this.columns)throw new RangeError("Argument out of range");for(var A=new Pa(v.length,l-m+1),B=0;B<v.length;B++)for(var X=m;X<=l;X++){if(v[B]<0||v[B]>=this.rows)throw new RangeError("Row index out of range: ".concat(v[B]));A.set(B,X-m,this.get(v[B],X))}return A}},{key:"subMatrixColumn",value:function(v,m,l){if(m===void 0&&(m=0),l===void 0&&(l=this.rows-1),m>l||m<0||m>=this.rows||l<0||l>=this.rows)throw new RangeError("Argument out of range");for(var A=new Pa(l-m+1,v.length),B=0;B<v.length;B++)for(var X=m;X<=l;X++){if(v[B]<0||v[B]>=this.columns)throw new RangeError("Column index out of range: ".concat(v[B]));A.set(X-m,B,this.get(X,v[B]))}return A}},{key:"setSubMatrix",value:function(v,m,l){if(v=Pa.checkMatrix(v),v.isEmpty())return this;var A=m+v.rows-1,B=l+v.columns-1;ec(this,m,A,l,B);for(var X=0;X<v.rows;X++)for(var H=0;H<v.columns;H++)this.set(m+X,l+H,v.get(X,H));return this}},{key:"selection",value:function(v,m){for(var l=Zu(this,v,m),A=new Pa(v.length,m.length),B=0;B<l.row.length;B++)for(var X=l.row[B],H=0;H<l.column.length;H++){var ne=l.column[H];A.set(B,H,this.get(X,ne))}return A}},{key:"trace",value:function(){for(var v=Math.min(this.rows,this.columns),m=0,l=0;l<v;l++)m+=this.get(l,l);return m}},{key:"clone",value:function(){for(var v=new Pa(this.rows,this.columns),m=0;m<this.rows;m++)for(var l=0;l<this.columns;l++)v.set(m,l,this.get(m,l));return v}},{key:"sum",value:function(v){switch(v){case"row":return pl(this);case"column":return Wc(this);case void 0:return Hc(this);default:throw new Error("invalid option: ".concat(v))}}},{key:"product",value:function(v){switch(v){case"row":return Il(this);case"column":return vl(this);case void 0:return xc(this);default:throw new Error("invalid option: ".concat(v))}}},{key:"mean",value:function(v){var m=this.sum(v);switch(v){case"row":{for(var l=0;l<this.rows;l++)m[l]/=this.columns;return m}case"column":{for(var A=0;A<this.columns;A++)m[A]/=this.rows;return m}case void 0:return m/this.size;default:throw new Error("invalid option: ".concat(v))}}},{key:"variance",value:function(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof v=="object"&&(m=v,v=void 0),typeof m!="object")throw new TypeError("options must be an object");var l=m,A=l.unbiased,B=A===void 0?!0:A,X=l.mean,H=X===void 0?this.mean(v):X;if(typeof B!="boolean")throw new TypeError("unbiased must be a boolean");switch(v){case"row":{if(!Array.isArray(H))throw new TypeError("mean must be an array");return Ll(this,B,H)}case"column":{if(!Array.isArray(H))throw new TypeError("mean must be an array");return bu(this,B,H)}case void 0:{if(typeof H!="number")throw new TypeError("mean must be a number");return tc(this,B,H)}default:throw new Error("invalid option: ".concat(v))}}},{key:"standardDeviation",value:function(v,m){typeof v=="object"&&(m=v,v=void 0);var l=this.variance(v,m);if(v===void 0)return Math.sqrt(l);for(var A=0;A<l.length;A++)l[A]=Math.sqrt(l[A]);return l}},{key:"center",value:function(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof v=="object"&&(m=v,v=void 0),typeof m!="object")throw new TypeError("options must be an object");var l=m,A=l.center,B=A===void 0?this.mean(v):A;switch(v){case"row":{if(!Array.isArray(B))throw new TypeError("center must be an array");return wc(this,B),this}case"column":{if(!Array.isArray(B))throw new TypeError("center must be an array");return Eu(this,B),this}case void 0:{if(typeof B!="number")throw new TypeError("center must be a number");return nc(this,B),this}default:throw new Error("invalid option: ".concat(v))}}},{key:"scale",value:function(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof v=="object"&&(m=v,v=void 0),typeof m!="object")throw new TypeError("options must be an object");var l=m.scale;switch(v){case"row":{if(l===void 0)l=ml(this);else if(!Array.isArray(l))throw new TypeError("scale must be an array");return gl(this,l),this}case"column":{if(l===void 0)l=jl(this);else if(!Array.isArray(l))throw new TypeError("scale must be an array");return yl(this,l),this}case void 0:{if(l===void 0)l=Cc(this);else if(typeof l!="number")throw new TypeError("scale must be a number");return $o(this,l),this}default:throw new Error("invalid option: ".concat(v))}}},{key:"toString",value:function(v){return Zl(this,v)}}],[{key:"from1DArray",value:function(v,m,l){var A=v*m;if(A!==l.length)throw new RangeError("data length does not match given dimensions");for(var B=new Pa(v,m),X=0;X<v;X++)for(var H=0;H<m;H++)B.set(X,H,l[X*m+H]);return B}},{key:"rowVector",value:function(v){for(var m=new Pa(1,v.length),l=0;l<v.length;l++)m.set(0,l,v[l]);return m}},{key:"columnVector",value:function(v){for(var m=new Pa(v.length,1),l=0;l<v.length;l++)m.set(l,0,v[l]);return m}},{key:"zeros",value:function(v,m){return new Pa(v,m)}},{key:"ones",value:function(v,m){return new Pa(v,m).fill(1)}},{key:"rand",value:function(v,m){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof l!="object")throw new TypeError("options must be an object");for(var A=l.random,B=A===void 0?Math.random:A,X=new Pa(v,m),H=0;H<v;H++)for(var ne=0;ne<m;ne++)X.set(H,ne,B());return X}},{key:"randInt",value:function(v,m){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof l!="object")throw new TypeError("options must be an object");var A=l.min,B=A===void 0?0:A,X=l.max,H=X===void 0?1e3:X,ne=l.random,oe=ne===void 0?Math.random:ne;if(!Number.isInteger(B))throw new TypeError("min must be an integer");if(!Number.isInteger(H))throw new TypeError("max must be an integer");if(B>=H)throw new RangeError("min must be smaller than max");for(var be=H-B,we=new Pa(v,m),Ne=0;Ne<v;Ne++)for(var xe=0;xe<m;xe++){var ke=B+Math.round(oe()*be);we.set(Ne,xe,ke)}return we}},{key:"eye",value:function(v,m,l){m===void 0&&(m=v),l===void 0&&(l=1);for(var A=Math.min(v,m),B=this.zeros(v,m),X=0;X<A;X++)B.set(X,X,l);return B}},{key:"diag",value:function(v,m,l){var A=v.length;m===void 0&&(m=A),l===void 0&&(l=m);for(var B=Math.min(A,m,l),X=this.zeros(m,l),H=0;H<B;H++)X.set(H,H,v[H]);return X}},{key:"min",value:function(v,m){v=this.checkMatrix(v),m=this.checkMatrix(m);for(var l=v.rows,A=v.columns,B=new Pa(l,A),X=0;X<l;X++)for(var H=0;H<A;H++)B.set(X,H,Math.min(v.get(X,H),m.get(X,H)));return B}},{key:"max",value:function(v,m){v=this.checkMatrix(v),m=this.checkMatrix(m);for(var l=v.rows,A=v.columns,B=new this(l,A),X=0;X<l;X++)for(var H=0;H<A;H++)B.set(X,H,Math.max(v.get(X,H),m.get(X,H)));return B}},{key:"checkMatrix",value:function(v){return P.isMatrix(v)?v:new Pa(v)}},{key:"isMatrix",value:function(v){return v!=null&&v.klass==="Matrix"}}]),P}();Qa.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Qa.prototype[Symbol.for("nodejs.util.inspect.custom")]=Jl);function Rs(P,M){return P-M}Qa.random=Qa.rand,Qa.randomInt=Qa.randInt,Qa.diagonal=Qa.diag,Qa.prototype.diagonal=Qa.prototype.diag,Qa.identity=Qa.eye,Qa.prototype.negate=Qa.prototype.neg,Qa.prototype.tensorProduct=Qa.prototype.kroneckerProduct;var Pa=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m,l){var A;if(Object(g.a)(this,v),A=M.call(this),v.isMatrix(m))return Object(qs.a)(A,m.clone());if(Number.isInteger(m)&&m>=0)if(A.data=[],Number.isInteger(l)&&l>=0)for(var B=0;B<m;B++)A.data.push(new Float64Array(l));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(m)){var X=m;if(m=X.length,l=m?X[0].length:0,typeof l!="number")throw new TypeError("Data must be a 2D array with at least one element");A.data=[];for(var H=0;H<m;H++){if(X[H].length!==l)throw new RangeError("Inconsistent array dimensions");A.data.push(Float64Array.from(X[H]))}}else throw new TypeError("First argument must be a positive number or an array");return A.rows=m,A.columns=l,A}return Object(w.a)(v,[{key:"set",value:function(l,A,B){return this.data[l][A]=B,this}},{key:"get",value:function(l,A){return this.data[l][A]}},{key:"removeRow",value:function(l){return Bi(this,l),this.data.splice(l,1),this.rows-=1,this}},{key:"addRow",value:function(l,A){return A===void 0&&(A=l,l=this.rows),Bi(this,l,!0),A=Float64Array.from(Bo(this,A)),this.data.splice(l,0,A),this.rows+=1,this}},{key:"removeColumn",value:function(l){Mi(this,l);for(var A=0;A<this.rows;A++){for(var B=new Float64Array(this.columns-1),X=0;X<l;X++)B[X]=this.data[A][X];for(var H=l+1;H<this.columns;H++)B[H-1]=this.data[A][H];this.data[A]=B}return this.columns-=1,this}},{key:"addColumn",value:function(l,A){typeof A=="undefined"&&(A=l,l=this.columns),Mi(this,l,!0),A=ds(this,A);for(var B=0;B<this.rows;B++){for(var X=new Float64Array(this.columns+1),H=0;H<l;H++)X[H]=this.data[B][H];for(X[H++]=A[B];H<this.columns+1;H++)X[H]=this.data[B][H-1];this.data[B]=X}return this.columns+=1,this}}]),v}(Qa);os(Qa,Pa);var qu=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.data=m,l.rows=m.length,l.columns=m[0].length,l}return Object(w.a)(v,[{key:"set",value:function(l,A,B){return this.data[l][A]=B,this}},{key:"get",value:function(l,A){return this.data[l][A]}}]),v}(Qa);function xu(P,M){var v=0;return Math.abs(P)>Math.abs(M)?(v=M/P,Math.abs(P)*Math.sqrt(1+v*v)):M!==0?(v=P/M,Math.abs(M)*Math.sqrt(1+v*v)):0}var $=function(){function P(M){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object(g.a)(this,P),M=qu.checkMatrix(M),M.isEmpty())throw new Error("Matrix must be non-empty");var m=M.rows,l=M.columns,A=v.computeLeftSingularVectors,B=A===void 0?!0:A,X=v.computeRightSingularVectors,H=X===void 0?!0:X,ne=v.autoTranspose,oe=ne===void 0?!1:ne,be=Boolean(B),we=Boolean(H),Ne=!1,xe;if(m<l)if(!oe)xe=M.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{xe=M.transpose(),m=xe.rows,l=xe.columns,Ne=!0;var ke=be;be=we,we=ke}else xe=M.clone();for(var Me=Math.min(m,l),He=Math.min(m+1,l),Xe=new Float64Array(He),dt=new Pa(m,Me),Ot=new Pa(l,l),_t=new Float64Array(l),En=new Float64Array(m),an=new Float64Array(He),rn=0;rn<He;rn++)an[rn]=rn;for(var Hn=Math.min(m-1,l),Zn=Math.max(0,Math.min(l-2,m)),Rr=Math.max(Hn,Zn),ar=0;ar<Rr;ar++){if(ar<Hn){Xe[ar]=0;for(var la=ar;la<m;la++)Xe[ar]=xu(Xe[ar],xe.get(la,ar));if(Xe[ar]!==0){xe.get(ar,ar)<0&&(Xe[ar]=-Xe[ar]);for(var ya=ar;ya<m;ya++)xe.set(ya,ar,xe.get(ya,ar)/Xe[ar]);xe.set(ar,ar,xe.get(ar,ar)+1)}Xe[ar]=-Xe[ar]}for(var ti=ar+1;ti<l;ti++){if(ar<Hn&&Xe[ar]!==0){for(var vi=0,Za=ar;Za<m;Za++)vi+=xe.get(Za,ar)*xe.get(Za,ti);vi=-vi/xe.get(ar,ar);for(var La=ar;La<m;La++)xe.set(La,ti,xe.get(La,ti)+vi*xe.get(La,ar))}_t[ti]=xe.get(ar,ti)}if(be&&ar<Hn)for(var qa=ar;qa<m;qa++)dt.set(qa,ar,xe.get(qa,ar));if(ar<Zn){_t[ar]=0;for(var _a=ar+1;_a<l;_a++)_t[ar]=xu(_t[ar],_t[_a]);if(_t[ar]!==0){_t[ar+1]<0&&(_t[ar]=0-_t[ar]);for(var ca=ar+1;ca<l;ca++)_t[ca]/=_t[ar];_t[ar+1]+=1}if(_t[ar]=-_t[ar],ar+1<m&&_t[ar]!==0){for(var Ti=ar+1;Ti<m;Ti++)En[Ti]=0;for(var Ci=ar+1;Ci<m;Ci++)for(var $r=ar+1;$r<l;$r++)En[Ci]+=_t[$r]*xe.get(Ci,$r);for(var Ia=ar+1;Ia<l;Ia++)for(var go=-_t[Ia]/_t[ar+1],xi=ar+1;xi<m;xi++)xe.set(xi,Ia,xe.get(xi,Ia)+go*En[xi])}if(we)for(var yo=ar+1;yo<l;yo++)Ot.set(yo,ar,_t[yo])}}var si=Math.min(l,m+1);if(Hn<l&&(Xe[Hn]=xe.get(Hn,Hn)),m<si&&(Xe[si-1]=0),Zn+1<si&&(_t[Zn]=xe.get(Zn,si-1)),_t[si-1]=0,be){for(var ts=Hn;ts<Me;ts++){for(var _l=0;_l<m;_l++)dt.set(_l,ts,0);dt.set(ts,ts,1)}for(var to=Hn-1;to>=0;to--)if(Xe[to]!==0){for(var md=to+1;md<Me;md++){for(var fh=0,hh=to;hh<m;hh++)fh+=dt.get(hh,to)*dt.get(hh,md);fh=-fh/dt.get(to,to);for(var Wf=to;Wf<m;Wf++)dt.set(Wf,md,dt.get(Wf,md)+fh*dt.get(Wf,to))}for(var ph=to;ph<m;ph++)dt.set(ph,to,-dt.get(ph,to));dt.set(to,to,1+dt.get(to,to));for(var Dp=0;Dp<to-1;Dp++)dt.set(Dp,to,0)}else{for(var Mo=0;Mo<m;Mo++)dt.set(Mo,to,0);dt.set(to,to,1)}}if(we)for(var Ru=l-1;Ru>=0;Ru--){if(Ru<Zn&&_t[Ru]!==0)for(var vh=Ru+1;vh<l;vh++){for(var np=0,rp=Ru+1;rp<l;rp++)np+=Ot.get(rp,Ru)*Ot.get(rp,vh);np=-np/Ot.get(Ru+1,Ru);for(var jh=Ru+1;jh<l;jh++)Ot.set(jh,vh,Ot.get(jh,vh)+np*Ot.get(jh,Ru))}for(var Mp=0;Mp<l;Mp++)Ot.set(Mp,Ru,0);Ot.set(Ru,Ru,1)}for(var dv=si-1,_p=0,fv=Number.EPSILON;si>0;){var Ka=void 0,Uh=void 0;for(Ka=si-2;Ka>=-1&&!(Ka===-1);Ka--){var Am=Number.MIN_VALUE+fv*Math.abs(Xe[Ka]+Math.abs(Xe[Ka+1]));if(Math.abs(_t[Ka])<=Am||Number.isNaN(_t[Ka])){_t[Ka]=0;break}}if(Ka===si-2)Uh=4;else{var Yl=void 0;for(Yl=si-1;Yl>=Ka&&!(Yl===Ka);Yl--){var hv=(Yl!==si?Math.abs(_t[Yl]):0)+(Yl!==Ka+1?Math.abs(_t[Yl-1]):0);if(Math.abs(Xe[Yl])<=fv*hv){Xe[Yl]=0;break}}Yl===Ka?Uh=3:Yl===si-1?Uh=1:(Uh=2,Ka=Yl)}Ka++;switch(Uh){case 1:{var kp=_t[si-2];_t[si-2]=0;for(var bc=si-2;bc>=Ka;bc--){var Fh=xu(Xe[bc],kp),Np=Xe[bc]/Fh,Rp=kp/Fh;if(Xe[bc]=Fh,bc!==Ka&&(kp=-Rp*_t[bc-1],_t[bc-1]=Np*_t[bc-1]),we)for(var pf=0;pf<l;pf++)Fh=Np*Ot.get(pf,bc)+Rp*Ot.get(pf,si-1),Ot.set(pf,si-1,-Rp*Ot.get(pf,bc)+Np*Ot.get(pf,si-1)),Ot.set(pf,bc,Fh)}break}case 2:{var Zr=_t[Ka-1];_t[Ka-1]=0;for(var Wr=Ka;Wr<si;Wr++){var _r=xu(Xe[Wr],Zr),Pp=Xe[Wr]/_r,ap=Zr/_r;if(Xe[Wr]=_r,Zr=-ap*_t[Wr],_t[Wr]=Pp*_t[Wr],be)for(var vf=0;vf<m;vf++)_r=Pp*dt.get(vf,Wr)+ap*dt.get(vf,Ka-1),dt.set(vf,Ka-1,-ap*dt.get(vf,Wr)+Pp*dt.get(vf,Ka-1)),dt.set(vf,Wr,_r)}break}case 3:{var Bh=Math.max(Math.abs(Xe[si-1]),Math.abs(Xe[si-2]),Math.abs(_t[si-2]),Math.abs(Xe[Ka]),Math.abs(_t[Ka])),mh=Xe[si-1]/Bh,Ip=Xe[si-2]/Bh,ip=_t[si-2]/Bh,Lp=Xe[Ka]/Bh,Om=_t[Ka]/Bh,Yd=((Ip+mh)*(Ip-mh)+ip*ip)/2,Vh=mh*ip*(mh*ip),zh=0;(Yd!==0||Vh!==0)&&(Yd<0?zh=0-Math.sqrt(Yd*Yd+Vh):zh=Math.sqrt(Yd*Yd+Vh),zh=Vh/(Yd+zh));for(var Hf=(Lp+mh)*(Lp-mh)+zh,Kf=Lp*Om,Ji=Ka;Ji<si-1;Ji++){var ll=xu(Hf,Kf);ll===0&&(ll=Number.MIN_VALUE);var Bc=Hf/ll,Vc=Kf/ll;if(Ji!==Ka&&(_t[Ji-1]=ll),Hf=Bc*Xe[Ji]+Vc*_t[Ji],_t[Ji]=Bc*_t[Ji]-Vc*Xe[Ji],Kf=Vc*Xe[Ji+1],Xe[Ji+1]=Bc*Xe[Ji+1],we)for(var gd=0;gd<l;gd++)ll=Bc*Ot.get(gd,Ji)+Vc*Ot.get(gd,Ji+1),Ot.set(gd,Ji+1,-Vc*Ot.get(gd,Ji)+Bc*Ot.get(gd,Ji+1)),Ot.set(gd,Ji,ll);if(ll=xu(Hf,Kf),ll===0&&(ll=Number.MIN_VALUE),Bc=Hf/ll,Vc=Kf/ll,Xe[Ji]=ll,Hf=Bc*_t[Ji]+Vc*Xe[Ji+1],Xe[Ji+1]=-Vc*_t[Ji]+Bc*Xe[Ji+1],Kf=Vc*_t[Ji+1],_t[Ji+1]=Bc*_t[Ji+1],be&&Ji<m-1)for(var mf=0;mf<m;mf++)ll=Bc*dt.get(mf,Ji)+Vc*dt.get(mf,Ji+1),dt.set(mf,Ji+1,-Vc*dt.get(mf,Ji)+Bc*dt.get(mf,Ji+1)),dt.set(mf,Ji,ll)}_t[si-2]=Hf,_p=_p+1;break}case 4:{if(Xe[Ka]<=0&&(Xe[Ka]=Xe[Ka]<0?-Xe[Ka]:0,we))for(var op=0;op<=dv;op++)Ot.set(op,Ka,-Ot.get(op,Ka));for(;Ka<dv&&!(Xe[Ka]>=Xe[Ka+1]);){var Gh=Xe[Ka];if(Xe[Ka]=Xe[Ka+1],Xe[Ka+1]=Gh,we&&Ka<l-1)for(var $f=0;$f<l;$f++)Gh=Ot.get($f,Ka+1),Ot.set($f,Ka+1,Ot.get($f,Ka)),Ot.set($f,Ka,Gh);if(be&&Ka<m-1)for(var gh=0;gh<m;gh++)Gh=dt.get(gh,Ka+1),dt.set(gh,Ka+1,dt.get(gh,Ka)),dt.set(gh,Ka,Gh);Ka++}_p=0,si--;break}}}if(Ne){var Sm=Ot;Ot=dt,dt=Sm}this.m=m,this.n=l,this.s=Xe,this.U=dt,this.V=Ot}return Object(w.a)(P,[{key:"solve",value:function(v){for(var m=v,l=this.threshold,A=this.s.length,B=Pa.zeros(A,A),X=0;X<A;X++)Math.abs(this.s[X])<=l?B.set(X,X,0):B.set(X,X,1/this.s[X]);for(var H=this.U,ne=this.rightSingularVectors,oe=ne.mmul(B),be=ne.rows,we=H.rows,Ne=Pa.zeros(be,we),xe=0;xe<be;xe++)for(var ke=0;ke<we;ke++){for(var Me=0,He=0;He<A;He++)Me+=oe.get(xe,He)*H.get(ke,He);Ne.set(xe,ke,Me)}return Ne.mmul(m)}},{key:"solveForDiagonal",value:function(v){return this.solve(Pa.diag(v))}},{key:"inverse",value:function(){for(var v=this.V,m=this.threshold,l=v.rows,A=v.columns,B=new Pa(l,this.s.length),X=0;X<l;X++)for(var H=0;H<A;H++)Math.abs(this.s[H])>m&&B.set(X,H,v.get(X,H)/this.s[H]);for(var ne=this.U,oe=ne.rows,be=ne.columns,we=new Pa(l,oe),Ne=0;Ne<l;Ne++)for(var xe=0;xe<oe;xe++){for(var ke=0,Me=0;Me<be;Me++)ke+=B.get(Ne,Me)*ne.get(xe,Me);we.set(Ne,xe,ke)}return we}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var v=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,m=0,l=this.s,A=0,B=l.length;A<B;A++)l[A]>v&&m++;return m}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Pa.diag(this.s)}}]),P}(),R=function(){function P(M){Object(g.a)(this,P),this.distances=M.distances,this.dimension=M.dimension||2,this.linkDistance=M.linkDistance}return Object(w.a)(P,[{key:"layout",value:function(){var v=this,m=v.dimension,l=v.distances,A=v.linkDistance;try{var B=Pa.mul(Pa.pow(l,2),-.5),X=B.mean("row"),H=B.mean("column"),ne=B.mean();B.add(ne).subRowVector(X).subColumnVector(H);var oe=new $(B),be=Pa.sqrt(oe.diagonalMatrix).diagonal();return oe.leftSingularVectors.toJSON().map(function(Me){return Pa.mul([Me],[be]).toJSON()[0].splice(0,m)})}catch(Me){for(var we=[],Ne=0;Ne<l.length;Ne++){var xe=Math.random()*A,ke=Math.random()*A;we.push([xe,ke])}return we}}}]),P}(),G=800,Y=function(){function P(M){Object(g.a)(this,P),this.disp=[],this.positions=M.positions,this.adjMatrix=M.adjMatrix,this.focusID=M.focusID,this.radii=M.radii,this.iterations=M.iterations||10,this.height=M.height||10,this.width=M.width||10,this.speed=M.speed||100,this.gravity=M.gravity||10,this.nodeSizeFunc=M.nodeSizeFunc,this.k=M.k||5,this.strictRadial=M.strictRadial,this.nodes=M.nodes}return Object(w.a)(P,[{key:"layout",value:function(){var v=this,m=v.positions,l=[],A=v.iterations,B=v.width/10;v.maxDisplace=B,v.disp=l;for(var X=0;X<A;X++)m.forEach(function(H,ne){l[ne]={x:0,y:0}}),v.getRepulsion(),v.updatePositions();return m}},{key:"getRepulsion",value:function(){var v=this,m=v.positions,l=v.nodes,A=v.disp,B=v.k,X=v.radii||[];m.forEach(function(H,ne){A[ne]={x:0,y:0},m.forEach(function(oe,be){if(ne===be)return;if(X[ne]!==X[be])return;var we=H[0]-oe[0],Ne=H[1]-oe[1],xe=Math.sqrt(we*we+Ne*Ne);if(xe===0){xe=1;var ke=ne>be?1:-1;we=.01*ke,Ne=.01*ke}if(xe<v.nodeSizeFunc(l[ne])/2+v.nodeSizeFunc(l[be])/2){var Me=B*B/xe;A[ne].x+=we/xe*Me,A[ne].y+=Ne/xe*Me}})})}},{key:"updatePositions",value:function(){var v=this,m=v.positions,l=v.disp,A=v.speed,B=v.strictRadial,X=v.focusID,H=v.maxDisplace||v.width/10;B&&l.forEach(function(oe,be){var we=m[be][0]-m[X][0],Ne=m[be][1]-m[X][1],xe=Math.sqrt(we*we+Ne*Ne),ke=Ne/xe,Me=-we/xe,He=Math.sqrt(oe.x*oe.x+oe.y*oe.y),Xe=Math.acos((ke*oe.x+Me*oe.y)/He);Xe>Math.PI/2&&(Xe-=Math.PI/2,ke*=-1,Me*=-1);var dt=Math.cos(Xe)*He;oe.x=ke*dt,oe.y=Me*dt});var ne=v.radii;m.forEach(function(oe,be){if(be===X)return;var we=Math.sqrt(l[be].x*l[be].x+l[be].y*l[be].y);if(we>0&&be!==X){var Ne=Math.min(H*(A/G),we);if(oe[0]+=l[be].x/we*Ne,oe[1]+=l[be].y/we*Ne,B){var xe=oe[0]-m[X][0],ke=oe[1]-m[X][1],Me=Math.sqrt(xe*xe+ke*ke);xe=xe/Me*ne[be],ke=ke/Me*ne[be],oe[0]=m[X][0]+xe,oe[1]=m[X][1]+ke}}})}}]),P}();function fe(P){for(var M=P.length,v=P[0].length,m=[],l=0;l<M;l++){for(var A=[],B=0;B<v;B++)P[l][B]!==0?A.push(1/(P[l][B]*P[l][B])):A.push(0);m.push(A)}return m}function Se(P,M){var v=-1;return P.forEach(function(m,l){m.id===M&&(v=l)}),v}function Ie(P,M){return Math.sqrt((P[0]-M[0])*(P[0]-M[0])+(P[1]-M[1])*(P[1]-M[1]))}var Ze=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.maxIteration=1e3,l.focusNode=null,l.unitRadius=null,l.linkDistance=50,l.preventOverlap=!1,l.strictRadial=!0,l.maxPreventOverlapIteration=200,l.sortStrength=10,l.nodes=[],l.edges=[],l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=l.edges||[];if(!A||A.length===0){l.onLayoutEnd&&l.onLayoutEnd();return}!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight),l.center||(l.center=[l.width/2,l.height/2]);var X=l.center;if(A.length===1){A[0].x=X[0],A[0].y=X[1],l.onLayoutEnd&&l.onLayoutEnd();return}var H=l.linkDistance,ne=null;if(O(l.focusNode)){for(var oe=!1,be=0;be<A.length;be++)A[be].id===l.focusNode&&(ne=A[be],l.focusNode=ne,oe=!0,be=A.length);oe||(ne=null)}else ne=l.focusNode;ne||(ne=A[0],l.focusNode=ne);var we=Se(A,ne.id);l.focusIndex=we;var Ne=ae({nodes:A,edges:B},!1),xe=de(Ne),ke=l.maxToFocus(xe,we);l.handleInfinity(xe,we,ke+1),l.distances=xe;var Me=xe[we],He=l.width||500,Xe=l.height||500,dt=He-X[0]>X[0]?X[0]:He-X[0],Ot=Xe-X[1]>X[1]?X[1]:Xe-X[1];dt===0&&(dt=He/2),Ot===0&&(Ot=Xe/2);var _t=Ot>dt?dt:Ot,En=Math.max.apply(Math,Object(cs.a)(Me)),an=[];Me.forEach(function(_a,ca){l.unitRadius||(l.unitRadius=_t/En),an[ca]=_a*l.unitRadius}),l.radii=an;var rn=l.eIdealDisMatrix();l.eIdealDistances=rn;var Hn=fe(rn);l.weights=Hn;var Zn=new R({linkDistance:H,distances:rn}),Rr=Zn.layout();Rr.forEach(function(_a){J(_a[0])&&(_a[0]=Math.random()*H),J(_a[1])&&(_a[1]=Math.random()*H)}),l.positions=Rr,Rr.forEach(function(_a,ca){A[ca].x=_a[0]+X[0],A[ca].y=_a[1]+X[1]}),Rr.forEach(function(_a){_a[0]-=Rr[we][0],_a[1]-=Rr[we][1]}),l.run();var ar=l.preventOverlap,la=l.nodeSize,ya,ti=l.strictRadial;if(ar){var vi=l.nodeSpacing,Za;K(vi)?Za=function(){return vi}:Ee(vi)?Za=vi:Za=function(){return 0},la?z(la)?ya=function(ca){var Ti=la[0]>la[1]?la[0]:la[1];return Ti+Za(ca)}:ya=function(ca){return la+Za(ca)}:ya=function(ca){if(ca.size){if(z(ca.size)){var Ti=ca.size[0]>ca.size[1]?ca.size[0]:ca.size[1];return Ti+Za(ca)}return ca.size+Za(ca)}return 10+Za(ca)};var La={nodes:A,nodeSizeFunc:ya,adjMatrix:Ne,positions:Rr,radii:an,height:Xe,width:He,strictRadial:ti,focusID:we,iterations:l.maxPreventOverlapIteration||200,k:Rr.length/4.5},qa=new Y(La);Rr=qa.layout()}return Rr.forEach(function(_a,ca){A[ca].x=_a[0]+X[0],A[ca].y=_a[1]+X[1]}),l.onLayoutEnd&&l.onLayoutEnd(),{nodes:A,edges:B}}},{key:"run",value:function(){for(var l=this,A=l.maxIteration,B=l.positions||[],X=l.weights||[],H=l.eIdealDistances||[],ne=l.radii||[],oe=0;oe<=A;oe++){var be=oe/A;l.oneIteration(be,B,ne,H,X)}}},{key:"oneIteration",value:function(l,A,B,X,H){var ne=this,oe=1-l,be=ne.focusIndex;A.forEach(function(we,Ne){var xe=Ie(we,[0,0]),ke=xe===0?0:1/xe;if(Ne===be)return;var Me=0,He=0,Xe=0;A.forEach(function(Ot,_t){if(Ne===_t)return;var En=Ie(we,Ot),an=En===0?0:1/En,rn=X[_t][Ne];Xe+=H[Ne][_t],Me+=H[Ne][_t]*(Ot[0]+rn*(we[0]-Ot[0])*an),He+=H[Ne][_t]*(Ot[1]+rn*(we[1]-Ot[1])*an)});var dt=B[Ne]===0?0:1/B[Ne];Xe*=oe,Xe+=l*dt*dt,Me*=oe,Me+=l*dt*we[0]*ke,we[0]=Me/Xe,He*=oe,He+=l*dt*we[1]*ke,we[1]=He/Xe})}},{key:"eIdealDisMatrix",value:function(){var l=this,A=l.nodes;if(!A)return[];var B=l.distances,X=l.linkDistance,H=l.radii||[],ne=l.unitRadius||50,oe=[];return B&&B.forEach(function(be,we){var Ne=[];be.forEach(function(xe,ke){if(we===ke)Ne.push(0);else if(H[we]===H[ke])if(l.sortBy==="data")Ne.push(xe*(Math.abs(we-ke)*l.sortStrength)/(H[we]/ne));else if(l.sortBy){var Me=A[we][l.sortBy]||0,He=A[ke][l.sortBy]||0;O(Me)&&(Me=Me.charCodeAt(0)),O(He)&&(He=He.charCodeAt(0)),Ne.push(xe*(Math.abs(Me-He)*l.sortStrength)/(H[we]/ne))}else Ne.push(xe*X/(H[we]/ne));else{var Xe=(X+ne)/2;Ne.push(xe*Xe)}}),oe.push(Ne)}),oe}},{key:"handleInfinity",value:function(l,A,B){for(var X=l.length,H=0;H<X;H++)if(l[A][H]===Infinity){l[A][H]=B,l[H][A]=B;for(var ne=0;ne<X;ne++)l[H][ne]!==Infinity&&l[A][ne]===Infinity&&(l[A][ne]=B+l[H][ne],l[ne][A]=B+l[H][ne])}for(var oe=0;oe<X;oe++){if(oe===A)continue;for(var be=0;be<X;be++)if(l[oe][be]===Infinity){var we=Math.abs(l[A][oe]-l[A][be]);we=we===0?1:we,l[oe][be]=we}}}},{key:"maxToFocus",value:function(l,A){for(var B=0,X=0;X<l[A].length;X++){if(l[A][X]===Infinity)continue;B=l[A][X]>B?l[A][X]:B}return B}},{key:"getType",value:function(){return"radial"}}]),v}(D),Pt=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.nodeSize=30,l.minNodeSpacing=10,l.preventOverlap=!1,l.equidistant=!1,l.startAngle=3/2*Math.PI,l.clockwise=!0,l.sortBy="degree",l.nodes=[],l.edges=[],l.width=300,l.height=300,l.onLayoutEnd=function(){},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=l.edges,X=A.length;if(X===0){l.onLayoutEnd&&l.onLayoutEnd();return}!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight),l.center||(l.center=[l.width/2,l.height/2]);var H=l.center;if(X===1){A[0].x=H[0],A[0].y=H[1],l.onLayoutEnd&&l.onLayoutEnd();return}var ne=[],oe;z(l.nodeSize)?oe=Math.max(l.nodeSize[0],l.nodeSize[1]):oe=l.nodeSize,A.forEach(function(Zn){ne.push(Zn);var Rr=oe;z(Zn.size)?Rr=Math.max(Zn.size[0],Zn.size[1]):K(Zn.size)&&(Rr=Zn.size),oe=Math.max(oe,Rr)}),l.clockwise=l.counterclockwise!==void 0?!l.counterclockwise:l.clockwise;var be={},we={};if(ne.forEach(function(Zn,Rr){be[Zn.id]=Zn,we[Zn.id]=Rr}),(l.sortBy==="degree"||!O(l.sortBy)||ne[0][l.sortBy]===void 0)&&(l.sortBy="degree",!K(A[0].degree))){var Ne=ue(A.length,we,B);ne.forEach(function(Zn,Rr){Zn.degree=Ne[Rr]})}ne.sort(function(Zn,Rr){return Rr[l.sortBy]-Zn[l.sortBy]}),l.maxValueNode=ne[0],l.maxLevelDiff=l.maxLevelDiff||l.maxValueNode[l.sortBy]/4;var xe=[[]],ke=xe[0];ne.forEach(function(Zn){if(ke.length>0){var Rr=Math.abs(ke[0][l.sortBy]-Zn[l.sortBy]);l.maxLevelDiff&&Rr>=l.maxLevelDiff&&(ke=[],xe.push(ke))}ke.push(Zn)});var Me=oe+l.minNodeSpacing;if(!l.preventOverlap){var He=xe.length>0&&xe[0].length>1,Xe=Math.min(l.width,l.height)/2-Me,dt=Xe/(xe.length+(He?1:0));Me=Math.min(Me,dt)}var Ot=0;if(xe.forEach(function(Zn){var Rr=l.sweep;Rr===void 0&&(Rr=2*Math.PI-2*Math.PI/Zn.length);var ar=Zn.dTheta=Rr/Math.max(1,Zn.length-1);if(Zn.length>1&&l.preventOverlap){var la=Math.cos(ar)-Math.cos(0),ya=Math.sin(ar)-Math.sin(0),ti=Math.sqrt(Me*Me/(la*la+ya*ya));Ot=Math.max(ti,Ot)}Zn.r=Ot,Ot+=Me}),l.equidistant){for(var _t=0,En=0,an=0;an<xe.length;an++){var rn=xe[an],Hn=rn.r-En;_t=Math.max(_t,Hn)}En=0,xe.forEach(function(Zn,Rr){Rr===0&&(En=Zn.r),Zn.r=En,En+=_t})}return xe.forEach(function(Zn){var Rr=Zn.dTheta,ar=Zn.r;Zn.forEach(function(la,ya){var ti=l.startAngle+(l.clockwise?1:-1)*Rr*ya;la.x=H[0]+ar*Math.cos(ti),la.y=H[1]+ar*Math.sin(ti)})}),l.onLayoutEnd&&l.onLayoutEnd(),{nodes:A,edges:B}}},{key:"getType",value:function(){return"concentric"}}]),v}(D),zt=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.center=[0,0],l.linkDistance=50,l.nodes=[],l.edges=[],l.onLayoutEnd=function(){},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=l.edges,X=B===void 0?[]:B,H=l.center;if(!A||A.length===0){l.onLayoutEnd&&l.onLayoutEnd();return}if(A.length===1){A[0].x=H[0],A[0].y=H[1],l.onLayoutEnd&&l.onLayoutEnd();return}var ne=l.linkDistance,oe=ae({nodes:A,edges:X},!1),be=de(oe);l.handleInfinity(be);var we=le(be,ne);l.scaledDistances=we;var Ne=l.runMDS();return l.positions=Ne,Ne.forEach(function(xe,ke){A[ke].x=xe[0]+H[0],A[ke].y=xe[1]+H[1]}),l.onLayoutEnd&&l.onLayoutEnd(),{nodes:A,edges:X}}},{key:"runMDS",value:function(){var l=this,A=2,B=l.scaledDistances,X=Pa.mul(Pa.pow(B,2),-.5),H=X.mean("row"),ne=X.mean("column"),oe=X.mean();X.add(oe).subRowVector(H).subColumnVector(ne);var be=new $(X),we=Pa.sqrt(be.diagonalMatrix).diagonal();return be.leftSingularVectors.toJSON().map(function(Ne){return Pa.mul([Ne],[we]).toJSON()[0].splice(0,A)})}},{key:"handleInfinity",value:function(l){var A=-999999;l.forEach(function(B){B.forEach(function(X){if(X===Infinity)return;A<X&&(A=X)})}),l.forEach(function(B,X){B.forEach(function(H,ne){H===Infinity&&(l[X][ne]=A)})})}},{key:"getType",value:function(){return"mds"}}]),v}(D),Cn=800,Sr=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.maxIteration=1e3,l.gravity=10,l.speed=5,l.clustering=!1,l.clusterGravity=10,l.nodes=[],l.edges=[],l.width=300,l.height=300,l.nodeMap={},l.nodeIdxMap={},l.onLayoutEnd=function(){},l.tick=function(){},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var l=this,A=this,B=A.nodes;if(A.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(A.timeInterval),!B||B.length===0){A.onLayoutEnd&&A.onLayoutEnd();return}!A.width&&typeof window!="undefined"&&(A.width=window.innerWidth),!A.height&&typeof window!="undefined"&&(A.height=window.innerHeight),A.center||(A.center=[A.width/2,A.height/2]);var X=A.center;if(B.length===1){B[0].x=X[0],B[0].y=X[1],A.onLayoutEnd&&A.onLayoutEnd();return}var H={},ne={};return B.forEach(function(oe,be){K(oe.x)||(oe.x=Math.random()*l.width),K(oe.y)||(oe.y=Math.random()*l.height),H[oe.id]=oe,ne[oe.id]=be}),A.nodeMap=H,A.nodeIdxMap=ne,A.run()}},{key:"run",value:function(){var l=this,A=l.nodes;if(!A)return;var B=l.edges,X=l.maxIteration,H=l.center,ne=l.height*l.width,oe=Math.sqrt(ne)/10,be=ne/(A.length+1),we=Math.sqrt(be),Ne=l.gravity,xe=l.speed,ke=l.clustering,Me={};if(ke){A.forEach(function(dt){if(Me[dt.cluster]===void 0){var Ot={name:dt.cluster,cx:0,cy:0,count:0};Me[dt.cluster]=Ot}var _t=Me[dt.cluster];K(dt.x)&&(_t.cx+=dt.x),K(dt.y)&&(_t.cy+=dt.y),_t.count++});for(var He in Me)Me[He].cx/=Me[He].count,Me[He].cy/=Me[He].count}if(typeof window=="undefined")return;var Xe=0;return this.timeInterval=window.setInterval(function(){if(!A)return;var dt=[];if(A.forEach(function(an,rn){dt[rn]={x:0,y:0}}),l.applyCalculate(A,B,dt,we,be),ke){var Ot=l.clusterGravity||Ne;A.forEach(function(an,rn){if(!K(an.x)||!K(an.y))return;var Hn=Me[an.cluster],Zn=Math.sqrt((an.x-Hn.cx)*(an.x-Hn.cx)+(an.y-Hn.cy)*(an.y-Hn.cy)),Rr=we*Ot;dt[rn].x-=Rr*(an.x-Hn.cx)/Zn,dt[rn].y-=Rr*(an.y-Hn.cy)/Zn});for(var _t in Me)Me[_t].cx=0,Me[_t].cy=0,Me[_t].count=0;A.forEach(function(an){var rn=Me[an.cluster];K(an.x)&&(rn.cx+=an.x),K(an.y)&&(rn.cy+=an.y),rn.count++});for(var En in Me)Me[En].cx/=Me[En].count,Me[En].cy/=Me[En].count}A.forEach(function(an,rn){if(!K(an.x)||!K(an.y))return;var Hn=.01*we*Ne;dt[rn].x-=Hn*(an.x-H[0]),dt[rn].y-=Hn*(an.y-H[1])}),A.forEach(function(an,rn){if(K(an.fx)&&K(an.fy)){an.x=an.fx,an.y=an.fy;return}if(!K(an.x)||!K(an.y))return;var Hn=Math.sqrt(dt[rn].x*dt[rn].x+dt[rn].y*dt[rn].y);if(Hn>0){var Zn=Math.min(oe*(xe/Cn),Hn);an.x+=dt[rn].x/Hn*Zn,an.y+=dt[rn].y/Hn*Zn}}),l.tick&&l.tick(),Xe++,Xe>=X&&(l.onLayoutEnd&&l.onLayoutEnd(),window.clearInterval(l.timeInterval))},0),{nodes:A,edges:B}}},{key:"applyCalculate",value:function(l,A,B,X,H){var ne=this;ne.calRepulsive(l,B,H),A&&ne.calAttractive(A,B,X)}},{key:"calRepulsive",value:function(l,A,B){l.forEach(function(X,H){A[H]={x:0,y:0},l.forEach(function(ne,oe){if(H===oe)return;if(!K(X.x)||!K(ne.x)||!K(X.y)||!K(ne.y))return;var be=X.x-ne.x,we=X.y-ne.y,Ne=be*be+we*we;if(Ne===0){Ne=1;var xe=H>oe?1:-1;be=.01*xe,we=.01*xe}var ke=B/Ne;A[H].x+=be*ke,A[H].y+=we*ke})})}},{key:"calAttractive",value:function(l,A,B){var X=this;l.forEach(function(H){if(!H.source||!H.target)return;var ne=X.nodeIdxMap[H.source],oe=X.nodeIdxMap[H.target];if(ne===oe)return;var be=X.nodeMap[H.source],we=X.nodeMap[H.target];if(!K(we.x)||!K(be.x)||!K(we.y)||!K(be.y))return;var Ne=we.x-be.x,xe=we.y-be.y,ke=Math.sqrt(Ne*Ne+xe*xe),Me=ke*ke/B;A[oe].x-=Ne/ke*Me,A[oe].y-=xe/ke*Me,A[ne].x+=Ne/ke*Me,A[ne].y+=xe/ke*Me})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var l=this;l.stop(),l.tick=null,l.nodes=null,l.edges=null,l.destroyed=!0}},{key:"getType",value:function(){return"fruchterman"}}]),v}(D),Dr=u(40),en=u.n(Dr),sr=u(14),Kr=u.n(sr),ma=u(9),sa=u.n(ma),Yo=u(10),ka=u.n(Yo),bi=u(15),Na=u.n(bi),Sa=u(36),rt=u(2),Rn=u(0),Qr=u(8);function mi(P){return typeof P=="number"}function Hi(P){return P===void 0?0:P>360||P<-360?P%360:P}function ho(P,M,v){return mi(P)?Rn.d.fromValues(P,M,v):P.length===3?Rn.d.clone(P):Rn.d.fromValues(P[0],P[1],P[2])}var Ao=function(){function P(M,v){sa()(this,P),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=M,this.matrix=Rn.b.clone(v.matrix),this.right=Rn.d.clone(v.right),this.up=Rn.d.clone(v.up),this.forward=Rn.d.clone(v.forward),this.position=Rn.d.clone(v.position),this.focalPoint=Rn.d.clone(v.focalPoint),this.distanceVector=Rn.d.clone(v.distanceVector),this.azimuth=v.azimuth,this.elevation=v.elevation,this.roll=v.roll,this.relAzimuth=v.relAzimuth,this.relElevation=v.relElevation,this.relRoll=v.relRoll,this.dollyingStep=v.dollyingStep,this.distance=v.distance}return ka()(P,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(v){v.matrix=Rn.b.copy(v.matrix,this.matrix),v.right=Rn.d.copy(v.right,this.right),v.up=Rn.d.copy(v.up,this.up),v.forward=Rn.d.copy(v.forward,this.forward),v.position=Rn.d.copy(v.position,this.position),v.focalPoint=Rn.d.copy(v.focalPoint,this.focalPoint),v.distanceVector=Rn.d.copy(v.distanceVector,this.distanceVector),v.azimuth=this.azimuth,v.elevation=this.elevation,v.roll=this.roll,v.relAzimuth=this.relAzimuth,v.relElevation=this.relElevation,v.relRoll=this.relRoll,v.dollyingStep=this.dollyingStep,v.distance=this.distance}}]),P}(),uo,Io,Lo,Vi,wu,Qo,el,ua;(function(P){P.ORBITING="ORBITING",P.EXPLORING="EXPLORING",P.TRACKING="TRACKING"})(ua||(ua={}));var fs;(function(P){P.DEFAULT="DEFAULT",P.ROTATIONAL="ROTATIONAL",P.TRANSLATIONAL="TRANSLATIONAL",P.CINEMATIC="CINEMATIC"})(fs||(fs={}));var Cu;(function(P){P.ORTHOGRAPHIC="ORTHOGRAPHIC",P.PERSPECTIVE="PERSPECTIVE"})(Cu||(Cu={}));var Ps=Math.PI/180,xs=180/Math.PI,ju=(uo=Object(Qr.injectable)(),Io=Object(Qr.inject)(rt.IDENTIFIER.InteractorService),uo(Lo=(Vi=(el=Qo=function(){function P(){sa()(this,P),this.matrix=Rn.b.create(),this.right=Rn.d.fromValues(1,0,0),this.up=Rn.d.fromValues(0,1,0),this.forward=Rn.d.fromValues(0,0,1),this.position=Rn.d.fromValues(0,0,1),this.focalPoint=Rn.d.fromValues(0,0,0),this.distanceVector=Rn.d.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=Infinity,this.minDistance=-Infinity,this.rotateWorld=!1,Kr()(this,"interactor",wu,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Rn.b.create(),this.view=void 0,this.following=void 0,this.type=ua.EXPLORING,this.trackingMode=fs.DEFAULT,this.projectionMode=Cu.PERSPECTIVE,this.frustum=new rt.Frustum,this.landmarks=[],this.landmarkAnimationID=void 0}return ka()(P,[{key:"clone",value:function(){var v=new P;return v.setType(this.type,void 0),v.interactor=this.interactor,v}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(v,m){return this.type=v,this.type===ua.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===ua.TRACKING&&m!==void 0&&this.setTrackingMode(m),this}},{key:"setProjectionMode",value:function(v){return this.projectionMode=v,this}},{key:"setTrackingMode",value:function(v){if(this.type!==ua.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=v,this}},{key:"setWorldRotation",value:function(v){this.rotateWorld=v,this._getAngles()}},{key:"getViewTransform",value:function(){return Rn.b.invert(Rn.b.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(v){return this.matrix=v,this._update(),this}},{key:"setAspect",value:function(v){return this.setPerspective(this.near,this.far,this.fov,v),this}},{key:"setViewOffset",value:function(v,m,l,A,B,X){return this.aspect=v/m,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=v,this.view.fullHeight=m,this.view.offsetX=l,this.view.offsetY=A,this.view.width=B,this.view.height=X,this.projectionMode===Cu.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Cu.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(v,m,l,A){return this.projectionMode=Cu.PERSPECTIVE,this.fov=l,this.near=v,this.far=m,this.aspect=A,Rn.b.perspective(this.perspective,this.fov*Ps,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(v,m,l,A,B,X){this.projectionMode=Cu.ORTHOGRAPHIC,this.rright=m,this.left=v,this.top=l,this.bottom=A,this.near=B,this.far=X;var H=(this.rright-this.left)/(2*this.zoom),ne=(this.top-this.bottom)/(2*this.zoom),oe=(this.rright+this.left)/2,be=(this.top+this.bottom)/2,we=oe-H,Ne=oe+H,xe=be+ne,ke=be-ne;if(this.view!==void 0&&this.view.enabled){var Me=(this.rright-this.left)/this.view.fullWidth/this.zoom,He=(this.top-this.bottom)/this.view.fullHeight/this.zoom;we+=Me*this.view.offsetX,Ne=we+Me*this.view.width,xe-=He*this.view.offsetY,ke=xe-He*this.view.height}return Rn.b.ortho(this.perspective,we,Ne,xe,ke,B,X),this}},{key:"setPosition",value:function(v,m,l){return this._setPosition(v,m,l),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(v,m,l){var A=Rn.d.fromValues(0,1,0);if(this.focalPoint=ho(v,m,l),this.trackingMode===fs.CINEMATIC){var B=Rn.d.subtract(Rn.d.create(),this.focalPoint,this.position);v=B[0],m=B[1],l=B[2];var X=Rn.d.length(B),H=Math.asin(m/X)*xs,ne=90+Math.atan2(l,v)*xs,oe=Rn.b.create();Rn.b.rotateY(oe,oe,ne*Ps),Rn.b.rotateX(oe,oe,H*Ps),A=Rn.d.transformMat4(Rn.d.create(),[0,1,0],oe)}return Rn.b.invert(this.matrix,Rn.b.lookAt(Rn.b.create(),this.position,this.focalPoint,A)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(v){if(this.distance===v||v<0)return;this.distance=v,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var m=Rn.d.create();v=this.distance;var l=this.forward,A=this.focalPoint;return m[0]=v*l[0]+A[0],m[1]=v*l[1]+A[1],m[2]=v*l[2]+A[2],this._setPosition(m),this}},{key:"setMaxDistance",value:function(v){return this.maxDistance=v,this}},{key:"setMinDistance",value:function(v){return this.minDistance=v,this}},{key:"changeAzimuth",value:function(v){return this.setAzimuth(this.azimuth+v),this}},{key:"changeElevation",value:function(v){return this.setElevation(this.elevation+v),this}},{key:"changeRoll",value:function(v){return this.setRoll(this.roll+v),this}},{key:"setAzimuth",value:function(v){return this.azimuth=Hi(v),this.computeMatrix(),this._getAxes(),this.type===ua.ORBITING||this.type===ua.EXPLORING?this._getPosition():this.type===ua.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(v){return this.elevation=Hi(v),this.computeMatrix(),this._getAxes(),this.type===ua.ORBITING||this.type===ua.EXPLORING?this._getPosition():this.type===ua.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(v){return this.roll=Hi(v),this.computeMatrix(),this._getAxes(),this.type===ua.ORBITING||this.type===ua.EXPLORING?this._getPosition():this.type===ua.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(v,m,l){if(this.type===ua.EXPLORING){v=Hi(v),m=Hi(m),l=Hi(l);var A=Rn.c.setAxisAngle(Rn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*m*Ps),B=Rn.c.setAxisAngle(Rn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*v*Ps),X=Rn.c.setAxisAngle(Rn.c.create(),[0,0,1],l*Ps),H=Rn.c.multiply(Rn.c.create(),B,A);H=Rn.c.multiply(Rn.c.create(),H,X);var ne=Rn.b.fromQuat(Rn.b.create(),H);Rn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),Rn.b.multiply(this.matrix,this.matrix,ne),Rn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+m)>90)return;this.relElevation=Hi(m),this.relAzimuth=Hi(v),this.relRoll=Hi(l),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===ua.ORBITING||this.type===ua.EXPLORING?this._getPosition():this.type===ua.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(v,m){var l=ho(v,m,0),A=Rn.d.clone(this.position);return Rn.d.add(A,A,Rn.d.scale(Rn.d.create(),this.right,l[0])),Rn.d.add(A,A,Rn.d.scale(Rn.d.create(),this.up,l[1])),this._setPosition(A),this}},{key:"dolly",value:function(v){var m=this.forward,l=Rn.d.clone(this.position),A=v*this.dollyingStep,B=this.distance+v*this.dollyingStep;return A=Math.max(Math.min(B,this.maxDistance),this.minDistance)-this.distance,l[0]+=A*m[0],l[1]+=A*m[1],l[2]+=A*m[2],this._setPosition(l),this.type===ua.ORBITING||this.type===ua.EXPLORING?this._getDistance():this.type===ua.TRACKING&&Rn.d.add(this.focalPoint,l,this.distanceVector),this}},{key:"createLandmark",value:function(v,m){var l=this.clone();l.setPosition(m.position),l.setFocalPoint(m.focalPoint),m.roll!==void 0&&l.setRoll(m.roll);var A=new Ao(v,l);return this.landmarks.push(A),A}},{key:"setLandmark",value:function(v){var m=new Ao(v,this);return this.landmarks.push(m),this}},{key:"gotoLandmark",value:function(v){var m=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,A=this.landmarks.find(function(be){return be.name===v});if(A){if(l===0){A.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var B=A.getPosition(),X=A.getFocalPoint(),H=A.getRoll(),ne,oe=function be(we){ne===void 0&&(ne=we);var Ne=we-ne,xe=(1-Math.cos(Ne/l*Math.PI))/2,ke=Rn.d.create(),Me=Rn.d.create(),He=0;Rn.d.lerp(ke,m.focalPoint,X,xe),Rn.d.lerp(Me,m.position,B,xe),He=m.roll*(1-xe)+H*xe,m.setFocalPoint(ke),m.setPosition(Me),m.setRoll(He),m.computeMatrix();var Xe=Rn.d.dist(ke,X)+Rn.d.dist(Me,B);if(!(Xe>.01)){m.setFocalPoint(ke),m.setPosition(Me),m.setRoll(He),m.computeMatrix(),m.interactor.connect();return}Ne<l&&(m.landmarkAnimationID=window.requestAnimationFrame(be))};window.requestAnimationFrame(oe)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var v,m,l=Rn.c.setAxisAngle(Rn.c.create(),[0,0,1],this.roll*Ps);Rn.b.identity(this.matrix),v=Rn.c.setAxisAngle(Rn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==ua.TRACKING||this.type===ua.TRACKING?1:-1)*this.elevation*Ps),m=Rn.c.setAxisAngle(Rn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==ua.TRACKING||this.type===ua.TRACKING?1:-1)*this.azimuth*Ps);var A=Rn.c.multiply(Rn.c.create(),m,v);A=Rn.c.multiply(Rn.c.create(),A,l);var B=Rn.b.fromQuat(Rn.b.create(),A);this.type===ua.ORBITING||this.type===ua.EXPLORING?(Rn.b.translate(this.matrix,this.matrix,this.focalPoint),Rn.b.multiply(this.matrix,this.matrix,B),Rn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===ua.TRACKING&&(Rn.b.translate(this.matrix,this.matrix,this.position),Rn.b.multiply(this.matrix,this.matrix,B))}},{key:"_setPosition",value:function(v,m,l){this.position=ho(v,m,l);var A=this.matrix;A[12]=this.position[0],A[13]=this.position[1],A[14]=this.position[2],A[15]=1}},{key:"_getAxes",value:function(){Rn.d.copy(this.right,ho(Rn.e.transformMat4(Rn.e.create(),[1,0,0,0],this.matrix))),Rn.d.copy(this.up,ho(Rn.e.transformMat4(Rn.e.create(),[0,1,0,0],this.matrix))),Rn.d.copy(this.forward,ho(Rn.e.transformMat4(Rn.e.create(),[0,0,1,0],this.matrix))),Rn.d.normalize(this.right,this.right),Rn.d.normalize(this.up,this.up),Rn.d.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var v=this.distanceVector[0],m=this.distanceVector[1],l=this.distanceVector[2],A=Rn.d.length(this.distanceVector);if(A===0){this.elevation=0,this.azimuth=0;return}this.type===ua.TRACKING?(this.elevation=Math.asin(m/A)*xs,this.azimuth=Math.atan2(-v,-l)*xs):this.rotateWorld?(this.elevation=Math.asin(m/A)*xs,this.azimuth=Math.atan2(-v,-l)*xs):(this.elevation=-Math.asin(m/A)*xs,this.azimuth=-Math.atan2(-v,-l)*xs)}},{key:"_getPosition",value:function(){Rn.d.copy(this.position,ho(Rn.e.transformMat4(Rn.e.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Rn.d.transformMat3(this.distanceVector,[0,0,-this.distance],Rn.a.fromMat4(Rn.a.create(),this.matrix)),Rn.d.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Rn.d.subtract(Rn.d.create(),this.focalPoint,this.position),this.distance=Rn.d.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),P}(),Qo.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},el),wu=Na()(Vi.prototype,"interactor",[Io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vi))||Lo),ru,Is,au,Uu,Fu,ws,hs,Eo=(ru=Object(Qr.injectable)(),Is=Object(Qr.inject)(rt.IDENTIFIER.GeometryComponentManager),ru(au=(Uu=(hs=ws=function(){function P(){sa()(this,P),this.config=void 0,Kr()(this,"geometry",Fu,this),this.entity=void 0,this.component=void 0}return ka()(P,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(v){this.config=v}},{key:"setEntity",value:function(v){this.entity=v,this.component=this.geometry.create(v),this.component.entity=v,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),P}(),ws.BOX="box",ws.SPHERE="sphere",ws.PLANE="plane",ws.MERGED="merged",hs),Fu=Na()(Uu.prototype,"geometry",[Is],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uu))||au),Ul=u(13),Ua=u.n(Ul),b=u(19),N=u.n(b),te=u(7),ee=u.n(te),ce=u(11);function Ve(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var ft={}.toString,yt=function(M,v){return ft.call(M)==="[object "+v+"]"},Ct=yt,Xt=function(P){return Array.isArray?Array.isArray(P):Ct(P,"Array")},un=u(41),_n=u.n(un),Fn=9007199254740991,jn="[object Arguments]",Ar="[object Array]",Nr="[object Boolean]",Wn="[object Date]",Yr="[object Error]",Xa="[object Function]",Ta="[object Map]",xa="[object Number]",wa="[object Object]",Oa="[object RegExp]",Ki="[object Set]",_i="[object String]",$i="[object WeakMap]",ki="[object ArrayBuffer]",Ui="[object DataView]",bt="[object Float32Array]",Je="[object Float64Array]",It="[object Int8Array]",Dn="[object Int16Array]",hn="[object Int32Array]",rr="[object Uint8Array]",Or="[object Uint8ClampedArray]",jr="[object Uint16Array]",ta="[object Uint32Array]",Gr={};Gr[bt]=Gr[Je]=Gr[It]=Gr[Dn]=Gr[hn]=Gr[rr]=Gr[Or]=Gr[jr]=Gr[ta]=!0,Gr[jn]=Gr[Ar]=Gr[ki]=Gr[Nr]=Gr[Ui]=Gr[Wn]=Gr[Yr]=Gr[Xa]=Gr[Ta]=Gr[xa]=Gr[wa]=Gr[Oa]=Gr[Ki]=Gr[_i]=Gr[$i]=!1;function za(P){return function(M){return P(M)}}var Fa=Object.prototype,fi=Fa.toString;function Zi(P){return ai(P)&&zi(P.length)&&!!Gr[fi.call(P)]}function zi(P){return typeof P=="number"&&P>-1&&P%1===0&&P<=Fn}function ai(P){return!!P&&_n()(P)==="object"}var Yi=Zi,Ei,ao,ps,iu,Xs,Cs,Of,rc;function Kc(P,M){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(P);M&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),v.push.apply(v,m)}return v}function $c(P){for(var M=1;M<arguments.length;M++){var v=arguments[M]!=null?arguments[M]:{};M%2?Kc(Object(v),!0).forEach(function(m){ee()(P,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):Kc(Object(v)).forEach(function(m){Object.defineProperty(P,m,Object.getOwnPropertyDescriptor(v,m))})}return P}var Yc=(Ei=Object(Qr.injectable)(),ao=Object(Qr.inject)(rt.IDENTIFIER.RenderEngine),ps=Object(Qr.inject)(rt.IDENTIFIER.ConfigService),Ei(iu=(Xs=(rc=function(){function P(){sa()(this,P),Kr()(this,"engine",Cs,this),Kr()(this,"configService",Of,this),this.entity=Object(rt.createEntity)(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return ka()(P,[{key:"init",value:function(){var v=this.configService.get(),m=v.canvas,l=v.engineOptions;this.initPromise=this.engine.init($c({canvas:m||Ve(),swapChainFormat:ce.TextureFormat.BGRA8Unorm,antialiasing:!1},l))}},{key:"setBundle",value:function(v){this.compiledBundle=JSON.parse(JSON.stringify(v))}},{key:"setDispatch",value:function(v){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=v),this}},{key:"setMaxIteration",value:function(v){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=v),this}},{key:"setBinding",value:function(v,m){var l=this;if(typeof v=="string"){var A=mi(m)||Yi(m)||Xt(m);if(this.compiledBundle&&this.compiledBundle.context){var B=this.compiledBundle.context.defines.find(function(H){return H.name===v});if(B)return B.value=m,this;var X=this.compiledBundle.context.uniforms.find(function(H){return H.name===v});X&&(A?(X.data=m,X.isReferer=!1,X.storageClass===rt.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(v,m):this.model&&this.model.updateBuffer(v,m)):(X.isReferer=!0,X.data=m))}}else Object.keys(v).forEach(function(H){l.setBinding(H,v[H])});return this}},{key:"execute",value:function(){var M=N()(Ua.a.mark(function m(){var l=this,A,B,X=arguments;return Ua.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(A=X.length>0&&X[0]!==void 0?X[0]:1,!this.dirty){ne.next=6;break}return this.compiledBundle.context&&(A>1?this.compiledBundle.context.maxIteration=A:this.compiledBundle.context.maxIteration++),ne.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(oe){var be=oe.isReferer;return be}).forEach(function(oe){var be=oe.data,we=oe.name;l.model.confirmInput(be.model,we)}),B=0;B<A;B++)this.model.run();return this.engine.endFrame(),ne.abrupt("return",this);case 12:case"end":return ne.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"getOutput",value:function(){var M=N()(Ua.a.mark(function m(){return Ua.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",this.model.readData());case 1:case"end":return A.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"compile",value:function(){var M=N()(Ua.a.mark(function m(){var l,A,B;return Ua.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,this.initPromise;case 2:return l=$c({},this.compiledBundle.context),A=this.engine.supportWebGPU?this.engine.useWGSL?rt.Target.WGSL:rt.Target.GLSL450:rt.Target.GLSL100,B=this.compiledBundle.shaders[A],l.defines.filter(function(ne){return ne.runtime}).forEach(function(ne){var oe="".concat(rt.DefineValuePlaceholder).concat(ne.name);B=B.replace(oe,"".concat(ne.value))}),l.shader=B,l.uniforms.forEach(function(ne){if(!ne.data&&ne.storageClass===rt.STORAGE_CLASS.StorageBuffer){var oe=1;ne.type===rt.AST_TOKEN_TYPES.FloatArray?oe=1:ne.type===rt.AST_TOKEN_TYPES.Vector4FloatArray&&(oe=4),ne.data=new Float32Array(l.output.length*oe).fill(0)}}),this.compiledBundle.context=l,H.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=H.sent;case 12:case"end":return H.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()}]),P}(),rc),Cs=Na()(Xs.prototype,"engine",[ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Of=Na()(Xs.prototype,"configService",[ps],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xs))||iu),tf,Sf,Df,nf,Zf,Fl,qf,Bl=(tf=Object(Qr.injectable)(),Sf=Object(Qr.inject)(rt.IDENTIFIER.MaterialComponentManager),tf(Df=(nf=(qf=Fl=function(){function P(){sa()(this,P),this.config=void 0,Kr()(this,"material",Zf,this),this.entity=void 0,this.component=void 0}return ka()(P,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(v){this.config=v}},{key:"setEntity",value:function(v,m){this.entity=v,this.component=this.material.create(v),this.component.entity=v,this.component.type=m,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),P}(),Fl.BASIC="basic",qf),Zf=Na()(nf.prototype,"material",[Sf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf))||Df),Qc,Mf,Cd,_f,kf,ac,Nf,Vl,ic,qi,Gi,bl,ss,ko,Ls=(Qc=Object(Qr.injectable)(),Mf=Object(Qr.inject)(rt.IDENTIFIER.MeshComponentManager),Cd=Object(Qr.inject)(rt.IDENTIFIER.CullableComponentManager),_f=Object(Qr.inject)(rt.IDENTIFIER.TransformComponentManager),kf=Object(Qr.inject)(rt.IDENTIFIER.Systems),ac=Object(Qr.named)(rt.IDENTIFIER.SceneGraphSystem),Qc(Nf=(Vl=(ko=ss=function(){function P(){sa()(this,P),this.attributes={},this.config=void 0,Kr()(this,"mesh",ic,this),Kr()(this,"cullable",qi,this),Kr()(this,"transform",Gi,this),Kr()(this,"sceneGraphSystem",bl,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return ka()(P,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(v){this.config=v}},{key:"setEntity",value:function(v){this.entity=v,this.cullable.create(v),this.meshComponent=this.mesh.create(v),this.transformComponent=this.transform.create(v),this.onEntityCreated()}},{key:"setMaterial",value:function(v){return this.meshComponent.material=v,this}},{key:"setGeometry",value:function(v){return this.meshComponent.geometry=v,this}},{key:"setAttributes",value:function(v){var m=this;Object.keys(v).forEach(function(l){v[l]!==void 0&&v[l]!==m.attributes[l]&&(m.onAttributeChanged({name:l,data:v[l]}),m.attributes[l]=v[l])})}},{key:"setVisible",value:function(v){var m=this;return this.meshComponent.visible=v,this.meshComponent.children.forEach(function(l){var A=m.mesh.getComponentByEntity(l);A&&(A.visible=v)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(v){return this.sceneGraphSystem.attach(this.entity,v.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(v){var m=v.name,l=v.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(m),l)}},{key:"convertAttributeName2UniformName",value:function(v){return v}}]),P}(),ss.POINT="point",ss.LINE="line",ss.GRID="grid",ko),ic=Na()(Vl.prototype,"mesh",[Mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qi=Na()(Vl.prototype,"cullable",[Cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gi=Na()(Vl.prototype,"transform",[_f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl=Na()(Vl.prototype,"sceneGraphSystem",[kf,ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vl))||Nf),Bu=u(285),Ts=u.n(Bu),Td=function(){function P(M,v){sa()(this,P),this.attribute=void 0,this.buffer=void 0;var m=v.buffer,l=v.offset,A=v.stride,B=v.normalized,X=v.size,H=v.divisor;this.buffer=m,this.attribute={buffer:m.get(),offset:l||0,stride:A||0,normalized:B||!1,divisor:H||0},X&&(this.attribute.size=X)}return ka()(P,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(v){this.buffer.subData(v)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),P}(),tl,Tc,Tu,ou,Ad,El,Jc,Od,Vu,Ac,Jo,zu,Gu,Sd,eh=(tl={},ee()(tl,rt.gl.POINTS,"points"),ee()(tl,rt.gl.LINES,"lines"),ee()(tl,rt.gl.LINE_LOOP,"line loop"),ee()(tl,rt.gl.LINE_STRIP,"line strip"),ee()(tl,rt.gl.TRIANGLES,"triangles"),ee()(tl,rt.gl.TRIANGLE_FAN,"triangle fan"),ee()(tl,rt.gl.TRIANGLE_STRIP,"triangle strip"),tl),Dd=(Tc={},ee()(Tc,rt.gl.STATIC_DRAW,"static"),ee()(Tc,rt.gl.DYNAMIC_DRAW,"dynamic"),ee()(Tc,rt.gl.STREAM_DRAW,"stream"),Tc),Qi=(Tu={},ee()(Tu,rt.gl.BYTE,"int8"),ee()(Tu,rt.gl.UNSIGNED_INT,"int16"),ee()(Tu,rt.gl.INT,"int32"),ee()(Tu,rt.gl.UNSIGNED_BYTE,"uint8"),ee()(Tu,rt.gl.UNSIGNED_SHORT,"uint16"),ee()(Tu,rt.gl.UNSIGNED_INT,"uint32"),ee()(Tu,rt.gl.FLOAT,"float"),Tu),Ih=(ou={},ee()(ou,rt.gl.ALPHA,"alpha"),ee()(ou,rt.gl.LUMINANCE,"luminance"),ee()(ou,rt.gl.LUMINANCE_ALPHA,"luminance alpha"),ee()(ou,rt.gl.RGB,"rgb"),ee()(ou,rt.gl.RGBA,"rgba"),ee()(ou,rt.gl.RGBA4,"rgba4"),ee()(ou,rt.gl.RGB5_A1,"rgb5 a1"),ee()(ou,rt.gl.RGB565,"rgb565"),ee()(ou,rt.gl.DEPTH_COMPONENT,"depth"),ee()(ou,rt.gl.DEPTH_STENCIL,"depth stencil"),ou),zl=(Ad={},ee()(Ad,rt.gl.DONT_CARE,"dont care"),ee()(Ad,rt.gl.NICEST,"nice"),ee()(Ad,rt.gl.FASTEST,"fast"),Ad),Md=(El={},ee()(El,rt.gl.NEAREST,"nearest"),ee()(El,rt.gl.LINEAR,"linear"),ee()(El,rt.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),ee()(El,rt.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),ee()(El,rt.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),ee()(El,rt.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),El),Gl=(Jc={},ee()(Jc,rt.gl.REPEAT,"repeat"),ee()(Jc,rt.gl.CLAMP_TO_EDGE,"clamp"),ee()(Jc,rt.gl.MIRRORED_REPEAT,"mirror"),Jc),Xl=(Od={},ee()(Od,rt.gl.NONE,"none"),ee()(Od,rt.gl.BROWSER_DEFAULT_WEBGL,"browser"),Od),su=(Vu={},ee()(Vu,rt.gl.NEVER,"never"),ee()(Vu,rt.gl.ALWAYS,"always"),ee()(Vu,rt.gl.LESS,"less"),ee()(Vu,rt.gl.LEQUAL,"lequal"),ee()(Vu,rt.gl.GREATER,"greater"),ee()(Vu,rt.gl.GEQUAL,"gequal"),ee()(Vu,rt.gl.EQUAL,"equal"),ee()(Vu,rt.gl.NOTEQUAL,"notequal"),Vu),_d=(Ac={},ee()(Ac,rt.gl.FUNC_ADD,"add"),ee()(Ac,rt.gl.MIN_EXT,"min"),ee()(Ac,rt.gl.MAX_EXT,"max"),ee()(Ac,rt.gl.FUNC_SUBTRACT,"subtract"),ee()(Ac,rt.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ac),oc=(Jo={},ee()(Jo,rt.gl.ZERO,"zero"),ee()(Jo,rt.gl.ONE,"one"),ee()(Jo,rt.gl.SRC_COLOR,"src color"),ee()(Jo,rt.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),ee()(Jo,rt.gl.SRC_ALPHA,"src alpha"),ee()(Jo,rt.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),ee()(Jo,rt.gl.DST_COLOR,"dst color"),ee()(Jo,rt.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),ee()(Jo,rt.gl.DST_ALPHA,"dst alpha"),ee()(Jo,rt.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),ee()(Jo,rt.gl.CONSTANT_COLOR,"constant color"),ee()(Jo,rt.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),ee()(Jo,rt.gl.CONSTANT_ALPHA,"constant alpha"),ee()(Jo,rt.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),ee()(Jo,rt.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),Jo),sc=(zu={},ee()(zu,rt.gl.NEVER,"never"),ee()(zu,rt.gl.ALWAYS,"always"),ee()(zu,rt.gl.LESS,"less"),ee()(zu,rt.gl.LEQUAL,"lequal"),ee()(zu,rt.gl.GREATER,"greater"),ee()(zu,rt.gl.GEQUAL,"gequal"),ee()(zu,rt.gl.EQUAL,"equal"),ee()(zu,rt.gl.NOTEQUAL,"notequal"),zu),Oc=(Gu={},ee()(Gu,rt.gl.ZERO,"zero"),ee()(Gu,rt.gl.KEEP,"keep"),ee()(Gu,rt.gl.REPLACE,"replace"),ee()(Gu,rt.gl.INVERT,"invert"),ee()(Gu,rt.gl.INCR,"increment"),ee()(Gu,rt.gl.DECR,"decrement"),ee()(Gu,rt.gl.INCR_WRAP,"increment wrap"),ee()(Gu,rt.gl.DECR_WRAP,"decrement wrap"),Gu),th=(Sd={},ee()(Sd,rt.gl.FRONT,"front"),ee()(Sd,rt.gl.BACK,"back"),Sd),js=function(){function P(M,v){sa()(this,P),this.buffer=void 0;var m=v.data,l=v.usage,A=v.type;this.buffer=M.buffer({data:m,usage:Dd[l||rt.gl.STATIC_DRAW],type:Qi[A||rt.gl.UNSIGNED_BYTE]})}return ka()(P,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(v){var m=v.data,l=v.offset;this.buffer.subdata(m,l)}}]),P}(),nh=u(29),Oo=u.n(nh),Ws=9007199254740991,Zc="[object Arguments]",kd="[object Array]",Sc="[object Boolean]",rf="[object Date]",Rf="[object Error]",Pf="[object Function]",rh="[object Map]",Dc="[object Number]",Us="[object Object]",Au="[object RegExp]",qc="[object Set]",Nd="[object String]",Ou="[object WeakMap]",Su="[object ArrayBuffer]",ah="[object DataView]",xl="[object Float32Array]",If="[object Float64Array]",wl="[object Int8Array]",ed="[object Int16Array]",td="[object Int32Array]",uc="[object Uint8Array]",af="[object Uint8ClampedArray]",nd="[object Uint16Array]",rd="[object Uint32Array]",io={};io[xl]=io[If]=io[wl]=io[ed]=io[td]=io[uc]=io[af]=io[nd]=io[rd]=!0,io[Zc]=io[kd]=io[Su]=io[Sc]=io[ah]=io[rf]=io[Rf]=io[Pf]=io[rh]=io[Dc]=io[Us]=io[Au]=io[qc]=io[Nd]=io[Ou]=!1;function Rd(P){return function(M){return P(M)}}var Mc=Object.prototype,ad=Mc.toString;function of(P){return Pd(P)&&lc(P.length)&&!!io[ad.call(P)]}function lc(P){return typeof P=="number"&&P>-1&&P%1===0&&P<=Ws}function Pd(P){return!!P&&_n()(P)==="object"}var cc=of;function Xu(P,M){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(P);M&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),v.push.apply(v,m)}return v}function _c(P){for(var M=1;M<arguments.length;M++){var v=arguments[M]!=null?arguments[M]:{};M%2?Xu(Object(v),!0).forEach(function(m){ee()(P,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):Xu(Object(v)).forEach(function(m){Object.defineProperty(P,m,Object.getOwnPropertyDescriptor(v,m))})}return P}var Wu=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Hs=0,kc=!1,dc=function(){function P(M,v){var m=this;sa()(this,P),this.reGl=M,this.context=v,this.entity=Object(rt.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var l={};this.context.uniforms.forEach(function(ne){var oe=ne.name,be=ne.type,we=ne.data,Ne=ne.isReferer,xe=ne.storageClass;if(xe===rt.STORAGE_CLASS.StorageBuffer){if(Ne)m.textureCache[oe]={data:void 0},l["".concat(oe,"Size")]=function(){return we.compiledBundle.context.output.textureSize};else{m.textureCache[oe]=m.calcDataTexture(oe,be,we);var ke=m.textureCache[oe],Me=ke.textureWidth,He=ke.isOutput;l["".concat(oe,"Size")]=[Me,Me],He&&(m.outputTextureName=oe,m.context.needPingpong&&(m.outputTextureName="".concat(oe,"Output"),m.textureCache[m.outputTextureName]=m.calcDataTexture(oe,be,we)))}l[oe]=function(){return kc&&console.log("[".concat(m.entity,"]: ").concat(oe," ").concat(m.textureCache[oe].id)),m.textureCache[oe].texture}}else if(xe===rt.STORAGE_CLASS.Uniform){if(we&&(Array.isArray(we)||cc(we))&&we.length>16)throw new Error("invalid data type ".concat(be));l[oe]=function(){return ne.data}}});var A=this.getOuputDataTexture(),B=A.textureWidth,X=A.texelCount;l.u_OutputTextureSize=[B,B],l.u_OutputTexelCount=X,this.context.output.textureSize=[B,B];var H={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:l,vert:Wu,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(H)}return ka()(P,[{key:"run",value:function(){var v=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){v.computeCommand()}),kc&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var M=N()(Ua.a.mark(function m(){var l=this,A,B,X,H,ne,oe,be,we;return Ua.a.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){A=l.reGl.read()}),!A){xe.next=6;break}if(B=this.getOuputDataTexture(),X=B.originalDataLength,H=B.elementsPerTexel,ne=B.typedArrayConstructor,oe=ne===void 0?Float32Array:ne,be=[],H!==4)for(we=0;we<A.length;we+=4)H===1?be.push(A[we]):H===2?be.push(A[we],A[we+1]):be.push(A[we],A[we+1],A[we+2]);else be=A;return xe.abrupt("return",new oe(be.slice(0,X)));case 6:return xe.abrupt("return",new Float32Array);case 7:case"end":return xe.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"confirmInput",value:function(v,m){var l;this.entity===v.entity?(this.dynamicPingpong=!0,l=this):l=v,this.textureCache[m].id=l.getOuputDataTexture().id,this.textureCache[m].texture=l.getOuputDataTexture().texture,kc&&console.log("[".concat(this.entity,"]: confirm input ").concat(m," from model ").concat(l.entity,", ").concat(l.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(v,m){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=this.context.uniforms.find(function(ne){var oe=ne.name;return oe===v});if(A){var B=this.calcDataTexture(v,A.type,m),X=B.texture,H=B.data;this.textureCache[v].data=H,this.textureCache[v].texture=X}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var v=this.context.output.name;this.textureCache[v].id=this.getOuputDataTexture().id,this.textureCache[v].texture=this.getOuputDataTexture().texture}var m=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=m,kc&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var v=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=v}},{key:"cloneDataTexture",value:function(v){var m=v.data,l=v.textureWidth;return _c(_c({},v),{},{id:Hs++,texture:this.reGl.texture({width:l,height:l,data:m,type:"float"})})}},{key:"calcDataTexture",value:function(v,m,l){var A=1;m===rt.AST_TOKEN_TYPES.Vector4FloatArray&&(A=4);for(var B=[],X=0;X<l.length;X+=A)A===1?B.push(l[X],0,0,0):A===2?B.push(l[X],l[X+1],0,0):A===3?B.push(l[X],l[X+1],l[X+2],0):A===4&&B.push(l[X],l[X+1],l[X+2],l[X+3]);var H=l.length,ne=Math.ceil(H/A),oe=Math.ceil(Math.sqrt(ne)),be=oe*oe;ne<be&&B.push.apply(B,Oo()(new Array((be-ne)*4).fill(0)));var we=this.reGl.texture({width:oe,height:oe,data:B,type:"float"});return{id:Hs++,data:B,originalDataLength:H,typedArrayConstructor:cc(l)?l.constructor:void 0,textureWidth:oe,texture:we,texelCount:ne,elementsPerTexel:A,isOutput:v===this.context.output.name}}}]),P}(),Id=function(){function P(M,v){sa()(this,P),this.elements=void 0;var m=v.data,l=v.usage,A=v.type,B=v.count;this.elements=M.elements({data:m,usage:Dd[l||rt.gl.STATIC_DRAW],type:Qi[A||rt.gl.UNSIGNED_BYTE],count:B})}return ka()(P,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(v){var m=v.data;this.elements.subdata(m)}},{key:"destroy",value:function(){this.elements.destroy()}}]),P}(),fc=function(){function P(M,v){sa()(this,P),this.framebuffer=void 0;var m=v.width,l=v.height,A=v.color,B=v.colors,X=v.depth,H=v.stencil,ne={width:m,height:l};Array.isArray(B)&&(ne.colors=B.map(function(oe){return oe.get()})),A&&typeof A!="boolean"&&(ne.color=A.get()),this.framebuffer=M.framebuffer(ne)}return ka()(P,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(v){var m=v.width,l=v.height;this.framebuffer.resize(m,l)}}]),P}();function No(P){var M=_n()(P);return P!=null&&(M==="object"||M==="function")}function nl(P){var M={};return Object.keys(P).forEach(function(v){id(v,P[v],M,"")}),M}function id(P,M,v,m){if(M===null||typeof M=="number"||typeof M=="boolean"||Array.isArray(M)&&typeof M[0]=="number"||cc(M)||M===""||M.resize!==void 0){v["".concat(m&&m+".").concat(P)]=M;return}No(M)&&Object.keys(M).forEach(function(l){id(l,M[l],v,"".concat(m&&m+".").concat(P))}),Array.isArray(M)&&M.forEach(function(l,A){Object.keys(l).forEach(function(B){id(B,l[B],v,"".concat(m&&m+".").concat(P,"[").concat(A,"]"))})})}function od(P,M){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(P);M&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),v.push.apply(v,m)}return v}function Zo(P){for(var M=1;M<arguments.length;M++){var v=arguments[M]!=null?arguments[M]:{};M%2?od(Object(v),!0).forEach(function(m){ee()(P,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):od(Object(v)).forEach(function(m){Object.defineProperty(P,m,Object.getOwnPropertyDescriptor(v,m))})}return P}var rl=function(){function P(M,v){sa()(this,P),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=M;var m=v.vs,l=v.fs,A=v.defines,B=v.attributes,X=v.uniforms,H=v.primitive,ne=v.count,oe=v.elements,be=v.depth,we=v.blend,Ne=v.stencil,xe=v.cull,ke=v.instances,Me=v.scissor,He=v.viewport,Xe={};X&&(this.uniforms=nl(X),Object.keys(X).forEach(function(En){Xe[En]=M.prop(En)}));var dt={};Object.keys(B).forEach(function(En){dt[En]=B[En].get()});var Ot=A&&this.generateDefines(A)||"",_t={attributes:dt,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Ot,`
`).concat(l),uniforms:Xe,vert:`
`.concat(Ot,`
`).concat(m),primitive:eh[H===void 0?rt.gl.TRIANGLES:H]};ke&&(_t.instances=ke),ne&&(_t.count=ne),oe&&(_t.elements=oe.get()),Me&&(_t.scissor=Me),He&&(_t.viewport=He),this.initDepthDrawParams({depth:be},_t),this.initBlendDrawParams({blend:we},_t),this.initStencilDrawParams({stencil:Ne},_t),this.initCullDrawParams({cull:xe},_t),this.drawCommand=M(_t)}return ka()(P,[{key:"addUniforms",value:function(v){this.uniforms=Zo(Zo({},this.uniforms),nl(v))}},{key:"draw",value:function(v){var m=Zo(Zo({},this.uniforms),nl(v.uniforms||{})),l={};Object.keys(m).forEach(function(A){var B=_n()(m[A]);B==="boolean"||B==="number"||Array.isArray(m[A])||m[A].BYTES_PER_ELEMENT?l[A]=m[A]:B==="string"||(l[A]=m[A].get())}),this.drawCommand(l)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(v,m){var l=v.depth;l&&(m.depth={enable:l.enable===void 0?!0:!!l.enable,mask:l.mask===void 0?!0:!!l.mask,func:su[l.func||rt.gl.LESS],range:l.range||[0,1]})}},{key:"initBlendDrawParams",value:function(v,m){var l=v.blend;if(l){var A=l.enable,B=l.func,X=l.equation,H=l.color,ne=H===void 0?[0,0,0,0]:H;m.blend={enable:!!A,func:{srcRGB:oc[B&&B.srcRGB||rt.gl.SRC_ALPHA],srcAlpha:oc[B&&B.srcAlpha||rt.gl.SRC_ALPHA],dstRGB:oc[B&&B.dstRGB||rt.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:oc[B&&B.dstAlpha||rt.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:_d[X&&X.rgb||rt.gl.FUNC_ADD],alpha:_d[X&&X.alpha||rt.gl.FUNC_ADD]},color:ne}}}},{key:"initStencilDrawParams",value:function(v,m){var l=v.stencil;if(l){var A=l.enable,B=l.mask,X=B===void 0?-1:B,H=l.func,ne=H===void 0?{cmp:rt.gl.ALWAYS,ref:0,mask:-1}:H,oe=l.opFront,be=oe===void 0?{fail:rt.gl.KEEP,zfail:rt.gl.KEEP,zpass:rt.gl.KEEP}:oe,we=l.opBack,Ne=we===void 0?{fail:rt.gl.KEEP,zfail:rt.gl.KEEP,zpass:rt.gl.KEEP}:we;m.stencil={enable:!!A,mask:X,func:Zo(Zo({},ne),{},{cmp:sc[ne.cmp]}),opFront:{fail:Oc[be.fail],zfail:Oc[be.zfail],zpass:Oc[be.zpass]},opBack:{fail:Oc[Ne.fail],zfail:Oc[Ne.zfail],zpass:Oc[Ne.zpass]}}}}},{key:"initCullDrawParams",value:function(v,m){var l=v.cull;if(l){var A=l.enable,B=l.face,X=B===void 0?rt.gl.BACK:B;m.cull={enable:!!A,face:th[X]}}}},{key:"generateDefines",value:function(v){return Object.keys(v).map(function(m){return"#define ".concat(m," ").concat(Number(v[m]))}).join(`
`)}}]),P}(),qo=function(){function P(M,v){sa()(this,P),this.texture=void 0,this.width=void 0,this.height=void 0;var m=v.data,l=v.type,A=l===void 0?rt.gl.UNSIGNED_BYTE:l,B=v.width,X=v.height,H=v.flipY,ne=H===void 0?!1:H,oe=v.format,be=oe===void 0?rt.gl.RGBA:oe,we=v.mipmap,Ne=we===void 0?!1:we,xe=v.wrapS,ke=xe===void 0?rt.gl.CLAMP_TO_EDGE:xe,Me=v.wrapT,He=Me===void 0?rt.gl.CLAMP_TO_EDGE:Me,Xe=v.aniso,dt=Xe===void 0?0:Xe,Ot=v.alignment,_t=Ot===void 0?1:Ot,En=v.premultiplyAlpha,an=En===void 0?!1:En,rn=v.mag,Hn=rn===void 0?rt.gl.NEAREST:rn,Zn=v.min,Rr=Zn===void 0?rt.gl.NEAREST:Zn,ar=v.colorSpace,la=ar===void 0?rt.gl.BROWSER_DEFAULT_WEBGL:ar;this.width=B,this.height=X;var ya={width:B,height:X,type:Qi[A],format:Ih[be],wrapS:Gl[ke],wrapT:Gl[He],mag:Md[Hn],min:Md[Rr],alignment:_t,flipY:ne,colorSpace:Xl[la],premultiplyAlpha:an,aniso:dt};m&&(ya.data=m),typeof Ne=="number"?ya.mipmap=zl[Ne]:typeof Ne=="boolean"&&(ya.mipmap=Ne),this.texture=M.texture(ya)}return ka()(P,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(v){var m=v.width,l=v.height;this.texture.resize(m,l),this.width=m,this.height=l}},{key:"destroy",value:function(){this.texture.destroy()}}]),P}(),us,ls,Wl,uu=(us=Object(Qr.injectable)(),us(ls=(Wl=function(){function P(){var M=this;sa()(this,P),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var v=N()(Ua.a.mark(function m(l){return Ua.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!l.uniforms){B.next=3;break}return B.next=3,Promise.all(Object.keys(l.uniforms).map(function(){var X=N()(Ua.a.mark(function H(ne){var oe;return Ua.a.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(!(l.uniforms[ne]&&l.uniforms[ne].load!==void 0)){we.next=5;break}return we.next=3,l.uniforms[ne].load();case 3:oe=we.sent,l.uniforms[ne]=oe;case 5:case"end":return we.stop()}},H)}));return function(H){return X.apply(this,arguments)}}()));case 3:return B.abrupt("return",new rl(M.gl,l));case 4:case"end":return B.stop()}},m)}));return function(m){return v.apply(this,arguments)}}(),this.createAttribute=function(v){return new Td(M.gl,v)},this.createBuffer=function(v){return new js(M.gl,v)},this.createElements=function(v){return new Id(M.gl,v)},this.createTexture2D=function(v){return new qo(M.gl,v)},this.createFramebuffer=function(v){return new fc(M.gl,v)},this.useFramebuffer=function(v,m){M.gl({framebuffer:v?v.get():null})(m)},this.createComputeModel=function(){var v=N()(Ua.a.mark(function m(l){return Ua.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",new dc(M.gl,l));case 1:case"end":return B.stop()}},m)}));return function(m){return v.apply(this,arguments)}}(),this.clear=function(v){var m=v.color,l=v.depth,A=v.stencil,B=v.framebuffer,X=B===void 0?null:B,H={color:m,depth:l,stencil:A};H.framebuffer=X===null?X:X.get(),M.gl.clear(H)},this.setScissor=function(v){M.gl&&M.gl._gl&&(v.enable&&v.box?(M.gl._gl.enable(rt.gl.SCISSOR_TEST),M.gl._gl.scissor(v.box.x,v.box.y,v.box.width,v.box.height)):M.gl._gl.disable(rt.gl.SCISSOR_TEST),M.gl._refresh())},this.viewport=function(v){var m=v.x,l=v.y,A=v.width,B=v.height;M.gl&&M.gl._gl&&(M.gl._gl.viewport(m,l,A,B),M.gl._refresh())},this.readPixels=function(v){var m=v.framebuffer,l=v.x,A=v.y,B=v.width,X=v.height,H={x:l,y:A,width:B,height:X};return m&&(H.framebuffer=m.get()),M.gl.read(H)},this.getCanvas=function(){return M.$canvas},this.getGLContext=function(){return M.gl._gl},this.destroy=function(){M.gl&&(M.gl.destroy(),M.inited=!1)}}return ka()(P,[{key:"init",value:function(){var M=N()(Ua.a.mark(function m(l){return Ua.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!this.inited){B.next=2;break}return B.abrupt("return");case 2:return this.$canvas=l.canvas,B.next=5,new Promise(function(X,H){Ts()({canvas:l.canvas,attributes:{alpha:!0,antialias:l.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(oe,be){(oe||!be)&&H(oe),X(be)}})});case 5:this.gl=B.sent,this.inited=!0;case 7:case"end":return B.stop()}},m,this)}));function v(m){return M.apply(this,arguments)}return v}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),P}(),Wl))||ls);function Nc(){return typeof window!="undefined"}function al(P,M,v,m){if(!Nc())return;var l=document.getElementsByTagName("head")[0],A=document.createElement("script");A.setAttribute("type","text/javascript"),A.setAttribute("src",P),m&&(A.id=m),A.onload=function(){M&&M()},A.onerror=function(B){v&&v("Unable to load script '".concat(P,"'"),B)},l.appendChild(A)}function Cl(P,M){return new Promise(function(v,m){al(P,function(){v()},function(l,A){m(A)})})}var Ks,Hu=function(){return Tl.apply(this,arguments)};function Tl(){return Tl=N()(Ua.a.mark(function P(){return Ua.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!Ks){v.next=2;break}return v.abrupt("return",Ks);case 2:return v.next=4,Cl("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Ks=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),v.abrupt("return",Ks);case 6:case"end":return v.stop()}},P)})),Tl.apply(this,arguments)}var Al=function(){function P(M,v){sa()(this,P),this.engine=M,this.options=v,this.attribute=void 0,this.buffer=void 0;var m=v,l=m.buffer,A=m.offset,B=m.stride,X=m.normalized,H=m.size,ne=m.divisor,oe=m.arrayStride,be=m.attributes,we=m.stepMode;this.buffer=l,this.attribute={buffer:l.get(),offset:A||0,stride:B||0,normalized:X||!1,divisor:ne||0,arrayStride:oe||0,attributes:be,stepMode:we||"vertex"},H&&(this.attribute.size=H)}return ka()(P,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(v){this.buffer.subData(v)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),P}(),lu=function(){function P(M,v){sa()(this,P),this.engine=M,this.options=v,this.buffer=void 0;var m=v,l=m.data,A=m.usage,B=m.type;this.buffer=this.createBuffer(l instanceof Array?new Float32Array(l):l,A||ce.BufferUsage.Vertex|ce.BufferUsage.CopyDst)}return ka()(P,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(v){var m=v.data,l=v.offset;this.setSubData(this.buffer,l,m instanceof Array?new Float32Array(m):m)}},{key:"createBuffer",value:function(v,m){var l=v.byteLength%4,A={size:v.byteLength+l,usage:m},B=this.engine.device.createBuffer(A);return this.setSubData(B,0,v),B}},{key:"setSubData",value:function(v,m,l){var A=rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;A.writeBuffer(v,m,l)}}]),P}();function Hl(P){return typeof P=="number"}var Ld=function(){function P(M,v){sa()(this,P),this.engine=M,this.context=v,this.entity=Object(rt.createEntity)(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return ka()(P,[{key:"init",value:function(){var M=N()(Ua.a.mark(function m(){var l=this,A,B,X,H,ne,oe,be;return Ua.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:A=Ne.sent,B=A.computeStage,X=this.context.uniforms.filter(function(xe){return xe.storageClass===rt.STORAGE_CLASS.StorageBuffer}),H=this.context.uniforms.filter(function(xe){return xe.storageClass===rt.STORAGE_CLASS.Uniform}),ne=H.length?1:0,this.bindGroupEntries=[],ne&&(oe=0,be=[],H.forEach(function(xe){if(Hl(xe.data))l.uniformGPUBufferLayout.push({name:xe.name,offset:oe}),oe+=4,be.push(xe.data);else{var ke,Me=((ke=xe.data)===null||ke===void 0?void 0:ke.length)||1;Me===3&&(Me=4,xe.data.push(0));var He=oe/4%4;if(He>0){var Xe=4-He;if(Me>1&&Me<=Xe)Me===2&&(Xe===3&&(oe+=4,be.push(0)),be.push.apply(be,Oo()(xe.data)),l.uniformGPUBufferLayout.push({name:xe.name,offset:oe}));else{for(var dt=0;dt<Xe;dt++)oe+=4,be.push(0);be.push.apply(be,Oo()(xe.data)),l.uniformGPUBufferLayout.push({name:xe.name,offset:oe})}}oe+=4*Me}}),this.uniformBuffer=new lu(this.engine,{data:be instanceof Array?new Float32Array(be):be,usage:ce.BufferUsage.Uniform|ce.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),X.forEach(function(xe){if(xe.data!==null&&(xe.type===rt.AST_TOKEN_TYPES.Vector4FloatArray||xe.type===rt.AST_TOKEN_TYPES.FloatArray)){var ke;xe.name===l.context.output.name?(ke=new lu(l.engine,{data:isFinite(Number(xe.data))?[xe.data]:xe.data,usage:ce.BufferUsage.Storage|ce.BufferUsage.CopyDst|ce.BufferUsage.CopySrc}),l.outputBuffer=ke,l.context.output={name:xe.name,length:isFinite(Number(xe.data))?1:xe.data.length,typedArrayConstructor:Float32Array,gpuBuffer:ke.get()}):xe.isReferer?xe.data.model&&xe.data.model.outputBuffer&&(ke=xe.data.model.outputBuffer):ke=new lu(l.engine,{data:isFinite(Number(xe.data))?[xe.data]:xe.data,usage:ce.BufferUsage.Storage|ce.BufferUsage.CopyDst|ce.BufferUsage.CopySrc}),l.vertexBuffers[xe.name]=ke,l.bindGroupEntries.push({binding:ne,resource:{name:xe.name,refer:ke?void 0:xe.data,buffer:ke?ke.get():void 0}}),ne++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:B}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Ne.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"destroy",value:function(){var v=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(m){return v.vertexBuffers[m].destroy()})}},{key:"readData",value:function(){var M=N()(Ua.a.mark(function m(){var l,A,B,X,H,ne,oe,be,we,Ne;return Ua.a.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(l=this.context.output,!l){ke.next=16;break}if(A=l.length,B=l.typedArrayConstructor,X=l.gpuBuffer,!X){ke.next=16;break}return H=A*B.BYTES_PER_ELEMENT,ne=this.engine.device.createBuffer({size:H,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),oe=this.engine.device.createCommandEncoder(),oe.copyBufferToBuffer(X,0,ne,0,H),be=rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue,be.submit([oe.finish()]),ke.next=12,ne.mapAsync(ce.MapMode.Read);case 12:return we=ne.getMappedRange(),Ne=new B(we.slice(0)),ne.unmap(),ke.abrupt("return",Ne);case 16:return ke.abrupt("return",new Float32Array);case 17:case"end":return ke.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"run",value:function(){if(this.engine.currentComputePass){var v;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(v=this.engine.currentComputePass).dispatch.apply(v,Oo()(this.context.dispatch))}}},{key:"updateBuffer",value:function(v,m){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=this.vertexBuffers[v];A&&A.subData({data:m,offset:l})}},{key:"updateUniform",value:function(v,m){var l=this.uniformGPUBufferLayout.find(function(A){return A.name===v});l&&this.uniformBuffer.subData({data:Number.isFinite(m)?new Float32Array([m]):new Float32Array(m),offset:l.offset})}},{key:"confirmInput",value:function(v,m){var l=this.vertexBuffers[m],A=v.outputBuffer;if(l&&A&&l!==A){var B=this.engine.device.createCommandEncoder(),X=v.context.output,H=X.length,ne=X.typedArrayConstructor,oe=H*ne.BYTES_PER_ELEMENT;B.copyBufferToBuffer(A.get(),0,l.get(),0,oe);var be=rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;be.submit([B.finish()])}}},{key:"compileShaderToSpirV",value:function(v,m,l){return this.compileRawShaderToSpirV(l+v,m)}},{key:"compileRawShaderToSpirV",value:function(v,m){return this.engine.glslang.compileGLSL(v,m)}},{key:"compileComputePipelineStageDescriptor",value:function(){var M=N()(Ua.a.mark(function m(l){var A,B;return Ua.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(A=l,B=`#version 450
`,this.engine.options.useWGSL){H.next=6;break}return H.next=5,this.compileShaderToSpirV(l,"compute",B);case 5:A=H.sent;case 6:return H.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:A,isWHLSL:rt.isSafari}),entryPoint:"main"}});case 7:case"end":return H.stop()}},m,this)}));function v(m){return M.apply(this,arguments)}return v}()}]),P}(),hc=function(){function P(M,v){sa()(this,P),this.engine=M,this.options=v,this.indexCount=void 0,this.buffer=void 0;var m=v,l=m.data,A=m.usage,B=m.type,X=m.count;this.indexCount=X||0,this.buffer=new lu(M,{data:l instanceof Array?new Uint16Array(l):l,usage:ce.BufferUsage.Index|ce.BufferUsage.CopyDst})}return ka()(P,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(v){this.buffer.subData(v)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),P}(),Rc=function(){function P(M,v){sa()(this,P),this.engine=M,this.options=v,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var m=v,l=m.width,A=m.height,B=m.color,X=m.colors,H=m.depth,ne=m.stencil;B&&(this.colorTexture=B),H&&(this.depthTexture=H)}return ka()(P,[{key:"get",value:function(){var v,m;return{color:(v=this.colorTexture)===null||v===void 0?void 0:v.get(),depth:(m=this.depthTexture)===null||m===void 0?void 0:m.get()}}},{key:"destroy",value:function(){var v,m;(v=this.colorTexture)===null||v===void 0||v.destroy(),(m=this.depthTexture)===null||m===void 0||m.destroy()}},{key:"resize",value:function(v){var m=v.width,l=v.height;if(m!==this.width||l!==this.height){var A,B;(A=this.colorTexture)===null||A===void 0||A.resize({width:m,height:l}),(B=this.depthTexture)===null||B===void 0||B.resize({width:m,height:l})}this.width=m,this.height=l}}]),P}(),cu,$s,Du,Vo,Pc,sd,Ic,jd=(cu={},ee()(cu,rt.gl.POINTS,ce.PrimitiveTopology.PointList),ee()(cu,rt.gl.LINES,ce.PrimitiveTopology.LineList),ee()(cu,rt.gl.LINE_LOOP,ce.PrimitiveTopology.LineList),ee()(cu,rt.gl.LINE_STRIP,ce.PrimitiveTopology.LineStrip),ee()(cu,rt.gl.TRIANGLES,ce.PrimitiveTopology.TriangleList),ee()(cu,rt.gl.TRIANGLE_FAN,ce.PrimitiveTopology.TriangleList),ee()(cu,rt.gl.TRIANGLE_STRIP,ce.PrimitiveTopology.TriangleStrip),cu),Lf=($s={},ee()($s,rt.gl.NEVER,ce.CompareFunction.Never),ee()($s,rt.gl.ALWAYS,ce.CompareFunction.Always),ee()($s,rt.gl.LESS,ce.CompareFunction.Less),ee()($s,rt.gl.LEQUAL,ce.CompareFunction.LessEqual),ee()($s,rt.gl.GREATER,ce.CompareFunction.Greater),ee()($s,rt.gl.GEQUAL,ce.CompareFunction.GreaterEqual),ee()($s,rt.gl.EQUAL,ce.CompareFunction.Equal),ee()($s,rt.gl.NOTEQUAL,ce.CompareFunction.NotEqual),$s),sf=(Du={},ee()(Du,rt.gl.FUNC_ADD,ce.BlendOperation.Add),ee()(Du,rt.gl.MIN_EXT,ce.BlendOperation.Min),ee()(Du,rt.gl.MAX_EXT,ce.BlendOperation.Max),ee()(Du,rt.gl.FUNC_SUBTRACT,ce.BlendOperation.Subtract),ee()(Du,rt.gl.FUNC_REVERSE_SUBTRACT,ce.BlendOperation.ReverseSubtract),Du),Ys=(Vo={},ee()(Vo,rt.gl.ZERO,ce.BlendFactor.Zero),ee()(Vo,rt.gl.ONE,ce.BlendFactor.One),ee()(Vo,rt.gl.SRC_COLOR,ce.BlendFactor.SrcColor),ee()(Vo,rt.gl.ONE_MINUS_SRC_COLOR,ce.BlendFactor.OneMinusSrcColor),ee()(Vo,rt.gl.SRC_ALPHA,ce.BlendFactor.SrcAlpha),ee()(Vo,rt.gl.ONE_MINUS_SRC_ALPHA,ce.BlendFactor.OneMinusSrcAlpha),ee()(Vo,rt.gl.DST_COLOR,ce.BlendFactor.DstColor),ee()(Vo,rt.gl.ONE_MINUS_DST_COLOR,ce.BlendFactor.OneMinusDstColor),ee()(Vo,rt.gl.DST_ALPHA,ce.BlendFactor.DstAlpha),ee()(Vo,rt.gl.ONE_MINUS_DST_ALPHA,ce.BlendFactor.OneMinusDstAlpha),ee()(Vo,rt.gl.CONSTANT_COLOR,ce.BlendFactor.BlendColor),ee()(Vo,rt.gl.ONE_MINUS_CONSTANT_COLOR,ce.BlendFactor.OneMinusBlendColor),ee()(Vo,rt.gl.SRC_ALPHA_SATURATE,ce.BlendFactor.SrcAlphaSaturated),Vo),uf=(Pc={},ee()(Pc,rt.gl.ALPHA,"r8unorm"),ee()(Pc,rt.gl.RGBA,"rgba8unorm"),ee()(Pc,rt.gl.DEPTH_COMPONENT,"depth32float"),ee()(Pc,rt.gl.DEPTH_STENCIL,"depth24plus-stencil8"),Pc),jf=(sd={},ee()(sd,rt.gl.NEAREST,"nearest"),ee()(sd,rt.gl.LINEAR,"linear"),sd),lf=(Ic={},ee()(Ic,rt.gl.REPEAT,"repeat"),ee()(Ic,rt.gl.CLAMP_TO_EDGE,"clamp-to-edge"),ee()(Ic,rt.gl.MIRRORED_REPEAT,"mirror-repeat"),Ic);function Uf(P){var M=P.cull;if(!M||!M.enable)return ce.CullMode.None;if(M.face)return M.face===rt.gl.FRONT?ce.CullMode.Front:ce.CullMode.Back}function Qs(P){var M=P.depth,v=P.stencil,m={compare:ce.CompareFunction.Always,depthFailOp:ce.StencilOperation.Keep,failOp:ce.StencilOperation.Keep,passOp:ce.StencilOperation.Keep};return{depthWriteEnabled:M&&M.enable,depthCompare:Lf[(M==null?void 0:M.func)||rt.gl.ALWAYS],format:ce.TextureFormat.Depth24PlusStencil8,stencilFront:m,stencilBack:m,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function pc(P,M){var v=P.blend;return[{format:M,alphaBlend:{srcFactor:Ys[v&&v.func&&v.func.srcAlpha||rt.gl.ONE],dstFactor:Ys[v&&v.func&&v.func.dstAlpha||rt.gl.ZERO],operation:sf[v&&v.equation&&v.equation.alpha||rt.gl.FUNC_ADD]},colorBlend:{srcFactor:Ys[v&&v.func&&v.func.srcRGB||rt.gl.ONE],dstFactor:Ys[v&&v.func&&v.func.dstRGB||rt.gl.ZERO],operation:sf[v&&v.equation&&v.equation.rgb||rt.gl.FUNC_ADD]},writeMask:ce.ColorWrite.All}]}function lo(P,M){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(P);M&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),v.push.apply(v,m)}return v}function Lc(P){for(var M=1;M<arguments.length;M++){var v=arguments[M]!=null?arguments[M]:{};M%2?lo(Object(v),!0).forEach(function(m){ee()(P,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):lo(Object(v)).forEach(function(m){Object.defineProperty(P,m,Object.getOwnPropertyDescriptor(v,m))})}return P}function Ud(P){for(var M=0,v=arguments.length,m=new Array(v>1?v-1:0),l=1;l<v;l++)m[l-1]=arguments[l];for(var A=0,B=m;A<B.length;A++){var X=B[A];M+=X.length}for(var H=new P(M),ne=0,oe=0,be=m;oe<be.length;oe++){var we=be[oe];H.set(we,ne),ne+=we.length}return H}var Ff=function(){function P(M,v){sa()(this,P),this.engine=M,this.options=v,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return ka()(P,[{key:"init",value:function(){var M=N()(Ua.a.mark(function m(){var l=this,A,B,X,H,ne,oe,be,we,Ne,xe,ke,Me,He,Xe,dt,Ot,_t,En;return Ua.a.wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return A=this.options,B=A.vs,X=A.fs,H=A.attributes,ne=A.uniforms,oe=A.primitive,be=A.count,we=A.elements,Ne=A.depth,xe=A.blend,ke=A.stencil,Me=A.cull,He=A.instances,rn.next=3,this.compilePipelineStageDescriptor(B,X,null);case 3:Xe=rn.sent,dt=Xe.vertexStage,Ot=Xe.fragmentStage,ne&&this.buildUniformBindGroup(ne),we&&(this.indexBuffer=we.get(),this.indexCount=we.indexCount),_t={vertexBuffers:Object.keys(H).map(function(Hn,Zn){var Rr=H[Hn],ar=Rr.get(),la=ar.arrayStride,ya=ar.stepMode,ti=ar.attributes;return l.attributeCache[Hn]=Rr,{arrayStride:la,stepMode:ya,attributes:ti}})},En={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:jd[oe||rt.gl.TRIANGLES],rasterizationState:Lc(Lc({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Uf({cull:Me})}),depthStencilState:Qs({depth:Ne,stencil:ke}),colorStates:pc({blend:xe},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:dt,fragmentStage:Ot,vertexState:_t},this.renderPipeline=this.engine.device.createRenderPipeline(En);case 11:case"end":return rn.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"addUniforms",value:function(v){this.uniforms=Lc(Lc({},this.uniforms),nl(v))}},{key:"draw",value:function(v){var m=this,l=this.engine.getCurrentRenderPass(),A=Lc(Lc({},this.uniforms),nl(v.uniforms||{})),B=[];Object.keys(A).forEach(function(X){var H=_n()(A[X]);if(H==="boolean"||H==="number"||Array.isArray(A[X])||A[X].BYTES_PER_ELEMENT){var ne,oe=(ne=m.uniformGPUBufferLayout.find(function(He){var Xe=He.name;return Xe===X}))===null||ne===void 0?void 0:ne.offset;oe!==null&&m.uniformBuffer.subData({data:A[X],offset:oe})}else{var be,we=(be=m.uniformGPUBufferLayout.find(function(He){var Xe=He.name;return Xe===X}))===null||be===void 0?void 0:be.offset;if(we!==null){var Ne=A[X].get(),xe=Ne.color||Ne,ke=xe.texture,Me=xe.sampler;Me&&(B.push({binding:we,resource:Me}),we++),B.push({binding:we,resource:ke.createView()})}}}),this.uniformBuffer&&(B[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:B}),this.renderPipeline&&l.setPipeline(this.renderPipeline),l.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&l.setIndexBuffer(this.indexBuffer.get(),ce.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(X,H){l.setVertexBuffer(0+H,m.attributeCache[X].get().buffer,0)}),this.indexBuffer?l.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):l.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var M=N()(Ua.a.mark(function m(l,A,B){var X,H,ne;return Ua.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(X=`#version 450
`,H=l,ne=A,this.engine.options.useWGSL){be.next=10;break}return be.next=6,this.compileShaderToSpirV(l,"vertex",X);case 6:return H=be.sent,be.next=9,this.compileShaderToSpirV(A,"fragment",X);case 9:ne=be.sent;case 10:return be.abrupt("return",this.createPipelineStageDescriptor(H,ne));case 11:case"end":return be.stop()}},m,this)}));function v(m,l,A){return M.apply(this,arguments)}return v}()},{key:"compileShaderToSpirV",value:function(v,m,l){return this.compileRawShaderToSpirV(l+v,m)}},{key:"compileRawShaderToSpirV",value:function(v,m){return this.engine.glslang.compileGLSL(v,m)}},{key:"createPipelineStageDescriptor",value:function(v,m){return{vertexStage:{module:this.engine.device.createShaderModule({code:v,isWHLSL:rt.isSafari}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:m,isWHLSL:rt.isSafari}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ce.FrontFace.CCW,cullMode:ce.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(v){var m=this,l=0,A=Ud.apply(void 0,[Float32Array].concat(Oo()(Object.keys(v).map(function(H){return v[H]?(m.uniformGPUBufferLayout.push({name:H,offset:l}),l+=(v[H].length||1)*4,v[H]):[]})))),B=[],X=!1;A.length&&(X=!0,B.push({binding:0,visibility:ce.ShaderStage.Fragment|ce.ShaderStage.Vertex,type:ce.BindingType.UniformBuffer})),Object.keys(v).filter(function(H){return v[H]===null}).forEach(function(H,ne){m.uniformGPUBufferLayout.push({name:H,offset:ne*2+(X?1:0)}),B.push({binding:ne*2+(X?1:0),visibility:ce.ShaderStage.Fragment,type:ce.BindingType.Sampler},{binding:ne*2+(X?1:0)+1,visibility:ce.ShaderStage.Fragment,type:ce.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:B}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),X&&(this.uniformBuffer=new lu(this.engine,{data:A instanceof Array?new Float32Array(A):A,usage:ce.BufferUsage.Uniform|ce.BufferUsage.CopyDst}))}}]),P}(),ih=function(){function P(M,v){sa()(this,P),this.engine=M,this.options=v,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return ka()(P,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(v){var m=v.width,l=v.height;(m!==this.width||l!==this.height)&&(this.destroy(),this.createTexture()),this.width=m,this.height=l}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var v=this.options,m=v.data,l=v.type,A=l===void 0?rt.gl.UNSIGNED_BYTE:l,B=v.width,X=v.height,H=v.flipY,ne=H===void 0?!1:H,oe=v.format,be=oe===void 0?rt.gl.RGBA:oe,we=v.mipmap,Ne=we===void 0?!1:we,xe=v.wrapS,ke=xe===void 0?rt.gl.CLAMP_TO_EDGE:xe,Me=v.wrapT,He=Me===void 0?rt.gl.CLAMP_TO_EDGE:Me,Xe=v.aniso,dt=Xe===void 0?0:Xe,Ot=v.alignment,_t=Ot===void 0?1:Ot,En=v.premultiplyAlpha,an=En===void 0?!1:En,rn=v.mag,Hn=rn===void 0?rt.gl.NEAREST:rn,Zn=v.min,Rr=Zn===void 0?rt.gl.NEAREST:Zn,ar=v.colorSpace,la=ar===void 0?rt.gl.BROWSER_DEFAULT_WEBGL:ar,ya=v.usage;this.width=B,this.height=X,this.texture=this.engine.device.createTexture({size:[B,X,1],mipLevelCount:1,sampleCount:1,dimension:ce.TextureDimension.E2d,format:uf[be],usage:ya||ce.TextureUsage.Sampled|ce.TextureUsage.CopyDst}),(!ya||ya&ce.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:lf[ke],addressModeV:lf[He],addressModeW:lf[ke],magFilter:jf[Hn],minFilter:jf[Rr],maxAnisotropy:dt}))}}]),P}(),Kl,cf,Fd,Ku=(Kl=Object(Qr.injectable)(),Kl(cf=(Fd=function(){function P(){var M=this;sa()(this,P),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:Infinity,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(v){var m=v.framebuffer,l=v.color,A=v.depth,B=v.stencil;M.options.supportCompute&&M.startComputePass(),M.currentRenderTarget?(M.currentRenderPass&&M.endRenderTargetRenderPass(),M.startRenderTargetRenderPass(M.currentRenderTarget,l||null,!!A,!!B)):(M.mainColorAttachments[0].loadValue=l||ce.LoadOp.Load,M.mainDepthAttachment.depthLoadValue=A||ce.LoadOp.Load,M.mainDepthAttachment.stencilLoadValue=B?M.clearStencilValue:ce.LoadOp.Load,M.mainRenderPass&&M.endMainRenderPass(),M.startMainRenderPass())},this.createModel=function(){var v=N()(Ua.a.mark(function m(l){var A;return Ua.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return A=new Ff(M,l),X.next=3,A.init();case 3:return X.abrupt("return",A);case 4:case"end":return X.stop()}},m)}));return function(m){return v.apply(this,arguments)}}(),this.createAttribute=function(v){return new Al(M,v)},this.createBuffer=function(v){return new lu(M,v)},this.createElements=function(v){return new hc(M,v)},this.createTexture2D=function(v){return new ih(M,v)},this.createFramebuffer=function(v){return new Rc(M,v)},this.useFramebuffer=function(v,m){M.currentRenderTarget&&M.unbindFramebuffer(M.currentRenderTarget),M.currentRenderTarget=v,M.currentRenderTargetViewDescriptor={dimension:ce.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ce.TextureAspect.All},M.currentRenderPass=null,m()},this.createComputeModel=function(){var v=N()(Ua.a.mark(function m(l){var A;return Ua.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return A=new Ld(M,l),X.next=3,A.init();case 3:return X.abrupt("return",A);case 4:case"end":return X.stop()}},m)}));return function(m){return v.apply(this,arguments)}}(),this.getCanvas=function(){return M.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(v){var m=v.x,l=v.y,A=v.width,B=v.height;if(!M.currentRenderPass)M.transientViewport={x:m,y:l,width:A,height:B};else if(M.transientViewport.x!==Infinity){var X=M.getCurrentRenderPass();X.setViewport(M.transientViewport.x,M.transientViewport.y,M.transientViewport.width,M.transientViewport.height,0,1)}else if(m!==M.cachedViewport.x||l!==M.cachedViewport.y||A!==M.cachedViewport.width||B!==M.cachedViewport.height){M.cachedViewport={x:m,y:l,width:A,height:B};var H=M.getCurrentRenderPass();H.setViewport(m,l,A,B,0,1)}},this.readPixels=function(v){throw new Error("Method not implemented.")}}return ka()(P,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var M=N()(Ua.a.mark(function m(l){return Ua.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return this.canvas=l.canvas,this.options=l,this.useWGSL=!!l.useWGSL,this.mainPassSampleCount=l.antialiasing?this.defaultSampleCount:1,B.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return B.stop()}},m,this)}));function v(m){return M.apply(this,arguments)}return v}()},{key:"setScissor",value:function(v){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(v){return v.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),rt.isSafari?this.device.getQueue().submit(this.commandBuffers.filter(function(v){return v})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(v){return v}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var M=N()(Ua.a.mark(function m(){var l,A;return Ua.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Hu();case 2:return this.glslang=X.sent,X.next=5,(l=navigator)===null||l===void 0||((A=l.gpu)===null||A===void 0)?void 0:A.requestAdapter();case 5:return this.adapter=X.sent,X.next=8,this.adapter.requestDevice();case 8:this.device=X.sent;case 9:case"end":return X.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(rt.isSafari?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ce.TextureUsage.OutputAttachment|ce.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var v={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ce.TextureDimension.E2d,format:ce.TextureFormat.BGRA8Unorm,usage:ce.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(v),this.mainColorAttachments=[{attachment:rt.isSafari?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ce.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ce.StoreOp.Store}];var m={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ce.TextureDimension.E2d,format:rt.isSafari?"depth32float-stencil8":ce.TextureFormat.Depth24PlusStencil8,usage:ce.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(m),this.mainDepthAttachment={attachment:rt.isSafari?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ce.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ce.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(v,m,l){var A,B,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,H=(A=v.get().color)===null||A===void 0?void 0:A.texture,ne;H&&(ne=H.createView(this.currentRenderTargetViewDescriptor));var oe=(B=v.get().depth)===null||B===void 0?void 0:B.texture,be;oe&&(be=oe.createView());var we=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:ne,loadValue:m!==null?m:ce.LoadOp.Load,storeOp:ce.StoreOp.Store}],depthStencilAttachment:oe&&be?{attachment:be,depthLoadValue:l?this.clearDepthValue:ce.LoadOp.Load,depthStoreOp:ce.StoreOp.Store,stencilLoadValue:X?this.clearStencilValue:ce.LoadOp.Load,stencilStoreOp:ce.StoreOp.Store}:void 0});this.currentRenderPass=we,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(v){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=Infinity,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),P}(),Fd))||cf),Fs=u(69),Bd=u.n(Fs),Vd=u(25),il=u.n(Vd),ud=u(26),Mu=u.n(ud),ld=u(20),es=u.n(ld),cd,jc;function zd(P){var M=dd();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function dd(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var Ol=4/64,Uc=1-Ol*2,_u=(cd=Object(Qr.injectable)(),cd(jc=function(P){il()(v,P);var M=zd(v);function v(){return sa()(this,v),M.apply(this,arguments)}return ka()(v,[{key:"onEntityCreated",value:function(){var l=this.config,A=l.widthSegments,B=A===void 0?1:A,X=l.heightSegments,H=X===void 0?1:X,ne=l.depthSegments,oe=ne===void 0?1:ne,be=l.halfExtents,we=be===void 0?Rn.d.fromValues(.5,.5,.5):be,Ne=B,xe=H,ke=oe,Me=Bd()(we,3),He=Me[0],Xe=Me[1],dt=Me[2],Ot=[Rn.d.fromValues(-He,-Xe,dt),Rn.d.fromValues(He,-Xe,dt),Rn.d.fromValues(He,Xe,dt),Rn.d.fromValues(-He,Xe,dt),Rn.d.fromValues(He,-Xe,-dt),Rn.d.fromValues(-He,-Xe,-dt),Rn.d.fromValues(-He,Xe,-dt),Rn.d.fromValues(He,Xe,-dt)],_t=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],En=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],an={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},rn=[],Hn=[],Zn=[],Rr=[],ar=[],la=0,ya=function(La,qa,_a){var ca,Ti,Ci,$r;for(Ci=0;Ci<=qa;Ci++)for($r=0;$r<=_a;$r++){var Ia=Rn.d.create(),go=Rn.d.create(),xi=Rn.d.create(),yo=Rn.d.create();Rn.d.lerp(Ia,Ot[_t[La][0]],Ot[_t[La][1]],Ci/qa),Rn.d.lerp(go,Ot[_t[La][0]],Ot[_t[La][2]],$r/_a),Rn.d.sub(xi,go,Ot[_t[La][0]]),Rn.d.add(yo,Ia,xi),ca=Ci/qa,Ti=$r/_a,rn.push(yo[0],yo[1],yo[2]),Hn.push(En[La][0],En[La][1],En[La][2]),Zn.push(ca,Ti),ca/=3,Ti/=3,ca=ca*Uc+Ol,Ti=Ti*Uc+Ol,ca+=La%3/3,Ti+=Math.floor(La/3)/3,Rr.push(ca,Ti),Ci<qa&&$r<_a&&(ar.push(la+_a+1,la+1,la),ar.push(la+_a+1,la+_a+2,la+1)),la++}};ya(an.FRONT,Ne,xe),ya(an.BACK,Ne,xe),ya(an.TOP,Ne,ke),ya(an.BOTTOM,Ne,ke),ya(an.RIGHT,ke,xe),ya(an.LEFT,ke,xe);var ti=Object(rt.generateAABBFromVertices)(rn),vi=this.getComponent();vi.indices=Uint32Array.from(ar),vi.aabb=ti,vi.vertexCount=la,vi.attributes=[{dirty:!0,name:"position",data:Float32Array.from(rn),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Hn),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Zn),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),v}(Eo))||jc);function fd(P,M){if(!P&&!M)throw new Error("Please specify valid arguments for parameters a and b.");if(!M||M.length===0)return P;if(!P||P.length===0)return M;if(Object.prototype.toString.call(P)!==Object.prototype.toString.call(M))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var v=new P.constructor(P.length+M.length);return v.set(P),v.set(M,P.length),v}var Gd,Fc;function Sl(P){var M=Xd();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function Xd(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var Bf=(Gd=Object(Qr.injectable)(),Gd(Fc=function(P){il()(v,P);var M=Sl(v);function v(){return sa()(this,v),M.apply(this,arguments)}return ka()(v,[{key:"onEntityCreated",value:function(){var l=this.config.geometries,A=l===void 0?[]:l,B=this.getComponent();B.aabb=new rt.AABB;var X=[],H=[],ne=0;A.forEach(function(oe){var be=oe.aabb,we=oe.indices,Ne=oe.vertexCount,xe=oe.attributes;B.aabb.add(be),B.vertexCount+=Ne,we&&H.push.apply(H,Oo()(we.map(function(ke){return ke+ne}))),ne+=Ne,xe.forEach(function(ke,Me){X[Me]?ke.data&&(mi(ke.data)?X[Me].push(ke.data):Yi(ke.data)?X[Me].data=fd(X[Me].data,ke.data):X[Me].data=X[Me].data.concat(ke.data)):(X[Me]=ke,X[Me].dirty=!0)})}),B.attributes=X,B.indices=Uint32Array.from(H),B.dirty=!0}}]),v}(Eo))||Fc),oh,df;function Lh(P){var M=$u();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function $u(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var sh=(oh=Object(Qr.injectable)(),oh(df=function(P){il()(v,P);var M=Lh(v);function v(){return sa()(this,v),M.apply(this,arguments)}return ka()(v,[{key:"onEntityCreated",value:function(){for(var l=this.config,A=l.halfExtents,B=A===void 0?[.5,.5]:A,X=l.widthSegments,H=X===void 0?5:X,ne=l.lengthSegments,oe=ne===void 0?5:ne,be=[],we=[],Ne=[],xe=[],ke=0,Me=0;Me<=H;Me++)for(var He=0;He<=oe;He++){var Xe=-B[0]+2*B[0]*Me/H,dt=0,Ot=-(-B[1]+2*B[1]*He/oe),_t=Me/H,En=He/oe;be.push(Xe,dt,Ot),we.push(0,1,0),Ne.push(_t,En),Me<H&&He<oe&&(xe.push(ke+oe+1,ke+1,ke),xe.push(ke+oe+1,ke+oe+2,ke+1)),ke++}var an=Object(rt.generateAABBFromVertices)(be),rn=this.getComponent();rn.indices=Uint32Array.from(xe),rn.aabb=an,rn.vertexCount=ke,rn.attributes=[{dirty:!0,name:"position",data:Float32Array.from(be),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(we),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Ne),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),v}(Eo))||df),ff,Vf;function uh(P){var M=zf();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function zf(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var lh=(ff=Object(Qr.injectable)(),ff(Vf=function(P){il()(v,P);var M=uh(v);function v(){return sa()(this,v),M.apply(this,arguments)}return ka()(v,[{key:"onEntityCreated",value:function(){for(var l=this.config,A=l.radius,B=A===void 0?.5:A,X=l.latitudeBands,H=X===void 0?16:X,ne=l.longitudeBands,oe=ne===void 0?16:ne,be=[],we=[],Ne=[],xe=[],ke=0;ke<=H;ke++)for(var Me=ke*Math.PI/H,He=Math.sin(Me),Xe=Math.cos(Me),dt=0;dt<=oe;dt++){var Ot=dt*2*Math.PI/oe-Math.PI/2,_t=Math.sin(Ot),En=Math.cos(Ot),an=En*He,rn=Xe,Hn=_t*He,Zn=1-dt/oe,Rr=1-ke/H;be.push(an*B,rn*B,Hn*B),we.push(an,rn,Hn),Ne.push(Zn,Rr)}for(var ar=0;ar<H;++ar)for(var la=0;la<oe;++la){var ya=ar*(oe+1)+la,ti=ya+oe+1;xe.push(ya+1,ti,ya),xe.push(ya+1,ti+1,ti)}var vi=Object(rt.generateAABBFromVertices)(be),Za=this.getComponent();Za.indices=Uint32Array.from(xe),Za.aabb=vi,Za.vertexCount=be.length/3,Za.attributes=[{dirty:!0,name:"position",data:Float32Array.from(be),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(we),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Ne),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),v}(Eo))||Vf),ol=u(24),ku=u.n(ol),vc,Dl,Wd,hd,mc,Hd,As,$l;function Ro(P){var M=zo();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function zo(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var ch=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,hf=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,dh=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,Go=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,Gf=(vc=Object(Qr.injectable)(),Dl=Object(Qr.inject)(rt.IDENTIFIER.RenderEngine),Wd=Object(Qr.inject)(rt.IDENTIFIER.ShaderModuleService),vc(hd=(mc=($l=function(P){il()(v,P);var M=Ro(v);function v(){var m;sa()(this,v);for(var l=arguments.length,A=new Array(l),B=0;B<l;B++)A[B]=arguments[B];return m=M.call.apply(M,[this].concat(A)),Kr()(m,"engine",Hd,ku()(m)),Kr()(m,"shaderModuleService",As,ku()(m)),m}return ka()(v,[{key:"onEntityCreated",value:function(){var l=this.getComponent(),A=this.engine.supportWebGPU?Go:hf,B=this.engine.supportWebGPU?dh:ch;this.shaderModuleService.registerModule("material-basic",{vs:A,fs:B});var X=this.shaderModuleService.getModule("material-basic"),H=X.vs,ne=X.fs,oe=X.uniforms;l.vertexShaderGLSL=H,l.fragmentShaderGLSL=ne,l.setUniform(oe),this.config.map&&(l.setDefines({USE_UV:1,USE_MAP:1}),l.setUniform({map:this.config.map,uvTransform:Rn.a.create()}))}}]),v}(Bl),$l),Hd=Na()(mc.prototype,"engine",[Dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),As=Na()(mc.prototype,"shaderModuleService",[Wd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mc))||hd),Nu,sl,gc,Kd,Xf,$d,pd,yc,ii,du,ci,Bs;function vs(P){var M=ge();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function ge(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var _e=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,Et=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,vn=(Nu=Object(Qr.injectable)(),sl=Object(Qr.inject)(rt.IDENTIFIER.Systems),gc=Object(Qr.named)(rt.IDENTIFIER.MaterialSystem),Kd=Object(Qr.inject)(rt.IDENTIFIER.Systems),Xf=Object(Qr.named)(rt.IDENTIFIER.GeometrySystem),$d=Object(Qr.inject)(rt.IDENTIFIER.ShaderModuleService),Nu(pd=(yc=(Bs=function(P){il()(v,P);var M=vs(v);function v(){var m;sa()(this,v);for(var l=arguments.length,A=new Array(l),B=0;B<l;B++)A[B]=arguments[B];return m=M.call.apply(M,[this].concat(A)),Kr()(m,"materialSystem",ii,ku()(m)),Kr()(m,"geometrySystem",du,ku()(m)),Kr()(m,"shaderModuleService",ci,ku()(m)),m}return ka()(v,[{key:"onAttributeChanged",value:function(l){var A=l.name,B=l.data,X=this.getMeshComponent();X&&X.material&&(A==="gridColor"?(X.material.setUniform("u_GridColor",B),X.material.setUniform("u_GridColor2",B)):A==="gridSize"&&(X.material.setUniform("u_GridSize",B),X.material.setUniform("u_GridSize2",B)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Et,fs:_e});var l=this.shaderModuleService.getModule("grid"),A=l.vs,B=l.fs,X=l.uniforms,H=this.materialSystem.createShaderMaterial({vertexShader:A,fragmentShader:B});this.setMaterial(H);var ne=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(ne),H.setCull({enable:!1,face:rt.gl.BACK}).setDepth({enable:!0,func:rt.gl.LESS}),H.setUniform(X),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),ne.setIndex([0,3,2,2,1,0]),ne.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),v}(Ls),Bs),ii=Na()(yc.prototype,"materialSystem",[sl,gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),du=Na()(yc.prototype,"geometrySystem",[Kd,Xf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ci=Na()(yc.prototype,"shaderModuleService",[$d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yc))||pd),Vn=u(102),kn=u(72);function bn(P,M,v,m,l){ur(M,m,-l),ur(M,m,l),P.push(v),P.push(v)}function ur(P,M,v){P.push([[M[0],M[1]],v])}var Sn=function(P,M,v){var m=[0,0],l=[0,0],A=[0,0],B=[0,0],X=-1,H=!1,ne=null,oe=Object(Vn.create)(),be=v||0,we=3,Ne=[],xe=[],ke=[],Me=[0,0];M&&(P=P.slice(),P.push(P[0]));for(var He=P.length,Xe=1;Xe<He;Xe++){var dt=be,Ot=P[Xe-1],_t=P[Xe],En=Xe<P.length-1?P[Xe+1]:null;if(Me.push(Xe/He,Xe/He),Object(kn.direction)(m,_t,Ot),ne||(ne=[0,0],Object(kn.normal)(ne,m)),H||(H=!0,bn(xe,Ne,Ot,ne,1)),ke.push([dt+0,dt+1,dt+2]),!En)Object(kn.normal)(ne,m),bn(xe,Ne,_t,ne,1),ke.push(X===1?[dt,dt+2,dt+3]:[dt+2,dt+1,dt+3]),be+=2;else{Object(kn.direction)(l,En,_t);var an=Object(kn.computeMiter)(A,B,m,l,1),rn=Object(Vn.dot)(A,ne)<0?-1:1,Hn=an>we;if(!isFinite(an)){Object(kn.normal)(ne,m),bn(xe,Ne,_t,ne,1),ke.push(X===1?[dt,dt+2,dt+3]:[dt+2,dt+1,dt+3]),be+=2,X=rn;continue}Hn?(an=we,Me.push(Xe/He),ur(Ne,ne,-rn),xe.push(_t),ur(Ne,B,an*rn),xe.push(_t),ke.push(X!==-rn?[dt,dt+2,dt+3]:[dt+2,dt+1,dt+3]),ke.push([dt+2,dt+3,dt+4]),Object(kn.normal)(oe,l),Object(Vn.copy)(ne,oe),ur(Ne,ne,-rn),xe.push(_t),be+=3):(bn(xe,Ne,_t,B,an),ke.push(X===1?[dt,dt+2,dt+3]:[dt+2,dt+1,dt+3]),rn=-1,Object(Vn.copy)(ne,B),be+=2),X=rn}}return{normals:Ne,attrIndex:ke,attrPos:xe,attrCounters:Me}},mr,Er,Cr,Ir,Mr,xr,mn,fn,br,Fr,Pn,na;function dr(P){var M=lr();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function lr(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var ir=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,fr=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,oa=(mr=Object(Qr.injectable)(),Er=Object(Qr.inject)(rt.IDENTIFIER.Systems),Cr=Object(Qr.named)(rt.IDENTIFIER.MaterialSystem),Ir=Object(Qr.inject)(rt.IDENTIFIER.Systems),Mr=Object(Qr.named)(rt.IDENTIFIER.GeometrySystem),xr=Object(Qr.inject)(rt.IDENTIFIER.ShaderModuleService),mr(mn=(fn=(na=function(P){il()(v,P);var M=dr(v);function v(){var m;sa()(this,v);for(var l=arguments.length,A=new Array(l),B=0;B<l;B++)A[B]=arguments[B];return m=M.call.apply(M,[this].concat(A)),Kr()(m,"materialSystem",br,ku()(m)),Kr()(m,"geometrySystem",Fr,ku()(m)),Kr()(m,"shaderModuleService",Pn,ku()(m)),m.vertexCount=void 0,m}return ka()(v,[{key:"onAttributeChanged",value:function(l){var A=l.name,B=l.data,X=this.getMeshComponent();if(X&&X.material)switch(A){case"dashArray":X.material.setUniform("u_dash_array",B);break;case"dashOffset":X.material.setUniform("u_dash_offset",B);break;case"dashRatio":X.material.setUniform("u_dash_ratio",B);break;case"thickness":X.material.setUniform("u_thickness",B);break;case"color":var H=new Array(this.vertexCount).fill(void 0).map(function(){return B}).reduce(function(ne,oe){return[].concat(Oo()(ne),Oo()(oe))},[]);X.geometry.setAttribute("a_color",Float32Array.from(H),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var l=this;this.shaderModuleService.registerModule("line",{vs:fr,fs:ir});var A=this.shaderModuleService.getModule("line"),B=A.vs,X=A.fs,H=A.uniforms,ne=this.materialSystem.createShaderMaterial({vertexShader:B,fragmentShader:X}),oe=Sn(this.config.points,!1),be=oe.normals,we=oe.attrIndex,Ne=oe.attrPos,xe=oe.attrCounters,ke=Ne.length;this.vertexCount=ke;var Me=this.geometrySystem.createBufferGeometry({vertexCount:ke});this.setMaterial(ne),this.setGeometry(Me),ne.setCull({enable:!1,face:rt.gl.BACK}).setUniform(H),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var He=[],Xe=[];be.forEach(function(Ot){var _t=Ot[0],En=Ot[1];He.push([_t[0],_t[1]]),Xe.push(En)}),Me.setIndex(we.reduce(function(Ot,_t){return[].concat(Oo()(Ot),Oo()(_t))},[])),Me.setAttribute("a_pos",Float32Array.from(Ne.reduce(function(Ot,_t){return[].concat(Oo()(Ot),Oo()(_t))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var dt=new Array(ke).fill(void 0).map(function(){return Oo()(l.config.color)}).reduce(function(Ot,_t){return[].concat(Oo()(Ot),Oo()(_t))},[]);Me.setAttribute("a_color",Float32Array.from(dt),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),Me.setAttribute("a_line_miter",Float32Array.from(Xe),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),Me.setAttribute("a_line_normal",Float32Array.from(He.reduce(function(Ot,_t){return[].concat(Oo()(Ot),Oo()(_t))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),Me.setAttribute("a_counters",Float32Array.from(xe),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),v}(Ls),na),br=Na()(fn.prototype,"materialSystem",[Er,Cr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fr=Na()(fn.prototype,"geometrySystem",[Ir,Mr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pn=Na()(fn.prototype,"shaderModuleService",[xr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn))||mn);function Ma(P){return[P+1&255,P+1>>8&255,P+1>>8>>8&255]}var Pr,Tr,er,ha,Wa,Jr,Ja,Aa,ei,gi,So,jo;function oi(P,M){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(P);M&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),v.push.apply(v,m)}return v}function Ni(P){for(var M=1;M<arguments.length;M++){var v=arguments[M]!=null?arguments[M]:{};M%2?oi(Object(v),!0).forEach(function(m){ee()(P,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):oi(Object(v)).forEach(function(m){Object.defineProperty(P,m,Object.getOwnPropertyDescriptor(v,m))})}return P}function oo(P){var M=Uo();return function(){var m=es()(P),l;if(M){var A=es()(this).constructor;l=Reflect.construct(m,arguments,A)}else l=m.apply(this,arguments);return Mu()(this,l)}}function Uo(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}var po=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,Po=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,Xo=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],Do=(Pr=Object(Qr.injectable)(),Tr=Object(Qr.inject)(rt.IDENTIFIER.Systems),er=Object(Qr.named)(rt.IDENTIFIER.MaterialSystem),ha=Object(Qr.inject)(rt.IDENTIFIER.Systems),Wa=Object(Qr.named)(rt.IDENTIFIER.GeometrySystem),Jr=Object(Qr.inject)(rt.IDENTIFIER.ShaderModuleService),Pr(Ja=(Aa=(jo=function(P){il()(v,P);var M=oo(v);function v(){var m;sa()(this,v);for(var l=arguments.length,A=new Array(l),B=0;B<l;B++)A[B]=arguments[B];return m=M.call.apply(M,[this].concat(A)),Kr()(m,"materialSystem",ei,ku()(m)),Kr()(m,"geometrySystem",gi,ku()(m)),Kr()(m,"shaderModuleService",So,ku()(m)),m}return ka()(v,[{key:"onAttributeChanged",value:function(l){var A=l.name,B=l.data,X=this.getMeshComponent();X&&X.material&&(A==="strokeWidth"?X.material.setUniform("u_stroke_width",B):A==="strokeColor"?X.material.setUniform("u_stroke_color",B):A==="strokeOpacity"?X.material.setUniform("u_stroke_opacity",B):A==="opacity"?X.material.setUniform("u_opacity",B):A==="blur"&&X.material.setUniform("u_blur",B))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Po,fs:po});var l=this.shaderModuleService.getModule("grid"),A=l.vs,B=l.fs,X=l.uniforms,H=this.materialSystem.createShaderMaterial({vertexShader:A,fragmentShader:B,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:rt.gl.SRC_ALPHA,dstRGB:rt.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});H.setUniform(Ni({u_device_pixel_ratio:window.devicePixelRatio},X));var ne=this.buildAttributes(),oe=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:ne.instancedOffsets.length/2,vertexCount:6});oe.setIndex([0,2,1,0,3,2]),oe.setAttribute("position",Float32Array.from(ne.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),oe.setAttribute("offset",Float32Array.from(ne.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),oe.setAttribute("color",Float32Array.from(ne.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),oe.setAttribute("size",Float32Array.from(ne.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),oe.setAttribute("shape",Float32Array.from(ne.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),oe.setAttribute("a_PickingColor",Float32Array.from(ne.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(H),this.setGeometry(oe)}},{key:"buildAttribute",value:function(l,A,B){var X,H,ne,oe;(X=A.instancedPickingColors).push.apply(X,Oo()(Ma(l.id||B))),A.instancedShapes.push(Xo.indexOf(l.shape||"circle")),(H=A.instancedColors).push.apply(H,Oo()(l.color||[1,0,0,1])),(ne=A.instancedOffsets).push.apply(ne,Oo()(l.position||[0,0])),(oe=A.instancedSizes).push.apply(oe,Oo()(l.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var l=this,A={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(B,X){l.buildAttribute(B,A,X)}):this.buildAttribute(this.config,A,0),A}}]),v}(Ls),jo),ei=Na()(Aa.prototype,"materialSystem",[Tr,er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gi=Na()(Aa.prototype,"geometrySystem",[ha,Wa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),So=Na()(Aa.prototype,"shaderModuleService",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa))||Ja),vo,Ha,Wo,yi,va,Ra,hi,eo,ms,Ml;function ht(P,M){var v;if(typeof Symbol=="undefined"||P[Symbol.iterator]==null){if(Array.isArray(P)||(v=On(P))||M&&P&&typeof P.length=="number"){v&&(P=v);var m=0,l=function(){};return{s:l,n:function(){return m>=P.length?{done:!0}:{done:!1,value:P[m++]}},e:function(ne){throw ne},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A=!0,B=!1,X;return{s:function(){v=P[Symbol.iterator]()},n:function(){var ne=v.next();return A=ne.done,ne},e:function(ne){B=!0,X=ne},f:function(){try{!A&&v.return!=null&&v.return()}finally{if(B)throw X}}}}function On(P,M){if(!P)return;if(typeof P=="string")return ln(P,M);var v=Object.prototype.toString.call(P).slice(8,-1);if(v==="Object"&&P.constructor&&(v=P.constructor.name),v==="Map"||v==="Set")return Array.from(P);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return ln(P,M)}function ln(P,M){(M==null||M>P.length)&&(M=P.length);for(var v=0,m=new Array(M);v<M;v++)m[v]=P[v];return m}var Hr=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,Ga=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,ot=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,Ge=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Nt=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,tn=(vo=Object(Qr.injectable)(),Ha=Object(Qr.inject)(rt.IDENTIFIER.RenderEngine),Wo=Object(Qr.inject)(rt.IDENTIFIER.ShaderModuleService),yi=Object(Qr.inject)(rt.IDENTIFIER.ConfigService),vo(va=(Ra=(Ml=function(){function P(){sa()(this,P),this.container=void 0,Kr()(this,"engine",hi,this),Kr()(this,"shaderModule",eo,this),Kr()(this,"configService",ms,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return ka()(P,[{key:"init",value:function(){var M=N()(Ua.a.mark(function m(){var l,A,B,X,H;return Ua.a.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:Ge}),this.shaderModule.registerModule("uv.vert.main",{vs:Nt}),this.shaderModule.registerModule("uv.frag.declaration",{fs:ot}),this.shaderModule.registerModule("map.frag.declaration",{fs:Hr}),this.shaderModule.registerModule("map.frag.main",{fs:Ga}),l=this.container.getAll(rt.IDENTIFIER.Systems),A=this.configService.get(),!A.canvas){oe.next=30;break}return oe.next=11,this.engine.init({canvas:A.canvas,swapChainFormat:ce.TextureFormat.BGRA8Unorm,antialiasing:!1});case 11:B=ht(l),oe.prev=12,B.s();case 14:if((X=B.n()).done){oe.next=21;break}if(H=X.value,!H.initialize){oe.next=19;break}return oe.next=19,H.initialize();case 19:oe.next=14;break;case 21:oe.next=26;break;case 23:oe.prev=23,oe.t0=oe.catch(12),B.e(oe.t0);case 26:return oe.prev=26,B.f(),oe.finish(26);case 29:this.inited=!0;case 30:case"end":return oe.stop()}},m,this,[[12,23,26,29]])}));function v(){return M.apply(this,arguments)}return v}()},{key:"render",value:function(){var M=N()(Ua.a.mark(function m(){var l,A,B,X,H,ne,oe,be=arguments;return Ua.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!(!this.inited||this.rendering)){Ne.next=2;break}return Ne.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(xe){xe()}),this.rendering=!0,this.engine.beginFrame(),l=this.container.getAll(rt.IDENTIFIER.Systems),A=be.length,B=new Array(A),X=0;X<A;X++)B[X]=be[X];H=ht(l),Ne.prev=8,H.s();case 10:if((ne=H.n()).done){Ne.next=17;break}if(oe=ne.value,!oe.execute){Ne.next=15;break}return Ne.next=15,oe.execute(B);case 15:Ne.next=10;break;case 17:Ne.next=22;break;case 19:Ne.prev=19,Ne.t0=Ne.catch(8),H.e(Ne.t0);case 22:return Ne.prev=22,H.f(),Ne.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Ne.stop()}},m,this,[[8,19,22,25]])}));function v(){return M.apply(this,arguments)}return v}()},{key:"clear",value:function(v){var m=this;return this.inited?this.engine.clear(v):this.pendings.unshift(function(){m.engine.clear(v),m.pendings.shift()}),this}},{key:"setSize",value:function(v){var m=v.width,l=v.height,A=this.engine.getCanvas();return this.size={width:m,height:l},A.width=m,A.height=l,this}},{key:"getSize",value:function(){return this.size}}]),P}(),Ml),hi=Na()(Ra.prototype,"engine",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eo=Na()(Ra.prototype,"shaderModule",[Wo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ms=Na()(Ra.prototype,"configService",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ra))||va),nn,jt,Lt,Yt=(nn=Object(Qr.injectable)(),nn(jt=(Lt=function(){function P(){sa()(this,P),this.entities=[]}return ka()(P,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(v){return this.addEntity(v.getEntity()),this}},{key:"removeRenderable",value:function(v){return this.removeEntity(v.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(v){return this.entities.indexOf(v)===-1&&this.entities.push(v),this}},{key:"removeEntity",value:function(v){var m=this.entities.indexOf(v);return this.entities.splice(m,1),this}}]),P}(),Lt))||jt),nt,Mt,qe,Zt=(nt=Object(Qr.injectable)(),nt(Mt=(qe=function(){function P(){sa()(this,P),this.cache={}}return ka()(P,[{key:"get",value:function(v){return this.cache[v]}},{key:"set",value:function(v,m){this.cache[v]=m}}]),P}(),qe))||Mt),sn,$n,Qn,zn,d,h,x,F;function Q(P,M){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(P);M&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),v.push.apply(v,m)}return v}function pe(P){for(var M=1;M<arguments.length;M++){var v=arguments[M]!=null?arguments[M]:{};M%2?Q(Object(v),!0).forEach(function(m){ee()(P,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):Q(Object(v)).forEach(function(m){Object.defineProperty(P,m,Object.getOwnPropertyDescriptor(v,m))})}return P}var je=(sn=Object(Qr.injectable)(),$n=Object(Qr.inject)(Zt),Qn=Object(Qr.inject)(rt.IDENTIFIER.RenderEngine),sn(zn=(d=(F=function(){function P(){sa()(this,P),Kr()(this,"textureCache",h,this),Kr()(this,"engine",x,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return ka()(P,[{key:"setConfig",value:function(v){this.config=v}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var M=N()(Ua.a.mark(function m(){var l=this;return Ua.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!this.config.url){B.next=4;break}return B.abrupt("return",new Promise(function(X,H){var ne=l.textureCache.get(l.config.url);if(ne)X(ne);else{var oe=new Image;oe.crossOrigin="Anonymous",oe.src=l.config.url,oe.onload=function(){var be=l.engine.createTexture2D(pe(pe({},l.config),{},{data:oe,width:oe.width,height:oe.height,flipY:!0}));l.textureCache.set(l.config.url,be),l.texture=be,l.loaded=!0,X(be)},oe.onerror=function(){H()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),B.abrupt("return",this.texture);case 7:case"end":return B.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()}]),P}(),F),h=Na()(d.prototype,"textureCache",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Na()(d.prototype,"engine",[Qn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d))||zn),ct,yn,or,wr,ga,pa,Fi,ul=(ct=Object(Qr.injectable)(),yn=Object(Qr.inject)(rt.IDENTIFIER.Systems),or=Object(Qr.named)(rt.IDENTIFIER.RendererSystem),ct(wr=(ga=(Fi=function(){function P(){sa()(this,P),Kr()(this,"rendererSystem",pa,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return ka()(P,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(v){return this.camera=v,this}},{key:"setScene",value:function(v){return this.scene=v,this}},{key:"setViewport",value:function(v){return this.viewport=v,this}},{key:"setClearColor",value:function(v){return this.clearColor=v,this}},{key:"pick",value:function(v){return this.rendererSystem.pick(v,this)}}]),P}(),Fi),pa=Na()(ga.prototype,"rendererSystem",[yn,or],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ga))||wr),Vs,In,wn,cr,Xr,aa;function ba(P,M){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(P);M&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),v.push.apply(v,m)}return v}function ri(P){for(var M=1;M<arguments.length;M++){var v=arguments[M]!=null?arguments[M]:{};M%2?ba(Object(v),!0).forEach(function(m){ee()(P,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(v)):ba(Object(v)).forEach(function(m){Object.defineProperty(P,m,Object.getOwnPropertyDescriptor(v,m))})}return P}var Ri=(Vs=Object(Qr.injectable)(),In=Object(Qr.inject)(rt.IDENTIFIER.ConfigService),Vs(wn=(cr=(aa=function(){function P(){sa()(this,P),Kr()(this,"configService",Xr,this),this.container=void 0}return ka()(P,[{key:"getEngine",value:function(){var M=N()(Ua.a.mark(function m(){var l,A,B,X;return Ua.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return l=this.container.get(rt.IDENTIFIER.RenderEngine),A=this.configService.get(),B=A.canvas,X=A.engineOptions,ne.next=4,l.init(ri({canvas:B||Ve(),swapChainFormat:ce.TextureFormat.BGRA8Unorm,antialiasing:!1},X));case 4:return ne.abrupt("return",l);case 5:case"end":return ne.stop()}},m,this)}));function v(){return M.apply(this,arguments)}return v}()},{key:"getTransformComponent",value:function(v){var m=this.container.get(rt.IDENTIFIER.TransformComponentManager);return m.getComponentByEntity(v)}},{key:"getMeshComponent",value:function(v){var m=this.container.get(rt.IDENTIFIER.MeshComponentManager);return m.getComponentByEntity(v)}},{key:"setConfig",value:function(v){this.configService.set(v)}},{key:"setContainer",value:function(v){this.container=v}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Object(rt.createEntity)()}},{key:"createScene",value:function(){return this.container.get(Yt)}},{key:"createCamera",value:function(){return this.container.get(ju)}},{key:"createView",value:function(){return this.container.get(ul)}},{key:"createRenderable",value:function(v,m){var l=v?this.container.getNamed(rt.IDENTIFIER.Renderable,v):this.container.get(Ls),A=Object(rt.createEntity)();return l.setConfig(m||{}),l.setEntity(A),l}},{key:"createGeometry",value:function(v,m){var l=this.container.getNamed(rt.IDENTIFIER.Geometry,v),A=Object(rt.createEntity)();return l.setConfig(m||{}),l.setEntity(A),l.getComponent()}},{key:"createMaterial",value:function(v,m){var l=this.container.getNamed(rt.IDENTIFIER.Material,v),A=Object(rt.createEntity)();return l.setConfig(m||{}),l.setEntity(A,v),l.getComponent()}},{key:"createTexture2D",value:function(v){var m=this.container.get(je);return m.setConfig(v),m}},{key:"createBufferGeometry",value:function(v){var m=this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.GeometrySystem);return m.createBufferGeometry(v)}},{key:"createInstancedBufferGeometry",value:function(v){var m=this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.GeometrySystem);return m.createInstancedBufferGeometry(v)}},{key:"createShaderMaterial",value:function(v){var m=this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.MaterialSystem);return m.createShaderMaterial(v)}},{key:"createKernel",value:function(v){var m=this.container.get(Yc);return typeof v=="string"?m.setBundle(JSON.parse(v)):m.setBundle(v),m.init(),m}},{key:"createRenderer",value:function(){var v=this.container.get(tn);return v.container=this.container,v.init(),v}},{key:"destroy",value:function(){var v=this.container.getAll(rt.IDENTIFIER.Systems);v.forEach(function(A){A.tearDown&&A.tearDown()});var m=this.container.get(rt.IDENTIFIER.RenderEngine);m.destroy();var l=this.container.get(rt.IDENTIFIER.InteractorService);l.destroy()}}],[{key:"create",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=Object(rt.createWorldContainer)(),l=navigator.gpu?Ku:uu;m.isBound(rt.IDENTIFIER.RenderEngine)||m.bind(rt.IDENTIFIER.RenderEngine).to(l).inSingletonScope(),m.bind(tn).toSelf(),m.bind(Yc).toSelf(),m.bind(Ls).toSelf(),m.bind(ul).toSelf(),m.bind(ju).toSelf(),m.bind(Yt).toSelf(),m.bind(P).toSelf(),m.bind(Zt).toSelf(),m.bind(je).toSelf(),m.bind(rt.IDENTIFIER.Geometry).to(_u).whenTargetNamed(Eo.BOX),m.bind(rt.IDENTIFIER.Geometry).to(lh).whenTargetNamed(Eo.SPHERE),m.bind(rt.IDENTIFIER.Geometry).to(sh).whenTargetNamed(Eo.PLANE),m.bind(rt.IDENTIFIER.Geometry).to(Bf).whenTargetNamed(Eo.MERGED),m.bind(rt.IDENTIFIER.Material).to(Gf).whenTargetNamed(Bl.BASIC),m.bind(rt.IDENTIFIER.Renderable).to(Do).whenTargetNamed(Ls.POINT),m.bind(rt.IDENTIFIER.Renderable).to(oa).whenTargetNamed(Ls.LINE),m.bind(rt.IDENTIFIER.Renderable).to(vn).whenTargetNamed(Ls.GRID);var A=m.get(P);return A.setContainer(m),A.setConfig(v),A}}]),P}(),aa),Xr=Na()(cr.prototype,"configService",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cr))||wn),mo=function(M,v){var m;return M?K(M)?m=function(){return M}:m=M:m=function(){return v||1},m},wi=function(M,v){var m=[],l=[],A={},B=0;for(B=0;B<M.length;B++){var X=M[B];A[X.id]=B,m.push(X.x),m.push(X.y),m.push(0),m.push(0),l.push([])}for(B=0;B<v.length;B++){var H=v[B];l[A[H.source]].push(A[H.target]),l[A[H.target]].push(A[H.source])}var ne=0;for(B=0;B<M.length;B++){var oe=m.length,be=l[B],we=be.length;m[B*4+2]=oe,m[B*4+3]=be.length,ne=Math.max(ne,be.length);for(var Ne=0;Ne<we;++Ne){var xe=be[Ne];m.push(+xe)}}for(;m.length%4!==0;)m.push(0);return{maxEdgePerVetex:ne,array:new Float32Array(m)}},vd=function(M,v,m,l){var A=[],B=[],X={},H=0;for(H=0;H<M.length;H++){var ne=M[H];X[ne.id]=H,A.push(ne.x),A.push(ne.y),A.push(0),A.push(0),B.push([])}for(H=0;H<v.length;H++){var oe=v[H];B[X[oe.source]].push(X[oe.target]),B[X[oe.source]].push(m(oe)),B[X[oe.source]].push(l(oe)),B[X[oe.source]].push(0),B[X[oe.target]].push(X[oe.source]),B[X[oe.target]].push(m(oe)),B[X[oe.target]].push(l(oe)),B[X[oe.target]].push(0)}var be=0;for(H=0;H<M.length;H++){var we=A.length,Ne=B[H],xe=Ne.length;A[H*4+2]=we+1048576*xe/4,A[H*4+3]=0,be=Math.max(be,xe/4);for(var ke=0;ke<xe;++ke){var Me=Ne[ke];A.push(+Me)}}for(;A.length%4!==0;)A.push(0);return{maxEdgePerVetex:be,array:new Float32Array(A)}},Op=function(M,v){var m=[],l=M.length,A={};return v.forEach(function(B){M.forEach(function(X,H){if(A[B[X]]===void 0&&(A[B[X]]=Object.keys(A).length),m.push(A[B[X]]),H===l-1)for(;m.length%4!==0;)m.push(0)})}),{array:new Float32Array(m),count:Object.keys(A).length}},lv=function(M){for(var v=[],m=M.length,l=M[0].length,A=function(H){M.forEach(function(ne,oe){if(v.push(ne[H]),oe===m-1)for(;v.length%4!==0;)v.push(0)})},B=0;B<l;B++)A(B);return new Float32Array(v)},Pg=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,ym='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Ig=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,bm='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}',tp=function(P,M,v,m){function l(A){return A instanceof v?A:new v(function(B){B(A)})}return new(v||(v=Promise))(function(A,B){function X(oe){try{ne(m.next(oe))}catch(be){B(be)}}function H(oe){try{ne(m.throw(oe))}catch(be){B(be)}}function ne(oe){oe.done?A(oe.value):l(oe.value).then(X,H)}ne((m=m.apply(P,M||[])).next())})},Lg=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.maxIteration=1e3,l.gravity=10,l.speed=1,l.clustering=!1,l.clusterField="cluster",l.clusterGravity=10,l.workerEnabled=!1,l.nodes=[],l.edges=[],l.width=300,l.height=300,l.nodeMap={},l.nodeIdxMap={},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return tp(this,void 0,void 0,en.a.mark(function l(){var A=this,B,X,H,ne,oe;return en.a.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(B=this,X=B.nodes,!(!X||X.length===0)){we.next=5;break}return B.onLayoutEnd&&B.onLayoutEnd(),we.abrupt("return");case 5:if(!B.width&&typeof window!="undefined"&&(B.width=window.innerWidth),!B.height&&typeof window!="undefined"&&(B.height=window.innerHeight),B.center||(B.center=[B.width/2,B.height/2]),H=B.center,!(X.length===1)){we.next=14;break}return X[0].x=H[0],X[0].y=H[1],B.onLayoutEnd&&B.onLayoutEnd(),we.abrupt("return");case 14:return ne={},oe={},X.forEach(function(Ne,xe){K(Ne.x)||(Ne.x=Math.random()*A.width),K(Ne.y)||(Ne.y=Math.random()*A.height),ne[Ne.id]=Ne,oe[Ne.id]=xe}),B.nodeMap=ne,B.nodeIdxMap=oe,we.next=21,B.run();case 21:case"end":return we.stop()}},l,this)}))}},{key:"executeWithWorker",value:function(l,A){return tp(this,void 0,void 0,en.a.mark(function B(){var X=this,H,ne,oe,be,we;return en.a.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(H=this,ne=H.nodes,oe=H.center,!(!ne||ne.length===0)){xe.next=5;break}return xe.abrupt("return");case 5:if(!(ne.length===1)){xe.next=9;break}return ne[0].x=oe[0],ne[0].y=oe[1],xe.abrupt("return");case 9:return be={},we={},ne.forEach(function(ke,Me){K(ke.x)||(ke.x=Math.random()*X.width),K(ke.y)||(ke.y=Math.random()*X.height),be[ke.id]=ke,we[ke.id]=Me}),H.nodeMap=be,H.nodeIdxMap=we,xe.next=16,H.run(l,A);case 16:case"end":return xe.stop()}},B,this)}))}},{key:"run",value:function(l,A){return tp(this,void 0,void 0,en.a.mark(function B(){var X=this,H,ne,oe,be,we,Ne,xe,ke,Me,He,Xe,dt,Ot,_t,En,an,rn,Hn,Zn,Rr,ar,la,ya,ti,vi,Za;return en.a.wrap(function(qa){for(;;)switch(qa.prev=qa.next){case 0:for(H=this,ne=H.nodes,oe=H.edges,be=H.maxIteration,we=H.center,Ne=H.height*H.width,xe=Math.sqrt(Ne)/10,ke=Ne/(ne.length+1),Me=Math.sqrt(ke),He=H.speed,Xe=H.clustering,dt=Op([H.clusterField],ne),Ot=dt.array,_t=dt.count,ne.forEach(function(_a,ca){var Ti=0,Ci=0;K(_a.fx)&&K(_a.fy)&&(Ti=_a.fx||.001,Ci=_a.fy||.001),Ot[4*ca+1]=Ti,Ot[4*ca+2]=Ci}),En=ne.length,an=wi(ne,oe),rn=an.maxEdgePerVetex,Hn=an.array,Zn=H.workerEnabled,Zn?Rr=Ri.create({canvas:l,engineOptions:{supportCompute:!0}}):Rr=Ri.create({engineOptions:{supportCompute:!0}}),ar=H.onLayoutEnd,la=[],ya=0;ya<_t;ya++)la.push(0,0,0,0);return ti=Rr.createKernel(ym).setDispatch([En,1,1]).setBinding({u_Data:Hn,u_K:Me,u_K2:ke,u_Gravity:H.gravity,u_ClusterGravity:H.clusterGravity||H.gravity||1,u_Speed:He,u_MaxDisplace:xe,u_Clustering:Xe?1:0,u_Center:we,u_AttributeArray:Ot,u_ClusterCenters:la,MAX_EDGE_PER_VERTEX:rn,VERTEX_COUNT:En}),Xe&&(vi=Rr.createKernel(bm).setDispatch([_t,1,1]).setBinding({u_Data:Hn,u_NodeAttributes:Ot,u_ClusterCenters:la,VERTEX_COUNT:En,CLUSTER_COUNT:_t})),Za=function(){return tp(X,void 0,void 0,en.a.mark(function ca(){var Ti,Ci;return en.a.wrap(function(Ia){for(;;)switch(Ia.prev=Ia.next){case 0:Ti=0;case 1:if(!(Ti<be)){Ia.next=13;break}return Ia.next=4,ti.execute();case 4:if(!Xe){Ia.next=9;break}return vi.setBinding({u_Data:ti}),Ia.next=8,vi.execute();case 8:ti.setBinding({u_ClusterCenters:vi});case 9:ti.setBinding({u_MaxDisplace:xe*=.99});case 10:Ti++,Ia.next=1;break;case 13:return Ia.next=15,ti.getOutput();case 15:Ci=Ia.sent,l?A.postMessage({type:as.GPUEND,vertexEdgeData:Ci}):ne.forEach(function(go,xi){var yo=Ci[4*xi],si=Ci[4*xi+1];go.x=yo,go.y=si}),ar&&ar();case 18:case"end":return Ia.stop()}},ca)}))},qa.next=25,Za();case 25:case"end":return qa.stop()}},B,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}]),v}(D),jg=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,Em='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',xm=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,cv='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}',Sp=function(P,M,v,m){function l(A){return A instanceof v?A:new v(function(B){B(A)})}return new(v||(v=Promise))(function(A,B){function X(oe){try{ne(m.next(oe))}catch(be){B(be)}}function H(oe){try{ne(m.throw(oe))}catch(be){B(be)}}function ne(oe){oe.done?A(oe.value):l(oe.value).then(X,H)}ne((m=m.apply(P,M||[])).next())})},Ug=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.maxIteration=1e3,l.edgeStrength=200,l.nodeStrength=1e3,l.coulombDisScale=.005,l.damping=.9,l.maxSpeed=1e3,l.minMovement=.5,l.interval=.02,l.factor=1,l.linkDistance=1,l.gravity=10,l.workerEnabled=!1,l.nodes=[],l.edges=[],l.width=300,l.height=300,l.nodeMap={},l.nodeIdxMap={},l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Sp(this,void 0,void 0,en.a.mark(function l(){var A,B,X,H,ne;return en.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(A=this,B=A.nodes,!(!B||B.length===0)){be.next=5;break}return A.onLayoutEnd&&A.onLayoutEnd(),be.abrupt("return");case 5:if(!A.width&&typeof window!="undefined"&&(A.width=window.innerWidth),!A.height&&typeof window!="undefined"&&(A.height=window.innerHeight),A.center||(A.center=[A.width/2,A.height/2]),X=A.center,!(B.length===1)){be.next=14;break}return B[0].x=X[0],B[0].y=X[1],A.onLayoutEnd&&A.onLayoutEnd(),be.abrupt("return");case 14:return H={},ne={},B.forEach(function(we,Ne){K(we.x)||(we.x=Math.random()*A.width),K(we.y)||(we.y=Math.random()*A.height),H[we.id]=we,ne[we.id]=Ne}),A.nodeMap=H,A.nodeIdxMap=ne,A.nodeStrength=mo(A.nodeStrength,1),A.edgeStrength=mo(A.edgeStrength,1),be.next=23,A.run();case 23:case"end":return be.stop()}},l,this)}))}},{key:"executeWithWorker",value:function(l,A){var B=this,X=B.nodes,H=B.center;if(!X||X.length===0)return;if(X.length===1){X[0].x=H[0],X[0].y=H[1];return}var ne={},oe={};X.forEach(function(be,we){K(be.x)||(be.x=Math.random()*B.width),K(be.y)||(be.y=Math.random()*B.height),ne[be.id]=be,oe[be.id]=we}),B.nodeMap=ne,B.nodeIdxMap=oe,B.nodeStrength=mo(B.nodeStrength,1),B.edgeStrength=mo(B.edgeStrength,1),B.run(l,A)}},{key:"run",value:function(l,A){return Sp(this,void 0,void 0,en.a.mark(function B(){var X=this,H,ne,oe,be,we,Ne,xe,ke,Me,He,Xe,dt,Ot,_t,En,an,rn,Hn,Zn,Rr,ar,la,ya,ti,vi,Za,La;return en.a.wrap(function(_a){for(;;)switch(_a.prev=_a.next){case 0:for(H=this,ne=H.nodes,oe=H.edges,be=H.maxIteration,!H.width&&typeof window!="undefined"&&(H.width=window.innerWidth),!H.height&&typeof window!="undefined"&&(H.height=window.innerHeight),we=ne.length,H.linkDistance=mo(H.linkDistance),H.edgeStrength=mo(H.edgeStrength),Ne=vd(ne,oe,H.linkDistance,H.edgeStrength),xe=Ne.maxEdgePerVetex,ke=Ne.array,H.degrees=ue(ne.length,H.nodeIdxMap,oe),Me=[],He=[],Xe=[],dt=[],Ot=[],_t=[],En=[],H.getMass||(H.getMass=function(ca){return H.degrees[H.nodeIdxMap[ca.id]]||1}),an=H.gravity,rn=H.center,ne.forEach(function(ca,Ti){Me.push(H.getMass(ca)),He.push(H.nodeStrength(ca)),H.degrees[Ti]||(H.degrees[Ti]=0);var Ci=[rn[0],rn[1],an];if(H.getCenter){var $r=H.getCenter(ca,H.degrees[Ti]);$r&&K($r[0])&&K($r[1])&&K($r[2])&&(Ci=$r)}Xe.push(Ci[0]),dt.push(Ci[1]),Ot.push(Ci[2]),K(ca.fx)&&K(ca.fy)?(_t.push(ca.fx||.001),En.push(ca.fy||.001)):(_t.push(0),En.push(0))}),Hn=lv([Me,H.degrees,He,_t]),Zn=lv([Xe,dt,Ot,En]),Rr=H.workerEnabled,Rr?ar=Ri.create({canvas:l,engineOptions:{supportCompute:!0}}):ar=Ri.create({engineOptions:{supportCompute:!0}}),la=H.onLayoutEnd,ya=[],ke.forEach(function(ca){ya.push(ca)}),ti=0;ti<4;ti++)ya.push(0);return vi=ar.createKernel(Em).setDispatch([we,1,1]).setBinding({u_Data:ke,u_damping:H.damping,u_maxSpeed:H.maxSpeed,u_minMovement:H.minMovement,u_coulombDisScale:H.coulombDisScale,u_factor:H.factor,u_NodeAttributeArray1:Hn,u_NodeAttributeArray2:Zn,MAX_EDGE_PER_VERTEX:xe,VERTEX_COUNT:we,u_AveMovement:ya,u_interval:H.interval}),Za=ar.createKernel(cv).setDispatch([1,1,1]).setBinding({u_Data:ke,VERTEX_COUNT:we,u_AveMovement:[0,0,0,0]}),La=function(){return Sp(X,void 0,void 0,en.a.mark(function Ti(){var Ci,$r,Ia;return en.a.wrap(function(xi){for(;;)switch(xi.prev=xi.next){case 0:Ci=0;case 1:if(!(Ci<be)){xi.next=12;break}return xi.next=4,vi.execute();case 4:return Za.setBinding({u_Data:vi}),xi.next=7,Za.execute();case 7:$r=Math.max(.02,H.interval-Ci*.002),vi.setBinding({u_interval:$r,u_AveMovement:Za});case 9:Ci++,xi.next=1;break;case 12:return xi.next=14,vi.getOutput();case 14:Ia=xi.sent,l?A.postMessage({type:as.GPUEND,vertexEdgeData:Ia}):ne.forEach(function(yo,si){var ts=Ia[4*si],_l=Ia[4*si+1];yo.x=ts,yo.y=_l}),la&&la();case 17:case"end":return xi.stop()}},Ti)}))},_a.next=35,La();case 35:case"end":return _a.stop()}},B,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}]),v}(D),Fg=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.center=[0,0],l.maxIteration=100,l.gravity=10,l.comboGravity=10,l.linkDistance=10,l.alpha=1,l.alphaMin=.001,l.alphaDecay=1-Math.pow(l.alphaMin,1/300),l.alphaTarget=0,l.velocityDecay=.6,l.edgeStrength=.6,l.nodeStrength=30,l.preventOverlap=!1,l.preventNodeOverlap=!1,l.preventComboOverlap=!1,l.collideStrength=void 0,l.nodeCollideStrength=.5,l.comboCollideStrength=.5,l.comboSpacing=20,l.comboPadding=10,l.optimizeRangeFactor=1,l.onTick=function(){},l.onLayoutEnd=function(){},l.depthAttractiveForceScale=1,l.depthRepulsiveForceScale=2,l.nodes=[],l.edges=[],l.combos=[],l.comboTrees=[],l.width=300,l.height=300,l.bias=[],l.nodeMap={},l.oriComboMap={},l.indexMap={},l.comboMap={},l.previousLayouted=!1,l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=l.center;if(l.comboTree={id:"comboTreeRoot",depth:-1,children:l.comboTrees},!A||A.length===0){l.onLayoutEnd&&l.onLayoutEnd();return}if(A.length===1){A[0].x=B[0],A[0].y=B[1],l.onLayoutEnd&&l.onLayoutEnd();return}l.initVals(),l.run(),l.onLayoutEnd&&l.onLayoutEnd()}},{key:"run",value:function(){var l=this,A=l.nodes,B=l.previousLayouted?l.maxIteration/5:l.maxIteration;!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight);var X=l.center,H=l.velocityDecay,ne=l.comboMap;l.previousLayouted||l.initPos(ne);for(var oe=function(ke){var Me=[];A.forEach(function(He,Xe){Me[Xe]={x:0,y:0}}),l.applyCalculate(Me),l.applyComboCenterForce(Me),A.forEach(function(He,Xe){if(!K(He.x)||!K(He.y))return;He.x+=Me[Xe].x*H,He.y+=Me[Xe].y*H}),l.alpha+=(l.alphaTarget-l.alpha)*l.alphaDecay,l.onTick()},be=0;be<B;be++)oe(be);var we=[0,0];A.forEach(function(xe){if(!K(xe.x)||!K(xe.y))return;we[0]+=xe.x,we[1]+=xe.y}),we[0]/=A.length,we[1]/=A.length;var Ne=[X[0]-we[0],X[1]-we[1]];A.forEach(function(xe,ke){if(!K(xe.x)||!K(xe.y))return;xe.x+=Ne[0],xe.y+=Ne[1]}),l.combos.forEach(function(xe){var ke=ne[xe.id];ke&&ke.empty&&(xe.x=ke.cx||xe.x,xe.y=ke.cy||xe.y)}),l.previousLayouted=!0}},{key:"initVals",value:function(){var l=this,A=l.edges,B=l.nodes,X=l.combos,H={},ne={},oe={};B.forEach(function(La,qa){ne[La.id]=La,oe[La.id]=qa}),l.nodeMap=ne,l.indexMap=oe;var be={};X.forEach(function(La){be[La.id]=La}),l.oriComboMap=be,l.comboMap=l.getComboMap();var we=l.preventOverlap;l.preventComboOverlap=l.preventComboOverlap||we,l.preventNodeOverlap=l.preventNodeOverlap||we;var Ne=l.collideStrength;Ne&&(l.comboCollideStrength=Ne,l.nodeCollideStrength=Ne),l.comboCollideStrength=l.comboCollideStrength?l.comboCollideStrength:0,l.nodeCollideStrength=l.nodeCollideStrength?l.nodeCollideStrength:0;for(var xe=0;xe<A.length;++xe)H[A[xe].source]?H[A[xe].source]++:H[A[xe].source]=1,H[A[xe].target]?H[A[xe].target]++:H[A[xe].target]=1;for(var ke=[],Me=0;Me<A.length;++Me)ke[Me]=H[A[Me].source]/(H[A[Me].source]+H[A[Me].target]);this.bias=ke;var He=l.nodeSize,Xe=l.nodeSpacing,dt,Ot;if(K(Xe)?Ot=function(){return Xe}:Ee(Xe)?Ot=Xe:Ot=function(){return 0},this.nodeSpacing=Ot,!He)dt=function(qa){if(qa.size){if(z(qa.size)){var _a=qa.size[0]>qa.size[1]?qa.size[0]:qa.size[1];return _a/2}return qa.size/2}return 10};else if(Ee(He))dt=function(qa){return He(qa)};else if(z(He)){var _t=He[0]>He[1]?He[0]:He[1],En=_t/2;dt=function(qa){return En}}else{var an=He/2;dt=function(qa){return an}}this.nodeSize=dt;var rn=l.comboSpacing,Hn;K(rn)?Hn=function(){return rn}:Ee(rn)?Hn=rn:Hn=function(){return 0},this.comboSpacing=Hn;var Zn=l.comboPadding,Rr;K(Zn)?Rr=function(){return Zn}:z(Zn)?Rr=function(){return Math.max.apply(null,Zn)}:Ee(Zn)?Rr=Zn:Rr=function(){return 0},this.comboPadding=Rr;var ar=this.linkDistance,la;ar||(ar=10),K(ar)?la=function(qa){return ar}:la=ar,this.linkDistance=la;var ya=this.edgeStrength,ti;ya||(ya=1),K(ya)?ti=function(qa){return ya}:ti=ya,this.edgeStrength=ti;var vi=this.nodeStrength,Za;vi||(vi=30),K(vi)?Za=function(qa){return vi}:Za=vi,this.nodeStrength=Za}},{key:"initPos",value:function(l){var A=this,B=A.nodes;B.forEach(function(X,H){var ne=X.comboId,oe=l[ne];ne&&oe?(X.x=oe.cx+100/(H+1),X.y=oe.cy+100/(H+1)):(X.x=100/(H+1),X.y=100/(H+1))})}},{key:"getComboMap",value:function(){var l=this,A=l.nodeMap,B=l.indexMap,X=l.comboTrees,H=l.oriComboMap,ne={};return(X||[]).forEach(function(oe){var be=[];se(oe,function(we){if(we.itemType==="node")return!0;if(!H[we.id])return!0;if(ne[we.id]===void 0){var Ne={id:we.id,name:we.id,cx:0,cy:0,count:0,depth:l.oriComboMap[we.id].depth,children:[]};ne[we.id]=Ne}var xe=we.children;xe&&xe.forEach(function(Ot){if(!ne[Ot.id]&&!A[Ot.id])return!0;be.push(Ot)});var ke=ne[we.id];if(ke.cx=0,ke.cy=0,be.length===0){ke.empty=!0;var Me=H[we.id],He=Object.keys(A).length,Xe="".concat(we.id,"-visual-child-").concat(He),dt={id:Xe,x:Me.x,y:Me.y,depth:ke.depth+1,itemType:"node"};l.nodes.push(dt),A[Xe]=dt,B[Xe]=He,ke.cx=Me.x,ke.cy=Me.y,be.push(dt)}return be.forEach(function(Ot){if(ke.count++,Ot.itemType!=="node"){var _t=ne[Ot.id];K(_t.cx)&&(ke.cx+=_t.cx),K(_t.cy)&&(ke.cy+=_t.cy);return}var En=A[Ot.id];if(!En)return;K(En.x)&&(ke.cx+=En.x),K(En.y)&&(ke.cy+=En.y)}),ke.cx/=ke.count,ke.cy/=ke.count,ke.children=be,!0})}),ne}},{key:"applyComboCenterForce",value:function(l){var A=this,B=A.gravity,X=A.comboGravity||B,H=this.alpha,ne=A.comboTrees,oe=A.indexMap,be=A.nodeMap,we=A.comboMap;(ne||[]).forEach(function(Ne){se(Ne,function(xe){if(xe.itemType==="node")return!0;var ke=we[xe.id];if(!ke)return!0;var Me=we[xe.id],He=(Me.depth+1)/10*.5,Xe=Me.cx,dt=Me.cy;return Me.cx=0,Me.cy=0,Me.children.forEach(function(Ot){if(Ot.itemType!=="node"){var _t=we[Ot.id];_t&&K(_t.cx)&&(Me.cx+=_t.cx),_t&&K(_t.cy)&&(Me.cy+=_t.cy);return}var En=be[Ot.id],an=En.x-Xe||.005,rn=En.y-dt||.005,Hn=Math.sqrt(an*an+rn*rn),Zn=oe[En.id],Rr=X*H/Hn*He;l[Zn].x-=an*Rr,l[Zn].y-=rn*Rr,K(En.x)&&(Me.cx+=En.x),K(En.y)&&(Me.cy+=En.y)}),Me.cx/=Me.count,Me.cy/=Me.count,!0})})}},{key:"applyCalculate",value:function(l){var A=this,B=A.comboMap,X=A.nodes,H={};X.forEach(function(oe,be){X.forEach(function(we,Ne){if(be<Ne)return;var xe=oe.x-we.x||.005,ke=oe.y-we.y||.005,Me=xe*xe+ke*ke,He=Math.sqrt(Me);Me<1&&(Me=He),H["".concat(oe.id,"-").concat(we.id)]={vx:xe,vy:ke,vl2:Me,vl:He},H["".concat(we.id,"-").concat(oe.id)]={vl2:Me,vl:He,vx:-xe,vy:-ke}})}),A.updateComboSizes(B),A.calRepulsive(l,H),A.calAttractive(l,H);var ne=A.preventComboOverlap;ne&&A.comboNonOverlapping(l,B)}},{key:"updateComboSizes",value:function(l){var A=this,B=A.comboTrees,X=A.nodeMap,H=A.nodeSize,ne=A.comboSpacing,oe=A.comboPadding;(B||[]).forEach(function(be){var we=[];se(be,function(Ne){if(Ne.itemType==="node")return!0;var xe=l[Ne.id];if(!xe)return!1;var ke=Ne.children;ke&&ke.forEach(function(Xe){if(!l[Xe.id]&&!X[Xe.id])return;we.push(Xe)}),xe.minX=Infinity,xe.minY=Infinity,xe.maxX=-Infinity,xe.maxY=-Infinity,we.forEach(function(Xe){if(Xe.itemType!=="node")return!0;var dt=X[Xe.id];if(!dt)return!0;var Ot=H(dt),_t=dt.x-Ot,En=dt.y-Ot,an=dt.x+Ot,rn=dt.y+Ot;xe.minX>_t&&(xe.minX=_t),xe.minY>En&&(xe.minY=En),xe.maxX<an&&(xe.maxX=an),xe.maxY<rn&&(xe.maxY=rn)});var Me=A.oriComboMap[Ne.id].size||10;z(Me)&&(Me=Me[0]);var He=Math.max(xe.maxX-xe.minX,xe.maxY-xe.minY,Me);return xe.r=He/2+ne(xe)/2+oe(xe),!0})})}},{key:"comboNonOverlapping",value:function(l,A){var B=this,X=B.comboTree,H=B.comboCollideStrength,ne=B.indexMap,oe=B.nodeMap;se(X,function(be){if(!A[be.id]&&!oe[be.id]&&be.id!=="comboTreeRoot")return!1;var we=be.children;return we&&we.length>1&&we.forEach(function(Ne,xe){if(Ne.itemType==="node")return!1;var ke=A[Ne.id];if(!ke)return;we.forEach(function(Me,He){if(xe<=He)return!1;if(Me.itemType==="node")return!1;var Xe=A[Me.id];if(!Xe)return!1;var dt=ke.cx-Xe.cx||.005,Ot=ke.cy-Xe.cy||.005,_t=dt*dt+Ot*Ot,En=ke.r,an=Xe.r,rn=En+an,Hn=an*an,Zn=En*En;if(_t<rn*rn){var Rr=Ne.children;if(!Rr||Rr.length===0)return!1;var ar=Me.children;if(!ar||ar.length===0)return!1;var la=Math.sqrt(_t),ya=(rn-la)/la*H,ti=dt*ya,vi=Ot*ya,Za=Hn/(Zn+Hn),La=1-Za;Rr.forEach(function(qa){if(qa.itemType!=="node")return!1;if(!oe[qa.id])return;var _a=ne[qa.id];ar.forEach(function(ca){if(ca.itemType!=="node")return!1;if(!oe[ca.id])return!1;var Ti=ne[ca.id];l[_a].x+=ti*Za,l[_a].y+=vi*Za,l[Ti].x-=ti*La,l[Ti].y-=vi*La})})}})}),!0})}},{key:"calRepulsive",value:function(l,A){var B=this,X=B.nodes,H=B.width*B.optimizeRangeFactor,ne=B.nodeStrength,oe=B.alpha,be=B.nodeCollideStrength,we=B.preventNodeOverlap,Ne=B.nodeSize,xe=B.nodeSpacing,ke=B.depthRepulsiveForceScale,Me=B.center;X.forEach(function(He,Xe){if(!He.x||!He.y)return;if(Me){var dt=B.gravity,Ot=He.x-Me[0]||.005,_t=He.y-Me[1]||.005,En=Math.sqrt(Ot*Ot+_t*_t);l[Xe].x-=Ot*dt*oe/En,l[Xe].y-=_t*dt*oe/En}X.forEach(function(an,rn){if(Xe===rn)return;if(!an.x||!an.y)return;var Hn=A["".concat(He.id,"-").concat(an.id)],Zn=Hn.vl2,Rr=Hn.vl;if(Rr>H)return;var ar=A["".concat(He.id,"-").concat(an.id)],la=ar.vx,ya=ar.vy,ti=Math.log(Math.abs(an.depth-He.depth)/10)+1||1;ti=ti<1?1:ti,an.comboId!==He.comboId&&(ti+=1);var vi=ti?Math.pow(ke,ti):1,Za=ne(an)*oe/Zn*vi;if(l[Xe].x+=la*Za,l[Xe].y+=ya*Za,Xe<rn&&we){var La=Ne(He)+xe(He),qa=Ne(an)+xe(an),_a=La+qa;if(Zn<_a*_a){var ca=(_a-Rr)/Rr*be,Ti=qa*qa,Ci=Ti/(La*La+Ti),$r=la*ca,Ia=ya*ca;l[Xe].x+=$r*Ci,l[Xe].y+=Ia*Ci,Ci=1-Ci,l[rn].x-=$r*Ci,l[rn].y-=Ia*Ci}}})})}},{key:"calAttractive",value:function(l,A){var B=this,X=B.edges,H=B.linkDistance,ne=B.alpha,oe=B.edgeStrength,be=B.bias,we=B.depthAttractiveForceScale;X.forEach(function(Ne,xe){if(!Ne.source||!Ne.target||Ne.source===Ne.target)return;var ke=B.indexMap[Ne.source],Me=B.indexMap[Ne.target],He=B.nodeMap[Ne.source],Xe=B.nodeMap[Ne.target];if(!He||!Xe)return;var dt=Math.log(Math.abs(He.depth-Xe.depth)/10);He.comboId===Xe.comboId&&(dt=dt/2);var Ot=dt?Math.pow(we,dt):1;if(He.comboId!==Xe.comboId&&Ot===1?Ot=we/2:He.comboId===Xe.comboId&&(Ot=2),!K(Xe.x)||!K(He.x)||!K(Xe.y)||!K(He.y))return;var _t=A["".concat(Ne.target,"-").concat(Ne.source)],En=_t.vl,an=_t.vx,rn=_t.vy,Hn=(En-H(Ne))/En*ne*oe(Ne)*Ot,Zn=an*Hn,Rr=rn*Hn,ar=be[xe];l[Me].x-=Zn*ar,l[Me].y-=Rr*ar,l[ke].x+=Zn*(1-ar),l[ke].y+=Rr*(1-ar)})}},{key:"getType",value:function(){return"comboForce"}}]),v}(D),wm=function(){function P(M){Object(g.a)(this,P),this.id=M.id||0,this.rx=M.rx,this.ry=M.ry,this.fx=0,this.fy=0,this.mass=M.mass,this.degree=M.degree,this.g=M.g||0}return Object(w.a)(P,[{key:"distanceTo",value:function(v){var m=this.rx-v.rx,l=this.ry-v.ry;return Math.hypot(m,l)}},{key:"setPos",value:function(v,m){this.rx=v,this.ry=m}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(v){var m=v.rx-this.rx,l=v.ry-this.ry,A=Math.hypot(m,l);A=A<1e-4?1e-4:A;var B=this.g*(this.degree+1)*(v.degree+1)/A;this.fx+=B*m/A,this.fy+=B*l/A}},{key:"in",value:function(v){return v.contains(this.rx,this.ry)}},{key:"add",value:function(v){var m=this.mass+v.mass,l=(this.rx*this.mass+v.rx*v.mass)/m,A=(this.ry*this.mass+v.ry*v.mass)/m,B=this.degree+v.degree,X={rx:l,ry:A,mass:m,degree:B};return new P(X)}}]),P}(),Cm=function(){function P(M){Object(g.a)(this,P),this.xmid=M.xmid,this.ymid=M.ymid,this.length=M.length,this.massCenter=M.massCenter||[0,0],this.mass=M.mass||1}return Object(w.a)(P,[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(v,m){var l=this.length/2;return v<=this.xmid+l&&v>=this.xmid-l&&m<=this.ymid+l&&m>=this.ymid-l}},{key:"NW",value:function(){var v=this.xmid-this.length/4,m=this.ymid+this.length/4,l=this.length/2,A={xmid:v,ymid:m,length:l},B=new P(A);return B}},{key:"NE",value:function(){var v=this.xmid+this.length/4,m=this.ymid+this.length/4,l=this.length/2,A={xmid:v,ymid:m,length:l},B=new P(A);return B}},{key:"SW",value:function(){var v=this.xmid-this.length/4,m=this.ymid-this.length/4,l=this.length/2,A={xmid:v,ymid:m,length:l},B=new P(A);return B}},{key:"SE",value:function(){var v=this.xmid+this.length/4,m=this.ymid-this.length/4,l=this.length/2,A={xmid:v,ymid:m,length:l},B=new P(A);return B}}]),P}(),Tm=function(){function P(M){Object(g.a)(this,P),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,M!=null&&(this.quad=M)}return Object(w.a)(P,[{key:"insert",value:function(v){if(this.body==null){this.body=v;return}this._isExternal()?(this.quad&&(this.NW=new P(this.quad.NW()),this.NE=new P(this.quad.NE()),this.SW=new P(this.quad.SW()),this.SE=new P(this.quad.SE())),this._putBody(this.body),this._putBody(v),this.body=this.body.add(v)):(this.body=this.body.add(v),this._putBody(v))}},{key:"_putBody",value:function(v){if(!this.quad)return;v.in(this.quad.NW())&&this.NW?this.NW.insert(v):v.in(this.quad.NE())&&this.NE?this.NE.insert(v):v.in(this.quad.SW())&&this.SW?this.SW.insert(v):v.in(this.quad.SE())&&this.SE&&this.SE.insert(v)}},{key:"_isExternal",value:function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}},{key:"updateForce",value:function(v){if(this.body==null||v===this.body)return;if(this._isExternal())v.addForce(this.body);else{var m=this.quad?this.quad.getLength():0,l=this.body.distanceTo(v);m/l<this.theta?v.addForce(this.body):(this.NW&&this.NW.updateForce(v),this.NE&&this.NE.updateForce(v),this.SW&&this.SW.updateForce(v),this.SE&&this.SE.updateForce(v))}}}]),P}(),Bg=function(P){Object(E.a)(v,P);var M=Object(T.a)(v);function v(m){var l;return Object(g.a)(this,v),l=M.call(this),l.center=[0,0],l.width=300,l.height=300,l.nodes=[],l.edges=[],l.kr=5,l.kg=1,l.mode="normal",l.preventOverlap=!1,l.dissuadeHubs=!1,l.barnesHut=!1,l.maxIteration=0,l.ks=.1,l.ksmax=10,l.tao=.1,l.onLayoutEnd=function(){},l.prune=!1,l.updateCfg(m),l}return Object(w.a)(v,[{key:"getDefaultCfg",value:function(){return{}}},{key:"execute",value:function(){var l=this,A=l.nodes,B=l.maxIteration,X=l.onLayoutEnd,H=l.prune;!l.width&&typeof window!="undefined"&&(l.width=window.innerWidth),!l.height&&typeof window!="undefined"&&(l.height=window.innerHeight);for(var ne=[],oe=A.length,be=0;be<oe;be+=1){var we=A[be],Ne=10,xe=10;K(we.size)&&(Ne=we.size,xe=we.size),z(we.size)&&(isNaN(we.size[0])||(Ne=we.size[0]),isNaN(we.size[1])||(xe=we.size[1])),l.getWidth&&!isNaN(l.getWidth(we))&&(xe=l.getWidth(we)),l.getHeight&&!isNaN(l.getHeight(we))&&(Ne=l.getHeight(we));var ke=Math.max(Ne,xe);ne.push(ke)}!l.barnesHut&&oe>250&&(l.barnesHut=!0),!l.prune&&oe>100&&(l.prune=!0),this.maxIteration===0&&!l.prune?(B=250,oe<=200&&oe>100?B=1e3:oe>200&&(B=1200),this.maxIteration=B):this.maxIteration===0&&H&&(B=100,oe<=200&&oe>100?B=500:oe>200&&(B=950),this.maxIteration=B),l.kr||(l.kr=50,oe>100&&oe<=500?l.kr=20:oe>500&&(l.kr=1)),l.kg||(l.kg=20,oe>100&&oe<=500?l.kg=10:oe>500&&(l.kg=1)),this.nodes=l.updateNodesByForces(ne),X()}},{key:"updateNodesByForces",value:function(l){for(var A=this,B=A.nodes,X=A.edges,H=A.maxIteration,ne=X.filter(function(Hn){return Hn.source!==Hn.target}),oe=B.length,be=ne.length,we=[],Ne={},xe={},ke=[],Me=0;Me<oe;Me+=1)Ne[B[Me].id]=Me,we[Me]=0,(B[Me].x===void 0||isNaN(B[Me].x))&&(B[Me].x=Math.random()*1e3),(B[Me].y===void 0||isNaN(B[Me].y))&&(B[Me].y=Math.random()*1e3),ke.push({x:B[Me].x,y:B[Me].y});for(var He=0;He<be;He+=1){for(var Xe=void 0,dt=void 0,Ot=0,_t=0,En=0;En<oe;En+=1)B[En].id===ne[He].source?(Xe=B[En],Ot=En):B[En].id===ne[He].target&&(dt=B[En],_t=En),xe[He]={sourceIdx:Ot,targetIdx:_t};Xe&&(we[Ne[Xe.id]]+=1),dt&&(we[Ne[dt.id]]+=1)}var an=H;if(B=this.iterate(an,Ne,xe,be,we,l),A.prune){for(var rn=0;rn<be;rn+=1)we[xe[rn].sourceIdx]<=1?(B[xe[rn].sourceIdx].x=B[xe[rn].targetIdx].x,B[xe[rn].sourceIdx].y=B[xe[rn].targetIdx].y):we[xe[rn].targetIdx]<=1&&(B[xe[rn].targetIdx].x=B[xe[rn].sourceIdx].x,B[xe[rn].targetIdx].y=B[xe[rn].sourceIdx].y);A.prune=!1,A.barnesHut=!1,an=100,B=this.iterate(an,Ne,xe,be,we,l)}return B}},{key:"iterate",value:function(l,A,B,X,H,ne){for(var oe=this,be=oe.nodes,we=oe.kr,Ne=oe.preventOverlap,xe=oe.barnesHut,ke=be.length,Me=0,He=100,Xe=l,dt=50,Ot=[],_t=[],En=[],an=0;an<ke;an+=1)if(Ot[2*an]=0,Ot[2*an+1]=0,xe){var rn={id:an,rx:be[an].x,ry:be[an].y,mass:1,g:we,degree:H[an]};En[an]=new wm(rn)}for(;Xe>0;){for(var Hn=0;Hn<ke;Hn+=1)_t[2*Hn]=Ot[2*Hn],_t[2*Hn+1]=Ot[2*Hn+1],Ot[2*Hn]=0,Ot[2*Hn+1]=0;Ot=this.getAttrForces(Xe,dt,X,A,B,H,ne,Ot),xe&&(Ne&&Xe>dt||!Ne)?Ot=this.getOptRepGraForces(Ot,En,H):Ot=this.getRepGraForces(Xe,dt,Ot,He,ne,H);var Zn=this.updatePos(Ot,_t,Me,H);be=Zn.nodes,Me=Zn.sg,Xe--,oe.tick&&oe.tick()}return be}},{key:"getAttrForces",value:function(l,A,B,X,H,ne,oe,be){for(var we=this,Ne=we.nodes,xe=we.preventOverlap,ke=we.dissuadeHubs,Me=we.mode,He=we.prune,Xe=0;Xe<B;Xe+=1){var dt=Ne[H[Xe].sourceIdx],Ot=H[Xe].sourceIdx,_t=Ne[H[Xe].targetIdx],En=H[Xe].targetIdx;if(He&&(ne[Ot]<=1||ne[En]<=1))continue;var an=[_t.x-dt.x,_t.y-dt.y],rn=Math.hypot(an[0],an[1]);rn=rn<1e-4?1e-4:rn,an[0]=an[0]/rn,an[1]=an[1]/rn,xe&&l<A&&(rn=rn-oe[Ot]-oe[En]);var Hn=rn,Zn=Hn;Me==="linlog"&&(Hn=Math.log(1+rn),Zn=Hn),ke&&(Hn=rn/ne[Ot],Zn=rn/ne[En]),xe&&l<A&&rn<=0?(Hn=0,Zn=0):xe&&l<A&&rn>0&&(Hn=rn,Zn=rn),be[2*X[dt.id]]+=Hn*an[0],be[2*X[_t.id]]-=Zn*an[0],be[2*X[dt.id]+1]+=Hn*an[1],be[2*X[_t.id]+1]-=Zn*an[1]}return be}},{key:"getRepGraForces",value:function(l,A,B,X,H,ne){for(var oe=this,be=oe.nodes,we=oe.preventOverlap,Ne=oe.kr,xe=oe.kg,ke=oe.center,Me=oe.prune,He=be.length,Xe=0;Xe<He;Xe+=1){for(var dt=Xe+1;dt<He;dt+=1){if(Me&&(ne[Xe]<=1||ne[dt]<=1))continue;var Ot=[be[dt].x-be[Xe].x,be[dt].y-be[Xe].y],_t=Math.hypot(Ot[0],Ot[1]);_t=_t<1e-4?1e-4:_t,Ot[0]=Ot[0]/_t,Ot[1]=Ot[1]/_t,we&&l<A&&(_t=_t-H[Xe]-H[dt]);var En=Ne*(ne[Xe]+1)*(ne[dt]+1)/_t;we&&l<A&&_t<0?En=X*(ne[Xe]+1)*(ne[dt]+1):we&&l<A&&_t===0?En=0:we&&l<A&&_t>0&&(En=Ne*(ne[Xe]+1)*(ne[dt]+1)/_t),B[2*Xe]-=En*Ot[0],B[2*dt]+=En*Ot[0],B[2*Xe+1]-=En*Ot[1],B[2*dt+1]+=En*Ot[1]}var an=[be[Xe].x-ke[0],be[Xe].y-ke[1]],rn=Math.hypot(an[0],an[1]);an[0]=an[0]/rn,an[1]=an[1]/rn;var Hn=xe*(ne[Xe]+1);B[2*Xe]-=Hn*an[0],B[2*Xe+1]-=Hn*an[1]}return B}},{key:"getOptRepGraForces",value:function(l,A,B){for(var X=this,H=X.nodes,ne=X.kg,oe=X.center,be=X.prune,we=H.length,Ne=9e10,xe=-9e10,ke=9e10,Me=-9e10,He=0;He<we;He+=1){if(be&&B[He]<=1)continue;A[He].setPos(H[He].x,H[He].y),H[He].x>=xe&&(xe=H[He].x),H[He].x<=Ne&&(Ne=H[He].x),H[He].y>=Me&&(Me=H[He].y),H[He].y<=ke&&(ke=H[He].y)}for(var Xe=Math.max(xe-Ne,Me-ke),dt={xmid:(xe+Ne)/2,ymid:(Me+ke)/2,length:Xe,massCenter:oe,mass:we},Ot=new Cm(dt),_t=new Tm(Ot),En=0;En<we;En+=1){if(be&&B[En]<=1)continue;A[En].in(Ot)&&_t.insert(A[En])}for(var an=0;an<we;an+=1){if(be&&B[an]<=1)continue;A[an].resetForce(),_t.updateForce(A[an]),l[2*an]-=A[an].fx,l[2*an+1]-=A[an].fy;var rn=[H[an].x-oe[0],H[an].y-oe[1]],Hn=Math.hypot(rn[0],rn[1]);Hn=Hn<1e-4?1e-4:Hn,rn[0]=rn[0]/Hn,rn[1]=rn[1]/Hn;var Zn=ne*(B[an]+1);l[2*an]-=Zn*rn[0],l[2*an+1]-=Zn*rn[1]}return l}},{key:"updatePos",value:function(l,A,B,X){for(var H=this,ne=H.nodes,oe=H.ks,be=H.tao,we=H.prune,Ne=H.ksmax,xe=ne.length,ke=[],Me=[],He=0,Xe=0,dt=0;dt<xe;dt+=1){if(we&&X[dt]<=1)continue;var Ot=[l[2*dt]-A[2*dt],l[2*dt+1]-A[2*dt+1]],_t=Math.hypot(Ot[0],Ot[1]),En=[l[2*dt]+A[2*dt],l[2*dt+1]+A[2*dt+1]],an=Math.hypot(En[0],En[1]);ke[dt]=_t,Me[dt]=an/2,He+=(X[dt]+1)*ke[dt],Xe+=(X[dt]+1)*Me[dt]}var rn=B;B=be*Xe/He,rn!==0&&(B=B>1.5*rn?1.5*rn:B);for(var Hn=0;Hn<xe;Hn+=1){if(we&&X[Hn]<=1)continue;var Zn=oe*B/(1+B*Math.sqrt(ke[Hn])),Rr=Math.hypot(l[2*Hn],l[2*Hn+1]);Rr=Rr<1e-4?1e-4:Rr;var ar=Ne/Rr;Zn=Zn>ar?ar:Zn;var la=Zn*l[2*Hn],ya=Zn*l[2*Hn+1];ne[Hn].x+=la,ne[Hn].y+=ya}return{nodes:ne,sg:B}}}]),v}(D),Vg=function(){function P(M){Object(g.a)(this,P);var v=Ue(M.type);this.layoutInstance=new v(M)}return Object(w.a)(P,[{key:"layout",value:function(v){return this.layoutInstance.layout(v)}},{key:"updateCfg",value:function(v){this.layoutInstance.updateCfg(v)}},{key:"init",value:function(v){this.layoutInstance.init(v)}},{key:"execute",value:function(){this.layoutInstance.execute()}},{key:"getDefaultCfg",value:function(){return this.layoutInstance.getDefaultCfg()}},{key:"destroy",value:function(){return this.layoutInstance.destroy()}}]),P}(),zg=new Proxy({},{get:function(M,v){return Ue(v)},set:function(M,v,m){return Te(v,m),!0}})},function(j,_,u){var g=function(f){"use strict";var E=Object.prototype,T=E.hasOwnProperty,w,D=typeof Symbol=="function"?Symbol:{},O=D.iterator||"@@iterator",L=D.asyncIterator||"@@asyncIterator",U=D.toStringTag||"@@toStringTag";function V(Ke,Tt,Gt){return Object.defineProperty(Ke,Tt,{value:Gt,enumerable:!0,configurable:!0,writable:!0}),Ke[Tt]}try{V({},"")}catch(Ke){V=function(Gt,gn,Ut){return Gt[gn]=Ut}}function z(Ke,Tt,Gt,gn){var Ut=Tt&&Tt.prototype instanceof le?Tt:le,Ht=Object.create(Ut.prototype),Rt=new At(gn||[]);return Ht._invoke=Ue(Ke,Gt,Rt),Ht}f.wrap=z;function K(Ke,Tt,Gt){try{return{type:"normal",arg:Ke.call(Tt,Gt)}}catch(gn){return{type:"throw",arg:gn}}}var J="suspendedStart",he="suspendedYield",ue="executing",de="completed",ae={};function le(){}function re(){}function se(){}var ye={};ye[O]=function(){return this};var Z=Object.getPrototypeOf,Ee=Z&&Z(Z(mt([])));Ee&&Ee!==E&&T.call(Ee,O)&&(ye=Ee);var k=se.prototype=le.prototype=Object.create(ye);re.prototype=k.constructor=se,se.constructor=re,re.displayName=V(se,U,"GeneratorFunction");function Te(Ke){["next","throw","return"].forEach(function(Tt){V(Ke,Tt,function(Gt){return this._invoke(Tt,Gt)})})}f.isGeneratorFunction=function(Ke){var Tt=typeof Ke=="function"&&Ke.constructor;return Tt?Tt===re||(Tt.displayName||Tt.name)==="GeneratorFunction":!1},f.mark=function(Ke){return Object.setPrototypeOf?Object.setPrototypeOf(Ke,se):(Ke.__proto__=se,V(Ke,U,"GeneratorFunction")),Ke.prototype=Object.create(k),Ke},f.awrap=function(Ke){return{__await:Ke}};function De(Ke,Tt){function Gt(Ht,Rt,Fe,me){var ze=K(Ke[Ht],Ke,Rt);if(ze.type==="throw")me(ze.arg);else{var Be=ze.arg,ut=Be.value;return ut&&typeof ut=="object"&&T.call(ut,"__await")?Tt.resolve(ut.__await).then(function(xt){Gt("next",xt,Fe,me)},function(xt){Gt("throw",xt,Fe,me)}):Tt.resolve(ut).then(function(xt){Be.value=xt,Fe(Be)},function(xt){return Gt("throw",xt,Fe,me)})}}var gn;function Ut(Ht,Rt){function Fe(){return new Tt(function(me,ze){Gt(Ht,Rt,me,ze)})}return gn=gn?gn.then(Fe,Fe):Fe()}this._invoke=Ut}Te(De.prototype),De.prototype[L]=function(){return this},f.AsyncIterator=De,f.async=function(Ke,Tt,Gt,gn,Ut){Ut===void 0&&(Ut=Promise);var Ht=new De(z(Ke,Tt,Gt,gn),Ut);return f.isGeneratorFunction(Tt)?Ht:Ht.next().then(function(Rt){return Rt.done?Rt.value:Ht.next()})};function Ue(Ke,Tt,Gt){var gn=J;return function(Ht,Rt){if(gn===ue)throw new Error("Generator is already running");if(gn===de){if(Ht==="throw")throw Rt;return Dt()}for(Gt.method=Ht,Gt.arg=Rt;;){var Fe=Gt.delegate;if(Fe){var me=St(Fe,Gt);if(me){if(me===ae)continue;return me}}if(Gt.method==="next")Gt.sent=Gt._sent=Gt.arg;else if(Gt.method==="throw"){if(gn===J)throw gn=de,Gt.arg;Gt.dispatchException(Gt.arg)}else Gt.method==="return"&&Gt.abrupt("return",Gt.arg);gn=ue;var ze=K(Ke,Tt,Gt);if(ze.type==="normal"){if(gn=Gt.done?de:he,ze.arg===ae)continue;return{value:ze.arg,done:Gt.done}}else ze.type==="throw"&&(gn=de,Gt.method="throw",Gt.arg=ze.arg)}}}function St(Ke,Tt){var Gt=Ke.iterator[Tt.method];if(Gt===w){if(Tt.delegate=null,Tt.method==="throw"){if(Ke.iterator.return&&(Tt.method="return",Tt.arg=w,St(Ke,Tt),Tt.method==="throw"))return ae;Tt.method="throw",Tt.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var gn=K(Gt,Ke.iterator,Tt.arg);if(gn.type==="throw")return Tt.method="throw",Tt.arg=gn.arg,Tt.delegate=null,ae;var Ut=gn.arg;if(!Ut)return Tt.method="throw",Tt.arg=new TypeError("iterator result is not an object"),Tt.delegate=null,ae;if(Ut.done)Tt[Ke.resultName]=Ut.value,Tt.next=Ke.nextLoc,Tt.method!=="return"&&(Tt.method="next",Tt.arg=w);else return Ut;return Tt.delegate=null,ae}Te(k),V(k,U,"Generator"),k[O]=function(){return this},k.toString=function(){return"[object Generator]"};function Ae(Ke){var Tt={tryLoc:Ke[0]};1 in Ke&&(Tt.catchLoc=Ke[1]),2 in Ke&&(Tt.finallyLoc=Ke[2],Tt.afterLoc=Ke[3]),this.tryEntries.push(Tt)}function Wt(Ke){var Tt=Ke.completion||{};Tt.type="normal",delete Tt.arg,Ke.completion=Tt}function At(Ke){this.tryEntries=[{tryLoc:"root"}],Ke.forEach(Ae,this),this.reset(!0)}f.keys=function(Ke){var Tt=[];for(var Gt in Ke)Tt.push(Gt);return Tt.reverse(),function gn(){for(;Tt.length;){var Ut=Tt.pop();if(Ut in Ke)return gn.value=Ut,gn.done=!1,gn}return gn.done=!0,gn}};function mt(Ke){if(Ke){var Tt=Ke[O];if(Tt)return Tt.call(Ke);if(typeof Ke.next=="function")return Ke;if(!isNaN(Ke.length)){var Gt=-1,gn=function Ut(){for(;++Gt<Ke.length;)if(T.call(Ke,Gt))return Ut.value=Ke[Gt],Ut.done=!1,Ut;return Ut.value=w,Ut.done=!0,Ut};return gn.next=gn}}return{next:Dt}}f.values=mt;function Dt(){return{value:w,done:!0}}return At.prototype={constructor:At,reset:function(Tt){if(this.prev=0,this.next=0,this.sent=this._sent=w,this.done=!1,this.delegate=null,this.method="next",this.arg=w,this.tryEntries.forEach(Wt),!Tt)for(var Gt in this)Gt.charAt(0)==="t"&&T.call(this,Gt)&&!isNaN(+Gt.slice(1))&&(this[Gt]=w)},stop:function(){this.done=!0;var Tt=this.tryEntries[0],Gt=Tt.completion;if(Gt.type==="throw")throw Gt.arg;return this.rval},dispatchException:function(Tt){if(this.done)throw Tt;var Gt=this;function gn(ze,Be){return Rt.type="throw",Rt.arg=Tt,Gt.next=ze,Be&&(Gt.method="next",Gt.arg=w),!!Be}for(var Ut=this.tryEntries.length-1;Ut>=0;--Ut){var Ht=this.tryEntries[Ut],Rt=Ht.completion;if(Ht.tryLoc==="root")return gn("end");if(Ht.tryLoc<=this.prev){var Fe=T.call(Ht,"catchLoc"),me=T.call(Ht,"finallyLoc");if(Fe&&me){if(this.prev<Ht.catchLoc)return gn(Ht.catchLoc,!0);if(this.prev<Ht.finallyLoc)return gn(Ht.finallyLoc)}else if(Fe){if(this.prev<Ht.catchLoc)return gn(Ht.catchLoc,!0)}else if(me){if(this.prev<Ht.finallyLoc)return gn(Ht.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Tt,Gt){for(var gn=this.tryEntries.length-1;gn>=0;--gn){var Ut=this.tryEntries[gn];if(Ut.tryLoc<=this.prev&&T.call(Ut,"finallyLoc")&&this.prev<Ut.finallyLoc){var Ht=Ut;break}}Ht&&(Tt==="break"||Tt==="continue")&&Ht.tryLoc<=Gt&&Gt<=Ht.finallyLoc&&(Ht=null);var Rt=Ht?Ht.completion:{};return Rt.type=Tt,Rt.arg=Gt,Ht?(this.method="next",this.next=Ht.finallyLoc,ae):this.complete(Rt)},complete:function(Tt,Gt){if(Tt.type==="throw")throw Tt.arg;return Tt.type==="break"||Tt.type==="continue"?this.next=Tt.arg:Tt.type==="return"?(this.rval=this.arg=Tt.arg,this.method="return",this.next="end"):Tt.type==="normal"&&Gt&&(this.next=Gt),ae},finish:function(Tt){for(var Gt=this.tryEntries.length-1;Gt>=0;--Gt){var gn=this.tryEntries[Gt];if(gn.finallyLoc===Tt)return this.complete(gn.completion,gn.afterLoc),Wt(gn),ae}},catch:function(Tt){for(var Gt=this.tryEntries.length-1;Gt>=0;--Gt){var gn=this.tryEntries[Gt];if(gn.tryLoc===Tt){var Ut=gn.completion;if(Ut.type==="throw"){var Ht=Ut.arg;Wt(gn)}return Ht}}throw new Error("illegal catch attempt")},delegateYield:function(Tt,Gt,gn){return this.delegate={iterator:mt(Tt),resultName:Gt,nextLoc:gn},this.method==="next"&&(this.arg=w),ae}},f}(j.exports);try{regeneratorRuntime=g}catch(f){Function("r","regeneratorRuntime = r")(g)}},function(j,_,u){var g=u(103),f=u(151),E=u(108),T=u(343),w=u(349),D=u(181),O=u(182),L=u(352),U=u(353),V=u(186),z=u(354),K=u(85),J=u(358),he=u(359),ue=u(191),de=u(37),ae=u(84),le=u(363),re=u(48),se=u(365),ye=u(67),Z=u(76),Ee=1,k=2,Te=4,De="[object Arguments]",Ue="[object Array]",St="[object Boolean]",Ae="[object Date]",Wt="[object Error]",At="[object Function]",mt="[object GeneratorFunction]",Dt="[object Map]",Ke="[object Number]",Tt="[object Object]",Gt="[object RegExp]",gn="[object Set]",Ut="[object String]",Ht="[object Symbol]",Rt="[object WeakMap]",Fe="[object ArrayBuffer]",me="[object DataView]",ze="[object Float32Array]",Be="[object Float64Array]",ut="[object Int8Array]",xt="[object Int16Array]",$t="[object Int32Array]",Qt="[object Uint8Array]",on="[object Uint8ClampedArray]",Mn="[object Uint16Array]",Nn="[object Uint32Array]",qn={};qn[De]=qn[Ue]=qn[Fe]=qn[me]=qn[St]=qn[Ae]=qn[ze]=qn[Be]=qn[ut]=qn[xt]=qn[$t]=qn[Dt]=qn[Ke]=qn[Tt]=qn[Gt]=qn[gn]=qn[Ut]=qn[Ht]=qn[Qt]=qn[on]=qn[Mn]=qn[Nn]=!0,qn[Wt]=qn[At]=qn[Rt]=!1;function nr(xn,pn,pr,gr,Ce,Jn){var Ln,yr=pn&Ee,Un=pn&k,$e=pn&Te;if(pr&&(Ln=Ce?pr(xn,gr,Ce,Jn):pr(xn)),Ln!==void 0)return Ln;if(!re(xn))return xn;var Re=de(xn);if(Re){if(Ln=J(xn),!yr)return O(xn,Ln)}else{var Ye=K(xn),tt=Ye==At||Ye==mt;if(ae(xn))return D(xn,yr);if(Ye==Tt||Ye==De||tt&&!Ce){if(Ln=Un||tt?{}:ue(xn),!yr)return Un?U(xn,w(Ln,xn)):L(xn,T(Ln,xn))}else{if(!qn[Ye])return Ce?xn:{};Ln=he(xn,Ye,yr)}}Jn||(Jn=new g);var gt=Jn.get(xn);if(gt)return gt;Jn.set(xn,Ln),se(xn)?xn.forEach(function(pt){Ln.add(nr(pt,pn,pr,pt,xn,Jn))}):le(xn)&&xn.forEach(function(pt,st){Ln.set(st,nr(pt,pn,pr,st,xn,Jn))});var kt=$e?Un?z:V:Un?Z:ye,Pe=Re?void 0:kt(xn);return f(Pe||xn,function(pt,st){Pe&&(st=pt,pt=xn[st]),E(Ln,st,nr(pt,pn,pr,st,xn,Jn))}),Ln}j.exports=nr},function(j,_,u){(function(g){var f=typeof g=="object"&&g&&g.Object===Object&&g;j.exports=f}).call(this,u(93))},function(j,_){var u=Function.prototype,g=u.toString;function f(E){if(E!=null){try{return g.call(E)}catch(T){}try{return E+""}catch(T){}}return""}j.exports=f},function(j,_,u){var g=u(74),f=function(){try{var E=g(Object,"defineProperty");return E({},"",{}),E}catch(T){}}();j.exports=f},function(j,_,u){var g=u(344),f=u(96),E=u(37),T=u(84),w=u(110),D=u(97),O=Object.prototype,L=O.hasOwnProperty;function U(V,z){var K=E(V),J=!K&&f(V),he=!K&&!J&&T(V),ue=!K&&!J&&!he&&D(V),de=K||J||he||ue,ae=de?g(V.length,String):[],le=ae.length;for(var re in V)(z||L.call(V,re))&&!(de&&(re=="length"||he&&(re=="offset"||re=="parent")||ue&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||w(re,le)))&&ae.push(re);return ae}j.exports=U},function(j,_){function u(g,f){return function(E){return g(f(E))}}j.exports=u},function(j,_,u){(function(g){var f=u(51),E=_&&!_.nodeType&&_,T=E&&typeof g=="object"&&g&&!g.nodeType&&g,w=T&&T.exports===E,D=w?f.Buffer:void 0,O=D?D.allocUnsafe:void 0;function L(U,V){if(V)return U.slice();var z=U.length,K=O?O(z):new U.constructor(z);return U.copy(K),K}g.exports=L}).call(this,u(152)(j))},function(j,_){function u(g,f){var E=-1,T=g.length;for(f||(f=Array(T));++E<T;)f[E]=g[E];return f}j.exports=u},function(j,_){function u(g,f){for(var E=-1,T=g==null?0:g.length,w=0,D=[];++E<T;){var O=g[E];f(O,E,g)&&(D[w++]=O)}return D}j.exports=u},function(j,_){function u(){return[]}j.exports=u},function(j,_,u){var g=u(157),f=u(113),E=u(156),T=u(184),w=Object.getOwnPropertySymbols,D=w?function(O){for(var L=[];O;)g(L,E(O)),O=f(O);return L}:T;j.exports=D},function(j,_,u){var g=u(187),f=u(156),E=u(67);function T(w){return g(w,E,f)}j.exports=T},function(j,_,u){var g=u(157),f=u(37);function E(T,w,D){var O=w(T);return f(T)?O:g(O,D(T))}j.exports=E},function(j,_,u){var g=u(74),f=u(51),E=g(f,"Set");j.exports=E},function(j,_,u){var g=u(51),f=g.Uint8Array;j.exports=f},function(j,_,u){var g=u(158);function f(E,T){var w=T?g(E.buffer):E.buffer;return new E.constructor(w,E.byteOffset,E.length)}j.exports=f},function(j,_,u){var g=u(192),f=u(113),E=u(112);function T(w){return typeof w.constructor=="function"&&!E(w)?g(f(w)):{}}j.exports=T},function(j,_,u){var g=u(48),f=Object.create,E=function(){function T(){}return function(w){if(!g(w))return{};if(f)return f(w);T.prototype=w;var D=new T;return T.prototype=void 0,D}}();j.exports=E},function(j,_,u){j.exports=u(194)},function(j,_,u){var g=u(151),f=u(114),E=u(195),T=u(37);function w(D,O){var L=T(D)?g:f;return L(D,E(O))}j.exports=w},function(j,_,u){var g=u(77);function f(E){return typeof E=="function"?E:g}j.exports=f},function(j,_,u){var g=u(183),f=u(369),E=u(63),T=u(37);function w(D,O){var L=T(D)?g:f;return L(D,E(O,3))}j.exports=w},function(j,_,u){var g=u(372),f=u(56);function E(T,w,D,O,L){return T===w?!0:T==null||w==null||!f(T)&&!f(w)?T!==T&&w!==w:g(T,w,D,O,E,L)}j.exports=E},function(j,_,u){var g=u(199),f=u(375),E=u(200),T=1,w=2;function D(O,L,U,V,z,K){var J=U&T,he=O.length,ue=L.length;if(he!=ue&&!(J&&ue>he))return!1;var de=K.get(O),ae=K.get(L);if(de&&ae)return de==L&&ae==O;var le=-1,re=!0,se=U&w?new g:void 0;for(K.set(O,L),K.set(L,O);++le<he;){var ye=O[le],Z=L[le];if(V)var Ee=J?V(Z,ye,le,L,O,K):V(ye,Z,le,O,L,K);if(Ee!==void 0){if(Ee)continue;re=!1;break}if(se){if(!f(L,function(k,Te){if(!E(se,Te)&&(ye===k||z(ye,k,U,V,K)))return se.push(Te)})){re=!1;break}}else if(!(ye===Z||z(ye,Z,U,V,K))){re=!1;break}}return K.delete(O),K.delete(L),re}j.exports=D},function(j,_,u){var g=u(150),f=u(373),E=u(374);function T(w){var D=-1,O=w==null?0:w.length;for(this.__data__=new g;++D<O;)this.add(w[D])}T.prototype.add=T.prototype.push=f,T.prototype.has=E,j.exports=T},function(j,_){function u(g,f){return g.has(f)}j.exports=u},function(j,_,u){var g=u(48);function f(E){return E===E&&!g(E)}j.exports=f},function(j,_){function u(g,f){return function(E){return E==null?!1:E[g]===f&&(f!==void 0||g in Object(E))}}j.exports=u},function(j,_,u){var g=u(385);function f(E){return E==null?"":g(E)}j.exports=f},function(j,_,u){var g=u(386),f=u(205);function E(T,w){return T!=null&&f(T,w,g)}j.exports=E},function(j,_,u){var g=u(116),f=u(96),E=u(37),T=u(110),w=u(153),D=u(98);function O(L,U,V){U=g(U,L);for(var z=-1,K=U.length,J=!1;++z<K;){var he=D(U[z]);if(!(J=L!=null&&V(L,he)))break;L=L[he]}return J||++z!=K?J:(K=L==null?0:L.length,!!K&&w(K)&&T(he,K)&&(E(L)||f(L)))}j.exports=O},function(j,_){function u(g){return function(f){return f==null?void 0:f[g]}}j.exports=u},function(j,_,u){var g=u(389),f=u(205);function E(T,w){return T!=null&&f(T,w,g)}j.exports=E},function(j,_){function u(g){return g===void 0}j.exports=u},function(j,_,u){var g=u(117),f=u(63),E=u(210),T=u(37);function w(D,O){var L=T(D)?g:E;return L(D,f(O,3))}j.exports=w},function(j,_,u){var g=u(114),f=u(62);function E(T,w){var D=-1,O=f(T)?Array(T.length):[];return g(T,function(L,U,V){O[++D]=w(L,U,V)}),O}j.exports=E},function(j,_,u){var g=u(391),f=u(114),E=u(63),T=u(392),w=u(37);function D(O,L,U){var V=w(O)?g:T,z=arguments.length<3;return V(O,E(L,4),U,z,f)}j.exports=D},function(j,_,u){var g=u(402),f=Math.max;function E(T,w,D){return w=f(w===void 0?T.length-1:w,0),function(){for(var O=arguments,L=-1,U=f(O.length-w,0),V=Array(U);++L<U;)V[L]=O[w+L];L=-1;for(var z=Array(w+1);++L<w;)z[L]=O[L];return z[w]=D(V),g(T,this,z)}}j.exports=E},function(j,_,u){var g=u(403),f=u(404),E=f(g);j.exports=E},function(j,_){function u(g,f,E,T){for(var w=g.length,D=E+(T?1:-1);T?D--:++D<w;)if(f(g[D],D,g))return D;return-1}j.exports=u},function(j,_,u){var g=u(62),f=u(56);function E(T){return f(T)&&g(T)}j.exports=E},function(j,_,u){var g=u(413),f=u(67);function E(T){return T==null?[]:g(T,f(T))}j.exports=E},function(j,_,u){var g=u(47),f=u(218);j.exports=T;var E=g.constant(1);function T(D,O,L,U){return w(D,String(O),L||E,U||function(V){return D.outEdges(V)})}function w(D,O,L,U){var V={},z=new f,K,J,he=function(de){var ae=de.v!==K?de.v:de.w,le=V[ae],re=L(de),se=J.distance+re;if(re<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+de+" Weight: "+re);se<le.distance&&(le.distance=se,le.predecessor=K,z.decrease(ae,se))};for(D.nodes().forEach(function(ue){var de=ue===O?0:Number.POSITIVE_INFINITY;V[ue]={distance:de},z.add(ue,de)});z.size()>0&&!(K=z.removeMin(),J=V[K],J.distance===Number.POSITIVE_INFINITY);)U(K).forEach(he);return V}},function(j,_,u){var g=u(47);j.exports=f;function f(){this._arr=[],this._keyIndices={}}f.prototype.size=function(){return this._arr.length},f.prototype.keys=function(){return this._arr.map(function(E){return E.key})},f.prototype.has=function(E){return g.has(this._keyIndices,E)},f.prototype.priority=function(E){var T=this._keyIndices[E];if(T!==void 0)return this._arr[T].priority},f.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},f.prototype.add=function(E,T){var w=this._keyIndices;if(E=String(E),!g.has(w,E)){var D=this._arr,O=D.length;return w[E]=O,D.push({key:E,priority:T}),this._decrease(O),!0}return!1},f.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var E=this._arr.pop();return delete this._keyIndices[E.key],this._heapify(0),E.key},f.prototype.decrease=function(E,T){var w=this._keyIndices[E];if(T>this._arr[w].priority)throw new Error("New priority is greater than current priority. Key: "+E+" Old: "+this._arr[w].priority+" New: "+T);this._arr[w].priority=T,this._decrease(w)},f.prototype._heapify=function(E){var T=this._arr,w=2*E,D=w+1,O=E;w<T.length&&(O=T[w].priority<T[O].priority?w:O,D<T.length&&(O=T[D].priority<T[O].priority?D:O),O!==E&&(this._swap(E,O),this._heapify(O)))},f.prototype._decrease=function(E){for(var T=this._arr,w=T[E].priority,D;E!==0&&!(D=E>>1,T[D].priority<w);)this._swap(E,D),E=D},f.prototype._swap=function(E,T){var w=this._arr,D=this._keyIndices,O=w[E],L=w[T];w[E]=L,w[T]=O,D[L.key]=E,D[O.key]=T}},function(j,_,u){var g=u(47);j.exports=f;function f(E){var T=0,w=[],D={},O=[];function L(U){var V=D[U]={onStack:!0,lowlink:T,index:T++};if(w.push(U),E.successors(U).forEach(function(J){g.has(D,J)?D[J].onStack&&(V.lowlink=Math.min(V.lowlink,D[J].index)):(L(J),V.lowlink=Math.min(V.lowlink,D[J].lowlink))}),V.lowlink===V.index){var z=[],K;do K=w.pop(),D[K].onStack=!1,z.push(K);while(U!==K);O.push(z)}}return E.nodes().forEach(function(U){g.has(D,U)||L(U)}),O}},function(j,_,u){var g=u(47);j.exports=f,f.CycleException=E;function f(T){var w={},D={},O=[];function L(U){if(g.has(D,U))throw new E;g.has(w,U)||(D[U]=!0,w[U]=!0,g.each(T.predecessors(U),L),delete D[U],O.push(U))}if(g.each(T.sinks(),L),g.size(w)!==T.nodeCount())throw new E;return O}function E(){}E.prototype=new Error},function(j,_,u){var g=u(47);j.exports=f;function f(T,w,D){g.isArray(w)||(w=[w]);var O=(T.isDirected()?T.successors:T.neighbors).bind(T),L=[],U={};return g.each(w,function(V){if(!T.hasNode(V))throw new Error("Graph does not have node: "+V);E(T,V,D==="post",U,O,L)}),L}function E(T,w,D,O,L,U){g.has(O,w)||(O[w]=!0,D||U.push(w),g.each(L(w),function(V){E(T,V,D,O,L,U)}),D&&U.push(w))}},function(j,_,u){var g=u(432),f=1/0,E=17976931348623157e292;function T(w){if(!w)return w===0?w:0;if(w=g(w),w===f||w===-f){var D=w<0?-1:1;return D*E}return w===w?w:0}j.exports=T},function(j,_,u){var g=u(164);function f(E){var T=E==null?0:E.length;return T?g(E,1):[]}j.exports=f},function(j,_,u){var g=u(109),f=u(82);function E(T,w,D){(D!==void 0&&!f(T[w],D)||D===void 0&&!(w in T))&&g(T,w,D)}j.exports=E},function(j,_){function u(g,f){return f==="constructor"&&typeof g[f]=="function"||f=="__proto__"?void 0:g[f]}j.exports=u},function(j,_){function u(g,f){return g<f}j.exports=u},function(j,_,u){"use strict";var g=u(34),f=u(50).Graph,E=u(120).slack;j.exports=T;function T(L){var U=new f({directed:!1}),V=L.nodes()[0],z=L.nodeCount();U.setNode(V,{});for(var K,J;w(U,L)<z;)K=D(U,L),J=U.hasNode(K.v)?E(L,K):-E(L,K),O(U,L,J);return U}function w(L,U){function V(z){g.forEach(U.nodeEdges(z),function(K){var J=K.v,he=z===J?K.w:J;!L.hasNode(he)&&!E(U,K)&&(L.setNode(he,{}),L.setEdge(z,he,{}),V(he))})}return g.forEach(L.nodes(),V),L.nodeCount()}function D(L,U){return g.minBy(U.edges(),function(V){if(L.hasNode(V.v)!==L.hasNode(V.w))return E(U,V)})}function O(L,U,V){g.forEach(L.nodes(),function(z){U.node(z).rank+=V})}},function(j,_,u){(function(g,f){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var E;(function(T){(function(w){var D=typeof f=="object"?f:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),O=L(T);typeof D.Reflect=="undefined"?D.Reflect=T:O=L(D.Reflect,O),w(O);function L(U,V){return function(z,K){typeof U[z]!="function"&&Object.defineProperty(U,z,{configurable:!0,writable:!0,value:K}),V&&V(z,K)}}})(function(w){var D=Object.prototype.hasOwnProperty,O=typeof Symbol=="function",L=O&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",U=O&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",V=typeof Object.create=="function",z={__proto__:[]}instanceof Array,K=!V&&!z,J={create:V?function(){return $e(Object.create(null))}:z?function(){return $e({__proto__:null})}:function(){return $e({})},has:K?function(Re,Ye){return D.call(Re,Ye)}:function(Re,Ye){return Ye in Re},get:K?function(Re,Ye){return D.call(Re,Ye)?Re[Ye]:void 0}:function(Re,Ye){return Re[Ye]}},he=Object.getPrototypeOf(Function),ue=typeof g=="object"&&Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})&&Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",de=!ue&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ln(),ae=!ue&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:yr(),le=!ue&&typeof WeakMap=="function"?WeakMap:Un(),re=new le;function se(Re,Ye,tt,gt){if(Fe(tt)){if(!Mn(Re))throw new TypeError;if(!qn(Ye))throw new TypeError;return Wt(Re,Ye)}else{if(!Mn(Re))throw new TypeError;if(!Be(Ye))throw new TypeError;if(!Be(gt)&&!Fe(gt)&&!me(gt))throw new TypeError;return me(gt)&&(gt=void 0),tt=on(tt),At(Re,Ye,tt,gt)}}w("decorate",se);function ye(Re,Ye){function tt(gt,kt){if(!Be(gt))throw new TypeError;if(!Fe(kt)&&!nr(kt))throw new TypeError;gn(Re,Ye,gt,kt)}return tt}w("metadata",ye);function Z(Re,Ye,tt,gt){if(!Be(tt))throw new TypeError;return Fe(gt)||(gt=on(gt)),gn(Re,Ye,tt,gt)}w("defineMetadata",Z);function Ee(Re,Ye,tt){if(!Be(Ye))throw new TypeError;return Fe(tt)||(tt=on(tt)),Dt(Re,Ye,tt)}w("hasMetadata",Ee);function k(Re,Ye,tt){if(!Be(Ye))throw new TypeError;return Fe(tt)||(tt=on(tt)),Ke(Re,Ye,tt)}w("hasOwnMetadata",k);function Te(Re,Ye,tt){if(!Be(Ye))throw new TypeError;return Fe(tt)||(tt=on(tt)),Tt(Re,Ye,tt)}w("getMetadata",Te);function De(Re,Ye,tt){if(!Be(Ye))throw new TypeError;return Fe(tt)||(tt=on(tt)),Gt(Re,Ye,tt)}w("getOwnMetadata",De);function Ue(Re,Ye){if(!Be(Re))throw new TypeError;return Fe(Ye)||(Ye=on(Ye)),Ut(Re,Ye)}w("getMetadataKeys",Ue);function St(Re,Ye){if(!Be(Re))throw new TypeError;return Fe(Ye)||(Ye=on(Ye)),Ht(Re,Ye)}w("getOwnMetadataKeys",St);function Ae(Re,Ye,tt){if(!Be(Ye))throw new TypeError;Fe(tt)||(tt=on(tt));var gt=mt(Ye,tt,!1);if(Fe(gt))return!1;if(!gt.delete(Re))return!1;if(gt.size>0)return!0;var kt=re.get(Ye);return kt.delete(tt),kt.size>0||re.delete(Ye),!0}w("deleteMetadata",Ae);function Wt(Re,Ye){for(var tt=Re.length-1;tt>=0;--tt){var gt=Re[tt],kt=gt(Ye);if(!Fe(kt)&&!me(kt)){if(!qn(kt))throw new TypeError;Ye=kt}}return Ye}function At(Re,Ye,tt,gt){for(var kt=Re.length-1;kt>=0;--kt){var Pe=Re[kt],pt=Pe(Ye,tt,gt);if(!Fe(pt)&&!me(pt)){if(!Be(pt))throw new TypeError;gt=pt}}return gt}function mt(Re,Ye,tt){var gt=re.get(Re);if(Fe(gt)){if(!tt)return;gt=new de,re.set(Re,gt)}var kt=gt.get(Ye);if(Fe(kt)){if(!tt)return;kt=new de,gt.set(Ye,kt)}return kt}function Dt(Re,Ye,tt){var gt=Ke(Re,Ye,tt);if(gt)return!0;var kt=Jn(Ye);return me(kt)?!1:Dt(Re,kt,tt)}function Ke(Re,Ye,tt){var gt=mt(Ye,tt,!1);return Fe(gt)?!1:$t(gt.has(Re))}function Tt(Re,Ye,tt){var gt=Ke(Re,Ye,tt);if(gt)return Gt(Re,Ye,tt);var kt=Jn(Ye);return me(kt)?void 0:Tt(Re,kt,tt)}function Gt(Re,Ye,tt){var gt=mt(Ye,tt,!1);return Fe(gt)?void 0:gt.get(Re)}function gn(Re,Ye,tt,gt){var kt=mt(tt,gt,!0);kt.set(Re,Ye)}function Ut(Re,Ye){var tt=Ht(Re,Ye),gt=Jn(Re);if(gt===null)return tt;var kt=Ut(gt,Ye);if(kt.length<=0)return tt;if(tt.length<=0)return kt;for(var Pe=new ae,pt=[],st=0,Ft=tt;st<Ft.length;st++){var An=Ft[st],Gn=Pe.has(An);Gn||(Pe.add(An),pt.push(An))}for(var Yn=0,vr=kt;Yn<vr.length;Yn++){var An=vr[Yn],Gn=Pe.has(An);Gn||(Pe.add(An),pt.push(An))}return pt}function Ht(Re,Ye){var tt=[],gt=mt(Re,Ye,!1);if(Fe(gt))return tt;for(var kt=gt.keys(),Pe=pn(kt),pt=0;;){var st=gr(Pe);if(!st)return tt.length=pt,tt;var Ft=pr(st);try{tt[pt]=Ft}catch(An){try{Ce(Pe)}finally{throw An}}pt++}}function Rt(Re){if(Re===null)return 1;switch(typeof Re){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Re===null?1:6;default:return 6}}function Fe(Re){return Re===void 0}function me(Re){return Re===null}function ze(Re){return typeof Re=="symbol"}function Be(Re){return typeof Re=="object"?Re!==null:typeof Re=="function"}function ut(Re,Ye){switch(Rt(Re)){case 0:return Re;case 1:return Re;case 2:return Re;case 3:return Re;case 4:return Re;case 5:return Re}var tt=Ye===3?"string":Ye===5?"number":"default",gt=xn(Re,L);if(gt!==void 0){var kt=gt.call(Re,tt);if(Be(kt))throw new TypeError;return kt}return xt(Re,tt==="default"?"number":tt)}function xt(Re,Ye){if(Ye==="string"){var tt=Re.toString;if(Nn(tt)){var gt=tt.call(Re);if(!Be(gt))return gt}var kt=Re.valueOf;if(Nn(kt)){var gt=kt.call(Re);if(!Be(gt))return gt}}else{var kt=Re.valueOf;if(Nn(kt)){var gt=kt.call(Re);if(!Be(gt))return gt}var Pe=Re.toString;if(Nn(Pe)){var gt=Pe.call(Re);if(!Be(gt))return gt}}throw new TypeError}function $t(Re){return!!Re}function Qt(Re){return""+Re}function on(Re){var Ye=ut(Re,3);return ze(Ye)?Ye:Qt(Ye)}function Mn(Re){return Array.isArray?Array.isArray(Re):Re instanceof Object?Re instanceof Array:Object.prototype.toString.call(Re)==="[object Array]"}function Nn(Re){return typeof Re=="function"}function qn(Re){return typeof Re=="function"}function nr(Re){switch(Rt(Re)){case 3:return!0;case 4:return!0;default:return!1}}function xn(Re,Ye){var tt=Re[Ye];if(tt==null)return;if(!Nn(tt))throw new TypeError;return tt}function pn(Re){var Ye=xn(Re,U);if(!Nn(Ye))throw new TypeError;var tt=Ye.call(Re);if(!Be(tt))throw new TypeError;return tt}function pr(Re){return Re.value}function gr(Re){var Ye=Re.next();return Ye.done?!1:Ye}function Ce(Re){var Ye=Re.return;Ye&&Ye.call(Re)}function Jn(Re){var Ye=Object.getPrototypeOf(Re);if(typeof Re!="function"||Re===he)return Ye;if(Ye!==he)return Ye;var tt=Re.prototype,gt=tt&&Object.getPrototypeOf(tt);if(gt==null||gt===Object.prototype)return Ye;var kt=gt.constructor;return typeof kt!="function"||kt===Re?Ye:kt}function Ln(){var Re={},Ye=[],tt=function(){function pt(st,Ft,An){this._index=0,this._keys=st,this._values=Ft,this._selector=An}return pt.prototype["@@iterator"]=function(){return this},pt.prototype[U]=function(){return this},pt.prototype.next=function(){var st=this._index;if(st>=0&&st<this._keys.length){var Ft=this._selector(this._keys[st],this._values[st]);return st+1>=this._keys.length?(this._index=-1,this._keys=Ye,this._values=Ye):this._index++,{value:Ft,done:!1}}return{value:void 0,done:!0}},pt.prototype.throw=function(st){throw this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),st},pt.prototype.return=function(st){return this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),{value:st,done:!0}},pt}();return function(){function pt(){this._keys=[],this._values=[],this._cacheKey=Re,this._cacheIndex=-2}return Object.defineProperty(pt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),pt.prototype.has=function(st){return this._find(st,!1)>=0},pt.prototype.get=function(st){var Ft=this._find(st,!1);return Ft>=0?this._values[Ft]:void 0},pt.prototype.set=function(st,Ft){var An=this._find(st,!0);return this._values[An]=Ft,this},pt.prototype.delete=function(st){var Ft=this._find(st,!1);if(Ft>=0){for(var An=this._keys.length,Gn=Ft+1;Gn<An;Gn++)this._keys[Gn-1]=this._keys[Gn],this._values[Gn-1]=this._values[Gn];return this._keys.length--,this._values.length--,st===this._cacheKey&&(this._cacheKey=Re,this._cacheIndex=-2),!0}return!1},pt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Re,this._cacheIndex=-2},pt.prototype.keys=function(){return new tt(this._keys,this._values,gt)},pt.prototype.values=function(){return new tt(this._keys,this._values,kt)},pt.prototype.entries=function(){return new tt(this._keys,this._values,Pe)},pt.prototype["@@iterator"]=function(){return this.entries()},pt.prototype[U]=function(){return this.entries()},pt.prototype._find=function(st,Ft){return this._cacheKey!==st&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=st)),this._cacheIndex<0&&Ft&&(this._cacheIndex=this._keys.length,this._keys.push(st),this._values.push(void 0)),this._cacheIndex},pt}();function gt(pt,st){return pt}function kt(pt,st){return st}function Pe(pt,st){return[pt,st]}}function yr(){return function(){function Re(){this._map=new de}return Object.defineProperty(Re.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Re.prototype.has=function(Ye){return this._map.has(Ye)},Re.prototype.add=function(Ye){return this._map.set(Ye,Ye),this},Re.prototype.delete=function(Ye){return this._map.delete(Ye)},Re.prototype.clear=function(){this._map.clear()},Re.prototype.keys=function(){return this._map.keys()},Re.prototype.values=function(){return this._map.values()},Re.prototype.entries=function(){return this._map.entries()},Re.prototype["@@iterator"]=function(){return this.keys()},Re.prototype[U]=function(){return this.keys()},Re}()}function Un(){var Re=16,Ye=J.create(),tt=gt();return function(){function Ft(){this._key=gt()}return Ft.prototype.has=function(An){var Gn=kt(An,!1);return Gn!==void 0?J.has(Gn,this._key):!1},Ft.prototype.get=function(An){var Gn=kt(An,!1);return Gn!==void 0?J.get(Gn,this._key):void 0},Ft.prototype.set=function(An,Gn){var Yn=kt(An,!0);return Yn[this._key]=Gn,this},Ft.prototype.delete=function(An){var Gn=kt(An,!1);return Gn!==void 0?delete Gn[this._key]:!1},Ft.prototype.clear=function(){this._key=gt()},Ft}();function gt(){var Ft;do Ft="@@WeakMap@@"+st();while(J.has(Ye,Ft));return Ye[Ft]=!0,Ft}function kt(Ft,An){if(!D.call(Ft,tt)){if(!An)return;Object.defineProperty(Ft,tt,{value:J.create()})}return Ft[tt]}function Pe(Ft,An){for(var Gn=0;Gn<An;++Gn)Ft[Gn]=Math.random()*255|0;return Ft}function pt(Ft){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ft)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ft)):Pe(new Uint8Array(Ft),Ft):Pe(new Array(Ft),Ft)}function st(){var Ft=pt(Re);Ft[6]=Ft[6]&79|64,Ft[8]=Ft[8]&191|128;for(var An="",Gn=0;Gn<Re;++Gn){var Yn=Ft[Gn];(Gn===4||Gn===6||Gn===8)&&(An+="-"),Yn<16&&(An+="0"),An+=Yn.toString(16).toLowerCase()}return An}}function $e(Re){return Re.__=void 0,delete Re.__,Re}})})(E||(E={}))}).call(this,u(488),u(93))},function(j,_,u){var g=u(230);function f(E,T){if(!E)return;if(typeof E=="string")return g(E,T);var w=Object.prototype.toString.call(E).slice(8,-1);if(w==="Object"&&E.constructor&&(w=E.constructor.name),w==="Map"||w==="Set")return Array.from(E);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return g(E,T)}j.exports=f,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(g,f){(f==null||f>g.length)&&(f=g.length);for(var E=0,T=new Array(f);E<f;E++)T[E]=g[E];return T}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.MetadataReader=void 0;var g=u(38),f=function(){function E(){}return E.prototype.getConstructorMetadata=function(T){var w=Reflect.getMetadata(g.PARAM_TYPES,T),D=Reflect.getMetadata(g.TAGGED,T);return{compilerGeneratedMetadata:w,userGeneratedMetadata:D||{}}},E.prototype.getPropertiesMetadata=function(T){var w=Reflect.getMetadata(g.TAGGED_PROP,T)||[];return w},E}();_.MetadataReader=f},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.isStackOverflowExeption=void 0;var g=u(45);function f(E){return E instanceof RangeError||E.message===g.STACK_OVERFLOW}_.isStackOverflowExeption=f},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.inject=_.LazyServiceIdentifer=void 0;var g=u(45),f=u(38),E=u(52),T=u(68),w=function(){function O(L){this._cb=L}return O.prototype.unwrap=function(){return this._cb()},O}();_.LazyServiceIdentifer=w;function D(O){return function(L,U,V){if(O===void 0)throw new Error(g.UNDEFINED_INJECT_ANNOTATION(L.name));var z=new E.Metadata(f.INJECT_TAG,O);typeof V=="number"?T.tagParameter(L,U,V,z):T.tagProperty(L,U,z)}}_.inject=D},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Target=void 0;var g=u(38),f=u(78),E=u(52),T=u(499),w=function(){function D(O,L,U,V){this.id=f.id(),this.type=O,this.serviceIdentifier=U,this.name=new T.QueryableString(L||""),this.metadata=new Array;var z=null;typeof V=="string"?z=new E.Metadata(g.NAMED_TAG,V):V instanceof E.Metadata&&(z=V),z!==null&&this.metadata.push(z)}return D.prototype.hasTag=function(O){for(var L=0,U=this.metadata;L<U.length;L++){var V=U[L];if(V.key===O)return!0}return!1},D.prototype.isArray=function(){return this.hasTag(g.MULTI_INJECT_TAG)},D.prototype.matchesArray=function(O){return this.matchesTag(g.MULTI_INJECT_TAG)(O)},D.prototype.isNamed=function(){return this.hasTag(g.NAMED_TAG)},D.prototype.isTagged=function(){return this.metadata.some(function(O){return g.NON_CUSTOM_TAG_KEYS.every(function(L){return O.key!==L})})},D.prototype.isOptional=function(){return this.matchesTag(g.OPTIONAL_TAG)(!0)},D.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(O){return O.key===g.NAMED_TAG})[0]:null},D.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(O){return g.NON_CUSTOM_TAG_KEYS.every(function(L){return O.key!==L})}):null},D.prototype.matchesNamedTag=function(O){return this.matchesTag(g.NAMED_TAG)(O)},D.prototype.matchesTag=function(O){var L=this;return function(U){for(var V=0,z=L.metadata;V<z.length;V++){var K=z[V];if(K.key===O&&K.value===U)return!0}return!1}},D}();_.Target=w},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BindingWhenOnSyntax=void 0;var g=u(166),f=u(167),E=function(){function T(w){this._binding=w,this._bindingWhenSyntax=new f.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new g.BindingOnSyntax(this._binding)}return T.prototype.when=function(w){return this._bindingWhenSyntax.when(w)},T.prototype.whenTargetNamed=function(w){return this._bindingWhenSyntax.whenTargetNamed(w)},T.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},T.prototype.whenTargetTagged=function(w,D){return this._bindingWhenSyntax.whenTargetTagged(w,D)},T.prototype.whenInjectedInto=function(w){return this._bindingWhenSyntax.whenInjectedInto(w)},T.prototype.whenParentNamed=function(w){return this._bindingWhenSyntax.whenParentNamed(w)},T.prototype.whenParentTagged=function(w,D){return this._bindingWhenSyntax.whenParentTagged(w,D)},T.prototype.whenAnyAncestorIs=function(w){return this._bindingWhenSyntax.whenAnyAncestorIs(w)},T.prototype.whenNoAncestorIs=function(w){return this._bindingWhenSyntax.whenNoAncestorIs(w)},T.prototype.whenAnyAncestorNamed=function(w){return this._bindingWhenSyntax.whenAnyAncestorNamed(w)},T.prototype.whenAnyAncestorTagged=function(w,D){return this._bindingWhenSyntax.whenAnyAncestorTagged(w,D)},T.prototype.whenNoAncestorNamed=function(w){return this._bindingWhenSyntax.whenNoAncestorNamed(w)},T.prototype.whenNoAncestorTagged=function(w,D){return this._bindingWhenSyntax.whenNoAncestorTagged(w,D)},T.prototype.whenAnyAncestorMatches=function(w){return this._bindingWhenSyntax.whenAnyAncestorMatches(w)},T.prototype.whenNoAncestorMatches=function(w){return this._bindingWhenSyntax.whenNoAncestorMatches(w)},T.prototype.onActivation=function(w){return this._bindingOnSyntax.onActivation(w)},T}();_.BindingWhenOnSyntax=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.typeConstraint=_.namedConstraint=_.taggedConstraint=_.traverseAncerstors=void 0;var g=u(38),f=u(52),E=function O(L,U){var V=L.parentRequest;return V!==null?U(V)?!0:O(V,U):!1};_.traverseAncerstors=E;var T=function(L){return function(U){var V=function(K){return K!==null&&K.target!==null&&K.target.matchesTag(L)(U)};return V.metaData=new f.Metadata(L,U),V}};_.taggedConstraint=T;var w=T(g.NAMED_TAG);_.namedConstraint=w;var D=function(L){return function(U){var V=null;if(U!==null)if(V=U.bindings[0],typeof L=="string"){var z=V.serviceIdentifier;return z===L}else{var K=U.bindings[0].implementationType;return L===K}return!1}};_.typeConstraint=D},function(j,_,u){"use strict";u.d(_,"a",function(){return E});var g=u(0),f=u(87);function E(T){for(var w=new f.a,D=g.d.fromValues(T[0],T[1],T[2]),O=g.d.fromValues(T[0],T[1],T[2]),L=3;L<T.length;){var U=T[L++],V=T[L++],z=T[L++];U<D[0]&&(D[0]=U),V<D[1]&&(D[1]=V),z<D[2]&&(D[2]=z),U>O[0]&&(O[0]=U),V>O[1]&&(O[1]=V),z>O[2]&&(O[2]=z)}return w.setMinMax(D,O),w}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});var g=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent)},function(j,_){},function(j,_){},function(j,_){},function(j,_){},function(j,_){},function(j,_){},function(j,_,u){"use strict";var g;(function(f){f.Normal="normal",f.PostProcessing="post-processing"})(g||(g={}))},function(j,_){},function(j,_){},function(j,_){},function(j,_){},function(j,_){},function(j,_){},function(j,_){j.exports=1e-6},function(j,_){j.exports=u;function u(){var g=new Float32Array(2);return g[0]=0,g[1]=0,g}},function(j,_){j.exports=u;function u(g,f,E){return g[0]=f,g[1]=E,g}},function(j,_){j.exports=u;function u(g,f,E){return g[0]=f[0]+E[0],g[1]=f[1]+E[1],g}},function(j,_){j.exports=u;function u(g,f,E){return g[0]=f[0]*E[0],g[1]=f[1]*E[1],g}},function(j,_){j.exports=u;function u(g,f,E){return g[0]=f[0]/E[0],g[1]=f[1]/E[1],g}},function(j,_){j.exports=u;function u(g,f){var E=f[0]-g[0],T=f[1]-g[1];return Math.sqrt(E*E+T*T)}},function(j,_){j.exports=u;function u(g,f){var E=f[0]-g[0],T=f[1]-g[1];return E*E+T*T}},function(j,_){j.exports=u;function u(g){var f=g[0],E=g[1];return Math.sqrt(f*f+E*E)}},function(j,_){j.exports=u;function u(g){var f=g[0],E=g[1];return f*f+E*E}},function(j,_){j.exports=u;function u(g,f){var E=f[0],T=f[1],w=E*E+T*T;return w>0&&(w=1/Math.sqrt(w),g[0]=f[0]*w,g[1]=f[1]*w),g}},function(j,_){j.exports=u;function u(g,f){return g[0]*f[0]+g[1]*f[1]}},function(j,_,u){"use strict";var g=u(135),f=u(136),E=u(138)},function(j,_,u){"use strict";u.d(_,"a",function(){return g.a}),u.d(_,"b",function(){return U.a});var g=u(87),f=u(9),E=u.n(f),T=u(10),w=u.n(T),D=u(0),O=D.d.create(),L=function(){function ae(le,re){E()(this,ae),this.center=void 0,this.radius=void 0,this.center=le||D.d.create(),this.radius=re||.5}return w()(ae,[{key:"containsPoint",value:function(re){return D.d.sub(O,re,this.center),D.d.length(O)<this.radius*this.radius}},{key:"intersects",value:function(re){D.d.sub(O,re.center,this.center);var se=re.radius+this.radius;return D.d.length(O)<=se*se}}]),ae}(),U=u(66),V=u(130),z=D.d.create(),K=D.d.create(),J=D.d.create(),he=D.d.create(),ue=D.d.create(),de=function(){function ae(le,re){E()(this,ae),this.origin=void 0,this.direction=void 0,this.origin=le||D.d.create(),this.direction=re||D.d.fromValues(0,0,-1)}return w()(ae,[{key:"intersectsAABB",value:function(re,se){return se?this.intersectAABBWithIntersection(re,se):this.intersectsAABBWithoutIntersection(re)}},{key:"intersectsSphere",value:function(re,se){var ye=D.d.sub(z,this.origin,re.center);D.d.normalize(K,D.d.copy(K,this.direction));var Z=D.d.dot(ye,K),Ee=D.d.dot(ye,ye)-re.radius*re.radius;if(Ee>0&&Z>0)return null;var k=Z*Z-Ee;if(k<0)return!1;var Te=Math.abs(-Z-Math.sqrt(k));return se&&(D.d.copy(se,this.direction),D.d.scaleAndAdd(se,this.origin,se,Te)),!0}},{key:"intersectsPlane",value:function(re,se){var ye=(re.distance-D.d.dot(re.normal,this.origin))/D.d.dot(re.normal,this.direction),Z=ye>=0;return Z&&se&&D.d.scaleAndAdd(se,this.origin,this.direction,ye),Z}},{key:"intersectsAABBWithoutIntersection",value:function(re){var se=z,ye=K,Z=J,Ee=he,k=ue,Te=this.direction;return D.d.sub(se,this.origin,re.center),D.d.set(Ee,Math.abs(se[0]),Math.abs(se[1]),Math.abs(se[2])),D.d.mul(Z,se,Te),Ee[0]>re.halfExtents[0]&&Z[0]>=0||Ee[1]>re.halfExtents[1]&&Z[1]>=0||Ee[2]>re.halfExtents[2]&&Z[2]>=0?!1:(D.d.set(k,Math.abs(Te[0]),Math.abs(Te[1]),Math.abs(Te[2])),D.d.cross(ye,Te,se),D.d.set(ye,Math.abs(ye[0]),Math.abs(ye[1]),Math.abs(ye[2])),!(ye[0]>re.halfExtents[1]*k[2]+re.halfExtents[2]*k[1]||ye[1]>re.halfExtents[0]*k[2]+re.halfExtents[2]*k[0]||ye[2]>re.halfExtents[0]*k[1]+re.halfExtents[1]*k[0]))}},{key:"intersectAABBWithIntersection",value:function(re,se){var ye=D.d.copy(D.d.create(),re.getMin());D.d.sub(ye,ye,this.origin);var Z=D.d.copy(D.d.create(),re.getMax());D.d.sub(Z,Z,this.origin);var Ee=this.direction;Ee[0]===0?(ye[0]=ye[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE,Z[0]=Z[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ye[0]/=Ee[0],Z[0]/=Ee[0]),Ee[1]===0?(ye[1]=ye[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE,Z[1]=Z[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ye[1]/=Ee[1],Z[1]/=Ee[1]),Ee[2]===0?(ye[2]=ye[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE,Z[2]=Z[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ye[2]/=Ee[2],Z[2]/=Ee[2]);var k=D.d.set(J,Math.min(ye[0],Z[0]),Math.min(ye[1],Z[1]),Math.min(ye[2],Z[2])),Te=D.d.set(he,Math.max(ye[0],Z[0]),Math.max(ye[1],Z[1]),Math.max(ye[2],Z[2])),De=Math.min(Math.min(Te[0],Te[1]),Te[2]),Ue=Math.max(Math.max(k[0],k[1]),k[2]),St=De>=Ue&&Ue>=0;return St&&(D.d.copy(se,this.direction),D.d.scaleAndAdd(se,this.origin,se,Ue)),St}}]),ae}()},function(j,_,u){"use strict";_.__esModule=!0,_.getParameters=void 0;var g=u(302);_.getParameters=g.getParameters},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(f){if(Array.isArray(f))return f}},function(j,_,u){"use strict";u.d(_,"a",function(){return f});var g=u(169);function f(E,T){if(!E)return;if(typeof E=="string")return Object(g.a)(E,T);var w=Object.prototype.toString.call(E).slice(8,-1);if(w==="Object"&&E.constructor&&(w=E.constructor.name),w==="Map"||w==="Set")return Array.from(E);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return Object(g.a)(E,T)}},function(j,_,u){"use strict";u.d(_,"a",function(){return g});function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(j,_,u){"use strict";u.d(_,"a",function(){return T});var g=u(41),f=u.n(g),E=u(140);function T(w,D){return D&&(f()(D)==="object"||typeof D=="function")?D:Object(E.a)(w)}},function(j,_,u){"use strict";j.exports=u(306)},function(j,_,u){"use strict";var g=u(1),f=u.n(g),E=u(53),T=u.n(E),w=u(65),D=Object(g.forwardRef)(function(O,L){var U=O.didUpdate,V=O.getContainer,z=O.children,K=Object(g.useRef)();Object(g.useImperativeHandle)(L,function(){return{}});var J=Object(g.useRef)(!1);return!J.current&&Object(w.a)()&&(K.current=V(),J.current=!0),Object(g.useEffect)(function(){U==null||U(O)}),Object(g.useEffect)(function(){return function(){var he,ue;(he=K.current)===null||he===void 0||((ue=he.parentNode)===null||ue===void 0)||ue.removeChild(K.current)}},[]),K.current?T.a.createPortal(z,K.current):null});_.a=D},function(j,_,u){"use strict";_.a=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var g=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(g)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(g==null?void 0:g.substr(0,4)))}},function(j,_,u){"use strict";_.a=function(g){if(!g)return!1;if(g.offsetParent)return!0;if(g.getBBox){var f=g.getBBox();if(f.width||f.height)return!0}if(g.getBoundingClientRect){var E=g.getBoundingClientRect();if(E.width||E.height)return!0}return!1}},function(j,_,u){"use strict";(function(g){var f=function(){if(typeof Map!="undefined")return Map;function At(mt,Dt){var Ke=-1;return mt.some(function(Tt,Gt){return Tt[0]===Dt?(Ke=Gt,!0):!1}),Ke}return function(){function mt(){this.__entries__=[]}return Object.defineProperty(mt.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),mt.prototype.get=function(Dt){var Ke=At(this.__entries__,Dt),Tt=this.__entries__[Ke];return Tt&&Tt[1]},mt.prototype.set=function(Dt,Ke){var Tt=At(this.__entries__,Dt);~Tt?this.__entries__[Tt][1]=Ke:this.__entries__.push([Dt,Ke])},mt.prototype.delete=function(Dt){var Ke=this.__entries__,Tt=At(Ke,Dt);~Tt&&Ke.splice(Tt,1)},mt.prototype.has=function(Dt){return!!~At(this.__entries__,Dt)},mt.prototype.clear=function(){this.__entries__.splice(0)},mt.prototype.forEach=function(Dt,Ke){Ke===void 0&&(Ke=null);for(var Tt=0,Gt=this.__entries__;Tt<Gt.length;Tt++){var gn=Gt[Tt];Dt.call(Ke,gn[1],gn[0])}},mt}()}(),E=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,T=function(){return typeof g!="undefined"&&g.Math===Math?g:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),w=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(T):function(At){return setTimeout(function(){return At(Date.now())},1e3/60)}}(),D=2;function O(At,mt){var Dt=!1,Ke=!1,Tt=0;function Gt(){Dt&&(Dt=!1,At()),Ke&&Ut()}function gn(){w(Gt)}function Ut(){var Ht=Date.now();if(Dt){if(Ht-Tt<D)return;Ke=!0}else Dt=!0,Ke=!1,setTimeout(gn,mt);Tt=Ht}return Ut}var L=20,U=["top","right","bottom","left","width","height","size","weight"],V=typeof MutationObserver!="undefined",z=function(){function At(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=O(this.refresh.bind(this),L)}return At.prototype.addObserver=function(mt){~this.observers_.indexOf(mt)||this.observers_.push(mt),this.connected_||this.connect_()},At.prototype.removeObserver=function(mt){var Dt=this.observers_,Ke=Dt.indexOf(mt);~Ke&&Dt.splice(Ke,1),!Dt.length&&this.connected_&&this.disconnect_()},At.prototype.refresh=function(){var mt=this.updateObservers_();mt&&this.refresh()},At.prototype.updateObservers_=function(){var mt=this.observers_.filter(function(Dt){return Dt.gatherActive(),Dt.hasActive()});return mt.forEach(function(Dt){return Dt.broadcastActive()}),mt.length>0},At.prototype.connect_=function(){if(!E||this.connected_)return;document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),V?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0},At.prototype.disconnect_=function(){if(!E||!this.connected_)return;document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1},At.prototype.onTransitionEnd_=function(mt){var Dt=mt.propertyName,Ke=Dt===void 0?"":Dt,Tt=U.some(function(Gt){return!!~Ke.indexOf(Gt)});Tt&&this.refresh()},At.getInstance=function(){return this.instance_||(this.instance_=new At),this.instance_},At.instance_=null,At}(),K=function(mt,Dt){for(var Ke=0,Tt=Object.keys(Dt);Ke<Tt.length;Ke++){var Gt=Tt[Ke];Object.defineProperty(mt,Gt,{value:Dt[Gt],enumerable:!1,writable:!1,configurable:!0})}return mt},J=function(mt){var Dt=mt&&mt.ownerDocument&&mt.ownerDocument.defaultView;return Dt||T},he=k(0,0,0,0);function ue(At){return parseFloat(At)||0}function de(At){for(var mt=[],Dt=1;Dt<arguments.length;Dt++)mt[Dt-1]=arguments[Dt];return mt.reduce(function(Ke,Tt){var Gt=At["border-"+Tt+"-width"];return Ke+ue(Gt)},0)}function ae(At){for(var mt=["top","right","bottom","left"],Dt={},Ke=0,Tt=mt;Ke<Tt.length;Ke++){var Gt=Tt[Ke],gn=At["padding-"+Gt];Dt[Gt]=ue(gn)}return Dt}function le(At){var mt=At.getBBox();return k(0,0,mt.width,mt.height)}function re(At){var mt=At.clientWidth,Dt=At.clientHeight;if(!mt&&!Dt)return he;var Ke=J(At).getComputedStyle(At),Tt=ae(Ke),Gt=Tt.left+Tt.right,gn=Tt.top+Tt.bottom,Ut=ue(Ke.width),Ht=ue(Ke.height);if(Ke.boxSizing==="border-box"&&(Math.round(Ut+Gt)!==mt&&(Ut-=de(Ke,"left","right")+Gt),Math.round(Ht+gn)!==Dt&&(Ht-=de(Ke,"top","bottom")+gn)),!ye(At)){var Rt=Math.round(Ut+Gt)-mt,Fe=Math.round(Ht+gn)-Dt;Math.abs(Rt)!==1&&(Ut-=Rt),Math.abs(Fe)!==1&&(Ht-=Fe)}return k(Tt.left,Tt.top,Ut,Ht)}var se=function(){return typeof SVGGraphicsElement!="undefined"?function(At){return At instanceof J(At).SVGGraphicsElement}:function(At){return At instanceof J(At).SVGElement&&typeof At.getBBox=="function"}}();function ye(At){return At===J(At).document.documentElement}function Z(At){return E?se(At)?le(At):re(At):he}function Ee(At){var mt=At.x,Dt=At.y,Ke=At.width,Tt=At.height,Gt=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,gn=Object.create(Gt.prototype);return K(gn,{x:mt,y:Dt,width:Ke,height:Tt,top:Dt,right:mt+Ke,bottom:Tt+Dt,left:mt}),gn}function k(At,mt,Dt,Ke){return{x:At,y:mt,width:Dt,height:Ke}}var Te=function(){function At(mt){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=k(0,0,0,0),this.target=mt}return At.prototype.isActive=function(){var mt=Z(this.target);return this.contentRect_=mt,mt.width!==this.broadcastWidth||mt.height!==this.broadcastHeight},At.prototype.broadcastRect=function(){var mt=this.contentRect_;return this.broadcastWidth=mt.width,this.broadcastHeight=mt.height,mt},At}(),De=function(){function At(mt,Dt){var Ke=Ee(Dt);K(this,{target:mt,contentRect:Ke})}return At}(),Ue=function(){function At(mt,Dt,Ke){if(this.activeObservations_=[],this.observations_=new f,typeof mt!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=mt,this.controller_=Dt,this.callbackCtx_=Ke}return At.prototype.observe=function(mt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element=="undefined"||!(Element instanceof Object))return;if(!(mt instanceof J(mt).Element))throw new TypeError('parameter 1 is not of type "Element".');var Dt=this.observations_;if(Dt.has(mt))return;Dt.set(mt,new Te(mt)),this.controller_.addObserver(this),this.controller_.refresh()},At.prototype.unobserve=function(mt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element=="undefined"||!(Element instanceof Object))return;if(!(mt instanceof J(mt).Element))throw new TypeError('parameter 1 is not of type "Element".');var Dt=this.observations_;if(!Dt.has(mt))return;Dt.delete(mt),Dt.size||this.controller_.removeObserver(this)},At.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},At.prototype.gatherActive=function(){var mt=this;this.clearActive(),this.observations_.forEach(function(Dt){Dt.isActive()&&mt.activeObservations_.push(Dt)})},At.prototype.broadcastActive=function(){if(!this.hasActive())return;var mt=this.callbackCtx_,Dt=this.activeObservations_.map(function(Ke){return new De(Ke.target,Ke.broadcastRect())});this.callback_.call(mt,Dt,mt),this.clearActive()},At.prototype.clearActive=function(){this.activeObservations_.splice(0)},At.prototype.hasActive=function(){return this.activeObservations_.length>0},At}(),St=typeof WeakMap!="undefined"?new WeakMap:new f,Ae=function(){function At(mt){if(!(this instanceof At))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var Dt=z.getInstance(),Ke=new Ue(mt,Dt,this);St.set(this,Ke)}return At}();["observe","unobserve","disconnect"].forEach(function(At){Ae.prototype[At]=function(){var mt;return(mt=St.get(this))[At].apply(mt,arguments)}});var Wt=function(){return typeof T.ResizeObserver!="undefined"?T.ResizeObserver:Ae}();_.a=Wt}).call(this,u(93))},function(j,_,u){"use strict";u.d(_,"a",function(){return f});function g(E,T,w,D,O,L,U){try{var V=E[L](U),z=V.value}catch(K){w(K);return}V.done?T(z):Promise.resolve(z).then(D,O)}function f(E){return function(){var T=this,w=arguments;return new Promise(function(D,O){var L=E.apply(T,w);function U(z){g(L,D,O,U,V,"next",z)}function V(z){g(L,D,O,U,V,"throw",z)}U(void 0)})}}},function(j,_,u){"use strict";u.d(_,"a",function(){return T});var g=u(22),f=u(1),E=u.n(f);function T(w,D){var O=D||{},L=O.defaultValue,U=O.value,V=O.onChange,z=O.postState,K=f.useState(function(){return U!==void 0?U:L!==void 0?typeof L=="function"?L():L:typeof w=="function"?w():w}),J=Object(g.a)(K,2),he=J[0],ue=J[1],de=U!==void 0?U:he;z&&(de=z(de));function ae(re){ue(re),de!==re&&V&&V(re,de)}var le=f.useRef(!0);return f.useEffect(function(){if(le.current){le.current=!1;return}U===void 0&&ue(U)},[U]),[de,ae]}},function(j,_,u){"use strict";var g={};function f(L,U){}function E(L,U){}function T(){g={}}function w(L,U,V){!U&&!g[V]&&(L(!1,V),g[V]=!0)}function D(L,U){w(f,L,U)}function O(L,U){w(E,L,U)}_.a=D},function(j,_,u){"use strict";(function(g){u.d(_,"a",function(){return Ln});var f=u(33),E=u.n(f),T=u(280),w=u.n(T),D=u(281),O=u.n(D),L=u(1),U=u.n(L),V=u(122),z=u.n(V),K={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},J={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},he=Object.keys(J).map(function(Un){return J[Un]}),ue={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},de={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ae={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},le=Object.keys(de).reduce(function(Un,$e){return Un[de[$e]]=$e,Un},{}),re=[J.NOSCRIPT,J.SCRIPT,J.STYLE],se="data-react-helmet",ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Un){return typeof Un}:function(Un){return Un&&typeof Symbol=="function"&&Un.constructor===Symbol&&Un!==Symbol.prototype?"symbol":typeof Un},Z=function($e,Re){if(!($e instanceof Re))throw new TypeError("Cannot call a class as a function")},Ee=function(){function Un($e,Re){for(var Ye=0;Ye<Re.length;Ye++){var tt=Re[Ye];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty($e,tt.key,tt)}}return function($e,Re,Ye){return Re&&Un($e.prototype,Re),Ye&&Un($e,Ye),$e}}(),k=Object.assign||function(Un){for(var $e=1;$e<arguments.length;$e++){var Re=arguments[$e];for(var Ye in Re)Object.prototype.hasOwnProperty.call(Re,Ye)&&(Un[Ye]=Re[Ye])}return Un},Te=function($e,Re){if(typeof Re!="function"&&Re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Re);$e.prototype=Object.create(Re&&Re.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Re&&(Object.setPrototypeOf?Object.setPrototypeOf($e,Re):$e.__proto__=Re)},De=function($e,Re){var Ye={};for(var tt in $e){if(Re.indexOf(tt)>=0)continue;if(!Object.prototype.hasOwnProperty.call($e,tt))continue;Ye[tt]=$e[tt]}return Ye},Ue=function($e,Re){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Re&&(typeof Re=="object"||typeof Re=="function")?Re:$e},St=function($e){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Re===!1?String($e):String($e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Ae=function($e){var Re=Ke($e,J.TITLE),Ye=Ke($e,ae.TITLE_TEMPLATE);if(Ye&&Re)return Ye.replace(/%s/g,function(){return Array.isArray(Re)?Re.join(""):Re});var tt=Ke($e,ae.DEFAULT_TITLE);return Re||tt||void 0},Wt=function($e){return Ke($e,ae.ON_CHANGE_CLIENT_STATE)||function(){}},At=function($e,Re){return Re.filter(function(Ye){return typeof Ye[$e]!="undefined"}).map(function(Ye){return Ye[$e]}).reduce(function(Ye,tt){return k({},Ye,tt)},{})},mt=function($e,Re){return Re.filter(function(Ye){return typeof Ye[J.BASE]!="undefined"}).map(function(Ye){return Ye[J.BASE]}).reverse().reduce(function(Ye,tt){if(!Ye.length)for(var gt=Object.keys(tt),kt=0;kt<gt.length;kt++){var Pe=gt[kt],pt=Pe.toLowerCase();if($e.indexOf(pt)!==-1&&tt[pt])return Ye.concat(tt)}return Ye},[])},Dt=function($e,Re,Ye){var tt={};return Ye.filter(function(gt){return Array.isArray(gt[$e])?!0:(typeof gt[$e]!="undefined"&&Rt("Helmet: "+$e+' should be of type "Array". Instead found type "'+ye(gt[$e])+'"'),!1)}).map(function(gt){return gt[$e]}).reverse().reduce(function(gt,kt){var Pe={};kt.filter(function(Gn){for(var Yn=void 0,vr=Object.keys(Gn),zr=0;zr<vr.length;zr++){var et=vr[zr],wt=et.toLowerCase();Re.indexOf(wt)!==-1&&!(Yn===ue.REL&&Gn[Yn].toLowerCase()==="canonical")&&!(wt===ue.REL&&Gn[wt].toLowerCase()==="stylesheet")&&(Yn=wt),Re.indexOf(et)!==-1&&(et===ue.INNER_HTML||et===ue.CSS_TEXT||et===ue.ITEM_PROP)&&(Yn=et)}if(!Yn||!Gn[Yn])return!1;var lt=Gn[Yn].toLowerCase();return tt[Yn]||(tt[Yn]={}),Pe[Yn]||(Pe[Yn]={}),tt[Yn][lt]?!1:(Pe[Yn][lt]=!0,!0)}).reverse().forEach(function(Gn){return gt.push(Gn)});for(var pt=Object.keys(Pe),st=0;st<pt.length;st++){var Ft=pt[st],An=z()({},tt[Ft],Pe[Ft]);tt[Ft]=An}return gt},[]).reverse()},Ke=function($e,Re){for(var Ye=$e.length-1;Ye>=0;Ye--){var tt=$e[Ye];if(tt.hasOwnProperty(Re))return tt[Re]}return null},Tt=function($e){return{baseTag:mt([ue.HREF,ue.TARGET],$e),bodyAttributes:At(K.BODY,$e),defer:Ke($e,ae.DEFER),encode:Ke($e,ae.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:At(K.HTML,$e),linkTags:Dt(J.LINK,[ue.REL,ue.HREF],$e),metaTags:Dt(J.META,[ue.NAME,ue.CHARSET,ue.HTTPEQUIV,ue.PROPERTY,ue.ITEM_PROP],$e),noscriptTags:Dt(J.NOSCRIPT,[ue.INNER_HTML],$e),onChangeClientState:Wt($e),scriptTags:Dt(J.SCRIPT,[ue.SRC,ue.INNER_HTML],$e),styleTags:Dt(J.STYLE,[ue.CSS_TEXT],$e),title:Ae($e),titleAttributes:At(K.TITLE,$e)}},Gt=function(){var Un=Date.now();return function($e){var Re=Date.now();Re-Un>16?(Un=Re,$e(Re)):setTimeout(function(){Gt($e)},0)}}(),gn=function($e){return clearTimeout($e)},Ut=typeof window!="undefined"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Gt:g.requestAnimationFrame||Gt,Ht=typeof window!="undefined"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||gn:g.cancelAnimationFrame||gn,Rt=function($e){return console&&typeof console.warn=="function"&&console.warn($e)},Fe=null,me=function($e){Fe&&Ht(Fe),$e.defer?Fe=Ut(function(){ze($e,function(){Fe=null})}):(ze($e),Fe=null)},ze=function($e,Re){var Ye=$e.baseTag,tt=$e.bodyAttributes,gt=$e.htmlAttributes,kt=$e.linkTags,Pe=$e.metaTags,pt=$e.noscriptTags,st=$e.onChangeClientState,Ft=$e.scriptTags,An=$e.styleTags,Gn=$e.title,Yn=$e.titleAttributes;xt(J.BODY,tt),xt(J.HTML,gt),ut(Gn,Yn);var vr={baseTag:$t(J.BASE,Ye),linkTags:$t(J.LINK,kt),metaTags:$t(J.META,Pe),noscriptTags:$t(J.NOSCRIPT,pt),scriptTags:$t(J.SCRIPT,Ft),styleTags:$t(J.STYLE,An)},zr={},et={};Object.keys(vr).forEach(function(wt){var lt=vr[wt],Vt=lt.newTags,cn=lt.oldTags;Vt.length&&(zr[wt]=Vt),cn.length&&(et[wt]=vr[wt].oldTags)}),Re&&Re(),st($e,zr,et)},Be=function($e){return Array.isArray($e)?$e.join(""):$e},ut=function($e,Re){typeof $e!="undefined"&&document.title!==$e&&(document.title=Be($e)),xt(J.TITLE,Re)},xt=function($e,Re){var Ye=document.getElementsByTagName($e)[0];if(!Ye)return;for(var tt=Ye.getAttribute(se),gt=tt?tt.split(","):[],kt=[].concat(gt),Pe=Object.keys(Re),pt=0;pt<Pe.length;pt++){var st=Pe[pt],Ft=Re[st]||"";Ye.getAttribute(st)!==Ft&&Ye.setAttribute(st,Ft),gt.indexOf(st)===-1&&gt.push(st);var An=kt.indexOf(st);An!==-1&&kt.splice(An,1)}for(var Gn=kt.length-1;Gn>=0;Gn--)Ye.removeAttribute(kt[Gn]);gt.length===kt.length?Ye.removeAttribute(se):Ye.getAttribute(se)!==Pe.join(",")&&Ye.setAttribute(se,Pe.join(","))},$t=function($e,Re){var Ye=document.head||document.querySelector(J.HEAD),tt=Ye.querySelectorAll($e+"["+se+"]"),gt=Array.prototype.slice.call(tt),kt=[],Pe=void 0;return Re&&Re.length&&Re.forEach(function(pt){var st=document.createElement($e);for(var Ft in pt)if(pt.hasOwnProperty(Ft))if(Ft===ue.INNER_HTML)st.innerHTML=pt.innerHTML;else if(Ft===ue.CSS_TEXT)st.styleSheet?st.styleSheet.cssText=pt.cssText:st.appendChild(document.createTextNode(pt.cssText));else{var An=typeof pt[Ft]=="undefined"?"":pt[Ft];st.setAttribute(Ft,An)}st.setAttribute(se,"true"),gt.some(function(Gn,Yn){return Pe=Yn,st.isEqualNode(Gn)})?gt.splice(Pe,1):kt.push(st)}),gt.forEach(function(pt){return pt.parentNode.removeChild(pt)}),kt.forEach(function(pt){return Ye.appendChild(pt)}),{oldTags:gt,newTags:kt}},Qt=function($e){return Object.keys($e).reduce(function(Re,Ye){var tt=typeof $e[Ye]!="undefined"?Ye+'="'+$e[Ye]+'"':""+Ye;return Re?Re+" "+tt:tt},"")},on=function($e,Re,Ye,tt){var gt=Qt(Ye),kt=Be(Re);return gt?"<"+$e+" "+se+'="true" '+gt+">"+St(kt,tt)+"</"+$e+">":"<"+$e+" "+se+'="true">'+St(kt,tt)+"</"+$e+">"},Mn=function($e,Re,Ye){return Re.reduce(function(tt,gt){var kt=Object.keys(gt).filter(function(st){return!(st===ue.INNER_HTML||st===ue.CSS_TEXT)}).reduce(function(st,Ft){var An=typeof gt[Ft]=="undefined"?Ft:Ft+'="'+St(gt[Ft],Ye)+'"';return st?st+" "+An:An},""),Pe=gt.innerHTML||gt.cssText||"",pt=re.indexOf($e)===-1;return tt+"<"+$e+" "+se+'="true" '+kt+(pt?"/>":">"+Pe+"</"+$e+">")},"")},Nn=function($e){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys($e).reduce(function(Ye,tt){return Ye[de[tt]||tt]=$e[tt],Ye},Re)},qn=function($e){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys($e).reduce(function(Ye,tt){return Ye[le[tt]||tt]=$e[tt],Ye},Re)},nr=function($e,Re,Ye){var tt,gt=(tt={key:Re},tt[se]=!0,tt),kt=Nn(Ye,gt);return[U.a.createElement(J.TITLE,kt,Re)]},xn=function($e,Re){return Re.map(function(Ye,tt){var gt,kt=(gt={key:tt},gt[se]=!0,gt);return Object.keys(Ye).forEach(function(Pe){var pt=de[Pe]||Pe;if(pt===ue.INNER_HTML||pt===ue.CSS_TEXT){var st=Ye.innerHTML||Ye.cssText;kt.dangerouslySetInnerHTML={__html:st}}else kt[pt]=Ye[Pe]}),U.a.createElement($e,kt)})},pn=function($e,Re,Ye){switch($e){case J.TITLE:return{toComponent:function(){return nr($e,Re.title,Re.titleAttributes,Ye)},toString:function(){return on($e,Re.title,Re.titleAttributes,Ye)}};case K.BODY:case K.HTML:return{toComponent:function(){return Nn(Re)},toString:function(){return Qt(Re)}};default:return{toComponent:function(){return xn($e,Re)},toString:function(){return Mn($e,Re,Ye)}}}},pr=function($e){var Re=$e.baseTag,Ye=$e.bodyAttributes,tt=$e.encode,gt=$e.htmlAttributes,kt=$e.linkTags,Pe=$e.metaTags,pt=$e.noscriptTags,st=$e.scriptTags,Ft=$e.styleTags,An=$e.title,Gn=An===void 0?"":An,Yn=$e.titleAttributes;return{base:pn(J.BASE,Re,tt),bodyAttributes:pn(K.BODY,Ye,tt),htmlAttributes:pn(K.HTML,gt,tt),link:pn(J.LINK,kt,tt),meta:pn(J.META,Pe,tt),noscript:pn(J.NOSCRIPT,pt,tt),script:pn(J.SCRIPT,st,tt),style:pn(J.STYLE,Ft,tt),title:pn(J.TITLE,{title:Gn,titleAttributes:Yn},tt)}},gr=function($e){var Re,Ye;return Ye=Re=function(tt){Te(gt,tt);function gt(){return Z(this,gt),Ue(this,tt.apply(this,arguments))}return gt.prototype.shouldComponentUpdate=function(Pe){return!O()(this.props,Pe)},gt.prototype.mapNestedChildrenToProps=function(Pe,pt){if(!pt)return null;switch(Pe.type){case J.SCRIPT:case J.NOSCRIPT:return{innerHTML:pt};case J.STYLE:return{cssText:pt}}throw new Error("<"+Pe.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},gt.prototype.flattenArrayTypeChildren=function(Pe){var pt,st=Pe.child,Ft=Pe.arrayTypeChildren,An=Pe.newChildProps,Gn=Pe.nestedChildren;return k({},Ft,(pt={},pt[st.type]=[].concat(Ft[st.type]||[],[k({},An,this.mapNestedChildrenToProps(st,Gn))]),pt))},gt.prototype.mapObjectTypeChildren=function(Pe){var pt,st,Ft=Pe.child,An=Pe.newProps,Gn=Pe.newChildProps,Yn=Pe.nestedChildren;switch(Ft.type){case J.TITLE:return k({},An,(pt={},pt[Ft.type]=Yn,pt.titleAttributes=k({},Gn),pt));case J.BODY:return k({},An,{bodyAttributes:k({},Gn)});case J.HTML:return k({},An,{htmlAttributes:k({},Gn)})}return k({},An,(st={},st[Ft.type]=k({},Gn),st))},gt.prototype.mapArrayTypeChildrenToProps=function(Pe,pt){var st=k({},pt);return Object.keys(Pe).forEach(function(Ft){var An;st=k({},st,(An={},An[Ft]=Pe[Ft],An))}),st},gt.prototype.warnOnInvalidChildren=function(Pe,pt){return!0},gt.prototype.mapChildrenToProps=function(Pe,pt){var st=this,Ft={};return U.a.Children.forEach(Pe,function(An){if(!An||!An.props)return;var Gn=An.props,Yn=Gn.children,vr=De(Gn,["children"]),zr=qn(vr);st.warnOnInvalidChildren(An,Yn);switch(An.type){case J.LINK:case J.META:case J.NOSCRIPT:case J.SCRIPT:case J.STYLE:Ft=st.flattenArrayTypeChildren({child:An,arrayTypeChildren:Ft,newChildProps:zr,nestedChildren:Yn});break;default:pt=st.mapObjectTypeChildren({child:An,newProps:pt,newChildProps:zr,nestedChildren:Yn});break}}),pt=this.mapArrayTypeChildrenToProps(Ft,pt),pt},gt.prototype.render=function(){var Pe=this.props,pt=Pe.children,st=De(Pe,["children"]),Ft=k({},st);return pt&&(Ft=this.mapChildrenToProps(pt,Ft)),U.a.createElement($e,Ft)},Ee(gt,null,[{key:"canUseDOM",set:function(Pe){$e.canUseDOM=Pe}}]),gt}(U.a.Component),Re.propTypes={base:E.a.object,bodyAttributes:E.a.object,children:E.a.oneOfType([E.a.arrayOf(E.a.node),E.a.node]),defaultTitle:E.a.string,defer:E.a.bool,encodeSpecialCharacters:E.a.bool,htmlAttributes:E.a.object,link:E.a.arrayOf(E.a.object),meta:E.a.arrayOf(E.a.object),noscript:E.a.arrayOf(E.a.object),onChangeClientState:E.a.func,script:E.a.arrayOf(E.a.object),style:E.a.arrayOf(E.a.object),title:E.a.string,titleAttributes:E.a.object,titleTemplate:E.a.string},Re.defaultProps={defer:!0,encodeSpecialCharacters:!0},Re.peek=$e.peek,Re.rewind=function(){var tt=$e.rewind();return tt||(tt=pr({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),tt},Ye},Ce=function(){return null},Jn=w()(Tt,me,pr)(Ce),Ln=gr(Jn);Ln.renderStatic=Ln.rewind;var yr=Ln}).call(this,u(93))},function(j,_,u){"use strict";function g(L){return L&&typeof L=="object"&&"default"in L?L.default:L}var f=u(1),E=g(f);function T(L,U,V){return U in L?Object.defineProperty(L,U,{value:V,enumerable:!0,configurable:!0,writable:!0}):L[U]=V,L}function w(L,U){L.prototype=Object.create(U.prototype),L.prototype.constructor=L,L.__proto__=U}var D=!!(typeof window!="undefined"&&window.document&&window.document.createElement);function O(L,U,V){if(typeof L!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof U!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof V!="undefined"&&typeof V!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function z(K){return K.displayName||K.name||"Component"}return function(J){if(typeof J!="function")throw new Error("Expected WrappedComponent to be a React component.");var he=[],ue;function de(){ue=L(he.map(function(le){return le.props})),ae.canUseDOM?U(ue):V&&(ue=V(ue))}var ae=function(le){w(re,le);function re(){return le.apply(this,arguments)||this}re.peek=function(){return ue},re.rewind=function(){if(re.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var Z=ue;return ue=void 0,he=[],Z};var se=re.prototype;return se.UNSAFE_componentWillMount=function(){he.push(this),de()},se.componentDidUpdate=function(){de()},se.componentWillUnmount=function(){var Z=he.indexOf(this);he.splice(Z,1),de()},se.render=function(){return E.createElement(J,this.props)},re}(f.PureComponent);return T(ae,"displayName","SideEffect("+z(J)+")"),T(ae,"canUseDOM",D),ae}}j.exports=O},function(j,_){var u=typeof Element!="undefined",g=typeof Map=="function",f=typeof Set=="function",E=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function T(w,D){if(w===D)return!0;if(w&&D&&typeof w=="object"&&typeof D=="object"){if(w.constructor!==D.constructor)return!1;var O,L,U;if(Array.isArray(w)){if(O=w.length,O!=D.length)return!1;for(L=O;L--!==0;)if(!T(w[L],D[L]))return!1;return!0}var V;if(g&&w instanceof Map&&D instanceof Map){if(w.size!==D.size)return!1;for(V=w.entries();!(L=V.next()).done;)if(!D.has(L.value[0]))return!1;for(V=w.entries();!(L=V.next()).done;)if(!T(L.value[1],D.get(L.value[0])))return!1;return!0}if(f&&w instanceof Set&&D instanceof Set){if(w.size!==D.size)return!1;for(V=w.entries();!(L=V.next()).done;)if(!D.has(L.value[0]))return!1;return!0}if(E&&ArrayBuffer.isView(w)&&ArrayBuffer.isView(D)){if(O=w.length,O!=D.length)return!1;for(L=O;L--!==0;)if(w[L]!==D[L])return!1;return!0}if(w.constructor===RegExp)return w.source===D.source&&w.flags===D.flags;if(w.valueOf!==Object.prototype.valueOf)return w.valueOf()===D.valueOf();if(w.toString!==Object.prototype.toString)return w.toString()===D.toString();if(U=Object.keys(w),O=U.length,O!==Object.keys(D).length)return!1;for(L=O;L--!==0;)if(!Object.prototype.hasOwnProperty.call(D,U[L]))return!1;if(u&&w instanceof Element)return!1;for(L=O;L--!==0;){if((U[L]==="_owner"||U[L]==="__v"||U[L]==="__o")&&w.$$typeof)continue;if(!T(w[U[L]],D[U[L]]))return!1}return!0}return w!==w&&D!==D}j.exports=function(D,O){try{return T(D,O)}catch(L){if((L.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw L}}},function(j,_,u){"use strict";function g(){return!1}_.a=g},function(j,_,u){var g;(function(f,E,T){if(!f)return;for(var w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},D={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},L={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},U,V=1;V<20;++V)w[111+V]="f"+V;for(V=0;V<=9;++V)w[V+96]=V.toString();function z(k,Te,De){if(k.addEventListener){k.addEventListener(Te,De,!1);return}k.attachEvent("on"+Te,De)}function K(k){if(k.type=="keypress"){var Te=String.fromCharCode(k.which);return k.shiftKey||(Te=Te.toLowerCase()),Te}return w[k.which]?w[k.which]:D[k.which]?D[k.which]:String.fromCharCode(k.which).toLowerCase()}function J(k,Te){return k.sort().join(",")===Te.sort().join(",")}function he(k){var Te=[];return k.shiftKey&&Te.push("shift"),k.altKey&&Te.push("alt"),k.ctrlKey&&Te.push("ctrl"),k.metaKey&&Te.push("meta"),Te}function ue(k){if(k.preventDefault){k.preventDefault();return}k.returnValue=!1}function de(k){if(k.stopPropagation){k.stopPropagation();return}k.cancelBubble=!0}function ae(k){return k=="shift"||k=="ctrl"||k=="alt"||k=="meta"}function le(){if(!U){U={};for(var k in w){if(k>95&&k<112)continue;w.hasOwnProperty(k)&&(U[w[k]]=k)}}return U}function re(k,Te,De){return De||(De=le()[k]?"keydown":"keypress"),De=="keypress"&&Te.length&&(De="keydown"),De}function se(k){return k==="+"?["+"]:(k=k.replace(/\+{2}/g,"+plus"),k.split("+"))}function ye(k,Te){var De,Ue,St,Ae=[];for(De=se(k),St=0;St<De.length;++St)Ue=De[St],L[Ue]&&(Ue=L[Ue]),Te&&Te!="keypress"&&O[Ue]&&(Ue=O[Ue],Ae.push("shift")),ae(Ue)&&Ae.push(Ue);return Te=re(Ue,Ae,Te),{key:Ue,modifiers:Ae,action:Te}}function Z(k,Te){return k===null||k===E?!1:k===Te?!0:Z(k.parentNode,Te)}function Ee(k){var Te=this;if(k=k||E,!(Te instanceof Ee))return new Ee(k);Te.target=k,Te._callbacks={},Te._directMap={};var De={},Ue,St=!1,Ae=!1,Wt=!1;function At(Ut){Ut=Ut||{};var Ht=!1,Rt;for(Rt in De){if(Ut[Rt]){Ht=!0;continue}De[Rt]=0}Ht||(Wt=!1)}function mt(Ut,Ht,Rt,Fe,me,ze){var Be,ut,xt=[],$t=Rt.type;if(!Te._callbacks[Ut])return[];for($t=="keyup"&&ae(Ut)&&(Ht=[Ut]),Be=0;Be<Te._callbacks[Ut].length;++Be){if(ut=Te._callbacks[Ut][Be],!Fe&&ut.seq&&De[ut.seq]!=ut.level)continue;if($t!=ut.action)continue;if($t=="keypress"&&!Rt.metaKey&&!Rt.ctrlKey||J(Ht,ut.modifiers)){var Qt=!Fe&&ut.combo==me,on=Fe&&ut.seq==Fe&&ut.level==ze;(Qt||on)&&Te._callbacks[Ut].splice(Be,1),xt.push(ut)}}return xt}function Dt(Ut,Ht,Rt,Fe){if(Te.stopCallback(Ht,Ht.target||Ht.srcElement,Rt,Fe))return;Ut(Ht,Rt)===!1&&(ue(Ht),de(Ht))}Te._handleKey=function(Ut,Ht,Rt){var Fe=mt(Ut,Ht,Rt),me,ze={},Be=0,ut=!1;for(me=0;me<Fe.length;++me)Fe[me].seq&&(Be=Math.max(Be,Fe[me].level));for(me=0;me<Fe.length;++me){if(Fe[me].seq){if(Fe[me].level!=Be)continue;ut=!0,ze[Fe[me].seq]=1,Dt(Fe[me].callback,Rt,Fe[me].combo,Fe[me].seq);continue}ut||Dt(Fe[me].callback,Rt,Fe[me].combo)}var xt=Rt.type=="keypress"&&Ae;Rt.type==Wt&&!ae(Ut)&&!xt&&At(ze),Ae=ut&&Rt.type=="keydown"};function Ke(Ut){typeof Ut.which!="number"&&(Ut.which=Ut.keyCode);var Ht=K(Ut);if(!Ht)return;if(Ut.type=="keyup"&&St===Ht){St=!1;return}Te.handleKey(Ht,he(Ut),Ut)}function Tt(){clearTimeout(Ue),Ue=setTimeout(At,1e3)}function Gt(Ut,Ht,Rt,Fe){De[Ut]=0;function me($t){return function(){Wt=$t,++De[Ut],Tt()}}function ze($t){Dt(Rt,$t,Ut),Fe!=="keyup"&&(St=K($t)),setTimeout(At,10)}for(var Be=0;Be<Ht.length;++Be){var ut=Be+1===Ht.length,xt=ut?ze:me(Fe||ye(Ht[Be+1]).action);gn(Ht[Be],xt,Fe,Ut,Be)}}function gn(Ut,Ht,Rt,Fe,me){Te._directMap[Ut+":"+Rt]=Ht,Ut=Ut.replace(/\s+/g," ");var ze=Ut.split(" "),Be;if(ze.length>1){Gt(Ut,ze,Ht,Rt);return}Be=ye(Ut,Rt),Te._callbacks[Be.key]=Te._callbacks[Be.key]||[],mt(Be.key,Be.modifiers,{type:Be.action},Fe,Ut,me),Te._callbacks[Be.key][Fe?"unshift":"push"]({callback:Ht,modifiers:Be.modifiers,action:Be.action,seq:Fe,level:me,combo:Ut})}Te._bindMultiple=function(Ut,Ht,Rt){for(var Fe=0;Fe<Ut.length;++Fe)gn(Ut[Fe],Ht,Rt)},z(k,"keypress",Ke),z(k,"keydown",Ke),z(k,"keyup",Ke)}Ee.prototype.bind=function(k,Te,De){var Ue=this;return k=k instanceof Array?k:[k],Ue._bindMultiple.call(Ue,k,Te,De),Ue},Ee.prototype.unbind=function(k,Te){var De=this;return De.bind.call(De,k,function(){},Te)},Ee.prototype.trigger=function(k,Te){var De=this;return De._directMap[k+":"+Te]&&De._directMap[k+":"+Te]({},k),De},Ee.prototype.reset=function(){var k=this;return k._callbacks={},k._directMap={},k},Ee.prototype.stopCallback=function(k,Te){var De=this;if((" "+Te.className+" ").indexOf(" mousetrap ")>-1)return!1;if(Z(Te,De.target))return!1;if("composedPath"in k&&typeof k.composedPath=="function"){var Ue=k.composedPath()[0];Ue!==k.target&&(Te=Ue)}return Te.tagName=="INPUT"||Te.tagName=="SELECT"||Te.tagName=="TEXTAREA"||Te.isContentEditable},Ee.prototype.handleKey=function(){var k=this;return k._handleKey.apply(k,arguments)},Ee.addKeycodes=function(k){for(var Te in k)k.hasOwnProperty(Te)&&(w[Te]=k[Te]);U=null},Ee.init=function(){var k=Ee(E);for(var Te in k)Te.charAt(0)!=="_"&&(Ee[Te]=function(De){return function(){return k[De].apply(k,arguments)}}(Te))},Ee.init(),f.Mousetrap=Ee,j.exports&&(j.exports=Ee),!(g=function(){return Ee}.call(_,u,_,j),g!==T&&(j.exports=g))})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var g=u(519);function f(E,T){T===void 0&&(T=!0);var w=g.makePropertyInjectDecorator(E,T),D=g.makePropertyInjectNamedDecorator(E,T),O=g.makePropertyInjectTaggedDecorator(E,T),L=g.makePropertyMultiInjectDecorator(E,T);return{lazyInject:w,lazyInjectNamed:D,lazyInjectTagged:O,lazyMultiInject:L}}_.default=f},function(j,_,u){(function(g,f){j.exports=f()})(this,function(){"use strict";var g=function(_e){return _e instanceof Uint8Array||_e instanceof Uint16Array||_e instanceof Uint32Array||_e instanceof Int8Array||_e instanceof Int16Array||_e instanceof Int32Array||_e instanceof Float32Array||_e instanceof Float64Array||_e instanceof Uint8ClampedArray},f=function(_e,Et){for(var vn=Object.keys(Et),Vn=0;Vn<vn.length;++Vn)_e[vn[Vn]]=Et[vn[Vn]];return _e},E=`
`;function T(ge){return typeof atob!="undefined"?atob(ge):"base64:"+ge}function w(ge){var _e=new Error("(regl) "+ge);throw console.error(_e),_e}function D(ge,_e){ge||w(_e)}function O(ge){return ge?": "+ge:""}function L(ge,_e,Et){ge in _e||w("unknown parameter ("+ge+")"+O(Et)+". possible values: "+Object.keys(_e).join())}function U(ge,_e){g(ge)||w("invalid parameter type"+O(_e)+". must be a typed array")}function V(ge,_e){switch(_e){case"number":return typeof ge=="number";case"object":return typeof ge=="object";case"string":return typeof ge=="string";case"boolean":return typeof ge=="boolean";case"function":return typeof ge=="function";case"undefined":return typeof ge=="undefined";case"symbol":return typeof ge=="symbol"}}function z(ge,_e,Et){V(ge,_e)||w("invalid parameter type"+O(Et)+". expected "+_e+", got "+typeof ge)}function K(ge,_e){ge>=0&&(ge|0)===ge||w("invalid parameter type, ("+ge+")"+O(_e)+". must be a nonnegative integer")}function J(ge,_e,Et){_e.indexOf(ge)<0&&w("invalid value"+O(Et)+". must be one of: "+_e)}var he=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function ue(ge){Object.keys(ge).forEach(function(_e){he.indexOf(_e)<0&&w('invalid regl constructor argument "'+_e+'". must be one of '+he)})}function de(ge,_e){for(ge=ge+"";ge.length<_e;)ge=" "+ge;return ge}function ae(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function le(ge,_e){this.number=ge,this.line=_e,this.errors=[]}function re(ge,_e,Et){this.file=ge,this.line=_e,this.message=Et}function se(){var ge=new Error,_e=(ge.stack||ge).toString(),Et=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(_e);if(Et)return Et[1];var vn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(_e);return vn?vn[1]:"unknown"}function ye(){var ge=new Error,_e=(ge.stack||ge).toString(),Et=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(_e);if(Et)return Et[1];var vn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(_e);return vn?vn[1]:"unknown"}function Z(ge,_e){var Et=ge.split(`
`),vn=1,Vn=0,kn={unknown:new ae,0:new ae};kn.unknown.name=kn[0].name=_e||se(),kn.unknown.lines.push(new le(0,""));for(var bn=0;bn<Et.length;++bn){var ur=Et[bn],Sn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ur);if(Sn)switch(Sn[1]){case"line":var mr=/(\d+)(\s+\d+)?/.exec(Sn[2]);mr&&(vn=mr[1]|0,mr[2]&&(Vn=mr[2]|0,Vn in kn||(kn[Vn]=new ae)));break;case"define":var Er=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Sn[2]);Er&&(kn[Vn].name=Er[1]?T(Er[2]):Er[2]);break}kn[Vn].lines.push(new le(vn++,ur))}return Object.keys(kn).forEach(function(Cr){var Ir=kn[Cr];Ir.lines.forEach(function(Mr){Ir.index[Mr.number]=Mr})}),kn}function Ee(ge){var _e=[];return ge.split(`
`).forEach(function(Et){if(Et.length<5)return;var vn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Et);vn?_e.push(new re(vn[1]|0,vn[2]|0,vn[3].trim())):Et.length>0&&_e.push(new re("unknown",0,Et))}),_e}function k(ge,_e){_e.forEach(function(Et){var vn=ge[Et.file];if(vn){var Vn=vn.index[Et.line];if(Vn){Vn.errors.push(Et),vn.hasErrors=!0;return}}ge.unknown.hasErrors=!0,ge.unknown.lines[0].errors.push(Et)})}function Te(ge,_e,Et,vn,Vn){if(!ge.getShaderParameter(_e,ge.COMPILE_STATUS)){var kn=ge.getShaderInfoLog(_e),bn=vn===ge.FRAGMENT_SHADER?"fragment":"vertex";mt(Et,"string",bn+" shader source must be a string",Vn);var ur=Z(Et,Vn),Sn=Ee(kn);k(ur,Sn),Object.keys(ur).forEach(function(mr){var Er=ur[mr];if(!Er.hasErrors)return;var Cr=[""],Ir=[""];function Mr(xr,mn){Cr.push(xr),Ir.push(mn||"")}Mr("file number "+mr+": "+Er.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Er.lines.forEach(function(xr){if(xr.errors.length>0){Mr(de(xr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Mr(xr.line+E,"color:red; background-color:yellow; font-weight:bold");var mn=0;xr.errors.forEach(function(fn){var br=fn.message,Fr=/^\s*'(.*)'\s*:\s*(.*)$/.exec(br);if(Fr){var Pn=Fr[1];br=Fr[2];switch(Pn){case"assign":Pn="=";break}mn=Math.max(xr.line.indexOf(Pn,mn),0)}else mn=0;Mr(de("| ",6)),Mr(de("^^^",mn+3)+E,"font-weight:bold"),Mr(de("| ",6)),Mr(br+E,"font-weight:bold")}),Mr(de("| ",6)+E)}else Mr(de(xr.number,4)+"|  "),Mr(xr.line+E,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ir[0]=Cr.join("%c"),console.log.apply(console,Ir)):console.log(Cr.join(""))}),D.raise("Error compiling "+bn+" shader, "+ur[0].name)}}function De(ge,_e,Et,vn,Vn){if(!ge.getProgramParameter(_e,ge.LINK_STATUS)){var kn=ge.getProgramInfoLog(_e),bn=Z(Et,Vn),ur=Z(vn,Vn),Sn='Error linking program with vertex shader, "'+ur[0].name+'", and fragment shader "'+bn[0].name+'"';typeof document!="undefined"?console.log("%c"+Sn+E+"%c"+kn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Sn+E+kn),D.raise(Sn)}}function Ue(ge){ge._commandRef=se()}function St(ge,_e,Et,vn){Ue(ge);function Vn(Sn){return Sn?vn.id(Sn):0}ge._fragId=Vn(ge.static.frag),ge._vertId=Vn(ge.static.vert);function kn(Sn,mr){Object.keys(mr).forEach(function(Er){Sn[vn.id(Er)]=!0})}var bn=ge._uniformSet={};kn(bn,_e.static),kn(bn,_e.dynamic);var ur=ge._attributeSet={};kn(ur,Et.static),kn(ur,Et.dynamic),ge._hasCount="count"in ge.static||"count"in ge.dynamic||"elements"in ge.static||"elements"in ge.dynamic}function Ae(ge,_e){var Et=ye();w(ge+" in command "+(_e||se())+(Et==="unknown"?"":" called from "+Et))}function Wt(ge,_e,Et){ge||Ae(_e,Et||se())}function At(ge,_e,Et,vn){ge in _e||Ae("unknown parameter ("+ge+")"+O(Et)+". possible values: "+Object.keys(_e).join(),vn||se())}function mt(ge,_e,Et,vn){V(ge,_e)||Ae("invalid parameter type"+O(Et)+". expected "+_e+", got "+typeof ge,vn||se())}function Dt(ge){ge()}function Ke(ge,_e,Et){ge.texture?J(ge.texture._texture.internalformat,_e,"unsupported texture format for attachment"):J(ge.renderbuffer._renderbuffer.format,Et,"unsupported renderbuffer format for attachment")}var Tt=33071,Gt=9728,gn=9984,Ut=9985,Ht=9986,Rt=9987,Fe=5120,me=5121,ze=5122,Be=5123,ut=5124,xt=5125,$t=5126,Qt=32819,on=32820,Mn=33635,Nn=34042,qn=36193,nr={};nr[Fe]=nr[me]=1,nr[ze]=nr[Be]=nr[qn]=nr[Mn]=nr[Qt]=nr[on]=2,nr[ut]=nr[xt]=nr[$t]=nr[Nn]=4;function xn(ge,_e){return ge===on||ge===Qt||ge===Mn?2:ge===Nn?4:nr[ge]*_e}function pn(ge){return!(ge&ge-1)&&!!ge}function pr(ge,_e,Et){var vn,Vn=_e.width,kn=_e.height,bn=_e.channels;D(Vn>0&&Vn<=Et.maxTextureSize&&kn>0&&kn<=Et.maxTextureSize,"invalid texture shape"),(ge.wrapS!==Tt||ge.wrapT!==Tt)&&D(pn(Vn)&&pn(kn),"incompatible wrap mode for texture, both width and height must be power of 2"),_e.mipmask===1?Vn!==1&&kn!==1&&D(ge.minFilter!==gn&&ge.minFilter!==Ht&&ge.minFilter!==Ut&&ge.minFilter!==Rt,"min filter requires mipmap"):(D(pn(Vn)&&pn(kn),"texture must be a square power of 2 to support mipmapping"),D(_e.mipmask===(Vn<<1)-1,"missing or incomplete mipmap data")),_e.type===$t&&(Et.extensions.indexOf("oes_texture_float_linear")<0&&D(ge.minFilter===Gt&&ge.magFilter===Gt,"filter not supported, must enable oes_texture_float_linear"),D(!ge.genMipmaps,"mipmap generation not supported with float textures"));var ur=_e.images;for(vn=0;vn<16;++vn)if(ur[vn]){var Sn=Vn>>vn,mr=kn>>vn;D(_e.mipmask&1<<vn,"missing mipmap data");var Er=ur[vn];if(D(Er.width===Sn&&Er.height===mr,"invalid shape for mip images"),D(Er.format===_e.format&&Er.internalformat===_e.internalformat&&Er.type===_e.type,"incompatible type for mip image"),!Er.compressed)if(Er.data){var Cr=Math.ceil(xn(Er.type,bn)*Sn/Er.unpackAlignment)*Er.unpackAlignment;D(Er.data.byteLength===Cr*mr,"invalid data for image, buffer size is inconsistent with image format")}else Er.element||Er.copy}else ge.genMipmaps||D((_e.mipmask&1<<vn)===0,"extra mipmap data");_e.compressed&&D(!ge.genMipmaps,"mipmap generation for compressed images not supported")}function gr(ge,_e,Et,vn){var Vn=ge.width,kn=ge.height,bn=ge.channels;D(Vn>0&&Vn<=vn.maxTextureSize&&kn>0&&kn<=vn.maxTextureSize,"invalid texture shape"),D(Vn===kn,"cube map must be square"),D(_e.wrapS===Tt&&_e.wrapT===Tt,"wrap mode not supported by cube map");for(var ur=0;ur<Et.length;++ur){var Sn=Et[ur];D(Sn.width===Vn&&Sn.height===kn,"inconsistent cube map face shape"),_e.genMipmaps&&(D(!Sn.compressed,"can not generate mipmap for compressed textures"),D(Sn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var mr=Sn.images,Er=0;Er<16;++Er){var Cr=mr[Er];if(Cr){var Ir=Vn>>Er,Mr=kn>>Er;D(Sn.mipmask&1<<Er,"missing mipmap data"),D(Cr.width===Ir&&Cr.height===Mr,"invalid shape for mip images"),D(Cr.format===ge.format&&Cr.internalformat===ge.internalformat&&Cr.type===ge.type,"incompatible type for mip image"),Cr.compressed||(Cr.data?D(Cr.data.byteLength===Ir*Mr*Math.max(xn(Cr.type,bn),Cr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Cr.element||Cr.copy)}}}}var Ce=f(D,{optional:Dt,raise:w,commandRaise:Ae,command:Wt,parameter:L,commandParameter:At,constructor:ue,type:z,commandType:mt,isTypedArray:U,nni:K,oneOf:J,shaderError:Te,linkError:De,callSite:ye,saveCommandRef:Ue,saveDrawInfo:St,framebufferFormat:Ke,guessCommand:se,texture2D:pr,textureCube:gr}),Jn=0,Ln=0,yr=5,Un=6;function $e(ge,_e){this.id=Jn++,this.type=ge,this.data=_e}function Re(ge){return ge.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ye(ge){if(ge.length===0)return[];var _e=ge.charAt(0),Et=ge.charAt(ge.length-1);if(ge.length>1&&_e===Et&&(_e==='"'||_e==="'"))return['"'+Re(ge.substr(1,ge.length-2))+'"'];var vn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ge);if(vn)return Ye(ge.substr(0,vn.index)).concat(Ye(vn[1])).concat(Ye(ge.substr(vn.index+vn[0].length)));var Vn=ge.split(".");if(Vn.length===1)return['"'+Re(ge)+'"'];for(var kn=[],bn=0;bn<Vn.length;++bn)kn=kn.concat(Ye(Vn[bn]));return kn}function tt(ge){return"["+Ye(ge).join("][")+"]"}function gt(ge,_e){return new $e(ge,tt(_e+""))}function kt(ge){return typeof ge=="function"&&!ge._reglType||ge instanceof $e}function Pe(ge,_e){if(typeof ge=="function")return new $e(Ln,ge);if(typeof ge=="number"||typeof ge=="boolean")return new $e(yr,ge);if(Array.isArray(ge))return new $e(Un,ge.map(function(Et,vn){return Pe(Et,_e+"["+vn+"]")}));if(ge instanceof $e)return ge;Ce(!1,"invalid option type in uniform "+_e)}var pt={DynamicVariable:$e,define:gt,isDynamic:kt,unbox:Pe,accessor:tt},st={next:typeof requestAnimationFrame=="function"?function(ge){return requestAnimationFrame(ge)}:function(ge){return setTimeout(ge,16)},cancel:typeof cancelAnimationFrame=="function"?function(ge){return cancelAnimationFrame(ge)}:clearTimeout},Ft=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function An(){var ge={"":0},_e=[""];return{id:function(vn){var Vn=ge[vn];return Vn||(Vn=ge[vn]=_e.length,_e.push(vn),Vn)},str:function(vn){return _e[vn]}}}function Gn(ge,_e,Et){var vn=document.createElement("canvas");f(vn.style,{border:0,margin:0,padding:0,top:0,left:0}),ge.appendChild(vn),ge===document.body&&(vn.style.position="absolute",f(ge.style,{margin:0,padding:0}));function Vn(){var ur=window.innerWidth,Sn=window.innerHeight;if(ge!==document.body){var mr=ge.getBoundingClientRect();ur=mr.right-mr.left,Sn=mr.bottom-mr.top}vn.width=Et*ur,vn.height=Et*Sn,f(vn.style,{width:ur+"px",height:Sn+"px"})}var kn;ge!==document.body&&typeof ResizeObserver=="function"?(kn=new ResizeObserver(function(){setTimeout(Vn)}),kn.observe(ge)):window.addEventListener("resize",Vn,!1);function bn(){kn?kn.disconnect():window.removeEventListener("resize",Vn),ge.removeChild(vn)}return Vn(),{canvas:vn,onDestroy:bn}}function Yn(ge,_e){function Et(vn){try{return ge.getContext(vn,_e)}catch(Vn){return null}}return Et("webgl")||Et("experimental-webgl")||Et("webgl-experimental")}function vr(ge){return typeof ge.nodeName=="string"&&typeof ge.appendChild=="function"&&typeof ge.getBoundingClientRect=="function"}function zr(ge){return typeof ge.drawArrays=="function"||typeof ge.drawElements=="function"}function et(ge){return typeof ge=="string"?ge.split():(Ce(Array.isArray(ge),"invalid extension array"),ge)}function wt(ge){return typeof ge=="string"?(Ce(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ge)):ge}function lt(ge){var _e=ge||{},Et,vn,Vn,kn,bn={},ur=[],Sn=[],mr=typeof window=="undefined"?1:window.devicePixelRatio,Er=!1,Cr=function(mn){mn&&Ce.raise(mn)},Ir=function(){};if(typeof _e=="string"?(Ce(typeof document!="undefined","selector queries only supported in DOM enviroments"),Et=document.querySelector(_e),Ce(Et,"invalid query string for element")):typeof _e=="object"?vr(_e)?Et=_e:zr(_e)?(kn=_e,Vn=kn.canvas):(Ce.constructor(_e),"gl"in _e?kn=_e.gl:"canvas"in _e?Vn=wt(_e.canvas):"container"in _e&&(vn=wt(_e.container)),"attributes"in _e&&(bn=_e.attributes,Ce.type(bn,"object","invalid context attributes")),"extensions"in _e&&(ur=et(_e.extensions)),"optionalExtensions"in _e&&(Sn=et(_e.optionalExtensions)),"onDone"in _e&&(Ce.type(_e.onDone,"function","invalid or missing onDone callback"),Cr=_e.onDone),"profile"in _e&&(Er=!!_e.profile),"pixelRatio"in _e&&(mr=+_e.pixelRatio,Ce(mr>0,"invalid pixel ratio"))):Ce.raise("invalid arguments to regl"),Et&&(Et.nodeName.toLowerCase()==="canvas"?Vn=Et:vn=Et),!kn){if(!Vn){Ce(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Mr=Gn(vn||document.body,Cr,mr);if(!Mr)return null;Vn=Mr.canvas,Ir=Mr.onDestroy}bn.premultipliedAlpha===void 0&&(bn.premultipliedAlpha=!0),kn=Yn(Vn,bn)}return kn?{gl:kn,canvas:Vn,container:vn,extensions:ur,optionalExtensions:Sn,pixelRatio:mr,profile:Er,onDone:Cr,onDestroy:Ir}:(Ir(),Cr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Vt(ge,_e){var Et={};function vn(bn){Ce.type(bn,"string","extension name must be string");var ur=bn.toLowerCase(),Sn;try{Sn=Et[ur]=ge.getExtension(ur)}catch(mr){}return!!Sn}for(var Vn=0;Vn<_e.extensions.length;++Vn){var kn=_e.extensions[Vn];if(!vn(kn))return _e.onDestroy(),_e.onDone('"'+kn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return _e.optionalExtensions.forEach(vn),{extensions:Et,restore:function(){Object.keys(Et).forEach(function(ur){if(Et[ur]&&!vn(ur))throw new Error("(regl): error restoring extension "+ur)})}}}function cn(ge,_e){for(var Et=Array(ge),vn=0;vn<ge;++vn)Et[vn]=_e(vn);return Et}var We=5120,Jt=5121,vt=5122,Kn=5123,kr=5124,Ur=5125,fa=5126;function ea(ge){for(var _e=16;_e<=1<<28;_e*=16)if(ge<=_e)return _e;return 0}function ia(ge){var _e,Et;return _e=(ge>65535)<<4,ge>>>=_e,Et=(ge>255)<<3,ge>>>=Et,_e|=Et,Et=(ge>15)<<2,ge>>>=Et,_e|=Et,Et=(ge>3)<<1,ge>>>=Et,_e|=Et,_e|ge>>1}function Va(){var ge=cn(8,function(){return[]});function _e(kn){var bn=ea(kn),ur=ge[ia(bn)>>2];return ur.length>0?ur.pop():new ArrayBuffer(bn)}function Et(kn){ge[ia(kn.byteLength)>>2].push(kn)}function vn(kn,bn){var ur=null;switch(kn){case We:ur=new Int8Array(_e(bn),0,bn);break;case Jt:ur=new Uint8Array(_e(bn),0,bn);break;case vt:ur=new Int16Array(_e(2*bn),0,bn);break;case Kn:ur=new Uint16Array(_e(2*bn),0,bn);break;case kr:ur=new Int32Array(_e(4*bn),0,bn);break;case Ur:ur=new Uint32Array(_e(4*bn),0,bn);break;case fa:ur=new Float32Array(_e(4*bn),0,bn);break;default:return null}return ur.length!==bn?ur.subarray(0,bn):ur}function Vn(kn){Et(kn.buffer)}return{alloc:_e,free:Et,allocType:vn,freeType:Vn}}var da=Va();da.zero=Va();var $a=3408,di=3410,Da=3411,Ya=3412,ro=3413,ys=3414,Co=3415,Gs=33901,Ho=33902,rs=3379,as=3386,_s=34921,Js=36347,fo=36348,To=35661,bs=35660,bo=34930,Es=36349,vu=34076,Zs=34024,Ko=7936,is=7937,cs=7938,qs=35724,Ju=34047,eu=36063,Wi=34852,ji=3553,_o=34067,mu=34069,Pl=33984,Fo=6408,ks=5126,gu=5121,Jl=36160,Zl=36053,Iu=36064,yu=16384,os=function(_e,Et){var vn=1;Et.ext_texture_filter_anisotropic&&(vn=_e.getParameter(Ju));var Vn=1,kn=1;Et.webgl_draw_buffers&&(Vn=_e.getParameter(Wi),kn=_e.getParameter(eu));var bn=!!Et.oes_texture_float;if(bn){var ur=_e.createTexture();_e.bindTexture(ji,ur),_e.texImage2D(ji,0,Fo,1,1,0,Fo,ks,null);var Sn=_e.createFramebuffer();if(_e.bindFramebuffer(Jl,Sn),_e.framebufferTexture2D(Jl,Iu,ji,ur,0),_e.bindTexture(ji,null),_e.checkFramebufferStatus(Jl)!==Zl)bn=!1;else{_e.viewport(0,0,1,1),_e.clearColor(1,0,0,1),_e.clear(yu);var mr=da.allocType(ks,4);_e.readPixels(0,0,1,1,Fo,ks,mr),_e.getError()?bn=!1:(_e.deleteFramebuffer(Sn),_e.deleteTexture(ur),bn=mr[0]===1),da.freeType(mr)}}var Er=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Cr=!0;if(!Er){var Ir=_e.createTexture(),Mr=da.allocType(gu,36);_e.activeTexture(Pl),_e.bindTexture(_o,Ir),_e.texImage2D(mu,0,Fo,3,3,0,Fo,gu,Mr),da.freeType(Mr),_e.bindTexture(_o,null),_e.deleteTexture(Ir),Cr=!_e.getError()}return{colorBits:[_e.getParameter(di),_e.getParameter(Da),_e.getParameter(Ya),_e.getParameter(ro)],depthBits:_e.getParameter(ys),stencilBits:_e.getParameter(Co),subpixelBits:_e.getParameter($a),extensions:Object.keys(Et).filter(function(xr){return!!Et[xr]}),maxAnisotropic:vn,maxDrawbuffers:Vn,maxColorAttachments:kn,pointSizeDims:_e.getParameter(Gs),lineWidthDims:_e.getParameter(Ho),maxViewportDims:_e.getParameter(as),maxCombinedTextureUnits:_e.getParameter(To),maxCubeMapSize:_e.getParameter(vu),maxRenderbufferSize:_e.getParameter(Zs),maxTextureUnits:_e.getParameter(bo),maxTextureSize:_e.getParameter(rs),maxAttributes:_e.getParameter(_s),maxVertexUniforms:_e.getParameter(Js),maxVertexTextureUnits:_e.getParameter(bs),maxVaryingVectors:_e.getParameter(fo),maxFragmentUniforms:_e.getParameter(Es),glsl:_e.getParameter(qs),renderer:_e.getParameter(is),vendor:_e.getParameter(Ko),version:_e.getParameter(cs),readFloat:bn,npotTextureCube:Cr}};function Bi(ge){return!!ge&&typeof ge=="object"&&Array.isArray(ge.shape)&&Array.isArray(ge.stride)&&typeof ge.offset=="number"&&ge.shape.length===ge.stride.length&&(Array.isArray(ge.data)||g(ge.data))}var Mi=function(_e){return Object.keys(_e).map(function(Et){return _e[Et]})},Bo={shape:tu,flatten:ec};function ds(ge,_e,Et){for(var vn=0;vn<_e;++vn)Et[vn]=ge[vn]}function Zu(ge,_e,Et,vn){for(var Vn=0,kn=0;kn<_e;++kn)for(var bn=ge[kn],ur=0;ur<Et;++ur)vn[Vn++]=bn[ur]}function Lu(ge,_e,Et,vn,Vn,kn){for(var bn=kn,ur=0;ur<_e;++ur)for(var Sn=ge[ur],mr=0;mr<Et;++mr)for(var Er=Sn[mr],Cr=0;Cr<vn;++Cr)Vn[bn++]=Er[Cr]}function ql(ge,_e,Et,vn,Vn){for(var kn=1,bn=Et+1;bn<_e.length;++bn)kn*=_e[bn];var ur=_e[Et];if(_e.length-Et===4){var Sn=_e[Et+1],mr=_e[Et+2],Er=_e[Et+3];for(bn=0;bn<ur;++bn)Lu(ge[bn],Sn,mr,Er,vn,Vn),Vn+=kn}else for(bn=0;bn<ur;++bn)ql(ge[bn],_e,Et+1,vn,Vn),Vn+=kn}function ec(ge,_e,Et,vn){var Vn=1;if(_e.length)for(var kn=0;kn<_e.length;++kn)Vn*=_e[kn];else Vn=0;var bn=vn||da.allocType(Et,Vn);switch(_e.length){case 0:break;case 1:ds(ge,_e[0],bn);break;case 2:Zu(ge,_e[0],_e[1],bn);break;case 3:Lu(ge,_e[0],_e[1],_e[2],bn,0);break;default:ql(ge,_e,0,bn,0)}return bn}function tu(ge){for(var _e=[],Et=ge;Et.length;Et=Et[0])_e.push(Et.length);return _e}var Ns={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},nu=5120,pl=5122,Wc=5124,Hc=5121,Il=5123,vl=5125,xc=5126,Ll=5126,bu={int8:nu,int16:pl,int32:Wc,uint8:Hc,uint16:Il,uint32:vl,float:xc,float32:Ll},tc=35048,wc=35040,Eu={dynamic:tc,stream:wc,static:35044},nc=Bo.flatten,ml=Bo.shape,gl=35044,jl=35040,yl=5121,Cc=5126,$o=[];$o[5120]=1,$o[5122]=2,$o[5124]=4,$o[5121]=1,$o[5123]=2,$o[5125]=4,$o[5126]=4;function Qa(ge){return Ns[Object.prototype.toString.call(ge)]|0}function Rs(ge,_e){for(var Et=0;Et<_e.length;++Et)ge[Et]=_e[Et]}function Pa(ge,_e,Et,vn,Vn,kn,bn){for(var ur=0,Sn=0;Sn<Et;++Sn)for(var mr=0;mr<vn;++mr)ge[ur++]=_e[Vn*Sn+kn*mr+bn]}function qu(ge,_e,Et,vn){var Vn=0,kn={};function bn(mn){this.id=Vn++,this.buffer=ge.createBuffer(),this.type=mn,this.usage=gl,this.byteLength=0,this.dimension=1,this.dtype=yl,this.persistentData=null,Et.profile&&(this.stats={size:0})}bn.prototype.bind=function(){ge.bindBuffer(this.type,this.buffer)},bn.prototype.destroy=function(){Ir(this)};var ur=[];function Sn(mn,fn){var br=ur.pop();return br||(br=new bn(mn)),br.bind(),Cr(br,fn,jl,0,1,!1),br}function mr(mn){ur.push(mn)}function Er(mn,fn,br){mn.byteLength=fn.byteLength,ge.bufferData(mn.type,fn,br)}function Cr(mn,fn,br,Fr,Pn,na){var dr;if(mn.usage=br,Array.isArray(fn)){if(mn.dtype=Fr||Cc,fn.length>0){var lr;if(Array.isArray(fn[0])){dr=ml(fn);for(var ir=1,fr=1;fr<dr.length;++fr)ir*=dr[fr];mn.dimension=ir,lr=nc(fn,dr,mn.dtype),Er(mn,lr,br),na?mn.persistentData=lr:da.freeType(lr)}else if(typeof fn[0]=="number"){mn.dimension=Pn;var oa=da.allocType(mn.dtype,fn.length);Rs(oa,fn),Er(mn,oa,br),na?mn.persistentData=oa:da.freeType(oa)}else g(fn[0])?(mn.dimension=fn[0].length,mn.dtype=Fr||Qa(fn[0])||Cc,lr=nc(fn,[fn.length,fn[0].length],mn.dtype),Er(mn,lr,br),na?mn.persistentData=lr:da.freeType(lr)):Ce.raise("invalid buffer data")}}else if(g(fn))mn.dtype=Fr||Qa(fn),mn.dimension=Pn,Er(mn,fn,br),na&&(mn.persistentData=new Uint8Array(new Uint8Array(fn.buffer)));else if(Bi(fn)){dr=fn.shape;var Ma=fn.stride,Pr=fn.offset,Tr=0,er=0,ha=0,Wa=0;dr.length===1?(Tr=dr[0],er=1,ha=Ma[0],Wa=0):dr.length===2?(Tr=dr[0],er=dr[1],ha=Ma[0],Wa=Ma[1]):Ce.raise("invalid shape"),mn.dtype=Fr||Qa(fn.data)||Cc,mn.dimension=er;var Jr=da.allocType(mn.dtype,Tr*er);Pa(Jr,fn.data,Tr,er,ha,Wa,Pr),Er(mn,Jr,br),na?mn.persistentData=Jr:da.freeType(Jr)}else fn instanceof ArrayBuffer?(mn.dtype=yl,mn.dimension=Pn,Er(mn,fn,br),na&&(mn.persistentData=new Uint8Array(new Uint8Array(fn)))):Ce.raise("invalid buffer data")}function Ir(mn){_e.bufferCount--,vn(mn);var fn=mn.buffer;Ce(fn,"buffer must not be deleted already"),ge.deleteBuffer(fn),mn.buffer=null,delete kn[mn.id]}function Mr(mn,fn,br,Fr){_e.bufferCount++;var Pn=new bn(fn);kn[Pn.id]=Pn;function na(ir){var fr=gl,oa=null,Ma=0,Pr=0,Tr=1;return Array.isArray(ir)||g(ir)||Bi(ir)||ir instanceof ArrayBuffer?oa=ir:typeof ir=="number"?Ma=ir|0:ir&&(Ce.type(ir,"object","buffer arguments must be an object, a number or an array"),"data"in ir&&(Ce(oa===null||Array.isArray(oa)||g(oa)||Bi(oa),"invalid data for buffer"),oa=ir.data),"usage"in ir&&(Ce.parameter(ir.usage,Eu,"invalid buffer usage"),fr=Eu[ir.usage]),"type"in ir&&(Ce.parameter(ir.type,bu,"invalid buffer type"),Pr=bu[ir.type]),"dimension"in ir&&(Ce.type(ir.dimension,"number","invalid dimension"),Tr=ir.dimension|0),"length"in ir&&(Ce.nni(Ma,"buffer length must be a nonnegative integer"),Ma=ir.length|0)),Pn.bind(),oa?Cr(Pn,oa,fr,Pr,Tr,Fr):(Ma&&ge.bufferData(Pn.type,Ma,fr),Pn.dtype=Pr||yl,Pn.usage=fr,Pn.dimension=Tr,Pn.byteLength=Ma),Et.profile&&(Pn.stats.size=Pn.byteLength*$o[Pn.dtype]),na}function dr(ir,fr){Ce(fr+ir.byteLength<=Pn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ir.byteLength+" starting from offset "+fr+" to a buffer of size "+Pn.byteLength),ge.bufferSubData(Pn.type,fr,ir)}function lr(ir,fr){var oa=(fr||0)|0,Ma;if(Pn.bind(),g(ir)||ir instanceof ArrayBuffer)dr(ir,oa);else if(Array.isArray(ir)){if(ir.length>0)if(typeof ir[0]=="number"){var Pr=da.allocType(Pn.dtype,ir.length);Rs(Pr,ir),dr(Pr,oa),da.freeType(Pr)}else if(Array.isArray(ir[0])||g(ir[0])){Ma=ml(ir);var Tr=nc(ir,Ma,Pn.dtype);dr(Tr,oa),da.freeType(Tr)}else Ce.raise("invalid buffer data")}else if(Bi(ir)){Ma=ir.shape;var er=ir.stride,ha=0,Wa=0,Jr=0,Ja=0;Ma.length===1?(ha=Ma[0],Wa=1,Jr=er[0],Ja=0):Ma.length===2?(ha=Ma[0],Wa=Ma[1],Jr=er[0],Ja=er[1]):Ce.raise("invalid shape");var Aa=Array.isArray(ir.data)?Pn.dtype:Qa(ir.data),ei=da.allocType(Aa,ha*Wa);Pa(ei,ir.data,ha,Wa,Jr,Ja,ir.offset),dr(ei,oa),da.freeType(ei)}else Ce.raise("invalid data for buffer subdata");return na}return br||na(mn),na._reglType="buffer",na._buffer=Pn,na.subdata=lr,Et.profile&&(na.stats=Pn.stats),na.destroy=function(){Ir(Pn)},na}function xr(){Mi(kn).forEach(function(mn){mn.buffer=ge.createBuffer(),ge.bindBuffer(mn.type,mn.buffer),ge.bufferData(mn.type,mn.persistentData||mn.byteLength,mn.usage)})}return Et.profile&&(_e.getTotalBufferSize=function(){var mn=0;return Object.keys(kn).forEach(function(fn){mn+=kn[fn].stats.size}),mn}),{create:Mr,createStream:Sn,destroyStream:mr,clear:function(){Mi(kn).forEach(Ir),ur.forEach(Ir)},getBuffer:function(fn){return fn&&fn._buffer instanceof bn?fn._buffer:null},restore:xr,_initBuffer:Cr}}var xu=0,$=0,R=1,G=1,Y=4,fe=4,Se={points:xu,point:$,lines:R,line:G,triangles:Y,triangle:fe,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ie=0,Ze=1,Pt=4,zt=5120,Cn=5121,Sr=5122,Dr=5123,en=5124,sr=5125,Kr=34963,ma=35040,sa=35044;function Yo(ge,_e,Et,vn){var Vn={},kn=0,bn={uint8:Cn,uint16:Dr};_e.oes_element_index_uint&&(bn.uint32=sr);function ur(xr){this.id=kn++,Vn[this.id]=this,this.buffer=xr,this.primType=Pt,this.vertCount=0,this.type=0}ur.prototype.bind=function(){this.buffer.bind()};var Sn=[];function mr(xr){var mn=Sn.pop();return mn||(mn=new ur(Et.create(null,Kr,!0,!1)._buffer)),Cr(mn,xr,ma,-1,-1,0,0),mn}function Er(xr){Sn.push(xr)}function Cr(xr,mn,fn,br,Fr,Pn,na){xr.buffer.bind();var dr;if(mn){var lr=na;!na&&(!g(mn)||Bi(mn)&&!g(mn.data))&&(lr=_e.oes_element_index_uint?sr:Dr),Et._initBuffer(xr.buffer,mn,fn,lr,3)}else ge.bufferData(Kr,Pn,fn),xr.buffer.dtype=dr||Cn,xr.buffer.usage=fn,xr.buffer.dimension=3,xr.buffer.byteLength=Pn;if(dr=na,!na){switch(xr.buffer.dtype){case Cn:case zt:dr=Cn;break;case Dr:case Sr:dr=Dr;break;case sr:case en:dr=sr;break;default:Ce.raise("unsupported type for element array")}xr.buffer.dtype=dr}xr.type=dr,Ce(dr!==sr||!!_e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ir=Fr;ir<0&&(ir=xr.buffer.byteLength,dr===Dr?ir>>=1:dr===sr&&(ir>>=2)),xr.vertCount=ir;var fr=br;if(br<0){fr=Pt;var oa=xr.buffer.dimension;oa===1&&(fr=Ie),oa===2&&(fr=Ze),oa===3&&(fr=Pt)}xr.primType=fr}function Ir(xr){vn.elementsCount--,Ce(xr.buffer!==null,"must not double destroy elements"),delete Vn[xr.id],xr.buffer.destroy(),xr.buffer=null}function Mr(xr,mn){var fn=Et.create(null,Kr,!0),br=new ur(fn._buffer);vn.elementsCount++;function Fr(Pn){if(!Pn)fn(),br.primType=Pt,br.vertCount=0,br.type=Cn;else if(typeof Pn=="number")fn(Pn),br.primType=Pt,br.vertCount=Pn|0,br.type=Cn;else{var na=null,dr=sa,lr=-1,ir=-1,fr=0,oa=0;Array.isArray(Pn)||g(Pn)||Bi(Pn)?na=Pn:(Ce.type(Pn,"object","invalid arguments for elements"),"data"in Pn&&(na=Pn.data,Ce(Array.isArray(na)||g(na)||Bi(na),"invalid data for element buffer")),"usage"in Pn&&(Ce.parameter(Pn.usage,Eu,"invalid element buffer usage"),dr=Eu[Pn.usage]),"primitive"in Pn&&(Ce.parameter(Pn.primitive,Se,"invalid element buffer primitive"),lr=Se[Pn.primitive]),"count"in Pn&&(Ce(typeof Pn.count=="number"&&Pn.count>=0,"invalid vertex count for elements"),ir=Pn.count|0),"type"in Pn&&(Ce.parameter(Pn.type,bn,"invalid buffer type"),oa=bn[Pn.type]),"length"in Pn?fr=Pn.length|0:(fr=ir,oa===Dr||oa===Sr?fr*=2:(oa===sr||oa===en)&&(fr*=4))),Cr(br,na,dr,lr,ir,fr,oa)}return Fr}return Fr(xr),Fr._reglType="elements",Fr._elements=br,Fr.subdata=function(Pn,na){return fn.subdata(Pn,na),Fr},Fr.destroy=function(){Ir(br)},Fr}return{create:Mr,createStream:mr,destroyStream:Er,getElements:function(mn){return typeof mn=="function"&&mn._elements instanceof ur?mn._elements:null},clear:function(){Mi(Vn).forEach(Ir)}}}var ka=new Float32Array(1),bi=new Uint32Array(ka.buffer),Na=5123;function Sa(ge){for(var _e=da.allocType(Na,ge.length),Et=0;Et<ge.length;++Et)if(isNaN(ge[Et]))_e[Et]=65535;else if(ge[Et]===Infinity)_e[Et]=31744;else if(ge[Et]===-Infinity)_e[Et]=64512;else{ka[0]=ge[Et];var vn=bi[0],Vn=vn>>>31<<15,kn=(vn<<1>>>24)-127,bn=vn>>13&(1<<10)-1;if(kn<-24)_e[Et]=Vn;else if(kn<-14){var ur=-14-kn;_e[Et]=Vn+(bn+(1<<10)>>ur)}else kn>15?_e[Et]=Vn+31744:_e[Et]=Vn+(kn+15<<10)+bn}return _e}function rt(ge){return Array.isArray(ge)||g(ge)}var Rn=function(_e){return!(_e&_e-1)&&!!_e},Qr=34467,mi=3553,Hi=34067,ho=34069,Ao=6408,uo=6406,Io=6407,Lo=6409,Vi=6410,wu=32854,Qo=32855,el=36194,ua=32819,fs=32820,Cu=33635,Ps=34042,xs=6402,ju=34041,ru=35904,Is=35906,au=36193,Uu=33776,Fu=33777,ws=33778,hs=33779,Eo=35986,Ul=35987,Ua=34798,b=35840,N=35841,te=35842,ee=35843,ce=36196,Ve=5121,ft=5123,yt=5125,Ct=5126,Xt=10242,un=10243,_n=10497,Fn=33071,jn=33648,Ar=10240,Nr=10241,Wn=9728,Yr=9729,Xa=9984,Ta=9985,xa=9986,wa=9987,Oa=33170,Ki=4352,_i=4353,$i=4354,ki=34046,Ui=3317,bt=37440,Je=37441,It=37443,Dn=37444,hn=33984,rr=[Xa,xa,Ta,wa],Or=[0,Lo,Vi,Io,Ao],jr={};jr[Lo]=jr[uo]=jr[xs]=1,jr[ju]=jr[Vi]=2,jr[Io]=jr[ru]=3,jr[Ao]=jr[Is]=4;function ta(ge){return"[object "+ge+"]"}var Gr=ta("HTMLCanvasElement"),za=ta("OffscreenCanvas"),Fa=ta("CanvasRenderingContext2D"),fi=ta("ImageBitmap"),Zi=ta("HTMLImageElement"),zi=ta("HTMLVideoElement"),ai=Object.keys(Ns).concat([Gr,za,Fa,fi,Zi,zi]),Yi=[];Yi[Ve]=1,Yi[Ct]=4,Yi[au]=2,Yi[ft]=2,Yi[yt]=4;var Ei=[];Ei[wu]=2,Ei[Qo]=2,Ei[el]=2,Ei[ju]=4,Ei[Uu]=.5,Ei[Fu]=.5,Ei[ws]=1,Ei[hs]=1,Ei[Eo]=.5,Ei[Ul]=1,Ei[Ua]=1,Ei[b]=.5,Ei[N]=.25,Ei[te]=.5,Ei[ee]=.25,Ei[ce]=.5;function ao(ge){return Array.isArray(ge)&&(ge.length===0||typeof ge[0]=="number")}function ps(ge){if(!Array.isArray(ge))return!1;var _e=ge.length;return!(_e===0||!rt(ge[0]))}function iu(ge){return Object.prototype.toString.call(ge)}function Xs(ge){return iu(ge)===Gr}function Cs(ge){return iu(ge)===za}function Of(ge){return iu(ge)===Fa}function rc(ge){return iu(ge)===fi}function Kc(ge){return iu(ge)===Zi}function $c(ge){return iu(ge)===zi}function Yc(ge){if(!ge)return!1;var _e=iu(ge);return ai.indexOf(_e)>=0?!0:ao(ge)||ps(ge)||Bi(ge)}function tf(ge){return Ns[Object.prototype.toString.call(ge)]|0}function Sf(ge,_e){var Et=_e.length;switch(ge.type){case Ve:case ft:case yt:case Ct:var vn=da.allocType(ge.type,Et);vn.set(_e),ge.data=vn;break;case au:ge.data=Sa(_e);break;default:Ce.raise("unsupported texture type, must specify a typed array")}}function Df(ge,_e){return da.allocType(ge.type===au?Ct:ge.type,_e)}function nf(ge,_e){ge.type===au?(ge.data=Sa(_e),da.freeType(_e)):ge.data=_e}function Zf(ge,_e,Et,vn,Vn,kn){for(var bn=ge.width,ur=ge.height,Sn=ge.channels,mr=bn*ur*Sn,Er=Df(ge,mr),Cr=0,Ir=0;Ir<ur;++Ir)for(var Mr=0;Mr<bn;++Mr)for(var xr=0;xr<Sn;++xr)Er[Cr++]=_e[Et*Mr+vn*Ir+Vn*xr+kn];nf(ge,Er)}function Fl(ge,_e,Et,vn,Vn,kn){var bn;if(typeof Ei[ge]!="undefined"?bn=Ei[ge]:bn=jr[ge]*Yi[_e],kn&&(bn*=6),Vn){for(var ur=0,Sn=Et;Sn>=1;)ur+=bn*Sn*Sn,Sn/=2;return ur}else return bn*Et*vn}function qf(ge,_e,Et,vn,Vn,kn,bn){var ur={"don't care":Ki,"dont care":Ki,nice:$i,fast:_i},Sn={repeat:_n,clamp:Fn,mirror:jn},mr={nearest:Wn,linear:Yr},Er=f({mipmap:wa,"nearest mipmap nearest":Xa,"linear mipmap nearest":Ta,"nearest mipmap linear":xa,"linear mipmap linear":wa},mr),Cr={none:0,browser:Dn},Ir={uint8:Ve,rgba4:ua,rgb565:Cu,"rgb5 a1":fs},Mr={alpha:uo,luminance:Lo,"luminance alpha":Vi,rgb:Io,rgba:Ao,rgba4:wu,"rgb5 a1":Qo,rgb565:el},xr={};_e.ext_srgb&&(Mr.srgb=ru,Mr.srgba=Is),_e.oes_texture_float&&(Ir.float32=Ir.float=Ct),_e.oes_texture_half_float&&(Ir.float16=Ir["half float"]=au),_e.webgl_depth_texture&&(f(Mr,{depth:xs,"depth stencil":ju}),f(Ir,{uint16:ft,uint32:yt,"depth stencil":Ps})),_e.webgl_compressed_texture_s3tc&&f(xr,{"rgb s3tc dxt1":Uu,"rgba s3tc dxt1":Fu,"rgba s3tc dxt3":ws,"rgba s3tc dxt5":hs}),_e.webgl_compressed_texture_atc&&f(xr,{"rgb atc":Eo,"rgba atc explicit alpha":Ul,"rgba atc interpolated alpha":Ua}),_e.webgl_compressed_texture_pvrtc&&f(xr,{"rgb pvrtc 4bppv1":b,"rgb pvrtc 2bppv1":N,"rgba pvrtc 4bppv1":te,"rgba pvrtc 2bppv1":ee}),_e.webgl_compressed_texture_etc1&&(xr["rgb etc1"]=ce);var mn=Array.prototype.slice.call(ge.getParameter(Qr));Object.keys(xr).forEach(function(ht){var On=xr[ht];mn.indexOf(On)>=0&&(Mr[ht]=On)});var fn=Object.keys(Mr);Et.textureFormats=fn;var br=[];Object.keys(Mr).forEach(function(ht){var On=Mr[ht];br[On]=ht});var Fr=[];Object.keys(Ir).forEach(function(ht){var On=Ir[ht];Fr[On]=ht});var Pn=[];Object.keys(mr).forEach(function(ht){var On=mr[ht];Pn[On]=ht});var na=[];Object.keys(Er).forEach(function(ht){var On=Er[ht];na[On]=ht});var dr=[];Object.keys(Sn).forEach(function(ht){var On=Sn[ht];dr[On]=ht});var lr=fn.reduce(function(ht,On){var ln=Mr[On];return ln===Lo||ln===uo||ln===Lo||ln===Vi||ln===xs||ln===ju||_e.ext_srgb&&(ln===ru||ln===Is)?ht[ln]=ln:ln===Qo||On.indexOf("rgba")>=0?ht[ln]=Ao:ht[ln]=Io,ht},{});function ir(){this.internalformat=Ao,this.format=Ao,this.type=Ve,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Dn,this.width=0,this.height=0,this.channels=0}function fr(ht,On){ht.internalformat=On.internalformat,ht.format=On.format,ht.type=On.type,ht.compressed=On.compressed,ht.premultiplyAlpha=On.premultiplyAlpha,ht.flipY=On.flipY,ht.unpackAlignment=On.unpackAlignment,ht.colorSpace=On.colorSpace,ht.width=On.width,ht.height=On.height,ht.channels=On.channels}function oa(ht,On){if(typeof On!="object"||!On)return;if("premultiplyAlpha"in On&&(Ce.type(On.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ht.premultiplyAlpha=On.premultiplyAlpha),"flipY"in On&&(Ce.type(On.flipY,"boolean","invalid texture flip"),ht.flipY=On.flipY),"alignment"in On&&(Ce.oneOf(On.alignment,[1,2,4,8],"invalid texture unpack alignment"),ht.unpackAlignment=On.alignment),"colorSpace"in On&&(Ce.parameter(On.colorSpace,Cr,"invalid colorSpace"),ht.colorSpace=Cr[On.colorSpace]),"type"in On){var ln=On.type;Ce(_e.oes_texture_float||!(ln==="float"||ln==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ce(_e.oes_texture_half_float||!(ln==="half float"||ln==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ce(_e.webgl_depth_texture||!(ln==="uint16"||ln==="uint32"||ln==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ce.parameter(ln,Ir,"invalid texture type"),ht.type=Ir[ln]}var Hr=ht.width,Ga=ht.height,ot=ht.channels,Ge=!1;"shape"in On?(Ce(Array.isArray(On.shape)&&On.shape.length>=2,"shape must be an array"),Hr=On.shape[0],Ga=On.shape[1],On.shape.length===3&&(ot=On.shape[2],Ce(ot>0&&ot<=4,"invalid number of channels"),Ge=!0),Ce(Hr>=0&&Hr<=Et.maxTextureSize,"invalid width"),Ce(Ga>=0&&Ga<=Et.maxTextureSize,"invalid height")):("radius"in On&&(Hr=Ga=On.radius,Ce(Hr>=0&&Hr<=Et.maxTextureSize,"invalid radius")),"width"in On&&(Hr=On.width,Ce(Hr>=0&&Hr<=Et.maxTextureSize,"invalid width")),"height"in On&&(Ga=On.height,Ce(Ga>=0&&Ga<=Et.maxTextureSize,"invalid height")),"channels"in On&&(ot=On.channels,Ce(ot>0&&ot<=4,"invalid number of channels"),Ge=!0)),ht.width=Hr|0,ht.height=Ga|0,ht.channels=ot|0;var Nt=!1;if("format"in On){var tn=On.format;Ce(_e.webgl_depth_texture||!(tn==="depth"||tn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ce.parameter(tn,Mr,"invalid texture format");var nn=ht.internalformat=Mr[tn];ht.format=lr[nn],tn in Ir&&("type"in On||(ht.type=Ir[tn])),tn in xr&&(ht.compressed=!0),Nt=!0}!Ge&&Nt?ht.channels=jr[ht.format]:Ge&&!Nt?ht.channels!==Or[ht.format]&&(ht.format=ht.internalformat=Or[ht.channels]):Nt&&Ge&&Ce(ht.channels===jr[ht.format],"number of channels inconsistent with specified format")}function Ma(ht){ge.pixelStorei(bt,ht.flipY),ge.pixelStorei(Je,ht.premultiplyAlpha),ge.pixelStorei(It,ht.colorSpace),ge.pixelStorei(Ui,ht.unpackAlignment)}function Pr(){ir.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Tr(ht,On){var ln=null;if(Yc(On)?ln=On:On&&(Ce.type(On,"object","invalid pixel data type"),oa(ht,On),"x"in On&&(ht.xOffset=On.x|0),"y"in On&&(ht.yOffset=On.y|0),Yc(On.data)&&(ln=On.data)),Ce(!ht.compressed||ln instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),On.copy){Ce(!ln,"can not specify copy and data field for the same texture");var Hr=Vn.viewportWidth,Ga=Vn.viewportHeight;ht.width=ht.width||Hr-ht.xOffset,ht.height=ht.height||Ga-ht.yOffset,ht.needsCopy=!0,Ce(ht.xOffset>=0&&ht.xOffset<Hr&&ht.yOffset>=0&&ht.yOffset<Ga&&ht.width>0&&ht.width<=Hr&&ht.height>0&&ht.height<=Ga,"copy texture read out of bounds")}else if(!ln)ht.width=ht.width||1,ht.height=ht.height||1,ht.channels=ht.channels||4;else if(g(ln))ht.channels=ht.channels||4,ht.data=ln,!("type"in On)&&ht.type===Ve&&(ht.type=tf(ln));else if(ao(ln))ht.channels=ht.channels||4,Sf(ht,ln),ht.alignment=1,ht.needsFree=!0;else if(Bi(ln)){var ot=ln.data;!Array.isArray(ot)&&ht.type===Ve&&(ht.type=tf(ot));var Ge=ln.shape,Nt=ln.stride,tn,nn,jt,Lt,Yt,nt;Ge.length===3?(jt=Ge[2],nt=Nt[2]):(Ce(Ge.length===2,"invalid ndarray pixel data, must be 2 or 3D"),jt=1,nt=1),tn=Ge[0],nn=Ge[1],Lt=Nt[0],Yt=Nt[1],ht.alignment=1,ht.width=tn,ht.height=nn,ht.channels=jt,ht.format=ht.internalformat=Or[jt],ht.needsFree=!0,Zf(ht,ot,Lt,Yt,nt,ln.offset)}else if(Xs(ln)||Cs(ln)||Of(ln))Xs(ln)||Cs(ln)?ht.element=ln:ht.element=ln.canvas,ht.width=ht.element.width,ht.height=ht.element.height,ht.channels=4;else if(rc(ln))ht.element=ln,ht.width=ln.width,ht.height=ln.height,ht.channels=4;else if(Kc(ln))ht.element=ln,ht.width=ln.naturalWidth,ht.height=ln.naturalHeight,ht.channels=4;else if($c(ln))ht.element=ln,ht.width=ln.videoWidth,ht.height=ln.videoHeight,ht.channels=4;else if(ps(ln)){var Mt=ht.width||ln[0].length,qe=ht.height||ln.length,Zt=ht.channels;rt(ln[0][0])?Zt=Zt||ln[0][0].length:Zt=Zt||1;for(var sn=Bo.shape(ln),$n=1,Qn=0;Qn<sn.length;++Qn)$n*=sn[Qn];var zn=Df(ht,$n);Bo.flatten(ln,sn,"",zn),nf(ht,zn),ht.alignment=1,ht.width=Mt,ht.height=qe,ht.channels=Zt,ht.format=ht.internalformat=Or[Zt],ht.needsFree=!0}ht.type===Ct?Ce(Et.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ht.type===au&&Ce(Et.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function er(ht,On,ln){var Hr=ht.element,Ga=ht.data,ot=ht.internalformat,Ge=ht.format,Nt=ht.type,tn=ht.width,nn=ht.height;Ma(ht),Hr?ge.texImage2D(On,ln,Ge,Ge,Nt,Hr):ht.compressed?ge.compressedTexImage2D(On,ln,ot,tn,nn,0,Ga):ht.needsCopy?(vn(),ge.copyTexImage2D(On,ln,Ge,ht.xOffset,ht.yOffset,tn,nn,0)):ge.texImage2D(On,ln,Ge,tn,nn,0,Ge,Nt,Ga||null)}function ha(ht,On,ln,Hr,Ga){var ot=ht.element,Ge=ht.data,Nt=ht.internalformat,tn=ht.format,nn=ht.type,jt=ht.width,Lt=ht.height;Ma(ht),ot?ge.texSubImage2D(On,Ga,ln,Hr,tn,nn,ot):ht.compressed?ge.compressedTexSubImage2D(On,Ga,ln,Hr,Nt,jt,Lt,Ge):ht.needsCopy?(vn(),ge.copyTexSubImage2D(On,Ga,ln,Hr,ht.xOffset,ht.yOffset,jt,Lt)):ge.texSubImage2D(On,Ga,ln,Hr,jt,Lt,tn,nn,Ge)}var Wa=[];function Jr(){return Wa.pop()||new Pr}function Ja(ht){ht.needsFree&&da.freeType(ht.data),Pr.call(ht),Wa.push(ht)}function Aa(){ir.call(this),this.genMipmaps=!1,this.mipmapHint=Ki,this.mipmask=0,this.images=Array(16)}function ei(ht,On,ln){var Hr=ht.images[0]=Jr();ht.mipmask=1,Hr.width=ht.width=On,Hr.height=ht.height=ln,Hr.channels=ht.channels=4}function gi(ht,On){var ln=null;if(Yc(On))ln=ht.images[0]=Jr(),fr(ln,ht),Tr(ln,On),ht.mipmask=1;else if(oa(ht,On),Array.isArray(On.mipmap))for(var Hr=On.mipmap,Ga=0;Ga<Hr.length;++Ga)ln=ht.images[Ga]=Jr(),fr(ln,ht),ln.width>>=Ga,ln.height>>=Ga,Tr(ln,Hr[Ga]),ht.mipmask|=1<<Ga;else ln=ht.images[0]=Jr(),fr(ln,ht),Tr(ln,On),ht.mipmask=1;fr(ht,ht.images[0]),ht.compressed&&(ht.internalformat===Uu||ht.internalformat===Fu||ht.internalformat===ws||ht.internalformat===hs)&&Ce(ht.width%4===0&&ht.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function So(ht,On){for(var ln=ht.images,Hr=0;Hr<ln.length;++Hr){if(!ln[Hr])return;er(ln[Hr],On,Hr)}}var jo=[];function oi(){var ht=jo.pop()||new Aa;ir.call(ht),ht.mipmask=0;for(var On=0;On<16;++On)ht.images[On]=null;return ht}function Ni(ht){for(var On=ht.images,ln=0;ln<On.length;++ln)On[ln]&&Ja(On[ln]),On[ln]=null;jo.push(ht)}function oo(){this.minFilter=Wn,this.magFilter=Wn,this.wrapS=Fn,this.wrapT=Fn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ki}function Uo(ht,On){if("min"in On){var ln=On.min;Ce.parameter(ln,Er),ht.minFilter=Er[ln],rr.indexOf(ht.minFilter)>=0&&!("faces"in On)&&(ht.genMipmaps=!0)}if("mag"in On){var Hr=On.mag;Ce.parameter(Hr,mr),ht.magFilter=mr[Hr]}var Ga=ht.wrapS,ot=ht.wrapT;if("wrap"in On){var Ge=On.wrap;typeof Ge=="string"?(Ce.parameter(Ge,Sn),Ga=ot=Sn[Ge]):Array.isArray(Ge)&&(Ce.parameter(Ge[0],Sn),Ce.parameter(Ge[1],Sn),Ga=Sn[Ge[0]],ot=Sn[Ge[1]])}else{if("wrapS"in On){var Nt=On.wrapS;Ce.parameter(Nt,Sn),Ga=Sn[Nt]}if("wrapT"in On){var tn=On.wrapT;Ce.parameter(tn,Sn),ot=Sn[tn]}}if(ht.wrapS=Ga,ht.wrapT=ot,"anisotropic"in On){var nn=On.anisotropic;Ce(typeof nn=="number"&&nn>=1&&nn<=Et.maxAnisotropic,"aniso samples must be between 1 and "),ht.anisotropic=On.anisotropic}if("mipmap"in On){var jt=!1;switch(typeof On.mipmap){case"string":Ce.parameter(On.mipmap,ur,"invalid mipmap hint"),ht.mipmapHint=ur[On.mipmap],ht.genMipmaps=!0,jt=!0;break;case"boolean":jt=ht.genMipmaps=On.mipmap;break;case"object":Ce(Array.isArray(On.mipmap),"invalid mipmap type"),ht.genMipmaps=!1,jt=!0;break;default:Ce.raise("invalid mipmap type")}jt&&!("min"in On)&&(ht.minFilter=Xa)}}function po(ht,On){ge.texParameteri(On,Nr,ht.minFilter),ge.texParameteri(On,Ar,ht.magFilter),ge.texParameteri(On,Xt,ht.wrapS),ge.texParameteri(On,un,ht.wrapT),_e.ext_texture_filter_anisotropic&&ge.texParameteri(On,ki,ht.anisotropic),ht.genMipmaps&&(ge.hint(Oa,ht.mipmapHint),ge.generateMipmap(On))}var Po=0,Xo={},Do=Et.maxTextureUnits,vo=Array(Do).map(function(){return null});function Ha(ht){ir.call(this),this.mipmask=0,this.internalformat=Ao,this.id=Po++,this.refCount=1,this.target=ht,this.texture=ge.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new oo,bn.profile&&(this.stats={size:0})}function Wo(ht){ge.activeTexture(hn),ge.bindTexture(ht.target,ht.texture)}function yi(){var ht=vo[0];ht?ge.bindTexture(ht.target,ht.texture):ge.bindTexture(mi,null)}function va(ht){var On=ht.texture;Ce(On,"must not double destroy texture");var ln=ht.unit,Hr=ht.target;ln>=0&&(ge.activeTexture(hn+ln),ge.bindTexture(Hr,null),vo[ln]=null),ge.deleteTexture(On),ht.texture=null,ht.params=null,ht.pixels=null,ht.refCount=0,delete Xo[ht.id],kn.textureCount--}f(Ha.prototype,{bind:function(){var On=this;On.bindCount+=1;var ln=On.unit;if(ln<0){for(var Hr=0;Hr<Do;++Hr){var Ga=vo[Hr];if(Ga){if(Ga.bindCount>0)continue;Ga.unit=-1}vo[Hr]=On,ln=Hr;break}ln>=Do&&Ce.raise("insufficient number of texture units"),bn.profile&&kn.maxTextureUnits<ln+1&&(kn.maxTextureUnits=ln+1),On.unit=ln,ge.activeTexture(hn+ln),ge.bindTexture(On.target,On.texture)}return ln},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&va(this)}});function Ra(ht,On){var ln=new Ha(mi);Xo[ln.id]=ln,kn.textureCount++;function Hr(Ge,Nt){var tn=ln.texInfo;oo.call(tn);var nn=oi();return typeof Ge=="number"?typeof Nt=="number"?ei(nn,Ge|0,Nt|0):ei(nn,Ge|0,Ge|0):Ge?(Ce.type(Ge,"object","invalid arguments to regl.texture"),Uo(tn,Ge),gi(nn,Ge)):ei(nn,1,1),tn.genMipmaps&&(nn.mipmask=(nn.width<<1)-1),ln.mipmask=nn.mipmask,fr(ln,nn),Ce.texture2D(tn,nn,Et),ln.internalformat=nn.internalformat,Hr.width=nn.width,Hr.height=nn.height,Wo(ln),So(nn,mi),po(tn,mi),yi(),Ni(nn),bn.profile&&(ln.stats.size=Fl(ln.internalformat,ln.type,nn.width,nn.height,tn.genMipmaps,!1)),Hr.format=br[ln.internalformat],Hr.type=Fr[ln.type],Hr.mag=Pn[tn.magFilter],Hr.min=na[tn.minFilter],Hr.wrapS=dr[tn.wrapS],Hr.wrapT=dr[tn.wrapT],Hr}function Ga(Ge,Nt,tn,nn){Ce(!!Ge,"must specify image data");var jt=Nt|0,Lt=tn|0,Yt=nn|0,nt=Jr();return fr(nt,ln),nt.width=0,nt.height=0,Tr(nt,Ge),nt.width=nt.width||(ln.width>>Yt)-jt,nt.height=nt.height||(ln.height>>Yt)-Lt,Ce(ln.type===nt.type&&ln.format===nt.format&&ln.internalformat===nt.internalformat,"incompatible format for texture.subimage"),Ce(jt>=0&&Lt>=0&&jt+nt.width<=ln.width&&Lt+nt.height<=ln.height,"texture.subimage write out of bounds"),Ce(ln.mipmask&1<<Yt,"missing mipmap data"),Ce(nt.data||nt.element||nt.needsCopy,"missing image data"),Wo(ln),ha(nt,mi,jt,Lt,Yt),yi(),Ja(nt),Hr}function ot(Ge,Nt){var tn=Ge|0,nn=Nt|0||tn;if(tn===ln.width&&nn===ln.height)return Hr;Hr.width=ln.width=tn,Hr.height=ln.height=nn,Wo(ln);for(var jt=0;ln.mipmask>>jt;++jt){var Lt=tn>>jt,Yt=nn>>jt;if(!Lt||!Yt)break;ge.texImage2D(mi,jt,ln.format,Lt,Yt,0,ln.format,ln.type,null)}return yi(),bn.profile&&(ln.stats.size=Fl(ln.internalformat,ln.type,tn,nn,!1,!1)),Hr}return Hr(ht,On),Hr.subimage=Ga,Hr.resize=ot,Hr._reglType="texture2d",Hr._texture=ln,bn.profile&&(Hr.stats=ln.stats),Hr.destroy=function(){ln.decRef()},Hr}function hi(ht,On,ln,Hr,Ga,ot){var Ge=new Ha(Hi);Xo[Ge.id]=Ge,kn.cubeCount++;var Nt=new Array(6);function tn(Lt,Yt,nt,Mt,qe,Zt){var sn,$n=Ge.texInfo;for(oo.call($n),sn=0;sn<6;++sn)Nt[sn]=oi();if(typeof Lt=="number"||!Lt){var Qn=Lt|0||1;for(sn=0;sn<6;++sn)ei(Nt[sn],Qn,Qn)}else if(typeof Lt=="object")if(Yt)gi(Nt[0],Lt),gi(Nt[1],Yt),gi(Nt[2],nt),gi(Nt[3],Mt),gi(Nt[4],qe),gi(Nt[5],Zt);else if(Uo($n,Lt),oa(Ge,Lt),"faces"in Lt){var zn=Lt.faces;for(Ce(Array.isArray(zn)&&zn.length===6,"cube faces must be a length 6 array"),sn=0;sn<6;++sn)Ce(typeof zn[sn]=="object"&&!!zn[sn],"invalid input for cube map face"),fr(Nt[sn],Ge),gi(Nt[sn],zn[sn])}else for(sn=0;sn<6;++sn)gi(Nt[sn],Lt);else Ce.raise("invalid arguments to cube map");for(fr(Ge,Nt[0]),Et.npotTextureCube||Ce(Rn(Ge.width)&&Rn(Ge.height),"your browser does not support non power or two texture dimensions"),$n.genMipmaps?Ge.mipmask=(Nt[0].width<<1)-1:Ge.mipmask=Nt[0].mipmask,Ce.textureCube(Ge,$n,Nt,Et),Ge.internalformat=Nt[0].internalformat,tn.width=Nt[0].width,tn.height=Nt[0].height,Wo(Ge),sn=0;sn<6;++sn)So(Nt[sn],ho+sn);for(po($n,Hi),yi(),bn.profile&&(Ge.stats.size=Fl(Ge.internalformat,Ge.type,tn.width,tn.height,$n.genMipmaps,!0)),tn.format=br[Ge.internalformat],tn.type=Fr[Ge.type],tn.mag=Pn[$n.magFilter],tn.min=na[$n.minFilter],tn.wrapS=dr[$n.wrapS],tn.wrapT=dr[$n.wrapT],sn=0;sn<6;++sn)Ni(Nt[sn]);return tn}function nn(Lt,Yt,nt,Mt,qe){Ce(!!Yt,"must specify image data"),Ce(typeof Lt=="number"&&Lt===(Lt|0)&&Lt>=0&&Lt<6,"invalid face");var Zt=nt|0,sn=Mt|0,$n=qe|0,Qn=Jr();return fr(Qn,Ge),Qn.width=0,Qn.height=0,Tr(Qn,Yt),Qn.width=Qn.width||(Ge.width>>$n)-Zt,Qn.height=Qn.height||(Ge.height>>$n)-sn,Ce(Ge.type===Qn.type&&Ge.format===Qn.format&&Ge.internalformat===Qn.internalformat,"incompatible format for texture.subimage"),Ce(Zt>=0&&sn>=0&&Zt+Qn.width<=Ge.width&&sn+Qn.height<=Ge.height,"texture.subimage write out of bounds"),Ce(Ge.mipmask&1<<$n,"missing mipmap data"),Ce(Qn.data||Qn.element||Qn.needsCopy,"missing image data"),Wo(Ge),ha(Qn,ho+Lt,Zt,sn,$n),yi(),Ja(Qn),tn}function jt(Lt){var Yt=Lt|0;if(Yt===Ge.width)return;tn.width=Ge.width=Yt,tn.height=Ge.height=Yt,Wo(Ge);for(var nt=0;nt<6;++nt)for(var Mt=0;Ge.mipmask>>Mt;++Mt)ge.texImage2D(ho+nt,Mt,Ge.format,Yt>>Mt,Yt>>Mt,0,Ge.format,Ge.type,null);return yi(),bn.profile&&(Ge.stats.size=Fl(Ge.internalformat,Ge.type,tn.width,tn.height,!1,!0)),tn}return tn(ht,On,ln,Hr,Ga,ot),tn.subimage=nn,tn.resize=jt,tn._reglType="textureCube",tn._texture=Ge,bn.profile&&(tn.stats=Ge.stats),tn.destroy=function(){Ge.decRef()},tn}function eo(){for(var ht=0;ht<Do;++ht)ge.activeTexture(hn+ht),ge.bindTexture(mi,null),vo[ht]=null;Mi(Xo).forEach(va),kn.cubeCount=0,kn.textureCount=0}bn.profile&&(kn.getTotalTextureSize=function(){var ht=0;return Object.keys(Xo).forEach(function(On){ht+=Xo[On].stats.size}),ht});function ms(){for(var ht=0;ht<Do;++ht){var On=vo[ht];On&&(On.bindCount=0,On.unit=-1,vo[ht]=null)}Mi(Xo).forEach(function(ln){ln.texture=ge.createTexture(),ge.bindTexture(ln.target,ln.texture);for(var Hr=0;Hr<32;++Hr){if((ln.mipmask&1<<Hr)===0)continue;if(ln.target===mi)ge.texImage2D(mi,Hr,ln.internalformat,ln.width>>Hr,ln.height>>Hr,0,ln.internalformat,ln.type,null);else for(var Ga=0;Ga<6;++Ga)ge.texImage2D(ho+Ga,Hr,ln.internalformat,ln.width>>Hr,ln.height>>Hr,0,ln.internalformat,ln.type,null)}po(ln.texInfo,ln.target)})}function Ml(){for(var ht=0;ht<Do;++ht){var On=vo[ht];On&&(On.bindCount=0,On.unit=-1,vo[ht]=null),ge.activeTexture(hn+ht),ge.bindTexture(mi,null),ge.bindTexture(Hi,null)}}return{create2D:Ra,createCube:hi,clear:eo,getTexture:function(On){return null},restore:ms,refresh:Ml}}var Bl=36161,Qc=32854,Mf=32855,Cd=36194,_f=33189,kf=36168,ac=34041,Nf=35907,Vl=34836,ic=34842,qi=34843,Gi=[];Gi[Qc]=2,Gi[Mf]=2,Gi[Cd]=2,Gi[_f]=2,Gi[kf]=1,Gi[ac]=4,Gi[Nf]=4,Gi[Vl]=16,Gi[ic]=8,Gi[qi]=6;function bl(ge,_e,Et){return Gi[ge]*_e*Et}var ss=function(_e,Et,vn,Vn,kn){var bn={rgba4:Qc,rgb565:Cd,"rgb5 a1":Mf,depth:_f,stencil:kf,"depth stencil":ac};Et.ext_srgb&&(bn.srgba=Nf),Et.ext_color_buffer_half_float&&(bn.rgba16f=ic,bn.rgb16f=qi),Et.webgl_color_buffer_float&&(bn.rgba32f=Vl);var ur=[];Object.keys(bn).forEach(function(xr){var mn=bn[xr];ur[mn]=xr});var Sn=0,mr={};function Er(xr){this.id=Sn++,this.refCount=1,this.renderbuffer=xr,this.format=Qc,this.width=0,this.height=0,kn.profile&&(this.stats={size:0})}Er.prototype.decRef=function(){--this.refCount<=0&&Cr(this)};function Cr(xr){var mn=xr.renderbuffer;Ce(mn,"must not double destroy renderbuffer"),_e.bindRenderbuffer(Bl,null),_e.deleteRenderbuffer(mn),xr.renderbuffer=null,xr.refCount=0,delete mr[xr.id],Vn.renderbufferCount--}function Ir(xr,mn){var fn=new Er(_e.createRenderbuffer());mr[fn.id]=fn,Vn.renderbufferCount++;function br(Pn,na){var dr=0,lr=0,ir=Qc;if(typeof Pn=="object"&&Pn){var fr=Pn;if("shape"in fr){var oa=fr.shape;Ce(Array.isArray(oa)&&oa.length>=2,"invalid renderbuffer shape"),dr=oa[0]|0,lr=oa[1]|0}else"radius"in fr&&(dr=lr=fr.radius|0),"width"in fr&&(dr=fr.width|0),"height"in fr&&(lr=fr.height|0);"format"in fr&&(Ce.parameter(fr.format,bn,"invalid renderbuffer format"),ir=bn[fr.format])}else typeof Pn=="number"?(dr=Pn|0,typeof na=="number"?lr=na|0:lr=dr):Pn?Ce.raise("invalid arguments to renderbuffer constructor"):dr=lr=1;return Ce(dr>0&&lr>0&&dr<=vn.maxRenderbufferSize&&lr<=vn.maxRenderbufferSize,"invalid renderbuffer size"),dr===fn.width&&lr===fn.height&&ir===fn.format?void 0:(br.width=fn.width=dr,br.height=fn.height=lr,fn.format=ir,_e.bindRenderbuffer(Bl,fn.renderbuffer),_e.renderbufferStorage(Bl,ir,dr,lr),Ce(_e.getError()===0,"invalid render buffer format"),kn.profile&&(fn.stats.size=bl(fn.format,fn.width,fn.height)),br.format=ur[fn.format],br)}function Fr(Pn,na){var dr=Pn|0,lr=na|0||dr;return dr===fn.width&&lr===fn.height||(Ce(dr>0&&lr>0&&dr<=vn.maxRenderbufferSize&&lr<=vn.maxRenderbufferSize,"invalid renderbuffer size"),br.width=fn.width=dr,br.height=fn.height=lr,_e.bindRenderbuffer(Bl,fn.renderbuffer),_e.renderbufferStorage(Bl,fn.format,dr,lr),Ce(_e.getError()===0,"invalid render buffer format"),kn.profile&&(fn.stats.size=bl(fn.format,fn.width,fn.height))),br}return br(xr,mn),br.resize=Fr,br._reglType="renderbuffer",br._renderbuffer=fn,kn.profile&&(br.stats=fn.stats),br.destroy=function(){fn.decRef()},br}kn.profile&&(Vn.getTotalRenderbufferSize=function(){var xr=0;return Object.keys(mr).forEach(function(mn){xr+=mr[mn].stats.size}),xr});function Mr(){Mi(mr).forEach(function(xr){xr.renderbuffer=_e.createRenderbuffer(),_e.bindRenderbuffer(Bl,xr.renderbuffer),_e.renderbufferStorage(Bl,xr.format,xr.width,xr.height)}),_e.bindRenderbuffer(Bl,null)}return{create:Ir,clear:function(){Mi(mr).forEach(Cr)},restore:Mr}},ko=36160,Ls=36161,Bu=3553,Ts=34069,Td=36064,tl=36096,Tc=36128,Tu=33306,ou=36053,Ad=36054,El=36055,Jc=36057,Od=36061,Vu=36193,Ac=5121,Jo=5126,zu=6407,Gu=6408,Sd=6402,eh=[zu,Gu],Dd=[];Dd[Gu]=4,Dd[zu]=3;var Qi=[];Qi[Ac]=1,Qi[Jo]=4,Qi[Vu]=2;var Ih=32854,zl=32855,Md=36194,Gl=33189,Xl=36168,su=34041,_d=35907,oc=34836,sc=34842,Oc=34843,th=[Ih,zl,Md,_d,sc,Oc,oc],js={};js[ou]="complete",js[Ad]="incomplete attachment",js[Jc]="incomplete dimensions",js[El]="incomplete, missing attachment",js[Od]="unsupported";function nh(ge,_e,Et,vn,Vn,kn){var bn={cur:null,next:null,dirty:!1,setFBO:null},ur=["rgba"],Sn=["rgba4","rgb565","rgb5 a1"];_e.ext_srgb&&Sn.push("srgba"),_e.ext_color_buffer_half_float&&Sn.push("rgba16f","rgb16f"),_e.webgl_color_buffer_float&&Sn.push("rgba32f");var mr=["uint8"];_e.oes_texture_half_float&&mr.push("half float","float16"),_e.oes_texture_float&&mr.push("float","float32");function Er(Pr,Tr,er){this.target=Pr,this.texture=Tr,this.renderbuffer=er;var ha=0,Wa=0;Tr?(ha=Tr.width,Wa=Tr.height):er&&(ha=er.width,Wa=er.height),this.width=ha,this.height=Wa}function Cr(Pr){Pr&&(Pr.texture&&Pr.texture._texture.decRef(),Pr.renderbuffer&&Pr.renderbuffer._renderbuffer.decRef())}function Ir(Pr,Tr,er){if(!Pr)return;if(Pr.texture){var ha=Pr.texture._texture,Wa=Math.max(1,ha.width),Jr=Math.max(1,ha.height);Ce(Wa===Tr&&Jr===er,"inconsistent width/height for supplied texture"),ha.refCount+=1}else{var Ja=Pr.renderbuffer._renderbuffer;Ce(Ja.width===Tr&&Ja.height===er,"inconsistent width/height for renderbuffer"),Ja.refCount+=1}}function Mr(Pr,Tr){Tr&&(Tr.texture?ge.framebufferTexture2D(ko,Pr,Tr.target,Tr.texture._texture.texture,0):ge.framebufferRenderbuffer(ko,Pr,Ls,Tr.renderbuffer._renderbuffer.renderbuffer))}function xr(Pr){var Tr=Bu,er=null,ha=null,Wa=Pr;typeof Pr=="object"&&(Wa=Pr.data,"target"in Pr&&(Tr=Pr.target|0)),Ce.type(Wa,"function","invalid attachment data");var Jr=Wa._reglType;return Jr==="texture2d"?(er=Wa,Ce(Tr===Bu)):Jr==="textureCube"?(er=Wa,Ce(Tr>=Ts&&Tr<Ts+6,"invalid cube map target")):Jr==="renderbuffer"?(ha=Wa,Tr=Ls):Ce.raise("invalid regl object for attachment"),new Er(Tr,er,ha)}function mn(Pr,Tr,er,ha,Wa){if(er){var Jr=vn.create2D({width:Pr,height:Tr,format:ha,type:Wa});return Jr._texture.refCount=0,new Er(Bu,Jr,null)}else{var Ja=Vn.create({width:Pr,height:Tr,format:ha});return Ja._renderbuffer.refCount=0,new Er(Ls,null,Ja)}}function fn(Pr){return Pr&&(Pr.texture||Pr.renderbuffer)}function br(Pr,Tr,er){Pr&&(Pr.texture?Pr.texture.resize(Tr,er):Pr.renderbuffer&&Pr.renderbuffer.resize(Tr,er),Pr.width=Tr,Pr.height=er)}var Fr=0,Pn={};function na(){this.id=Fr++,Pn[this.id]=this,this.framebuffer=ge.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function dr(Pr){Pr.colorAttachments.forEach(Cr),Cr(Pr.depthAttachment),Cr(Pr.stencilAttachment),Cr(Pr.depthStencilAttachment)}function lr(Pr){var Tr=Pr.framebuffer;Ce(Tr,"must not double destroy framebuffer"),ge.deleteFramebuffer(Tr),Pr.framebuffer=null,kn.framebufferCount--,delete Pn[Pr.id]}function ir(Pr){var Tr;ge.bindFramebuffer(ko,Pr.framebuffer);var er=Pr.colorAttachments;for(Tr=0;Tr<er.length;++Tr)Mr(Td+Tr,er[Tr]);for(Tr=er.length;Tr<Et.maxColorAttachments;++Tr)ge.framebufferTexture2D(ko,Td+Tr,Bu,null,0);ge.framebufferTexture2D(ko,Tu,Bu,null,0),ge.framebufferTexture2D(ko,tl,Bu,null,0),ge.framebufferTexture2D(ko,Tc,Bu,null,0),Mr(tl,Pr.depthAttachment),Mr(Tc,Pr.stencilAttachment),Mr(Tu,Pr.depthStencilAttachment);var ha=ge.checkFramebufferStatus(ko);!ge.isContextLost()&&ha!==ou&&Ce.raise("framebuffer configuration not supported, status = "+js[ha]),ge.bindFramebuffer(ko,bn.next?bn.next.framebuffer:null),bn.cur=bn.next,ge.getError()}function fr(Pr,Tr){var er=new na;kn.framebufferCount++;function ha(Jr,Ja){var Aa;Ce(bn.next!==er,"can not update framebuffer which is currently in use");var ei=0,gi=0,So=!0,jo=!0,oi=null,Ni=!0,oo="rgba",Uo="uint8",po=1,Po=null,Xo=null,Do=null,vo=!1;if(typeof Jr=="number")ei=Jr|0,gi=Ja|0||ei;else if(!Jr)ei=gi=1;else{Ce.type(Jr,"object","invalid arguments for framebuffer");var Ha=Jr;if("shape"in Ha){var Wo=Ha.shape;Ce(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),ei=Wo[0],gi=Wo[1]}else"radius"in Ha&&(ei=gi=Ha.radius),"width"in Ha&&(ei=Ha.width),"height"in Ha&&(gi=Ha.height);("color"in Ha||"colors"in Ha)&&(oi=Ha.color||Ha.colors,Array.isArray(oi)&&Ce(oi.length===1||_e.webgl_draw_buffers,"multiple render targets not supported")),oi||("colorCount"in Ha&&(po=Ha.colorCount|0,Ce(po>0,"invalid color buffer count")),"colorTexture"in Ha&&(Ni=!!Ha.colorTexture,oo="rgba4"),"colorType"in Ha&&(Uo=Ha.colorType,Ni?(Ce(_e.oes_texture_float||!(Uo==="float"||Uo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ce(_e.oes_texture_half_float||!(Uo==="half float"||Uo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Uo==="half float"||Uo==="float16"?(Ce(_e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),oo="rgba16f"):(Uo==="float"||Uo==="float32")&&(Ce(_e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),oo="rgba32f"),Ce.oneOf(Uo,mr,"invalid color type")),"colorFormat"in Ha&&(oo=Ha.colorFormat,ur.indexOf(oo)>=0?Ni=!0:Sn.indexOf(oo)>=0?Ni=!1:Ni?Ce.oneOf(Ha.colorFormat,ur,"invalid color format for texture"):Ce.oneOf(Ha.colorFormat,Sn,"invalid color format for renderbuffer"))),("depthTexture"in Ha||"depthStencilTexture"in Ha)&&(vo=!!(Ha.depthTexture||Ha.depthStencilTexture),Ce(!vo||_e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ha&&(typeof Ha.depth=="boolean"?So=Ha.depth:(Po=Ha.depth,jo=!1)),"stencil"in Ha&&(typeof Ha.stencil=="boolean"?jo=Ha.stencil:(Xo=Ha.stencil,So=!1)),"depthStencil"in Ha&&(typeof Ha.depthStencil=="boolean"?So=jo=Ha.depthStencil:(Do=Ha.depthStencil,So=!1,jo=!1))}var yi=null,va=null,Ra=null,hi=null;if(Array.isArray(oi))yi=oi.map(xr);else if(oi)yi=[xr(oi)];else for(yi=new Array(po),Aa=0;Aa<po;++Aa)yi[Aa]=mn(ei,gi,Ni,oo,Uo);Ce(_e.webgl_draw_buffers||yi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ce(yi.length<=Et.maxColorAttachments,"too many color attachments, not supported"),ei=ei||yi[0].width,gi=gi||yi[0].height,Po?va=xr(Po):So&&!jo&&(va=mn(ei,gi,vo,"depth","uint32")),Xo?Ra=xr(Xo):jo&&!So&&(Ra=mn(ei,gi,!1,"stencil","uint8")),Do?hi=xr(Do):!Po&&!Xo&&jo&&So&&(hi=mn(ei,gi,vo,"depth stencil","depth stencil")),Ce(!!Po+!!Xo+!!Do<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var eo=null;for(Aa=0;Aa<yi.length;++Aa)if(Ir(yi[Aa],ei,gi),Ce(!yi[Aa]||yi[Aa].texture&&eh.indexOf(yi[Aa].texture._texture.format)>=0||yi[Aa].renderbuffer&&th.indexOf(yi[Aa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Aa+" is invalid"),yi[Aa]&&yi[Aa].texture){var ms=Dd[yi[Aa].texture._texture.format]*Qi[yi[Aa].texture._texture.type];eo===null?eo=ms:Ce(eo===ms,"all color attachments much have the same number of bits per pixel.")}return Ir(va,ei,gi),Ce(!va||va.texture&&va.texture._texture.format===Sd||va.renderbuffer&&va.renderbuffer._renderbuffer.format===Gl,"invalid depth attachment for framebuffer object"),Ir(Ra,ei,gi),Ce(!Ra||Ra.renderbuffer&&Ra.renderbuffer._renderbuffer.format===Xl,"invalid stencil attachment for framebuffer object"),Ir(hi,ei,gi),Ce(!hi||hi.texture&&hi.texture._texture.format===su||hi.renderbuffer&&hi.renderbuffer._renderbuffer.format===su,"invalid depth-stencil attachment for framebuffer object"),dr(er),er.width=ei,er.height=gi,er.colorAttachments=yi,er.depthAttachment=va,er.stencilAttachment=Ra,er.depthStencilAttachment=hi,ha.color=yi.map(fn),ha.depth=fn(va),ha.stencil=fn(Ra),ha.depthStencil=fn(hi),ha.width=er.width,ha.height=er.height,ir(er),ha}function Wa(Jr,Ja){Ce(bn.next!==er,"can not resize a framebuffer which is currently in use");var Aa=Math.max(Jr|0,1),ei=Math.max(Ja|0||Aa,1);if(Aa===er.width&&ei===er.height)return ha;for(var gi=er.colorAttachments,So=0;So<gi.length;++So)br(gi[So],Aa,ei);return br(er.depthAttachment,Aa,ei),br(er.stencilAttachment,Aa,ei),br(er.depthStencilAttachment,Aa,ei),er.width=ha.width=Aa,er.height=ha.height=ei,ir(er),ha}return ha(Pr,Tr),f(ha,{resize:Wa,_reglType:"framebuffer",_framebuffer:er,destroy:function(){lr(er),dr(er)},use:function(Ja){bn.setFBO({framebuffer:ha},Ja)}})}function oa(Pr){var Tr=Array(6);function er(Wa){var Jr;Ce(Tr.indexOf(bn.next)<0,"can not update framebuffer which is currently in use");var Ja={color:null},Aa=0,ei=null,gi="rgba",So="uint8",jo=1;if(typeof Wa=="number")Aa=Wa|0;else if(!Wa)Aa=1;else{Ce.type(Wa,"object","invalid arguments for framebuffer");var oi=Wa;if("shape"in oi){var Ni=oi.shape;Ce(Array.isArray(Ni)&&Ni.length>=2,"invalid shape for framebuffer"),Ce(Ni[0]===Ni[1],"cube framebuffer must be square"),Aa=Ni[0]}else"radius"in oi&&(Aa=oi.radius|0),"width"in oi?(Aa=oi.width|0,"height"in oi&&Ce(oi.height===Aa,"must be square")):"height"in oi&&(Aa=oi.height|0);("color"in oi||"colors"in oi)&&(ei=oi.color||oi.colors,Array.isArray(ei)&&Ce(ei.length===1||_e.webgl_draw_buffers,"multiple render targets not supported")),ei||("colorCount"in oi&&(jo=oi.colorCount|0,Ce(jo>0,"invalid color buffer count")),"colorType"in oi&&(Ce.oneOf(oi.colorType,mr,"invalid color type"),So=oi.colorType),"colorFormat"in oi&&(gi=oi.colorFormat,Ce.oneOf(oi.colorFormat,ur,"invalid color format for texture"))),"depth"in oi&&(Ja.depth=oi.depth),"stencil"in oi&&(Ja.stencil=oi.stencil),"depthStencil"in oi&&(Ja.depthStencil=oi.depthStencil)}var oo;if(ei)if(Array.isArray(ei))for(oo=[],Jr=0;Jr<ei.length;++Jr)oo[Jr]=ei[Jr];else oo=[ei];else{oo=Array(jo);var Uo={radius:Aa,format:gi,type:So};for(Jr=0;Jr<jo;++Jr)oo[Jr]=vn.createCube(Uo)}for(Ja.color=Array(oo.length),Jr=0;Jr<oo.length;++Jr){var po=oo[Jr];Ce(typeof po=="function"&&po._reglType==="textureCube","invalid cube map"),Aa=Aa||po.width,Ce(po.width===Aa&&po.height===Aa,"invalid cube map shape"),Ja.color[Jr]={target:Ts,data:oo[Jr]}}for(Jr=0;Jr<6;++Jr){for(var Po=0;Po<oo.length;++Po)Ja.color[Po].target=Ts+Jr;Jr>0&&(Ja.depth=Tr[0].depth,Ja.stencil=Tr[0].stencil,Ja.depthStencil=Tr[0].depthStencil),Tr[Jr]?Tr[Jr](Ja):Tr[Jr]=fr(Ja)}return f(er,{width:Aa,height:Aa,color:oo})}function ha(Wa){var Jr,Ja=Wa|0;if(Ce(Ja>0&&Ja<=Et.maxCubeMapSize,"invalid radius for cube fbo"),Ja===er.width)return er;var Aa=er.color;for(Jr=0;Jr<Aa.length;++Jr)Aa[Jr].resize(Ja);for(Jr=0;Jr<6;++Jr)Tr[Jr].resize(Ja);return er.width=er.height=Ja,er}return er(Pr),f(er,{faces:Tr,resize:ha,_reglType:"framebufferCube",destroy:function(){Tr.forEach(function(Jr){Jr.destroy()})}})}function Ma(){bn.cur=null,bn.next=null,bn.dirty=!0,Mi(Pn).forEach(function(Pr){Pr.framebuffer=ge.createFramebuffer(),ir(Pr)})}return f(bn,{getFramebuffer:function(Tr){if(typeof Tr=="function"&&Tr._reglType==="framebuffer"){var er=Tr._framebuffer;if(er instanceof na)return er}return null},create:fr,createCube:oa,clear:function(){Mi(Pn).forEach(lr)},restore:Ma})}var Oo=5126,Ws=34962;function Zc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Oo,this.offset=0,this.stride=0,this.divisor=0}function kd(ge,_e,Et,vn,Vn){for(var kn=Et.maxAttributes,bn=new Array(kn),ur=0;ur<kn;++ur)bn[ur]=new Zc;var Sn=0,mr={},Er={Record:Zc,scope:{},state:bn,currentVAO:null,targetVAO:null,restore:Ir()?Pn:function(){},createVAO:na,getVAO:xr,destroyBuffer:Cr,setVAO:Ir()?mn:fn,clear:Ir()?br:function(){}};function Cr(dr){for(var lr=0;lr<bn.length;++lr){var ir=bn[lr];ir.buffer===dr&&(ge.disableVertexAttribArray(lr),ir.buffer=null)}}function Ir(){return _e.oes_vertex_array_object}function Mr(){return _e.angle_instanced_arrays}function xr(dr){return typeof dr=="function"&&dr._vao?dr._vao:null}function mn(dr){if(dr===Er.currentVAO)return;var lr=Ir();dr?lr.bindVertexArrayOES(dr.vao):lr.bindVertexArrayOES(null),Er.currentVAO=dr}function fn(dr){if(dr===Er.currentVAO)return;if(dr)dr.bindAttrs();else for(var lr=Mr(),ir=0;ir<bn.length;++ir){var fr=bn[ir];fr.buffer?(ge.enableVertexAttribArray(ir),ge.vertexAttribPointer(ir,fr.size,fr.type,fr.normalized,fr.stride,fr.offfset),lr&&fr.divisor&&lr.vertexAttribDivisorANGLE(ir,fr.divisor)):(ge.disableVertexAttribArray(ir),ge.vertexAttrib4f(ir,fr.x,fr.y,fr.z,fr.w))}Er.currentVAO=dr}function br(){Mi(mr).forEach(function(dr){dr.destroy()})}function Fr(){this.id=++Sn,this.attributes=[];var dr=Ir();dr?this.vao=dr.createVertexArrayOES():this.vao=null,mr[this.id]=this,this.buffers=[]}Fr.prototype.bindAttrs=function(){for(var dr=Mr(),lr=this.attributes,ir=0;ir<lr.length;++ir){var fr=lr[ir];fr.buffer?(ge.enableVertexAttribArray(ir),ge.bindBuffer(Ws,fr.buffer.buffer),ge.vertexAttribPointer(ir,fr.size,fr.type,fr.normalized,fr.stride,fr.offset),dr&&fr.divisor&&dr.vertexAttribDivisorANGLE(ir,fr.divisor)):(ge.disableVertexAttribArray(ir),ge.vertexAttrib4f(ir,fr.x,fr.y,fr.z,fr.w))}for(var oa=lr.length;oa<kn;++oa)ge.disableVertexAttribArray(oa)},Fr.prototype.refresh=function(){var dr=Ir();dr&&(dr.bindVertexArrayOES(this.vao),this.bindAttrs(),Er.currentVAO=this)},Fr.prototype.destroy=function(){if(this.vao){var dr=Ir();this===Er.currentVAO&&(Er.currentVAO=null,dr.bindVertexArrayOES(null)),dr.deleteVertexArrayOES(this.vao),this.vao=null}mr[this.id]&&(delete mr[this.id],vn.vaoCount-=1)};function Pn(){var dr=Ir();dr&&Mi(mr).forEach(function(lr){lr.refresh()})}function na(dr){var lr=new Fr;vn.vaoCount+=1;function ir(fr){Ce(Array.isArray(fr),"arguments to vertex array constructor must be an array"),Ce(fr.length<kn,"too many attributes"),Ce(fr.length>0,"must specify at least one attribute");var oa={},Ma=lr.attributes;Ma.length=fr.length;for(var Pr=0;Pr<fr.length;++Pr){var Tr=fr[Pr],er=Ma[Pr]=new Zc,ha=Tr.data||Tr;if(Array.isArray(ha)||g(ha)||Bi(ha)){var Wa;lr.buffers[Pr]&&(Wa=lr.buffers[Pr],g(ha)&&Wa._buffer.byteLength>=ha.byteLength?Wa.subdata(ha):(Wa.destroy(),lr.buffers[Pr]=null)),lr.buffers[Pr]||(Wa=lr.buffers[Pr]=Vn.create(Tr,Ws,!1,!0)),er.buffer=Vn.getBuffer(Wa),er.size=er.buffer.dimension|0,er.normalized=!1,er.type=er.buffer.dtype,er.offset=0,er.stride=0,er.divisor=0,er.state=1,oa[Pr]=1}else Vn.getBuffer(Tr)?(er.buffer=Vn.getBuffer(Tr),er.size=er.buffer.dimension|0,er.normalized=!1,er.type=er.buffer.dtype,er.offset=0,er.stride=0,er.divisor=0,er.state=1):Vn.getBuffer(Tr.buffer)?(er.buffer=Vn.getBuffer(Tr.buffer),er.size=(+Tr.size||er.buffer.dimension)|0,er.normalized=!!Tr.normalized||!1,"type"in Tr?(Ce.parameter(Tr.type,bu,"invalid buffer type"),er.type=bu[Tr.type]):er.type=er.buffer.dtype,er.offset=(Tr.offset||0)|0,er.stride=(Tr.stride||0)|0,er.divisor=(Tr.divisor||0)|0,er.state=1,Ce(er.size>=1&&er.size<=4,"size must be between 1 and 4"),Ce(er.offset>=0,"invalid offset"),Ce(er.stride>=0&&er.stride<=255,"stride must be between 0 and 255"),Ce(er.divisor>=0,"divisor must be positive"),Ce(!er.divisor||!!_e.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Tr?(Ce(Pr>0,"first attribute must not be a constant"),er.x=+Tr.x||0,er.y=+Tr.y||0,er.z=+Tr.z||0,er.w=+Tr.w||0,er.state=2):Ce(!1,"invalid attribute spec for location "+Pr)}for(var Jr=0;Jr<lr.buffers.length;++Jr)!oa[Jr]&&lr.buffers[Jr]&&(lr.buffers[Jr].destroy(),lr.buffers[Jr]=null);return lr.refresh(),ir}return ir.destroy=function(){for(var fr=0;fr<lr.buffers.length;++fr)lr.buffers[fr]&&lr.buffers[fr].destroy();lr.buffers.length=0,lr.destroy()},ir._vao=lr,ir._reglType="vao",ir(dr)}return Er}var Sc=35632,rf=35633,Rf=35718,Pf=35721;function rh(ge,_e,Et,vn){var Vn={},kn={};function bn(mn,fn,br,Fr){this.name=mn,this.id=fn,this.location=br,this.info=Fr}function ur(mn,fn){for(var br=0;br<mn.length;++br)if(mn[br].id===fn.id){mn[br].location=fn.location;return}mn.push(fn)}function Sn(mn,fn,br){var Fr=mn===Sc?Vn:kn,Pn=Fr[fn];if(!Pn){var na=_e.str(fn);Pn=ge.createShader(mn),ge.shaderSource(Pn,na),ge.compileShader(Pn),Ce.shaderError(ge,Pn,na,mn,br),Fr[fn]=Pn}return Pn}var mr={},Er=[],Cr=0;function Ir(mn,fn){this.id=Cr++,this.fragId=mn,this.vertId=fn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,vn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Mr(mn,fn,br){var Fr,Pn,na=Sn(Sc,mn.fragId),dr=Sn(rf,mn.vertId),lr=mn.program=ge.createProgram();if(ge.attachShader(lr,na),ge.attachShader(lr,dr),br)for(Fr=0;Fr<br.length;++Fr){var ir=br[Fr];ge.bindAttribLocation(lr,ir[0],ir[1])}ge.linkProgram(lr),Ce.linkError(ge,lr,_e.str(mn.fragId),_e.str(mn.vertId),fn);var fr=ge.getProgramParameter(lr,Rf);vn.profile&&(mn.stats.uniformsCount=fr);var oa=mn.uniforms;for(Fr=0;Fr<fr;++Fr)if(Pn=ge.getActiveUniform(lr,Fr),Pn)if(Pn.size>1)for(var Ma=0;Ma<Pn.size;++Ma){var Pr=Pn.name.replace("[0]","["+Ma+"]");ur(oa,new bn(Pr,_e.id(Pr),ge.getUniformLocation(lr,Pr),Pn))}else ur(oa,new bn(Pn.name,_e.id(Pn.name),ge.getUniformLocation(lr,Pn.name),Pn));var Tr=ge.getProgramParameter(lr,Pf);vn.profile&&(mn.stats.attributesCount=Tr);var er=mn.attributes;for(Fr=0;Fr<Tr;++Fr)Pn=ge.getActiveAttrib(lr,Fr),Pn&&ur(er,new bn(Pn.name,_e.id(Pn.name),ge.getAttribLocation(lr,Pn.name),Pn))}vn.profile&&(Et.getMaxUniformsCount=function(){var mn=0;return Er.forEach(function(fn){fn.stats.uniformsCount>mn&&(mn=fn.stats.uniformsCount)}),mn},Et.getMaxAttributesCount=function(){var mn=0;return Er.forEach(function(fn){fn.stats.attributesCount>mn&&(mn=fn.stats.attributesCount)}),mn});function xr(){Vn={},kn={};for(var mn=0;mn<Er.length;++mn)Mr(Er[mn],null,Er[mn].attributes.map(function(fn){return[fn.location,fn.name]}))}return{clear:function(){var fn=ge.deleteShader.bind(ge);Mi(Vn).forEach(fn),Vn={},Mi(kn).forEach(fn),kn={},Er.forEach(function(br){ge.deleteProgram(br.program)}),Er.length=0,mr={},Et.shaderCount=0},program:function(fn,br,Fr,Pn){Ce.command(fn>=0,"missing vertex shader",Fr),Ce.command(br>=0,"missing fragment shader",Fr);var na=mr[br];na||(na=mr[br]={});var dr=na[fn];if(dr&&(dr.refCount++,!Pn))return dr;var lr=new Ir(br,fn);return Et.shaderCount++,Mr(lr,Fr,Pn),dr||(na[fn]=lr),Er.push(lr),f(lr,{destroy:function(){if(lr.refCount--,lr.refCount<=0){ge.deleteProgram(lr.program);var fr=Er.indexOf(lr);Er.splice(fr,1),Et.shaderCount--}na[lr.vertId].refCount<=0&&(ge.deleteShader(kn[lr.vertId]),delete kn[lr.vertId],delete mr[lr.fragId][lr.vertId]),Object.keys(mr[lr.fragId]).length||(ge.deleteShader(Vn[lr.fragId]),delete Vn[lr.fragId],delete mr[lr.fragId])}})},restore:xr,shader:Sn,frag:-1,vert:-1}}var Dc=6408,Us=5121,Au=3333,qc=5126;function Nd(ge,_e,Et,vn,Vn,kn,bn){function ur(Er){var Cr;_e.next===null?(Ce(Vn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Cr=Us):(Ce(_e.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Cr=_e.next.colorAttachments[0].texture._texture.type,kn.oes_texture_float?(Ce(Cr===Us||Cr===qc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Cr===qc&&Ce(bn.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ce(Cr===Us,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ir=0,Mr=0,xr=vn.framebufferWidth,mn=vn.framebufferHeight,fn=null;g(Er)?fn=Er:Er&&(Ce.type(Er,"object","invalid arguments to regl.read()"),Ir=Er.x|0,Mr=Er.y|0,Ce(Ir>=0&&Ir<vn.framebufferWidth,"invalid x offset for regl.read"),Ce(Mr>=0&&Mr<vn.framebufferHeight,"invalid y offset for regl.read"),xr=(Er.width||vn.framebufferWidth-Ir)|0,mn=(Er.height||vn.framebufferHeight-Mr)|0,fn=Er.data||null),fn&&(Cr===Us?Ce(fn instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Cr===qc&&Ce(fn instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ce(xr>0&&xr+Ir<=vn.framebufferWidth,"invalid width for read pixels"),Ce(mn>0&&mn+Mr<=vn.framebufferHeight,"invalid height for read pixels"),Et();var br=xr*mn*4;return fn||(Cr===Us?fn=new Uint8Array(br):Cr===qc&&(fn=fn||new Float32Array(br))),Ce.isTypedArray(fn,"data buffer for regl.read() must be a typedarray"),Ce(fn.byteLength>=br,"data buffer for regl.read() too small"),ge.pixelStorei(Au,4),ge.readPixels(Ir,Mr,xr,mn,Dc,Cr,fn),fn}function Sn(Er){var Cr;return _e.setFBO({framebuffer:Er.framebuffer},function(){Cr=ur(Er)}),Cr}function mr(Er){return!Er||!("framebuffer"in Er)?ur(Er):Sn(Er)}return mr}function Ou(ge){return Array.prototype.slice.call(ge)}function Su(ge){return Ou(ge).join("")}function ah(){var ge=0,_e=[],Et=[];function vn(Cr){for(var Ir=0;Ir<Et.length;++Ir)if(Et[Ir]===Cr)return _e[Ir];var Mr="g"+ge++;return _e.push(Mr),Et.push(Cr),Mr}function Vn(){var Cr=[];function Ir(){Cr.push.apply(Cr,Ou(arguments))}var Mr=[];function xr(){var mn="v"+ge++;return Mr.push(mn),arguments.length>0&&(Cr.push(mn,"="),Cr.push.apply(Cr,Ou(arguments)),Cr.push(";")),mn}return f(Ir,{def:xr,toString:function(){return Su([Mr.length>0?"var "+Mr.join(",")+";":"",Su(Cr)])}})}function kn(){var Cr=Vn(),Ir=Vn(),Mr=Cr.toString,xr=Ir.toString;function mn(fn,br){Ir(fn,br,"=",Cr.def(fn,br),";")}return f(function(){Cr.apply(Cr,Ou(arguments))},{def:Cr.def,entry:Cr,exit:Ir,save:mn,set:function(br,Fr,Pn){mn(br,Fr),Cr(br,Fr,"=",Pn,";")},toString:function(){return Mr()+xr()}})}function bn(){var Cr=Su(arguments),Ir=kn(),Mr=kn(),xr=Ir.toString,mn=Mr.toString;return f(Ir,{then:function(){return Ir.apply(Ir,Ou(arguments)),this},else:function(){return Mr.apply(Mr,Ou(arguments)),this},toString:function(){var br=mn();return br&&(br="else{"+br+"}"),Su(["if(",Cr,"){",xr(),"}",br])}})}var ur=Vn(),Sn={};function mr(Cr,Ir){var Mr=[];function xr(){var Pn="a"+Mr.length;return Mr.push(Pn),Pn}Ir=Ir||0;for(var mn=0;mn<Ir;++mn)xr();var fn=kn(),br=fn.toString,Fr=Sn[Cr]=f(fn,{arg:xr,toString:function(){return Su(["function(",Mr.join(),"){",br(),"}"])}});return Fr}function Er(){var Cr=['"use strict";',ur,"return {"];Object.keys(Sn).forEach(function(xr){Cr.push('"',xr,'":',Sn[xr].toString(),",")}),Cr.push("}");var Ir=Su(Cr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Mr=Function.apply(null,_e.concat(Ir));return Mr.apply(null,Et)}return{global:ur,link:vn,block:Vn,proc:mr,scope:kn,cond:bn,compile:Er}}var xl="xyzw".split(""),If=5121,wl=1,ed=2,td=0,uc=1,af=2,nd=3,rd=4,io=5,Rd=6,Mc="dither",ad="blend.enable",of="blend.color",lc="blend.equation",Pd="blend.func",cc="depth.enable",Xu="depth.func",_c="depth.range",Wu="depth.mask",Hs="colorMask",kc="cull.enable",dc="cull.face",Id="frontFace",fc="lineWidth",No="polygonOffset.enable",nl="polygonOffset.offset",id="sample.alpha",od="sample.enable",Zo="sample.coverage",rl="stencil.enable",qo="stencil.mask",us="stencil.func",ls="stencil.opFront",Wl="stencil.opBack",uu="scissor.enable",Nc="scissor.box",al="viewport",Cl="profile",Ks="framebuffer",Hu="vert",Tl="frag",Al="elements",lu="primitive",Hl="count",Ld="offset",hc="instances",Rc="vao",cu="Width",$s="Height",Du=Ks+cu,Vo=Ks+$s,Pc=al+cu,sd=al+$s,Ic="drawingBuffer",jd=Ic+cu,Lf=Ic+$s,sf=[Pd,lc,us,ls,Wl,Zo,al,Nc,nl],Ys=34962,uf=34963,jf=35632,lf=35633,Uf=3553,Qs=34067,pc=2884,lo=3042,Lc=3024,Ud=2960,Ff=2929,ih=3089,Kl=32823,cf=32926,Fd=32928,Ku=5126,Fs=35664,Bd=35665,Vd=35666,il=5124,ud=35667,Mu=35668,ld=35669,es=35670,cd=35671,jc=35672,zd=35673,dd=35674,Ol=35675,Uc=35676,_u=35678,fd=35680,Gd=4,Fc=1028,Sl=1029,Xd=2304,Bf=2305,oh=32775,df=32776,Lh=519,$u=7680,sh=0,ff=1,Vf=32774,uh=513,zf=36160,lh=36064,ol={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ku=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],vc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Dl={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Wd={frag:jf,vert:lf},hd={cw:Xd,ccw:Bf};function mc(ge){return Array.isArray(ge)||g(ge)||Bi(ge)}function Hd(ge){return ge.sort(function(_e,Et){return _e===al?-1:Et===al?1:_e<Et?-1:1})}function As(ge,_e,Et,vn){this.thisDep=ge,this.contextDep=_e,this.propDep=Et,this.append=vn}function $l(ge){return ge&&!(ge.thisDep||ge.contextDep||ge.propDep)}function Ro(ge){return new As(!1,!1,!1,ge)}function zo(ge,_e){var Et=ge.type;if(Et===td){var vn=ge.data.length;return new As(!0,vn>=1,vn>=2,_e)}else if(Et===rd){var Vn=ge.data;return new As(Vn.thisDep,Vn.contextDep,Vn.propDep,_e)}else{if(Et===io)return new As(!1,!1,!1,_e);if(Et===Rd){for(var kn=!1,bn=!1,ur=!1,Sn=0;Sn<ge.data.length;++Sn){var mr=ge.data[Sn];if(mr.type===uc)ur=!0;else if(mr.type===af)bn=!0;else if(mr.type===nd)kn=!0;else if(mr.type===td){kn=!0;var Er=mr.data;Er>=1&&(bn=!0),Er>=2&&(ur=!0)}else mr.type===rd&&(kn=kn||mr.data.thisDep,bn=bn||mr.data.contextDep,ur=ur||mr.data.propDep)}return new As(kn,bn,ur,_e)}else return new As(Et===nd,Et===af,Et===uc,_e)}}var ch=new As(!1,!1,!1,function(){});function hf(ge,_e,Et,vn,Vn,kn,bn,ur,Sn,mr,Er,Cr,Ir,Mr,xr){var mn=mr.Record,fn={add:32774,subtract:32778,"reverse subtract":32779};Et.ext_blend_minmax&&(fn.min=oh,fn.max=df);var br=Et.angle_instanced_arrays,Fr=Et.webgl_draw_buffers,Pn={dirty:!0,profile:xr.profile},na={},dr=[],lr={},ir={};function fr(ot){return ot.replace(".","_")}function oa(ot,Ge,Nt){var tn=fr(ot);dr.push(ot),na[tn]=Pn[tn]=!!Nt,lr[tn]=Ge}function Ma(ot,Ge,Nt){var tn=fr(ot);dr.push(ot),Array.isArray(Nt)?(Pn[tn]=Nt.slice(),na[tn]=Nt.slice()):Pn[tn]=na[tn]=Nt,ir[tn]=Ge}oa(Mc,Lc),oa(ad,lo),Ma(of,"blendColor",[0,0,0,0]),Ma(lc,"blendEquationSeparate",[Vf,Vf]),Ma(Pd,"blendFuncSeparate",[ff,sh,ff,sh]),oa(cc,Ff,!0),Ma(Xu,"depthFunc",uh),Ma(_c,"depthRange",[0,1]),Ma(Wu,"depthMask",!0),Ma(Hs,Hs,[!0,!0,!0,!0]),oa(kc,pc),Ma(dc,"cullFace",Sl),Ma(Id,Id,Bf),Ma(fc,fc,1),oa(No,Kl),Ma(nl,"polygonOffset",[0,0]),oa(id,cf),oa(od,Fd),Ma(Zo,"sampleCoverage",[1,!1]),oa(rl,Ud),Ma(qo,"stencilMask",-1),Ma(us,"stencilFunc",[Lh,0,-1]),Ma(ls,"stencilOpSeparate",[Fc,$u,$u,$u]),Ma(Wl,"stencilOpSeparate",[Sl,$u,$u,$u]),oa(uu,ih),Ma(Nc,"scissor",[0,0,ge.drawingBufferWidth,ge.drawingBufferHeight]),Ma(al,al,[0,0,ge.drawingBufferWidth,ge.drawingBufferHeight]);var Pr={gl:ge,context:Ir,strings:_e,next:na,current:Pn,draw:Cr,elements:kn,buffer:Vn,shader:Er,attributes:mr.state,vao:mr,uniforms:Sn,framebuffer:ur,extensions:Et,timer:Mr,isBufferArgs:mc},Tr={primTypes:Se,compareFuncs:vc,blendFuncs:ol,blendEquations:fn,stencilOps:Dl,glTypes:bu,orientationType:hd};Ce.optional(function(){Pr.isArrayLike=rt}),Fr&&(Tr.backBuffer=[Sl],Tr.drawBuffer=cn(vn.maxDrawbuffers,function(ot){return ot===0?[0]:cn(ot,function(Ge){return lh+Ge})}));var er=0;function ha(){var ot=ah(),Ge=ot.link,Nt=ot.global;ot.id=er++,ot.batchId="0";var tn=Ge(Pr),nn=ot.shared={props:"a0"};Object.keys(Pr).forEach(function(Mt){nn[Mt]=Nt.def(tn,".",Mt)}),Ce.optional(function(){ot.CHECK=Ge(Ce),ot.commandStr=Ce.guessCommand(),ot.command=Ge(ot.commandStr),ot.assert=function(Mt,qe,Zt){Mt("if(!(",qe,"))",this.CHECK,".commandRaise(",Ge(Zt),",",this.command,");")},Tr.invalidBlendCombinations=ku});var jt=ot.next={},Lt=ot.current={};Object.keys(ir).forEach(function(Mt){Array.isArray(Pn[Mt])&&(jt[Mt]=Nt.def(nn.next,".",Mt),Lt[Mt]=Nt.def(nn.current,".",Mt))});var Yt=ot.constants={};Object.keys(Tr).forEach(function(Mt){Yt[Mt]=Nt.def(JSON.stringify(Tr[Mt]))}),ot.invoke=function(Mt,qe){switch(qe.type){case td:var Zt=["this",nn.context,nn.props,ot.batchId];return Mt.def(Ge(qe.data),".call(",Zt.slice(0,Math.max(qe.data.length+1,4)),")");case uc:return Mt.def(nn.props,qe.data);case af:return Mt.def(nn.context,qe.data);case nd:return Mt.def("this",qe.data);case rd:return qe.data.append(ot,Mt),qe.data.ref;case io:return qe.data.toString();case Rd:return qe.data.map(function(sn){return ot.invoke(Mt,sn)})}},ot.attribCache={};var nt={};return ot.scopeAttrib=function(Mt){var qe=_e.id(Mt);if(qe in nt)return nt[qe];var Zt=mr.scope[qe];Zt||(Zt=mr.scope[qe]=new mn);var sn=nt[qe]=Ge(Zt);return sn},ot}function Wa(ot){var Ge=ot.static,Nt=ot.dynamic,tn;if(Cl in Ge){var nn=!!Ge[Cl];tn=Ro(function(Lt,Yt){return nn}),tn.enable=nn}else if(Cl in Nt){var jt=Nt[Cl];tn=zo(jt,function(Lt,Yt){return Lt.invoke(Yt,jt)})}return tn}function Jr(ot,Ge){var Nt=ot.static,tn=ot.dynamic;if(Ks in Nt){var nn=Nt[Ks];return nn?(nn=ur.getFramebuffer(nn),Ce.command(nn,"invalid framebuffer object"),Ro(function(Lt,Yt){var nt=Lt.link(nn),Mt=Lt.shared;Yt.set(Mt.framebuffer,".next",nt);var qe=Mt.context;return Yt.set(qe,"."+Du,nt+".width"),Yt.set(qe,"."+Vo,nt+".height"),nt})):Ro(function(Lt,Yt){var nt=Lt.shared;Yt.set(nt.framebuffer,".next","null");var Mt=nt.context;return Yt.set(Mt,"."+Du,Mt+"."+jd),Yt.set(Mt,"."+Vo,Mt+"."+Lf),"null"})}else if(Ks in tn){var jt=tn[Ks];return zo(jt,function(Lt,Yt){var nt=Lt.invoke(Yt,jt),Mt=Lt.shared,qe=Mt.framebuffer,Zt=Yt.def(qe,".getFramebuffer(",nt,")");Ce.optional(function(){Lt.assert(Yt,"!"+nt+"||"+Zt,"invalid framebuffer object")}),Yt.set(qe,".next",Zt);var sn=Mt.context;return Yt.set(sn,"."+Du,Zt+"?"+Zt+".width:"+sn+"."+jd),Yt.set(sn,"."+Vo,Zt+"?"+Zt+".height:"+sn+"."+Lf),Zt})}else return null}function Ja(ot,Ge,Nt){var tn=ot.static,nn=ot.dynamic;function jt(nt){if(nt in tn){var Mt=tn[nt];Ce.commandType(Mt,"object","invalid "+nt,Nt.commandStr);var qe=!0,Zt=Mt.x|0,sn=Mt.y|0,$n,Qn;return"width"in Mt?($n=Mt.width|0,Ce.command($n>=0,"invalid "+nt,Nt.commandStr)):qe=!1,"height"in Mt?(Qn=Mt.height|0,Ce.command(Qn>=0,"invalid "+nt,Nt.commandStr)):qe=!1,new As(!qe&&Ge&&Ge.thisDep,!qe&&Ge&&Ge.contextDep,!qe&&Ge&&Ge.propDep,function(h,x){var F=h.shared.context,Q=$n;"width"in Mt||(Q=x.def(F,".",Du,"-",Zt));var pe=Qn;return"height"in Mt||(pe=x.def(F,".",Vo,"-",sn)),[Zt,sn,Q,pe]})}else if(nt in nn){var zn=nn[nt],d=zo(zn,function(h,x){var F=h.invoke(x,zn);Ce.optional(function(){h.assert(x,F+"&&typeof "+F+'==="object"',"invalid "+nt)});var Q=h.shared.context,pe=x.def(F,".x|0"),je=x.def(F,".y|0"),ct=x.def('"width" in ',F,"?",F,".width|0:","(",Q,".",Du,"-",pe,")"),yn=x.def('"height" in ',F,"?",F,".height|0:","(",Q,".",Vo,"-",je,")");return Ce.optional(function(){h.assert(x,ct+">=0&&"+yn+">=0","invalid "+nt)}),[pe,je,ct,yn]});return Ge&&(d.thisDep=d.thisDep||Ge.thisDep,d.contextDep=d.contextDep||Ge.contextDep,d.propDep=d.propDep||Ge.propDep),d}else return Ge?new As(Ge.thisDep,Ge.contextDep,Ge.propDep,function(h,x){var F=h.shared.context;return[0,0,x.def(F,".",Du),x.def(F,".",Vo)]}):null}var Lt=jt(al);if(Lt){var Yt=Lt;Lt=new As(Lt.thisDep,Lt.contextDep,Lt.propDep,function(nt,Mt){var qe=Yt.append(nt,Mt),Zt=nt.shared.context;return Mt.set(Zt,"."+Pc,qe[2]),Mt.set(Zt,"."+sd,qe[3]),qe})}return{viewport:Lt,scissor_box:jt(Nc)}}function Aa(ot,Ge){var Nt=ot.static,tn=typeof Nt[Tl]=="string"&&typeof Nt[Hu]=="string";if(tn){if(Object.keys(Ge.dynamic).length>0)return null;var nn=Ge.static,jt=Object.keys(nn);if(jt.length>0&&typeof nn[jt[0]]=="number"){for(var Lt=[],Yt=0;Yt<jt.length;++Yt)Ce(typeof nn[jt[Yt]]=="number","must specify all vertex attribute locations when using vaos"),Lt.push([nn[jt[Yt]]|0,jt[Yt]]);return Lt}}return null}function ei(ot,Ge,Nt){var tn=ot.static,nn=ot.dynamic;function jt(qe){if(qe in tn){var Zt=_e.id(tn[qe]);Ce.optional(function(){Er.shader(Wd[qe],Zt,Ce.guessCommand())});var sn=Ro(function(){return Zt});return sn.id=Zt,sn}else if(qe in nn){var $n=nn[qe];return zo($n,function(Qn,zn){var d=Qn.invoke(zn,$n),h=zn.def(Qn.shared.strings,".id(",d,")");return Ce.optional(function(){zn(Qn.shared.shader,".shader(",Wd[qe],",",h,",",Qn.command,");")}),h})}return null}var Lt=jt(Tl),Yt=jt(Hu),nt=null,Mt;return $l(Lt)&&$l(Yt)?(nt=Er.program(Yt.id,Lt.id,null,Nt),Mt=Ro(function(qe,Zt){return qe.link(nt)})):Mt=new As(Lt&&Lt.thisDep||Yt&&Yt.thisDep,Lt&&Lt.contextDep||Yt&&Yt.contextDep,Lt&&Lt.propDep||Yt&&Yt.propDep,function(qe,Zt){var sn=qe.shared.shader,$n;Lt?$n=Lt.append(qe,Zt):$n=Zt.def(sn,".",Tl);var Qn;Yt?Qn=Yt.append(qe,Zt):Qn=Zt.def(sn,".",Hu);var zn=sn+".program("+Qn+","+$n;return Ce.optional(function(){zn+=","+qe.command}),Zt.def(zn+")")}),{frag:Lt,vert:Yt,progVar:Mt,program:nt}}function gi(ot,Ge){var Nt=ot.static,tn=ot.dynamic;function nn(){if(Al in Nt){var qe=Nt[Al];mc(qe)?qe=kn.getElements(kn.create(qe,!0)):qe&&(qe=kn.getElements(qe),Ce.command(qe,"invalid elements",Ge.commandStr));var Zt=Ro(function($n,Qn){if(qe){var zn=$n.link(qe);return $n.ELEMENTS=zn,zn}return $n.ELEMENTS=null,null});return Zt.value=qe,Zt}else if(Al in tn){var sn=tn[Al];return zo(sn,function($n,Qn){var zn=$n.shared,d=zn.isBufferArgs,h=zn.elements,x=$n.invoke(Qn,sn),F=Qn.def("null"),Q=Qn.def(d,"(",x,")"),pe=$n.cond(Q).then(F,"=",h,".createStream(",x,");").else(F,"=",h,".getElements(",x,");");return Ce.optional(function(){$n.assert(pe.else,"!"+x+"||"+F,"invalid elements")}),Qn.entry(pe),Qn.exit($n.cond(Q).then(h,".destroyStream(",F,");")),$n.ELEMENTS=F,F})}return null}var jt=nn();function Lt(){if(lu in Nt){var qe=Nt[lu];return Ce.commandParameter(qe,Se,"invalid primitve",Ge.commandStr),Ro(function(sn,$n){return Se[qe]})}else if(lu in tn){var Zt=tn[lu];return zo(Zt,function(sn,$n){var Qn=sn.constants.primTypes,zn=sn.invoke($n,Zt);return Ce.optional(function(){sn.assert($n,zn+" in "+Qn,"invalid primitive, must be one of "+Object.keys(Se))}),$n.def(Qn,"[",zn,"]")})}else if(jt)return $l(jt)?jt.value?Ro(function(sn,$n){return $n.def(sn.ELEMENTS,".primType")}):Ro(function(){return Gd}):new As(jt.thisDep,jt.contextDep,jt.propDep,function(sn,$n){var Qn=sn.ELEMENTS;return $n.def(Qn,"?",Qn,".primType:",Gd)});return null}function Yt(qe,Zt){if(qe in Nt){var sn=Nt[qe]|0;return Ce.command(!Zt||sn>=0,"invalid "+qe,Ge.commandStr),Ro(function(Qn,zn){return Zt&&(Qn.OFFSET=sn),sn})}else if(qe in tn){var $n=tn[qe];return zo($n,function(Qn,zn){var d=Qn.invoke(zn,$n);return Zt&&(Qn.OFFSET=d,Ce.optional(function(){Qn.assert(zn,d+">=0","invalid "+qe)})),d})}else if(Zt&&jt)return Ro(function(Qn,zn){return Qn.OFFSET="0",0});return null}var nt=Yt(Ld,!0);function Mt(){if(Hl in Nt){var qe=Nt[Hl]|0;return Ce.command(typeof qe=="number"&&qe>=0,"invalid vertex count",Ge.commandStr),Ro(function(){return qe})}else if(Hl in tn){var Zt=tn[Hl];return zo(Zt,function(Qn,zn){var d=Qn.invoke(zn,Zt);return Ce.optional(function(){Qn.assert(zn,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")}),d})}else if(jt)if($l(jt)){if(jt)return nt?new As(nt.thisDep,nt.contextDep,nt.propDep,function(Qn,zn){var d=zn.def(Qn.ELEMENTS,".vertCount-",Qn.OFFSET);return Ce.optional(function(){Qn.assert(zn,d+">=0","invalid vertex offset/element buffer too small")}),d}):Ro(function(Qn,zn){return zn.def(Qn.ELEMENTS,".vertCount")});var sn=Ro(function(){return-1});return Ce.optional(function(){sn.MISSING=!0}),sn}else{var $n=new As(jt.thisDep||nt.thisDep,jt.contextDep||nt.contextDep,jt.propDep||nt.propDep,function(Qn,zn){var d=Qn.ELEMENTS;return Qn.OFFSET?zn.def(d,"?",d,".vertCount-",Qn.OFFSET,":-1"):zn.def(d,"?",d,".vertCount:-1")});return Ce.optional(function(){$n.DYNAMIC=!0}),$n}return null}return{elements:jt,primitive:Lt(),count:Mt(),instances:Yt(hc,!1),offset:nt}}function So(ot,Ge){var Nt=ot.static,tn=ot.dynamic,nn={};return dr.forEach(function(jt){var Lt=fr(jt);function Yt(nt,Mt){if(jt in Nt){var qe=nt(Nt[jt]);nn[Lt]=Ro(function(){return qe})}else if(jt in tn){var Zt=tn[jt];nn[Lt]=zo(Zt,function(sn,$n){return Mt(sn,$n,sn.invoke($n,Zt))})}}switch(jt){case kc:case ad:case Mc:case rl:case cc:case uu:case No:case id:case od:case Wu:return Yt(function(nt){return Ce.commandType(nt,"boolean",jt,Ge.commandStr),nt},function(nt,Mt,qe){return Ce.optional(function(){nt.assert(Mt,"typeof "+qe+'==="boolean"',"invalid flag "+jt,nt.commandStr)}),qe});case Xu:return Yt(function(nt){return Ce.commandParameter(nt,vc,"invalid "+jt,Ge.commandStr),vc[nt]},function(nt,Mt,qe){var Zt=nt.constants.compareFuncs;return Ce.optional(function(){nt.assert(Mt,qe+" in "+Zt,"invalid "+jt+", must be one of "+Object.keys(vc))}),Mt.def(Zt,"[",qe,"]")});case _c:return Yt(function(nt){return Ce.command(rt(nt)&&nt.length===2&&typeof nt[0]=="number"&&typeof nt[1]=="number"&&nt[0]<=nt[1],"depth range is 2d array",Ge.commandStr),nt},function(nt,Mt,qe){Ce.optional(function(){nt.assert(Mt,nt.shared.isArrayLike+"("+qe+")&&"+qe+".length===2&&typeof "+qe+'[0]==="number"&&typeof '+qe+'[1]==="number"&&'+qe+"[0]<="+qe+"[1]","depth range must be a 2d array")});var Zt=Mt.def("+",qe,"[0]"),sn=Mt.def("+",qe,"[1]");return[Zt,sn]});case Pd:return Yt(function(nt){Ce.commandType(nt,"object","blend.func",Ge.commandStr);var Mt="srcRGB"in nt?nt.srcRGB:nt.src,qe="srcAlpha"in nt?nt.srcAlpha:nt.src,Zt="dstRGB"in nt?nt.dstRGB:nt.dst,sn="dstAlpha"in nt?nt.dstAlpha:nt.dst;return Ce.commandParameter(Mt,ol,Lt+".srcRGB",Ge.commandStr),Ce.commandParameter(qe,ol,Lt+".srcAlpha",Ge.commandStr),Ce.commandParameter(Zt,ol,Lt+".dstRGB",Ge.commandStr),Ce.commandParameter(sn,ol,Lt+".dstAlpha",Ge.commandStr),Ce.command(ku.indexOf(Mt+", "+Zt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Mt+", "+Zt+")",Ge.commandStr),[ol[Mt],ol[Zt],ol[qe],ol[sn]]},function(nt,Mt,qe){var Zt=nt.constants.blendFuncs;Ce.optional(function(){nt.assert(Mt,qe+"&&typeof "+qe+'==="object"',"invalid blend func, must be an object")});function sn(F,Q){var pe=Mt.def('"',F,Q,'" in ',qe,"?",qe,".",F,Q,":",qe,".",F);return Ce.optional(function(){nt.assert(Mt,pe+" in "+Zt,"invalid "+jt+"."+F+Q+", must be one of "+Object.keys(ol))}),pe}var $n=sn("src","RGB"),Qn=sn("dst","RGB");Ce.optional(function(){var F=nt.constants.invalidBlendCombinations;nt.assert(Mt,F+".indexOf("+$n+'+", "+'+Qn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var zn=Mt.def(Zt,"[",$n,"]"),d=Mt.def(Zt,"[",sn("src","Alpha"),"]"),h=Mt.def(Zt,"[",Qn,"]"),x=Mt.def(Zt,"[",sn("dst","Alpha"),"]");return[zn,h,d,x]});case lc:return Yt(function(nt){if(typeof nt=="string")return Ce.commandParameter(nt,fn,"invalid "+jt,Ge.commandStr),[fn[nt],fn[nt]];if(typeof nt=="object")return Ce.commandParameter(nt.rgb,fn,jt+".rgb",Ge.commandStr),Ce.commandParameter(nt.alpha,fn,jt+".alpha",Ge.commandStr),[fn[nt.rgb],fn[nt.alpha]];Ce.commandRaise("invalid blend.equation",Ge.commandStr)},function(nt,Mt,qe){var Zt=nt.constants.blendEquations,sn=Mt.def(),$n=Mt.def(),Qn=nt.cond("typeof ",qe,'==="string"');return Ce.optional(function(){function zn(d,h,x){nt.assert(d,x+" in "+Zt,"invalid "+h+", must be one of "+Object.keys(fn))}zn(Qn.then,jt,qe),nt.assert(Qn.else,qe+"&&typeof "+qe+'==="object"',"invalid "+jt),zn(Qn.else,jt+".rgb",qe+".rgb"),zn(Qn.else,jt+".alpha",qe+".alpha")}),Qn.then(sn,"=",$n,"=",Zt,"[",qe,"];"),Qn.else(sn,"=",Zt,"[",qe,".rgb];",$n,"=",Zt,"[",qe,".alpha];"),Mt(Qn),[sn,$n]});case of:return Yt(function(nt){return Ce.command(rt(nt)&&nt.length===4,"blend.color must be a 4d array",Ge.commandStr),cn(4,function(Mt){return+nt[Mt]})},function(nt,Mt,qe){return Ce.optional(function(){nt.assert(Mt,nt.shared.isArrayLike+"("+qe+")&&"+qe+".length===4","blend.color must be a 4d array")}),cn(4,function(Zt){return Mt.def("+",qe,"[",Zt,"]")})});case qo:return Yt(function(nt){return Ce.commandType(nt,"number",Lt,Ge.commandStr),nt|0},function(nt,Mt,qe){return Ce.optional(function(){nt.assert(Mt,"typeof "+qe+'==="number"',"invalid stencil.mask")}),Mt.def(qe,"|0")});case us:return Yt(function(nt){Ce.commandType(nt,"object",Lt,Ge.commandStr);var Mt=nt.cmp||"keep",qe=nt.ref||0,Zt="mask"in nt?nt.mask:-1;return Ce.commandParameter(Mt,vc,jt+".cmp",Ge.commandStr),Ce.commandType(qe,"number",jt+".ref",Ge.commandStr),Ce.commandType(Zt,"number",jt+".mask",Ge.commandStr),[vc[Mt],qe,Zt]},function(nt,Mt,qe){var Zt=nt.constants.compareFuncs;Ce.optional(function(){function zn(){nt.assert(Mt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}zn(qe+"&&typeof ",qe,'==="object"'),zn('!("cmp" in ',qe,")||(",qe,".cmp in ",Zt,")")});var sn=Mt.def('"cmp" in ',qe,"?",Zt,"[",qe,".cmp]",":",$u),$n=Mt.def(qe,".ref|0"),Qn=Mt.def('"mask" in ',qe,"?",qe,".mask|0:-1");return[sn,$n,Qn]});case ls:case Wl:return Yt(function(nt){Ce.commandType(nt,"object",Lt,Ge.commandStr);var Mt=nt.fail||"keep",qe=nt.zfail||"keep",Zt=nt.zpass||"keep";return Ce.commandParameter(Mt,Dl,jt+".fail",Ge.commandStr),Ce.commandParameter(qe,Dl,jt+".zfail",Ge.commandStr),Ce.commandParameter(Zt,Dl,jt+".zpass",Ge.commandStr),[jt===Wl?Sl:Fc,Dl[Mt],Dl[qe],Dl[Zt]]},function(nt,Mt,qe){var Zt=nt.constants.stencilOps;Ce.optional(function(){nt.assert(Mt,qe+"&&typeof "+qe+'==="object"',"invalid "+jt)});function sn($n){return Ce.optional(function(){nt.assert(Mt,'!("'+$n+'" in '+qe+")||("+qe+"."+$n+" in "+Zt+")","invalid "+jt+"."+$n+", must be one of "+Object.keys(Dl))}),Mt.def('"',$n,'" in ',qe,"?",Zt,"[",qe,".",$n,"]:",$u)}return[jt===Wl?Sl:Fc,sn("fail"),sn("zfail"),sn("zpass")]});case nl:return Yt(function(nt){Ce.commandType(nt,"object",Lt,Ge.commandStr);var Mt=nt.factor|0,qe=nt.units|0;return Ce.commandType(Mt,"number",Lt+".factor",Ge.commandStr),Ce.commandType(qe,"number",Lt+".units",Ge.commandStr),[Mt,qe]},function(nt,Mt,qe){Ce.optional(function(){nt.assert(Mt,qe+"&&typeof "+qe+'==="object"',"invalid "+jt)});var Zt=Mt.def(qe,".factor|0"),sn=Mt.def(qe,".units|0");return[Zt,sn]});case dc:return Yt(function(nt){var Mt=0;return nt==="front"?Mt=Fc:nt==="back"&&(Mt=Sl),Ce.command(!!Mt,Lt,Ge.commandStr),Mt},function(nt,Mt,qe){return Ce.optional(function(){nt.assert(Mt,qe+'==="front"||'+qe+'==="back"',"invalid cull.face")}),Mt.def(qe,'==="front"?',Fc,":",Sl)});case fc:return Yt(function(nt){return Ce.command(typeof nt=="number"&&nt>=vn.lineWidthDims[0]&&nt<=vn.lineWidthDims[1],"invalid line width, must be a positive number between "+vn.lineWidthDims[0]+" and "+vn.lineWidthDims[1],Ge.commandStr),nt},function(nt,Mt,qe){return Ce.optional(function(){nt.assert(Mt,"typeof "+qe+'==="number"&&'+qe+">="+vn.lineWidthDims[0]+"&&"+qe+"<="+vn.lineWidthDims[1],"invalid line width")}),qe});case Id:return Yt(function(nt){return Ce.commandParameter(nt,hd,Lt,Ge.commandStr),hd[nt]},function(nt,Mt,qe){return Ce.optional(function(){nt.assert(Mt,qe+'==="cw"||'+qe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Mt.def(qe+'==="cw"?'+Xd+":"+Bf)});case Hs:return Yt(function(nt){return Ce.command(rt(nt)&&nt.length===4,"color.mask must be length 4 array",Ge.commandStr),nt.map(function(Mt){return!!Mt})},function(nt,Mt,qe){return Ce.optional(function(){nt.assert(Mt,nt.shared.isArrayLike+"("+qe+")&&"+qe+".length===4","invalid color.mask")}),cn(4,function(Zt){return"!!"+qe+"["+Zt+"]"})});case Zo:return Yt(function(nt){Ce.command(typeof nt=="object"&&nt,Lt,Ge.commandStr);var Mt="value"in nt?nt.value:1,qe=!!nt.invert;return Ce.command(typeof Mt=="number"&&Mt>=0&&Mt<=1,"sample.coverage.value must be a number between 0 and 1",Ge.commandStr),[Mt,qe]},function(nt,Mt,qe){Ce.optional(function(){nt.assert(Mt,qe+"&&typeof "+qe+'==="object"',"invalid sample.coverage")});var Zt=Mt.def('"value" in ',qe,"?+",qe,".value:1"),sn=Mt.def("!!",qe,".invert");return[Zt,sn]})}}),nn}function jo(ot,Ge){var Nt=ot.static,tn=ot.dynamic,nn={};return Object.keys(Nt).forEach(function(jt){var Lt=Nt[jt],Yt;if(typeof Lt=="number"||typeof Lt=="boolean")Yt=Ro(function(){return Lt});else if(typeof Lt=="function"){var nt=Lt._reglType;nt==="texture2d"||nt==="textureCube"?Yt=Ro(function(Mt){return Mt.link(Lt)}):nt==="framebuffer"||nt==="framebufferCube"?(Ce.command(Lt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+jt+'"',Ge.commandStr),Yt=Ro(function(Mt){return Mt.link(Lt.color[0])})):Ce.commandRaise('invalid data for uniform "'+jt+'"',Ge.commandStr)}else rt(Lt)?Yt=Ro(function(Mt){var qe=Mt.global.def("[",cn(Lt.length,function(Zt){return Ce.command(typeof Lt[Zt]=="number"||typeof Lt[Zt]=="boolean","invalid uniform "+jt,Mt.commandStr),Lt[Zt]}),"]");return qe}):Ce.commandRaise('invalid or missing data for uniform "'+jt+'"',Ge.commandStr);Yt.value=Lt,nn[jt]=Yt}),Object.keys(tn).forEach(function(jt){var Lt=tn[jt];nn[jt]=zo(Lt,function(Yt,nt){return Yt.invoke(nt,Lt)})}),nn}function oi(ot,Ge){var Nt=ot.static,tn=ot.dynamic,nn={};return Object.keys(Nt).forEach(function(jt){var Lt=Nt[jt],Yt=_e.id(jt),nt=new mn;if(mc(Lt))nt.state=wl,nt.buffer=Vn.getBuffer(Vn.create(Lt,Ys,!1,!0)),nt.type=0;else{var Mt=Vn.getBuffer(Lt);if(Mt)nt.state=wl,nt.buffer=Mt,nt.type=0;else if(Ce.command(typeof Lt=="object"&&Lt,"invalid data for attribute "+jt,Ge.commandStr),"constant"in Lt){var qe=Lt.constant;nt.buffer="null",nt.state=ed,typeof qe=="number"?nt.x=qe:(Ce.command(rt(qe)&&qe.length>0&&qe.length<=4,"invalid constant for attribute "+jt,Ge.commandStr),xl.forEach(function(h,x){x<qe.length&&(nt[h]=qe[x])}))}else{mc(Lt.buffer)?Mt=Vn.getBuffer(Vn.create(Lt.buffer,Ys,!1,!0)):Mt=Vn.getBuffer(Lt.buffer),Ce.command(!!Mt,'missing buffer for attribute "'+jt+'"',Ge.commandStr);var Zt=Lt.offset|0;Ce.command(Zt>=0,'invalid offset for attribute "'+jt+'"',Ge.commandStr);var sn=Lt.stride|0;Ce.command(sn>=0&&sn<256,'invalid stride for attribute "'+jt+'", must be integer betweeen [0, 255]',Ge.commandStr);var $n=Lt.size|0;Ce.command(!("size"in Lt)||$n>0&&$n<=4,'invalid size for attribute "'+jt+'", must be 1,2,3,4',Ge.commandStr);var Qn=!!Lt.normalized,zn=0;"type"in Lt&&(Ce.commandParameter(Lt.type,bu,"invalid type for attribute "+jt,Ge.commandStr),zn=bu[Lt.type]);var d=Lt.divisor|0;"divisor"in Lt&&(Ce.command(d===0||br,'cannot specify divisor for attribute "'+jt+'", instancing not supported',Ge.commandStr),Ce.command(d>=0,'invalid divisor for attribute "'+jt+'"',Ge.commandStr)),Ce.optional(function(){var h=Ge.commandStr,x=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Lt).forEach(function(F){Ce.command(x.indexOf(F)>=0,'unknown parameter "'+F+'" for attribute pointer "'+jt+'" (valid parameters are '+x+")",h)})}),nt.buffer=Mt,nt.state=wl,nt.size=$n,nt.normalized=Qn,nt.type=zn||Mt.dtype,nt.offset=Zt,nt.stride=sn,nt.divisor=d}}nn[jt]=Ro(function(h,x){var F=h.attribCache;if(Yt in F)return F[Yt];var Q={isStream:!1};return Object.keys(nt).forEach(function(pe){Q[pe]=nt[pe]}),nt.buffer&&(Q.buffer=h.link(nt.buffer),Q.type=Q.type||Q.buffer+".dtype"),F[Yt]=Q,Q})}),Object.keys(tn).forEach(function(jt){var Lt=tn[jt];function Yt(nt,Mt){var qe=nt.invoke(Mt,Lt),Zt=nt.shared,sn=nt.constants,$n=Zt.isBufferArgs,Qn=Zt.buffer;Ce.optional(function(){nt.assert(Mt,qe+"&&(typeof "+qe+'==="object"||typeof '+qe+'==="function")&&('+$n+"("+qe+")||"+Qn+".getBuffer("+qe+")||"+Qn+".getBuffer("+qe+".buffer)||"+$n+"("+qe+'.buffer)||("constant" in '+qe+"&&(typeof "+qe+'.constant==="number"||'+Zt.isArrayLike+"("+qe+".constant))))",'invalid dynamic attribute "'+jt+'"')});var zn={isStream:Mt.def(!1)},d=new mn;d.state=wl,Object.keys(d).forEach(function(Q){zn[Q]=Mt.def(""+d[Q])});var h=zn.buffer,x=zn.type;Mt("if(",$n,"(",qe,")){",zn.isStream,"=true;",h,"=",Qn,".createStream(",Ys,",",qe,");",x,"=",h,".dtype;","}else{",h,"=",Qn,".getBuffer(",qe,");","if(",h,"){",x,"=",h,".dtype;",'}else if("constant" in ',qe,"){",zn.state,"=",ed,";","if(typeof "+qe+'.constant === "number"){',zn[xl[0]],"=",qe,".constant;",xl.slice(1).map(function(Q){return zn[Q]}).join("="),"=0;","}else{",xl.map(function(Q,pe){return zn[Q]+"="+qe+".constant.length>"+pe+"?"+qe+".constant["+pe+"]:0;"}).join(""),"}}else{","if(",$n,"(",qe,".buffer)){",h,"=",Qn,".createStream(",Ys,",",qe,".buffer);","}else{",h,"=",Qn,".getBuffer(",qe,".buffer);","}",x,'="type" in ',qe,"?",sn.glTypes,"[",qe,".type]:",h,".dtype;",zn.normalized,"=!!",qe,".normalized;");function F(Q){Mt(zn[Q],"=",qe,".",Q,"|0;")}return F("size"),F("offset"),F("stride"),F("divisor"),Mt("}}"),Mt.exit("if(",zn.isStream,"){",Qn,".destroyStream(",h,");","}"),zn}nn[jt]=zo(Lt,Yt)}),nn}function Ni(ot,Ge){var Nt=ot.static,tn=ot.dynamic;if(Rc in Nt){var nn=Nt[Rc];return nn!==null&&mr.getVAO(nn)===null&&(nn=mr.createVAO(nn)),Ro(function(Lt){return Lt.link(mr.getVAO(nn))})}else if(Rc in tn){var jt=tn[Rc];return zo(jt,function(Lt,Yt){var nt=Lt.invoke(Yt,jt);return Yt.def(Lt.shared.vao+".getVAO("+nt+")")})}return null}function oo(ot){var Ge=ot.static,Nt=ot.dynamic,tn={};return Object.keys(Ge).forEach(function(nn){var jt=Ge[nn];tn[nn]=Ro(function(Lt,Yt){return typeof jt=="number"||typeof jt=="boolean"?""+jt:Lt.link(jt)})}),Object.keys(Nt).forEach(function(nn){var jt=Nt[nn];tn[nn]=zo(jt,function(Lt,Yt){return Lt.invoke(Yt,jt)})}),tn}function Uo(ot,Ge,Nt,tn,nn){var jt=ot.static,Lt=ot.dynamic;Ce.optional(function(){var F=[Ks,Hu,Tl,Al,lu,Ld,Hl,hc,Cl,Rc].concat(dr);function Q(pe){Object.keys(pe).forEach(function(je){Ce.command(F.indexOf(je)>=0,'unknown parameter "'+je+'"',nn.commandStr)})}Q(jt),Q(Lt)});var Yt=Aa(ot,Ge),nt=Jr(ot,nn),Mt=Ja(ot,nt,nn),qe=gi(ot,nn),Zt=So(ot,nn),sn=ei(ot,nn,Yt);function $n(F){var Q=Mt[F];Q&&(Zt[F]=Q)}$n(al),$n(fr(Nc));var Qn=Object.keys(Zt).length>0,zn={framebuffer:nt,draw:qe,shader:sn,state:Zt,dirty:Qn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(zn.profile=Wa(ot,nn),zn.uniforms=jo(Nt,nn),zn.drawVAO=zn.scopeVAO=Ni(ot,nn),!zn.drawVAO&&sn.program&&!Yt&&Et.angle_instanced_arrays){var d=!0,h=sn.program.attributes.map(function(F){var Q=Ge.static[F];return d=d&&!!Q,Q});if(d&&h.length>0){var x=mr.getVAO(mr.createVAO(h));zn.drawVAO=new As(null,null,null,function(F,Q){return F.link(x)}),zn.useVAO=!0}}return Yt?zn.useVAO=!0:zn.attributes=oi(Ge,nn),zn.context=oo(tn,nn),zn}function po(ot,Ge,Nt){var tn=ot.shared,nn=tn.context,jt=ot.scope();Object.keys(Nt).forEach(function(Lt){Ge.save(nn,"."+Lt);var Yt=Nt[Lt],nt=Yt.append(ot,Ge);Array.isArray(nt)?jt(nn,".",Lt,"=[",nt.join(),"];"):jt(nn,".",Lt,"=",nt,";")}),Ge(jt)}function Po(ot,Ge,Nt,tn){var nn=ot.shared,jt=nn.gl,Lt=nn.framebuffer,Yt;Fr&&(Yt=Ge.def(nn.extensions,".webgl_draw_buffers"));var nt=ot.constants,Mt=nt.drawBuffer,qe=nt.backBuffer,Zt;Nt?Zt=Nt.append(ot,Ge):Zt=Ge.def(Lt,".next"),tn||Ge("if(",Zt,"!==",Lt,".cur){"),Ge("if(",Zt,"){",jt,".bindFramebuffer(",zf,",",Zt,".framebuffer);"),Fr&&Ge(Yt,".drawBuffersWEBGL(",Mt,"[",Zt,".colorAttachments.length]);"),Ge("}else{",jt,".bindFramebuffer(",zf,",null);"),Fr&&Ge(Yt,".drawBuffersWEBGL(",qe,");"),Ge("}",Lt,".cur=",Zt,";"),tn||Ge("}")}function Xo(ot,Ge,Nt){var tn=ot.shared,nn=tn.gl,jt=ot.current,Lt=ot.next,Yt=tn.current,nt=tn.next,Mt=ot.cond(Yt,".dirty");dr.forEach(function(qe){var Zt=fr(qe);if(Zt in Nt.state)return;var sn,$n;if(Zt in Lt){sn=Lt[Zt],$n=jt[Zt];var Qn=cn(Pn[Zt].length,function(d){return Mt.def(sn,"[",d,"]")});Mt(ot.cond(Qn.map(function(d,h){return d+"!=="+$n+"["+h+"]"}).join("||")).then(nn,".",ir[Zt],"(",Qn,");",Qn.map(function(d,h){return $n+"["+h+"]="+d}).join(";"),";"))}else{sn=Mt.def(nt,".",Zt);var zn=ot.cond(sn,"!==",Yt,".",Zt);Mt(zn),Zt in lr?zn(ot.cond(sn).then(nn,".enable(",lr[Zt],");").else(nn,".disable(",lr[Zt],");"),Yt,".",Zt,"=",sn,";"):zn(nn,".",ir[Zt],"(",sn,");",Yt,".",Zt,"=",sn,";")}}),Object.keys(Nt.state).length===0&&Mt(Yt,".dirty=false;"),Ge(Mt)}function Do(ot,Ge,Nt,tn){var nn=ot.shared,jt=ot.current,Lt=nn.current,Yt=nn.gl;Hd(Object.keys(Nt)).forEach(function(nt){var Mt=Nt[nt];if(tn&&!tn(Mt))return;var qe=Mt.append(ot,Ge);if(lr[nt]){var Zt=lr[nt];$l(Mt)?qe?Ge(Yt,".enable(",Zt,");"):Ge(Yt,".disable(",Zt,");"):Ge(ot.cond(qe).then(Yt,".enable(",Zt,");").else(Yt,".disable(",Zt,");")),Ge(Lt,".",nt,"=",qe,";")}else if(rt(qe)){var sn=jt[nt];Ge(Yt,".",ir[nt],"(",qe,");",qe.map(function($n,Qn){return sn+"["+Qn+"]="+$n}).join(";"),";")}else Ge(Yt,".",ir[nt],"(",qe,");",Lt,".",nt,"=",qe,";")})}function vo(ot,Ge){br&&(ot.instancing=Ge.def(ot.shared.extensions,".angle_instanced_arrays"))}function Ha(ot,Ge,Nt,tn,nn){var jt=ot.shared,Lt=ot.stats,Yt=jt.current,nt=jt.timer,Mt=Nt.profile;function qe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Zt,sn;function $n(F){Zt=Ge.def(),F(Zt,"=",qe(),";"),typeof nn=="string"?F(Lt,".count+=",nn,";"):F(Lt,".count++;"),Mr&&(tn?(sn=Ge.def(),F(sn,"=",nt,".getNumPendingQueries();")):F(nt,".beginQuery(",Lt,");"))}function Qn(F){F(Lt,".cpuTime+=",qe(),"-",Zt,";"),Mr&&(tn?F(nt,".pushScopeStats(",sn,",",nt,".getNumPendingQueries(),",Lt,");"):F(nt,".endQuery();"))}function zn(F){var Q=Ge.def(Yt,".profile");Ge(Yt,".profile=",F,";"),Ge.exit(Yt,".profile=",Q,";")}var d;if(Mt){if($l(Mt)){Mt.enable?($n(Ge),Qn(Ge.exit),zn("true")):zn("false");return}d=Mt.append(ot,Ge),zn(d)}else d=Ge.def(Yt,".profile");var h=ot.block();$n(h),Ge("if(",d,"){",h,"}");var x=ot.block();Qn(x),Ge.exit("if(",d,"){",x,"}")}function Wo(ot,Ge,Nt,tn,nn){var jt=ot.shared;function Lt(nt){switch(nt){case Fs:case ud:case cd:return 2;case Bd:case Mu:case jc:return 3;case Vd:case ld:case zd:return 4;default:return 1}}function Yt(nt,Mt,qe){var Zt=jt.gl,sn=Ge.def(nt,".location"),$n=Ge.def(jt.attributes,"[",sn,"]"),Qn=qe.state,zn=qe.buffer,d=[qe.x,qe.y,qe.z,qe.w],h=["buffer","normalized","offset","stride"];function x(){Ge("if(!",$n,".buffer){",Zt,".enableVertexAttribArray(",sn,");}");var Q=qe.type,pe;if(qe.size?pe=Ge.def(qe.size,"||",Mt):pe=Mt,Ge("if(",$n,".type!==",Q,"||",$n,".size!==",pe,"||",h.map(function(ct){return $n+"."+ct+"!=="+qe[ct]}).join("||"),"){",Zt,".bindBuffer(",Ys,",",zn,".buffer);",Zt,".vertexAttribPointer(",[sn,pe,Q,qe.normalized,qe.stride,qe.offset],");",$n,".type=",Q,";",$n,".size=",pe,";",h.map(function(ct){return $n+"."+ct+"="+qe[ct]+";"}).join(""),"}"),br){var je=qe.divisor;Ge("if(",$n,".divisor!==",je,"){",ot.instancing,".vertexAttribDivisorANGLE(",[sn,je],");",$n,".divisor=",je,";}")}}function F(){Ge("if(",$n,".buffer){",Zt,".disableVertexAttribArray(",sn,");",$n,".buffer=null;","}if(",xl.map(function(Q,pe){return $n+"."+Q+"!=="+d[pe]}).join("||"),"){",Zt,".vertexAttrib4f(",sn,",",d,");",xl.map(function(Q,pe){return $n+"."+Q+"="+d[pe]+";"}).join(""),"}")}Qn===wl?x():Qn===ed?F():(Ge("if(",Qn,"===",wl,"){"),x(),Ge("}else{"),F(),Ge("}"))}tn.forEach(function(nt){var Mt=nt.name,qe=Nt.attributes[Mt],Zt;if(qe){if(!nn(qe))return;Zt=qe.append(ot,Ge)}else{if(!nn(ch))return;var sn=ot.scopeAttrib(Mt);Ce.optional(function(){ot.assert(Ge,sn+".state","missing attribute "+Mt)}),Zt={},Object.keys(new mn).forEach(function($n){Zt[$n]=Ge.def(sn,".",$n)})}Yt(ot.link(nt),Lt(nt.info.type),Zt)})}function yi(ot,Ge,Nt,tn,nn){for(var jt=ot.shared,Lt=jt.gl,Yt,nt=0;nt<tn.length;++nt){var Mt=tn[nt],qe=Mt.name,Zt=Mt.info.type,sn=Nt.uniforms[qe],$n=ot.link(Mt),Qn=$n+".location",zn;if(sn){if(!nn(sn))continue;if($l(sn)){var d=sn.value;if(Ce.command(d!==null&&typeof d!="undefined",'missing uniform "'+qe+'"',ot.commandStr),Zt===_u||Zt===fd){Ce.command(typeof d=="function"&&(Zt===_u&&(d._reglType==="texture2d"||d._reglType==="framebuffer")||Zt===fd&&(d._reglType==="textureCube"||d._reglType==="framebufferCube")),"invalid texture for uniform "+qe,ot.commandStr);var h=ot.link(d._texture||d.color[0]._texture);Ge(Lt,".uniform1i(",Qn,",",h+".bind());"),Ge.exit(h,".unbind();")}else if(Zt===dd||Zt===Ol||Zt===Uc){Ce.optional(function(){Ce.command(rt(d),"invalid matrix for uniform "+qe,ot.commandStr),Ce.command(Zt===dd&&d.length===4||Zt===Ol&&d.length===9||Zt===Uc&&d.length===16,"invalid length for matrix uniform "+qe,ot.commandStr)});var x=ot.global.def("new Float32Array(["+Array.prototype.slice.call(d)+"])"),F=2;Zt===Ol?F=3:Zt===Uc&&(F=4),Ge(Lt,".uniformMatrix",F,"fv(",Qn,",false,",x,");")}else{switch(Zt){case Ku:Ce.commandType(d,"number","uniform "+qe,ot.commandStr),Yt="1f";break;case Fs:Ce.command(rt(d)&&d.length===2,"uniform "+qe,ot.commandStr),Yt="2f";break;case Bd:Ce.command(rt(d)&&d.length===3,"uniform "+qe,ot.commandStr),Yt="3f";break;case Vd:Ce.command(rt(d)&&d.length===4,"uniform "+qe,ot.commandStr),Yt="4f";break;case es:Ce.commandType(d,"boolean","uniform "+qe,ot.commandStr),Yt="1i";break;case il:Ce.commandType(d,"number","uniform "+qe,ot.commandStr),Yt="1i";break;case cd:Ce.command(rt(d)&&d.length===2,"uniform "+qe,ot.commandStr),Yt="2i";break;case ud:Ce.command(rt(d)&&d.length===2,"uniform "+qe,ot.commandStr),Yt="2i";break;case jc:Ce.command(rt(d)&&d.length===3,"uniform "+qe,ot.commandStr),Yt="3i";break;case Mu:Ce.command(rt(d)&&d.length===3,"uniform "+qe,ot.commandStr),Yt="3i";break;case zd:Ce.command(rt(d)&&d.length===4,"uniform "+qe,ot.commandStr),Yt="4i";break;case ld:Ce.command(rt(d)&&d.length===4,"uniform "+qe,ot.commandStr),Yt="4i";break}Ge(Lt,".uniform",Yt,"(",Qn,",",rt(d)?Array.prototype.slice.call(d):d,");")}continue}else zn=sn.append(ot,Ge)}else{if(!nn(ch))continue;zn=Ge.def(jt.uniforms,"[",_e.id(qe),"]")}Zt===_u?(Ce(!Array.isArray(zn),"must specify a scalar prop for textures"),Ge("if(",zn,"&&",zn,'._reglType==="framebuffer"){',zn,"=",zn,".color[0];","}")):Zt===fd&&(Ce(!Array.isArray(zn),"must specify a scalar prop for cube maps"),Ge("if(",zn,"&&",zn,'._reglType==="framebufferCube"){',zn,"=",zn,".color[0];","}")),Ce.optional(function(){function yn(pa,Fi){ot.assert(Ge,pa,'bad data or missing for uniform "'+qe+'".  '+Fi)}function or(pa){Ce(!Array.isArray(zn),"must not specify an array type for uniform"),yn("typeof "+zn+'==="'+pa+'"',"invalid type, expected "+pa)}function wr(pa,Fi){Array.isArray(zn)?Ce(zn.length===pa,"must have length "+pa):yn(jt.isArrayLike+"("+zn+")&&"+zn+".length==="+pa,"invalid vector, should have length "+pa,ot.commandStr)}function ga(pa){Ce(!Array.isArray(zn),"must not specify a value type"),yn("typeof "+zn+'==="function"&&'+zn+'._reglType==="texture'+(pa===Uf?"2d":"Cube")+'"',"invalid texture type",ot.commandStr)}switch(Zt){case il:or("number");break;case ud:wr(2,"number");break;case Mu:wr(3,"number");break;case ld:wr(4,"number");break;case Ku:or("number");break;case Fs:wr(2,"number");break;case Bd:wr(3,"number");break;case Vd:wr(4,"number");break;case es:or("boolean");break;case cd:wr(2,"boolean");break;case jc:wr(3,"boolean");break;case zd:wr(4,"boolean");break;case dd:wr(4,"number");break;case Ol:wr(9,"number");break;case Uc:wr(16,"number");break;case _u:ga(Uf);break;case fd:ga(Qs);break}});var Q=1;switch(Zt){case _u:case fd:var pe=Ge.def(zn,"._texture");Ge(Lt,".uniform1i(",Qn,",",pe,".bind());"),Ge.exit(pe,".unbind();");continue;case il:case es:Yt="1i";break;case ud:case cd:Yt="2i",Q=2;break;case Mu:case jc:Yt="3i",Q=3;break;case ld:case zd:Yt="4i",Q=4;break;case Ku:Yt="1f";break;case Fs:Yt="2f",Q=2;break;case Bd:Yt="3f",Q=3;break;case Vd:Yt="4f",Q=4;break;case dd:Yt="Matrix2fv";break;case Ol:Yt="Matrix3fv";break;case Uc:Yt="Matrix4fv";break}if(Ge(Lt,".uniform",Yt,"(",Qn,","),Yt.charAt(0)==="M"){var je=Math.pow(Zt-dd+2,2),ct=ot.global.def("new Float32Array(",je,")");Array.isArray(zn)?Ge("false,(",cn(je,function(yn){return ct+"["+yn+"]="+zn[yn]}),",",ct,")"):Ge("false,(Array.isArray(",zn,")||",zn," instanceof Float32Array)?",zn,":(",cn(je,function(yn){return ct+"["+yn+"]="+zn+"["+yn+"]"}),",",ct,")")}else Q>1?Ge(cn(Q,function(yn){return Array.isArray(zn)?zn[yn]:zn+"["+yn+"]"})):(Ce(!Array.isArray(zn),"uniform value must not be an array"),Ge(zn));Ge(");")}}function va(ot,Ge,Nt,tn){var nn=ot.shared,jt=nn.gl,Lt=nn.draw,Yt=tn.draw;function nt(){var pe=Yt.elements,je,ct=Ge;return pe?((pe.contextDep&&tn.contextDynamic||pe.propDep)&&(ct=Nt),je=pe.append(ot,ct)):je=ct.def(Lt,".",Al),je&&ct("if("+je+")"+jt+".bindBuffer("+uf+","+je+".buffer.buffer);"),je}function Mt(){var pe=Yt.count,je,ct=Ge;return pe?((pe.contextDep&&tn.contextDynamic||pe.propDep)&&(ct=Nt),je=pe.append(ot,ct),Ce.optional(function(){pe.MISSING&&ot.assert(Ge,"false","missing vertex count"),pe.DYNAMIC&&ot.assert(ct,je+">=0","missing vertex count")})):(je=ct.def(Lt,".",Hl),Ce.optional(function(){ot.assert(ct,je+">=0","missing vertex count")})),je}var qe=nt();function Zt(pe){var je=Yt[pe];return je?je.contextDep&&tn.contextDynamic||je.propDep?je.append(ot,Nt):je.append(ot,Ge):Ge.def(Lt,".",pe)}var sn=Zt(lu),$n=Zt(Ld),Qn=Mt();if(typeof Qn=="number"){if(Qn===0)return}else Nt("if(",Qn,"){"),Nt.exit("}");var zn,d;br&&(zn=Zt(hc),d=ot.instancing);var h=qe+".type",x=Yt.elements&&$l(Yt.elements);function F(){function pe(){Nt(d,".drawElementsInstancedANGLE(",[sn,Qn,h,$n+"<<(("+h+"-"+If+")>>1)",zn],");")}function je(){Nt(d,".drawArraysInstancedANGLE(",[sn,$n,Qn,zn],");")}qe?x?pe():(Nt("if(",qe,"){"),pe(),Nt("}else{"),je(),Nt("}")):je()}function Q(){function pe(){Nt(jt+".drawElements("+[sn,Qn,h,$n+"<<(("+h+"-"+If+")>>1)"]+");")}function je(){Nt(jt+".drawArrays("+[sn,$n,Qn]+");")}qe?x?pe():(Nt("if(",qe,"){"),pe(),Nt("}else{"),je(),Nt("}")):je()}br&&(typeof zn!="number"||zn>=0)?typeof zn=="string"?(Nt("if(",zn,">0){"),F(),Nt("}else if(",zn,"<0){"),Q(),Nt("}")):F():Q()}function Ra(ot,Ge,Nt,tn,nn){var jt=ha(),Lt=jt.proc("body",nn);return Ce.optional(function(){jt.commandStr=Ge.commandStr,jt.command=jt.link(Ge.commandStr)}),br&&(jt.instancing=Lt.def(jt.shared.extensions,".angle_instanced_arrays")),ot(jt,Lt,Nt,tn),jt.compile().body}function hi(ot,Ge,Nt,tn){vo(ot,Ge),Nt.useVAO?Nt.drawVAO?Ge(ot.shared.vao,".setVAO(",Nt.drawVAO.append(ot,Ge),");"):Ge(ot.shared.vao,".setVAO(",ot.shared.vao,".targetVAO);"):(Ge(ot.shared.vao,".setVAO(null);"),Wo(ot,Ge,Nt,tn.attributes,function(){return!0})),yi(ot,Ge,Nt,tn.uniforms,function(){return!0}),va(ot,Ge,Ge,Nt)}function eo(ot,Ge){var Nt=ot.proc("draw",1);vo(ot,Nt),po(ot,Nt,Ge.context),Po(ot,Nt,Ge.framebuffer),Xo(ot,Nt,Ge),Do(ot,Nt,Ge.state),Ha(ot,Nt,Ge,!1,!0);var tn=Ge.shader.progVar.append(ot,Nt);if(Nt(ot.shared.gl,".useProgram(",tn,".program);"),Ge.shader.program)hi(ot,Nt,Ge,Ge.shader.program);else{Nt(ot.shared.vao,".setVAO(null);");var nn=ot.global.def("{}"),jt=Nt.def(tn,".id"),Lt=Nt.def(nn,"[",jt,"]");Nt(ot.cond(Lt).then(Lt,".call(this,a0);").else(Lt,"=",nn,"[",jt,"]=",ot.link(function(Yt){return Ra(hi,ot,Ge,Yt,1)}),"(",tn,");",Lt,".call(this,a0);"))}Object.keys(Ge.state).length>0&&Nt(ot.shared.current,".dirty=true;")}function ms(ot,Ge,Nt,tn){ot.batchId="a1",vo(ot,Ge);function nn(){return!0}Wo(ot,Ge,Nt,tn.attributes,nn),yi(ot,Ge,Nt,tn.uniforms,nn),va(ot,Ge,Ge,Nt)}function Ml(ot,Ge,Nt,tn){vo(ot,Ge);var nn=Nt.contextDep,jt=Ge.def(),Lt="a0",Yt="a1",nt=Ge.def();ot.shared.props=nt,ot.batchId=jt;var Mt=ot.scope(),qe=ot.scope();Ge(Mt.entry,"for(",jt,"=0;",jt,"<",Yt,";++",jt,"){",nt,"=",Lt,"[",jt,"];",qe,"}",Mt.exit);function Zt(h){return h.contextDep&&nn||h.propDep}function sn(h){return!Zt(h)}if(Nt.needsContext&&po(ot,qe,Nt.context),Nt.needsFramebuffer&&Po(ot,qe,Nt.framebuffer),Do(ot,qe,Nt.state,Zt),Nt.profile&&Zt(Nt.profile)&&Ha(ot,qe,Nt,!1,!0),tn)Nt.useVAO?Nt.drawVAO?Zt(Nt.drawVAO)?qe(ot.shared.vao,".setVAO(",Nt.drawVAO.append(ot,qe),");"):Mt(ot.shared.vao,".setVAO(",Nt.drawVAO.append(ot,Mt),");"):Mt(ot.shared.vao,".setVAO(",ot.shared.vao,".targetVAO);"):(Mt(ot.shared.vao,".setVAO(null);"),Wo(ot,Mt,Nt,tn.attributes,sn),Wo(ot,qe,Nt,tn.attributes,Zt)),yi(ot,Mt,Nt,tn.uniforms,sn),yi(ot,qe,Nt,tn.uniforms,Zt),va(ot,Mt,qe,Nt);else{var $n=ot.global.def("{}"),Qn=Nt.shader.progVar.append(ot,qe),zn=qe.def(Qn,".id"),d=qe.def($n,"[",zn,"]");qe(ot.shared.gl,".useProgram(",Qn,".program);","if(!",d,"){",d,"=",$n,"[",zn,"]=",ot.link(function(h){return Ra(ms,ot,Nt,h,2)}),"(",Qn,");}",d,".call(this,a0[",jt,"],",jt,");")}}function ht(ot,Ge){var Nt=ot.proc("batch",2);ot.batchId="0",vo(ot,Nt);var tn=!1,nn=!0;Object.keys(Ge.context).forEach(function($n){tn=tn||Ge.context[$n].propDep}),tn||(po(ot,Nt,Ge.context),nn=!1);var jt=Ge.framebuffer,Lt=!1;jt?(jt.propDep?tn=Lt=!0:jt.contextDep&&tn&&(Lt=!0),Lt||Po(ot,Nt,jt)):Po(ot,Nt,null),Ge.state.viewport&&Ge.state.viewport.propDep&&(tn=!0);function Yt($n){return $n.contextDep&&tn||$n.propDep}Xo(ot,Nt,Ge),Do(ot,Nt,Ge.state,function($n){return!Yt($n)}),(!Ge.profile||!Yt(Ge.profile))&&Ha(ot,Nt,Ge,!1,"a1"),Ge.contextDep=tn,Ge.needsContext=nn,Ge.needsFramebuffer=Lt;var nt=Ge.shader.progVar;if(nt.contextDep&&tn||nt.propDep)Ml(ot,Nt,Ge,null);else{var Mt=nt.append(ot,Nt);if(Nt(ot.shared.gl,".useProgram(",Mt,".program);"),Ge.shader.program)Ml(ot,Nt,Ge,Ge.shader.program);else{Nt(ot.shared.vao,".setVAO(null);");var qe=ot.global.def("{}"),Zt=Nt.def(Mt,".id"),sn=Nt.def(qe,"[",Zt,"]");Nt(ot.cond(sn).then(sn,".call(this,a0,a1);").else(sn,"=",qe,"[",Zt,"]=",ot.link(function($n){return Ra(Ml,ot,Ge,$n,2)}),"(",Mt,");",sn,".call(this,a0,a1);"))}}Object.keys(Ge.state).length>0&&Nt(ot.shared.current,".dirty=true;")}function On(ot,Ge){var Nt=ot.proc("scope",3);ot.batchId="a2";var tn=ot.shared,nn=tn.current;po(ot,Nt,Ge.context),Ge.framebuffer&&Ge.framebuffer.append(ot,Nt),Hd(Object.keys(Ge.state)).forEach(function(Lt){var Yt=Ge.state[Lt],nt=Yt.append(ot,Nt);rt(nt)?nt.forEach(function(Mt,qe){Nt.set(ot.next[Lt],"["+qe+"]",Mt)}):Nt.set(tn.next,"."+Lt,nt)}),Ha(ot,Nt,Ge,!0,!0),[Al,Ld,Hl,hc,lu].forEach(function(Lt){var Yt=Ge.draw[Lt];if(!Yt)return;Nt.set(tn.draw,"."+Lt,""+Yt.append(ot,Nt))}),Object.keys(Ge.uniforms).forEach(function(Lt){var Yt=Ge.uniforms[Lt].append(ot,Nt);Array.isArray(Yt)&&(Yt="["+Yt.join()+"]"),Nt.set(tn.uniforms,"["+_e.id(Lt)+"]",Yt)}),Object.keys(Ge.attributes).forEach(function(Lt){var Yt=Ge.attributes[Lt].append(ot,Nt),nt=ot.scopeAttrib(Lt);Object.keys(new mn).forEach(function(Mt){Nt.set(nt,"."+Mt,Yt[Mt])})}),Ge.scopeVAO&&Nt.set(tn.vao,".targetVAO",Ge.scopeVAO.append(ot,Nt));function jt(Lt){var Yt=Ge.shader[Lt];Yt&&Nt.set(tn.shader,"."+Lt,Yt.append(ot,Nt))}jt(Hu),jt(Tl),Object.keys(Ge.state).length>0&&(Nt(nn,".dirty=true;"),Nt.exit(nn,".dirty=true;")),Nt("a1(",ot.shared.context,",a0,",ot.batchId,");")}function ln(ot){if(typeof ot!="object"||rt(ot))return;for(var Ge=Object.keys(ot),Nt=0;Nt<Ge.length;++Nt)if(pt.isDynamic(ot[Ge[Nt]]))return!0;return!1}function Hr(ot,Ge,Nt){var tn=Ge.static[Nt];if(!tn||!ln(tn))return;var nn=ot.global,jt=Object.keys(tn),Lt=!1,Yt=!1,nt=!1,Mt=ot.global.def("{}");jt.forEach(function(Zt){var sn=tn[Zt];if(pt.isDynamic(sn)){typeof sn=="function"&&(sn=tn[Zt]=pt.unbox(sn));var $n=zo(sn,null);Lt=Lt||$n.thisDep,nt=nt||$n.propDep,Yt=Yt||$n.contextDep}else{nn(Mt,".",Zt,"=");switch(typeof sn){case"number":nn(sn);break;case"string":nn('"',sn,'"');break;case"object":Array.isArray(sn)&&nn("[",sn.join(),"]");break;default:nn(ot.link(sn));break}nn(";")}});function qe(Zt,sn){jt.forEach(function($n){var Qn=tn[$n];if(!pt.isDynamic(Qn))return;var zn=Zt.invoke(sn,Qn);sn(Mt,".",$n,"=",zn,";")})}Ge.dynamic[Nt]=new pt.DynamicVariable(rd,{thisDep:Lt,contextDep:Yt,propDep:nt,ref:Mt,append:qe}),delete Ge.static[Nt]}function Ga(ot,Ge,Nt,tn,nn){var jt=ha();jt.stats=jt.link(nn),Object.keys(Ge.static).forEach(function(Yt){Hr(jt,Ge,Yt)}),sf.forEach(function(Yt){Hr(jt,ot,Yt)});var Lt=Uo(ot,Ge,Nt,tn,jt);return eo(jt,Lt),On(jt,Lt),ht(jt,Lt),f(jt.compile(),{destroy:function(){Lt.shader.program.destroy()}})}return{next:na,current:Pn,procs:function(){var ot=ha(),Ge=ot.proc("poll"),Nt=ot.proc("refresh"),tn=ot.block();Ge(tn),Nt(tn);var nn=ot.shared,jt=nn.gl,Lt=nn.next,Yt=nn.current;tn(Yt,".dirty=false;"),Po(ot,Ge),Po(ot,Nt,null,!0);var nt;br&&(nt=ot.link(br)),Et.oes_vertex_array_object&&Nt(ot.link(Et.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Mt=0;Mt<vn.maxAttributes;++Mt){var qe=Nt.def(nn.attributes,"[",Mt,"]"),Zt=ot.cond(qe,".buffer");Zt.then(jt,".enableVertexAttribArray(",Mt,");",jt,".bindBuffer(",Ys,",",qe,".buffer.buffer);",jt,".vertexAttribPointer(",Mt,",",qe,".size,",qe,".type,",qe,".normalized,",qe,".stride,",qe,".offset);").else(jt,".disableVertexAttribArray(",Mt,");",jt,".vertexAttrib4f(",Mt,",",qe,".x,",qe,".y,",qe,".z,",qe,".w);",qe,".buffer=null;"),Nt(Zt),br&&Nt(nt,".vertexAttribDivisorANGLE(",Mt,",",qe,".divisor);")}return Nt(ot.shared.vao,".currentVAO=null;",ot.shared.vao,".setVAO(",ot.shared.vao,".targetVAO);"),Object.keys(lr).forEach(function(sn){var $n=lr[sn],Qn=tn.def(Lt,".",sn),zn=ot.block();zn("if(",Qn,"){",jt,".enable(",$n,")}else{",jt,".disable(",$n,")}",Yt,".",sn,"=",Qn,";"),Nt(zn),Ge("if(",Qn,"!==",Yt,".",sn,"){",zn,"}")}),Object.keys(ir).forEach(function(sn){var $n=ir[sn],Qn=Pn[sn],zn,d,h=ot.block();if(h(jt,".",$n,"("),rt(Qn)){var x=Qn.length;zn=ot.global.def(Lt,".",sn),d=ot.global.def(Yt,".",sn),h(cn(x,function(F){return zn+"["+F+"]"}),");",cn(x,function(F){return d+"["+F+"]="+zn+"["+F+"];"}).join("")),Ge("if(",cn(x,function(F){return zn+"["+F+"]!=="+d+"["+F+"]"}).join("||"),"){",h,"}")}else zn=tn.def(Lt,".",sn),d=tn.def(Yt,".",sn),h(zn,");",Yt,".",sn,"=",zn,";"),Ge("if(",zn,"!==",d,"){",h,"}");Nt(h)}),ot.compile()}(),compile:Ga}}function dh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Go=34918,Gf=34919,Nu=35007,sl=function(_e,Et){if(!Et.ext_disjoint_timer_query)return null;var vn=[];function Vn(){return vn.pop()||Et.ext_disjoint_timer_query.createQueryEXT()}function kn(Fr){vn.push(Fr)}var bn=[];function ur(Fr){var Pn=Vn();Et.ext_disjoint_timer_query.beginQueryEXT(Nu,Pn),bn.push(Pn),xr(bn.length-1,bn.length,Fr)}function Sn(){Et.ext_disjoint_timer_query.endQueryEXT(Nu)}function mr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Er=[];function Cr(){return Er.pop()||new mr}function Ir(Fr){Er.push(Fr)}var Mr=[];function xr(Fr,Pn,na){var dr=Cr();dr.startQueryIndex=Fr,dr.endQueryIndex=Pn,dr.sum=0,dr.stats=na,Mr.push(dr)}var mn=[],fn=[];function br(){var Fr,Pn,na=bn.length;if(na===0)return;fn.length=Math.max(fn.length,na+1),mn.length=Math.max(mn.length,na+1),mn[0]=0,fn[0]=0;var dr=0;for(Fr=0,Pn=0;Pn<bn.length;++Pn){var lr=bn[Pn];Et.ext_disjoint_timer_query.getQueryObjectEXT(lr,Gf)?(dr+=Et.ext_disjoint_timer_query.getQueryObjectEXT(lr,Go),kn(lr)):bn[Fr++]=lr,mn[Pn+1]=dr,fn[Pn+1]=Fr}for(bn.length=Fr,Fr=0,Pn=0;Pn<Mr.length;++Pn){var ir=Mr[Pn],fr=ir.startQueryIndex,oa=ir.endQueryIndex;ir.sum+=mn[oa]-mn[fr];var Ma=fn[fr],Pr=fn[oa];Pr===Ma?(ir.stats.gpuTime+=ir.sum/1e6,Ir(ir)):(ir.startQueryIndex=Ma,ir.endQueryIndex=Pr,Mr[Fr++]=ir)}Mr.length=Fr}return{beginQuery:ur,endQuery:Sn,pushScopeStats:xr,update:br,getNumPendingQueries:function(){return bn.length},clear:function(){vn.push.apply(vn,bn);for(var Pn=0;Pn<vn.length;Pn++)Et.ext_disjoint_timer_query.deleteQueryEXT(vn[Pn]);bn.length=0,vn.length=0},restore:function(){bn.length=0,vn.length=0}}},gc=16384,Kd=256,Xf=1024,$d=34962,pd="webglcontextlost",yc="webglcontextrestored",ii=1,du=2,ci=3;function Bs(ge,_e){for(var Et=0;Et<ge.length;++Et)if(ge[Et]===_e)return Et;return-1}function vs(ge){var _e=lt(ge);if(!_e)return null;var Et=_e.gl,vn=Et.getContextAttributes(),Vn=Et.isContextLost(),kn=Vt(Et,_e);if(!kn)return null;var bn=An(),ur=dh(),Sn=kn.extensions,mr=sl(Et,Sn),Er=Ft(),Cr=Et.drawingBufferWidth,Ir=Et.drawingBufferHeight,Mr={tick:0,time:0,viewportWidth:Cr,viewportHeight:Ir,framebufferWidth:Cr,framebufferHeight:Ir,drawingBufferWidth:Cr,drawingBufferHeight:Ir,pixelRatio:_e.pixelRatio},xr={},mn={elements:null,primitive:4,count:-1,offset:0,instances:-1},fn=os(Et,Sn),br=qu(Et,ur,_e,Pn),Fr=kd(Et,Sn,fn,ur,br);function Pn(va){return Fr.destroyBuffer(va)}var na=Yo(Et,Sn,br,ur),dr=rh(Et,bn,ur,_e),lr=qf(Et,Sn,fn,function(){oa.procs.poll()},Mr,ur,_e),ir=ss(Et,Sn,fn,ur,_e),fr=nh(Et,Sn,fn,lr,ir,ur),oa=hf(Et,bn,Sn,fn,br,na,lr,fr,xr,Fr,dr,mn,Mr,mr,_e),Ma=Nd(Et,fr,oa.procs.poll,Mr,vn,Sn,fn),Pr=oa.next,Tr=Et.canvas,er=[],ha=[],Wa=[],Jr=[_e.onDestroy],Ja=null;function Aa(){if(er.length===0){mr&&mr.update(),Ja=null;return}Ja=st.next(Aa),Do();for(var va=er.length-1;va>=0;--va){var Ra=er[va];Ra&&Ra(Mr,null,0)}Et.flush(),mr&&mr.update()}function ei(){!Ja&&er.length>0&&(Ja=st.next(Aa))}function gi(){Ja&&(st.cancel(Aa),Ja=null)}function So(va){va.preventDefault(),Vn=!0,gi(),ha.forEach(function(Ra){Ra()})}function jo(va){Et.getError(),Vn=!1,kn.restore(),dr.restore(),br.restore(),lr.restore(),ir.restore(),fr.restore(),Fr.restore(),mr&&mr.restore(),oa.procs.refresh(),ei(),Wa.forEach(function(Ra){Ra()})}Tr&&(Tr.addEventListener(pd,So,!1),Tr.addEventListener(yc,jo,!1));function oi(){er.length=0,gi(),Tr&&(Tr.removeEventListener(pd,So),Tr.removeEventListener(yc,jo)),dr.clear(),fr.clear(),ir.clear(),lr.clear(),na.clear(),br.clear(),Fr.clear(),mr&&mr.clear(),Jr.forEach(function(va){va()})}function Ni(va){Ce(!!va,"invalid args to regl({...})"),Ce.type(va,"object","invalid args to regl({...})");function Ra(nn){var jt=f({},nn);delete jt.uniforms,delete jt.attributes,delete jt.context,delete jt.vao,"stencil"in jt&&jt.stencil.op&&(jt.stencil.opBack=jt.stencil.opFront=jt.stencil.op,delete jt.stencil.op);function Lt(Yt){if(Yt in jt){var nt=jt[Yt];delete jt[Yt],Object.keys(nt).forEach(function(Mt){jt[Yt+"."+Mt]=nt[Mt]})}}return Lt("blend"),Lt("depth"),Lt("cull"),Lt("stencil"),Lt("polygonOffset"),Lt("scissor"),Lt("sample"),"vao"in nn&&(jt.vao=nn.vao),jt}function hi(nn,jt){var Lt={},Yt={};return Object.keys(nn).forEach(function(nt){var Mt=nn[nt];if(pt.isDynamic(Mt)){Yt[nt]=pt.unbox(Mt,nt);return}else if(jt&&Array.isArray(Mt)){for(var qe=0;qe<Mt.length;++qe)if(pt.isDynamic(Mt[qe])){Yt[nt]=pt.unbox(Mt,nt);return}}Lt[nt]=Mt}),{dynamic:Yt,static:Lt}}var eo=hi(va.context||{},!0),ms=hi(va.uniforms||{},!0),Ml=hi(va.attributes||{},!1),ht=hi(Ra(va),!1),On={gpuTime:0,cpuTime:0,count:0},ln=oa.compile(ht,Ml,ms,eo,On),Hr=ln.draw,Ga=ln.batch,ot=ln.scope,Ge=[];function Nt(nn){for(;Ge.length<nn;)Ge.push(null);return Ge}function tn(nn,jt){var Lt;if(Vn&&Ce.raise("context lost"),typeof nn=="function")return ot.call(this,null,nn,0);if(typeof jt=="function")if(typeof nn=="number")for(Lt=0;Lt<nn;++Lt)ot.call(this,null,jt,Lt);else if(Array.isArray(nn))for(Lt=0;Lt<nn.length;++Lt)ot.call(this,nn[Lt],jt,Lt);else return ot.call(this,nn,jt,0);else if(typeof nn=="number"){if(nn>0)return Ga.call(this,Nt(nn|0),nn|0)}else if(Array.isArray(nn)){if(nn.length)return Ga.call(this,nn,nn.length)}else return Hr.call(this,nn)}return f(tn,{stats:On,destroy:function(){ln.destroy()}})}var oo=fr.setFBO=Ni({framebuffer:pt.define.call(null,ii,"framebuffer")});function Uo(va,Ra){var hi=0;oa.procs.poll();var eo=Ra.color;eo&&(Et.clearColor(+eo[0]||0,+eo[1]||0,+eo[2]||0,+eo[3]||0),hi|=gc),"depth"in Ra&&(Et.clearDepth(+Ra.depth),hi|=Kd),"stencil"in Ra&&(Et.clearStencil(Ra.stencil|0),hi|=Xf),Ce(!!hi,"called regl.clear with no buffer specified"),Et.clear(hi)}function po(va){if(Ce(typeof va=="object"&&va,"regl.clear() takes an object as input"),"framebuffer"in va)if(va.framebuffer&&va.framebuffer_reglType==="framebufferCube")for(var Ra=0;Ra<6;++Ra)oo(f({framebuffer:va.framebuffer.faces[Ra]},va),Uo);else oo(va,Uo);else Uo(null,va)}function Po(va){Ce.type(va,"function","regl.frame() callback must be a function"),er.push(va);function Ra(){var hi=Bs(er,va);Ce(hi>=0,"cannot cancel a frame twice");function eo(){var ms=Bs(er,eo);er[ms]=er[er.length-1],er.length-=1,er.length<=0&&gi()}er[hi]=eo}return ei(),{cancel:Ra}}function Xo(){var va=Pr.viewport,Ra=Pr.scissor_box;va[0]=va[1]=Ra[0]=Ra[1]=0,Mr.viewportWidth=Mr.framebufferWidth=Mr.drawingBufferWidth=va[2]=Ra[2]=Et.drawingBufferWidth,Mr.viewportHeight=Mr.framebufferHeight=Mr.drawingBufferHeight=va[3]=Ra[3]=Et.drawingBufferHeight}function Do(){Mr.tick+=1,Mr.time=Ha(),Xo(),oa.procs.poll()}function vo(){lr.refresh(),Xo(),oa.procs.refresh(),mr&&mr.update()}function Ha(){return(Ft()-Er)/1e3}vo();function Wo(va,Ra){Ce.type(Ra,"function","listener callback must be a function");var hi;switch(va){case"frame":return Po(Ra);case"lost":hi=ha;break;case"restore":hi=Wa;break;case"destroy":hi=Jr;break;default:Ce.raise("invalid event, must be one of frame,lost,restore,destroy")}return hi.push(Ra),{cancel:function(){for(var ms=0;ms<hi.length;++ms)if(hi[ms]===Ra){hi[ms]=hi[hi.length-1],hi.pop();return}}}}var yi=f(Ni,{clear:po,prop:pt.define.bind(null,ii),context:pt.define.bind(null,du),this:pt.define.bind(null,ci),draw:Ni({}),buffer:function(Ra){return br.create(Ra,$d,!1,!1)},elements:function(Ra){return na.create(Ra,!1)},texture:lr.create2D,cube:lr.createCube,renderbuffer:ir.create,framebuffer:fr.create,framebufferCube:fr.createCube,vao:Fr.createVAO,attributes:vn,frame:Po,on:Wo,limits:fn,hasExtension:function(Ra){return fn.extensions.indexOf(Ra.toLowerCase())>=0},read:Ma,destroy:oi,_gl:Et,_refresh:vo,poll:function(){Do(),mr&&mr.update()},now:Ha,stats:ur});return _e.onDone(null,yi),yi}return vs})},function(j,_,u){"use strict";u.d(_,"a",function(){return co});var g={};u.r(g),u.d(g,"isArray",function(){return Dt}),u.d(g,"isArrayLike",function(){return Re}),u.d(g,"uniq",function(){return Cn}),u.d(g,"union",function(){return b}),u.d(g,"sortedIndex",function(){return Nr}),u.d(g,"sortedIndexBy",function(){return Bf}),u.d(g,"sortBy",function(){return hf}),u.d(g,"groupBy",function(){return ii}),u.d(g,"difference",function(){return ge}),u.d(g,"max",function(){return bn}),u.d(g,"diff",function(){return ur});var f={};u.r(f),u.d(f,"has",function(){return xr}),u.d(f,"pick",function(){return ha}),u.d(f,"forIn",function(){return Uo}),u.d(f,"merge",function(){return x}),u.d(f,"extend",function(){return Q}),u.d(f,"isEqual",function(){return je}),u.d(f,"isEmpty",function(){return pa}),u.d(f,"isObject",function(){return nr}),u.d(f,"isPlainObject",function(){return nn}),u.d(f,"clone",function(){return jh}),u.d(f,"cloneDeep",function(){return fv}),u.d(f,"defaults",function(){return Yl}),u.d(f,"defaultsDeep",function(){return Rp}),u.d(f,"applyMixins",function(){return pf}),u.d(f,"inherit",function(){return ap}),u.d(f,"createClass",function(){return mh}),u.d(f,"ensure",function(){return Ip}),u.d(f,"getValue",function(){return ip}),u.d(f,"getNumber",function(){return Lp}),u.d(f,"getBoolean",function(){return Om}),u.d(f,"isMaliciousProp",function(){return Yd}),u.d(f,"getByPath",function(){return Vh}),u.d(f,"setByPath",function(){return zh}),u.d(f,"unsetByPath",function(){return Hf}),u.d(f,"flatten",function(){return Kf});var E={};u.r(E),u.d(E,"isString",function(){return Bc}),u.d(E,"toString",function(){return lo}),u.d(E,"escape",function(){return Gg}),u.d(E,"unescape",function(){return uE}),u.d(E,"startsWith",function(){return AE}),u.d(E,"endsWith",function(){return SE}),u.d(E,"split",function(){return l1}),u.d(E,"repeat",function(){return p1}),u.d(E,"pad",function(){return L1}),u.d(E,"padEnd",function(){return U1}),u.d(E,"padStart",function(){return B1}),u.d(E,"truncate",function(){return W1}),u.d(E,"template",function(){return E2}),u.d(E,"uniqueId",function(){return C2}),u.d(E,"eval",function(){return T2}),u.d(E,"lowerFirst",function(){return _x}),u.d(E,"upperFirst",function(){return xv}),u.d(E,"camelCase",function(){return Rm}),u.d(E,"kebabCase",function(){return Py}),u.d(E,"pascalCase",function(){return kx}),u.d(E,"constantCase",function(){return Nx}),u.d(E,"dotCase",function(){return Rx}),u.d(E,"pathCase",function(){return Px}),u.d(E,"sentenceCase",function(){return Ix}),u.d(E,"titleCase",function(){return Lx}),u.d(E,"hashcode",function(){return jx}),u.d(E,"uuid",function(){return Ux}),u.d(E,"sanitizeHTML",function(){return Fx}),u.d(E,"getSpellingSuggestion",function(){return zx});var T={};u.r(T),u.d(T,"isNaN",function(){return Kx}),u.d(T,"isNumber",function(){return Iy}),u.d(T,"isFinite",function(){return Qx}),u.d(T,"isInteger",function(){return Ly}),u.d(T,"isSafeInteger",function(){return qx}),u.d(T,"clamp",function(){return tw}),u.d(T,"inRange",function(){return sw}),u.d(T,"toFinite",function(){return vv}),u.d(T,"toNumber",function(){return yh}),u.d(T,"toInteger",function(){return Qd}),u.d(T,"toSafeInteger",function(){return lw}),u.d(T,"parseInt",function(){return hw}),u.d(T,"isNumeric",function(){return At}),u.d(T,"mod",function(){return pw}),u.d(T,"random",function(){return vw}),u.d(T,"isPercentage",function(){return Fy}),u.d(T,"normalizePercentage",function(){return mw}),u.d(T,"parseCssNumeric",function(){return gw}),u.d(T,"normalizeSides",function(){return yw});var w={};u.r(w),u.d(w,"isFunction",function(){return Jn}),u.d(w,"once",function(){return Cw}),u.d(w,"noop",function(){return $}),u.d(w,"debounce",function(){return Mw}),u.d(w,"defer",function(){return Pw}),u.d(w,"apply",function(){return Lm}),u.d(w,"call",function(){return Iw}),u.d(w,"cacher",function(){return jw}),u.d(w,"isAsyncLike",function(){return By}),u.d(w,"isAsync",function(){return jm}),u.d(w,"toAsyncBoolean",function(){return Vy}),u.d(w,"toDeferredBoolean",function(){return Uw});var D={};u.r(D),u.d(D,"annotate",function(){return zw}),u.d(D,"findAnnotationsAtIndex",function(){return Gw}),u.d(D,"findAnnotationsBetweenIndexes",function(){return Xw}),u.d(D,"shiftAnnotations",function(){return Ww}),u.d(D,"sanitize",function(){return Hw});var O={};u.r(O),u.d(O,"requestAnimationFrame",function(){return $w}),u.d(O,"cancelAnimationFrame",function(){return Yw}),u.d(O,"getAttribute",function(){return nb}),u.d(O,"removeAttribute",function(){return Wm}),u.d(O,"setAttribute",function(){return Av}),u.d(O,"setAttributes",function(){return Hm}),u.d(O,"attr",function(){return cl}),u.d(O,"qualifyAttr",function(){return Km}),u.d(O,"kebablizeAttrs",function(){return Vw}),u.d(O,"styleToObject",function(){return Bp}),u.d(O,"mergeAttrs",function(){return Ov}),u.d(O,"uniqueId",function(){return Gy}),u.d(O,"ensureId",function(){return Xy}),u.d(O,"isSVGGraphicsElement",function(){return cp}),u.d(O,"ns",function(){return gf}),u.d(O,"svgVersion",function(){return Vm}),u.d(O,"createElement",function(){return Fw}),u.d(O,"createElementNS",function(){return Wy}),u.d(O,"createSvgElement",function(){return yf}),u.d(O,"createSvgDocument",function(){return Cv}),u.d(O,"parseXML",function(){return Hy}),u.d(O,"tagName",function(){return Ky}),u.d(O,"index",function(){return $y}),u.d(O,"find",function(){return Yy}),u.d(O,"findOne",function(){return Qy}),u.d(O,"findParentByClass",function(){return Jy}),u.d(O,"contains",function(){return Zy}),u.d(O,"remove",function(){return Tv}),u.d(O,"empty",function(){return zm}),u.d(O,"append",function(){return Gm}),u.d(O,"prepend",function(){return qy}),u.d(O,"before",function(){return Xm}),u.d(O,"appendTo",function(){return eb}),u.d(O,"isHTMLElement",function(){return tb}),u.d(O,"getClass",function(){return Wh}),u.d(O,"hasClass",function(){return wv}),u.d(O,"addClass",function(){return Up}),u.d(O,"removeClass",function(){return Fp}),u.d(O,"toggleClass",function(){return Bm}),u.d(O,"setPrefixedStyle",function(){return qw}),u.d(O,"getComputedStyle",function(){return Sv}),u.d(O,"hasScrollbars",function(){return eC}),u.d(O,"getVendorPrefixedName",function(){return ob}),u.d(O,"clearSelection",function(){return tC}),u.d(O,"text",function(){return vb}),u.d(O,"breakText",function(){return pC}),u.d(O,"KAPPA",function(){return Iv}),u.d(O,"sample",function(){return qm}),u.d(O,"lineToPathData",function(){return mb}),u.d(O,"polygonToPathData",function(){return gb}),u.d(O,"polylineToPathData",function(){return yb}),u.d(O,"getPointsFromSvgElement",function(){return Vp}),u.d(O,"circleToPathData",function(){return Eb}),u.d(O,"ellipseToPathData",function(){return xb}),u.d(O,"rectangleToPathData",function(){return wb}),u.d(O,"rectToPathData",function(){return Cb}),u.d(O,"toPath",function(){return eg}),u.d(O,"toPathData",function(){return tg}),u.d(O,"createSlicePathData",function(){return vC}),u.d(O,"bbox",function(){return Ab}),u.d(O,"getBBox",function(){return xh}),u.d(O,"getBBoxByElementAttr",function(){return TC}),u.d(O,"getMatrixByElementAttr",function(){return AC}),u.d(O,"getTransformToElement",function(){return wh}),u.d(O,"toLocalPoint",function(){return Ob}),u.d(O,"toGeometryShape",function(){return Sb}),u.d(O,"getIntersection",function(){return OC}),u.d(O,"animate",function(){return Db}),u.d(O,"animateTransform",function(){return Mb}),u.d(O,"animateAlongPath",function(){return Nb}),u.d(O,"getBoundingOffsetRect",function(){return Rb}),u.d(O,"createSVGPoint",function(){return ng}),u.d(O,"createSVGMatrix",function(){return fp}),u.d(O,"createSVGTransform",function(){return hp}),u.d(O,"transformStringToMatrix",function(){return Lv}),u.d(O,"matrixToTransformString",function(){return rg}),u.d(O,"parseTransformString",function(){return jv}),u.d(O,"decomposeMatrix",function(){return ig}),u.d(O,"matrixToScale",function(){return yC}),u.d(O,"matrixToRotation",function(){return bC}),u.d(O,"matrixToTranslation",function(){return EC}),u.d(O,"transformPoint",function(){return Uv}),u.d(O,"transformLine",function(){return xC}),u.d(O,"transformPolyline",function(){return wC}),u.d(O,"transformRectangle",function(){return Fv}),u.d(O,"transform",function(){return og}),u.d(O,"translate",function(){return sg}),u.d(O,"rotate",function(){return ug}),u.d(O,"scale",function(){return Bv}),u.d(O,"translateAndAutoOrient",function(){return Pb}),u.d(O,"MouseWheelHandle",function(){return SC}),u.d(O,"isVector",function(){return DC}),u.d(O,"createVector",function(){return MC}),u.d(O,"createVectors",function(){return _C});var L={};u.r(L),u.d(L,"block",function(){return mT}),u.d(L,"classic",function(){return gT}),u.d(L,"diamond",function(){return bT}),u.d(L,"path",function(){return xT}),u.d(L,"cross",function(){return CT}),u.d(L,"async",function(){return AT}),u.d(L,"circle",function(){return Jb}),u.d(L,"circlePlus",function(){return OT}),u.d(L,"ellipse",function(){return DT});var U={};u.r(U),u.d(U,"ref",function(){return LC}),u.d(U,"refX",function(){return Lb}),u.d(U,"refY",function(){return jb}),u.d(U,"refDx",function(){return jC}),u.d(U,"refDy",function(){return UC}),u.d(U,"refWidth",function(){return Ub}),u.d(U,"refHeight",function(){return Fb}),u.d(U,"refRx",function(){return FC}),u.d(U,"refRy",function(){return BC}),u.d(U,"refRInscribed",function(){return Bb}),u.d(U,"refRCircumscribed",function(){return VC}),u.d(U,"refCx",function(){return zC}),u.d(U,"refCy",function(){return GC}),u.d(U,"refDResetOffset",function(){return Vb}),u.d(U,"refDKeepOffset",function(){return XC}),u.d(U,"refPointsResetOffset",function(){return zb}),u.d(U,"refPointsKeepOffset",function(){return WC}),u.d(U,"refR",function(){return HC}),u.d(U,"refD",function(){return KC}),u.d(U,"refPoints",function(){return $C}),u.d(U,"refX2",function(){return YC}),u.d(U,"refY2",function(){return QC}),u.d(U,"refWidth2",function(){return JC}),u.d(U,"refHeight2",function(){return ZC}),u.d(U,"fill",function(){return qC}),u.d(U,"stroke",function(){return eT}),u.d(U,"text",function(){return Hb}),u.d(U,"textWrap",function(){return tT}),u.d(U,"lineHeight",function(){return nT}),u.d(U,"textVerticalAnchor",function(){return rT}),u.d(U,"textPath",function(){return aT}),u.d(U,"annotations",function(){return iT}),u.d(U,"eol",function(){return oT}),u.d(U,"displayEmpty",function(){return sT}),u.d(U,"title",function(){return uT}),u.d(U,"xAlign",function(){return lT}),u.d(U,"yAlign",function(){return cT}),u.d(U,"resetOffset",function(){return dT}),u.d(U,"style",function(){return fT}),u.d(U,"html",function(){return hT}),u.d(U,"filter",function(){return pT}),u.d(U,"port",function(){return vT}),u.d(U,"sourceMarker",function(){return _T}),u.d(U,"targetMarker",function(){return kT}),u.d(U,"vertexMarker",function(){return NT}),u.d(U,"connection",function(){return PT}),u.d(U,"atConnectionLengthKeepGradient",function(){return Zb}),u.d(U,"atConnectionLengthIgnoreGradient",function(){return IT}),u.d(U,"atConnectionRatioKeepGradient",function(){return qb}),u.d(U,"atConnectionRatioIgnoreGradient",function(){return LT}),u.d(U,"atConnectionLength",function(){return jT}),u.d(U,"atConnectionRatio",function(){return UT});var V={};u.r(V),u.d(V,"dot",function(){return FT}),u.d(V,"fixedDot",function(){return BT}),u.d(V,"mesh",function(){return VT}),u.d(V,"doubleMesh",function(){return zT});var z={};u.r(z),u.d(z,"outline",function(){return GT}),u.d(z,"highlight",function(){return XT}),u.d(z,"blur",function(){return WT}),u.d(z,"dropShadow",function(){return HT}),u.d(z,"grayScale",function(){return KT}),u.d(z,"sepia",function(){return $T}),u.d(z,"saturate",function(){return YT}),u.d(z,"hueRotate",function(){return QT}),u.d(z,"invert",function(){return JT}),u.d(z,"brightness",function(){return ZT}),u.d(z,"contrast",function(){return qT});var K={};u.r(K),u.d(K,"flipX",function(){return e0}),u.d(K,"flipY",function(){return t0}),u.d(K,"flipXY",function(){return n0}),u.d(K,"watermark",function(){return eA});var J={};u.r(J),u.d(J,"className",function(){return nA}),u.d(J,"opacity",function(){return rA}),u.d(J,"stroke",function(){return iA});var he={};u.r(he),u.d(he,"absolute",function(){return oA}),u.d(he,"ellipse",function(){return sA}),u.d(he,"ellipseSpread",function(){return uA}),u.d(he,"line",function(){return cA}),u.d(he,"left",function(){return dA}),u.d(he,"right",function(){return fA}),u.d(he,"top",function(){return hA}),u.d(he,"bottom",function(){return pA});var ue={};u.r(ue),u.d(ue,"manual",function(){return mA}),u.d(ue,"left",function(){return gA}),u.d(ue,"right",function(){return yA}),u.d(ue,"top",function(){return bA}),u.d(ue,"bottom",function(){return EA}),u.d(ue,"outside",function(){return xA}),u.d(ue,"outsideOriented",function(){return wA}),u.d(ue,"inside",function(){return CA}),u.d(ue,"insideOriented",function(){return TA}),u.d(ue,"radial",function(){return AA}),u.d(ue,"radialOriented",function(){return OA});var de={};u.r(de),u.d(de,"noop",function(){return _A}),u.d(de,"pinRelative",function(){return RA}),u.d(de,"pinAbsolute",function(){return PA});var ae={};u.r(ae),u.d(ae,"center",function(){return GA}),u.d(ae,"top",function(){return XA}),u.d(ae,"bottom",function(){return WA}),u.d(ae,"left",function(){return HA}),u.d(ae,"right",function(){return KA}),u.d(ae,"topLeft",function(){return $A}),u.d(ae,"topRight",function(){return YA}),u.d(ae,"bottomLeft",function(){return QA}),u.d(ae,"bottomRight",function(){return JA}),u.d(ae,"orth",function(){return qA}),u.d(ae,"nodeCenter",function(){return eO}),u.d(ae,"midSide",function(){return nO});var le={};u.r(le),u.d(le,"ratio",function(){return rO}),u.d(le,"length",function(){return aO}),u.d(le,"orth",function(){return sO}),u.d(le,"closest",function(){return iO});var re={};u.r(re),u.d(re,"bbox",function(){return x0}),u.d(re,"rect",function(){return lO}),u.d(re,"boundary",function(){return cO}),u.d(re,"anchor",function(){return fO});var se={};u.r(se),u.d(se,"normal",function(){return hO}),u.d(se,"oneSide",function(){return pO}),u.d(se,"orth",function(){return T0}),u.d(se,"metro",function(){return _O}),u.d(se,"manhattan",function(){return P0}),u.d(se,"er",function(){return kO}),u.d(se,"loop",function(){return NO});var ye={};u.r(ye),u.d(ye,"normal",function(){return RO}),u.d(ye,"loop",function(){return PO}),u.d(ye,"rounded",function(){return IO}),u.d(ye,"smooth",function(){return LO}),u.d(ye,"jumpover",function(){return VO});function Z(a,s,i){return s in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i,a}var Ee=u(31),k=u.n(Ee),Te=u(311),De=navigator.userAgent,Ue;if(function(a){a.IS_MAC=navigator.appVersion.indexOf("Mac")>0,a.IS_IOS=!!De.match(/(iPad|iPhone|iPod)/g),a.IS_WINDOWS=navigator.appVersion.indexOf("Win")>0,a.IS_IE=De.indexOf("MSIE")>=0,a.IS_IE11=!!De.match(/Trident\/7\./),a.IS_EDGE=!!De.match(/Edge\//),a.IS_NETSCAPE=De.indexOf("Mozilla/")>=0&&De.indexOf("MSIE")<0&&De.indexOf("Edge/")<0,a.IS_CHROME_APP=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,a.IS_CHROME=De.indexOf("Chrome/")>=0&&De.indexOf("Edge/")<0,a.IS_OPERA=De.indexOf("Opera/")>=0||De.indexOf("OPR/")>=0,a.IS_FIREFOX=De.indexOf("Firefox/")>=0,a.IS_SAFARI=De.indexOf("AppleWebKit/")>=0&&De.indexOf("Chrome/")<0&&De.indexOf("Edge/")<0,a.SUPPORT_TOUCH="ontouchstart"in document.documentElement,a.SUPPORT_POINTER=window.PointerEvent!=null&&!a.IS_MAC,a.SUPPORT_PASSIVE=!1;try{var s=Object.defineProperty({},"passive",{get:function(){a.SUPPORT_PASSIVE=!0}}),i=document.createElement("div");i.addEventListener&&i.addEventListener("click",function(){},s)}catch(n){}a.NO_FOREIGNOBJECT=!document.createElementNS||"".concat(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))!=="[object SVGForeignObjectElement]"||De.indexOf("Opera/")>=0,a.SUPPORT_FOREIGNOBJECT=!a.NO_FOREIGNOBJECT}(Ue||(Ue={})),function(a){function s(){var t=window.module;return t!=null&&t.hot!=null&&t.hot.status!=null?t.hot.status():"unkonwn"}a.getHMRStatus=s;function i(){return s()==="apply"}a.isApplyingHMR=i;var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function e(t){var r=document.createElement(n[t]||"div"),o="on".concat(t),c=o in r;return c||(r.setAttribute(o,"return;"),c=typeof r[o]=="function"),c}a.isEventSupported=e}(Ue||(Ue={})),Ue.SUPPORT_PASSIVE){k.a.event.special.touchstart={setup:function(s,i,n){if(!this.addEventListener)return!1;this.addEventListener("touchstart",n,{passive:!0})}};var St=k.a.event.special.mousewheel;if(St){var Ae=St.setup;St.setup=function(){var a=this,s=this.addEventListener;if(!s)return!1;this.addEventListener=function(i,n){s.call(a,i,n,{passive:!0})},Ae.call(this),this.addEventListener=s}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(a){a.forEach(function(s){if(Object.prototype.hasOwnProperty.call(s,"append"))return;Object.defineProperty(s,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var n=document.createDocumentFragment(),e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(o){var c=o instanceof Node;n.appendChild(c?o:document.createTextNode(String(o)))}),this.appendChild(n)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var Wt=function(s){return s&&s===s.window},At=function(s){return!Array.isArray(s)&&s-parseFloat(s)+1>=0},mt=Array.isArray,Dt=mt,Ke=u(30),Tt=Ke.a.Symbol,Gt=Tt,gn=Object.prototype,Ut=gn.hasOwnProperty,Ht=gn.toString,Rt=Gt?Gt.toStringTag:void 0;function Fe(a){var s=Ut.call(a,Rt),i=a[Rt];try{a[Rt]=void 0;var n=!0}catch(t){}var e=Ht.call(a);return n&&(s?a[Rt]=i:delete a[Rt]),e}var me=Fe,ze=Object.prototype,Be=ze.toString;function ut(a){return Be.call(a)}var xt=ut,$t="[object Null]",Qt="[object Undefined]",on=Gt?Gt.toStringTag:void 0;function Mn(a){return a==null?a===void 0?Qt:$t:on&&on in Object(a)?me(a):xt(a)}var Nn=Mn;function qn(a){var s=typeof a;return a!=null&&(s=="object"||s=="function")}var nr=qn,xn="[object AsyncFunction]",pn="[object Function]",pr="[object GeneratorFunction]",gr="[object Proxy]";function Ce(a){if(!nr(a))return!1;var s=Nn(a);return s==pn||s==pr||s==xn||s==gr}var Jn=Ce,Ln=9007199254740991;function yr(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Ln}var Un=yr;function $e(a){return a!=null&&Un(a.length)&&!Jn(a)}var Re=$e,Ye=Ke.a["__core-js_shared__"],tt=Ye,gt=function(){var a=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function kt(a){return!!gt&&gt in a}var Pe=kt,pt=Function.prototype,st=pt.toString;function Ft(a){if(a!=null){try{return st.call(a)}catch(s){}try{return a+""}catch(s){}}return""}var An=Ft,Gn=/[\\^$.*+?()[\]{}|]/g,Yn=/^\[object .+?Constructor\]$/,vr=Function.prototype,zr=Object.prototype,et=vr.toString,wt=zr.hasOwnProperty,lt=RegExp("^"+et.call(wt).replace(Gn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vt(a){if(!nr(a)||Pe(a))return!1;var s=Jn(a)?lt:Yn;return s.test(An(a))}var cn=Vt;function We(a,s){return a==null?void 0:a[s]}var Jt=We;function vt(a,s){var i=Jt(a,s);return cn(i)?i:void 0}var Kn=vt,kr=Kn(Object,"create"),Ur=kr;function fa(){this.__data__=Ur?Ur(null):{},this.size=0}var ea=fa;function ia(a){var s=this.has(a)&&delete this.__data__[a];return this.size-=s?1:0,s}var Va=ia,da="__lodash_hash_undefined__",$a=Object.prototype,di=$a.hasOwnProperty;function Da(a){var s=this.__data__;if(Ur){var i=s[a];return i===da?void 0:i}return di.call(s,a)?s[a]:void 0}var Ya=Da,ro=Object.prototype,ys=ro.hasOwnProperty;function Co(a){var s=this.__data__;return Ur?s[a]!==void 0:ys.call(s,a)}var Gs=Co,Ho="__lodash_hash_undefined__";function rs(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=Ur&&s===void 0?Ho:s,this}var as=rs;function _s(a){var s=-1,i=a==null?0:a.length;for(this.clear();++s<i;){var n=a[s];this.set(n[0],n[1])}}_s.prototype.clear=ea,_s.prototype.delete=Va,_s.prototype.get=Ya,_s.prototype.has=Gs,_s.prototype.set=as;var Js=_s;function fo(){this.__data__=[],this.size=0}var To=fo;function bs(a,s){return a===s||a!==a&&s!==s}var bo=bs;function Es(a,s){for(var i=a.length;i--;)if(bo(a[i][0],s))return i;return-1}var vu=Es,Zs=Array.prototype,Ko=Zs.splice;function is(a){var s=this.__data__,i=vu(s,a);if(i<0)return!1;var n=s.length-1;return i==n?s.pop():Ko.call(s,i,1),--this.size,!0}var cs=is;function qs(a){var s=this.__data__,i=vu(s,a);return i<0?void 0:s[i][1]}var Ju=qs;function eu(a){return vu(this.__data__,a)>-1}var Wi=eu;function ji(a,s){var i=this.__data__,n=vu(i,a);return n<0?(++this.size,i.push([a,s])):i[n][1]=s,this}var _o=ji;function mu(a){var s=-1,i=a==null?0:a.length;for(this.clear();++s<i;){var n=a[s];this.set(n[0],n[1])}}mu.prototype.clear=To,mu.prototype.delete=cs,mu.prototype.get=Ju,mu.prototype.has=Wi,mu.prototype.set=_o;var Pl=mu,Fo=Kn(Ke.a,"Map"),ks=Fo;function gu(){this.size=0,this.__data__={hash:new Js,map:new(ks||Pl),string:new Js}}var Jl=gu;function Zl(a){var s=typeof a;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?a!=="__proto__":a===null}var Iu=Zl;function yu(a,s){var i=a.__data__;return Iu(s)?i[typeof s=="string"?"string":"hash"]:i.map}var os=yu;function Bi(a){var s=os(this,a).delete(a);return this.size-=s?1:0,s}var Mi=Bi;function Bo(a){return os(this,a).get(a)}var ds=Bo;function Zu(a){return os(this,a).has(a)}var Lu=Zu;function ql(a,s){var i=os(this,a),n=i.size;return i.set(a,s),this.size+=i.size==n?0:1,this}var ec=ql;function tu(a){var s=-1,i=a==null?0:a.length;for(this.clear();++s<i;){var n=a[s];this.set(n[0],n[1])}}tu.prototype.clear=Jl,tu.prototype.delete=Mi,tu.prototype.get=ds,tu.prototype.has=Lu,tu.prototype.set=ec;var Ns=tu,nu="__lodash_hash_undefined__";function pl(a){return this.__data__.set(a,nu),this}var Wc=pl;function Hc(a){return this.__data__.has(a)}var Il=Hc;function vl(a){var s=-1,i=a==null?0:a.length;for(this.__data__=new Ns;++s<i;)this.add(a[s])}vl.prototype.add=vl.prototype.push=Wc,vl.prototype.has=Il;var xc=vl;function Ll(a,s,i,n){for(var e=a.length,t=i+(n?1:-1);n?t--:++t<e;)if(s(a[t],t,a))return t;return-1}var bu=Ll;function tc(a){return a!==a}var wc=tc;function Eu(a,s,i){for(var n=i-1,e=a.length;++n<e;)if(a[n]===s)return n;return-1}var nc=Eu;function ml(a,s,i){return s===s?nc(a,s,i):bu(a,wc,i)}var gl=ml;function jl(a,s){var i=a==null?0:a.length;return!!i&&gl(a,s,0)>-1}var yl=jl;function Cc(a,s,i){for(var n=-1,e=a==null?0:a.length;++n<e;)if(i(s,a[n]))return!0;return!1}var $o=Cc;function Qa(a,s){return a.has(s)}var Rs=Qa,Pa=Kn(Ke.a,"Set"),qu=Pa;function xu(){}var $=xu;function R(a){var s=-1,i=Array(a.size);return a.forEach(function(n){i[++s]=n}),i}var G=R,Y=1/0,fe=qu&&1/G(new qu([,-0]))[1]==Y?function(a){return new qu(a)}:$,Se=fe,Ie=200;function Ze(a,s,i){var n=-1,e=yl,t=a.length,r=!0,o=[],c=o;if(i)r=!1,e=$o;else if(t>=Ie){var p=s?null:Se(a);if(p)return G(p);r=!1,e=Rs,c=new xc}else c=s?[]:o;e:for(;++n<t;){var y=a[n],C=s?s(y):y;if(y=i||y!==0?y:0,r&&C===C){for(var S=c.length;S--;)if(c[S]===C)continue e;s&&c.push(C),o.push(y)}else e(c,C,i)||(c!==o&&c.push(C),o.push(y))}return o}var Pt=Ze;function zt(a){return a&&a.length?Pt(a):[]}var Cn=zt;function Sr(a,s){for(var i=-1,n=s.length,e=a.length;++i<n;)a[e+i]=s[i];return a}var Dr=Sr;function en(a){return a!=null&&typeof a=="object"}var sr=en,Kr="[object Arguments]";function ma(a){return sr(a)&&Nn(a)==Kr}var sa=ma,Yo=Object.prototype,ka=Yo.hasOwnProperty,bi=Yo.propertyIsEnumerable,Na=sa(function(){return arguments}())?sa:function(a){return sr(a)&&ka.call(a,"callee")&&!bi.call(a,"callee")},Sa=Na,rt=Gt?Gt.isConcatSpreadable:void 0;function Rn(a){return Dt(a)||Sa(a)||!!(rt&&a&&a[rt])}var Qr=Rn;function mi(a,s,i,n,e){var t=-1,r=a.length;for(i||(i=Qr),e||(e=[]);++t<r;){var o=a[t];s>0&&i(o)?s>1?mi(o,s-1,i,n,e):Dr(e,o):n||(e[e.length]=o)}return e}var Hi=mi;function ho(a){return a}var Ao=ho;function uo(a,s,i){switch(i.length){case 0:return a.call(s);case 1:return a.call(s,i[0]);case 2:return a.call(s,i[0],i[1]);case 3:return a.call(s,i[0],i[1],i[2])}return a.apply(s,i)}var Io=uo,Lo=Math.max;function Vi(a,s,i){return s=Lo(s===void 0?a.length-1:s,0),function(){for(var n=arguments,e=-1,t=Lo(n.length-s,0),r=Array(t);++e<t;)r[e]=n[s+e];e=-1;for(var o=Array(s+1);++e<s;)o[e]=n[e];return o[s]=i(r),Io(a,this,o)}}var wu=Vi;function Qo(a){return function(){return a}}var el=Qo,ua=function(){try{var a=Kn(Object,"defineProperty");return a({},"",{}),a}catch(s){}}(),fs=ua,Cu=fs?function(a,s){return fs(a,"toString",{configurable:!0,enumerable:!1,value:el(s),writable:!0})}:Ao,Ps=Cu,xs=800,ju=16,ru=Date.now;function Is(a){var s=0,i=0;return function(){var n=ru(),e=ju-(n-i);if(i=n,e>0){if(++s>=xs)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}var au=Is,Uu=au(Ps),Fu=Uu;function ws(a,s){return Fu(wu(a,s,Ao),a+"")}var hs=ws;function Eo(a){return sr(a)&&Re(a)}var Ul=Eo,Ua=hs(function(a){return Pt(Hi(a,1,Ul,!0))}),b=Ua,N="[object Symbol]";function te(a){return typeof a=="symbol"||sr(a)&&Nn(a)==N}var ee=te,ce=4294967295,Ve=ce-1,ft=Math.floor,yt=Math.min;function Ct(a,s,i,n){var e=0,t=a==null?0:a.length;if(t===0)return 0;s=i(s);for(var r=s!==s,o=s===null,c=ee(s),p=s===void 0;e<t;){var y=ft((e+t)/2),C=i(a[y]),S=C!==void 0,I=C===null,W=C===C,q=ee(C);if(r)var ie=n||W;else p?ie=W&&(n||S):o?ie=W&&S&&(n||!I):c?ie=W&&S&&!I&&(n||!q):I||q?ie=!1:ie=n?C<=s:C<s;ie?e=y+1:t=y}return yt(t,Ve)}var Xt=Ct,un=4294967295,_n=un>>>1;function Fn(a,s,i){var n=0,e=a==null?n:a.length;if(typeof s=="number"&&s===s&&e<=_n){for(;n<e;){var t=n+e>>>1,r=a[t];r!==null&&!ee(r)&&(i?r<=s:r<s)?n=t+1:e=t}return e}return Xt(a,s,Ao,i)}var jn=Fn;function Ar(a,s){return jn(a,s)}var Nr=Ar;function Wn(){this.__data__=new Pl,this.size=0}var Yr=Wn;function Xa(a){var s=this.__data__,i=s.delete(a);return this.size=s.size,i}var Ta=Xa;function xa(a){return this.__data__.get(a)}var wa=xa;function Oa(a){return this.__data__.has(a)}var Ki=Oa,_i=200;function $i(a,s){var i=this.__data__;if(i instanceof Pl){var n=i.__data__;if(!ks||n.length<_i-1)return n.push([a,s]),this.size=++i.size,this;i=this.__data__=new Ns(n)}return i.set(a,s),this.size=i.size,this}var ki=$i;function Ui(a){var s=this.__data__=new Pl(a);this.size=s.size}Ui.prototype.clear=Yr,Ui.prototype.delete=Ta,Ui.prototype.get=wa,Ui.prototype.has=Ki,Ui.prototype.set=ki;var bt=Ui;function Je(a,s){for(var i=-1,n=a==null?0:a.length;++i<n;)if(s(a[i],i,a))return!0;return!1}var It=Je,Dn=1,hn=2;function rr(a,s,i,n,e,t){var r=i&Dn,o=a.length,c=s.length;if(o!=c&&!(r&&c>o))return!1;var p=t.get(a),y=t.get(s);if(p&&y)return p==s&&y==a;var C=-1,S=!0,I=i&hn?new xc:void 0;for(t.set(a,s),t.set(s,a);++C<o;){var W=a[C],q=s[C];if(n)var ie=r?n(q,W,C,s,a,t):n(W,q,C,a,s,t);if(ie!==void 0){if(ie)continue;S=!1;break}if(I){if(!It(s,function(ve,Le){if(!Rs(I,Le)&&(W===ve||e(W,ve,i,n,t)))return I.push(Le)})){S=!1;break}}else if(!(W===q||e(W,q,i,n,t))){S=!1;break}}return t.delete(a),t.delete(s),S}var Or=rr,jr=Ke.a.Uint8Array,ta=jr;function Gr(a){var s=-1,i=Array(a.size);return a.forEach(function(n,e){i[++s]=[e,n]}),i}var za=Gr,Fa=1,fi=2,Zi="[object Boolean]",zi="[object Date]",ai="[object Error]",Yi="[object Map]",Ei="[object Number]",ao="[object RegExp]",ps="[object Set]",iu="[object String]",Xs="[object Symbol]",Cs="[object ArrayBuffer]",Of="[object DataView]",rc=Gt?Gt.prototype:void 0,Kc=rc?rc.valueOf:void 0;function $c(a,s,i,n,e,t,r){switch(i){case Of:if(a.byteLength!=s.byteLength||a.byteOffset!=s.byteOffset)return!1;a=a.buffer,s=s.buffer;case Cs:return!(a.byteLength!=s.byteLength||!t(new ta(a),new ta(s)));case Zi:case zi:case Ei:return bo(+a,+s);case ai:return a.name==s.name&&a.message==s.message;case ao:case iu:return a==s+"";case Yi:var o=za;case ps:var c=n&Fa;if(o||(o=G),a.size!=s.size&&!c)return!1;var p=r.get(a);if(p)return p==s;n|=fi,r.set(a,s);var y=Or(o(a),o(s),n,e,t,r);return r.delete(a),y;case Xs:if(Kc)return Kc.call(a)==Kc.call(s)}return!1}var Yc=$c;function tf(a,s,i){var n=s(a);return Dt(a)?n:Dr(n,i(a))}var Sf=tf;function Df(a,s){for(var i=-1,n=a==null?0:a.length,e=0,t=[];++i<n;){var r=a[i];s(r,i,a)&&(t[e++]=r)}return t}var nf=Df;function Zf(){return[]}var Fl=Zf,qf=Object.prototype,Bl=qf.propertyIsEnumerable,Qc=Object.getOwnPropertySymbols,Mf=Qc?function(a){return a==null?[]:(a=Object(a),nf(Qc(a),function(s){return Bl.call(a,s)}))}:Fl,Cd=Mf;function _f(a,s){for(var i=-1,n=Array(a);++i<a;)n[i]=s(i);return n}var kf=_f,ac=u(54),Nf=9007199254740991,Vl=/^(?:0|[1-9]\d*)$/;function ic(a,s){var i=typeof a;return s=s??Nf,!!s&&(i=="number"||i!="symbol"&&Vl.test(a))&&a>-1&&a%1==0&&a<s}var qi=ic,Gi="[object Arguments]",bl="[object Array]",ss="[object Boolean]",ko="[object Date]",Ls="[object Error]",Bu="[object Function]",Ts="[object Map]",Td="[object Number]",tl="[object Object]",Tc="[object RegExp]",Tu="[object Set]",ou="[object String]",Ad="[object WeakMap]",El="[object ArrayBuffer]",Jc="[object DataView]",Od="[object Float32Array]",Vu="[object Float64Array]",Ac="[object Int8Array]",Jo="[object Int16Array]",zu="[object Int32Array]",Gu="[object Uint8Array]",Sd="[object Uint8ClampedArray]",eh="[object Uint16Array]",Dd="[object Uint32Array]",Qi={};Qi[Od]=Qi[Vu]=Qi[Ac]=Qi[Jo]=Qi[zu]=Qi[Gu]=Qi[Sd]=Qi[eh]=Qi[Dd]=!0,Qi[Gi]=Qi[bl]=Qi[El]=Qi[ss]=Qi[Jc]=Qi[ko]=Qi[Ls]=Qi[Bu]=Qi[Ts]=Qi[Td]=Qi[tl]=Qi[Tc]=Qi[Tu]=Qi[ou]=Qi[Ad]=!1;function Ih(a){return sr(a)&&Un(a.length)&&!!Qi[Nn(a)]}var zl=Ih;function Md(a){return function(s){return a(s)}}var Gl=Md,Xl=u(49),su=Xl.a&&Xl.a.isTypedArray,_d=su?Gl(su):zl,oc=_d,sc=Object.prototype,Oc=sc.hasOwnProperty;function th(a,s){var i=Dt(a),n=!i&&Sa(a),e=!i&&!n&&Object(ac.a)(a),t=!i&&!n&&!e&&oc(a),r=i||n||e||t,o=r?kf(a.length,String):[],c=o.length;for(var p in a)(s||Oc.call(a,p))&&!(r&&(p=="length"||e&&(p=="offset"||p=="parent")||t&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||qi(p,c)))&&o.push(p);return o}var js=th,nh=Object.prototype;function Oo(a){var s=a&&a.constructor,i=typeof s=="function"&&s.prototype||nh;return a===i}var Ws=Oo;function Zc(a,s){return function(i){return a(s(i))}}var kd=Zc,Sc=kd(Object.keys,Object),rf=Sc,Rf=Object.prototype,Pf=Rf.hasOwnProperty;function rh(a){if(!Ws(a))return rf(a);var s=[];for(var i in Object(a))Pf.call(a,i)&&i!="constructor"&&s.push(i);return s}var Dc=rh;function Us(a){return Re(a)?js(a):Dc(a)}var Au=Us;function qc(a){return Sf(a,Au,Cd)}var Nd=qc,Ou=1,Su=Object.prototype,ah=Su.hasOwnProperty;function xl(a,s,i,n,e,t){var r=i&Ou,o=Nd(a),c=o.length,p=Nd(s),y=p.length;if(c!=y&&!r)return!1;for(var C=c;C--;){var S=o[C];if(!(r?S in s:ah.call(s,S)))return!1}var I=t.get(a),W=t.get(s);if(I&&W)return I==s&&W==a;var q=!0;t.set(a,s),t.set(s,a);for(var ie=r;++C<c;){S=o[C];var ve=a[S],Le=s[S];if(n)var Oe=r?n(Le,ve,S,s,a,t):n(ve,Le,S,a,s,t);if(!(Oe===void 0?ve===Le||e(ve,Le,i,n,t):Oe)){q=!1;break}ie||(ie=S=="constructor")}if(q&&!ie){var it=a.constructor,at=s.constructor;it!=at&&"constructor"in a&&"constructor"in s&&!(typeof it=="function"&&it instanceof it&&typeof at=="function"&&at instanceof at)&&(q=!1)}return t.delete(a),t.delete(s),q}var If=xl,wl=Kn(Ke.a,"DataView"),ed=wl,td=Kn(Ke.a,"Promise"),uc=td,af=Kn(Ke.a,"WeakMap"),nd=af,rd="[object Map]",io="[object Object]",Rd="[object Promise]",Mc="[object Set]",ad="[object WeakMap]",of="[object DataView]",lc=An(ed),Pd=An(ks),cc=An(uc),Xu=An(qu),_c=An(nd),Wu=Nn;(ed&&Wu(new ed(new ArrayBuffer(1)))!=of||ks&&Wu(new ks)!=rd||uc&&Wu(uc.resolve())!=Rd||qu&&Wu(new qu)!=Mc||nd&&Wu(new nd)!=ad)&&(Wu=function(s){var i=Nn(s),n=i==io?s.constructor:void 0,e=n?An(n):"";if(e)switch(e){case lc:return of;case Pd:return rd;case cc:return Rd;case Xu:return Mc;case _c:return ad}return i});var Hs=Wu,kc=1,dc="[object Arguments]",Id="[object Array]",fc="[object Object]",No=Object.prototype,nl=No.hasOwnProperty;function id(a,s,i,n,e,t){var r=Dt(a),o=Dt(s),c=r?Id:Hs(a),p=o?Id:Hs(s);c=c==dc?fc:c,p=p==dc?fc:p;var y=c==fc,C=p==fc,S=c==p;if(S&&Object(ac.a)(a)){if(!Object(ac.a)(s))return!1;r=!0,y=!1}if(S&&!y)return t||(t=new bt),r||oc(a)?Or(a,s,i,n,e,t):Yc(a,s,c,i,n,e,t);if(!(i&kc)){var I=y&&nl.call(a,"__wrapped__"),W=C&&nl.call(s,"__wrapped__");if(I||W){var q=I?a.value():a,ie=W?s.value():s;return t||(t=new bt),e(q,ie,i,n,t)}}return S?(t||(t=new bt),If(a,s,i,n,e,t)):!1}var od=id;function Zo(a,s,i,n,e){return a===s?!0:a==null||s==null||!sr(a)&&!sr(s)?a!==a&&s!==s:od(a,s,i,n,Zo,e)}var rl=Zo,qo=1,us=2;function ls(a,s,i,n){var e=i.length,t=e,r=!n;if(a==null)return!t;for(a=Object(a);e--;){var o=i[e];if(r&&o[2]?o[1]!==a[o[0]]:!(o[0]in a))return!1}for(;++e<t;){o=i[e];var c=o[0],p=a[c],y=o[1];if(r&&o[2]){if(p===void 0&&!(c in a))return!1}else{var C=new bt;if(n)var S=n(p,y,c,a,s,C);if(!(S===void 0?rl(y,p,qo|us,n,C):S))return!1}}return!0}var Wl=ls;function uu(a){return a===a&&!nr(a)}var Nc=uu;function al(a){for(var s=Au(a),i=s.length;i--;){var n=s[i],e=a[n];s[i]=[n,e,Nc(e)]}return s}var Cl=al;function Ks(a,s){return function(i){return i==null?!1:i[a]===s&&(s!==void 0||a in Object(i))}}var Hu=Ks;function Tl(a){var s=Cl(a);return s.length==1&&s[0][2]?Hu(s[0][0],s[0][1]):function(i){return i===a||Wl(i,a,s)}}var Al=Tl,lu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hl=/^\w*$/;function Ld(a,s){if(Dt(a))return!1;var i=typeof a;return i=="number"||i=="symbol"||i=="boolean"||a==null||ee(a)?!0:Hl.test(a)||!lu.test(a)||s!=null&&a in Object(s)}var hc=Ld,Rc="Expected a function";function cu(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(Rc);var i=function n(){var e=arguments,t=s?s.apply(this,e):e[0],r=n.cache;if(r.has(t))return r.get(t);var o=a.apply(this,e);return n.cache=r.set(t,o)||r,o};return i.cache=new(cu.Cache||Ns),i}cu.Cache=Ns;var $s=cu,Du=500;function Vo(a){var s=$s(a,function(n){return i.size===Du&&i.clear(),n}),i=s.cache;return s}var Pc=Vo,sd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ic=/\\(\\)?/g,jd=Pc(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(sd,function(i,n,e,t){s.push(e?t.replace(Ic,"$1"):n||i)}),s}),Lf=jd;function sf(a,s){for(var i=-1,n=a==null?0:a.length,e=Array(n);++i<n;)e[i]=s(a[i],i,a);return e}var Ys=sf,uf=1/0,jf=Gt?Gt.prototype:void 0,lf=jf?jf.toString:void 0;function Uf(a){if(typeof a=="string")return a;if(Dt(a))return Ys(a,Uf)+"";if(ee(a))return lf?lf.call(a):"";var s=a+"";return s=="0"&&1/a==-uf?"-0":s}var Qs=Uf;function pc(a){return a==null?"":Qs(a)}var lo=pc;function Lc(a,s){return Dt(a)?a:hc(a,s)?[a]:Lf(lo(a))}var Ud=Lc,Ff=1/0;function ih(a){if(typeof a=="string"||ee(a))return a;var s=a+"";return s=="0"&&1/a==-Ff?"-0":s}var Kl=ih;function cf(a,s){s=Ud(s,a);for(var i=0,n=s.length;a!=null&&i<n;)a=a[Kl(s[i++])];return i&&i==n?a:void 0}var Fd=cf;function Ku(a,s,i){var n=a==null?void 0:Fd(a,s);return n===void 0?i:n}var Fs=Ku;function Bd(a,s){return a!=null&&s in Object(a)}var Vd=Bd;function il(a,s,i){s=Ud(s,a);for(var n=-1,e=s.length,t=!1;++n<e;){var r=Kl(s[n]);if(!(t=a!=null&&i(a,r)))break;a=a[r]}return t||++n!=e?t:(e=a==null?0:a.length,!!e&&Un(e)&&qi(r,e)&&(Dt(a)||Sa(a)))}var ud=il;function Mu(a,s){return a!=null&&ud(a,s,Vd)}var ld=Mu,es=1,cd=2;function jc(a,s){return hc(a)&&Nc(s)?Hu(Kl(a),s):function(i){var n=Fs(i,a);return n===void 0&&n===s?ld(i,a):rl(s,n,es|cd)}}var zd=jc;function dd(a){return function(s){return s==null?void 0:s[a]}}var Ol=dd;function Uc(a){return function(s){return Fd(s,a)}}var _u=Uc;function fd(a){return hc(a)?Ol(Kl(a)):_u(a)}var Gd=fd;function Fc(a){return typeof a=="function"?a:a==null?Ao:typeof a=="object"?Dt(a)?zd(a[0],a[1]):Al(a):Gd(a)}var Sl=Fc;function Xd(a,s,i){return Xt(a,s,Sl(i,2))}var Bf=Xd;function oh(a){return function(s,i,n){for(var e=-1,t=Object(s),r=n(s),o=r.length;o--;){var c=r[a?o:++e];if(i(t[c],c,t)===!1)break}return s}}var df=oh,Lh=df(),$u=Lh;function sh(a,s){return a&&$u(a,s,Au)}var ff=sh;function Vf(a,s){return function(i,n){if(i==null)return i;if(!Re(i))return a(i,n);for(var e=i.length,t=s?e:-1,r=Object(i);(s?t--:++t<e)&&!(n(r[t],t,r)===!1););return i}}var uh=Vf,zf=uh(ff),lh=zf;function ol(a,s){var i=-1,n=Re(a)?Array(a.length):[];return lh(a,function(e,t,r){n[++i]=s(e,t,r)}),n}var ku=ol;function vc(a,s){var i=a.length;for(a.sort(s);i--;)a[i]=a[i].value;return a}var Dl=vc;function Wd(a,s){if(a!==s){var i=a!==void 0,n=a===null,e=a===a,t=ee(a),r=s!==void 0,o=s===null,c=s===s,p=ee(s);if(!o&&!p&&!t&&a>s||t&&r&&c&&!o&&!p||n&&r&&c||!i&&c||!e)return 1;if(!n&&!t&&!p&&a<s||p&&i&&e&&!n&&!t||o&&i&&e||!r&&e||!c)return-1}return 0}var hd=Wd;function mc(a,s,i){for(var n=-1,e=a.criteria,t=s.criteria,r=e.length,o=i.length;++n<r;){var c=hd(e[n],t[n]);if(c){if(n>=o)return c;var p=i[n];return c*(p=="desc"?-1:1)}}return a.index-s.index}var Hd=mc;function As(a,s,i){s.length?s=Ys(s,function(t){return Dt(t)?function(r){return Fd(r,t.length===1?t[0]:t)}:t}):s=[Ao];var n=-1;s=Ys(s,Gl(Sl));var e=ku(a,function(t,r,o){var c=Ys(s,function(p){return p(t)});return{criteria:c,index:++n,value:t}});return Dl(e,function(t,r){return Hd(t,r,i)})}var $l=As;function Ro(a,s,i){if(!nr(i))return!1;var n=typeof s;return(n=="number"?Re(i)&&qi(s,i.length):n=="string"&&s in i)?bo(i[s],a):!1}var zo=Ro,ch=hs(function(a,s){if(a==null)return[];var i=s.length;return i>1&&zo(a,s[0],s[1])?s=[]:i>2&&zo(s[0],s[1],s[2])&&(s=[s[0]]),$l(a,Hi(s,1),[])}),hf=ch;function dh(a,s,i){s=="__proto__"&&fs?fs(a,s,{configurable:!0,enumerable:!0,value:i,writable:!0}):a[s]=i}var Go=dh;function Gf(a,s,i,n){for(var e=-1,t=a==null?0:a.length;++e<t;){var r=a[e];s(n,r,i(r),a)}return n}var Nu=Gf;function sl(a,s,i,n){return lh(a,function(e,t,r){s(n,e,i(e),r)}),n}var gc=sl;function Kd(a,s){return function(i,n){var e=Dt(i)?Nu:gc,t=s?s():{};return e(i,a,Sl(n,2),t)}}var Xf=Kd,$d=Object.prototype,pd=$d.hasOwnProperty,yc=Xf(function(a,s,i){pd.call(a,i)?a[i].push(s):Go(a,i,[s])}),ii=yc,du=200;function ci(a,s,i,n){var e=-1,t=yl,r=!0,o=a.length,c=[],p=s.length;if(!o)return c;i&&(s=Ys(s,Gl(i))),n?(t=$o,r=!1):s.length>=du&&(t=Rs,r=!1,s=new xc(s));e:for(;++e<o;){var y=a[e],C=i==null?y:i(y);if(y=n||y!==0?y:0,r&&C===C){for(var S=p;S--;)if(s[S]===C)continue e;c.push(y)}else t(s,C,n)||c.push(y)}return c}var Bs=ci,vs=hs(function(a,s){return Ul(a)?Bs(a,Hi(s,1,Ul,!0)):[]}),ge=vs;function _e(a,s,i){for(var n=-1,e=a.length;++n<e;){var t=a[n],r=s(t);if(r!=null&&(o===void 0?r===r&&!ee(r):i(r,o)))var o=r,c=t}return c}var Et=_e;function vn(a,s){return a>s}var Vn=vn;function kn(a){return a&&a.length?Et(a,Ao,Vn):void 0}var bn=kn;function ur(a,s,i){for(var n=Sn(a,i),e=Sn(s,i),t=e.free,r=n.keyIndex,o=e.keyIndex,c=[],p=[],y=0,C,S,I=0;y<a.length;){if(C=a[y],S=C[i],S)if(!o.hasOwnProperty(S))p.push(null);else{var W=o[S];p.push(s[W])}else{I+=1;var q=t[I];p.push(q||null)}y+=1}var ie=p.slice(0);for(y=0;y<ie.length;)ie[y]===null?(qt(y),Tn(y)):y+=1;for(var ve=y=0;y<s.length;){C=s[y],S=C[i];var Le=ie[ve];if(Le){var Oe=Le[i];if(S===Oe)ve+=1;else if(!r.hasOwnProperty(S))Kt(y,C);else{var it=ie[ve+1];if(it){var at=it[i];at===S?(qt(y),Tn(ve),ve+=1):Kt(y,C)}}}else Kt(y,C);y+=1}for(var Qe=ie.length-ve;(ve+=1)<ie.length;)Qe-=1,qt(Qe+y);function qt(Bn){var tr={index:Bn,type:0,item:null};c.push(tr)}function Kt(Bn,tr){var hr={index:Bn,item:tr,type:1};c.push(hr)}function Tn(Bn){ie.splice(Bn,1)}return{moves:c}}function Sn(a,s){for(var i={},n=[],e=0,t=a.length;e<t;e+=1){var r=a[e],o=r[s];o?i[o]=e:n.push(r)}return{keyIndex:i,free:n}}var mr=Object.prototype,Er=mr.hasOwnProperty;function Cr(a,s){return a!=null&&Er.call(a,s)}var Ir=Cr;function Mr(a,s){return a!=null&&ud(a,s,Ir)}var xr=Mr,mn=Object.prototype,fn=mn.hasOwnProperty;function br(a,s,i){var n=a[s];(!(fn.call(a,s)&&bo(n,i))||i===void 0&&!(s in a))&&Go(a,s,i)}var Fr=br;function Pn(a,s,i,n){if(!nr(a))return a;s=Ud(s,a);for(var e=-1,t=s.length,r=t-1,o=a;o!=null&&++e<t;){var c=Kl(s[e]),p=i;if(c==="__proto__"||c==="constructor"||c==="prototype")return a;if(e!=r){var y=o[c];p=n?n(y,c,o):void 0,p===void 0&&(p=nr(y)?y:qi(s[e+1])?[]:{})}Fr(o,c,p),o=o[c]}return a}var na=Pn;function dr(a,s,i){for(var n=-1,e=s.length,t={};++n<e;){var r=s[n],o=Fd(a,r);i(o,r)&&na(t,Ud(r,a),o)}return t}var lr=dr;function ir(a,s){return lr(a,s,function(i,n){return ld(a,n)})}var fr=ir;function oa(a){var s=a==null?0:a.length;return s?Hi(a,1):[]}var Ma=oa;function Pr(a){return Fu(wu(a,void 0,Ma),a+"")}var Tr=Pr,er=Tr(function(a,s){return a==null?{}:fr(a,s)}),ha=er;function Wa(a){return typeof a=="function"?a:Ao}var Jr=Wa;function Ja(a){var s=[];if(a!=null)for(var i in Object(a))s.push(i);return s}var Aa=Ja,ei=Object.prototype,gi=ei.hasOwnProperty;function So(a){if(!nr(a))return Aa(a);var s=Ws(a),i=[];for(var n in a)n=="constructor"&&(s||!gi.call(a,n))||i.push(n);return i}var jo=So;function oi(a){return Re(a)?js(a,!0):jo(a)}var Ni=oi;function oo(a,s){return a==null?a:$u(a,Jr(s),Ni)}var Uo=oo;function po(a,s,i){(i!==void 0&&!bo(a[s],i)||i===void 0&&!(s in a))&&Go(a,s,i)}var Po=po,Xo=u(144);function Do(a){var s=new a.constructor(a.byteLength);return new ta(s).set(new ta(a)),s}var vo=Do;function Ha(a,s){var i=s?vo(a.buffer):a.buffer;return new a.constructor(i,a.byteOffset,a.length)}var Wo=Ha;function yi(a,s){var i=-1,n=a.length;for(s||(s=Array(n));++i<n;)s[i]=a[i];return s}var va=yi,Ra=Object.create,hi=function(){function a(){}return function(s){if(!nr(s))return{};if(Ra)return Ra(s);a.prototype=s;var i=new a;return a.prototype=void 0,i}}(),eo=hi,ms=kd(Object.getPrototypeOf,Object),Ml=ms;function ht(a){return typeof a.constructor=="function"&&!Ws(a)?eo(Ml(a)):{}}var On=ht,ln="[object Object]",Hr=Function.prototype,Ga=Object.prototype,ot=Hr.toString,Ge=Ga.hasOwnProperty,Nt=ot.call(Object);function tn(a){if(!sr(a)||Nn(a)!=ln)return!1;var s=Ml(a);if(s===null)return!0;var i=Ge.call(s,"constructor")&&s.constructor;return typeof i=="function"&&i instanceof i&&ot.call(i)==Nt}var nn=tn;function jt(a,s){return s==="constructor"&&typeof a[s]=="function"||s=="__proto__"?void 0:a[s]}var Lt=jt;function Yt(a,s,i,n){var e=!i;i||(i={});for(var t=-1,r=s.length;++t<r;){var o=s[t],c=n?n(i[o],a[o],o,i,a):void 0;c===void 0&&(c=a[o]),e?Go(i,o,c):Fr(i,o,c)}return i}var nt=Yt;function Mt(a){return nt(a,Ni(a))}var qe=Mt;function Zt(a,s,i,n,e,t,r){var o=Lt(a,i),c=Lt(s,i),p=r.get(c);if(p){Po(a,i,p);return}var y=t?t(o,c,i+"",a,s,r):void 0,C=y===void 0;if(C){var S=Dt(c),I=!S&&Object(ac.a)(c),W=!S&&!I&&oc(c);y=c,S||I||W?Dt(o)?y=o:Ul(o)?y=va(o):I?(C=!1,y=Object(Xo.a)(c,!0)):W?(C=!1,y=Wo(c,!0)):y=[]:nn(c)||Sa(c)?(y=o,Sa(o)?y=qe(o):(!nr(o)||Jn(o))&&(y=On(c))):C=!1}C&&(r.set(c,y),e(y,c,n,t,r),r.delete(c)),Po(a,i,y)}var sn=Zt;function $n(a,s,i,n,e){if(a===s)return;$u(s,function(t,r){if(e||(e=new bt),nr(t))sn(a,s,r,i,$n,n,e);else{var o=n?n(Lt(a,r),t,r+"",a,s,e):void 0;o===void 0&&(o=t),Po(a,r,o)}},Ni)}var Qn=$n;function zn(a){return hs(function(s,i){var n=-1,e=i.length,t=e>1?i[e-1]:void 0,r=e>2?i[2]:void 0;for(t=a.length>3&&typeof t=="function"?(e--,t):void 0,r&&zo(i[0],i[1],r)&&(t=e<3?void 0:t,e=1),s=Object(s);++n<e;){var o=i[n];o&&a(s,o,n,t)}return s})}var d=zn,h=d(function(a,s,i){Qn(a,s,i)}),x=h,F=d(function(a,s){nt(s,Ni(s),a)}),Q=F;function pe(a,s){return rl(a,s)}var je=pe,ct="[object Map]",yn="[object Set]",or=Object.prototype,wr=or.hasOwnProperty;function ga(a){if(a==null)return!0;if(Re(a)&&(Dt(a)||typeof a=="string"||typeof a.splice=="function"||Object(ac.a)(a)||oc(a)||Sa(a)))return!a.length;var s=Hs(a);if(s==ct||s==yn)return!a.size;if(Ws(a))return!Dc(a).length;for(var i in a)if(wr.call(a,i))return!1;return!0}var pa=ga;function Fi(a,s){for(var i=-1,n=a==null?0:a.length;++i<n&&!(s(a[i],i,a)===!1););return a}var ul=Fi;function Vs(a,s){return a&&nt(s,Au(s),a)}var In=Vs;function wn(a,s){return a&&nt(s,Ni(s),a)}var cr=wn;function Xr(a,s){return nt(a,Cd(a),s)}var aa=Xr,ba=Object.getOwnPropertySymbols,ri=ba?function(a){for(var s=[];a;)Dr(s,Cd(a)),a=Ml(a);return s}:Fl,Ri=ri;function mo(a,s){return nt(a,Ri(a),s)}var wi=mo;function vd(a){return Sf(a,Ni,Ri)}var Op=vd,lv=Object.prototype,Pg=lv.hasOwnProperty;function ym(a){var s=a.length,i=new a.constructor(s);return s&&typeof a[0]=="string"&&Pg.call(a,"index")&&(i.index=a.index,i.input=a.input),i}var Ig=ym;function bm(a,s){var i=s?vo(a.buffer):a.buffer;return new a.constructor(i,a.byteOffset,a.byteLength)}var tp=bm,Lg=/\w*$/;function jg(a){var s=new a.constructor(a.source,Lg.exec(a));return s.lastIndex=a.lastIndex,s}var Em=jg,xm=Gt?Gt.prototype:void 0,cv=xm?xm.valueOf:void 0;function Sp(a){return cv?Object(cv.call(a)):{}}var Ug=Sp,Fg="[object Boolean]",wm="[object Date]",Cm="[object Map]",Tm="[object Number]",Bg="[object RegExp]",Vg="[object Set]",zg="[object String]",P="[object Symbol]",M="[object ArrayBuffer]",v="[object DataView]",m="[object Float32Array]",l="[object Float64Array]",A="[object Int8Array]",B="[object Int16Array]",X="[object Int32Array]",H="[object Uint8Array]",ne="[object Uint8ClampedArray]",oe="[object Uint16Array]",be="[object Uint32Array]";function we(a,s,i){var n=a.constructor;switch(s){case M:return vo(a);case Fg:case wm:return new n(+a);case v:return tp(a,i);case m:case l:case A:case B:case X:case H:case ne:case oe:case be:return Wo(a,i);case Cm:return new n;case Tm:case zg:return new n(a);case Bg:return Em(a);case Vg:return new n;case P:return Ug(a)}}var Ne=we,xe="[object Map]";function ke(a){return sr(a)&&Hs(a)==xe}var Me=ke,He=Xl.a&&Xl.a.isMap,Xe=He?Gl(He):Me,dt=Xe,Ot="[object Set]";function _t(a){return sr(a)&&Hs(a)==Ot}var En=_t,an=Xl.a&&Xl.a.isSet,rn=an?Gl(an):En,Hn=rn,Zn=1,Rr=2,ar=4,la="[object Arguments]",ya="[object Array]",ti="[object Boolean]",vi="[object Date]",Za="[object Error]",La="[object Function]",qa="[object GeneratorFunction]",_a="[object Map]",ca="[object Number]",Ti="[object Object]",Ci="[object RegExp]",$r="[object Set]",Ia="[object String]",go="[object Symbol]",xi="[object WeakMap]",yo="[object ArrayBuffer]",si="[object DataView]",ts="[object Float32Array]",_l="[object Float64Array]",to="[object Int8Array]",md="[object Int16Array]",fh="[object Int32Array]",hh="[object Uint8Array]",Wf="[object Uint8ClampedArray]",ph="[object Uint16Array]",Dp="[object Uint32Array]",Mo={};Mo[la]=Mo[ya]=Mo[yo]=Mo[si]=Mo[ti]=Mo[vi]=Mo[ts]=Mo[_l]=Mo[to]=Mo[md]=Mo[fh]=Mo[_a]=Mo[ca]=Mo[Ti]=Mo[Ci]=Mo[$r]=Mo[Ia]=Mo[go]=Mo[hh]=Mo[Wf]=Mo[ph]=Mo[Dp]=!0,Mo[Za]=Mo[La]=Mo[xi]=!1;function Ru(a,s,i,n,e,t){var r,o=s&Zn,c=s&Rr,p=s&ar;if(i&&(r=e?i(a,n,e,t):i(a)),r!==void 0)return r;if(!nr(a))return a;var y=Dt(a);if(y){if(r=Ig(a),!o)return va(a,r)}else{var C=Hs(a),S=C==La||C==qa;if(Object(ac.a)(a))return Object(Xo.a)(a,o);if(C==Ti||C==la||S&&!e){if(r=c||S?{}:On(a),!o)return c?wi(a,cr(r,a)):aa(a,In(r,a))}else{if(!Mo[C])return e?a:{};r=Ne(a,C,o)}}t||(t=new bt);var I=t.get(a);if(I)return I;t.set(a,r),Hn(a)?a.forEach(function(ie){r.add(Ru(ie,s,i,ie,a,t))}):dt(a)&&a.forEach(function(ie,ve){r.set(ve,Ru(ie,s,i,ve,a,t))});var W=p?c?Op:Nd:c?Ni:Au,q=y?void 0:W(a);return ul(q||a,function(ie,ve){q&&(ve=ie,ie=a[ve]),Fr(r,ve,Ru(ie,s,i,ve,a,t))}),r}var vh=Ru,np=4;function rp(a){return vh(a,np)}var jh=rp,Mp=1,dv=4;function _p(a){return vh(a,Mp|dv)}var fv=_p,Ka=Object.prototype,Uh=Ka.hasOwnProperty,Am=hs(function(a,s){a=Object(a);var i=-1,n=s.length,e=n>2?s[2]:void 0;for(e&&zo(s[0],s[1],e)&&(n=1);++i<n;)for(var t=s[i],r=Ni(t),o=-1,c=r.length;++o<c;){var p=r[o],y=a[p];(y===void 0||bo(y,Ka[p])&&!Uh.call(a,p))&&(a[p]=t[p])}return a}),Yl=Am;function hv(a,s,i,n,e,t){return nr(a)&&nr(s)&&(t.set(s,a),Qn(a,s,void 0,hv,t),t.delete(s)),a}var kp=hv,bc=d(function(a,s,i,n){Qn(a,s,i,n)}),Fh=bc,Np=hs(function(a){return a.push(void 0,kp),Io(Fh,void 0,a)}),Rp=Np;function pf(a){for(var s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];i.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){t!=="constructor"&&Object.defineProperty(a.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})})}var Zr=u(5),Wr=u(6),_r=u(3),Pp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])};function ap(a,s){Pp(a,s);function i(){this.constructor=a}a.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}var vf=function a(){Object(_r.a)(this,a)},Bh=/^\s*class\s+/.test("".concat(vf))||/^\s*class\s*\{/.test("".concat(function(){function a(){Object(_r.a)(this,a)}return a}()));function mh(a,s){var i;return Bh?i=function(n){Object(Zr.a)(t,n);var e=Object(Wr.a)(t);function t(){return Object(_r.a)(this,t),e.apply(this,arguments)}return t}(s):(i=function(){return s.apply(this,arguments)},ap(i,s)),Object.defineProperty(i,"name",{value:a}),i}function Ip(a,s){return a??s}function ip(a,s,i){var n=a!=null?a[s]:null;return i!==void 0?Ip(n,i):n}function Lp(a,s,i){var n=a!=null?a[s]:null;return n==null?i:(n=+n,Number.isNaN(n)||!Number.isFinite(n)?i:n)}function Om(a,s,i){var n=a!=null?a[s]:null;return n==null?i:!!n}function Yd(a){return a==="__proto__"}function Vh(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n,e=Array.isArray(s)?s:s.split(i);if(e.length)for(n=a;e.length;){var t=e.shift();if(Object(n)===n&&t&&t in n)n=n[t];else return}return n}function zh(a,s,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",e=Array.isArray(s)?s:s.split(n),t=e.pop();if(t&&!Yd(t)){var r=a;e.forEach(function(o){Yd(o)||(r[o]==null&&(r[o]={}),r=r[o])}),r[t]=i}return a}function Hf(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n=Array.isArray(s)?s.slice():s.split(i),e=n.pop();if(e)if(n.length>0){var t=Vh(a,n);t&&delete t[e]}else delete a[e];return a}function Kf(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",i=arguments.length>2?arguments[2]:void 0,n={};Object.keys(a).forEach(function(t){var r=a[t],o=typeof r=="object"||Array.isArray(r);if(o&&i&&i(r)&&(o=!1),o){var c=Kf(r,s,i);Object.keys(c).forEach(function(p){n[t+s+p]=c[p]})}else n[t]=r});for(var e in a)if(!Object.prototype.hasOwnProperty.call(a,e))continue;return n}var Ji="[object String]";function ll(a){return typeof a=="string"||!Dt(a)&&sr(a)&&Nn(a)==Ji}var Bc=ll;function Vc(a){return function(s){return a==null?void 0:a[s]}}var gd=Vc,mf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},op=gd(mf),Gh=op,$f=/[&<>"']/g,gh=RegExp($f.source);function Sm(a){return a=lo(a),a&&gh.test(a)?a.replace($f,Gh):a}var Gg=Sm,rE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},aE=gd(rE),iE=aE,Xg=/&(?:amp|lt|gt|quot|#39);/g,oE=RegExp(Xg.source);function sE(a){return a=lo(a),a&&oE.test(a)?a.replace(Xg,iE):a}var uE=sE;function lE(a,s,i){return a===a&&(i!==void 0&&(a=a<=i?a:i),s!==void 0&&(a=a>=s?a:s)),a}var pv=lE,cE=/\s/;function dE(a){for(var s=a.length;s--&&cE.test(a.charAt(s)););return s}var fE=dE,hE=/^\s+/;function pE(a){return a&&a.slice(0,fE(a)+1).replace(hE,"")}var vE=pE,Wg=0/0,mE=/^[-+]0x[0-9a-f]+$/i,gE=/^0b[01]+$/i,yE=/^0o[0-7]+$/i,bE=parseInt;function EE(a){if(typeof a=="number")return a;if(ee(a))return Wg;if(nr(a)){var s=typeof a.valueOf=="function"?a.valueOf():a;a=nr(s)?s+"":s}if(typeof a!="string")return a===0?a:+a;a=vE(a);var i=gE.test(a);return i||yE.test(a)?bE(a.slice(2),i?2:8):mE.test(a)?Wg:+a}var yh=EE,Hg=1/0,xE=17976931348623157e292;function wE(a){if(!a)return a===0?a:0;if(a=yh(a),a===Hg||a===-Hg){var s=a<0?-1:1;return s*xE}return a===a?a:0}var vv=wE;function CE(a){var s=vv(a),i=s%1;return s===s?i?s-i:s:0}var Qd=CE;function TE(a,s,i){return a=lo(a),i=i==null?0:pv(Qd(i),0,a.length),s=Qs(s),a.slice(i,i+s.length)==s}var AE=TE;function OE(a,s,i){a=lo(a),s=Qs(s);var n=a.length;i=i===void 0?n:pv(Qd(i),0,n);var e=i;return i-=s.length,i>=0&&a.slice(i,e)==s}var SE=OE;function DE(a,s,i){var n=-1,e=a.length;s<0&&(s=-s>e?0:e+s),i=i>e?e:i,i<0&&(i+=e),e=s>i?0:i-s>>>0,s>>>=0;for(var t=Array(e);++n<e;)t[n]=a[n+s];return t}var ME=DE;function _E(a,s,i){var n=a.length;return i=i===void 0?n:i,!s&&i>=n?a:ME(a,s,i)}var mv=_E,kE="\\ud800-\\udfff",NE="\\u0300-\\u036f",RE="\\ufe20-\\ufe2f",PE="\\u20d0-\\u20ff",IE=NE+RE+PE,LE="\\ufe0e\\ufe0f",jE="\\u200d",UE=RegExp("["+jE+kE+IE+LE+"]");function FE(a){return UE.test(a)}var sp=FE,BE="[object RegExp]";function VE(a){return sr(a)&&Nn(a)==BE}var zE=VE,Kg=Xl.a&&Xl.a.isRegExp,GE=Kg?Gl(Kg):zE,$g=GE;function XE(a){return a.split("")}var WE=XE,Yg="\\ud800-\\udfff",HE="\\u0300-\\u036f",KE="\\ufe20-\\ufe2f",$E="\\u20d0-\\u20ff",YE=HE+KE+$E,QE="\\ufe0e\\ufe0f",JE="["+Yg+"]",Dm="["+YE+"]",Mm="\\ud83c[\\udffb-\\udfff]",ZE="(?:"+Dm+"|"+Mm+")",Qg="[^"+Yg+"]",Jg="(?:\\ud83c[\\udde6-\\uddff]){2}",Zg="[\\ud800-\\udbff][\\udc00-\\udfff]",qE="\\u200d",qg=ZE+"?",ey="["+QE+"]?",e1="(?:"+qE+"(?:"+[Qg,Jg,Zg].join("|")+")"+ey+qg+")*",t1=ey+qg+e1,n1="(?:"+[Qg+Dm+"?",Dm,Jg,Zg,JE].join("|")+")",r1=RegExp(Mm+"(?="+Mm+")|"+n1+t1,"g");function a1(a){return a.match(r1)||[]}var i1=a1;function o1(a){return sp(a)?i1(a):WE(a)}var gv=o1,s1=4294967295;function u1(a,s,i){return i&&typeof i!="number"&&zo(a,s,i)&&(s=i=void 0),i=i===void 0?s1:i>>>0,i?(a=lo(a),a&&(typeof s=="string"||s!=null&&!$g(s))&&(s=Qs(s),!s&&sp(a))?mv(gv(a),0,i):a.split(s,i)):[]}var l1=u1,c1=9007199254740991,d1=Math.floor;function f1(a,s){var i="";if(!a||s<1||s>c1)return i;do s%2&&(i+=a),s=d1(s/2),s&&(a+=a);while(s);return i}var _m=f1;function h1(a,s,i){return(i?zo(a,s,i):s===void 0)?s=1:s=Qd(s),_m(lo(a),s)}var p1=h1,v1=Ol("length"),m1=v1,ty="\\ud800-\\udfff",g1="\\u0300-\\u036f",y1="\\ufe20-\\ufe2f",b1="\\u20d0-\\u20ff",E1=g1+y1+b1,x1="\\ufe0e\\ufe0f",w1="["+ty+"]",km="["+E1+"]",Nm="\\ud83c[\\udffb-\\udfff]",C1="(?:"+km+"|"+Nm+")",ny="[^"+ty+"]",ry="(?:\\ud83c[\\udde6-\\uddff]){2}",ay="[\\ud800-\\udbff][\\udc00-\\udfff]",T1="\\u200d",iy=C1+"?",oy="["+x1+"]?",A1="(?:"+T1+"(?:"+[ny,ry,ay].join("|")+")"+oy+iy+")*",O1=oy+iy+A1,S1="(?:"+[ny+km+"?",km,ry,ay,w1].join("|")+")",sy=RegExp(Nm+"(?="+Nm+")|"+S1+O1,"g");function D1(a){for(var s=sy.lastIndex=0;sy.test(a);)++s;return s}var M1=D1;function _1(a){return sp(a)?M1(a):m1(a)}var jp=_1,k1=Math.ceil;function N1(a,s){s=s===void 0?" ":Qs(s);var i=s.length;if(i<2)return i?_m(s,a):s;var n=_m(s,k1(a/jp(s)));return sp(s)?mv(gv(n),0,a).join(""):n.slice(0,a)}var yv=N1,R1=Math.ceil,P1=Math.floor;function I1(a,s,i){a=lo(a),s=Qd(s);var n=s?jp(a):0;if(!s||n>=s)return a;var e=(s-n)/2;return yv(P1(e),i)+a+yv(R1(e),i)}var L1=I1;function j1(a,s,i){a=lo(a),s=Qd(s);var n=s?jp(a):0;return s&&n<s?a+yv(s-n,i):a}var U1=j1;function F1(a,s,i){a=lo(a),s=Qd(s);var n=s?jp(a):0;return s&&n<s?yv(s-n,i)+a:a}var B1=F1,V1=30,z1="...",G1=/\w*$/;function X1(a,s){var i=V1,n=z1;if(nr(s)){var e="separator"in s?s.separator:e;i="length"in s?Qd(s.length):i,n="omission"in s?Qs(s.omission):n}a=lo(a);var t=a.length;if(sp(a)){var r=gv(a);t=r.length}if(i>=t)return a;var o=i-jp(n);if(o<1)return n;var c=r?mv(r,0,o).join(""):a.slice(0,o);if(e===void 0)return c+n;if(r&&(o+=c.length-o),$g(e)){if(a.slice(o).search(e)){var p,y=c;for(e.global||(e=RegExp(e.source,lo(G1.exec(e))+"g")),e.lastIndex=0;p=e.exec(y);)var C=p.index;c=c.slice(0,C===void 0?o:C)}}else if(a.indexOf(Qs(e),o)!=o){var S=c.lastIndexOf(e);S>-1&&(c=c.slice(0,S))}return c+n}var W1=X1,H1=d(function(a,s,i,n){nt(s,Ni(s),a,n)}),uy=H1,K1="[object DOMException]",$1="[object Error]";function Y1(a){if(!sr(a))return!1;var s=Nn(a);return s==$1||s==K1||typeof a.message=="string"&&typeof a.name=="string"&&!nn(a)}var ly=Y1,Q1=hs(function(a,s){try{return Io(a,void 0,s)}catch(i){return ly(i)?i:new Error(i)}}),J1=Q1;function Z1(a,s){return Ys(s,function(i){return a[i]})}var q1=Z1,cy=Object.prototype,e2=cy.hasOwnProperty;function t2(a,s,i,n){return a===void 0||bo(a,cy[i])&&!e2.call(n,i)?s:a}var dy=t2,n2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function r2(a){return"\\"+n2[a]}var a2=r2,i2=/<%=([\s\S]+?)%>/g,fy=i2,o2=/<%-([\s\S]+?)%>/g,s2=o2,u2=/<%([\s\S]+?)%>/g,l2=u2,c2={escape:s2,evaluate:l2,interpolate:fy,variable:"",imports:{_:{escape:Gg}}},hy=c2,d2="Invalid `variable` option passed into `_.template`",f2=/\b__p \+= '';/g,h2=/\b(__p \+=) '' \+/g,p2=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v2=/[()=,{}\[\]\/\s]/,m2=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bv=/($^)/,g2=/['\n\r\u2028\u2029\\]/g,y2=Object.prototype,py=y2.hasOwnProperty;function b2(a,s,i){var n=hy.imports._.templateSettings||hy;i&&zo(a,s,i)&&(s=void 0),a=lo(a),s=uy({},s,n,dy);var e=uy({},s.imports,n.imports,dy),t=Au(e),r=q1(e,t),o,c,p=0,y=s.interpolate||bv,C="__p += '",S=RegExp((s.escape||bv).source+"|"+y.source+"|"+(y===fy?m2:bv).source+"|"+(s.evaluate||bv).source+"|$","g"),I=py.call(s,"sourceURL")?"//# sourceURL="+(s.sourceURL+"").replace(/\s/g," ")+`
`:"";a.replace(S,function(ie,ve,Le,Oe,it,at){return Le||(Le=Oe),C+=a.slice(p,at).replace(g2,a2),ve&&(o=!0,C+=`' +
__e(`+ve+`) +
'`),it&&(c=!0,C+=`';
`+it+`;
__p += '`),Le&&(C+=`' +
((__t = (`+Le+`)) == null ? '' : __t) +
'`),p=at+ie.length,ie}),C+=`';
`;var W=py.call(s,"variable")&&s.variable;if(!W)C=`with (obj) {
`+C+`
}
`;else if(v2.test(W))throw new Error(d2);C=(c?C.replace(f2,""):C).replace(h2,"$1").replace(p2,"$1;"),C="function("+(W||"obj")+`) {
`+(W?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(o?", __e = _.escape":"")+(c?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+C+`return __p
}`;var q=J1(function(){return Function(t,I+"return "+C).apply(void 0,r)});if(q.source=C,ly(q))throw q;return q}var E2=b2,x2=0;function w2(a){var s=++x2;return lo(a)+s}var C2=w2;function T2(a){var s=null;try{s=window.eval(a)}catch(i){}return s}function A2(a,s,i,n){var e=-1,t=a==null?0:a.length;for(n&&t&&(i=a[++e]);++e<t;)i=s(i,a[e],e,a);return i}var O2=A2,S2={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},D2=gd(S2),M2=D2,_2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,k2="\\u0300-\\u036f",N2="\\ufe20-\\ufe2f",R2="\\u20d0-\\u20ff",P2=k2+N2+R2,I2="["+P2+"]",L2=RegExp(I2,"g");function j2(a){return a=lo(a),a&&a.replace(_2,M2).replace(L2,"")}var U2=j2,F2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function B2(a){return a.match(F2)||[]}var V2=B2,z2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function G2(a){return z2.test(a)}var X2=G2,vy="\\ud800-\\udfff",W2="\\u0300-\\u036f",H2="\\ufe20-\\ufe2f",K2="\\u20d0-\\u20ff",$2=W2+H2+K2,my="\\u2700-\\u27bf",gy="a-z\\xdf-\\xf6\\xf8-\\xff",Y2="\\xac\\xb1\\xd7\\xf7",Q2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",J2="\\u2000-\\u206f",Z2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yy="A-Z\\xc0-\\xd6\\xd8-\\xde",q2="\\ufe0e\\ufe0f",by=Y2+Q2+J2+Z2,Ey="['\u2019]",xy="["+by+"]",ex="["+$2+"]",wy="\\d+",tx="["+my+"]",Cy="["+gy+"]",Ty="[^"+vy+by+wy+my+gy+yy+"]",nx="\\ud83c[\\udffb-\\udfff]",rx="(?:"+ex+"|"+nx+")",ax="[^"+vy+"]",Ay="(?:\\ud83c[\\udde6-\\uddff]){2}",Oy="[\\ud800-\\udbff][\\udc00-\\udfff]",up="["+yy+"]",ix="\\u200d",Sy="(?:"+Cy+"|"+Ty+")",ox="(?:"+up+"|"+Ty+")",Dy="(?:"+Ey+"(?:d|ll|m|re|s|t|ve))?",My="(?:"+Ey+"(?:D|LL|M|RE|S|T|VE))?",_y=rx+"?",ky="["+q2+"]?",sx="(?:"+ix+"(?:"+[ax,Ay,Oy].join("|")+")"+ky+_y+")*",ux="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cx=ky+_y+sx,dx="(?:"+[tx,Ay,Oy].join("|")+")"+cx,fx=RegExp([up+"?"+Cy+"+"+Dy+"(?="+[xy,up,"$"].join("|")+")",ox+"+"+My+"(?="+[xy,up+Sy,"$"].join("|")+")",up+"?"+Sy+"+"+Dy,up+"+"+My,lx,ux,wy,dx].join("|"),"g");function hx(a){return a.match(fx)||[]}var px=hx;function vx(a,s,i){return a=lo(a),s=i?void 0:s,s===void 0?X2(a)?px(a):V2(a):a.match(s)||[]}var mx=vx,gx="['\u2019]",yx=RegExp(gx,"g");function bx(a){return function(s){return O2(mx(U2(s).replace(yx,"")),a,"")}}var Ev=bx;function Ex(a){return function(s){s=lo(s);var i=sp(s)?gv(s):void 0,n=i?i[0]:s.charAt(0),e=i?mv(i,1).join(""):s.slice(1);return n[a]()+e}}var Ny=Ex,xx=Ny("toUpperCase"),xv=xx,wx=Ev(function(a,s,i){return a+(i?" ":"")+xv(s)}),Ry=wx;function Cx(a){return xv(lo(a).toLowerCase())}var Tx=Cx,Ax=Ev(function(a,s,i){return s=s.toLowerCase(),a+(i?Tx(s):s)}),Rm=Ax,Ox=Ev(function(a,s,i){return a+(i?" ":"")+s.toUpperCase()}),Sx=Ox,Dx=Ev(function(a,s,i){return a+(i?" ":"")+s.toLowerCase()}),Pm=Dx,Mx=Ny("toLowerCase"),_x=Mx,Xh=function(s){var i=Object.create(null);return function(n){var e=i[n];return e||(i[n]=s(n))}},Py=Xh(function(a){return a.replace(/\B([A-Z])/g,"-$1").toLowerCase()}),kx=Xh(function(a){return Ry(Rm(a)).replace(/ /g,"")}),Nx=Xh(function(a){return Sx(a).replace(/ /g,"_")}),Rx=Xh(function(a){return Pm(a).replace(/ /g,".")}),Px=Xh(function(a){return Pm(a).replace(/ /g,"/")}),Ix=Xh(function(a){return xv(Pm(a))}),Lx=Xh(function(a){return Ry(Rm(a))});function jx(a){for(var s=2166136261,i=!1,n=a,e=0,t=n.length;e<t;e+=1){var r=n.charCodeAt(e);r>127&&!i&&(n=unescape(encodeURIComponent(n)),r=n.charCodeAt(e),i=!0),s^=r,s+=(s<<1)+(s<<4)+(s<<7)+(s<<8)+(s<<24)}return s>>>0}function Ux(){for(var a="",s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",i=0,n=s.length;i<n;i+=1){var e=s[i],t=Math.random()*16|0,r=e==="x"?t:e==="y"?t&3|8:e;a+=r.toString(16)}return a}function Fx(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=k.a.parseHTML(a,null,!1);return i.forEach(function(n){var e=n;if(e){var t=e.attributes;if(t)for(var r=0,o=t.length;r<o;r+=1){var c=t.item(r);if(c){var p=c.value.toLowerCase(),y=c.name.toLowerCase();(y.startsWith("on")||p.startsWith("javascript:")||p.startsWith("data:")||p.startsWith("vbscript:"))&&e.removeAttribute(y)}}}}),s.raw?i:k()("<div/>").append(i).html()}var Bx=u(88);function Vx(a){if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(a=Object(Bx.a)(a))){var s=0,i=function(){};return{s:i,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,e=!0,t=!1,r;return{s:function(){n=a[Symbol.iterator]()},n:function(){var c=n.next();return e=c.done,c},e:function(c){t=!0,r=c},f:function(){try{!e&&n.return!=null&&n.return()}finally{if(t)throw r}}}}function zx(a,s,i){var n=Math.min(2,Math.floor(a.length*.34)),e=Math.floor(a.length*.4)+1,t,r=!1,o=a.toLowerCase(),c=Vx(s),p;try{for(c.s();!(p=c.n()).done;){var y=p.value,C=i(y);if(C!==void 0&&Math.abs(C.length-o.length)<=n){var S=C.toLowerCase();if(S===o){if(C===a)continue;return y}if(r)continue;if(C.length<3)continue;var I=Gx(o,S,e-1);if(I===void 0)continue;I<3?(r=!0,t=y):(e=I,t=y)}}}catch(W){c.e(W)}finally{c.f()}return t}function Gx(a,s,i){for(var n=new Array(s.length+1),e=new Array(s.length+1),t=i+1,r=0;r<=s.length;r+=1)n[r]=r;for(var o=1;o<=a.length;o+=1){var c=a.charCodeAt(o-1),p=o>i?o-i:1,y=s.length>i+o?i+o:s.length;e[0]=o;for(var C=o,S=1;S<p;S+=1)e[S]=t;for(var I=p;I<=y;I+=1){var W=c===s.charCodeAt(I-1)?n[I-1]:Math.min(n[I]+1,e[I-1]+1,n[I-1]+2);e[I]=W,C=Math.min(C,W)}for(var q=y+1;q<=s.length;q+=1)e[q]=t;if(C>i)return;var ie=n;n=e,e=ie}var ve=n[s.length];return ve>i?void 0:ve}var Xx="[object Number]";function Wx(a){return typeof a=="number"||sr(a)&&Nn(a)==Xx}var Iy=Wx;function Hx(a){return Iy(a)&&a!=+a}var Kx=Hx,$x=Ke.a.isFinite;function Yx(a){return typeof a=="number"&&$x(a)}var Qx=Yx;function Jx(a){return typeof a=="number"&&a==Qd(a)}var Ly=Jx,jy=9007199254740991;function Zx(a){return Ly(a)&&a>=-jy&&a<=jy}var qx=Zx;function ew(a,s,i){return i===void 0&&(i=s,s=void 0),i!==void 0&&(i=yh(i),i=i===i?i:0),s!==void 0&&(s=yh(s),s=s===s?s:0),pv(yh(a),s,i)}var tw=ew,nw=Math.max,rw=Math.min;function aw(a,s,i){return a>=rw(s,i)&&a<nw(s,i)}var iw=aw;function ow(a,s,i){return s=vv(s),i===void 0?(i=s,s=0):i=vv(i),a=yh(a),iw(a,s,i)}var sw=ow,Uy=9007199254740991;function uw(a){return a?pv(Qd(a),-Uy,Uy):a===0?a:0}var lw=uw,cw=/^\s+/,dw=Ke.a.parseInt;function fw(a,s,i){return i||s==null?s=0:s&&(s=+s),dw(lo(a).replace(cw,""),s||0)}var hw=fw;function pw(a,s){return(a%s+s)%s}function vw(a,s){if(s==null)s=a??1,a=0;else if(s<a){var i=a;a=s,s=i}return Math.floor(Math.random()*(s-a+1)+a)}function Fy(a){return typeof a=="string"&&a.slice(-1)==="%"}function mw(a,s){if(a==null)return 0;var i;if(typeof a=="string"){if(i=parseFloat(a),Fy(a)&&(i/=100,Number.isFinite(i)))return i*s}else i=a;return Number.isFinite(i)?i>0&&i<1?i*s:i:0}function gw(a,s){function i(r){var o=new RegExp("(?:\\d+(?:\\.\\d+)*)(".concat(r,")$")).exec(a);return o?o[1]:null}var n=parseFloat(a);if(Number.isNaN(n))return null;var e;if(s==null)e="[A-Za-z]*";else if(Array.isArray(s)){if(s.length===0)return null;e=s.join("|")}else typeof s=="string"&&(e=s);var t=i(e);return t===null?null:{unit:t,value:n}}function yw(a){if(typeof a=="object"){var s=0,i=0,n=0,e=0;return a.vertical!=null&&Number.isFinite(a.vertical)&&(i=e=a.vertical),a.horizontal!=null&&Number.isFinite(a.horizontal)&&(n=s=a.horizontal),a.left!=null&&Number.isFinite(a.left)&&(s=a.left),a.top!=null&&Number.isFinite(a.top)&&(i=a.top),a.right!=null&&Number.isFinite(a.right)&&(n=a.right),a.bottom!=null&&Number.isFinite(a.bottom)&&(e=a.bottom),{top:i,right:n,bottom:e,left:s}}var t=0;return a!=null&&Number.isFinite(a)&&(t=a),{top:t,right:t,bottom:t,left:t}}var bw="Expected a function";function Ew(a,s){var i;if(typeof s!="function")throw new TypeError(bw);return a=Qd(a),function(){return--a>0&&(i=s.apply(this,arguments)),a<=1&&(s=void 0),i}}var xw=Ew;function ww(a){return xw(2,a)}var Cw=ww,Tw=function(){return Ke.a.Date.now()},Im=Tw,Aw="Expected a function",Ow=Math.max,Sw=Math.min;function Dw(a,s,i){var n,e,t,r,o,c,p=0,y=!1,C=!1,S=!0;if(typeof a!="function")throw new TypeError(Aw);s=yh(s)||0,nr(i)&&(y=!!i.leading,C="maxWait"in i,t=C?Ow(yh(i.maxWait)||0,s):t,S="trailing"in i?!!i.trailing:S);function I(Qe){var qt=n,Kt=e;return n=e=void 0,p=Qe,r=a.apply(Kt,qt),r}function W(Qe){return p=Qe,o=setTimeout(ve,s),y?I(Qe):r}function q(Qe){var qt=Qe-c,Kt=Qe-p,Tn=s-qt;return C?Sw(Tn,t-Kt):Tn}function ie(Qe){var qt=Qe-c,Kt=Qe-p;return c===void 0||qt>=s||qt<0||C&&Kt>=t}function ve(){var Qe=Im();if(ie(Qe))return Le(Qe);o=setTimeout(ve,q(Qe))}function Le(Qe){return o=void 0,S&&n?I(Qe):(n=e=void 0,r)}function Oe(){o!==void 0&&clearTimeout(o),p=0,n=c=e=o=void 0}function it(){return o===void 0?r:Le(Im())}function at(){var Qe=Im(),qt=ie(Qe);if(n=arguments,e=this,c=Qe,qt){if(o===void 0)return W(c);if(C)return clearTimeout(o),o=setTimeout(ve,s),I(c)}return o===void 0&&(o=setTimeout(ve,s)),r}return at.cancel=Oe,at.flush=it,at}var Mw=Dw,_w="Expected a function";function kw(a,s,i){if(typeof a!="function")throw new TypeError(_w);return setTimeout(function(){a.apply(void 0,i)},s)}var Nw=kw,Rw=hs(function(a,s){return Nw(a,1,s)}),Pw=Rw;function Lm(a,s,i){if(i)switch(i.length){case 0:return a.call(s);case 1:return a.call(s,i[0]);case 2:return a.call(s,i[0],i[1]);case 3:return a.call(s,i[0],i[1],i[2]);case 4:return a.call(s,i[0],i[1],i[2],i[3]);case 5:return a.call(s,i[0],i[1],i[2],i[3],i[4]);case 6:return a.call(s,i[0],i[1],i[2],i[3],i[4],i[5]);default:return a.apply(s,i)}return a.call(s)}function Iw(a,s){for(var i=arguments.length,n=new Array(i>2?i-2:0),e=2;e<i;e++)n[e-2]=arguments[e];return Lm(a,s,n)}function Lw(a,s){for(var i=0,n=a.length;i<n;i+=1)if(a[i]===s)return a.push(a.splice(i,1)[0])}function jw(a,s,i){var n=[],e={},t=function(){for(var o=!1,c=arguments.length,p=new Array(c),y=0;y<c;y++)p[y]=arguments[y];var C=p.join("\u2400");return C in e?(o=!0,Lw(n,C)):(n.length>=1e3&&delete e[n.shift()],n.push(C),e[C]=Lm(a,s||null,p)),i?i(e[C],o):e[C]};return t}var Ca=u(12);function By(a){return typeof a=="object"&&a.then&&typeof a.then=="function"}function jm(a){return a!=null&&(a instanceof Promise||By(a))}function Vy(){for(var a=[],s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];i.forEach(function(r){Array.isArray(r)?a.push.apply(a,Object(Ca.a)(r)):a.push(r)});var e=a.some(function(r){return jm(r)});if(e){var t=a.map(function(r){return jm(r)?r:Promise.resolve(r!==!1)});return Promise.all(t).then(function(r){return r.reduce(function(o,c){return c!==!1&&o},!0)})}return a.every(function(r){return r!==!1})}function Uw(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var n=Vy(s);return typeof n=="boolean"?Promise.resolve(n):n}var Um=/[\t\r\n\f]/g,Fm=/\S+/g,lp=function(s){return" ".concat(s," ")};function Wh(a){return a&&a.getAttribute&&a.getAttribute("class")||""}function wv(a,s){if(a==null||s==null)return!1;var i=lp(Wh(a)),n=lp(s);return a.nodeType===1?i.replace(Um," ").includes(n):!1}function Up(a,s){if(a==null||s==null)return;if(typeof s=="function")return Up(a,s(Wh(a)));if(typeof s=="string"&&a.nodeType===1){var i=s.match(Fm)||[],n=lp(Wh(a)).replace(Um," "),e=i.reduce(function(t,r){return t.indexOf(lp(r))<0?"".concat(t).concat(r," "):t},n);e=e.trim(),n!==e&&a.setAttribute("class",e)}}function Fp(a,s){if(a==null)return;if(typeof s=="function")return Fp(a,s(Wh(a)));if((!s||typeof s=="string")&&a.nodeType===1){var i=(s||"").match(Fm)||[],n=lp(Wh(a)).replace(Um," "),e=i.reduce(function(t,r){var o=lp(r);return t.indexOf(o)>-1?t.replace(o," "):t},n);e=s?e.trim():"",n!==e&&a.setAttribute("class",e)}}function Bm(a,s,i){if(a==null||s==null)return;if(i!=null&&typeof s=="string"){i?Up(a,s):Fp(a,s);return}if(typeof s=="function")return Bm(a,s(Wh(a),i),i);if(typeof s=="string"){var n=s.match(Fm)||[];n.forEach(function(e){wv(a,e)?Fp(a,e):Up(a,e)})}}var zy=0;function Gy(){return zy+=1,"v".concat(zy)}function Xy(a){return(a.id==null||a.id==="")&&(a.id=Gy()),a.id}function cp(a){return a==null?!1:typeof a.getScreenCTM=="function"&&a instanceof SVGElement}var gf={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Vm="1.1";function Fw(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return s.createElement(a)}function Wy(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gf.xhtml,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return i.createElementNS(s,a)}function yf(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return Wy(a,gf.svg,s)}function Cv(a){if(a){var s='<svg xmlns="'.concat(gf.svg,'" xmlns:xlink="').concat(gf.xlink,'" version="').concat(Vm,'">').concat(a,"</svg>"),i=Hy(s,{async:!1}),n=i.documentElement;return n}var e=document.createElementNS(gf.svg,"svg");return e.setAttributeNS(gf.xmlns,"xmlns:xlink",gf.xlink),e.setAttribute("version",Vm),e}function Hy(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i;try{var n=new DOMParser;if(s.async!=null){var e=n;e.async=s.async}i=n.parseFromString(a,s.mimeType||"text/xml")}catch(t){i=void 0}if(!i||i.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: ".concat(a));return i}function Ky(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=a.nodeName;return s?i.toLowerCase():i.toUpperCase()}function $y(a){for(var s=0,i=a.previousSibling;i;)i.nodeType===1&&(s+=1),i=i.previousSibling;return s}function Yy(a,s){return a.querySelectorAll(s)}function Qy(a,s){return a.querySelector(s)}function Jy(a,s,i){for(var n=a.ownerSVGElement,e=a.parentNode;e&&e!==i&&e!==n;){if(wv(e,s))return e;e=e.parentNode}return null}function Zy(a,s){var i=s&&s.parentNode;return a===i||!!(i&&i.nodeType===1&&a.compareDocumentPosition(i)&16)}function Tv(a){a.parentNode&&a.parentNode.removeChild(a)}function zm(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Gm(a,s){var i=Array.isArray(s)?s:[s];i.forEach(function(n){n!=null&&a.appendChild(n)})}function qy(a,s){var i=a.firstChild;return i?Xm(i,s):Gm(a,s)}function Xm(a,s){var i=a.parentNode;if(i){var n=Array.isArray(s)?s:[s];n.forEach(function(e){e!=null&&i.insertBefore(e,a)})}}function eb(a,s){s!=null&&s.appendChild(a)}function tb(a){try{return a instanceof HTMLElement}catch(s){return typeof a=="object"&&a.nodeType===1&&typeof a.style=="object"&&typeof a.ownerDocument=="object"}}var Bw=["viewBox","attributeName","attributeType","repeatCount"];function nb(a,s){return a.getAttribute(s)}function Wm(a,s){var i=Km(s);i.ns?a.hasAttributeNS(i.ns,i.local)&&a.removeAttributeNS(i.ns,i.local):a.hasAttribute(s)&&a.removeAttribute(s)}function Av(a,s,i){if(i==null)return Wm(a,s);var n=Km(s);n.ns&&typeof i=="string"?a.setAttributeNS(n.ns,s,i):s==="id"?a.id="".concat(i):a.setAttribute(s,"".concat(i))}function Hm(a,s){Object.keys(s).forEach(function(i){Av(a,i,s[i])})}function cl(a,s,i){if(s==null){for(var n=a.attributes,e={},t=0;t<n.length;t+=1)e[n[t].name]=n[t].value;return e}if(typeof s=="string"&&i===void 0)return a.getAttribute(s);typeof s=="object"?Hm(a,s):Av(a,s,i)}function Km(a){if(a.indexOf(":")!==-1){var s=a.split(":");return{ns:gf[s[0]],local:s[1]}}return{ns:null,local:a}}function Vw(a){var s={};return Object.keys(a).forEach(function(i){var n=Bw.includes(i)?i:Py(i);s[n]=a[i]}),s}function Bp(a){var s={},i=a.split(";");return i.forEach(function(n){var e=n.trim();if(e){var t=e.split("=");t.length&&(s[t[0].trim()]=t[1]?t[1].trim():"")}}),s}function Ov(a,s){return Object.keys(s).forEach(function(i){if(i==="class")a[i]=a[i]?"".concat(a[i]," ").concat(s[i]):s[i];else if(i==="style"){var n=typeof a[i]=="object",e=typeof s[i]=="object",t,r;n&&e?(t=a[i],r=s[i]):n?(t=a[i],r=Bp(s[i])):e?(t=Bp(a[i]),r=s[i]):(t=Bp(a[i]),r=Bp(s[i])),a[i]=Ov(t,r)}else a[i]=s[i]}),a}function zw(a,s){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.offset||0,e=[],t=[],r,o,c=null,p=0;p<a.length;p+=1){r=t[p]=a[p];for(var y=0,C=s.length;y<C;y+=1){var S=s[y],I=S.start+n,W=S.end+n;p>=I&&p<W&&(typeof r=="string"?r=t[p]={t:a[p],attrs:S.attrs}:r.attrs=Ov(Ov({},r.attrs),S.attrs),i.includeAnnotationIndices&&(r.annotations==null&&(r.annotations=[]),r.annotations.push(y)))}o=t[p-1],o?f.isObject(r)&&f.isObject(o)?(c=c,JSON.stringify(r.attrs)===JSON.stringify(o.attrs)?c.t+=r.t:(e.push(c),c=r)):f.isObject(r)||f.isObject(o)?(c=c,e.push(c),c=r):c=(c||"")+r:c=r}return c!=null&&e.push(c),e}function Gw(a,s){return a?a.filter(function(i){return i.start<s&&s<=i.end}):[]}function Xw(a,s,i){return a?a.filter(function(n){return s>=n.start&&s<n.end||i>n.start&&i<=n.end||n.start>=s&&n.end<i}):[]}function Ww(a,s,i){return a&&a.forEach(function(n){n.start<s&&n.end>=s?n.end+=i:n.start>=s&&(n.start+=i,n.end+=i)}),a}function Hw(a){return a.replace(/ /g,"\xA0")}var rb;(function(a){a.emptyObject=Object.freeze({}),a.emptyArray=Object.freeze([]);function s(y){return y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"}a.isPrimitive=s;function i(y){return Array.isArray(y)}a.isArray=i;function n(y){return!s(y)&&!i(y)}a.isObject=n;function e(y,C){if(y===C)return!0;if(s(y)||s(C))return!1;var S=i(y),I=i(C);return S!==I?!1:S&&I?r(y,C):o(y,C)}a.deepEqual=e;function t(y){return s(y)?y:i(y)?c(y):p(y)}a.deepCopy=t;function r(y,C){if(y===C)return!0;if(y.length!==C.length)return!1;for(var S=0,I=y.length;S<I;S+=1)if(!e(y[S],C[S]))return!1;return!0}function o(y,C){if(y===C)return!0;for(var S in y)if(!(S in C))return!1;for(var I in C)if(!(I in y))return!1;for(var W in y)if(!e(y[W],C[W]))return!1;return!0}function c(y){for(var C=new Array(y.length),S=0,I=y.length;S<I;S+=1)C[S]=t(y[S]);return C}function p(y){var C={};return Object.keys(y).forEach(function(S){C[S]=t(y[S])}),C}})(rb||(rb={}));var $m;(function(a){function s(p){var y="data:";return p.substr(0,y.length)===y}a.isDataUrl=s;function i(p,y){if(!p||s(p)){setTimeout(function(){return y(null,p)});return}var C=function(){y(new Error("Failed to load image: ".concat(p)))},S=window.FileReader?function(W){if(W.status===200){var q=new FileReader;q.onload=function(ie){var ve=ie.target.result;y(null,ve)},q.onerror=C,q.readAsDataURL(W.response)}else C()}:function(W){var q=function(at){for(var Qe=32768,qt=[],Kt=0;Kt<at.length;Kt+=Qe)qt.push(String.fromCharCode.apply(null,at.subarray(Kt,Kt+Qe)));return qt.join("")};if(W.status===200){var ie=p.split(".").pop()||"png";ie==="svg"&&(ie="svg+xml");var ve="data:image/".concat(ie,";base64,"),Le=new Uint8Array(W.response),Oe=ve+btoa(q(Le));y(null,Oe)}else C()},I=new XMLHttpRequest;I.responseType=window.FileReader?"blob":"arraybuffer",I.open("GET",p,!0),I.addEventListener("error",C),I.addEventListener("load",function(){return S(I)}),I.send()}a.imageToDataUri=i;function n(p){var y=p.replace(/\s/g,"");y=decodeURIComponent(y);var C=y.indexOf(","),S=y.slice(0,C),I=S.split(":")[1].split(";")[0],W=y.slice(C+1),q;S.indexOf("base64")>=0?q=atob(W):q=unescape(encodeURIComponent(W));for(var ie=new Uint8Array(q.length),ve=0;ve<q.length;ve+=1)ie[ve]=q.charCodeAt(ve);return new Blob([ie],{type:I})}a.dataUriToBlob=n;function e(p,y){var C=window.navigator.msSaveBlob;if(C)C(p,y);else{var S=window.URL.createObjectURL(p),I=document.createElement("a");I.href=S,I.download=y,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(S)}}a.downloadBlob=e;function t(p,y){var C=n(p);e(C,y)}a.downloadDataUri=t;function r(p){var y=p.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return y&&y[2]?y[2].replace(/\s+/," ").split(" "):null}function o(p){var y=parseFloat(p);return Number.isNaN(y)?null:y}function c(p){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=null,S=function(it){return C==null&&(C=r(p)),C!=null?o(C[it]):null},I=function(it){var at=p.match(it);return at&&at[2]?o(at[2]):null},W=y.width;if(W==null&&(W=I(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),W==null&&(W=S(2)),W==null)throw new Error("Can not parse width from svg string");var q=y.height;if(q==null&&(q=I(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),q==null&&(q=S(3)),q==null)throw new Error("Can not parse height from svg string");var ie=encodeURIComponent(p).replace(/'/g,"%27").replace(/"/g,"%22"),ve="data:image/svg+xml",Le="".concat(ve,",").concat(ie);return Le}a.svgToDataUrl=c})($m||($m={}));var Hh,Kw={px:function(s){return s},mm:function(s){return Hh*s},cm:function(s){return Hh*s*10},in:function(s){return Hh*s*25.4},pt:function(s){return Hh*(25.4*s/72)},pc:function(s){return Hh*(25.4*s/6)}},Ym;(function(a){function s(n,e,t){var r=k()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:n+(t||""),height:e+(t||"")}).appendTo(document.body),o={width:r.width()||0,height:r.height()||0};return r.remove(),o}a.measure=s;function i(n,e){Hh==null&&(Hh=s("1","1","mm").width);var t=e?Kw[e]:null;return t?t(n):n}a.toPx=i})(Ym||(Ym={}));var $w=function(){var a,s=window;if(s!=null&&(a=s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame,a!=null&&(a=a.bind(s))),a==null){var i=0;a=function(e){var t=new Date().getTime(),r=Math.max(0,16-(t-i)),o=setTimeout(function(){e(t+r)},r);return i=t+r,o}}return a}(),Yw=function(){var a,s=window;return s!=null&&(a=s.cancelAnimationFrame||s.webkitCancelAnimationFrame||s.webkitCancelRequestAnimationFrame||s.msCancelAnimationFrame||s.msCancelRequestAnimationFrame||s.oCancelAnimationFrame||s.oCancelRequestAnimationFrame||s.mozCancelAnimationFrame||s.mozCancelRequestAnimationFrame,a&&(a=a.bind(s))),a==null&&(a=clearTimeout),a}(),Qw=/-(.)/g;function Jw(a){return a.replace(Qw,function(s,i){return i.toUpperCase()})}var Qm={},ab=["Webkit","ms","Moz","O"],ib=document?document.createElement("div").style:{};function Zw(a){for(var s=0;s<ab.length;s+=1){var i=ab[s]+a;if(i in ib)return i}return null}function ob(a){var s=Jw(a);if(Qm[s]==null){var i=s.charAt(0).toUpperCase()+s.slice(1);Qm[s]=s in ib?s:Zw(i)}return Qm[s]}function qw(a,s,i){var n=ob(s);n!=null&&(a[n]=i),a[s]=i}function Sv(a,s){var i=a.ownerDocument&&a.ownerDocument.defaultView&&a.ownerDocument.defaultView.opener?a.ownerDocument.defaultView.getComputedStyle(a,null):window.getComputedStyle(a,null);return i&&s?i.getPropertyValue(s)||i[s]:i}function eC(a){var s=Sv(a);return s!=null&&(s.overflow==="scroll"||s.overflow==="auto")}var tC=function(){var a=document;return a.selection?function(){a.selection.empty()}:window.getSelection?function(){var s=window.getSelection();s&&(s.empty?s.empty():s.removeAllRanges&&s.removeAllRanges())}:function(){}}(),Br=u(4),Pi;(function(a){function s(n){return 180*n/Math.PI%360}a.toDeg=s,a.toRad=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e?n:n%360;return t*Math.PI/180};function i(n){return n%360+(n<0?360:0)}a.normalize=i})(Pi||(Pi={}));function Kh(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Number.isInteger(a)?a:+a.toFixed(s)}function sb(a,s){var i,n;if(s==null?(n=a??1,i=0):(n=s,i=a??0),n<i){var e=i;i=n,n=e}return Math.floor(Math.random()*(n-i+1)+i)}function dp(a,s,i){return Number.isNaN(a)?NaN:Number.isNaN(s)||Number.isNaN(i)?0:s<i?a<s?s:a>i?i:a:a<i?i:a>s?s:a}function Jm(a,s){return s*Math.round(a/s)}function ub(a,s){return s!=null&&a!=null&&s.x>=a.x&&s.x<=a.x+a.width&&s.y>=a.y&&s.y<=a.y+a.height}function lb(a,s){var i=a.x-s.x,n=a.y-s.y;return i*i+n*n}var bh=function(){function a(){Object(_r.a)(this,a)}return Object(Br.a)(a,[{key:"valueOf",value:function(){return this.toJSON()}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),a}(),Bt=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e){var t;return Object(_r.a)(this,i),t=s.call(this),t.x=n??0,t.y=e??0,t}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"round",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Kh(this.x,e),this.y=Kh(this.y,e),this}},{key:"add",value:function(e,t){var r=i.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"update",value:function(e,t){var r=i.create(e,t);return this.x=r.x,this.y=r.y,this}},{key:"translate",value:function(e,t){var r=i.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"rotate",value:function(e,t){var r=i.rotate(this,e,t);return this.x=r.x,this.y=r.y,this}},{key:"scale",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new i,o=i.create(r);return this.x=o.x+e*(this.x-o.x),this.y=o.y+t*(this.y-o.y),this}},{key:"closest",value:function(e){var t=this;if(e.length===1)return i.create(e[0]);var r=null,o=Infinity;return e.forEach(function(c){var p=t.squaredDistance(c);p<o&&(r=c,o=p)}),r?i.create(r):null}},{key:"distance",value:function(e){return Math.sqrt(this.squaredDistance(e))}},{key:"squaredDistance",value:function(e){var t=i.create(e),r=this.x-t.x,o=this.y-t.y;return r*r+o*o}},{key:"manhattanDistance",value:function(e){var t=i.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}},{key:"theta",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i,t=i.create(e),r=-(t.y-this.y),o=t.x-this.x,c=Math.atan2(r,o);return c<0&&(c=2*Math.PI+c),180*c/Math.PI}},{key:"angleBetween",value:function(e,t){if(this.equals(e)||this.equals(t))return NaN;var r=this.theta(t)-this.theta(e);return r<0&&(r+=360),r}},{key:"vectorAngle",value:function(e){var t=new i(0,0);return t.angleBetween(this,e)}},{key:"toPolar",value:function(e){return this.update(i.toPolar(this,e)),this}},{key:"changeInAngle",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new i;return this.clone().translate(-e,-t).theta(r)-this.theta(r)}},{key:"adhereToRect",value:function(e){return ub(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}},{key:"bearing",value:function(e){var t=i.create(e),r=Pi.toRad(this.y),o=Pi.toRad(t.y),c=this.x,p=t.x,y=Pi.toRad(p-c),C=Math.sin(y)*Math.cos(o),S=Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(y),I=Pi.toDeg(Math.atan2(C,S)),W=["NE","E","SE","S","SW","W","NW","N"],q=I-22.5;return q<0&&(q+=360),q=parseInt(q/45,10),W[q]}},{key:"cross",value:function(e,t){if(e!=null&&t!=null){var r=i.create(e),o=i.create(t);return(o.x-this.x)*(r.y-this.y)-(o.y-this.y)*(r.x-this.x)}return NaN}},{key:"dot",value:function(e){var t=i.create(e);return this.x*t.x+this.y*t.y}},{key:"diff",value:function(e,t){if(typeof e=="number")return new i(this.x-e,this.y-t);var r=i.create(e);return new i(this.x-r.x,this.y-r.y)}},{key:"lerp",value:function(e,t){var r=i.create(e);return new i((1-t)*this.x+t*r.x,(1-t)*this.y+t*r.y)}},{key:"normalize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=e/this.magnitude();return this.scale(t,t)}},{key:"move",value:function(e,t){var r=i.create(e),o=Pi.toRad(r.theta(this));return this.translate(Math.cos(o)*t,-Math.sin(o)*t)}},{key:"reflection",value:function(e){return i.create(e).move(this,this.distance(e))}},{key:"snapToGrid",value:function(e,t){return this.x=Jm(this.x,e),this.y=Jm(this.y,t??e),this}},{key:"equals",value:function(e){var t=i.create(e);return t!=null&&t.x===this.x&&t.y===this.y}},{key:"clone",value:function(){return i.clone(this)}},{key:"toJSON",value:function(){return i.toJSON(this)}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y)}}]),i}(bh);(function(a){a.toStringTag="X6.Geometry.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.toPolar=="function"}a.isPoint=s})(Bt||(Bt={})),function(a){function s(n){return n!=null&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"}a.isPointLike=s;function i(n){return n!=null&&Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}a.isPointData=i}(Bt||(Bt={})),function(a){function s(C,S){return C==null||typeof C=="number"?new a(C,S):i(C)}a.create=s;function i(C){return a.isPoint(C)?new a(C.x,C.y):Array.isArray(C)?new a(C[0],C[1]):new a(C.x,C.y)}a.clone=i;function n(C){return a.isPoint(C)?{x:C.x,y:C.y}:Array.isArray(C)?{x:C[0],y:C[1]}:{x:C.x,y:C.y}}a.toJSON=n;function e(C,S){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new a,W=Math.abs(C*Math.cos(S)),q=Math.abs(C*Math.sin(S)),ie=i(I),ve=Pi.normalize(Pi.toDeg(S));return ve<90?q=-q:ve<180?(W=-W,q=-q):ve<270&&(W=-W),new a(ie.x+W,ie.y+q)}a.fromPolar=e;function t(C){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new a,I=i(C),W=i(S),q=I.x-W.x,ie=I.y-W.y;return new a(Math.sqrt(q*q+ie*ie),Pi.toRad(W.theta(I)))}a.toPolar=t;function r(C,S){return C===S?!0:C!=null&&S!=null?C.x===S.x&&C.y===S.y:!1}a.equals=r;function o(C,S){if(C==null&&S!=null||C!=null&&S==null||C!=null&&S!=null&&C.length!==S.length)return!1;if(C!=null&&S!=null){for(var I=0,W=C.length;I<W;I+=1)if(!r(C[I],S[I]))return!1}return!0}a.equalPoints=o;function c(C,S,I,W){return new a(sb(C,S),sb(I,W))}a.random=c;function p(C,S,I){var W=Pi.toRad(Pi.normalize(-S)),q=Math.sin(W),ie=Math.cos(W);return y(C,ie,q,I)}a.rotate=p;function y(C,S,I){var W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new a,q=i(C),ie=i(W),ve=q.x-ie.x,Le=q.y-ie.y,Oe=ve*S-Le*I,it=Le*S+ve*I;return new a(Oe+ie.x,it+ie.y)}a.rotateEx=y}(Bt||(Bt={}));var qr=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e,t,r){var o;return Object(_r.a)(this,i),o=s.call(this),o.x=n??0,o.y=e??0,o.width=t??0,o.height=r??0,o}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}},{key:"origin",get:function(){return new Bt(this.x,this.y)}},{key:"topLeft",get:function(){return new Bt(this.x,this.y)}},{key:"topCenter",get:function(){return new Bt(this.x+this.width/2,this.y)}},{key:"topRight",get:function(){return new Bt(this.x+this.width,this.y)}},{key:"center",get:function(){return new Bt(this.x+this.width/2,this.y+this.height/2)}},{key:"bottomLeft",get:function(){return new Bt(this.x,this.y+this.height)}},{key:"bottomCenter",get:function(){return new Bt(this.x+this.width/2,this.y+this.height)}},{key:"bottomRight",get:function(){return new Bt(this.x+this.width,this.y+this.height)}},{key:"corner",get:function(){return new Bt(this.x+this.width,this.y+this.height)}},{key:"rightMiddle",get:function(){return new Bt(this.x+this.width,this.y+this.height/2)}},{key:"leftMiddle",get:function(){return new Bt(this.x,this.y+this.height/2)}},{key:"topLine",get:function(){return new Ba(this.topLeft,this.topRight)}},{key:"rightLine",get:function(){return new Ba(this.topRight,this.bottomRight)}},{key:"bottomLine",get:function(){return new Ba(this.bottomLeft,this.bottomRight)}},{key:"leftLine",get:function(){return new Ba(this.topLeft,this.bottomLeft)}},{key:"getOrigin",value:function(){return this.origin}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopCenter",value:function(){return this.topCenter}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getCenter",value:function(){return this.center}},{key:"getCenterX",value:function(){return this.x+this.width/2}},{key:"getCenterY",value:function(){return this.y+this.height/2}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomCenter",value:function(){return this.bottomCenter}},{key:"getBottomRight",value:function(){return this.bottomRight}},{key:"getCorner",value:function(){return this.corner}},{key:"getRightMiddle",value:function(){return this.rightMiddle}},{key:"getLeftMiddle",value:function(){return this.leftMiddle}},{key:"getTopLine",value:function(){return this.topLine}},{key:"getRightLine",value:function(){return this.rightLine}},{key:"getBottomLine",value:function(){return this.bottomLine}},{key:"getLeftLine",value:function(){return this.leftLine}},{key:"bbox",value:function(e){if(!e)return this.clone();var t=Pi.toRad(e),r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),c=this.width*o+this.height*r,p=this.width*r+this.height*o;return new i(this.x+(this.width-c)/2,this.y+(this.height-p)/2,c,p)}},{key:"round",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Kh(this.x,e),this.y=Kh(this.y,e),this.width=Kh(this.width,e),this.height=Kh(this.height,e),this}},{key:"add",value:function(e,t,r,o){var c=i.create(e,t,r,o),p=Math.min(this.x,c.x),y=Math.min(this.y,c.y),C=Math.max(this.x+this.width,c.x+c.width),S=Math.max(this.y+this.height,c.y+c.height);return this.x=p,this.y=y,this.width=C-p,this.height=S-y,this}},{key:"update",value:function(e,t,r,o){var c=i.create(e,t,r,o);return this.x=c.x,this.y=c.y,this.width=c.width,this.height=c.height,this}},{key:"inflate",value:function(e,t){var r=e,o=t??e;return this.x-=r,this.y-=o,this.width+=2*r,this.height+=2*o,this}},{key:"snapToGrid",value:function(e,t){var r=this.origin.snapToGrid(e,t),o=this.corner.snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=o.x-r.x,this.height=o.y-r.y,this}},{key:"translate",value:function(e,t){var r=Bt.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"scale",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Bt,o=this.origin.scale(e,t,r);return this.x=o.x,this.y=o.y,this.width*=e,this.height*=t,this}},{key:"rotate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCenter();if(e!==0){var r=Pi.toRad(e),o=Math.cos(r),c=Math.sin(r),p=this.getOrigin(),y=this.getTopRight(),C=this.getBottomRight(),S=this.getBottomLeft();p=Bt.rotateEx(p,o,c,t),y=Bt.rotateEx(y,o,c,t),C=Bt.rotateEx(C,o,c,t),S=Bt.rotateEx(S,o,c,t);var I=new i(p.x,p.y,0,0);I.add(y.x,y.y,0,0),I.add(C.x,C.y,0,0),I.add(S.x,S.y,0,0),this.update(I)}return this}},{key:"rotate90",value:function(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e;var t=this.width;return this.width=this.height,this.height=t,this}},{key:"moveAndExpand",value:function(e){var t=i.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}},{key:"getMaxScaleToFit",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,r=i.clone(e),o=t.x,c=t.y,p=Infinity,y=Infinity,C=Infinity,S=Infinity,I=Infinity,W=Infinity,q=Infinity,ie=Infinity,ve=r.topLeft;ve.x<o&&(p=(this.x-o)/(ve.x-o)),ve.y<c&&(I=(this.y-c)/(ve.y-c));var Le=r.bottomRight;Le.x>o&&(y=(this.x+this.width-o)/(Le.x-o)),Le.y>c&&(W=(this.y+this.height-c)/(Le.y-c));var Oe=r.topRight;Oe.x>o&&(C=(this.x+this.width-o)/(Oe.x-o)),Oe.y<c&&(q=(this.y-c)/(Oe.y-c));var it=r.bottomLeft;return it.x<o&&(S=(this.x-o)/(it.x-o)),it.y>c&&(ie=(this.y+this.height-c)/(it.y-c)),{sx:Math.min(p,y,C,S),sy:Math.min(I,W,q,ie)}}},{key:"getMaxUniformScaleToFit",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,r=this.getMaxScaleToFit(e,t);return Math.min(r.sx,r.sy)}},{key:"containsPoint",value:function(e,t){return ub(this,Bt.create(e,t))}},{key:"containsRect",value:function(e,t,r,o){var c=i.create(e,t,r,o),p=this.x,y=this.y,C=this.width,S=this.height,I=c.x,W=c.y,q=c.width,ie=c.height;return C===0||S===0||q===0||ie===0?!1:I>=p&&W>=y&&I+q<=p+C&&W+ie<=y+S}},{key:"intersectsWithLine",value:function(e){var t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],r=[],o=[];return t.forEach(function(c){var p=e.intersectsWithLine(c);p!==null&&o.indexOf(p.toString())<0&&(r.push(p),o.push(p.toString()))}),r.length>0?r:null}},{key:"intersectsWithLineFromCenterToPoint",value:function(e,t){var r=Bt.clone(e),o=this.center,c=null;t!=null&&t!==0&&r.rotate(t,o);for(var p=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],y=new Ba(o,r),C=p.length-1;C>=0;C-=1){var S=p[C].intersectsWithLine(y);if(S!==null){c=S;break}}return c&&t!=null&&t!==0&&c.rotate(-t,o),c}},{key:"intersectsWithRect",value:function(e,t,r,o){var c=i.create(e,t,r,o);if(!this.isIntersectWithRect(c))return null;var p=this.origin,y=this.corner,C=c.origin,S=c.corner,I=Math.max(p.x,C.x),W=Math.max(p.y,C.y);return new i(I,W,Math.min(y.x,S.x)-I,Math.min(y.y,S.y)-W)}},{key:"isIntersectWithRect",value:function(e,t,r,o){var c=i.create(e,t,r,o),p=this.origin,y=this.corner,C=c.origin,S=c.corner;return!(S.x<=p.x||S.y<=p.y||C.x>=y.x||C.y>=y.y)}},{key:"normalize",value:function(){var e=this.x,t=this.y,r=this.width,o=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,o=-this.height),this.x=e,this.y=t,this.width=r,this.height=o,this}},{key:"union",value:function(e){var t=i.clone(e),r=this.origin,o=this.corner,c=t.origin,p=t.corner,y=Math.min(r.x,c.x),C=Math.min(r.y,c.y),S=Math.max(o.x,p.x),I=Math.max(o.y,p.y);return new i(y,C,S-y,I-C)}},{key:"getNearestSideToPoint",value:function(e){var t=Bt.clone(e),r=t.x-this.x,o=this.x+this.width-t.x,c=t.y-this.y,p=this.y+this.height-t.y,y=r,C="left";return o<y&&(y=o,C="right"),c<y&&(y=c,C="top"),p<y&&(C="bottom"),C}},{key:"getNearestPointToPoint",value:function(e){var t=Bt.clone(e);if(this.containsPoint(t)){var r=this.getNearestSideToPoint(t);switch(r){case"right":return new Bt(this.x+this.width,t.y);case"left":return new Bt(this.x,t.y);case"bottom":return new Bt(t.x,this.y+this.height);case"top":return new Bt(t.x,this.y);default:break}}return t.adhereToRect(this)}},{key:"equals",value:function(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}},{key:"clone",value:function(){return new i(this.x,this.y,this.width,this.height)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.width," ").concat(this.height)}}]),i}(bh);(function(a){a.toStringTag="X6.Geometry.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"&&typeof e.inflate=="function"&&typeof e.moveAndExpand=="function"}a.isRectangle=s})(qr||(qr={})),function(a){function s(i){return i!=null&&typeof i=="object"&&typeof i.x=="number"&&typeof i.y=="number"&&typeof i.width=="number"&&typeof i.height=="number"}a.isRectangleLike=s}(qr||(qr={})),function(a){function s(r,o,c,p){return r==null||typeof r=="number"?new a(r,o,c,p):i(r)}a.create=s;function i(r){return a.isRectangle(r)?r.clone():Array.isArray(r)?new a(r[0],r[1],r[2],r[3]):new a(r.x,r.y,r.width,r.height)}a.clone=i;function n(r){return new a(0,0,r.width,r.height)}a.fromSize=n;function e(r,o){return new a(r.x,r.y,o.width,o.height)}a.fromPositionAndSize=e;function t(r){return new a(r.x-r.a,r.y-r.b,2*r.a,2*r.b)}a.fromEllipse=t}(qr||(qr={}));var Ba=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e,t,r){var o;return Object(_r.a)(this,i),o=s.call(this),typeof n=="number"&&typeof e=="number"?(o.start=new Bt(n,e),o.end=new Bt(t,r)):(o.start=Bt.create(n),o.end=Bt.create(e)),o}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"center",get:function(){return new Bt((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}},{key:"getCenter",value:function(){return this.center}},{key:"round",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.start.round(e),this.end.round(e),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}},{key:"rotate",value:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}},{key:"scale",value:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this}},{key:"length",value:function(){return Math.sqrt(this.squaredLength())}},{key:"squaredLength",value:function(){var e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}},{key:"setLength",value:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)}},{key:"parallel",value:function(e){var t=this.clone();if(!t.isDifferentiable())return t;var r=t.start,o=t.end,c=r.clone().rotate(270,o),p=o.clone().rotate(90,r);return r.move(p,e),o.move(c,e),t}},{key:"vector",value:function(){return new Bt(this.end.x-this.start.x,this.end.y-this.start.y)}},{key:"angle",value:function(){var e=new Bt(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}},{key:"bbox",value:function(){var e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),r=Math.max(this.start.x,this.end.x),o=Math.max(this.start.y,this.end.y);return new qr(e,t,r-e,o-t)}},{key:"bearing",value:function(){return this.start.bearing(this.end)}},{key:"closestPoint",value:function(e){return this.pointAt(this.closestPointNormalizedLength(e))}},{key:"closestPointLength",value:function(e){return this.closestPointNormalizedLength(e)*this.length()}},{key:"closestPointTangent",value:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))}},{key:"closestPointNormalizedLength",value:function(e){var t=this.vector().dot(new i(this.start,e).vector()),r=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(r)?0:r}},{key:"pointAt",value:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)}},{key:"pointAtLength",value:function(e){var t=this.start,r=this.end,o=!0;e<0&&(o=!1,e=-e);var c=this.length();if(e>=c)return o?r.clone():t.clone();var p=(o?e:c-e)/c;return this.pointAt(p)}},{key:"divideAt",value:function(e){var t=this.pointAt(e);return[new i(this.start,t),new i(t,this.end)]}},{key:"divideAtLength",value:function(e){var t=this.pointAtLength(e);return[new i(this.start,t),new i(t,this.end)]}},{key:"containsPoint",value:function(e){var t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;var o=this.length();return new i(t,e).length()>o?!1:!(new i(e,r).length()>o)}},{key:"intersect",value:function(e,t){var r=e.intersectsWithLine(this,t);return r?Array.isArray(r)?r:[r]:null}},{key:"intersectsWithLine",value:function(e){var t=new Bt(this.end.x-this.start.x,this.end.y-this.start.y),r=new Bt(e.end.x-e.start.x,e.end.y-e.start.y),o=t.x*r.y-t.y*r.x,c=new Bt(e.start.x-this.start.x,e.start.y-this.start.y),p=c.x*r.y-c.y*r.x,y=c.x*t.y-c.y*t.x;if(o===0||p*o<0||y*o<0)return null;if(o>0){if(p>o||y>o)return null}else if(p<o||y<o)return null;return new Bt(this.start.x+p*t.x/o,this.start.y+p*t.y/o)}},{key:"isDifferentiable",value:function(){return!this.start.equals(this.end)}},{key:"pointOffset",value:function(e){var t=Bt.clone(e),r=this.start,o=this.end,c=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x);return c/this.length()}},{key:"pointSquaredDistance",value:function(e,t){var r=Bt.create(e,t);return this.closestPoint(r).squaredDistance(r)}},{key:"pointDistance",value:function(e,t){var r=Bt.create(e,t);return this.closestPoint(r).distance(r)}},{key:"tangentAt",value:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,o=this.pointAt(e),c=new i(t,r);return c.translate(o.x-t.x,o.y-t.y),c}},{key:"tangentAtLength",value:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,o=this.pointAtLength(e),c=new i(t,r);return c.translate(o.x-t.x,o.y-t.y),c}},{key:"relativeCcw",value:function(e,t){var r=Bt.create(e,t),o=r.x-this.start.x,c=r.y-this.start.y,p=this.end.x-this.start.x,y=this.end.y-this.start.y,C=o*y-c*p;return C===0&&(C=o*p+c*y,C>0&&(o-=p,c-=y,C=o*p+c*y,C<0&&(C=0))),C<0?-1:C>0?1:0}},{key:"equals",value:function(e){return e!=null&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}},{key:"clone",value:function(){return new i(this.start,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.end.serialize()].join(" ")}}]),i}(bh);(function(a){a.toStringTag="X6.Geometry.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;try{if((n==null||n===a.toStringTag)&&Bt.isPoint(e.start)&&Bt.isPoint(e.end)&&typeof e.vector=="function"&&typeof e.bearing=="function"&&typeof e.parallel=="function"&&typeof e.intersect=="function")return!0}catch(t){return!1}return!1}a.isLine=s})(Ba||(Ba={}));var Eh=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e,t,r){var o;return Object(_r.a)(this,i),o=s.call(this),o.x=n??0,o.y=e??0,o.a=t??0,o.b=r??0,o}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"center",get:function(){return new Bt(this.x,this.y)}},{key:"bbox",value:function(){return qr.fromEllipse(this)}},{key:"getCenter",value:function(){return this.center}},{key:"inflate",value:function(e,t){var r=e,o=t??e;return this.a+=2*r,this.b+=2*o,this}},{key:"normalizedDistance",value:function(e,t){var r=Bt.create(e,t),o=r.x-this.x,c=r.y-this.y,p=this.a,y=this.b;return o*o/(p*p)+c*c/(y*y)}},{key:"containsPoint",value:function(e,t){return this.normalizedDistance(e,t)<=1}},{key:"intersectsWithLine",value:function(e){var t=[],r=this.a,o=this.b,c=e.start,p=e.end,y=e.vector(),C=c.diff(new Bt(this.x,this.y)),S=new Bt(y.x/(r*r),y.y/(o*o)),I=new Bt(C.x/(r*r),C.y/(o*o)),W=y.dot(S),q=y.dot(I),ie=C.dot(I)-1,ve=q*q-W*ie;if(ve<0)return null;if(ve>0){var Le=Math.sqrt(ve),Oe=(-q-Le)/W,it=(-q+Le)/W;if((Oe<0||Oe>1)&&(it<0||it>1))return null;Oe>=0&&Oe<=1&&t.push(c.lerp(p,Oe)),it>=0&&it<=1&&t.push(c.lerp(p,it))}else{var at=-q/W;if(at>=0&&at<=1)t.push(c.lerp(p,at));else return null}return t}},{key:"intersectsWithLineFromCenterToPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=Bt.clone(e);t&&r.rotate(t,this.getCenter());var o=r.x-this.x,c=r.y-this.y,p;if(o===0)return p=this.bbox().getNearestPointToPoint(r),t?p.rotate(-t,this.getCenter()):p;var y=c/o,C=y*y,S=this.a*this.a,I=this.b*this.b,W=Math.sqrt(1/(1/S+C/I));W=o<0?-W:W;var q=y*W;return p=new Bt(this.x+W,this.y+q),t?p.rotate(-t,this.getCenter()):p}},{key:"tangentTheta",value:function(e){var t=Bt.clone(e),r=t.x,o=t.y,c=this.a,p=this.b,y=this.bbox().center,C=y.x,S=y.y,I=30,W=r>y.x+c/2,q=r<y.x-c/2,ie,ve;return W||q?(ve=r>y.x?o-I:o+I,ie=c*c/(r-C)-c*c*(o-S)*(ve-S)/(p*p*(r-C))+C):(ie=o>y.y?r+I:r-I,ve=p*p/(o-S)-p*p*(r-C)*(ie-C)/(c*c*(o-S))+S),new Bt(ie,ve).theta(t)}},{key:"scale",value:function(e,t){return this.a*=e,this.b*=t,this}},{key:"rotate",value:function(e,t){var r=qr.fromEllipse(this);r.rotate(e,t);var o=i.fromRect(r);return this.a=o.a,this.b=o.b,this.x=o.x,this.y=o.y,this}},{key:"translate",value:function(e,t){var r=Bt.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"equals",value:function(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}},{key:"clone",value:function(){return new i(this.x,this.y,this.a,this.b)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,a:this.a,b:this.b}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.a," ").concat(this.b)}}]),i}(bh);(function(a){a.toStringTag="X6.Geometry.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.a=="number"&&typeof e.b=="number"&&typeof e.inflate=="function"&&typeof e.normalizedDistance=="function"}a.isEllipse=s})(Eh||(Eh={})),function(a){function s(e,t,r,o){return e==null||typeof e=="number"?new a(e,t,r,o):i(e)}a.create=s;function i(e){return a.isEllipse(e)?e.clone():Array.isArray(e)?new a(e[0],e[1],e[2],e[3]):new a(e.x,e.y,e.a,e.b)}a.parse=i;function n(e){var t=e.center;return new a(t.x,t.y,e.width/2,e.height/2)}a.fromRect=n}(Eh||(Eh={}));var cb=u(71),kl=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;if(Object(_r.a)(this,i),e=s.call(this),n!=null){if(typeof n=="string")return Object(cb.a)(e,i.parse(n));e.points=n.map(function(t){return Bt.create(t)})}else e.points=[];return e}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"start",get:function(){return this.points.length===0?null:this.points[0]}},{key:"end",get:function(){return this.points.length===0?null:this.points[this.points.length-1]}},{key:"scale",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Bt;return this.points.forEach(function(o){return o.scale(e,t,r)}),this}},{key:"rotate",value:function(e,t){return this.points.forEach(function(r){return r.rotate(e,t)}),this}},{key:"translate",value:function(e,t){var r=Bt.create(e,t);return this.points.forEach(function(o){return o.translate(r.x,r.y)}),this}},{key:"bbox",value:function(){if(this.points.length===0)return new qr;for(var e=Infinity,t=-Infinity,r=Infinity,o=-Infinity,c=this.points,p=0,y=c.length;p<y;p+=1){var C=c[p],S=C.x,I=C.y;S<e&&(e=S),S>t&&(t=S),I<r&&(r=I),I>o&&(o=I)}return new qr(e,r,t-e,o-r)}},{key:"closestPoint",value:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)}},{key:"closestPointLength",value:function(e){var t=this.points,r=t.length;if(r===0||r===1)return 0;for(var o=0,c=0,p=Infinity,y=0,C=r-1;y<C;y+=1){var S=new Ba(t[y],t[y+1]),I=S.length(),W=S.closestPointNormalizedLength(e),q=S.pointAt(W),ie=q.squaredDistance(e);ie<p&&(p=ie,c=o+W*I),o+=I}return c}},{key:"closestPointNormalizedLength",value:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var r=this.length();return r===0?0:t/r}},{key:"closestPointTangent",value:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)}},{key:"containsPoint",value:function(e){if(this.points.length===0)return!1;for(var t=Bt.clone(e),r=t.x,o=t.y,c=this.points,p=c.length,y=p-1,C=0,S=0;S<p;S+=1){var I=c[y],W=c[S];if(t.equals(I))return!0;var q=new Ba(I,W);if(q.containsPoint(e))return!0;if(o<=I.y&&o>W.y||o>I.y&&o<=W.y){var ie=I.x-r>W.x-r?I.x-r:W.x-r;if(ie>=0){var ve=new Bt(r+ie,o),Le=new Ba(e,ve);q.intersectsWithLine(Le)&&(C+=1)}}y=S}return C%2===1}},{key:"intersectsWithLine",value:function(e){for(var t=[],r=0,o=this.points.length-1;r<o;r+=1){var c=this.points[r],p=this.points[r+1],y=e.intersectsWithLine(new Ba(c,p));y&&t.push(y)}return t.length>0?t:null}},{key:"isDifferentiable",value:function(){for(var e=0,t=this.points.length-1;e<t;e+=1){var r=this.points[e],o=this.points[e+1],c=new Ba(r,o);if(c.isDifferentiable())return!0}return!1}},{key:"length",value:function(){for(var e=0,t=0,r=this.points.length-1;t<r;t+=1){var o=this.points[t],c=this.points[t+1];e+=o.distance(c)}return e}},{key:"pointAt",value:function(e){var t=this.points,r=t.length;if(r===0)return null;if(r===1)return t[0].clone();if(e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var o=this.length(),c=o*e;return this.pointAtLength(c)}},{key:"pointAtLength",value:function(e){var t=this.points,r=t.length;if(r===0)return null;if(r===1)return t[0].clone();var o=!0;e<0&&(o=!1,e=-e);for(var c=0,p=0,y=r-1;p<y;p+=1){var C=o?p:y-1-p,S=t[C],I=t[C+1],W=new Ba(S,I),q=S.distance(I);if(e<=c+q)return W.pointAtLength((o?1:-1)*(e-c));c+=q}var ie=o?t[r-1]:t[0];return ie.clone()}},{key:"tangentAt",value:function(e){var t=this.points,r=t.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);var o=this.length(),c=o*e;return this.tangentAtLength(c)}},{key:"tangentAtLength",value:function(e){var t=this.points,r=t.length;if(r===0||r===1)return null;var o=!0;e<0&&(o=!1,e=-e);for(var c,p=0,y=0,C=r-1;y<C;y+=1){var S=o?y:C-1-y,I=t[S],W=t[S+1],q=new Ba(I,W),ie=I.distance(W);if(q.isDifferentiable()){if(e<=p+ie)return q.tangentAtLength((o?1:-1)*(e-p));c=q}p+=ie}if(c){var ve=o?1:0;return c.tangentAt(ve)}return null}},{key:"simplify",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.points;if(t.length<3)return this;for(var r=e.threshold||0,o=0;t[o+2];){var c=o,p=o+1,y=o+2,C=t[c],S=t[p],I=t[y],W=new Ba(C,I),q=W.closestPoint(S),ie=q.distance(S);ie<=r?t.splice(p,1):o+=1}return this}},{key:"toHull",value:function(){var e=this.points,t=e.length;if(t===0)return new i;for(var r=e[0],o=1;o<t;o+=1)(e[o].y<r.y||e[o].y===r.y&&e[o].x>r.x)&&(r=e[o]);for(var c=[],p=0;p<t;p+=1){var y=r.theta(e[p]);y===0&&(y=360),c.push([e[p],p,y])}if(c.sort(function(li,Si){var Di=li[2]-Si[2];return Di===0&&(Di=Si[1]-li[1]),Di}),c.length>2){var C=c[c.length-1];c.unshift(C)}for(var S={},I=[],W=function(Si){return"".concat(Si[0].toString(),"@").concat(Si[1])};c.length!==0;){var q=c.pop(),ie=q[0];if(S[W(q)])continue;for(var ve=!1;!ve;)if(I.length<2)I.push(q),ve=!0;else{var Le=I.pop(),Oe=Le[0],it=I.pop(),at=it[0],Qe=at.cross(Oe,ie);if(Qe<0)I.push(it),I.push(Le),I.push(q),ve=!0;else if(Qe===0){var qt=1e-10,Kt=Oe.angleBetween(at,ie);Math.abs(Kt-180)<qt||(Oe.equals(ie)||at.equals(Oe))?(S[W(Le)]=Oe,I.push(it)):Math.abs((Kt+1)%360-1)<qt&&(I.push(it),c.push(Le))}else S[W(Le)]=Oe,I.push(it)}}I.length>2&&I.pop();for(var Tn,Bn=-1,tr=0,hr=I.length;tr<hr;tr+=1){var Lr=I[tr][1];(Tn===void 0||Lr<Tn)&&(Tn=Lr,Bn=tr)}var Vr=[];if(Bn>0){var dn=I.slice(Bn),Xn=I.slice(0,Bn);Vr=dn.concat(Xn)}else Vr=I;for(var ra=[],Ea=0,ja=Vr.length;Ea<ja;Ea+=1)ra.push(Vr[Ea][0]);return new i(ra)}},{key:"equals",value:function(e){var t=this;return e==null||e.points.length!==this.points.length?!1:e.points.every(function(r,o){return r.equals(t.points[o])})}},{key:"clone",value:function(){return new i(this.points.map(function(e){return e.clone()}))}},{key:"toJSON",value:function(){return this.points.map(function(e){return e.toJSON()})}},{key:"serialize",value:function(){return this.points.map(function(e){return"".concat(e.x,", ").concat(e.y)}).join(" ")}}]),i}(bh);(function(a){a.toStringTag="X6.Geometry.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.toHull=="function"&&typeof e.simplify=="function"}a.isPolyline=s})(kl||(kl={})),function(a){function s(i){var n=i.trim();if(n==="")return new a;for(var e=[],t=n.split(/\s*,\s*|\s+/),r=0,o=t.length;r<o;r+=2)e.push({x:+t[r],y:+t[r+1]});return new a(e)}a.parse=s}(kl||(kl={}));var zc=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e,t,r){var o;return Object(_r.a)(this,i),o=s.call(this),o.PRECISION=3,o.start=Bt.create(n),o.controlPoint1=Bt.create(e),o.controlPoint2=Bt.create(t),o.end=Bt.create(r),o}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"bbox",value:function(){for(var e=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end,c=e.x,p=e.y,y=t.x,C=t.y,S=r.x,I=r.y,W=o.x,q=o.y,ie=[],ve=[],Le=[[],[]],Oe,it,at,Qe,qt,Kt,Tn,Bn,tr=0;tr<2;tr+=1){if(tr===0?(it=6*c-12*y+6*S,Oe=-3*c+9*y-9*S+3*W,at=3*y-3*c):(it=6*p-12*C+6*I,Oe=-3*p+9*C-9*I+3*q,at=3*C-3*p),Math.abs(Oe)<1e-12){if(Math.abs(it)<1e-12)continue;Qe=-at/it,Qe>0&&Qe<1&&ve.push(Qe);continue}if(Tn=it*it-4*at*Oe,Bn=Math.sqrt(Tn),Tn<0)continue;qt=(-it+Bn)/(2*Oe),qt>0&&qt<1&&ve.push(qt),Kt=(-it-Bn)/(2*Oe),Kt>0&&Kt<1&&ve.push(Kt)}for(var hr,Lr,Vr,dn=ve.length,Xn=dn;dn;)dn-=1,Qe=ve[dn],Vr=1-Qe,hr=Vr*Vr*Vr*c+3*Vr*Vr*Qe*y+3*Vr*Qe*Qe*S+Qe*Qe*Qe*W,Le[0][dn]=hr,Lr=Vr*Vr*Vr*p+3*Vr*Vr*Qe*C+3*Vr*Qe*Qe*I+Qe*Qe*Qe*q,Le[1][dn]=Lr,ie[dn]={X:hr,Y:Lr};ve[Xn]=0,ve[Xn+1]=1,ie[Xn]={X:c,Y:p},ie[Xn+1]={X:W,Y:q},Le[0][Xn]=c,Le[1][Xn]=p,Le[0][Xn+1]=W,Le[1][Xn+1]=q,ve.length=Xn+2,Le[0].length=Xn+2,Le[1].length=Xn+2,ie.length=Xn+2;var ra=Math.min.apply(null,Le[0]),Ea=Math.min.apply(null,Le[1]),ja=Math.max.apply(null,Le[0]),li=Math.max.apply(null,Le[1]);return new qr(ra,Ea,ja-ra,li-Ea)}},{key:"closestPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.pointAtT(this.closestPointT(e,t))}},{key:"closestPointLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,r),r)}},{key:"closestPointNormalizedLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t),o=this.closestPointLength(e,r);if(!o)return 0;var c=this.length(r);return c===0?0:o/c}},{key:"closestPointT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getPrecision(t),o=this.getDivisions(t),c=Math.pow(10,-r),p=null,y=0,C=0,S=0,I=0,W=0,q=null,ie=o.length,ve=ie>0?1/ie:0;for(o.forEach(function(dn,Xn){var ra=dn.start.distance(e),Ea=dn.end.distance(e),ja=ra+Ea;(q==null||ja<q)&&(p=dn,y=Xn*ve,C=(Xn+1)*ve,S=ra,I=Ea,q=ja,W=dn.endpointDistance())});;){var Le=S?Math.abs(S-I)/S:0,Oe=I!=null?Math.abs(S-I)/I:0,it=Le<c||Oe<c,at=S?S<W*c:!0,Qe=I?I<W*c:!0,qt=at||Qe;if(it||qt)return S<=I?y:C;var Kt=p.divide(.5);ve/=2;var Tn=Kt[0].start.distance(e),Bn=Kt[0].end.distance(e),tr=Tn+Bn,hr=Kt[1].start.distance(e),Lr=Kt[1].end.distance(e),Vr=hr+Lr;tr<=Vr?(p=Kt[0],C-=ve,S=Tn,I=Bn):(p=Kt[1],y+=ve,S=hr,I=Lr)}}},{key:"closestPointTangent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.tangentAtT(this.closestPointT(e,t))}},{key:"containsPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.toPolyline(t);return r.containsPoint(e)}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.tAtLength(e,t);return this.divideAtT(r)}},{key:"divide",value:function(e){return this.divideAtT(e)}},{key:"divideAtT",value:function(e){var t=this.start,r=this.controlPoint1,o=this.controlPoint2,c=this.end;if(e<=0)return[new i(t,t,t,t),new i(t,r,o,c)];if(e>=1)return[new i(t,r,o,c),new i(c,c,c,c)];var p=this.getSkeletonPoints(e),y=p.startControlPoint1,C=p.startControlPoint2,S=p.divider,I=p.dividerControlPoint1,W=p.dividerControlPoint2;return[new i(t,y,C,S),new i(S,I,W,c)]}},{key:"endpointDistance",value:function(){return this.start.distance(this.end)}},{key:"getSkeletonPoints",value:function(e){var t=this.start,r=this.controlPoint1,o=this.controlPoint2,c=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:o.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:o.clone(),divider:c.clone(),dividerControlPoint1:c.clone(),dividerControlPoint2:c.clone()};var p=new Ba(t,r).pointAt(e),y=new Ba(r,o).pointAt(e),C=new Ba(o,c).pointAt(e),S=new Ba(p,y).pointAt(e),I=new Ba(y,C).pointAt(e),W=new Ba(S,I).pointAt(e);return{startControlPoint1:p,startControlPoint2:S,divider:W,dividerControlPoint1:I,dividerControlPoint2:C}}},{key:"getSubdivisions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=[new i(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(t===0)return r;for(var o=this.endpointDistance(),c=Math.pow(10,-t),p=0,y=function(){p+=1;var I=[];r.forEach(function(ie){var ve=ie.divide(.5);I.push(ve[0],ve[1])});var W=I.reduce(function(ie,ve){return ie+ve.endpointDistance()},0),q=W!==0?(W-o)/W:0;if(p>1&&q<c)return{v:I};r=I,o=W};;){var C=y();if(typeof C=="object")return C.v}}},{key:"length",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getDivisions(e);return t.reduce(function(r,o){return r+o.endpointDistance()},0)}},{key:"lengthAtT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return 0;var r=t.precision===void 0?this.PRECISION:t.precision,o=this.divide(e)[0];return o.length({precision:r})}},{key:"pointAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)}},{key:"pointAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.tAtLength(e,t);return this.pointAtT(r)}},{key:"pointAtT",value:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}},{key:"isDifferentiable",value:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(o))}},{key:"tangentAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)}},{key:"tangentAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)}},{key:"tangentAtT",value:function(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,o=t.dividerControlPoint1,c=t.divider,p=new Ba(r,o);return p.translate(c.x-r.x,c.y-r.y),p}},{key:"getPrecision",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.precision==null?this.PRECISION:e.precision}},{key:"getDivisions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.subdivisions!=null)return e.subdivisions;var t=this.getPrecision(e);return this.getSubdivisions({precision:t})}},{key:"getOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=this.getDivisions(e);return{precision:t,subdivisions:r}}},{key:"tAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return 0;if(e>=1)return 1;var r=this.getOptions(t),o=this.length(r),c=o*e;return this.tAtLength(c,r)}},{key:"tAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=!0;e<0&&(r=!1,e=-e);for(var o=this.getPrecision(t),c=this.getDivisions(t),p={precision:o,subdivisions:c},y=null,C,S,I=0,W=0,q=0,ie=c.length,ve=ie>0?1/ie:0,Le=0;Le<ie;Le+=1){var Oe=r?Le:ie-1-Le,it=c[Le],at=it.endpointDistance();if(e<=q+at){y=it,C=Oe*ve,S=(Oe+1)*ve,I=r?e-q:at+q-e,W=r?at+q-e:e-q;break}q+=at}if(y==null)return r?1:0;for(var Qe=this.length(p),qt=Math.pow(10,-o);;){var Kt=void 0;if(Kt=Qe!==0?I/Qe:0,Kt<qt)return C;if(Kt=Qe!==0?W/Qe:0,Kt<qt)return S;var Tn=void 0,Bn=void 0,tr=y.divide(.5);ve/=2;var hr=tr[0].endpointDistance(),Lr=tr[1].endpointDistance();I<=hr?(y=tr[0],S-=ve,Tn=I,Bn=hr-Tn):(y=tr[1],C+=ve,Tn=I-hr,Bn=Lr-Tn),I=Tn,W=Bn}}},{key:"toPoints",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getDivisions(e),r=[t[0].start.clone()];return t.forEach(function(o){return r.push(o.end.clone())}),r}},{key:"toPolyline",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new kl(this.toPoints(e))}},{key:"scale",value:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}},{key:"rotate",value:function(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return e!=null&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new i(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}]),i}(bh);(function(a){a.toStringTag="X6.Geometry.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;try{if((n==null||n===a.toStringTag)&&Bt.isPoint(e.start)&&Bt.isPoint(e.controlPoint1)&&Bt.isPoint(e.controlPoint2)&&Bt.isPoint(e.end)&&typeof e.toPoints=="function"&&typeof e.toPolyline=="function")return!0}catch(t){return!1}return!1}a.isCurve=s})(zc||(zc={})),function(a){function s(e){var t=e.length,r=[],o=[],c=2;r[0]=e[0]/c;for(var p=1;p<t;p+=1)o[p]=1/c,c=(p<t-1?4:3.5)-o[p],r[p]=(e[p]-r[p-1])/c;for(var y=1;y<t;y+=1)r[t-y-1]-=o[t-y]*r[t-y];return r}function i(e){var t=e.map(function(q){return Bt.clone(q)}),r=[],o=[],c=t.length-1;if(c===1)return r[0]=new Bt((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),o[0]=new Bt(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,o];for(var p=[],y=1;y<c-1;y+=1)p[y]=4*t[y].x+2*t[y+1].x;p[0]=t[0].x+2*t[1].x,p[c-1]=(8*t[c-1].x+t[c].x)/2;for(var C=s(p),S=1;S<c-1;S+=1)p[S]=4*t[S].y+2*t[S+1].y;p[0]=t[0].y+2*t[1].y,p[c-1]=(8*t[c-1].y+t[c].y)/2;for(var I=s(p),W=0;W<c;W+=1)r.push(new Bt(C[W],I[W])),W<c-1?o.push(new Bt(2*t[W+1].x-C[W+1],2*t[W+1].y-I[W+1])):o.push(new Bt((t[c].x+C[c-1])/2,(t[c].y+I[c-1])/2));return[r,o]}function n(e){if(e==null||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var t=i(e),r=[],o=0,c=t[0].length;o<c;o+=1){var p=new Bt(t[0][o].x,t[0][o].y),y=new Bt(t[1][o].x,t[1][o].y);r.push(new a(e[o],p,y,e[o+1]))}return r}a.throughPoints=n}(zc||(zc={}));var Dv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.isVisible=!0,n.isSegment=!0,n.isSubpathStart=!1,n}return Object(Br.a)(i,[{key:"end",get:function(){return this.endPoint}},{key:"start",get:function(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}},{key:"closestPointT",value:function(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}},{key:"lengthAtT",value:function(e,t){if(e<=0)return 0;var r=this.length();return e>=1?r:r*e}},{key:"divideAtT",value:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}},{key:"pointAtT",value:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}},{key:"tangentAtT",value:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}]),i}(bh),bf=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e){var t;return Object(_r.a)(this,i),t=s.call(this),Ba.isLine(n)?t.endPoint=n.end.clone().round(2):t.endPoint=Bt.create(n,e).round(2),t}return Object(Br.a)(i,[{key:"type",get:function(){return"L"}},{key:"line",get:function(){return new Ba(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[new i(t[0]),new i(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[new i(t[0]),new i(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return this.previousSegment==null?!1:!this.start.equals(this.end)}},{key:"clone",value:function(){return new i(this.end)}},{key:"scale",value:function(e,t,r){return this.end.scale(e,t,r),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),i}(Dv);(function(a){function s(){for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];var t=n.length,r=n[0];if(Ba.isLine(r))return new a(r);if(Bt.isPointLike(r))return t===1?new a(r):n.map(function(C){return new a(C)});if(t===2)return new a(+n[0],+n[1]);for(var o=[],c=0;c<t;c+=2){var p=+n[c],y=+n[c+1];o.push(new a(p,y))}return o}a.create=s})(bf||(bf={}));var Mv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"end",get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}},{key:"type",get:function(){return"Z"}},{key:"line",get:function(){return new Ba(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[t[1].isDifferentiable()?new bf(t[0]):this.clone(),new bf(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new bf(t[0]):this.clone(),new bf(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}},{key:"scale",value:function(){return this}},{key:"rotate",value:function(){return this}},{key:"translate",value:function(){return this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new i}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return this.type}}]),i}(Dv);(function(a){function s(){return new a}a.create=s})(Mv||(Mv={}));var _v=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e){var t;return Object(_r.a)(this,i),t=s.call(this),t.isVisible=!1,t.isSubpathStart=!0,Ba.isLine(n)||zc.isCurve(n)?t.endPoint=n.end.clone().round(2):t.endPoint=Bt.create(n,e).round(2),t}return Object(Br.a)(i,[{key:"start",get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}},{key:"type",get:function(){return"M"}},{key:"bbox",value:function(){return null}},{key:"closestPoint",value:function(){return this.end.clone()}},{key:"closestPointLength",value:function(){return 0}},{key:"closestPointNormalizedLength",value:function(){return 0}},{key:"closestPointT",value:function(){return 1}},{key:"closestPointTangent",value:function(){return null}},{key:"length",value:function(){return 0}},{key:"lengthAtT",value:function(){return 0}},{key:"divideAt",value:function(){return[this.clone(),this.clone()]}},{key:"divideAtLength",value:function(){return[this.clone(),this.clone()]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(){return this.end.clone()}},{key:"pointAtLength",value:function(){return this.end.clone()}},{key:"pointAtT",value:function(){return this.end.clone()}},{key:"tangentAt",value:function(){return null}},{key:"tangentAtLength",value:function(){return null}},{key:"tangentAtT",value:function(){return null}},{key:"isDifferentiable",value:function(){return!1}},{key:"scale",value:function(e,t,r){return this.end.scale(e,t,r),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"clone",value:function(){return new i(this.end)}},{key:"equals",value:function(e){return this.type===e.type&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),i}(Dv);(function(a){function s(){var i=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Ba.isLine(n))return new a(n);if(zc.isCurve(n))return new a(n);if(Bt.isPointLike(n)){if(i===1)return new a(n);for(var e=[],t=0;t<i;t+=1)t===0?e.push(new a(t<0||arguments.length<=t?void 0:arguments[t])):e.push(new bf(t<0||arguments.length<=t?void 0:arguments[t]));return e}if(i===2)return new a(+(arguments.length<=0?void 0:arguments[0]),+(arguments.length<=1?void 0:arguments[1]));for(var r=[],o=0;o<i;o+=2){var c=+(o<0||arguments.length<=o?void 0:arguments[o]),p=+(o+1<0||arguments.length<=o+1?void 0:arguments[o+1]);o===0?r.push(new a(c,p)):r.push(new bf(c,p))}return r}a.create=s})(_v||(_v={}));var kv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n,e,t,r,o,c){var p;return Object(_r.a)(this,i),p=s.call(this),zc.isCurve(n)?(p.controlPoint1=n.controlPoint1.clone().round(2),p.controlPoint2=n.controlPoint2.clone().round(2),p.endPoint=n.end.clone().round(2)):typeof n=="number"?(p.controlPoint1=new Bt(n,e).round(2),p.controlPoint2=new Bt(t,r).round(2),p.endPoint=new Bt(o,c).round(2)):(p.controlPoint1=Bt.create(n).round(2),p.controlPoint2=Bt.create(e).round(2),p.endPoint=Bt.create(t).round(2)),p}return Object(Br.a)(i,[{key:"type",get:function(){return"C"}},{key:"curve",get:function(){return new zc(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"bbox",value:function(){return this.curve.bbox()}},{key:"closestPoint",value:function(e){return this.curve.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.curve.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.curve.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.curve.closestPointTangent(e)}},{key:"length",value:function(){return this.curve.length()}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.curve.divideAt(e,t);return[new i(r[0]),new i(r[1])]}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.curve.divideAtLength(e,t);return[new i(r[0]),new i(r[1])]}},{key:"divideAtT",value:function(e){var t=this.curve.divideAtT(e);return[new i(t[0]),new i(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.curve.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.curve.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.curve.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.curve.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,o=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(o))}},{key:"scale",value:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}},{key:"rotate",value:function(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}},{key:"clone",value:function(){return new i(this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return[this.type,e.x,e.y,t.x,t.y,r.x,r.y].join(" ")}}]),i}(Dv);(function(a){function s(){var i=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(zc.isCurve(n))return new a(n);if(Bt.isPointLike(n)){if(i===3)return new a(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);for(var e=[],t=0;t<i;t+=3)e.push(new a(t<0||arguments.length<=t?void 0:arguments[t],t+1<0||arguments.length<=t+1?void 0:arguments[t+1],t+2<0||arguments.length<=t+2?void 0:arguments[t+2]));return e}if(i===6)return new a(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]);for(var r=[],o=0;o<i;o+=6)r.push(new a(o<0||arguments.length<=o?void 0:arguments[o],o+1<0||arguments.length<=o+1?void 0:arguments[o+1],o+2<0||arguments.length<=o+2?void 0:arguments[o+2],o+3<0||arguments.length<=o+3?void 0:arguments[o+3],o+4<0||arguments.length<=o+4?void 0:arguments[o+4],o+5<0||arguments.length<=o+5?void 0:arguments[o+5]));return r}a.create=s})(kv||(kv={}));function Nv(a,s,i){return{x:a*Math.cos(i)-s*Math.sin(i),y:a*Math.sin(i)+s*Math.cos(i)}}function db(a,s,i,n,e,t){var r=1/3,o=2/3;return[r*a+o*i,r*s+o*n,r*e+o*i,r*t+o*n,e,t]}function fb(a,s,i,n,e,t,r,o,c,p){var y=Math.PI*120/180,C=Math.PI/180*(+e||0),S=[],I,W,q,ie,ve;if(p)W=p[0],q=p[1],ie=p[2],ve=p[3];else{I=Nv(a,s,-C),a=I.x,s=I.y,I=Nv(o,c,-C),o=I.x,c=I.y;var Le=(a-o)/2,Oe=(s-c)/2,it=Le*Le/(i*i)+Oe*Oe/(n*n);it>1&&(it=Math.sqrt(it),i=it*i,n=it*n);var at=i*i,Qe=n*n,qt=(t===r?-1:1)*Math.sqrt(Math.abs((at*Qe-at*Oe*Oe-Qe*Le*Le)/(at*Oe*Oe+Qe*Le*Le)));ie=qt*i*Oe/n+(a+o)/2,ve=qt*-n*Le/i+(s+c)/2,W=Math.asin((s-ve)/n),q=Math.asin((c-ve)/n),W=a<ie?Math.PI-W:W,q=o<ie?Math.PI-q:q,W<0&&(W=Math.PI*2+W),q<0&&(q=Math.PI*2+q),r&&W>q&&(W-=Math.PI*2),!r&&q>W&&(q-=Math.PI*2)}var Kt=q-W;if(Math.abs(Kt)>y){var Tn=q,Bn=o,tr=c;q=W+y*(r&&q>W?1:-1),o=ie+i*Math.cos(q),c=ve+n*Math.sin(q),S=fb(o,c,i,n,e,0,r,Bn,tr,[q,Tn,ie,ve])}Kt=q-W;var hr=Math.cos(W),Lr=Math.sin(W),Vr=Math.cos(q),dn=Math.sin(q),Xn=Math.tan(Kt/4),ra=4/3*(i*Xn),Ea=4/3*(n*Xn),ja=[a,s],li=[a+ra*Lr,s-Ea*hr],Si=[o+ra*dn,c-Ea*Vr],Di=[o,c];if(li[0]=2*ja[0]-li[0],li[1]=2*ja[1]-li[1],p)return[li,Si,Di].concat(S);{S=[li,Si,Di].concat(S).join().split(",");for(var hl=[],pu=S.length,ns=0;ns<pu;ns+=1)hl[ns]=ns%2?Nv(+S[ns-1],+S[ns],C).y:Nv(+S[ns],+S[ns+1],C).x;return hl}}function nC(a){if(!a)return null;var s=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,i=new RegExp("([a-z])[".concat(s,",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[").concat(s,"]*,?[").concat(s,"]*)+)"),"ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[".concat(s,"]*,?[").concat(s,"]*"),"ig"),e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=[];return a.replace(i,function(r,o,c){var p=[],y=o.toLowerCase();c.replace(n,function(S,I){return I&&p.push(+I),S}),y==="m"&&p.length>2&&(t.push([o].concat(Object(Ca.a)(p.splice(0,2)))),y="l",o=o==="m"?"l":"L");for(var C=e[y];p.length>=C&&!(t.push([o].concat(Object(Ca.a)(p.splice(0,C)))),!C););return r}),t}function rC(a){var s=nC(a);if(!s||!s.length)return[["M",0,0]];for(var i=0,n=0,e=0,t=0,r=[],o=0,c=s.length;o<c;o+=1){var p=[];r.push(p);var y=s[o],C=y[0];if(C!==C.toUpperCase()){p[0]=C.toUpperCase();switch(p[0]){case"A":p[1]=y[1],p[2]=y[2],p[3]=y[3],p[4]=y[4],p[5]=y[5],p[6]=+y[6]+i,p[7]=+y[7]+n;break;case"V":p[1]=+y[1]+n;break;case"H":p[1]=+y[1]+i;break;case"M":e=+y[1]+i,t=+y[2]+n;for(var S=1,I=y.length;S<I;S+=1)p[S]=+y[S]+(S%2?i:n);break;default:for(var W=1,q=y.length;W<q;W+=1)p[W]=+y[W]+(W%2?i:n);break}}else for(var ie=0,ve=y.length;ie<ve;ie+=1)p[ie]=y[ie];switch(p[0]){case"Z":i=+e,n=+t;break;case"H":i=p[1];break;case"V":n=p[1];break;case"M":e=p[p.length-2],t=p[p.length-1],i=p[p.length-2],n=p[p.length-1];break;default:i=p[p.length-2],n=p[p.length-1];break}}return r}function aC(a){var s=rC(a),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(S,I,W){var q,ie;if(!S)return["C",I.x,I.y,I.x,I.y,I.x,I.y];S[0]in{T:1,Q:1}||(I.qx=null,I.qy=null);switch(S[0]){case"M":I.X=S[1],I.Y=S[2];break;case"A":return parseFloat(S[1])===0||parseFloat(S[2])===0?["L",S[6],S[7]]:["C"].concat(fb.apply(0,[I.x,I.y].concat(S.slice(1))));case"S":return W==="C"||W==="S"?(q=I.x*2-I.bx,ie=I.y*2-I.by):(q=I.x,ie=I.y),["C",q,ie].concat(S.slice(1));case"T":return W==="Q"||W==="T"?(I.qx=I.x*2-I.qx,I.qy=I.y*2-I.qy):(I.qx=I.x,I.qy=I.y),["C"].concat(db(I.x,I.y,I.qx,I.qy,S[1],S[2]));case"Q":return I.qx=S[1],I.qy=S[2],["C"].concat(db(I.x,I.y,S[1],S[2],S[3],S[4]));case"H":return["L"].concat(S[1],I.y);case"V":return["L"].concat(I.x,S[1]);case"L":break;case"Z":break;default:break}return S}function e(S,I){if(S[I].length>7){S[I].shift();for(var W=S[I];W.length;)t[I]="A",I+=1,S.splice(I,0,["C"].concat(W.splice(0,6)));S.splice(I,1),o=s.length}}for(var t=[],r="",o=s.length,c=0;c<o;c+=1){var p="";s[c]&&(p=s[c][0]),p!=="C"&&(t[c]=p,c>0&&(r=t[c-1])),s[c]=n(s[c],i,r),t[c]!=="A"&&p==="C"&&(t[c]="C"),e(s,c);var y=s[c],C=y.length;i.x=y[C-2],i.y=y[C-1],i.bx=parseFloat(y[C-4])||i.x,i.by=parseFloat(y[C-3])||i.y}return(!s[0][0]||s[0][0]!=="M")&&s.unshift(["M",0,0]),s}function iC(a){return aC(a).map(function(s){return s.map(function(i){return typeof i=="string"?i:Kh(i,2)})}).join(",").split(",").join(" ")}var oC=new RegExp("^[\\s\\dLMCZz,.]*$");function sC(a){return typeof a!="string"?!1:oC.test(a)}function Zm(a,s){return(a%s+s)%s}function uC(a,s,i,n,e){var t=[],r=a[a.length-1],o=s!=null&&s>0,c=s||0;if(n&&o){a=a.slice();var p=a[0],y=new Bt(r.x+(p.x-r.x)/2,r.y+(p.y-r.y)/2);a.splice(0,0,y)}var C=a[0],S=1;for(i?t.push("M",C.x,C.y):t.push("L",C.x,C.y);S<(n?a.length:a.length-1);){var I=a[Zm(S,a.length)],W=C.x-I.x,q=C.y-I.y;if(o&&(W!==0||q!==0)&&(e==null||e.indexOf(S-1)<0)){var ie=Math.sqrt(W*W+q*q),ve=W*Math.min(c,ie/2)/ie,Le=q*Math.min(c,ie/2)/ie,Oe=I.x+ve,it=I.y+Le;t.push("L",Oe,it);for(var at=a[Zm(S+1,a.length)];S<a.length-2&&Math.round(at.x-I.x)===0&&Math.round(at.y-I.y)===0;)at=a[Zm(S+2,a.length)],S+=1;W=at.x-I.x,q=at.y-I.y,ie=Math.max(1,Math.sqrt(W*W+q*q));var Qe=W*Math.min(c,ie/2)/ie,qt=q*Math.min(c,ie/2)/ie,Kt=I.x+Qe,Tn=I.y+qt;t.push("Q",I.x,I.y,Kt,Tn),I=new Bt(Kt,Tn)}else t.push("L",I.x,I.y);C=I,S+=1}return n?t.push("Z"):t.push("L",r.x,r.y),t.map(function(Bn){return typeof Bn=="string"?Bn:+Bn.toFixed(3)}).join(" ")}function hb(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return a&&a.length&&a.forEach(function(n){Array.isArray(n)?i.push({x:n[0],y:n[1]}):i.push({x:n.x,y:n.y})}),uC(i,s.round,s.initialMove==null||s.initialMove,s.close,s.exclude)}function Rv(a,s,i,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,o=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0;if(i===0||n===0)return[];o-=a,c-=s,i=Math.abs(i),n=Math.abs(n);var p=-o/2,y=-c/2,C=Math.cos(e*Math.PI/180),S=Math.sin(e*Math.PI/180),I=C*p+S*y,W=-1*S*p+C*y,q=I*I,ie=W*W,ve=i*i,Le=n*n,Oe=q/ve+ie/Le,it;if(Oe>1)i=Math.sqrt(Oe)*i,n=Math.sqrt(Oe)*n,it=0;else{var at=1;t===r&&(at=-1),it=at*Math.sqrt((ve*Le-ve*ie-Le*q)/(ve*ie+Le*q))}var Qe=it*i*W/n,qt=-1*it*n*I/i,Kt=C*Qe-S*qt+o/2,Tn=S*Qe+C*qt+c/2,Bn=Math.atan2((W-qt)/n,(I-Qe)/i)-Math.atan2(0,1),tr=Bn>=0?Bn:2*Math.PI+Bn;Bn=Math.atan2((-W-qt)/n,(-I-Qe)/i)-Math.atan2((W-qt)/n,(I-Qe)/i);var hr=Bn>=0?Bn:2*Math.PI+Bn;r===0&&hr>0?hr-=2*Math.PI:r!==0&&hr<0&&(hr+=2*Math.PI);for(var Lr=hr*2/Math.PI,Vr=Math.ceil(Lr<0?-1*Lr:Lr),dn=hr/Vr,Xn=8/3*Math.sin(dn/4)*Math.sin(dn/4)/Math.sin(dn/2),ra=C*i,Ea=C*n,ja=S*i,li=S*n,Si=Math.cos(tr),Di=Math.sin(tr),hl=-Xn*(ra*Di+li*Si),pu=-Xn*(ja*Di-Ea*Si),ns=0,xd=0,ef=[],wd=0;wd<Vr;wd+=1){tr+=dn,Si=Math.cos(tr),Di=Math.sin(tr),ns=ra*Si-li*Di+Kt,xd=ja*Si+Ea*Di+Tn;var mm=-Xn*(ra*Di+li*Si),gm=-Xn*(ja*Di-Ea*Si),Af=wd*6;ef[Af]=Number(hl+a),ef[Af+1]=Number(pu+s),ef[Af+2]=Number(ns-mm+a),ef[Af+3]=Number(xd-gm+s),ef[Af+4]=Number(ns+a),ef[Af+5]=Number(xd+s),hl=ns+mm,pu=xd+gm}return ef.map(function(Ph){return+Ph.toFixed(2)})}function lC(a,s,i,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,o=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,p=[],y=Rv(a,s,i,n,e,t,r,o,c);if(y!=null)for(var C=0,S=y.length;C<S;C+=6)p.push("C",y[C],y[C+1],y[C+2],y[C+3],y[C+4],y[C+5]);return p.join(" ")}var Ii=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;if(Object(_r.a)(this,i),e=s.call(this),e.PRECISION=3,e.segments=[],Array.isArray(n))if(Ba.isLine(n[0])||zc.isCurve(n[0])){var t=null,r=n;r.forEach(function(c,p){p===0&&e.appendSegment(i.createSegment("M",c.start)),t!=null&&!t.end.equals(c.start)&&e.appendSegment(i.createSegment("M",c.start)),Ba.isLine(c)?e.appendSegment(i.createSegment("L",c.end)):zc.isCurve(c)&&e.appendSegment(i.createSegment("C",c.controlPoint1,c.controlPoint2,c.end)),t=c})}else{var o=n;o.forEach(function(c){c.isSegment&&e.appendSegment(c)})}else n!=null&&(Ba.isLine(n)?(e.appendSegment(i.createSegment("M",n.start)),e.appendSegment(i.createSegment("L",n.end))):zc.isCurve(n)?(e.appendSegment(i.createSegment("M",n.start)),e.appendSegment(i.createSegment("C",n.controlPoint1,n.controlPoint2,n.end))):kl.isPolyline(n)?n.points&&n.points.length&&n.points.forEach(function(c,p){var y=p===0?i.createSegment("M",c):i.createSegment("L",c);e.appendSegment(y)}):n.isSegment&&e.appendSegment(n));return e}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"start",get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=0;r<t;r+=1){var o=e[r];if(o.isVisible)return o.start}return e[t-1].end}},{key:"end",get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=t-1;r>=0;r-=1){var o=e[r];if(o.isVisible)return o.end}return e[t-1].end}},{key:"moveTo",value:function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return this.appendSegment((e=_v.create).call.apply(e,[null].concat(r)))}},{key:"lineTo",value:function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return this.appendSegment((e=bf.create).call.apply(e,[null].concat(r)))}},{key:"curveTo",value:function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return this.appendSegment((e=kv.create).call.apply(e,[null].concat(r)))}},{key:"arcTo",value:function(e,t,r,o,c,p,y){var C=this.end||new Bt,S=typeof p=="number"?Rv(C.x,C.y,e,t,r,o,c,p,y):Rv(C.x,C.y,e,t,r,o,c,p.x,p.y);if(S!=null)for(var I=0,W=S.length;I<W;I+=6)this.curveTo(S[I],S[I+1],S[I+2],S[I+3],S[I+4],S[I+5]);return this}},{key:"quadTo",value:function(e,t,r,o){var c=this.end||new Bt,p=["M",c.x,c.y];if(typeof e=="number")p.push("Q",e,t,r,o);else{var y=t;p.push("Q",e.x,e.y,y.x,y.y)}var C=i.parse(p.join(" "));return this.appendSegment(C.segments.slice(1)),this}},{key:"close",value:function(){return this.appendSegment(Mv.create())}},{key:"drawPoints",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=hb(e,t),o=i.parse(r);o&&o.segments&&this.appendSegment(o.segments)}},{key:"bbox",value:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r,o=0;o<t;o+=1){var c=e[o];if(c.isVisible){var p=c.bbox();p!=null&&(r=r?r.union(p):p)}}if(r!=null)return r;var y=e[t-1];return new qr(y.end.x,y.end.y,0,0)}},{key:"appendSegment",value:function(e){var t=this.segments.length,r=t!==0?this.segments[t-1]:null,o,c=null;if(Array.isArray(e))for(var p=0,y=e.length;p<y;p+=1){var C=e[p];o=this.prepareSegment(C,r,c),this.segments.push(o),r=o}else e!=null&&e.isSegment&&(o=this.prepareSegment(e,r,c),this.segments.push(o));return this}},{key:"insertSegment",value:function(e,t){var r=this.segments.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var o,c=null,p=null;if(r!==0&&(e>=1?(c=this.segments[e-1],p=c.nextSegment):(c=null,p=this.segments[0])),!Array.isArray(t))o=this.prepareSegment(t,c,p),this.segments.splice(e,0,o);else for(var y=0,C=t.length;y<C;y+=1){var S=t[y];o=this.prepareSegment(S,c,p),this.segments.splice(e+y,0,o),c=o}return this}},{key:"removeSegment",value:function(e){var t=this.fixIndex(e),r=this.segments.splice(t,1)[0],o=r.previousSegment,c=r.nextSegment;return o&&(o.nextSegment=c),c&&(c.previousSegment=o),r.isSubpathStart&&c&&this.updateSubpathStartSegment(c),r}},{key:"replaceSegment",value:function(e,t){var r=this.fixIndex(e),o,c=this.segments[r],p=c.previousSegment,y=c.nextSegment,C=c.isSubpathStart;if(!Array.isArray(t))o=this.prepareSegment(t,p,y),this.segments.splice(r,1,o),C&&o.isSubpathStart&&(C=!1);else{this.segments.splice(e,1);for(var S=0,I=t.length;S<I;S+=1){var W=t[S];o=this.prepareSegment(W,p,y),this.segments.splice(e+S,0,o),p=o,C&&o.isSubpathStart&&(C=!1)}}C&&y&&this.updateSubpathStartSegment(y)}},{key:"getSegment",value:function(e){var t=this.fixIndex(e);return this.segments[t]}},{key:"fixIndex",value:function(e){var t=this.segments.length;if(t===0)throw new Error("Path has no segments.");for(var r=e;r<0;)r=t+r;if(r>=t||r<0)throw new Error("Index out of range.");return r}},{key:"segmentAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null}},{key:"segmentAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null}},{key:"segmentIndexAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=dp(e,0,1),o=this.getOptions(t),c=this.length(o),p=c*r;return this.segmentIndexAtLength(p,o)}},{key:"segmentIndexAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segments.length;if(r===0)return null;var o=!0;e<0&&(o=!1,e=-e);for(var c=this.getPrecision(t),p=this.getSubdivisions(t),y=0,C=null,S=0;S<r;S+=1){var I=o?S:r-1-S,W=this.segments[I],q=p[I],ie=W.length({precision:c,subdivisions:q});if(W.isVisible){if(e<=y+ie)return I;C=I}y+=ie}return C}},{key:"getSegmentSubdivisions",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=[],o=0,c=this.segments.length;o<c;o+=1){var p=this.segments[o],y=p.getSubdivisions({precision:t});r.push(y)}return r}},{key:"updateSubpathStartSegment",value:function(e){for(var t=e.previousSegment,r=e;r&&!r.isSubpathStart;)t!=null?r.subpathStartSegment=t.subpathStartSegment:r.subpathStartSegment=null,t=r,r=r.nextSegment}},{key:"prepareSegment",value:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t!=null&&(t.nextSegment=e),r!=null&&(r.previousSegment=e);var o=e;return e.isSubpathStart&&(e.subpathStartSegment=e,o=r),o!=null&&this.updateSubpathStartSegment(o),e}},{key:"closestPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.closestPointT(e,t);return r?this.pointAtT(r):null}},{key:"closestPointLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t),o=this.closestPointT(e,r);return o?this.lengthAtT(o,r):0}},{key:"closestPointNormalizedLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t),o=this.closestPointLength(e,r);if(o===0)return 0;var c=this.length(r);return c===0?0:o/c}},{key:"closestPointT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var r=this.getPrecision(t),o=this.getSubdivisions(t),c,p=Infinity,y=0,C=this.segments.length;y<C;y+=1){var S=this.segments[y],I=o[y];if(S.isVisible){var W=S.closestPointT(e,{precision:r,subdivisions:I}),q=S.pointAtT(W),ie=lb(q,e);ie<p&&(c={segmentIndex:y,value:W},p=ie)}}return c||{segmentIndex:this.segments.length-1,value:1}}},{key:"closestPointTangent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var r=this.getPrecision(t),o=this.getSubdivisions(t),c,p=Infinity,y=0,C=this.segments.length;y<C;y+=1){var S=this.segments[y],I=o[y];if(S.isDifferentiable()){var W=S.closestPointT(e,{precision:r,subdivisions:I}),q=S.pointAtT(W),ie=lb(q,e);ie<p&&(c=S.tangentAtT(W),p=ie)}}return c||null}},{key:"containsPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.toPolylines(t);if(!r)return!1;for(var o=0,c=0,p=r.length;c<p;c+=1){var y=r[c];y.containsPoint(e)&&(o+=1)}return o%2===1}},{key:"pointAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.getOptions(t),o=this.length(r),c=o*e;return this.pointAtLength(c,r)}},{key:"pointAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(e===0)return this.start.clone();var r=!0;e<0&&(r=!1,e=-e);for(var o=this.getPrecision(t),c=this.getSubdivisions(t),p,y=0,C=0,S=this.segments.length;C<S;C+=1){var I=r?C:S-1-C,W=this.segments[I],q=c[I],ie=W.length({precision:o,subdivisions:q});if(W.isVisible){if(e<=y+ie)return W.pointAtLength((r?1:-1)*(e-y),{precision:o,subdivisions:q});p=W}y+=ie}if(p)return r?p.end:p.start;var ve=this.segments[this.segments.length-1];return ve.end.clone()}},{key:"pointAtT",value:function(e){var t=this.segments,r=t.length;if(r===0)return null;var o=e.segmentIndex;if(o<0)return t[0].pointAtT(0);if(o>=r)return t[r-1].pointAtT(1);var c=dp(e.value,0,1);return t[o].pointAtT(c)}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=dp(e,0,1),o=this.getOptions(t),c=this.length(o),p=c*r;return this.divideAtLength(p,o)}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=!0;e<0&&(r=!1,e=-e);for(var o=this.getPrecision(t),c=this.getSubdivisions(t),p=0,y,C,S,I,W,q=0,ie=this.segments.length;q<ie;q+=1){var ve=r?q:ie-1-q,Le=this.getSegment(ve),Oe=c[ve],it={precision:o,subdivisions:Oe},at=Le.length(it);if(Le.isDifferentiable()&&(S=Le,I=ve,e<=p+at)){C=ve,y=Le.divideAtLength((r?1:-1)*(e-p),it);break}p+=at}if(!S)return null;y||(C=I,W=r?1:0,y=S.divideAtT(W));var Qe=this.clone(),qt=C;Qe.replaceSegment(qt,y);var Kt=qt,Tn=qt+1,Bn=qt+2;y[0].isDifferentiable()||(Qe.removeSegment(Kt),Tn-=1,Bn-=1);var tr=Qe.getSegment(Tn).start;Qe.insertSegment(Tn,i.createSegment("M",tr)),Bn+=1,y[1].isDifferentiable()||(Qe.removeSegment(Bn-1),Bn-=1);for(var hr=Bn-Kt-1,Lr=Bn,Vr=Qe.segments.length;Lr<Vr;Lr+=1){var dn=this.getSegment(Lr-hr),Xn=Qe.getSegment(Lr);if(Xn.type==="Z"&&!dn.subpathStartSegment.end.equals(Xn.subpathStartSegment.end)){var ra=i.createSegment("L",dn.end);Qe.replaceSegment(Lr,ra)}}var Ea=new i(Qe.segments.slice(0,Tn)),ja=new i(Qe.segments.slice(Tn));return[Ea,ja]}},{key:"intersectsWithLine",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.toPolylines(t);if(r==null)return null;for(var o=null,c=0,p=r.length;c<p;c+=1){var y=r[c],C=e.intersect(y);if(C)if(o==null&&(o=[]),Array.isArray(C)){var S;(S=o).push.apply(S,Object(Ca.a)(C))}else o.push(C)}return o}},{key:"isDifferentiable",value:function(){for(var e=0,t=this.segments.length;e<t;e+=1){var r=this.segments[e];if(r.isDifferentiable())return!0}return!1}},{key:"isValid",value:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t}},{key:"length",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.segments.length===0)return 0;for(var t=this.getSubdivisions(e),r=0,o=0,c=this.segments.length;o<c;o+=1){var p=this.segments[o],y=t[o];r+=p.length({subdivisions:y})}return r}},{key:"lengthAtT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segments.length;if(r===0)return 0;var o=e.segmentIndex;if(o<0)return 0;var c=dp(e.value,0,1);o>=r&&(o=r-1,c=1);for(var p=this.getPrecision(t),y=this.getSubdivisions(t),C=0,S=0;S<o;S+=1){var I=this.segments[S],W=y[S];C+=I.length({precision:p,subdivisions:W})}var q=this.segments[o],ie=y[o];return C+=q.lengthAtT(c,{precision:p,subdivisions:ie}),C}},{key:"tangentAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=dp(e,0,1),o=this.getOptions(t),c=this.length(o),p=c*r;return this.tangentAtLength(p,o)}},{key:"tangentAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=!0;e<0&&(r=!1,e=-e);for(var o=this.getPrecision(t),c=this.getSubdivisions(t),p,y=0,C=0,S=this.segments.length;C<S;C+=1){var I=r?C:S-1-C,W=this.segments[I],q=c[I],ie=W.length({precision:o,subdivisions:q});if(W.isDifferentiable()){if(e<=y+ie)return W.tangentAtLength((r?1:-1)*(e-y),{precision:o,subdivisions:q});p=W}y+=ie}if(p){var ve=r?1:0;return p.tangentAtT(ve)}return null}},{key:"tangentAtT",value:function(e){var t=this.segments.length;if(t===0)return null;var r=e.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=t)return this.segments[t-1].tangentAtT(1);var o=dp(e.value,0,1);return this.segments[r].tangentAtT(o)}},{key:"getPrecision",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.precision==null?this.PRECISION:e.precision}},{key:"getSubdivisions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.segmentSubdivisions==null){var t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}},{key:"getOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=this.getSubdivisions(e);return{precision:t,segmentSubdivisions:r}}},{key:"toPoints",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.segments,r=t.length;if(r===0)return null;for(var o=this.getSubdivisions(e),c=[],p=[],y=0;y<r;y+=1){var C=t[y];if(C.isVisible){var S=o[y];S.length>0?S.forEach(function(I){return p.push(I.start)}):p.push(C.start)}else p.length>0&&(p.push(t[y-1].end),c.push(p),p=[])}return p.length>0&&(p.push(this.end),c.push(p)),c}},{key:"toPolylines",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.toPoints(e);return t?t.map(function(r){return new kl(r)}):null}},{key:"scale",value:function(e,t,r){return this.segments.forEach(function(o){return o.scale(e,t,r)}),this}},{key:"rotate",value:function(e,t){return this.segments.forEach(function(r){return r.rotate(e,t)}),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.segments.forEach(function(r){return r.translate(e,t)}):this.segments.forEach(function(r){return r.translate(e)}),this}},{key:"clone",value:function(){var e=new i;return this.segments.forEach(function(t){return e.appendSegment(t.clone())}),e}},{key:"equals",value:function(e){if(e==null)return!1;var t=this.segments,r=e.segments,o=t.length;if(r.length!==o)return!1;for(var c=0;c<o;c+=1){var p=t[c],y=r[c];if(p.type!==y.type||!p.equals(y))return!1}return!0}},{key:"toJSON",value:function(){return this.segments.map(function(e){return e.toJSON()})}},{key:"serialize",value:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(e){return e.serialize()}).join(" ")}},{key:"toString",value:function(){return this.serialize()}}]),i}(bh);(function(a){a.toStringTag="X6.Geometry.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return!!((n==null||n===a.toStringTag)&&Array.isArray(e.segments)&&typeof e.moveTo=="function"&&typeof e.lineTo=="function"&&typeof e.curveTo=="function")}a.isPath=s})(Ii||(Ii={})),function(a){function s(n){if(!n)return new a;var e=new a,t=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,r=a.normalize(n).match(t);if(r!=null)for(var o=0,c=r.length;o<c;o+=1){var p=r[o],y=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,C=p.match(y);if(C!=null){var S=C[0],I=C.slice(1).map(function(q){return+q}),W=i.call.apply(i,[null,S].concat(Object(Ca.a)(I)));e.appendSegment(W)}}return e}a.parse=s;function i(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];if(n==="M"){var o;return(o=_v.create).call.apply(o,[null].concat(t))}if(n==="L"){var c;return(c=bf.create).call.apply(c,[null].concat(t))}if(n==="C"){var p;return(p=kv.create).call.apply(p,[null].concat(t))}if(n==="z"||n==="Z")return Mv.create();throw new Error('Invalid path segment type "'.concat(n,'"'))}a.createSegment=i}(Ii||(Ii={})),function(a){a.normalize=iC,a.isValid=sC,a.drawArc=lC,a.drawPoints=hb,a.arcToCurves=Rv}(Ii||(Ii={}));var pi=function(){function a(s,i,n){if(Object(_r.a)(this,a),!s)throw new TypeError("Invalid element to create vector");var e;if(a.isVector(s))e=s.node;else if(typeof s=="string")if(s.toLowerCase()==="svg")e=Cv();else if(s[0]==="<"){var t=Cv(s);e=document.importNode(t.firstChild,!0)}else e=document.createElementNS(gf.svg,s);else e=s;this.node=e,i&&this.setAttributes(i),n&&this.append(n)}return Object(Br.a)(a,[{key:Symbol.toStringTag,get:function(){return a.toStringTag}},{key:"type",get:function(){return this.node.nodeName}},{key:"id",get:function(){return this.node.id}},{key:"id",set:function(i){this.node.id=i}},{key:"transform",value:function(i,n){return i==null?og(this.node):(og(this.node,i,n),this)}},{key:"translate",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i==null?sg(this.node):(sg(this.node,i,n,e),this)}},{key:"rotate",value:function(i,n,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return i==null?ug(this.node):(ug(this.node,i,n,e,t),this)}},{key:"scale",value:function(i,n){return i==null?Bv(this.node):(Bv(this.node,i,n),this)}},{key:"getTransformToElement",value:function(i){var n=a.toNode(i);return wh(this.node,n)}},{key:"removeAttribute",value:function(i){return Wm(this.node,i),this}},{key:"getAttribute",value:function(i){return nb(this.node,i)}},{key:"setAttribute",value:function(i,n){return Av(this.node,i,n),this}},{key:"setAttributes",value:function(i){return Hm(this.node,i),this}},{key:"attr",value:function(i,n){return i==null?cl(this.node):typeof i=="string"&&n===void 0?cl(this.node,i):(typeof i=="object"?cl(this.node,i):cl(this.node,i,n),this)}},{key:"svg",value:function(){return this.node instanceof SVGSVGElement?this:a.create(this.node.ownerSVGElement)}},{key:"defs",value:function(){var i=this.svg()||this,n=i.node.getElementsByTagName("defs")[0];return n?a.create(n):a.create("defs").appendTo(i)}},{key:"text",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vb(this.node,i,n),this}},{key:"tagName",value:function(){return Ky(this.node)}},{key:"clone",value:function(){return a.create(this.node.cloneNode(!0))}},{key:"remove",value:function(){return Tv(this.node),this}},{key:"empty",value:function(){return zm(this.node),this}},{key:"append",value:function(i){return Gm(this.node,a.toNodes(i)),this}},{key:"appendTo",value:function(i){return eb(this.node,a.isVector(i)?i.node:i),this}},{key:"prepend",value:function(i){return qy(this.node,a.toNodes(i)),this}},{key:"before",value:function(i){return Xm(this.node,a.toNodes(i)),this}},{key:"replace",value:function(i){return this.node.parentNode&&this.node.parentNode.replaceChild(a.toNode(i),this.node),a.create(i)}},{key:"first",value:function(){return this.node.firstChild?a.create(this.node.firstChild):null}},{key:"last",value:function(){return this.node.lastChild?a.create(this.node.lastChild):null}},{key:"get",value:function(i){var n=this.node.childNodes[i];return n?a.create(n):null}},{key:"indexOf",value:function(i){var n=Array.prototype.slice.call(this.node.childNodes);return n.indexOf(a.toNode(i))}},{key:"find",value:function(i){var n=[],e=Yy(this.node,i);if(e)for(var t=0,r=e.length;t<r;t+=1)n.push(a.create(e[t]));return n}},{key:"findOne",value:function(i){var n=Qy(this.node,i);return n?a.create(n):null}},{key:"findParentByClass",value:function(i,n){var e=Jy(this.node,i,n);return e?a.create(e):null}},{key:"matches",value:function(i){var n=this.node,e=this.node.matches,t=n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector||null;return t&&t.call(n,i)}},{key:"contains",value:function(i){return Zy(this.node,a.isVector(i)?i.node:i)}},{key:"wrap",value:function(i){var n=a.create(i),e=this.node.parentNode;return e!=null&&e.insertBefore(n.node,this.node),n.append(this)}},{key:"parent",value:function(i){var n=this;if(n.node.parentNode==null)return null;if(n=a.create(n.node.parentNode),i==null)return n;do if(typeof i=="string"?n.matches(i):n instanceof i)return n;while(n=a.create(n.node.parentNode));return n}},{key:"children",value:function(){for(var i=this.node.childNodes,n=[],e=0;e<i.length;e+=1){var t=i[e];t.nodeType===1&&n.push(a.create(i[e]))}return n}},{key:"eachChild",value:function(i,n){for(var e=this.children(),t=0,r=e.length;t<r;t+=1)i.call(e[t],e[t],t,e),n&&e[t].eachChild(i,n);return this}},{key:"index",value:function(){return $y(this.node)}},{key:"hasClass",value:function(i){return wv(this.node,i)}},{key:"addClass",value:function(i){return Up(this.node,i),this}},{key:"removeClass",value:function(i){return Fp(this.node,i),this}},{key:"toggleClass",value:function(i,n){return Bm(this.node,i,n),this}},{key:"toLocalPoint",value:function(i,n){return Ob(this.node,i,n)}},{key:"toGeometryShape",value:function(){return Sb(this.node)}},{key:"translateCenterToPoint",value:function(i){var n=this.getBBox({target:this.svg()}),e=n.getCenter();return this.translate(i.x-e.x,i.y-e.y),this}},{key:"translateAndAutoOrient",value:function(i,n,e){return Pb(this.node,i,n,e),this}},{key:"animate",value:function(i){return Db(this.node,i)}},{key:"animateTransform",value:function(i){return Mb(this.node,i)}},{key:"animateAlongPath",value:function(i,n){return Nb(this.node,i,n)}},{key:"normalizePath",value:function(){var i=this.tagName();return i==="path"&&this.attr("d",Ii.normalize(this.attr("d"))),this}},{key:"bbox",value:function(i,n){return Ab(this.node,i,n)}},{key:"getBBox",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xh(this.node,{recursive:i.recursive,target:i.target?a.toNode(i.target):null})}},{key:"sample",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.node instanceof SVGPathElement?qm(this.node,i):[]}},{key:"toPath",value:function(){return a.create(eg(this.node))}},{key:"toPathData",value:function(){return tg(this.node)}}]),a}();(function(a){a.toStringTag="X6.".concat(a.name);function s(r){if(r==null)return!1;if(r instanceof a)return!0;var o=r[Symbol.toStringTag],c=r;return(o==null||o===a.toStringTag)&&c.node instanceof SVGElement&&typeof c.animate=="function"&&typeof c.sample=="function"&&typeof c.normalizePath=="function"&&typeof c.toPath=="function"}a.isVector=s;function i(r,o,c){return new a(r,o,c)}a.create=i;function n(r){if(r[0]==="<"){for(var o=Cv(r),c=[],p=0,y=o.childNodes.length;p<y;p+=1){var C=o.childNodes[p];c.push(i(document.importNode(C,!0)))}return c}return[i(r)]}a.createVectors=n;function e(r){return s(r)?r.node:r}a.toNode=e;function t(r){return Array.isArray(r)?r.map(function(o){return e(o)}):[e(r)]}a.toNodes=t})(pi||(pi={}));function cC(a,s){var i=pi.create(s),n=pi.create("textPath"),e=a.d;if(e&&a["xlink:href"]===void 0){var t=pi.create("path").attr("d",e).appendTo(i.defs());n.attr("xlink:href","#".concat(t.id))}return typeof a=="object"&&n.attr(a),n.node}function dC(a,s,i){for(var n=i.eol,e=i.baseSize,t=i.lineHeight,r=0,o,c={},p=s.length-1,y=0;y<=p;y+=1){var C=s[y],S=null;if(typeof C=="object"){var I=C.attrs,W=pi.create("tspan",I);o=W.node;var q=C.t;n&&y===p&&(q+=n),o.textContent=q;var ie=I.class;ie&&W.addClass(ie),i.includeAnnotationIndices&&W.attr("annotations",C.annotations.join(",")),S=parseFloat(I["font-size"]),S===void 0&&(S=e),S&&S>r&&(r=S)}else n&&y===p&&(C+=n),o=document.createTextNode(C||" "),e&&e>r&&(r=e);a.appendChild(o)}return r&&(c.maxFontSize=r),t?c.lineHeight=t:r&&(c.lineHeight=r*1.2),c}var pb=/em$/;function Pv(a,s){var i=parseFloat(a);return pb.test(a)?i*s:i}function fC(a,s,i,n){if(!Array.isArray(s))return 0;var e=s.length;if(!e)return 0;for(var t=s[0],r=Pv(t.maxFontSize,i)||i,o=0,c=Pv(n,i),p=1;p<e;p+=1){t=s[p];var y=Pv(t.lineHeight,i)||c;o+=y}var C=Pv(t.maxFontSize,i)||i,S;switch(a){case"middle":S=r/2-.15*C-o/2;break;case"bottom":S=-(.25*C)-o;break;default:case"top":S=.8*r;break}return S}function vb(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s=D.sanitize(s);var n=i.eol,e=i.textPath,t=i.textVerticalAnchor,r=t==="middle"||t==="bottom"||t==="top",o=i.x;o===void 0&&(o=a.getAttribute("x")||0);var c=i.includeAnnotationIndices,p=i.annotations;p&&!Array.isArray(p)&&(p=[p]);var y=i.lineHeight,C=y==="auto",S=C?"1.5em":y||"1em";zm(a),cl(a,{"xml:space":"preserve",display:s||i.displayEmpty?null:"none"});var I=cl(a,"font-size"),W=parseFloat(I);W||(W=16,(r||p)&&!I&&cl(a,"font-size","".concat(W)));var q;e?(typeof e=="string"&&(e={d:e}),q=cC(e,a)):q=document.createDocumentFragment();for(var ie,ve=0,Le,Oe=s.split(`
`),it=[],at=Oe.length-1,Qe=0;Qe<=at;Qe+=1){ie=S;var qt="v-line",Kt=yf("tspan"),Tn=void 0,Bn=Oe[Qe];if(Bn)if(p){var tr=D.annotate(Bn,p,{offset:-ve,includeAnnotationIndices:c});Tn=dC(Kt,tr,{eol:Qe!==at&&n,baseSize:W,lineHeight:C?null:S,includeAnnotationIndices:c});var hr=Tn.lineHeight;hr&&C&&Qe!==0&&(ie=hr),Qe===0&&(Le=Tn.maxFontSize*.8)}else n&&Qe!==at&&(Bn+=n),Kt.textContent=Bn;else{Kt.textContent="-",qt+=" v-empty-line";var Lr=Kt.style;Lr.fillOpacity=0,Lr.strokeOpacity=0,p&&(Tn={})}Tn&&it.push(Tn),Qe>0&&Kt.setAttribute("dy",ie),(Qe>0||e)&&Kt.setAttribute("x",o),Kt.className.baseVal=qt,q.appendChild(Kt),ve+=Bn.length+1}if(r)if(p)ie=fC(t,it,W,S);else if(t==="top")ie="0.8em";else{var Vr;at>0?(Vr=parseFloat(S)||1,Vr*=at,pb.test(S)||(Vr/=W)):Vr=0;switch(t){case"middle":ie="".concat(.3-Vr/2,"em");break;case"bottom":ie="".concat(-Vr-.3,"em");break;default:break}}else t===0?ie="0em":t?ie=t:(ie=0,a.getAttribute("y")==null&&a.setAttribute("y","".concat(Le||"0.8em")));var dn=q.firstChild;dn.setAttribute("dy",ie),a.appendChild(q)}function hC(a,s,i,n){var e=[],t=[];if(s!=null){var r=a.split(s);if(e.push.apply(e,Object(Ca.a)(r)),typeof s=="string")for(var o=0,c=r.length-1;o<c;o+=1)t.push(s);else for(var p=a.match(new RegExp(s,"g")),y=0,C=r.length-1;y<C;y+=1)t.push(p?p[y]:"")}else{for(var S="",I=0,W=a.length;I<W;I+=1){var q=a[I];q===" "?(e.push(S),t.push(" "),S=""):q.match(/[^\x00-\xff]/)?(S.length&&(e.push(S),t.push("")),e.push(q),t.push(""),S=""):S+=q}S.length&&e.push(S)}for(var ie=0;ie<e.length;ie+=1){var ve=e[ie];if(ve.indexOf(i)>=0&&ve.length>1){for(var Le=ve.split(i),Oe=0,it=Le.length-1;Oe<it;Oe+=1)Le.splice(2*Oe+1,0,i);var at=Le.filter(function(Bn){return Bn!==""});e.splice.apply(e,[ie,1].concat(Object(Ca.a)(at)));var Qe=at.map(function(){return""});Qe.pop(),t.splice.apply(t,[ie,0].concat(Object(Ca.a)(Qe)))}}for(var qt=0;qt<e.length;qt+=1){var Kt=e[qt],Tn=Kt.search(n);Tn>0&&Tn<Kt.length-1&&(e.splice(qt,1,Kt.substring(0,Tn+1),Kt.substring(Tn+1)),t.splice(qt,0,""))}return{words:e,separators:t}}function pC(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=s.width,t=s.height,r=n.svgDocument||yf("svg"),o=yf("text"),c=yf("tspan"),p=document.createTextNode("");cl(o,i),o.appendChild(c),o.style.opacity="0",o.style.display="block",c.style.display="block",c.appendChild(p),r.appendChild(o);var y=r.parentNode==null;y&&document.body.appendChild(r);for(var C=n.eol||`
`,S=n.separator||" ",I=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,W=n.breakWord!==!1,q=[],ie={},ve=[],Le,Oe,it,at=hC(a,n.separator,C,I),Qe=at.words,qt=at.separators,Kt=0,Tn=0,Bn=Qe.length;Kt<Bn;Kt+=1){var tr=Qe[Kt];if(!tr)continue;if(tr===C){q[Tn]=!0,Tn+=1,ve[Tn]="";continue}if(ve[Tn]!=null?(it=qt[Kt-1]||"",p.data="".concat(ve[Tn]).concat(it).concat(tr)):p.data=tr,c.getComputedTextLength()<=e)ve[Tn]=p.data,ie[Tn]=qt[Kt],Le&&(q[Tn]=!0,Tn+=1,Le=0);else{if(W){if(!ve[Tn]||Le){var hr=!!Le,Lr=tr.length===1;if(Le=tr.length-1,hr||Lr){if(Lr){if(!ve[Tn]){ve=[];break}Qe.splice(Kt,2,tr+Qe[Kt+1]),qt.splice(Kt+1,1),q[Tn]=!0,Tn+=1,Bn-=1,Kt-=1;continue}Qe[Kt]=tr.substring(0,Le),Qe[Kt+1]=tr.substring(Le)+Qe[Kt+1]}else Qe.splice(Kt,1,tr.substring(0,Le),tr.substring(Le)),qt.splice(Kt,0,""),Bn+=1,Tn&&!q[Tn-1]&&(Tn-=1);Kt-=1;continue}}else if(!ve[Tn]){ve[Tn]=tr,q[Tn]=!0,Tn+=1;continue}Tn+=1,Kt-=1}if(t!=null){if(Oe==null){var Vr=void 0;i.lineHeight==="auto"?Vr={value:1.5,unit:"em"}:Vr=T.parseCssNumeric(i.lineHeight,["em"])||{value:1,unit:"em"},Oe=Vr.value,Vr.unit==="em"&&(Ue.IS_FIREFOX?Oe*=c.getBBox().height:Oe*=o.getBBox().height)}if(Oe*ve.length>t){var dn=Math.floor(t/Oe)-1,Xn=ve[dn],ra=ve[dn+1];if(ve.splice(dn+1),Xn==null)break;var Ea=n.ellipsis;if(!Ea)break;typeof Ea!="string"&&(Ea="\u2026");var ja=Xn;ra&&W&&(ja+=it+ra);var li=ja.length,Si=void 0,Di=void 0;do{if(Di=ja[li],Si=ja.substring(0,li),Di?Di.match(S)&&(Si+=Di):Si+=ie[dn],Si+=Ea,p.data=Si,c.getComputedTextLength()<=e){ve[dn]=Si;break}li-=1}while(li>=0);break}}}return Tv(y?r:o),ve.join(C)}var Iv=.551784;function dl(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,n=a.getAttribute(s);if(n==null)return i;var e=parseFloat(n);return Number.isNaN(e)?i:e}function qm(a){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=a.getTotalLength(),n=[],e=0,t;e<i;)t=a.getPointAtLength(e),n.push({distance:e,x:t.x,y:t.y}),e+=s;return n}function mb(a){return["M",dl(a,"x1"),dl(a,"y1"),"L",dl(a,"x2"),dl(a,"y2")].join(" ")}function gb(a){var s=Vp(a);return s.length===0?null:"".concat(bb(s)," Z")}function yb(a){var s=Vp(a);return s.length===0?null:bb(s)}function bb(a){var s=a.map(function(i){return"".concat(i.x," ").concat(i.y)});return"M ".concat(s.join(" L"))}function Vp(a){var s=[],i=a.points;if(i)for(var n=0,e=i.numberOfItems;n<e;n+=1)s.push(i.getItem(n));return s}function Eb(a){var s=dl(a,"cx",0),i=dl(a,"cy",0),n=dl(a,"r"),e=n*Iv;return["M",s,i-n,"C",s+e,i-n,s+n,i-e,s+n,i,"C",s+n,i+e,s+e,i+n,s,i+n,"C",s-e,i+n,s-n,i+e,s-n,i,"C",s-n,i-e,s-e,i-n,s,i-n,"Z"].join(" ")}function xb(a){var s=dl(a,"cx",0),i=dl(a,"cy",0),n=dl(a,"rx"),e=dl(a,"ry")||n,t=n*Iv,r=e*Iv,o=["M",s,i-e,"C",s+t,i-e,s+n,i-r,s+n,i,"C",s+n,i+r,s+t,i+e,s,i+e,"C",s-t,i+e,s-n,i+r,s-n,i,"C",s-n,i-r,s-t,i-e,s,i-e,"Z"].join(" ");return o}function wb(a){return Cb({x:dl(a,"x",0),y:dl(a,"y",0),width:dl(a,"width",0),height:dl(a,"height",0),rx:dl(a,"rx",0),ry:dl(a,"ry",0)})}function Cb(a){var s,i=a.x,n=a.y,e=a.width,t=a.height,r=Math.min(a.rx||a["top-rx"]||0,e/2),o=Math.min(a.rx||a["bottom-rx"]||0,e/2),c=Math.min(a.ry||a["top-ry"]||0,t/2),p=Math.min(a.ry||a["bottom-ry"]||0,t/2);return r||o||c||p?s=["M",i,n+c,"v",t-c-p,"a",o,p,0,0,0,o,p,"h",e-2*o,"a",o,p,0,0,0,o,-p,"v",-(t-p-c),"a",r,c,0,0,0,-r,-c,"h",-(e-2*r),"a",r,c,0,0,0,-r,c,"Z"]:s=["M",i,n,"H",i+e,"V",n+t,"H",i,"V",n,"Z"],s.join(" ")}function eg(a){var s=yf("path");cl(s,cl(a));var i=tg(a);return i&&s.setAttribute("d",i),s}function tg(a){var s=a.tagName.toLowerCase();switch(s){case"path":return a.getAttribute("d");case"line":return mb(a);case"polygon":return gb(a);case"polyline":return yb(a);case"ellipse":return xb(a);case"circle":return Eb(a);case"rect":return wb(a);default:break}throw new Error('"'.concat(s,'" cannot be converted to svg path element.'))}function vC(a,s,i,n){var e=2*Math.PI-1e-6,t=a,r=s,o=i,c=n;if(c<o){var p=o;o=c,c=p}var y=c-o,C=y<Math.PI?"0":"1",S=Math.cos(o),I=Math.sin(o),W=Math.cos(c),q=Math.sin(c);return y>=e?t?"M0,".concat(r,"A").concat(r,",").concat(r," 0 1,1 0,").concat(-r,"A").concat(r,",").concat(r," 0 1,1 0,").concat(r,"M0,").concat(t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(-t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(t,"Z"):"M0,".concat(r,"A").concat(r,",").concat(r," 0 1,1 0,").concat(-r,"A").concat(r,",").concat(r," 0 1,1 0,").concat(r,"Z"):t?"M".concat(r*S,",").concat(r*I,"A").concat(r,",").concat(r," 0 ").concat(C,",1 ").concat(r*W,",").concat(r*q,"L").concat(t*W,",").concat(t*q,"A").concat(t,",").concat(t," 0 ").concat(C,",0 ").concat(t*S,",").concat(t*I,"Z"):"M".concat(r*S,",").concat(r*I,"A").concat(r,",").concat(r," 0 ").concat(C,",1 ").concat(r*W,",").concat(r*q,"L0,0")+"Z"}var zp=yf("svg"),mC=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,Tb=/[ ,]+/,gC=/^(\w+)\((.*)\)/;function ng(a,s){var i=zp.createSVGPoint();return i.x=a,i.y=s,i}function fp(a){var s=zp.createSVGMatrix();if(a!=null){var i=a,n=s;for(var e in i)n[e]=i[e]}return s}function hp(a){return a!=null?(a instanceof DOMMatrix||(a=fp(a)),zp.createSVGTransformFromMatrix(a)):zp.createSVGTransform()}function Lv(a){var s=fp(),i=a!=null&&a.match(mC);if(!i)return s;for(var n=0,e=i.length;n<e;n+=1){var t=i[n],r=t.match(gC);if(r){var o=void 0,c=void 0,p=void 0,y=void 0,C=void 0,S=fp(),I=r[2].split(Tb);switch(r[1].toLowerCase()){case"scale":o=parseFloat(I[0]),c=I[1]===void 0?o:parseFloat(I[1]),S=S.scaleNonUniform(o,c);break;case"translate":p=parseFloat(I[0]),y=parseFloat(I[1]),S=S.translate(p,y);break;case"rotate":C=parseFloat(I[0]),p=parseFloat(I[1])||0,y=parseFloat(I[2])||0,p!==0||y!==0?S=S.translate(p,y).rotate(C).translate(-p,-y):S=S.rotate(C);break;case"skewx":C=parseFloat(I[0]),S=S.skewX(C);break;case"skewy":C=parseFloat(I[0]),S=S.skewY(C);break;case"matrix":S.a=parseFloat(I[0]),S.b=parseFloat(I[1]),S.c=parseFloat(I[2]),S.d=parseFloat(I[3]),S.e=parseFloat(I[4]),S.f=parseFloat(I[5]);break;default:continue}s=s.multiply(S)}}return s}function rg(a){var s=a||{},i=s.a!=null?s.a:1,n=s.b!=null?s.b:0,e=s.c!=null?s.c:0,t=s.d!=null?s.d:1,r=s.e!=null?s.e:0,o=s.f!=null?s.f:0;return"matrix(".concat(i,",").concat(n,",").concat(e,",").concat(t,",").concat(r,",").concat(o,")")}function jv(a){var s,i,n;if(a){var e=Tb;if(a.trim().indexOf("matrix")>=0){var t=Lv(a),r=ig(t);s=[r.translateX,r.translateY],i=[r.rotation],n=[r.scaleX,r.scaleY];var o=[];(s[0]!==0||s[1]!==0)&&o.push("translate(".concat(s.join(","),")")),(n[0]!==1||n[1]!==1)&&o.push("scale(".concat(n.join(","),")")),i[0]!==0&&o.push("rotate(".concat(i[0],")")),a=o.join(" ")}else{var c=a.match(/translate\((.*?)\)/);c&&(s=c[1].split(e));var p=a.match(/rotate\((.*?)\)/);p&&(i=p[1].split(e));var y=a.match(/scale\((.*?)\)/);y&&(n=y[1].split(e))}}var C=n&&n[0]?parseFloat(n[0]):1;return{raw:a||"",translation:{tx:s&&s[0]?parseInt(s[0],10):0,ty:s&&s[1]?parseInt(s[1],10):0},rotation:{angle:i&&i[0]?parseInt(i[0],10):0,cx:i&&i[1]?parseInt(i[1],10):void 0,cy:i&&i[2]?parseInt(i[2],10):void 0},scale:{sx:C,sy:n&&n[1]?parseFloat(n[1]):C}}}function ag(a,s){var i=s.x*a.a+s.y*a.c+0,n=s.x*a.b+s.y*a.d+0;return{x:i,y:n}}function ig(a){var s=ag(a,{x:0,y:1}),i=ag(a,{x:1,y:0}),n=180/Math.PI*Math.atan2(s.y,s.x)-90,e=180/Math.PI*Math.atan2(i.y,i.x);return{skewX:n,skewY:e,translateX:a.e,translateY:a.f,scaleX:Math.sqrt(a.a*a.a+a.b*a.b),scaleY:Math.sqrt(a.c*a.c+a.d*a.d),rotation:n}}function yC(a){var s,i,n,e;return a?(s=a.a==null?1:a.a,e=a.d==null?1:a.d,i=a.b,n=a.c):s=e=1,{sx:i?Math.sqrt(s*s+i*i):s,sy:n?Math.sqrt(n*n+e*e):e}}function bC(a){var s={x:0,y:1};return a&&(s=ag(a,s)),{angle:Pi.normalize(Pi.toDeg(Math.atan2(s.y,s.x))-90)}}function EC(a){return{tx:a&&a.e||0,ty:a&&a.f||0}}function Uv(a,s){var i=ng(a.x,a.y).matrixTransform(s);return new Bt(i.x,i.y)}function xC(a,s){return new Ba(Uv(a.start,s),Uv(a.end,s))}function wC(a,s){var i=a instanceof kl?a.points:a;return Array.isArray(i)||(i=[]),new kl(i.map(function(n){return Uv(n,s)}))}function Fv(a,s){var i=zp.createSVGPoint();i.x=a.x,i.y=a.y;var n=i.matrixTransform(s);i.x=a.x+a.width,i.y=a.y;var e=i.matrixTransform(s);i.x=a.x+a.width,i.y=a.y+a.height;var t=i.matrixTransform(s);i.x=a.x,i.y=a.y+a.height;var r=i.matrixTransform(s),o=Math.min(n.x,e.x,t.x,r.x),c=Math.max(n.x,e.x,t.x,r.x),p=Math.min(n.y,e.y,t.y,r.y),y=Math.max(n.y,e.y,t.y,r.y);return new qr(o,p,c-o,y-p)}var CC=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i};function Ab(a,s,i){var n,e=a.ownerSVGElement;if(!e)return new qr(0,0,0,0);try{n=a.getBBox()}catch(r){n={x:a.clientLeft,y:a.clientTop,width:a.clientWidth,height:a.clientHeight}}if(s)return qr.create(n);var t=wh(a,i||e);return Fv(n,t)}function xh(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,n=a.ownerSVGElement;if(!n||!cp(a)){if(tb(a)){var e=Rb(a),t=e.left,r=e.top,o=e.width,c=e.height;return new qr(t,r,o,c)}return new qr(0,0,0,0)}var p=s.target,y=s.recursive;if(!y){try{i=a.getBBox()}catch(ve){i={x:a.clientLeft,y:a.clientTop,width:a.clientWidth,height:a.clientHeight}}if(!p)return qr.create(i);var C=wh(a,p);return Fv(i,C)}{var S=a.childNodes,I=S.length;if(I===0)return xh(a,{target:p});p||(p=a);for(var W=0;W<I;W+=1){var q=S[W],ie=void 0;q.childNodes.length===0?ie=xh(q,{target:p}):ie=xh(q,{target:p,recursive:!0}),i?i=i.union(ie):i=ie}return i}}function TC(a){for(var s=a,i=s?s.tagName.toLowerCase():"";i==="g";)s=s.firstElementChild,i=s?s.tagName.toLowerCase():"";var n=function(o){var c=s.getAttribute(o),p=c?parseFloat(c):0;return Number.isNaN(p)?0:p},e,t;switch(i){case"rect":t=new qr(n("x"),n("y"),n("width"),n("height"));break;case"circle":e=n("r"),t=new qr(n("cx")-e,n("cy")-e,2*e,2*e);break;default:break}return t}function AC(a,s){var i=fp();if(cp(s)&&cp(a)){for(var n=a,e=[];n&&n!==s;){var t=n.getAttribute("transform")||null,r=Lv(t);e.push(r),n=n.parentNode}e.reverse().forEach(function(o){i=i.multiply(o)})}return i}function wh(a,s){if(cp(s)&&cp(a)){var i=s.getScreenCTM(),n=a.getScreenCTM();if(i&&n)return i.inverse().multiply(n)}return fp()}function Ob(a,s,i){var n=a instanceof SVGSVGElement?a:a.ownerSVGElement,e=n.createSVGPoint();e.x=s,e.y=i;try{var t=n.getScreenCTM(),r=e.matrixTransform(t.inverse()),o=wh(a,n).inverse();return r.matrixTransform(o)}catch(c){return e}}function Sb(a){var s=function(r){var o=a.getAttribute(r),c=o?parseFloat(o):0;return Number.isNaN(c)?0:c};switch(a instanceof SVGElement&&a.nodeName.toLowerCase()){case"rect":return new qr(s("x"),s("y"),s("width"),s("height"));case"circle":return new Eh(s("cx"),s("cy"),s("r"),s("r"));case"ellipse":return new Eh(s("cx"),s("cy"),s("rx"),s("ry"));case"polyline":{var i=Vp(a);return new kl(i)}case"polygon":{var n=Vp(a);return n.length>1&&n.push(n[0]),new kl(n)}case"path":{var e=a.getAttribute("d");return Ii.isValid(e)||(e=Ii.normalize(e)),Ii.parse(e)}case"line":return new Ba(s("x1"),s("y1"),s("x2"),s("y2"));default:break}return xh(a)}function OC(a,s,i){var n=a instanceof SVGSVGElement?a:a.ownerSVGElement;i=i||n;var e=xh(i),t=e.getCenter();if(!e.intersectsWithLineFromCenterToPoint(s))return null;var r=null,o=a.tagName.toLowerCase();if(o==="rect"){var c=new qr(parseFloat(a.getAttribute("x")||"0"),parseFloat(a.getAttribute("y")||"0"),parseFloat(a.getAttribute("width")||"0"),parseFloat(a.getAttribute("height")||"0")),p=wh(a,i),y=ig(p),C=n.createSVGTransform();C.setRotate(-y.rotation,t.x,t.y);var S=Fv(c,C.matrix.multiply(p));r=qr.create(S).intersectsWithLineFromCenterToPoint(s,y.rotation)}else if(o==="path"||o==="polygon"||o==="polyline"||o==="circle"||o==="ellipse"){for(var I=o==="path"?a:eg(a),W=qm(I),q=Infinity,ie=[],ve=0,Le=W.length;ve<Le;ve+=1){var Oe=W[ve],it=ng(Oe.x,Oe.y);it=it.matrixTransform(wh(a,i));var at=Bt.create(it),Qe=at.distance(t),qt=at.distance(s)*1.1,Kt=Qe+qt;Kt<q?(q=Kt,ie=[{sample:Oe,refDistance:qt}]):Kt<q+1&&ie.push({sample:Oe,refDistance:qt})}ie.sort(function(Tn,Bn){return Tn.refDistance-Bn.refDistance}),ie[0]&&(r=Bt.create(ie[0].sample))}return r}function Db(a,s){return _b(a,s,"animate")}function Mb(a,s){return _b(a,s,"animateTransform")}function _b(a,s,i){var n=yf(i);a.appendChild(n);try{return kb(n,s)}catch(e){}return function(){}}function kb(a,s){var i=s.start,n=s.complete,e=s.repeat,t=CC(s,["start","complete","repeat"]);cl(a,t),i&&a.addEventListener("beginEvent",i),n&&a.addEventListener("endEvent",n),e&&a.addEventListener("repeatEvent",e);var r=a;return r.beginElement(),function(){return r.endElement()}}function Nb(a,s,i){var n=Xy(i),e=yf("animateMotion"),t=yf("mpath");cl(t,{"xlink:href":"#".concat(n)}),e.appendChild(t),a.appendChild(e);try{return kb(e,s)}catch(W){if(document.documentElement.getAttribute("smiling")==="fake"){var r=e;r.animators=[];var o=window,c=r.getAttribute("id");c&&(o.id2anim[c]=r);for(var p=o.getTargets(r),y=0,C=p.length;y<C;y+=1){var S=p[y],I=new o.Animator(r,S,y);o.animators.push(I),r.animators[y]=I,I.register()}}}return function(){}}function Rb(a){var s=0,i=0,n=0,e=0;if(a){for(var t=a;t;)s+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent,t&&(s+=parseInt(Sv(t,"borderLeft"),10),i+=parseInt(Sv(t,"borderTop"),10));n=a.offsetWidth,e=a.offsetHeight}return{left:s,top:i,width:n,height:e}}function og(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(s==null)return Lv(cl(a,"transform"));if(i.absolute){a.setAttribute("transform",rg(s));return}var n=a.transform,e=hp(s);n.baseVal.appendItem(e)}function sg(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=cl(a,"transform"),t=jv(e);if(s==null)return t.translation;e=t.raw,e=e.replace(/translate\([^)]*\)/g,"").trim();var r=n.absolute?s:t.translation.tx+s,o=n.absolute?i:t.translation.ty+i,c="translate(".concat(r,",").concat(o,")");a.setAttribute("transform","".concat(c," ").concat(e).trim())}function ug(a,s,i,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=cl(a,"transform"),r=jv(t);if(s==null)return r.rotation;t=r.raw,t=t.replace(/rotate\([^)]*\)/g,"").trim(),s%=360;var o=e.absolute?s:r.rotation.angle+s,c=i!=null&&n!=null?",".concat(i,",").concat(n):"",p="rotate(".concat(o).concat(c,")");a.setAttribute("transform","".concat(t," ").concat(p).trim())}function Bv(a,s,i){var n=cl(a,"transform"),e=jv(n);if(s==null)return e.scale;i=i??s,n=e.raw,n=n.replace(/scale\([^)]*\)/g,"").trim();var t="scale(".concat(s,",").concat(i,")");a.setAttribute("transform","".concat(n," ").concat(t).trim())}function Pb(a,s,i,n){var e=Bt.create(s),t=Bt.create(i);if(!n){var r=a instanceof SVGSVGElement?a:a.ownerSVGElement;n=r}var o=Bv(a);a.setAttribute("transform","");var c=xh(a,{target:n}).scale(o.sx,o.sy),p=hp();p.setTranslate(-c.x-c.width/2,-c.y-c.height/2);var y=hp(),C=e.angleBetween(t,e.clone().translate(1,0));C&&y.setRotate(C,0,0);var S=hp(),I=e.clone().move(t,c.width/2);S.setTranslate(2*e.x-I.x,2*e.y-I.y);var W=wh(a,n),q=hp();q.setMatrix(S.matrix.multiply(y.matrix.multiply(p.matrix.multiply(W.scale(o.sx,o.sy))))),a.setAttribute("transform",rg(q.matrix))}var SC=function(){function a(s,i,n){Object(_r.a)(this,a),this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Ue.isEventSupported("wheel")?"wheel":"mousewheel",this.target=s,this.onWheelCallback=i,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}return Object(Br.a)(a,[{key:"enable",value:function(){Ue.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):k()(this.target).on("mousewheel",this.onWheel)}},{key:"disable",value:function(){Ue.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):k()(this.target).off("mousewheel")}},{key:"onWheel",value:function(i){var n=this;if(this.onWheelGuard!=null&&!this.onWheelGuard(i))return;this.deltaX+=i.deltaX,this.deltaY+=i.deltaY,i.preventDefault();var e;(this.deltaX!==0||this.deltaY!==0)&&(i.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(function(){n.didWheel(i)}))}},{key:"didWheel",value:function(i){this.animationFrameId=0,this.onWheelCallback(i,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}]),a}(),DC=pi.isVector,MC=pi.create,_C=pi.createVectors;function Ib(a){var s=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n&&clearTimeout(n),n=window.setTimeout(function(){a.apply(s,t)},i)}}function kC(a){var s=null,i=[],n=function(){if(getComputedStyle(a).position==="static"){var p=a.style;p.position="relative"}var y=document.createElement("object");return y.onload=function(){y.contentDocument.defaultView.addEventListener("resize",e),e()},y.style.display="block",y.style.position="absolute",y.style.top="0",y.style.left="0",y.style.height="100%",y.style.width="100%",y.style.overflow="hidden",y.style.pointerEvents="none",y.style.zIndex="-1",y.style.opacity="0",y.setAttribute("tabindex","-1"),y.type="text/html",a.appendChild(y),y.data="about:blank",y},e=Ib(function(){i.forEach(function(c){return c(a)})}),t=function(p){s||(s=n()),i.indexOf(p)===-1&&i.push(p)},r=function(){s&&s.parentNode&&(s.contentDocument&&s.contentDocument.defaultView.removeEventListener("resize",e),s.parentNode.removeChild(s),s=null,i=[])},o=function(p){var y=i.indexOf(p);y!==-1&&i.splice(y,1),i.length===0&&s&&r()};return{element:a,bind:t,destroy:r,unbind:o}}function NC(a){var s=null,i=[],n=Ib(function(){i.forEach(function(c){c(a)})}),e=function(){var p=new ResizeObserver(n);return p.observe(a),n(),p},t=function(p){s||(s=e()),i.indexOf(p)===-1&&i.push(p)},r=function(){s&&(s.disconnect(),i=[],s=null)},o=function(p){var y=i.indexOf(p);y!==-1&&i.splice(y,1),i.length===0&&s&&r()};return{element:a,bind:t,destroy:r,unbind:o}}var RC=typeof ResizeObserver!="undefined"?NC:kC,Vv;(function(a){var s=new WeakMap;function i(e){var t=s.get(e);return t||(t=RC(e),s.set(e,t),t)}function n(e){e.destroy(),s.delete(e.element)}a.bind=function(e,t){var r=i(e);return r.bind(t),function(){return r.unbind(t)}},a.clear=function(e){var t=i(e);n(t)}})(Vv||(Vv={}));var lg;(function(a){var s=[],i=1e3/60,n=[],e=0,t=function(){return performance.now()},r=function(C){return C[0]},o=function(C){return n.push(C)===1&&c()},c=function(){var y=function(){return n.splice(0,n.length).forEach(function(q){return q()})};if(typeof MessageChannel!="undefined"){var C=new MessageChannel,S=C.port1,I=C.port2;return S.onmessage=y,function(){return I.postMessage(null)}}return function(){return setTimeout(y)}}(),p=function y(){e=t()+i;for(var C=r(s);C&&!a.shouldYield();){var S=C,I=S.callback,W=S.data;C.callback=null;var q=I&&I(W);q?C.callback=q:s.shift(),C=r(s)}C&&o(y)};a.scheduleTask=function(y,C){var S={callback:y,data:C};s.push(S),o(p)},a.shouldYield=function(){var y,C;return((C=(y=navigator)===null||y===void 0?void 0:y.scheduling)===null||C===void 0?void 0:C.isInputPending())||t()>=e}})(lg||(lg={}));var ui=u(17);function PC(a,s){for(;!Object.prototype.hasOwnProperty.call(a,s)&&!(a=Object(ui.a)(a),a===null););return a}function ni(a,s,i){return typeof Reflect!="undefined"&&Reflect.get?ni=Reflect.get:ni=function(e,t,r){var o=PC(e,t);if(!o)return;var c=Object.getOwnPropertyDescriptor(o,t);return c.get?c.get.call(r):c.value},ni(a,s,i||a)}var Os=function(){function a(s){Object(_r.a)(this,a),this.options=Object.assign({},s),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object(Br.a)(a,[{key:"names",get:function(){return Object.keys(this.data)}},{key:"register",value:function(i,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof i=="object"){Object.keys(i).forEach(function(c){e.register(c,i[c],n)});return}this.exist(i)&&!t&&!Ue.isApplyingHMR()&&this.onDuplicated(i);var r=this.options.process,o=r?w.call(r,this,i,n):n;return this.data[i]=o,o}},{key:"unregister",value:function(i){var n=i?this.data[i]:null;return delete this.data[i],n}},{key:"get",value:function(i){return i?this.data[i]:null}},{key:"exist",value:function(i){return i?this.data[i]!=null:!1}},{key:"onDuplicated",value:function(i){try{throw this.options.onConflict&&w.call(this.options.onConflict,this,i),new Error("".concat(E.upperFirst(this.options.type)," with name '").concat(i,"' already registered."))}catch(n){throw n}}},{key:"onNotFound",value:function(i,n){throw new Error(this.getSpellingSuggestion(i,n))}},{key:"getSpellingSuggestion",value:function(i,n){var e=this.getSpellingSuggestionForName(i),t=n?"".concat(n," ").concat(E.lowerFirst(this.options.type)):this.options.type;return"".concat(E.upperFirst(t)," with name '").concat(i,"' does not exist.").concat(e?" Did you mean '".concat(e,"'?"):"")}},{key:"getSpellingSuggestionForName",value:function(i){return E.getSpellingSuggestion(i,Object.keys(this.data),function(n){return n})}}]),a}();(function(a){function s(i){return new a(i)}a.create=s})(Os||(Os={}));var IC={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},LC={},Lb={position:zv("x","width","origin")},jb={position:zv("y","height","origin")},jC={position:zv("x","width","corner")},UC={position:zv("y","height","corner")},Ub={set:Ch("width","width")},Fb={set:Ch("height","height")},FC={set:Ch("rx","width")},BC={set:Ch("ry","height")},Bb={set:function(a){var s=Ch(a,"width"),i=Ch(a,"height");return function(n,e){var t=e.refBBox,r=t.height>t.width?s:i;return w.call(r,this,n,e)}}("r")},VC={set:function(s,i){var n=i.refBBox,e=parseFloat(s),t=T.isPercentage(s);t&&(e/=100);var r=Math.sqrt(n.height*n.height+n.width*n.width),o;return Number.isFinite(e)&&(t||e>=0&&e<=1?o=e*r:o=Math.max(e+r,0)),{r:o}}},zC={set:Ch("cx","width")},GC={set:Ch("cy","height")},Vb={set:Xb({resetOffset:!0})},XC={set:Xb({resetOffset:!1})},zb={set:Wb({resetOffset:!0})},WC={set:Wb({resetOffset:!1})},HC=Bb,KC=Vb,$C=zb,YC=Lb,QC=jb,JC=Ub,ZC=Fb;function zv(a,s,i){return function(n,e){var t=e.refBBox;if(n==null)return null;var r=parseFloat(n),o=T.isPercentage(n);o&&(r/=100);var c;if(Number.isFinite(r)){var p=t[i];o||r>0&&r<1?c=p[a]+t[s]*r:c=p[a]+r}var y=new Bt;return y[a]=c||0,y}}function Ch(a,s){return function(i,n){var e=n.refBBox,t=parseFloat(i),r=T.isPercentage(i);r&&(t/=100);var o={};if(Number.isFinite(t)){var c=r||t>=0&&t<=1?t*e[s]:Math.max(t+e[s],0);o[a]=c}return o}}function Gb(a,s){var i="x6-shape",n=s&&s.resetOffset;return function(e,t){var r=t.view,o=t.elem,c=t.refBBox,p=r.$(o),y=p.data(i);if(!y||y.value!==e){var C=a(e);y={value:e,shape:C,shapeBBox:C.bbox()},p.data(i,y)}var S=y.shape.clone(),I=y.shapeBBox.clone(),W=I.getOrigin(),q=c.getOrigin();I.x=q.x,I.y=q.y;var ie=c.getMaxScaleToFit(I,q),ve=I.width===0||c.width===0?1:ie.sx,Le=I.height===0||c.height===0?1:ie.sy;return S.scale(ve,Le,W),n&&S.translate(-W.x,-W.y),S}}function Xb(a){function s(n){return Ii.parse(n)}var i=Gb(s,a);return function(n,e){var t=i(n,e);return{d:t.serialize()}}}function Wb(a){var s=Gb(function(i){return new kl(i)},a);return function(i,n){var e=s(i,n);return{points:e.serialize()}}}var qC={qualify:f.isPlainObject,set:function(s,i){var n=i.view;return"url(#".concat(n.graph.defineGradient(s),")")}},eT={qualify:f.isPlainObject,set:function(s,i){var n=i.view,e=n.cell,t=Object.assign({},s);if(e.isEdge()&&t.type==="linearGradient"){var r=n,o=r.sourcePoint,c=r.targetPoint;t.id="gradient-".concat(t.type,"-").concat(e.id),t.attrs=Object.assign(Object.assign({},t.attrs),{x1:o.x,y1:o.y,x2:c.x,y2:c.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(t.id)}return"url(#".concat(n.graph.defineGradient(t),")")}},Hb={qualify:function(s,i){var n=i.attrs;return n.textWrap==null||!f.isPlainObject(n.textWrap)},set:function(s,i){var n=i.view,e=i.elem,t=i.attrs,r="x6-text",o=n.$(e),c=o.data(r),p=function(ve){try{return JSON.parse(ve)}catch(Le){return ve}},y={x:t.x,eol:t.eol,annotations:p(t.annotations),textPath:p(t["text-path"]||t.textPath),textVerticalAnchor:t["text-vertical-anchor"]||t.textVerticalAnchor,displayEmpty:(t["display-empty"]||t.displayEmpty)==="true",lineHeight:t["line-height"]||t.lineHeight},C=t["font-size"]||t.fontSize,S=JSON.stringify([s,y]);if(C&&e.setAttribute("font-size",C),c==null||c!==S){var I=y.textPath;if(I!=null&&typeof I=="object"){var W=I.selector;if(typeof W=="string"){var q=n.find(W)[0];q instanceof SVGPathElement&&(O.ensureId(q),y.textPath=Object.assign({"xlink:href":"#".concat(q.id)},I))}}O.text(e,"".concat(s),y),o.data(r,S)}}},tT={qualify:f.isPlainObject,set:function(s,i){var n=i.view,e=i.elem,t=i.attrs,r=i.refBBox,o=s,c=o.width||0;T.isPercentage(c)?r.width*=parseFloat(c)/100:c<=0?r.width+=c:r.width=c;var p=o.height||0;T.isPercentage(p)?r.height*=parseFloat(p)/100:p<=0?r.height+=p:r.height=p;var y,C=o.text;C==null&&(C=t.text),C!=null?y=O.breakText("".concat(C),r,{"font-weight":t["font-weight"]||t.fontWeight,"font-size":t["font-size"]||t.fontSize,"font-family":t["font-family"]||t.fontFamily,lineHeight:t.lineHeight},{svgDocument:n.graph.view.svg,ellipsis:o.ellipsis,hyphen:o.hyphen,breakWord:o.breakWord}):y="",w.call(Hb.set,this,y,{view:n,elem:e,attrs:t,refBBox:r,cell:n.cell})}},pp=function(s,i){var n=i.attrs;return n.text!==void 0},nT={qualify:pp},rT={qualify:pp},aT={qualify:pp},iT={qualify:pp},oT={qualify:pp},sT={qualify:pp},uT={qualify:function(s,i){var n=i.elem;return n instanceof SVGElement},set:function(s,i){var n=i.view,e=i.elem,t="x6-title",r="".concat(s),o=n.$(e),c=o.data(t);if(c==null||c!==r){o.data(t,r);var p=e.firstChild;if(p&&p.tagName.toUpperCase()==="TITLE"){var y=p;y.textContent=r}else{var C=document.createElementNS(e.namespaceURI,"title");C.textContent=r,e.insertBefore(C,p)}}}},lT={offset:Kb("x","width","right")},cT={offset:Kb("y","height","bottom")},dT={offset:function(s,i){var n=i.refBBox;return s?{x:-n.x,y:-n.y}:{x:0,y:0}}};function Kb(a,s,i){return function(n,e){var t=e.refBBox,r=new Bt,o;return n==="middle"?o=t[s]/2:n===i?o=t[s]:typeof n=="number"&&Number.isFinite(n)?o=n>-1&&n<1?-t[s]*n:-n:T.isPercentage(n)?o=t[s]*parseFloat(n)/100:o=0,r[a]=-(t[a]+o),r}}var fT={qualify:f.isPlainObject,set:function(s,i){var n=i.view,e=i.elem;n.$(e).css(s)}},hT={set:function(s,i){var n=i.view,e=i.elem;n.$(e).html("".concat(s))}},pT={qualify:f.isPlainObject,set:function(s,i){var n=i.view;return"url(#".concat(n.graph.defineFilter(s),")")}},vT={set:function(s){return s!=null&&typeof s=="object"&&s.id?s.id:s}};function Th(a,s,i){var n,e;typeof s=="object"?(n=s.x,e=s.y):(n=s,e=i);var t=Ii.parse(a),r=t.bbox();if(r){var o=-r.height/2-r.y,c=-r.width/2-r.x;typeof n=="number"&&(c-=n),typeof e=="number"&&(o-=e),t.translate(c,o)}return t.serialize()}var $b=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},mT=function(s){var i=s.size,n=s.width,e=s.height,t=s.offset,r=s.open,o=$b(s,["size","width","height","offset","open"]);return Yb({size:i,width:n,height:e,offset:t},r===!0,!0,void 0,o)},gT=function(s){var i=s.size,n=s.width,e=s.height,t=s.offset,r=s.factor,o=$b(s,["size","width","height","offset","factor"]);return Yb({size:i,width:n,height:e,offset:t},!1,!1,r,o)};function Yb(a,s,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3/4,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=a.size||10,r=a.width||t,o=a.height||t,c=new Ii,p={};if(s)c.moveTo(r,0).lineTo(0,o/2).lineTo(r,o),p.fill="none";else{if(c.moveTo(0,o/2),c.lineTo(r,0),!i){var y=T.clamp(n,0,1);c.lineTo(r*y,o/2)}c.lineTo(r,o),c.close()}return Object.assign(Object.assign(Object.assign({},p),e),{tagName:"path",d:Th(c.serialize(),{x:a.offset!=null?a.offset:-r/2})})}var yT=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},bT=function(s){var i=s.size,n=s.width,e=s.height,t=s.offset,r=yT(s,["size","width","height","offset"]),o=i||10,c=n||o,p=e||o,y=new Ii;return y.moveTo(0,p/2).lineTo(c/2,0).lineTo(c,p/2).lineTo(c/2,p).close(),Object.assign(Object.assign({},r),{tagName:"path",d:Th(y.serialize(),t??-c/2)})},ET=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},xT=function(s){var i=s.d,n=s.offsetX,e=s.offsetY,t=ET(s,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},t),{tagName:"path",d:Th(i,n,e)})},wT=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},CT=function(s){var i=s.size,n=s.width,e=s.height,t=s.offset,r=wT(s,["size","width","height","offset"]),o=i||10,c=n||o,p=e||o,y=new Ii;return y.moveTo(0,0).lineTo(c,p).moveTo(0,p).lineTo(c,0),Object.assign(Object.assign({},r),{tagName:"path",fill:"none",d:Th(y.serialize(),t||-c/2)})},TT=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},AT=function(s){var i=s.width,n=s.height,e=s.offset,t=s.open,r=s.flip,o=TT(s,["width","height","offset","open","flip"]),c=n||6,p=i||10,y=t===!0,C=r===!0,S=Object.assign(Object.assign({},o),{tagName:"path"});C&&(c=-c);var I=new Ii;return I.moveTo(0,c).lineTo(p,0),y?S.fill="none":(I.lineTo(p,c),I.close()),S.d=Th(I.serialize(),{x:e||-p/2,y:c/2}),S},Qb=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Jb=function(s){var i=s.r,n=Qb(s,["r"]),e=i||5;return Object.assign(Object.assign({cx:e},n),{tagName:"circle",r:e})},OT=function(s){var i=s.r,n=Qb(s,["r"]),e=i||5,t=new Ii;return t.moveTo(e,0).lineTo(e,e*2),t.moveTo(0,e).lineTo(e*2,e),{children:[Object.assign(Object.assign({},Jb({r:e})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:Th(t.serialize(),-e)})]}},ST=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},DT=function(s){var i=s.rx,n=s.ry,e=ST(s,["rx","ry"]),t=i||5,r=n||5;return Object.assign(Object.assign({cx:t},e),{tagName:"ellipse",rx:t,ry:r})},Ah;(function(a){a.presets=L,a.registry=Os.create({type:"marker"}),a.registry.register(a.presets,!0)})(Ah||(Ah={})),function(a){a.normalize=Th}(Ah||(Ah={}));var MT=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i};function cg(a){return typeof a=="string"||f.isPlainObject(a)}var _T={qualify:cg,set:function(s,i){var n=i.view,e=i.attrs;return dg("marker-start",s,n,e)}},kT={qualify:cg,set:function(s,i){var n=i.view,e=i.attrs;return dg("marker-end",s,n,e,{transform:"rotate(180)"})}},NT={qualify:cg,set:function(s,i){var n=i.view,e=i.attrs;return dg("marker-mid",s,n,e)}};function dg(a,s,i,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=typeof s=="string"?{name:s}:s,r=t.name,o=t.args,c=MT(t,["name","args"]),p=c;if(r&&typeof r=="string"){var y=Ah.registry.get(r);if(y)p=y(Object.assign(Object.assign({},c),o));else return Ah.registry.onNotFound(r)}var C=Object.assign(Object.assign(Object.assign({},RT(n,a)),e),p);return Z({},a,"url(#".concat(i.graph.defineMarker(C),")"))}function RT(a,s){var i={},n=a.stroke;typeof n=="string"&&(i.stroke=n,i.fill=n);var e=a.strokeOpacity;if(e==null&&(e=a["stroke-opacity"]),e==null&&(e=a.opacity),e!=null&&(i["stroke-opacity"]=e,i["fill-opacity"]=e),s!=="marker-mid"){var t=parseFloat(a.strokeWidth||a["stroke-width"]);if(Number.isFinite(t)&&t>1){var r=Math.ceil(t/2);i.refX=s==="marker-start"?r:-r}}return i}var Gp=function(s,i){var n=i.view;return n.cell.isEdge()},PT={qualify:Gp,set:function(s,i){var n,e,t,r,o=i.view,c=s.reverse||!1,p=s.stubs||0,y;if(Number.isFinite(p)&&p!==0)if(c){var ie,ve,Le=o.getConnectionLength()||0;p<0?(ie=(Le+p)/2,ve=-p):(ie=p,ve=Le-p*2);var Oe=o.getConnection();y=(r=(t=(e=(n=Oe==null?void 0:Oe.divideAtLength(ie))===null||n===void 0?void 0:n[1])===null||e===void 0?void 0:e.divideAtLength(ve))===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.serialize()}else{var C;if(p<0){var S=o.getConnectionLength()||0;C=(S+p)/2}else C=p;var I=o.getConnection();if(I){var W=I.divideAtLength(C),q=I.divideAtLength(-C);W&&q&&(y="".concat(W[0].serialize()," ").concat(q[1].serialize()))}}return{d:y||o.getConnectionPathData()}}},Zb={qualify:Gp,set:Gv("getTangentAtLength",{rotate:!0})},IT={qualify:Gp,set:Gv("getTangentAtLength",{rotate:!1})},qb={qualify:Gp,set:Gv("getTangentAtRatio",{rotate:!0})},LT={qualify:Gp,set:Gv("getTangentAtRatio",{rotate:!1})},jT=Zb,UT=qb;function Gv(a,s){var i={x:1,y:0};return function(n,e){var t,r,o=e.view,c=o[a](Number(n));return c?(r=s.rotate?c.vector().vectorAngle(i):0,t=c.start):(t=o.path.start,r=0),r===0?{transform:"translate(".concat(t.x,",").concat(t.y,"')")}:{transform:"translate(".concat(t.x,",").concat(t.y,"') rotate(").concat(r,")")}}}var Ef;(function(a){function s(i,n,e){if(i!=null){if(typeof i=="string")return!0;if(typeof i.qualify!="function"||w.call(i.qualify,this,n,e))return!0}return!1}a.isValidDefinition=s})(Ef||(Ef={})),function(a){a.presets=Object.assign(Object.assign({},IC),U),a.registry=Os.create({type:"attribute definition"}),a.registry.register(a.presets,!0)}(Ef||(Ef={}));var FT={color:"#aaaaaa",thickness:1,markup:"rect",update:function(s,i){var n=i.thickness*i.sx,e=i.thickness*i.sy;O.attr(s,{width:n,height:e,rx:n,ry:e,fill:i.color})}},BT={color:"#aaaaaa",thickness:1,markup:"rect",update:function(s,i){var n=i.sx<=1?i.thickness*i.sx:i.thickness;O.attr(s,{width:n,height:n,rx:n,ry:n,fill:i.color})}},VT={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(s,i){var n,e=i.width,t=i.height,r=i.thickness;e-r>=0&&t-r>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",O.attr(s,{d:n,stroke:i.color,"stroke-width":i.thickness})}},zT=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(s,i){var n,e=i.width,t=i.height,r=i.thickness;e-r>=0&&t-r>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",O.attr(s,{d:n,stroke:i.color,"stroke-width":i.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(s,i){var n,e=i.factor||1,t=i.width*e,r=i.height*e,o=i.thickness;t-o>=0&&r-o>=0?n=["M",t,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",i.width=t,i.height=r,O.attr(s,{d:n,stroke:i.color,"stroke-width":i.thickness})}}],Oh=function(){function a(){Object(_r.a)(this,a),this.patterns={},this.root=pi.create(O.createSvgDocument(),{width:"100%",height:"100%"},[O.createSvgElement("defs")]).node}return Object(Br.a)(a,[{key:"add",value:function(i,n){var e=this.root.childNodes[0];e&&e.appendChild(n),this.patterns[i]=n,pi.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(i,")")}).appendTo(this.root)}},{key:"get",value:function(i){return this.patterns[i]}},{key:"has",value:function(i){return this.patterns[i]!=null}}]),a}();(function(a){a.presets=V,a.registry=Os.create({type:"grid"}),a.registry.register(a.presets,!0)})(Oh||(Oh={}));function fg(a,s){return a??s}function Yu(a,s){return a!=null&&Number.isFinite(a)?a:s}function GT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=fg(a.color,"blue"),i=Yu(a.width,1),n=Yu(a.margin,2),e=Yu(a.opacity,1),t=n,r=n+i;return`
    <filter>
      <feFlood flood-color="`.concat(s,'" flood-opacity="').concat(e,`" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="`).concat(r,`" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="`).concat(t,`" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `).trim()}function XT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=fg(a.color,"red"),i=Yu(a.blur,0),n=Yu(a.width,1),e=Yu(a.opacity,1);return`
      <filter>
        <feFlood flood-color="`.concat(s,'" flood-opacity="').concat(e,`" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="`).concat(n,`"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="`).concat(i,`"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `).trim()}function WT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.x,2),i=a.y!=null&&Number.isFinite(a.y)?[s,a.y]:s;return`
    <filter>
      <feGaussianBlur stdDeviation="`.concat(i,`"/>
    </filter>
  `).trim()}function HT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.dx,0),i=Yu(a.dy,0),n=fg(a.color,"black"),e=Yu(a.blur,4),t=Yu(a.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="`.concat(e,'" dx="').concat(s,'" dy="').concat(i,'" flood-color="').concat(n,'" flood-opacity="').concat(t,`" />
       </filter>`).trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="`.concat(e,`" />
         <feOffset dx="`).concat(s,'" dy="').concat(i,`" result="offsetblur" />
         <feFlood flood-color="`).concat(n,`" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="`).concat(t,`" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`).trim()}function KT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.amount,1),i=.2126+.7874*(1-s),n=.7152-.7152*(1-s),e=.0722-.0722*(1-s),t=.2126-.2126*(1-s),r=.7152+.2848*(1-s),o=.0722-.0722*(1-s),c=.2126-.2126*(1-s),p=.0722+.9278*(1-s);return`
    <filter>
      <feColorMatrix type="matrix" values="`.concat(i," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(r," ").concat(o," 0 0 ").concat(c," ").concat(n," ").concat(p,` 0 0 0 0 0 1 0"/>
    </filter>
  `).trim()}function $T(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.amount,1),i=.393+.607*(1-s),n=.769-.769*(1-s),e=.189-.189*(1-s),t=.349-.349*(1-s),r=.686+.314*(1-s),o=.168-.168*(1-s),c=.272-.272*(1-s),p=.534-.534*(1-s),y=.131+.869*(1-s);return`
      <filter>
        <feColorMatrix type="matrix" values="`.concat(i," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(r," ").concat(o," 0 0 ").concat(c," ").concat(p," ").concat(y,` 0 0 0 0 0 1 0"/>
      </filter>
    `).trim()}function YT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.amount,1);return`
      <filter>
        <feColorMatrix type="saturate" values="`.concat(1-s,`"/>
      </filter>
    `).trim()}function QT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.angle,0);return`
      <filter>
        <feColorMatrix type="hueRotate" values="`.concat(s,`"/>
      </filter>
    `).trim()}function JT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.amount,1),i=1-s;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="`.concat(s," ").concat(i,`"/>
          <feFuncG type="table" tableValues="`).concat(s," ").concat(i,`"/>
          <feFuncB type="table" tableValues="`).concat(s," ").concat(i,`"/>
        </feComponentTransfer>
      </filter>
    `).trim()}function ZT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(s,`"/>
        <feFuncG type="linear" slope="`).concat(s,`"/>
        <feFuncB type="linear" slope="`).concat(s,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}function qT(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Yu(a.amount,1),i=.5-s/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(s,'" intercept="').concat(i,`"/>
        <feFuncG type="linear" slope="`).concat(s,'" intercept="').concat(i,`"/>
        <feFuncB type="linear" slope="`).concat(s,'" intercept="').concat(i,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}var vp;(function(a){a.presets=z,a.registry=Os.create({type:"filter"}),a.registry.register(a.presets,!0)})(vp||(vp={}));var e0=function(s){var i=document.createElement("canvas"),n=s.width,e=s.height;i.width=n*2,i.height=e;var t=i.getContext("2d");return t.drawImage(s,0,0,n,e),t.translate(2*n,0),t.scale(-1,1),t.drawImage(s,0,0,n,e),i},t0=function(s){var i=document.createElement("canvas"),n=s.width,e=s.height;i.width=n,i.height=e*2;var t=i.getContext("2d");return t.drawImage(s,0,0,n,e),t.translate(0,2*e),t.scale(1,-1),t.drawImage(s,0,0,n,e),i},n0=function(s){var i=document.createElement("canvas"),n=s.width,e=s.height;i.width=2*n,i.height=2*e;var t=i.getContext("2d");return t.drawImage(s,0,0,n,e),t.setTransform(-1,0,0,-1,i.width,i.height),t.drawImage(s,0,0,n,e),t.setTransform(-1,0,0,1,i.width,0),t.drawImage(s,0,0,n,e),t.setTransform(1,0,0,-1,0,i.height),t.drawImage(s,0,0,n,e),i},eA=function(s,i){var n=s.width,e=s.height,t=document.createElement("canvas");t.width=n*3,t.height=e*3;for(var r=t.getContext("2d"),o=i.angle!=null?-i.angle:-20,c=Pi.toRad(o),p=t.width/4,y=t.height/4,C=0;C<4;C+=1)for(var S=0;S<4;S+=1)(C+S)%2>0&&(r.setTransform(1,0,0,1,(2*C-1)*p,(2*S-1)*y),r.rotate(c),r.drawImage(s,-n/2,-e/2,n,e));return t},Xp;(function(a){a.presets=Object.assign({},K),a.presets["flip-x"]=e0,a.presets["flip-y"]=t0,a.presets["flip-xy"]=n0,a.registry=Os.create({type:"background pattern"}),a.registry.register(a.presets,!0)})(Xp||(Xp={}));var Nl={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track:function(s){Nl.trackable=s}},zs;(function(a){a.snapToGrid=Jm,a.normalizeMarker=Th;function s(i){return"".concat(Nl.prefixCls,"-").concat(i)}a.prefix=s})(zs||(zs={})),function(a){function s(i,n,e){var t=this,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],o=typeof n.children=="function"?n.children(i):i[n.children||"children"];return e||(e=n.createNode(i),r.push(e)),Array.isArray(o)&&o.forEach(function(c){var p=n.createNode(c),y=n.createEdge(e,p);r.push(p,y),t.makeTree(c,n,p,r)}),r}a.makeTree=s}(zs||(zs={}));var tA="1.32.9",r0=zs.prefix("highlighted"),nA={highlight:function(s,i,n){var e=n&&n.className||r0;O.addClass(i,e)},unhighlight:function(s,i,n){var e=n&&n.className||r0;O.removeClass(i,e)}},a0=zs.prefix("highlight-opacity"),rA={highlight:function(s,i){O.addClass(i,a0)},unhighlight:function(s,i){O.removeClass(i,a0)}},aA={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},iA={highlight:function(s,i,n){var e=Sh.getHighlighterId(i,n);if(Sh.hasCache(e))return;n=f.defaultsDeep({},n,aA);var t=pi.create(i),r,o;try{r=t.toPathData()}catch(it){o=t.bbox(!0),r=O.rectToPathData(Object.assign(Object.assign({},n),o))}var c=O.createSvgElement("path");if(O.attr(c,Object.assign({d:r,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?O.kebablizeAttrs(n.attrs):null)),s.isEdgeElement(i))O.attr(c,"d",s.getConnectionPathData());else{var p=t.getTransformToElement(s.container),y=n.padding;if(y){o==null&&(o=t.bbox(!0));var C=o.x+o.width/2,S=o.y+o.height/2;o=O.transformRectangle(o,p);var I=Math.max(o.width,1),W=Math.max(o.height,1),q=(I+y)/I,ie=(W+y)/W,ve=O.createSVGMatrix({a:q,b:0,c:0,d:ie,e:C-q*C,f:S-ie*S});p=p.multiply(ve)}O.transform(c,p)}O.addClass(c,zs.prefix("highlight-stroke"));var Le=s.cell,Oe=function(){return Sh.removeHighlighter(e)};Le.on("removed",Oe),Le.model&&Le.model.on("reseted",Oe),s.container.appendChild(c),Sh.setCache(e,c)},unhighlight:function(s,i,n){Sh.removeHighlighter(Sh.getHighlighterId(i,n))}},Sh;(function(a){function s(r,o){return O.ensureId(r),r.id+JSON.stringify(o)}a.getHighlighterId=s;var i={};function n(r,o){i[r]=o}a.setCache=n;function e(r){return i[r]!=null}a.hasCache=e;function t(r){var o=i[r];o&&(O.remove(o),delete i[r])}a.removeHighlighter=t})(Sh||(Sh={}));var Yf;(function(a){function s(i,n){if(typeof n.highlight!="function")throw new Error("Highlighter '".concat(i,"' is missing required `highlight()` method"));if(typeof n.unhighlight!="function")throw new Error("Highlighter '".concat(i,"' is missing required `unhighlight()` method"))}a.check=s})(Yf||(Yf={})),function(a){a.presets=J,a.registry=Os.create({type:"highlighter"}),a.registry.register(a.presets,!0)}(Yf||(Yf={}));function hg(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Bt(T.normalizePercentage(s.x,a.width),T.normalizePercentage(s.y,a.height))}function pg(a,s,i){return Object.assign({angle:s,position:a.toJSON()},i)}var oA=function(s,i){return s.map(function(n){var e=n.x,t=n.y,r=n.angle;return pg(hg(i,{x:e,y:t}),r||0)})},sA=function(s,i,n){var e=n.start||0,t=n.step||20;return i0(s,i,e,function(r,o){return(r+.5-o/2)*t})},uA=function(s,i,n){var e=n.start||0,t=n.step||360/s.length;return i0(s,i,e,function(r){return r*t})};function i0(a,s,i,n){var e=s.getCenter(),t=s.getTopCenter(),r=s.width/s.height,o=Eh.fromRect(s),c=a.length;return a.map(function(p,y){var C=i+n(y,c),S=t.clone().rotate(-C,e).scale(r,1,e),I=p.compensateRotate?-o.tangentTheta(S):0;return(p.dx||p.dy)&&S.translate(p.dx||0,p.dy||0),p.dr&&S.move(e,p.dr),pg(S.round(),I,p)})}var lA=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},cA=function(s,i,n){var e=hg(i,n.start||i.getOrigin()),t=hg(i,n.end||i.getCorner());return Wp(s,e,t,n)},dA=function(s,i,n){return Wp(s,i.getTopLeft(),i.getBottomLeft(),n)},fA=function(s,i,n){return Wp(s,i.getTopRight(),i.getBottomRight(),n)},hA=function(s,i,n){return Wp(s,i.getTopLeft(),i.getTopRight(),n)},pA=function(s,i,n){return Wp(s,i.getBottomLeft(),i.getBottomRight(),n)};function Wp(a,s,i,n){var e=new Ba(s,i),t=a.length;return a.map(function(r,o){var c=r.strict,p=lA(r,["strict"]),y=c||n.strict?(o+1)/(t+1):(o+.5)/t,C=e.pointAt(y);return(p.dx||p.dy)&&C.translate(p.dx||0,p.dy||0),pg(C.round(),0,p)})}var $h;(function(a){a.presets=he,a.registry=Os.create({type:"port layout"}),a.registry.register(a.presets,!0)})($h||($h={}));var vA={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Dh(a,s){var i=s||{},n=i.x,e=i.y,t=i.angle,r=i.attrs;return f.defaultsDeep({},{angle:t,attrs:r,position:{x:n,y:e}},a,vA)}var mA=function(s,i,n){return Dh({position:i.getTopLeft()},n)},gA=function(s,i,n){return Dh({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},yA=function(s,i,n){return Dh({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},bA=function(s,i,n){return Dh({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},EA=function(s,i,n){return Dh({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},xA=function(s,i,n){return o0(s,i,!1,n)},wA=function(s,i,n){return o0(s,i,!0,n)},CA=function(s,i,n){return s0(s,i,!1,n)},TA=function(s,i,n){return s0(s,i,!0,n)};function o0(a,s,i,n){var e=n.offset!=null?n.offset:15,t=s.getCenter().theta(a),r=u0(s),o,c,p,y,C=0;return t<r[1]||t>r[2]?(o=".3em",c=e,p=0,y="start"):t<r[0]?(o="0",c=0,p=-e,i?(C=-90,y="start"):y="middle"):t<r[3]?(o=".3em",c=-e,p=0,y="end"):(o=".6em",c=0,p=e,i?(C=90,y="start"):y="middle"),Dh({position:{x:Math.round(c),y:Math.round(p)},angle:C,attrs:{".":{y:o,"text-anchor":y}}},n)}function s0(a,s,i,n){var e=n.offset!=null?n.offset:15,t=s.getCenter().theta(a),r=u0(s),o,c,p,y,C=0;return t<r[1]||t>r[2]?(o=".3em",c=-e,p=0,y="end"):t<r[0]?(o=".6em",c=0,p=e,i?(C=90,y="start"):y="middle"):t<r[3]?(o=".3em",c=e,p=0,y="start"):(o="0em",c=0,p=-e,i?(C=-90,y="start"):y="middle"),Dh({position:{x:Math.round(c),y:Math.round(p)},angle:C,attrs:{".":{y:o,"text-anchor":y}}},n)}function u0(a){var s=a.getCenter(),i=s.theta(a.getTopLeft()),n=s.theta(a.getBottomLeft()),e=s.theta(a.getBottomRight()),t=s.theta(a.getTopRight());return[i,t,e,n]}var AA=function(s,i,n){return l0(s.diff(i.getCenter()),!1,n)},OA=function(s,i,n){return l0(s.diff(i.getCenter()),!0,n)};function l0(a,s,i){var n=i.offset!=null?i.offset:20,e=new Bt(0,0),t=-a.theta(e),r=a.clone().move(e,n).diff(a).round(),o=".3em",c,p=t;return(t+90)%180===0?(c=s?"end":"middle",!s&&t===-270&&(o="0em")):t>-270&&t<-90?(c="start",p=t-180):c="end",Dh({position:r.round().toJSON(),angle:s?p:0,attrs:{".":{y:o,"text-anchor":c}}},i)}var mp;(function(a){a.presets=ue,a.registry=Os.create({type:"port label layout"}),a.registry.register(a.presets,!0)})(mp||(mp={}));var fu=u(23),SA=u(145),Xv=function(){function a(s,i,n,e){if(Object(_r.a)(this,a),s==null)return this.set(255,255,255,1);if(typeof s=="number")return this.set(s,i,n,e);if(typeof s=="string")return a.fromString(s)||this;if(Array.isArray(s))return this.set(s);this.set(s.r,s.g,s.b,s.a==null?1:s.a)}return Object(Br.a)(a,[{key:"blend",value:function(i,n,e){this.set(i.r+(n.r-i.r)*e,i.g+(n.g-i.g)*e,i.b+(n.b-i.b)*e,i.a+(n.a-i.a)*e)}},{key:"lighten",value:function(i){var n=a.lighten(this.toArray(),i);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}},{key:"darken",value:function(i){this.lighten(-i)}},{key:"set",value:function(i,n,e,t){var r=Array.isArray(i)?i[0]:i,o=Array.isArray(i)?i[1]:n,c=Array.isArray(i)?i[2]:e,p=Array.isArray(i)?i[3]:t;return this.r=Math.round(T.clamp(r,0,255)),this.g=Math.round(T.clamp(o,0,255)),this.b=Math.round(T.clamp(c,0,255)),this.a=p==null?1:T.clamp(p,0,1),this}},{key:"toHex",value:function(){var i=this,n=["r","g","b"].map(function(e){var t=i[e].toString(16);return t.length<2?"0".concat(t):t});return"#".concat(n.join(""))}},{key:"toRGBA",value:function(){return this.toArray()}},{key:"toHSLA",value:function(){return a.rgba2hsla(this.r,this.g,this.b,this.a)}},{key:"toCSS",value:function(i){var n="".concat(this.r,",").concat(this.g,",").concat(this.b,",");return i?"rgb(".concat(n,")"):"rgba(".concat(n,",").concat(this.a,")")}},{key:"toGrey",value:function(){return a.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return this.toCSS()}}]),a}();(function(a){function s(Oe){return new a(Oe)}a.fromArray=s;function i(Oe){return new a([].concat(Object(Ca.a)(W(Oe)),[1]))}a.fromHex=i;function n(Oe){var it=Oe.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(it){var at=it[1].split(/\s*,\s*/).map(function(Qe){return parseInt(Qe,10)});return new a(at)}return null}a.fromRGBA=n;function e(Oe,it,at){at<0&&++at,at>1&&--at;var Qe=6*at;return Qe<1?Oe+(it-Oe)*Qe:2*at<1?it:3*at<2?Oe+(it-Oe)*(2/3-at)*6:Oe}function t(Oe){var it=Oe.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(it){var at=it[2].split(/\s*,\s*/),Qe=(parseFloat(at[0])%360+360)%360/360,qt=parseFloat(at[1])/100,Kt=parseFloat(at[2])/100,Tn=at[3]==null?1:parseInt(at[3],10);return new a(p(Qe,qt,Kt,Tn))}return null}a.fromHSLA=t;function r(Oe){if(Oe.startsWith("#"))return i(Oe);if(Oe.startsWith("rgb"))return n(Oe);var it=a.named[Oe];return it?i(it):t(Oe)}a.fromString=r;function o(Oe,it){return a.fromArray([Oe,Oe,Oe,it])}a.makeGrey=o;function c(Oe,it,at,Qe){var qt=Array.isArray(Oe)?Oe[0]:Oe,Kt=Array.isArray(Oe)?Oe[1]:it,Tn=Array.isArray(Oe)?Oe[2]:at,Bn=Array.isArray(Oe)?Oe[3]:Qe,tr=Math.max(qt,Kt,Tn),hr=Math.min(qt,Kt,Tn),Lr=(tr+hr)/2,Vr=0,dn=0;if(hr!==tr){var Xn=tr-hr;dn=Lr>.5?Xn/(2-tr-hr):Xn/(tr+hr);switch(tr){case qt:Vr=(Kt-Tn)/Xn+(Kt<Tn?6:0);break;case Kt:Vr=(Tn-qt)/Xn+2;break;case Tn:Vr=(qt-Kt)/Xn+4;break;default:break}Vr/=6}return[Vr,dn,Lr,Bn??1]}a.rgba2hsla=c;function p(Oe,it,at,Qe){var qt=Array.isArray(Oe)?Oe[0]:Oe,Kt=Array.isArray(Oe)?Oe[1]:it,Tn=Array.isArray(Oe)?Oe[2]:at,Bn=Array.isArray(Oe)?Oe[3]:Qe,tr=Tn<=.5?Tn*(Kt+1):Tn+Kt-Tn*Kt,hr=2*Tn-tr;return[e(hr,tr,qt+1/3)*256,e(hr,tr,qt)*256,e(hr,tr,qt-1/3)*256,Bn??1]}a.hsla2rgba=p;function y(Oe){return new a(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),Oe?void 0:parseFloat(Math.random().toFixed(2)))}a.random=y;function C(){for(var Oe="0123456789ABCDEF",it="#",at=0;at<6;at+=1)it+=Oe[Math.floor(Math.random()*16)];return it}a.randomHex=C;function S(Oe){return y(Oe).toString()}a.randomRGBA=S;function I(Oe,it){if(typeof Oe=="string"){var at=Oe[0]==="#",Qe=W(Oe),qt=Object(SA.a)(Qe,3),Kt=qt[0],Tn=qt[1],Bn=qt[2];return it?Kt*.299+Tn*.587+Bn*.114>186?"#000000":"#ffffff":"".concat(at?"#":"").concat(q(255-Kt,255-Tn,255-Bn))}var tr=Oe[0],hr=Oe[1],Lr=Oe[2],Vr=Oe[3];return it?tr*.299+hr*.587+Lr*.114>186?[0,0,0,Vr]:[255,255,255,Vr]:[255-tr,255-hr,255-Lr,Vr]}a.invert=I;function W(Oe){var it=Oe.indexOf("#")===0?Oe:"#".concat(Oe),at=Number("0x".concat(it.substr(1)));if(!(it.length===4||it.length===7)||Number.isNaN(at))throw new Error("Invalid hex color.");var Qe=it.length===4?4:8,qt=(1<<Qe)-1,Kt=["b","g","r"].map(function(){var Tn=at&qt;return at>>=Qe,Qe===4?17*Tn:Tn});return[Kt[2],Kt[1],Kt[0]]}function q(Oe,it,at){var Qe=function(Kt){return Kt.length<2?"0".concat(Kt):Kt};return"".concat(Qe(Oe.toString(16))).concat(Qe(it.toString(16))).concat(Qe(at.toString(16)))}function ie(Oe,it){return Le(Oe,it)}a.lighten=ie;function ve(Oe,it){return Le(Oe,-it)}a.darken=ve;function Le(Oe,it){if(typeof Oe=="string"){var at=Oe[0]==="#",Qe=parseInt(at?Oe.substr(1):Oe,16),qt=T.clamp((Qe>>16)+it,0,255),Kt=T.clamp((Qe>>8&255)+it,0,255),Tn=T.clamp((Qe&255)+it,0,255);return"".concat(at?"#":"").concat((Tn|Kt<<8|qt<<16).toString(16))}var Bn=q(Oe[0],Oe[1],Oe[2]),tr=W(Le(Bn,it));return[tr[0],tr[1],tr[2],Oe[3]]}})(Xv||(Xv={})),function(a){a.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Xv||(Xv={}));var DA=function(){function a(){Object(_r.a)(this,a),this.listeners={}}return Object(Br.a)(a,[{key:"on",value:function(i,n,e){if(n==null)return this;this.listeners[i]||(this.listeners[i]=[]);var t=this.listeners[i];return t.push(n,e),this}},{key:"once",value:function(i,n,e){var t=this,r=function o(){t.off(i,o);for(var c=arguments.length,p=new Array(c),y=0;y<c;y++)p[y]=arguments[y];return Hp.call([n,e],p)};return this.on(i,r,this)}},{key:"off",value:function(i,n,e){if(!(i||n||e))return this.listeners={},this;var t=this.listeners,r=i?[i]:Object.keys(t);return r.forEach(function(o){var c=t[o];if(!c)return;if(!(n||e)){delete t[o];return}for(var p=c.length-2;p>=0;p-=2)n&&c[p]!==n||e&&c[p+1]!==e||c.splice(p,2)}),this}},{key:"trigger",value:function(i){for(var n=!0,e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];if(i!=="*"){var o=this.listeners[i];o!=null&&(n=Hp.call(Object(Ca.a)(o),t))}var c=this.listeners["*"];return c!=null?w.toAsyncBoolean([n,Hp.call(Object(Ca.a)(c),[i].concat(t))]):n}},{key:"emit",value:function(i){for(var n=arguments.length,e=new Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];return this.trigger.apply(this,[i].concat(e))}}]),a}(),Hp;(function(a){function s(i,n){for(var e=[],t=0;t<i.length;t+=2){var r=i[t],o=i[t+1],c=Array.isArray(n)?n:[n],p=w.apply(r,o,c);e.push(p)}return w.toAsyncBoolean(e)}a.call=s})(Hp||(Hp={}));var Jd=function(){function a(){Object(_r.a)(this,a)}return Object(Br.a)(a,[{key:"disposed",get:function(){return this._disposed===!0}},{key:"dispose",value:function(){this._disposed=!0}}]),a}();(function(a){function s(){return function(i,n,e){var t=e.value,r=i.__proto__;e.value=function(){if(this.disposed)return;t.call(this),r.dispose.call(this)}}}a.dispose=s})(Jd||(Jd={}));var XS=function(){function a(s){Object(_r.a)(this,a),this.callback=s}return Object(Br.a)(a,[{key:"disposed",get:function(){return!this.callback}},{key:"dispose",value:function(){if(!this.callback)return;var i=this.callback;this.callback=null,i()}}]),a}(),c0=function(){function a(){Object(_r.a)(this,a),this.isDisposed=!1,this.items=new Set}return Object(Br.a)(a,[{key:"disposed",get:function(){return this.isDisposed}},{key:"dispose",value:function(){if(this.isDisposed)return;this.isDisposed=!0,this.items.forEach(function(i){i.dispose()}),this.items.clear()}},{key:"contains",value:function(i){return this.items.has(i)}},{key:"add",value:function(i){this.items.add(i)}},{key:"remove",value:function(i){this.items.delete(i)}},{key:"clear",value:function(){this.items.clear()}}]),a}();(function(a){function s(i){var n=new a;return i.forEach(function(e){n.add(e)}),n}a.from=s})(c0||(c0={}));var fl=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return i}(DA);(function(a){a.dispose=Jd.dispose})(fl||(fl={})),f.applyMixins(fl,Jd);var d0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"disabled",get:function(){return this._disabled===!0}},{key:"enable",value:function(){delete this._disabled}},{key:"disable",value:function(){this._disabled=!0}}]),i}(fl),MA=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},Wv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.call(this),n.clear(),n}return Object(Br.a)(i,[{key:"clear",value:function(){this.map=new WeakMap,this.arr=[]}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t),this.arr.push(e)}},{key:"delete",value:function(e){var t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);var r=this.map.get(e);return this.map.delete(e),r}},{key:"each",value:function(e){var t=this;this.arr.forEach(function(r){var o=t.map.get(r);e(o,r)})}},{key:"dispose",value:function(){this.clear()}}]),i}(Jd);MA([Jd.dispose()],Wv.prototype,"dispose",null);var vg=function(){function a(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(_r.a)(this,a),this.comparator=s.comparator||a.defaultComparator,this.index={},this.data=s.data||[],this.heapify()}return Object(Br.a)(a,[{key:"isEmpty",value:function(){return this.data.length===0}},{key:"insert",value:function(i,n,e){var t={priority:i,value:n},r=this.data.length-1;return e&&(t.id=e,this.index[e]=r),this.data.push(t),this.bubbleUp(r),this}},{key:"peek",value:function(){return this.data[0]?this.data[0].value:null}},{key:"peekPriority",value:function(){return this.data[0]?this.data[0].priority:null}},{key:"updatePriority",value:function(i,n){var e=this.index[i];if(typeof e=="undefined")throw new Error("Node with id '".concat(i,"' was not found in the heap."));var t=this.data,r=t[e].priority,o=this.comparator(n,r);o<0?(t[e].priority=n,this.bubbleUp(e)):o>0&&(t[e].priority=n,this.bubbleDown(e))}},{key:"remove",value:function(){var i=this.data,n=i[0],e=i.pop();return delete this.index[i.length],i.length>0&&(i[0]=e,e.id&&(this.index[e.id]=0),this.bubbleDown(0)),n?n.value:null}},{key:"heapify",value:function(){for(var i=0;i<this.data.length;i+=1)this.bubbleUp(i)}},{key:"bubbleUp",value:function(i){for(var n=this.data,e,t,r=i;r>0&&(t=r-1>>>1,this.comparator(n[r].priority,n[t].priority)<0);){e=n[t],n[t]=n[r];var o=n[r].id;o!=null&&(this.index[o]=t),n[r]=e,o=n[r].id,o!=null&&(this.index[o]=r),r=t}}},{key:"bubbleDown",value:function(i){for(var n=this.data,e=n.length-1,t=i;;){var r=(t<<1)+1,o=r+1,c=t;if(r<=e&&this.comparator(n[r].priority,n[c].priority)<0&&(c=r),o<=e&&this.comparator(n[o].priority,n[c].priority)<0&&(c=o),c!==t){var p=n[c];n[c]=n[t];var y=n[t].id;y!=null&&(this.index[y]=c),n[t]=p,y=n[t].id,y!=null&&(this.index[y]=t),t=c}else break}}}]),a}();(function(a){a.defaultComparator=function(s,i){return s-i}})(vg||(vg={}));var mg;(function(a){function s(i,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(W,q){return 1},t={},r={},o={},c=new vg;for(t[n]=0,Object.keys(i).forEach(function(W){W!==n&&(t[W]=Infinity),c.insert(t[W],W,W)});!c.isEmpty();){var p=c.remove();o[p]=!0;for(var y=i[p]||[],C=0;C<y.length;C+=1){var S=y[C];if(!o[S]){var I=t[p]+e(p,S);I<t[S]&&(t[S]=I,r[S]=p,c.updatePriority(S,I))}}}return r}a.run=s})(mg||(mg={}));var Yh;(function(a){a.linear=function(s){return s},a.quad=function(s){return s*s},a.cubic=function(s){return s*s*s},a.inout=function(s){if(s<=0)return 0;if(s>=1)return 1;var i=s*s,n=i*s;return 4*(s<.5?n:3*(s-i)+n-.75)},a.exponential=function(s){return Math.pow(2,10*(s-1))},a.bounce=function(s){for(var i=0,n=1;;i+=n,n/=2)if(s>=(7-4*i)/11){var e=(11-6*i-11*s)/4;return-e*e+n*n}}})(Yh||(Yh={})),function(a){a.decorators={reverse:function(i){return function(n){return 1-i(1-n)}},reflect:function(i){return function(n){return .5*(n<.5?i(2*n):2-i(2-2*n))}},clamp:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return function(t){var r=i(t);return r<n?n:r>e?e:r}},back:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.70158;return function(n){return n*n*((i+1)*n-i)}},elastic:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.5;return function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*i/3*n)}}}}(Yh||(Yh={})),function(a){function s(dn){return-1*Math.cos(dn*(Math.PI/2))+1}a.easeInSine=s;function i(dn){return Math.sin(dn*(Math.PI/2))}a.easeOutSine=i;function n(dn){return-.5*(Math.cos(Math.PI*dn)-1)}a.easeInOutSine=n;function e(dn){return dn*dn}a.easeInQuad=e;function t(dn){return dn*(2-dn)}a.easeOutQuad=t;function r(dn){return dn<.5?2*dn*dn:-1+(4-2*dn)*dn}a.easeInOutQuad=r;function o(dn){return dn*dn*dn}a.easeInCubic=o;function c(dn){var Xn=dn-1;return Xn*Xn*Xn+1}a.easeOutCubic=c;function p(dn){return dn<.5?4*dn*dn*dn:(dn-1)*(2*dn-2)*(2*dn-2)+1}a.easeInOutCubic=p;function y(dn){return dn*dn*dn*dn}a.easeInQuart=y;function C(dn){var Xn=dn-1;return 1-Xn*Xn*Xn*Xn}a.easeOutQuart=C;function S(dn){var Xn=dn-1;return dn<.5?8*dn*dn*dn*dn:1-8*Xn*Xn*Xn*Xn}a.easeInOutQuart=S;function I(dn){return dn*dn*dn*dn*dn}a.easeInQuint=I;function W(dn){var Xn=dn-1;return 1+Xn*Xn*Xn*Xn*Xn}a.easeOutQuint=W;function q(dn){var Xn=dn-1;return dn<.5?16*dn*dn*dn*dn*dn:1+16*Xn*Xn*Xn*Xn*Xn}a.easeInOutQuint=q;function ie(dn){return dn===0?0:Math.pow(2,10*(dn-1))}a.easeInExpo=ie;function ve(dn){return dn===1?1:-Math.pow(2,-10*dn)+1}a.easeOutExpo=ve;function Le(dn){if(dn===0||dn===1)return dn;var Xn=dn*2,ra=Xn-1;return Xn<1?.5*Math.pow(2,10*ra):.5*(-Math.pow(2,-10*ra)+2)}a.easeInOutExpo=Le;function Oe(dn){var Xn=dn/1;return-1*(Math.sqrt(1-Xn*dn)-1)}a.easeInCirc=Oe;function it(dn){var Xn=dn-1;return Math.sqrt(1-Xn*Xn)}a.easeOutCirc=it;function at(dn){var Xn=dn*2,ra=Xn-2;return Xn<1?-.5*(Math.sqrt(1-Xn*Xn)-1):.5*(Math.sqrt(1-ra*ra)+1)}a.easeInOutCirc=at;function Qe(dn){var Xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158;return dn*dn*((Xn+1)*dn-Xn)}a.easeInBack=Qe;function qt(dn){var Xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,ra=dn/1-1;return ra*ra*((Xn+1)*ra+Xn)+1}a.easeOutBack=qt;function Kt(dn){var Xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,ra=dn*2,Ea=ra-2,ja=Xn*1.525;return ra<1?.5*ra*ra*((ja+1)*ra-ja):.5*(Ea*Ea*((ja+1)*Ea+ja)+2)}a.easeInOutBack=Kt;function Tn(dn){var Xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7;if(dn===0||dn===1)return dn;var ra=dn/1,Ea=ra-1,ja=1-Xn,li=ja/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Ea)*Math.sin((Ea-li)*(2*Math.PI)/ja))}a.easeInElastic=Tn;function Bn(dn){var Xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7,ra=1-Xn,Ea=dn*2;if(dn===0||dn===1)return dn;var ja=ra/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Ea)*Math.sin((Ea-ja)*(2*Math.PI)/ra)+1}a.easeOutElastic=Bn;function tr(dn){var Xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.65,ra=1-Xn;if(dn===0||dn===1)return dn;var Ea=dn*2,ja=Ea-1,li=ra/(2*Math.PI)*Math.asin(1);return Ea<1?-.5*(Math.pow(2,10*ja)*Math.sin((ja-li)*(2*Math.PI)/ra)):Math.pow(2,-10*ja)*Math.sin((ja-li)*(2*Math.PI)/ra)*.5+1}a.easeInOutElastic=tr;function hr(dn){var Xn=dn/1;if(Xn<1/2.75)return 7.5625*Xn*Xn;if(Xn<2/2.75){var ra=Xn-1.5/2.75;return 7.5625*ra*ra+.75}if(Xn<2.5/2.75){var Ea=Xn-2.25/2.75;return 7.5625*Ea*Ea+.9375}{var ja=Xn-2.625/2.75;return 7.5625*ja*ja+.984375}}a.easeOutBounce=hr;function Lr(dn){return 1-hr(1-dn)}a.easeInBounce=Lr;function Vr(dn){return dn<.5?Lr(dn*2)*.5:hr(dn*2-1)*.5+.5}a.easeInOutBounce=Vr}(Yh||(Yh={}));var Qh;(function(a){a.number=function(s,i){var n=i-s;return function(e){return s+n*e}},a.object=function(s,i){var n=Object.keys(s);return function(e){for(var t={},r=n.length-1;r!==-1;r-=1){var o=n[r];t[o]=s[o]+(i[o]-s[o])*e}return t}},a.unit=function(s,i){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,e=n.exec(s),t=n.exec(i),r=t?t[1]:"",o=e?+e[1]:0,c=t?+t[1]:0,p=r.indexOf("."),y=p>0?r[1].length-p-1:0,C=c-o,S=e?e[2]:"";return function(I){return(o+C*I).toFixed(y)+S}},a.color=function(s,i){var n=parseInt(s.slice(1),16),e=parseInt(i.slice(1),16),t=n&255,r=(e&255)-t,o=n&65280,c=(e&65280)-o,p=n&16711680,y=(e&16711680)-p;return function(C){var S=t+r*C&255,I=o+c*C&65280,W=p+y*C&16711680;return"#".concat((1<<24|S|I|W).toString(16).slice(1))}}})(Qh||(Qh={}));var f0;(function(a){var s="".concat(Nl.prefixCls,".storage");function i(C,S,I){var W=S.id||E.uniqueId("doc-"),q=c(C);q.keys.push(W),r(p(C,W),S),r(y(C),q),t(I,null,Object.assign(Object.assign({},S),{id:W}))}a.insert=i;function n(C,S,I){var W=c(C),q=[];if(S==null)W.keys.forEach(function(ve){var Le=o(p(C,ve));Le?q.push(Le):t(I,new Error("No document found for an ID '".concat(ve,"' from index.")))}),t(I,null,q);else if(S.id){var ie=o(p(C,S.id));t(I,null,ie?[ie]:[])}else t(I,null,[])}a.find=n;function e(C,S,I){var W=c(C);if(S==null)W.keys.forEach(function(ie){localStorage.removeItem(p(C,ie))}),localStorage.removeItem(y(C)),t(I,null);else if(S.id){var q=W.keys.indexOf(S.id);q>=0&&W.keys.splice(q,1),localStorage.removeItem(p(C,S.id)),r(y(C),W),t(I,null)}}a.remove=e;function t(C,S,I){C&&w.defer(function(){C(S,I)})}function r(C,S){localStorage.setItem(C,JSON.stringify(S))}function o(C){var S=localStorage.getItem(C);return S?JSON.parse(S):null}function c(C){var S=o(y(C));return S?(S.keys==null&&(S.keys=[]),S):{keys:[]}}function p(C,S){return"".concat(s,".").concat(C,".docs.").concat(S)}function y(C){return"".concat(s,".").concat(C,".index")}})(f0||(f0={}));var so=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.call(this),n.cid=gg.uniqueId(),i.views[n.cid]=Object(fu.a)(n),n}return Object(Br.a)(i,[{key:"priority",get:function(){return 2}},{key:"confirmUpdate",value:function(e,t){return 0}},{key:"$",value:function(e){return i.$(e)}},{key:"empty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).empty(),this}},{key:"unmount",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).remove(),this}},{key:"remove",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete i.views[this.cid]),this.unmount(e),this}},{key:"onRemove",value:function(){}},{key:"setClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;t.classList.value=Array.isArray(e)?e.join(" "):e}},{key:"addClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}},{key:"removeClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}},{key:"setStyle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).css(e),this}},{key:"setAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return e!=null&&t!=null&&(t instanceof SVGElement?O.attr(t,e):this.$(t).attr(e)),this}},{key:"findAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=t;r&&r.nodeType===1;){var o=r.getAttribute(e);if(o!=null)return o;if(r===this.container)return null;r=r.parentNode}return null}},{key:"find",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors;return i.find(e,t,r).elems}},{key:"findOne",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors,o=this.find(e,t,r);return o.length>0?o[0]:null}},{key:"findByAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=t;r&&r.getAttribute;){var o=r.getAttribute(e);if((o!=null||r===this.container)&&o!=="false")return r;r=r.parentNode}return null}},{key:"getSelector",value:function(e,t){var r;if(e===this.container)return typeof t=="string"&&(r="> ".concat(t)),r;if(e){var o=O.index(e)+1;r="".concat(e.tagName.toLowerCase(),":nth-child(").concat(o,")"),t&&(r+=" > ".concat(t)),r=this.getSelector(e.parentNode,r)}return r}},{key:"prefixClassName",value:function(e){return zs.prefix(e)}},{key:"delegateEvents",value:function(e,t){var r=this;if(e==null)return this;t||this.undelegateEvents();var o=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(function(c){var p=c.match(o);if(p==null)return;var y=r.getEventHandler(e[c]);typeof y=="function"&&r.delegateEvent(p[1],p[2],y)}),this}},{key:"undelegateEvents",value:function(){return this.$(this.container).off(this.getEventNamespace()),this}},{key:"delegateDocumentEvents",value:function(e,t){return this.addEventListeners(document,e,t),this}},{key:"undelegateDocumentEvents",value:function(){return this.removeEventListeners(document),this}},{key:"delegateEvent",value:function(e,t,r){return this.$(this.container).on(e+this.getEventNamespace(),t,r),this}},{key:"undelegateEvent",value:function(e,t,r){var o=e+this.getEventNamespace();return t==null?this.$(this.container).off(o):typeof t=="string"?this.$(this.container).off(o,t,r):this.$(this.container).off(o,t),this}},{key:"addEventListeners",value:function(e,t,r){var o=this;if(t==null)return this;var c=this.getEventNamespace(),p=this.$(e);return Object.keys(t).forEach(function(y){var C=o.getEventHandler(t[y]);typeof C=="function"&&p.on(y+c,r,C)}),this}},{key:"removeEventListeners",value:function(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}},{key:"getEventNamespace",value:function(){return".".concat(Nl.prefixCls,"-event-").concat(this.cid)}},{key:"getEventHandler",value:function(e){var t=this,r;if(typeof e=="string"){var o=this[e];typeof o=="function"&&(r=function(){for(var p=arguments.length,y=new Array(p),C=0;C<p;C++)y[C]=arguments[C];return o.call.apply(o,[t].concat(y))})}else r=function(){for(var p=arguments.length,y=new Array(p),C=0;C<p;C++)y[C]=arguments[C];return e.call.apply(e,[t].concat(y))};return r}},{key:"getEventTarget",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.target,o=e.type,c=e.clientX,p=c===void 0?0:c,y=e.clientY,C=y===void 0?0:y;return t.fromPoint||o==="touchmove"||o==="touchend"?document.elementFromPoint(p,C):r}},{key:"stopPropagation",value:function(e){return this.setEventData(e,{propagationStopped:!0}),this}},{key:"isPropagationStopped",value:function(e){return this.getEventData(e).propagationStopped===!0}},{key:"getEventData",value:function(e){return this.eventData(e)}},{key:"setEventData",value:function(e,t){return this.eventData(e,t)}},{key:"eventData",value:function(e,t){if(e==null)throw new TypeError("Event object required");var r=e.data,o="__".concat(this.cid,"__");return t==null?r==null?{}:r[o]||{}:(r==null&&(r=e.data={}),r[o]==null?r[o]=Object.assign({},t):r[o]=Object.assign(Object.assign({},r[o]),t),r[o])}},{key:"normalizeEvent",value:function(e){return i.normalizeEvent(e)}}]),i}(fl);(function(a){function s(t){return k()(t)}a.$=s;function i(t,r){return r?O.createSvgElement(t||"g"):O.createElementNS(t||"div")}a.createElement=i;function n(t,r,o){if(!t||t===".")return{elems:[r]};if(o){var c=o[t];if(c)return{elems:Array.isArray(c)?c:[c]}}return Nl.useCSSSelector?{isCSSSelector:!0,elems:s(r).find(t).toArray()}:{elems:[]}}a.find=n;function e(t){var r=t,o=t.originalEvent,c=o&&o.changedTouches&&o.changedTouches[0];if(c){for(var p in t)c[p]===void 0&&(c[p]=t[p]);r=c}var y=r.target;if(y){var C=y.correspondingUseElement;C&&(r.target=C)}return r}a.normalizeEvent=e})(so||(so={})),function(a){a.views={};function s(i){return a.views[i]||null}a.getView=s}(so||(so={}));var gg;(function(a){var s=0;function i(){var n="v".concat(s);return s+=1,n}a.uniqueId=i})(gg||(gg={}));var _A=function(s){return s};function h0(a,s){return s===0?"0%":"".concat(Math.round(a/s*100),"%")}function p0(a){var s=function(n,e,t,r){return e.isEdgeElement(t)?NA(a,n,e,t,r):kA(a,n,e,t,r)};return s}function kA(a,s,i,n,e){var t=i.cell,r=t.getAngle(),o=i.getUnrotatedBBoxOfElement(n),c=t.getBBox().getCenter(),p=Bt.create(e).rotate(r,c),y=p.x-o.x,C=p.y-o.y;return a&&(y=h0(y,o.width),C=h0(C,o.height)),s.anchor={name:"topLeft",args:{dx:y,dy:C,rotate:!0}},s}function NA(a,s,i,n,e){var t=i.getConnection();if(!t)return s;var r=t.closestPointLength(e);if(a){var o=t.length();s.anchor={name:"ratio",args:{ratio:r/o}}}else s.anchor={name:"length",args:{length:r}};return s}var RA=p0(!0),PA=p0(!1),gp;(function(a){a.presets=de,a.registry=Os.create({type:"connection strategy"}),a.registry.register(a.presets,!0)})(gp||(gp={}));var IA=function(){function a(s){Object(_r.a)(this,a),this.view=s,this.clean()}return Object(Br.a)(a,[{key:"clean",value:function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Wv,this.pathCache={}}},{key:"get",value:function(i){var n=this.elemCache;return n.has(i)||this.elemCache.set(i,{}),this.elemCache.get(i)}},{key:"getData",value:function(i){var n=this.get(i);return n.data||(n.data={}),n.data}},{key:"getMatrix",value:function(i){var n=this.get(i);if(n.matrix==null){var e=this.view.rotatableNode||this.view.container;n.matrix=O.getTransformToElement(i,e)}return O.createSVGMatrix(n.matrix)}},{key:"getShape",value:function(i){var n=this.get(i);return n.shape==null&&(n.shape=O.toGeometryShape(i)),n.shape.clone()}},{key:"getBoundingRect",value:function(i){var n=this.get(i);return n.boundingRect==null&&(n.boundingRect=O.getBBox(i)),n.boundingRect.clone()}}]),a}(),Xi;(function(a){function s(y){return y!=null&&!i(y)}a.isJSONMarkup=s;function i(y){return y!=null&&typeof y=="string"}a.isStringMarkup=i;function n(y){return y==null||i(y)?y:f.cloneDeep(y)}a.clone=n;function e(y){return"".concat(y).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}a.sanitize=e;function t(y){var C=document.createDocumentFragment(),S={},I={},W=e(y),q=E.sanitizeHTML(W,{raw:!0});return q.forEach(function(ie){C.appendChild(ie)}),{fragment:C,selectors:I,groups:S}}a.parseStringMarkup=t;function r(y){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:O.ns.svg},S=document.createDocumentFragment(),I={},W={},q=[{markup:Array.isArray(y)?y:[y],parent:S,ns:C.ns}],ie=function(){var Le=q.pop(),Oe=Le.ns||O.ns.svg,it=Le.markup,at=Le.parent;it.forEach(function(Qe){var qt=Qe.tagName;if(!qt)throw new TypeError("Invalid tagName");Qe.ns&&(Oe=Qe.ns);var Kt=Oe===O.ns.svg,Tn=Oe?O.createElementNS(qt,Oe):O.createElement(qt),Bn=Qe.attrs;Bn&&(Kt?O.attr(Tn,O.kebablizeAttrs(Bn)):k()(Tn).attr(Bn));var tr=Qe.style;tr&&k()(Tn).css(tr);var hr=Qe.className;hr!=null&&Tn.setAttribute("class",Array.isArray(hr)?hr.join(" "):hr),Qe.textContent&&(Tn.textContent=Qe.textContent);var Lr=Qe.selector;if(Lr!=null){if(W[Lr])throw new TypeError("Selector must be unique");W[Lr]=Tn}if(Qe.groupSelector){var Vr=Qe.groupSelector;Array.isArray(Vr)||(Vr=[Vr]),Vr.forEach(function(Xn){I[Xn]||(I[Xn]=[]),I[Xn].push(Tn)})}at.appendChild(Tn);var dn=Qe.children;Array.isArray(dn)&&q.push({ns:Oe,markup:dn,parent:Tn})})};q.length>0;)ie();return Object.keys(I).forEach(function(ve){if(W[ve])throw new Error("Ambiguous group selector");W[ve]=I[ve]}),{fragment:S,selectors:W,groups:I}}a.parseJSONMarkup=r;function o(y){return y instanceof SVGElement?O.createSvgElement("g"):O.createElement("div")}function c(y){if(i(y)){var C=pi.createVectors(y),S=C.length;if(S===1)return{elem:C[0].node};if(S>1){var I=o(C[0].node);return C.forEach(function(ve){I.appendChild(ve.node)}),{elem:I}}return{}}var W=r(y),q=W.fragment,ie=null;return q.childNodes.length>1?(ie=o(q.firstChild),ie.appendChild(q)):ie=q.firstChild,{elem:ie,selectors:W.selectors}}a.renderMarkup=c;function p(y){for(var C=pi.createVectors(y),S=document.createDocumentFragment(),I=0,W=C.length;I<W;I+=1){var q=C[I].node;S.appendChild(q)}return{fragment:S,selectors:{}}}a.parseLabelStringMarkup=p})(Xi||(Xi={})),function(a){function s(e,t,r){if(e!=null){var o,c=e.tagName.toLowerCase();if(e===t)return typeof r=="string"?o="> ".concat(c," > ").concat(r):o="> ".concat(c),o;var p=e.parentNode;if(p&&p.childNodes.length>1){var y=O.index(e)+1;o="".concat(c,":nth-child(").concat(y,")")}else o=c;return r&&(o+=" > ".concat(r)),s(e.parentNode,t,o)}return r}a.getSelector=s;function i(e,t,r){if(e.nodeName==="#text")return null;var o=null,c=null,p=null,y=!1,C={tagName:e.tagName};if(e.attributes){p={};for(var S=0,I=e.attributes.length;S<I;S+=1){var W=e.attributes[S],q=W.nodeName,ie=W.nodeValue;q==="selector"?o=ie:q==="groupSelector"?c=ie:q==="class"?C.attrs={class:ie}:p[q]=ie}}return o==null&&(y=!0,o=s(e,t)),e.namespaceURI&&(C.ns=e.namespaceURI),C.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?C.ns=O.ns.xhtml:r&&(C.ns=r)),o&&(C.selector=o),c!=null&&(C.groupSelector=c),{markup:C,attrs:p,isCSSSelector:y}}function n(e){var t=a.sanitize(e),r=O.parseXML(t,{mimeType:"image/svg+xml"}),o=Array.prototype.slice.call(r.childNodes),c={},p=new WeakMap,y=function S(I,W,q){var ie=i(I,W,q);if(ie==null){var ve=p.get(I.parentNode);ve&&I.textContent&&(ve.textContent=I.textContent)}else{var Le=ie.markup,Oe=ie.attrs,it=ie.isCSSSelector;if(p.set(I,Le),Le.selector&&Oe!=null&&(Object.keys(Oe).length&&(c[Le.selector]=Oe),it&&delete Le.selector),I.childNodes&&I.childNodes.length>0)for(var at=0,Qe=I.childNodes.length;at<Qe;at+=1){var qt=I.childNodes[at],Kt=S(qt,W,Le.ns);Kt&&(Le.children==null&&(Le.children=[]),Le.children.push(Kt))}return Le}},C=o.map(function(S){return y(S,S)}).filter(function(S){return S!=null});return{markup:C,attrs:c}}a.xml2json=n}(Xi||(Xi={})),function(a){function s(){return"g"}a.getPortContainerMarkup=s;function i(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}a.getPortMarkup=i;function n(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}a.getPortLabelMarkup=n}(Xi||(Xi={})),function(a){function s(){return a.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}a.getEdgeMarkup=s;function i(){return a.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}a.getEdgeToolMarkup=i;function n(){return a.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}a.getEdgeVertexMarkup=n;function e(){return a.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}a.getEdgeArrowheadMarkup=e}(Xi||(Xi={})),function(a){function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return{tagName:"foreignObject",selector:"fo",children:[{ns:O.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:O.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:i?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}a.getForeignObjectMarkup=s}(Xi||(Xi={}));var Hv=function(){function a(s){Object(_r.a)(this,a),this.view=s}return Object(Br.a)(a,[{key:"cell",get:function(){return this.view.cell}},{key:"getDefinition",value:function(i){return this.cell.getAttrDefinition(i)}},{key:"processAttrs",value:function(i,n){var e=this,t,r,o,c,p,y=[];return Object.keys(n).forEach(function(C){var S=n[C],I=e.getDefinition(C),W=w.call(Ef.isValidDefinition,e.view,I,S,{elem:i,attrs:n,cell:e.cell,view:e.view});if(I&&W)typeof I=="string"?(t==null&&(t={}),t[I]=S):S!==null&&y.push({name:C,definition:I});else{t==null&&(t={});var q=a.CASE_SENSITIVE_ATTR.includes(C)?C:E.kebabCase(C);t[q]=S}}),y.forEach(function(C){var S=C.name,I=C.definition,W=n[S],q=I;typeof q.set=="function"&&(!O.isHTMLElement(i)&&a.DELAY_ATTRS.includes(S)?(p==null&&(p={}),p[S]=W):(r==null&&(r={}),r[S]=W));var ie=I;typeof ie.offset=="function"&&(o==null&&(o={}),o[S]=W);var ve=I;typeof ve.position=="function"&&(c==null&&(c={}),c[S]=W)}),{raw:n,normal:t,set:r,offset:o,position:c,delay:p}}},{key:"mergeProcessedAttrs",value:function(i,n){i.set=Object.assign(Object.assign({},i.set),n.set),i.position=Object.assign(Object.assign({},i.position),n.position),i.offset=Object.assign(Object.assign({},i.offset),n.offset);var e=i.normal&&i.normal.transform;e!=null&&n.normal&&(n.normal.transform=e),i.normal=n.normal}},{key:"findAttrs",value:function(i,n,e,t){var r=[],o=new Wv;return Object.keys(i).forEach(function(c){var p=i[c];if(!f.isPlainObject(p))return;var y=so.find(c,n,t),C=y.isCSSSelector,S=y.elems;e[c]=S;for(var I=0,W=S.length;I<W;I+=1){var q=S[I],ie=t&&t[c]===q,ve=o.get(q);if(ve){ve.array||(r.push(q),ve.array=!0,ve.attrs=[ve.attrs],ve.priority=[ve.priority]);var Le=ve.attrs,Oe=ve.priority;if(ie)Le.unshift(p),Oe.unshift(-1);else{var it=g.sortedIndex(Oe,C?-1:W);Le.splice(it,0,p),Oe.splice(it,0,W)}}else o.set(q,{elem:q,attrs:p,priority:ie?-1:W,array:!1})}}),r.forEach(function(c){var p=o.get(c),y=p.attrs;p.attrs=y.reduceRight(function(C,S){return f.merge(C,S)},{})}),o}},{key:"updateRelativeAttrs",value:function(i,n,e,t){var r=this,o=n.raw||{},c=n.normal||{},p=n.set,y=n.position,C=n.offset,S=n.delay,I=function(){return{elem:i,cell:r.cell,view:r.view,attrs:o,refBBox:e.clone()}};if(p!=null&&Object.keys(p).forEach(function(Bn){var tr=p[Bn],hr=r.getDefinition(Bn);if(hr!=null){var Lr=w.call(hr.set,r.view,tr,I());typeof Lr=="object"?c=Object.assign(Object.assign({},c),Lr):Lr!=null&&(c[Bn]=Lr)}}),O.isHTMLElement(i)){this.view.setAttrs(c,i);return}var W=c.transform,q=W?"".concat(W):null,ie=O.transformStringToMatrix(q),ve=new Bt(ie.e,ie.f);W&&(delete c.transform,ie.e=0,ie.f=0);var Le=1,Oe=1;if(y||C){var it=this.view.getScaleOfElement(i,t.scalableNode);Le=it.sx,Oe=it.sy}var at=!1;y!=null&&Object.keys(y).forEach(function(Bn){var tr=y[Bn],hr=r.getDefinition(Bn);if(hr!=null){var Lr=w.call(hr.position,r.view,tr,I());Lr!=null&&(at=!0,ve.translate(Bt.create(Lr).scale(Le,Oe)))}}),this.view.setAttrs(c,i);var Qe=!1;if(C!=null){var qt=this.view.getBoundingRectOfElement(i);if(qt.width>0&&qt.height>0){var Kt=O.transformRectangle(qt,ie).scale(1/Le,1/Oe);Object.keys(C).forEach(function(Bn){var tr=C[Bn],hr=r.getDefinition(Bn);if(hr!=null){var Lr=w.call(hr.offset,r.view,tr,{elem:i,cell:r.cell,view:r.view,attrs:o,refBBox:Kt});Lr!=null&&(Qe=!0,ve.translate(Bt.create(Lr).scale(Le,Oe)))}})}}(W!=null||at||Qe)&&(ve.round(1),ie.e=ve.x,ie.f=ve.y,i.setAttribute("transform",O.matrixToTransformString(ie)));var Tn=function(){S!=null&&Object.keys(S).forEach(function(tr){var hr=S[tr],Lr=r.getDefinition(tr);if(Lr!=null){var Vr=w.call(Lr.set,r.view,hr,I());typeof Vr=="object"?r.view.setAttrs(Vr,i):Vr!=null&&r.view.setAttrs(Z({},tr,Vr),i)}})};t.forceSync?Tn():lg.scheduleTask(Tn)}},{key:"update",value:function(i,n,e){var t=this,r={},o=this.findAttrs(e.attrs||n,i,r,e.selectors),c=e.attrs?this.findAttrs(n,i,r,e.selectors):o,p=[];o.each(function(S){var I=S.elem,W=S.attrs,q=t.processAttrs(I,W);if(q.set==null&&q.position==null&&q.offset==null&&q.delay==null)t.view.setAttrs(q.normal,I);else{var ie=c.get(I),ve=ie?ie.attrs:null,Le=ve&&W.ref==null?ve.ref:W.ref,Oe;if(Le){if(Oe=(r[Le]||t.view.find(Le,i,e.selectors))[0],!Oe)throw new Error('"'.concat(Le,'" reference does not exist.'))}else Oe=null;var it={node:I,refNode:Oe,attributes:ve,processedAttributes:q},at=p.findIndex(function(Qe){return Qe.refNode===I});at>-1?p.splice(at,0,it):p.push(it)}});var y=new Wv,C;p.forEach(function(S){var I=S.node,W=S.refNode,q,ie=W!=null&&e.rotatableNode!=null&&O.contains(e.rotatableNode,W);if(W&&(q=y.get(W)),!q){var ve=ie?e.rotatableNode:i;q=W?O.getBBox(W,{target:ve}):e.rootBBox,W&&y.set(W,q)}var Le;e.attrs&&S.attributes?(Le=t.processAttrs(I,S.attributes),t.mergeProcessedAttrs(Le,S.processedAttributes)):Le=S.processedAttributes;var Oe=q;ie&&e.rotatableNode!=null&&!e.rotatableNode.contains(I)&&(C||(C=O.transformStringToMatrix(O.attr(e.rotatableNode,"transform"))),Oe=O.transformRectangle(q,C));var it=p.find(function(at){return at.refNode===I});it&&(e.forceSync=!0),t.updateRelativeAttrs(I,Le,Oe,e)})}}]),a}();(function(a){a.CASE_SENSITIVE_ATTR=["viewBox"],a.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(Hv||(Hv={}));var v0=function(){function a(s,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Object(_r.a)(this,a),this.view=s;var e={},t={},r=0;Object.keys(i).forEach(function(c){var p=i[c];Array.isArray(p)||(p=[p]),p.forEach(function(y){var C=e[y];C||(r+=1,C=e[y]=1<<r),t[c]|=C})});var o=n;if(Array.isArray(o)||(o=[o]),o.forEach(function(c){e[c]||(r+=1,e[c]=1<<r)}),r>25)throw new Error("Maximum number of flags exceeded.");this.flags=e,this.attrs=t,this.bootstrap=n}return Object(Br.a)(a,[{key:"cell",get:function(){return this.view.cell}},{key:"getFlag",value:function(i){var n=this.flags;return n==null?0:Array.isArray(i)?i.reduce(function(e,t){return e|n[t]},0):n[i]|0}},{key:"hasAction",value:function(i,n){return i&this.getFlag(n)}},{key:"removeAction",value:function(i,n){return i^i&this.getFlag(n)}},{key:"getBootstrapFlag",value:function(){return this.getFlag(this.bootstrap)}},{key:"getChangedFlag",value:function(){var i=this,n=0;return this.attrs&&Object.keys(this.attrs).forEach(function(e){i.cell.hasChanged(e)&&(n|=i.attrs[e])}),n}}]),a}(),LA=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Ss=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(_r.a)(this,i),e=s.call(this),e.cell=n,e.options=e.ensureOptions(t),e.graph=e.options.graph,e.attr=new Hv(Object(fu.a)(e)),e.flag=new v0(Object(fu.a)(e),e.options.actions,e.options.bootstrap),e.cache=new IA(Object(fu.a)(e)),e.setContainer(e.ensureContainer()),e.setup(),e.$(e.container).data("view",Object(fu.a)(e)),e.init(),e}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"init",value:function(){}},{key:"onRemove",value:function(){this.removeTools()}},{key:"priority",get:function(){return this.options.priority}},{key:"rootSelector",get:function(){return this.options.rootSelector}},{key:"getConstructor",value:function(){return this.constructor}},{key:"ensureOptions",value:function(e){return this.getConstructor().getOptions(e)}},{key:"getContainerTagName",value:function(){return this.options.isSvgElement?"g":"div"}},{key:"getContainerStyle",value:function(){}},{key:"getContainerAttrs",value:function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}},{key:"getContainerClassName",value:function(){return this.prefixClassName("cell")}},{key:"ensureContainer",value:function(){return so.createElement(this.getContainerTagName(),this.options.isSvgElement)}},{key:"setContainer",value:function(e){if(this.container!==e){this.undelegateEvents(),this.container=e,this.options.events!=null&&this.delegateEvents(this.options.events);var t=this.getContainerAttrs();t!=null&&this.setAttrs(t,e);var r=this.getContainerStyle();r!=null&&this.setStyle(r,e);var o=this.getContainerClassName();o!=null&&this.addClass(o,e)}return this}},{key:"isNodeView",value:function(){return!1}},{key:"isEdgeView",value:function(){return!1}},{key:"render",value:function(){return this}},{key:"confirmUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return 0}},{key:"getBootstrapFlag",value:function(){return this.flag.getBootstrapFlag()}},{key:"getFlag",value:function(e){return this.flag.getFlag(e)}},{key:"hasAction",value:function(e,t){return this.flag.hasAction(e,t)}},{key:"removeAction",value:function(e,t){return this.flag.removeAction(e,t)}},{key:"handleAction",value:function(e,t,r,o){if(this.hasAction(e,t)){r();var c=[t];return o&&(typeof o=="string"?c.push(o):c.push.apply(c,Object(Ca.a)(o))),this.removeAction(e,c)}return e}},{key:"setup",value:function(){var e=this;this.cell.on("changed",function(t){var r=t.options;return e.onAttrsChange(r)})}},{key:"onAttrsChange",value:function(e){var t=this.flag.getChangedFlag();if(e.updated||!t)return;e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,t,this.priority,e)}},{key:"parseJSONMarkup",value:function(e,t){var r=Xi.parseJSONMarkup(e),o=r.selectors,c=this.rootSelector;if(t&&c){if(o[c])throw new Error("Invalid root selector");o[c]=t}return r}},{key:"can",value:function(e){var t=this.graph.options.interacting;if(typeof t=="function"&&(t=w.call(t,this.graph,this)),typeof t=="object"){var r=t[e];return typeof r=="function"&&(r=w.call(r,this.graph,this)),r!==!1}return typeof t=="boolean"?t:!1}},{key:"cleanCache",value:function(){return this.cache.clean(),this}},{key:"getCache",value:function(e){return this.cache.get(e)}},{key:"getDataOfElement",value:function(e){return this.cache.getData(e)}},{key:"getMatrixOfElement",value:function(e){return this.cache.getMatrix(e)}},{key:"getShapeOfElement",value:function(e){return this.cache.getShape(e)}},{key:"getScaleOfElement",value:function(e,t){var r,o;if(t&&t.contains(e)){var c=O.scale(t);r=1/c.sx,o=1/c.sy}else r=1,o=1;return{sx:r,sy:o}}},{key:"getBoundingRectOfElement",value:function(e){return this.cache.getBoundingRect(e)}},{key:"getBBoxOfElement",value:function(e){var t=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),o=this.getRootRotatedMatrix(),c=this.getRootTranslatedMatrix();return O.transformRectangle(t,c.multiply(o).multiply(r))}},{key:"getUnrotatedBBoxOfElement",value:function(e){var t=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),o=this.getRootTranslatedMatrix();return O.transformRectangle(t,o.multiply(r))}},{key:"getBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t;if(e.useCellGeometry){var r=this.cell,o=r.isNode()?r.getAngle():0;t=r.getBBox().bbox(o)}else t=this.getBBoxOfElement(this.container);return this.graph.localToGraph(t)}},{key:"getRootTranslatedMatrix",value:function(){var e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return O.createSVGMatrix().translate(t.x,t.y)}},{key:"getRootRotatedMatrix",value:function(){var e=O.createSVGMatrix(),t=this.cell,r=t.isNode()?t.getAngle():0;if(r){var o=t.getBBox(),c=o.width/2,p=o.height/2;e=e.translate(c,p).rotate(r).translate(-c,-p)}return e}},{key:"findMagnet",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.findByAttr("magnet",e)}},{key:"updateAttrs",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.rootBBox==null&&(r.rootBBox=new qr),r.selectors==null&&(r.selectors=this.selectors),this.attr.update(e,t,r)}},{key:"isEdgeElement",value:function(e){return this.cell.isEdge()&&(e==null||e===this.container)}},{key:"prepareHighlight",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e&&this.$(e)[0]||this.container;return t.partial=r===this.container,r}},{key:"highlight",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:r,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:r,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:r,options:t,view:this,node:this.cell,cell:this.cell}),this}},{key:"unhighlight",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:r,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:r,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:r,options:t,view:this,edge:this.cell,cell:this.cell}),this}},{key:"notifyUnhighlight",value:function(e,t){}},{key:"getEdgeTerminal",value:function(e,t,r,o,c){var p=this.cell,y=this.findAttr("port",e),C=e.getAttribute("data-selector"),S={cell:p.id};return C!=null&&(S.magnet=C),y!=null?(S.port=y,p.isNode()&&(!p.hasPort(y)&&C==null&&(S.selector=this.getSelector(e)))):C==null&&this.container!==e&&(S.selector=this.getSelector(e)),this.customizeEdgeTerminal(S,e,t,r,o,c)}},{key:"customizeEdgeTerminal",value:function(e,t,r,o,c,p){var y=c.getStrategy()||this.graph.options.connecting.strategy;if(y){var C=typeof y=="string"?y:y.name,S=typeof y=="string"?{}:y.args||{},I=gp.registry;if(C){var W=I.get(C);if(W==null)return I.onNotFound(C);var q=w.call(W,this.graph,e,this,t,new Bt(r,o),c,p,S);if(q)return q}}return e}},{key:"getMagnetFromEdgeTerminal",value:function(e){var t=this.cell,r=this.container,o=e.port,c=e.magnet,p;return o!=null&&t.isNode()&&t.hasPort(o)?p=this.findPortElem(o,c)||r:(c||(c=e.selector),!c&&o!=null&&(c='[port="'.concat(o,'"]')),p=this.findOne(c,r,this.selectors)),p}},{key:"animate",value:function(e,t){var r=typeof e=="string"?this.findOne(e):e;if(r==null)throw new Error("Invalid animation element.");var o=r.parentNode,c=function(){o||O.remove(r)},p=pi.create(r);o||p.appendTo(this.graph.view.stage);var y=t.complete;return t.complete=function(C){c(),y&&y(C)},p.animate(t)}},{key:"animateTransform",value:function(e,t){var r=typeof e=="string"?this.findOne(e):e;if(r==null)throw new Error("Invalid animation element.");var o=r.parentNode,c=function(){o||O.remove(r)},p=pi.create(r);o||p.appendTo(this.graph.view.stage);var y=t.complete;return t.complete=function(C){c(),y&&y(C)},p.animateTransform(t)}},{key:"hasTools",value:function(e){var t=this.tools;return t==null?!1:e==null?!0:t.name===e}},{key:"addTools",value:function(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){var t=Rl.isToolsView(e)?e:new Rl(e);this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()}return this}},{key:"updateTools",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tools&&this.tools.update(e),this}},{key:"removeTools",value:function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}},{key:"hideTools",value:function(){return this.tools&&this.tools.hide(),this}},{key:"showTools",value:function(){return this.tools&&this.tools.show(),this}},{key:"renderTools",value:function(){var e=this.cell.getTools();return this.addTools(e),this}},{key:"notify",value:function(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}},{key:"getEventArgs",value:function(e,t,r){var o=this,c=o.cell;return t==null||r==null?{e,view:o,cell:c}:{e,x:t,y:r,view:o,cell:c}}},{key:"onClick",value:function(e,t,r){this.notify("cell:click",this.getEventArgs(e,t,r))}},{key:"onDblClick",value:function(e,t,r){this.notify("cell:dblclick",this.getEventArgs(e,t,r))}},{key:"onContextMenu",value:function(e,t,r){this.notify("cell:contextmenu",this.getEventArgs(e,t,r))}},{key:"onMouseDown",value:function(e,t,r){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,r))}},{key:"onMouseUp",value:function(e,t,r){this.notify("cell:mouseup",this.getEventArgs(e,t,r)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}},{key:"onMouseMove",value:function(e,t,r){this.notify("cell:mousemove",this.getEventArgs(e,t,r))}},{key:"onMouseOver",value:function(e){this.notify("cell:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){this.notify("cell:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){this.notify("cell:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){this.notify("cell:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,t,r,o){this.notify("cell:mousewheel",Object.assign({delta:o},this.getEventArgs(e,t,r)))}},{key:"onCustomEvent",value:function(e,t,r,o){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,r,o))),this.notify(t,Object.assign({},this.getEventArgs(e,r,o)))}},{key:"onMagnetMouseDown",value:function(e,t,r,o){}},{key:"onMagnetDblClick",value:function(e,t,r,o){}},{key:"onMagnetContextMenu",value:function(e,t,r,o){}},{key:"onLabelMouseDown",value:function(e,t,r){}},{key:"checkMouseleave",value:function(e){var t=this.graph;t.renderer.isAsync()&&t.renderer.dumpView(this);var r=this.getEventTarget(e,{fromPoint:!0}),o=t.renderer.findViewByElem(r);if(o===this)return;if(this.onMouseLeave(e),!o)return;o.onMouseEnter(e)}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(e){this.defaults=this.getOptions(e)}},{key:"getOptions",value:function(e){var t=function(I,W){return W!=null?g.uniq([].concat(Object(Ca.a)(Array.isArray(I)?I:[I]),Object(Ca.a)(Array.isArray(W)?W:[W]))):Array.isArray(I)?Object(Ca.a)(I):[I]},r=f.cloneDeep(this.getDefaults()),o=e.bootstrap,c=e.actions,p=e.events,y=e.documentEvents,C=LA(e,["bootstrap","actions","events","documentEvents"]);return o&&(r.bootstrap=t(r.bootstrap,o)),c&&Object.keys(c).forEach(function(S){var I=c[S],W=r.actions[S];I&&W?r.actions[S]=t(W,I):I&&(r.actions[S]=t(I))}),p&&(r.events=Object.assign(Object.assign({},r.events),p)),e.documentEvents&&(r.documentEvents=Object.assign(Object.assign({},r.documentEvents),y)),f.merge(r,C)}}]),i}(so);Ss.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(a){a.Flag=v0,a.Attr=Hv}(Ss||(Ss={})),function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"}a.isCellView=s}(Ss||(Ss={})),function(a){function s(n){return function(e){e.config({priority:n})}}a.priority=s;function i(n){return function(e){e.config({bootstrap:n})}}a.bootstrap=i}(Ss||(Ss={})),function(a){a.registry=Os.create({type:"view"})}(Ss||(Ss={}));var Rl=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(_r.a)(this,i),n=s.call(this),n.svgContainer=n.createContainer(!0,e),n.htmlContainer=n.createContainer(!1,e),n.config(e),n}return Object(Br.a)(i,[{key:"name",get:function(){return this.options.name}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"createContainer",value:function(e,t){var r=e?so.createElement("g",!0):so.createElement("div",!1);return O.addClass(r,this.prefixClassName("cell-tools")),t.className&&O.addClass(r,t.className),r}},{key:"config",value:function(e){if(this.options=Object.assign(Object.assign({},this.options),e),!Ss.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(O.addClass(this.svgContainer,this.prefixClassName("edge-tools")),O.addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(O.addClass(this.svgContainer,this.prefixClassName("node-tools")),O.addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];var r=[];t.forEach(function(q){if(i.ToolItem.isToolItem(q))q.name==="vertices"?r.unshift(q):r.push(q);else{var ie=typeof q=="object"?q.name:q;ie==="vertices"?r.unshift(q):r.push(q)}});for(var o=0;o<r.length;o+=1){var c=r[o],p=void 0;if(i.ToolItem.isToolItem(c))p=c;else{var y=typeof c=="object"?c.name:c,C=typeof c=="object"?c.args||{}:{};if(y){if(this.cell.isNode()){var S=bp.registry.get(y);if(S)p=new S(C);else return bp.registry.onNotFound(y)}else if(this.cell.isEdge()){var I=Ep.registry.get(y);if(I)p=new I(C);else return Ep.registry.onNotFound(y)}}}if(p){p.config(this.cellView,this),p.render();var W=p.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer;W.appendChild(p.container),this.tools.push(p)}}return this}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.tools;return t&&t.forEach(function(r){e.toolId!==r.cid&&r.isVisible()&&r.update()}),this}},{key:"focus",value:function(e){var t=this.tools;return t&&t.forEach(function(r){e===r?r.show():r.hide()}),this}},{key:"blur",value:function(e){var t=this.tools;return t&&t.forEach(function(r){r!==e&&!r.isVisible()&&(r.show(),r.update())}),this}},{key:"hide",value:function(){return this.focus(null)}},{key:"show",value:function(){return this.blur(null)}},{key:"remove",value:function(){var e=this.tools;return e&&(e.forEach(function(t){return t.remove()}),this.tools=null),O.remove(this.svgContainer),O.remove(this.htmlContainer),ni(Object(ui.a)(i.prototype),"remove",this).call(this)}},{key:"mount",value:function(){var e=this.tools,t=this.cellView;if(t&&e){var r=e.some(function(p){return p.options.isSVGElement!==!1}),o=e.some(function(p){return p.options.isSVGElement===!1});if(r){var c=this.options.local?t.container:t.graph.view.decorator;c.appendChild(this.svgContainer)}o&&this.graph.container.appendChild(this.htmlContainer)}return this}}]),i}(so);(function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&e.graph!=null&&e.cell!=null&&typeof e.config=="function"&&typeof e.update=="function"&&typeof e.focus=="function"&&typeof e.blur=="function"&&typeof e.show=="function"&&typeof e.hide=="function"}a.isToolsView=s})(Rl||(Rl={})),function(a){var s=function(i){Object(Zr.a)(e,i);var n=Object(Wr.a)(e);function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(_r.a)(this,e),t=n.call(this),t.visible=!0,t.options=t.getOptions(r),t.container=so.createElement(t.options.tagName||"g",t.options.isSVGElement!==!1),O.addClass(t.container,t.prefixClassName("cell-tool")),typeof t.options.className=="string"&&O.addClass(t.container,t.options.className),t.init(),t}return Object(Br.a)(e,[{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"name",get:function(){return this.options.name}},{key:Symbol.toStringTag,get:function(){return e.toStringTag}},{key:"init",value:function(){}},{key:"getOptions",value:function(r){var o=this.constructor;return o.getOptions(r)}},{key:"delegateEvents",value:function(){return this.options.events&&ni(Object(ui.a)(e.prototype),"delegateEvents",this).call(this,this.options.events),this}},{key:"config",value:function(r,o){return this.cellView=r,this.parent=o,this.stamp(this.container),this.cell.isEdge()?O.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&O.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}},{key:"render",value:function(){this.empty();var r=this.options.markup;if(r){var o=Xi.isStringMarkup(r)?Xi.parseStringMarkup(r):Xi.parseJSONMarkup(r);this.container.appendChild(o.fragment),this.childNodes=o.selectors}return this.onRender(),this}},{key:"onRender",value:function(){}},{key:"update",value:function(){return this}},{key:"stamp",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;r&&r.setAttribute("data-cell-id",this.cellView.cell.id)}},{key:"show",value:function(){return this.container.style.display="",this.visible=!0,this}},{key:"hide",value:function(){return this.container.style.display="none",this.visible=!1,this}},{key:"isVisible",value:function(){return!!this.visible}},{key:"focus",value:function(){var r=this.options.focusOpacity;return r!=null&&Number.isFinite(r)&&(this.container.style.opacity="".concat(r)),this.parent.focus(this),this}},{key:"blur",value:function(){return this.container.style.opacity="",this.parent.blur(this),this}},{key:"guard",value:function(r){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(r,this.cellView)}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(r){this.defaults=this.getOptions(r)}},{key:"getOptions",value:function(r){return f.merge(f.cloneDeep(this.getDefaults()),r)}}]),e}(so);s.defaults={isSVGElement:!0,tagName:"g"},a.ToolItem=s,function(i){var n=0;function e(r){return r?E.pascalCase(r):(n+=1,"CustomTool".concat(n))}function t(r){var o=f.createClass(e(r.name),this);return o.config(r),o}i.define=t}(s=a.ToolItem||(a.ToolItem={})),function(i){i.toStringTag="X6.".concat(i.name);function n(e){if(e==null)return!1;if(e instanceof i)return!0;var t=e[Symbol.toStringTag],r=e;return(t==null||t===i.toStringTag)&&r.graph!=null&&r.cell!=null&&typeof r.config=="function"&&typeof r.update=="function"&&typeof r.focus=="function"&&typeof r.blur=="function"&&typeof r.show=="function"&&typeof r.hide=="function"&&typeof r.isVisible=="function"}i.isToolItem=n}(s=a.ToolItem||(a.ToolItem={}))}(Rl||(Rl={}));function m0(a,s,i,n){var e=w.call(gp.presets.pinRelative,this.graph,{},s,i,a,this.cell,n,{});return e.anchor}function g0(a,s){return s?a.cell.getBBox():a.cell.isEdge()?a.getConnection().bbox():a.getUnrotatedBBoxOfElement(a.container)}var Mh=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"onRender",value:function(){O.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}},{key:"update",value:function(){return this.updatePosition(),this}},{key:"updatePosition",value:function(){var e=this.cellView,t=e.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();O.transform(this.container,t,{absolute:!0})}},{key:"getNodeMatrix",value:function(){var e=this.cellView,t=this.options,r=t.x,o=r===void 0?0:r,c=t.y,p=c===void 0?0:c,y=t.offset,C=t.useCellGeometry,S=t.rotate,I=g0(e,C),W=e.cell.getAngle();S||(I=I.bbox(W));var q=0,ie=0;typeof y=="number"?(q=y,ie=y):typeof y=="object"&&(q=y.x,ie=y.y),o=T.normalizePercentage(o,I.width),p=T.normalizePercentage(p,I.height);var ve=O.createSVGMatrix().translate(I.x+I.width/2,I.y+I.height/2);return S&&(ve=ve.rotate(W)),ve=ve.translate(o+q-I.width/2,p+ie-I.height/2),ve}},{key:"getEdgeMatrix",value:function(){var e=this.cellView,t=this.options,r=t.offset,o=r===void 0?0:r,c=t.distance,p=c===void 0?0:c,y=t.rotate,C,S,I;T.isPercentage(p)?C=e.getTangentAtRatio(parseFloat(p)/100):C=e.getTangentAtLength(p),C?(S=C.start,I=C.vector().vectorAngle(new Bt(1,0))||0):(S=e.getConnection().start,I=0);var W=O.createSVGMatrix().translate(S.x,S.y).rotate(I);return typeof o=="object"?W=W.translate(o.x||0,o.y||0):W=W.translate(0,o),y||(W=W.rotate(-I)),W}},{key:"onMouseDown",value:function(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();var t=this.options.onClick;typeof t=="function"&&w.call(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}]),i}(Rl.ToolItem);(function(a){a.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Mh||(Mh={})),function(a){a.Remove=a.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(i){var n=i.view,e=i.btn;e.parent.remove(),n.cell.remove({ui:!0,toolId:e.cid})}})}(Mh||(Mh={}));var jA=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Kv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"onRender",value:function(){if(O.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var e=this.options.attrs,t=e.class,r=jA(e,["class"]);O.attr(this.container,O.kebablizeAttrs(r)),t&&O.addClass(this.container,t)}this.update()}},{key:"update",value:function(){var e=this.cellView,t=this.options,r=t.useCellGeometry,o=t.rotate,c=T.normalizeSides(t.padding),p=g0(e,r).moveAndExpand({x:-c.left,y:-c.top,width:c.left+c.right,height:c.top+c.bottom}),y=e.cell;if(y.isNode()){var C=y.getAngle();if(C)if(o){var S=y.getBBox().getCenter();O.rotate(this.container,C,S.x,S.y,{absolute:!0})}else p=p.bbox(C)}return O.attr(this.container,p.toJSON()),this}}]),i}(Rl.ToolItem);(function(a){a.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(Kv||(Kv={}));var Kp=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.handles=[],n}return Object(Br.a)(i,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"onRender",value:function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}},{key:"update",value:function(){var e=this.vertices;return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(r){e.stopHandleListening(r),r.remove()})}},{key:"renderHandles",value:function(){for(var e=this,t=this.vertices,r=0,o=t.length;r<o;r+=1){var c=t[r],p=this.options.createHandle,y=this.options.processHandle,C=p({index:r,graph:this.graph,guard:function(I){return e.guard(I)},attrs:this.options.attrs||{}});y&&y(C),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:C}),C.updatePosition(c.x,c.y),this.stamp(C.container),this.container.appendChild(C.container),this.handles.push(C),this.startHandleListening(C)}}},{key:"updateHandles",value:function(){for(var e=this.vertices,t=0,r=e.length;t<r;t+=1){var o=e[t],c=this.handles[t];c&&c.updatePosition(o.x,o.y)}}},{key:"updatePath",value:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}},{key:"startHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}},{key:"stopHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}},{key:"getNeighborPoints",value:function(e){var t=this.cellView,r=this.vertices,o=e>0?r[e-1]:t.sourceAnchor,c=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:Bt.create(o),next:Bt.create(c)}}},{key:"getMouseEventArgs",value:function(e){var t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY),o=r.x,c=r.y;return{e:t,x:o,y:c}}},{key:"onHandleChange",value:function(e){var t=e.e;this.focus();var r=this.cellView;if(r.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var o=this.getMouseEventArgs(t),c=o.e,p=o.x,y=o.y;r.notifyMouseDown(c,p,y)}}},{key:"onHandleChanging",value:function(e){var t=e.handle,r=e.e,o=this.cellView,c=t.options.index,p=this.getMouseEventArgs(r),y=p.e,C=p.x,S=p.y,I={x:C,y:S};this.snapVertex(I,c),o.cell.setVertexAt(c,I,{ui:!0,toolId:this.cid}),t.updatePosition(I.x,I.y),this.options.stopPropagation||o.notifyMouseMove(y,C,S)}},{key:"onHandleChanged",value:function(e){var t=e.e,r=this.options,o=this.cellView;if(r.addable&&this.updatePath(),!r.removeRedundancies)return;var c=o.removeRedundantLinearVertices({ui:!0,toolId:this.cid});c&&this.render(),this.blur(),o.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&o.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var p=this.getMouseEventArgs(t),y=p.e,C=p.x,S=p.y;this.options.stopPropagation||o.notifyMouseUp(y,C,S),o.checkMouseleave(y),r.onChanged&&r.onChanged({edge:o.cell,edgeView:o})}},{key:"snapVertex",value:function(e,t){var r=this.options.snapRadius||0;if(r>0){var o=this.getNeighborPoints(t),c=o.prev,p=o.next;Math.abs(e.x-c.x)<r?e.x=c.x:Math.abs(e.x-p.x)<r&&(e.x=p.x),Math.abs(e.y-c.y)<r?e.y=o.prev.y:Math.abs(e.y-p.y)<r&&(e.y=p.y)}}},{key:"onHandleRemove",value:function(e){var t=e.handle,r=e.e;if(this.options.removable){var o=t.options.index,c=this.cellView;c.cell.removeVertexAt(o,{ui:!0}),this.options.addable&&this.updatePath(),c.checkMouseleave(this.normalizeEvent(r))}}},{key:"onPathMouseDown",value:function(e){var t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();var r=this.normalizeEvent(e),o=this.graph.snapToGrid(r.clientX,r.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var c=t.getVertexIndex(o.x,o.y);this.snapVertex(o,c),t.cell.insertVertex(o,c,{ui:!0,toolId:this.cid}),this.render();var p=this.handles[c];this.eventData(r,{vertexAdded:!0}),p.onMouseDown(r)}},{key:"onRemove",value:function(){this.resetHandles()}}]),i}(Rl.ToolItem);(function(a){var s=function(i){Object(Zr.a)(e,i);var n=Object(Wr.a)(e);function e(t){var r;return Object(_r.a)(this,e),r=n.call(this),r.options=t,r.render(),r.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),r}return Object(Br.a)(e,[{key:"graph",get:function(){return this.options.graph}},{key:"render",value:function(){this.container=so.createElement("circle",!0);var r=this.options.attrs;if(typeof r=="function"){var o=a.getDefaults();this.setAttrs(Object.assign(Object.assign({},o.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-vertex"))}},{key:"updatePosition",value:function(r,o){this.setAttrs({cx:r,cy:o})}},{key:"onMouseDown",value:function(r){if(this.options.guard(r))return;r.stopPropagation(),r.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data),this.emit("change",{e:r,handle:this})}},{key:"onMouseMove",value:function(r){this.emit("changing",{e:r,handle:this})}},{key:"onMouseUp",value:function(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}},{key:"onDoubleClick",value:function(r){this.emit("remove",{e:r,handle:this})}}]),e}(so);a.Handle=s})(Kp||(Kp={})),function(a){var s,i=zs.prefix("edge-tool-vertex-path");a.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new a.Handle(e)},markup:[{tagName:"path",selector:"connection",className:i,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(s={},Z(s,"mousedown .".concat(i),"onPathMouseDown"),Z(s,"touchstart .".concat(i),"onPathMouseDown"),s)})}(Kp||(Kp={}));var $p=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.handles=[],n}return Object(Br.a)(i,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"update",value:function(){return this.render(),this}},{key:"onRender",value:function(){O.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var e=this.cellView,t=Object(Ca.a)(this.vertices);t.unshift(e.sourcePoint),t.push(e.targetPoint);for(var r=0,o=t.length;r<o-1;r+=1){var c=t[r],p=t[r+1],y=this.renderHandle(c,p,r);this.stamp(y.container),this.handles.push(y)}return this}},{key:"renderHandle",value:function(e,t,r){var o=this,c=this.options.createHandle({index:r,graph:this.graph,guard:function(y){return o.guard(y)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(c),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:c}),this.updateHandle(c,e,t),this.container.appendChild(c.container),this.startHandleListening(c),c}},{key:"startHandleListening",value:function(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}},{key:"stopHandleListening",value:function(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(r){e.stopHandleListening(r),r.remove()})}},{key:"shiftHandleIndexes",value:function(e){for(var t=this.handles,r=0,o=t.length;r<o;r+=1)t[r].options.index+=e}},{key:"resetAnchor",value:function(e,t){var r=this.cellView.cell,o={ui:!0,toolId:this.cid};t?r.prop([e,"anchor"],t,o):r.removeProp([e,"anchor"],o)}},{key:"snapHandle",value:function(e,t,r){var o=e.options.axis,c=e.options.index,p=this.cellView,y=p.cell,C=y.getVertices(),S=C[c-2]||r.sourceAnchor,I=C[c+1]||r.targetAnchor,W=this.options.snapRadius;return Math.abs(t[o]-S[o])<W?t[o]=S[o]:Math.abs(t[o]-I[o])<W&&(t[o]=I[o]),t}},{key:"onHandleChanging",value:function(e){var t=e.handle,r=e.e,o=this.graph,c=this.options,p=this.cellView,y=c.anchor,C=t.options.axis,S=t.options.index-1,I=this.getEventData(r),W=this.normalizeEvent(r),q=o.snapToGrid(W.clientX,W.clientY),ie=this.snapHandle(t,q.clone(),I),ve=f.cloneDeep(this.vertices),Le=ve[S],Oe=ve[S+1],it=p.sourceView,at=p.sourceBBox,Qe=!1,qt=!1;if(Le?S===0?at.containsPoint(Le)?(ve.shift(),this.shiftHandleIndexes(-1),Qe=!0):(Le[C]=ie[C],qt=!0):Le[C]=ie[C]:(Le=p.sourceAnchor.toJSON(),Le[C]=ie[C],at.containsPoint(Le)?Qe=!0:(ve.unshift(Le),this.shiftHandleIndexes(1),qt=!0)),typeof y=="function"&&it){if(Qe){var Kt=I.sourceAnchor.clone();Kt[C]=ie[C];var Tn=w.call(y,p,Kt,it,p.sourceMagnet||it.container,"source",p,this);this.resetAnchor("source",Tn)}qt&&this.resetAnchor("source",I.sourceAnchorDef)}var Bn=p.targetView,tr=p.targetBBox,hr=!1,Lr=!1;if(Oe?S===ve.length-2?tr.containsPoint(Oe)?(ve.pop(),hr=!0):(Oe[C]=ie[C],Lr=!0):Oe[C]=ie[C]:(Oe=p.targetAnchor.toJSON(),Oe[C]=ie[C],tr.containsPoint(Oe)?hr=!0:(ve.push(Oe),Lr=!0)),typeof y=="function"&&Bn){if(hr){var Vr=I.targetAnchor.clone();Vr[C]=ie[C];var dn=w.call(y,p,Vr,Bn,p.targetMagnet||Bn.container,"target",p,this);this.resetAnchor("target",dn)}Lr&&this.resetAnchor("target",I.targetAnchorDef)}Bt.equalPoints(ve,this.vertices)||this.cellView.cell.setVertices(ve,{ui:!0,toolId:this.cid}),this.updateHandle(t,Le,Oe,0),c.stopPropagation||p.notifyMouseMove(W,q.x,q.y)}},{key:"onHandleChange",value:function(e){var t=e.handle,r=e.e,o=this.options,c=this.handles,p=this.cellView,y=t.options.index;if(!Array.isArray(c))return;for(var C=0,S=c.length;C<S;C+=1)C!==y&&c[C].hide();if(this.focus(),this.setEventData(r,{sourceAnchor:p.sourceAnchor.clone(),targetAnchor:p.targetAnchor.clone(),sourceAnchorDef:f.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:f.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!o.stopPropagation){var I=this.normalizeEvent(r),W=this.graph.snapToGrid(I.clientX,I.clientY);p.notifyMouseDown(I,W.x,W.y)}}},{key:"onHandleChanged",value:function(e){var t=e.e,r=this.options,o=this.cellView;r.removeRedundancies&&o.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var c=this.normalizeEvent(t),p=this.graph.snapToGrid(c.clientX,c.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),r.stopPropagation||o.notifyMouseUp(c,p.x,p.y),o.checkMouseleave(c),r.onChanged&&r.onChanged({edge:o.cell,edgeView:o})}},{key:"updateHandle",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=this.options.precision||0,p=Math.abs(t.x-r.x)<c,y=Math.abs(t.y-r.y)<c;if(p||y){var C=new Ba(t,r),S=C.length();if(S<this.options.threshold)e.hide();else{var I=C.getCenter(),W=p?"x":"y";I[W]+=o||0;var q=C.vector().vectorAngle(new Bt(1,0));e.updatePosition(I.x,I.y,q,this.cellView),e.show(),e.options.axis=W}}else e.hide()}},{key:"onRemove",value:function(){this.resetHandles()}}]),i}(Rl.ToolItem);(function(a){var s=function(i){Object(Zr.a)(e,i);var n=Object(Wr.a)(e);function e(t){var r;return Object(_r.a)(this,e),r=n.call(this),r.options=t,r.render(),r.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),r}return Object(Br.a)(e,[{key:"render",value:function(){this.container=so.createElement("rect",!0);var r=this.options.attrs;if(typeof r=="function"){var o=a.getDefaults();this.setAttrs(Object.assign(Object.assign({},o.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-segment"))}},{key:"updatePosition",value:function(r,o,c,p){var y=p.getClosestPoint(new Bt(r,o))||new Bt(r,o),C=O.createSVGMatrix().translate(y.x,y.y);if(y.equals({x:r,y:o}))C=C.rotate(c);else{var S=new Ba(r,o,y.x,y.y),I=S.vector().vectorAngle(new Bt(1,0));I!==0&&(I+=90),C=C.rotate(I)}this.setAttrs({transform:O.matrixToTransformString(C),cursor:c%180===0?"row-resize":"col-resize"})}},{key:"onMouseDown",value:function(r){if(this.options.guard(r))return;this.trigger("change",{e:r,handle:this}),r.stopPropagation(),r.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data)}},{key:"onMouseMove",value:function(r){this.emit("changing",{e:r,handle:this})}},{key:"onMouseUp",value:function(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}}]),e}(so);a.Handle=s})($p||($p={})),function(a){a.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(i){return new a.Handle(i)},anchor:m0})}($p||($p={}));var $v=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"type",get:function(){return this.options.type}},{key:"onRender",value:function(){O.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()}},{key:"update",value:function(){var e=this.type,t=this.cellView,r=t.getTerminalView(e);return r?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}},{key:"updateAnchor",value:function(){var e=this.childNodes;if(!e)return;var t=e.anchor;if(!t)return;var r=this.type,o=this.cellView,c=this.options,p=o.getTerminalAnchor(r),y=o.cell.prop([r,"anchor"]);t.setAttribute("transform","translate(".concat(p.x,", ").concat(p.y,")"));var C=y?c.customAnchorAttrs:c.defaultAnchorAttrs;C&&Object.keys(C).forEach(function(S){t.setAttribute(S,C[S])})}},{key:"updateArea",value:function(){var e=this.childNodes;if(!e)return;var t=e.area;if(!t)return;var r=this.type,o=this.cellView,c=o.getTerminalView(r);if(c){var p=c.cell,y=o.getTerminalMagnet(r),C=this.options.areaPadding||0;Number.isFinite(C)||(C=0);var S,I,W;c.isEdgeElement(y)?(S=c.getBBox(),I=0,W=S.getCenter()):(S=c.getUnrotatedBBoxOfElement(y),I=p.getAngle(),W=S.getCenter(),I&&W.rotate(-I,p.getBBox().getCenter())),S.inflate(C),O.attr(t,{x:-S.width/2,y:-S.height/2,width:S.width,height:S.height,transform:"translate(".concat(W.x,", ").concat(W.y,") rotate(").concat(I,")")})}}},{key:"toggleArea",value:function(e){if(this.childNodes){var t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}},{key:"onMouseDown",value:function(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"resetAnchor",value:function(e){var t=this.type,r=this.cell;e?r.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):r.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}},{key:"onMouseMove",value:function(e){var t=this.type,r=this.cellView,o=r.getTerminalView(t);if(o==null)return;var c=this.normalizeEvent(e),p=o.cell,y=r.getTerminalMagnet(t),C=this.graph.clientToLocal(c.clientX,c.clientY),S=this.options.snap;if(typeof S=="function"){var I=w.call(S,r,C,o,y,t,r,this);C=Bt.create(I)}if(this.options.restrictArea)if(o.isEdgeElement(y)){var W=o.getClosestPoint(C);W&&(C=W)}else{var q=o.getUnrotatedBBoxOfElement(y),ie=p.getAngle(),ve=p.getBBox().getCenter(),Le=C.clone().rotate(ie,ve);q.containsPoint(Le)||(C=q.getNearestPointToPoint(Le).rotate(-ie,ve))}var Oe,it=this.options.anchor;typeof it=="function"&&(Oe=w.call(it,r,C,o,y,t,r,this)),this.resetAnchor(Oe),this.update()}},{key:"onMouseUp",value:function(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"onDblClick",value:function(){var e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}]),i}(Rl.ToolItem);(function(a){a.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:m0,snap:function(i,n,e,t,r,o){var c=o.options.snapRadius||0,p=t==="source",y=p?0:-1,C=this.cell.getVertexAt(y)||this.getTerminalAnchor(p?"target":"source");return C&&(Math.abs(C.x-i.x)<c&&(i.x=C.x),Math.abs(C.y-i.y)<c&&(i.y=C.y)),i}})})($v||($v={}));var UA=$v.define({name:"source-anchor",type:"source"}),FA=$v.define({name:"target-anchor",type:"target"}),BA=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Yv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"type",get:function(){return this.options.type}},{key:"ratio",get:function(){return this.options.ratio}},{key:"init",value:function(){if(this.options.attrs){var e=this.options.attrs,t=e.class,r=BA(e,["class"]);this.setAttrs(r,this.container),t&&O.addClass(this.container,t)}}},{key:"onRender",value:function(){O.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()}},{key:"update",value:function(){var e=this.ratio,t=this.cellView,r=t.getTangentAtRatio(e),o=r?r.start:t.getPointAtRatio(e),c=r&&r.vector().vectorAngle(new Bt(1,0))||0;if(!o)return this;var p=O.createSVGMatrix().translate(o.x,o.y).rotate(c);return O.transform(this.container,p,{absolute:!0}),this}},{key:"onMouseDown",value:function(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();var t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var r=this.graph.snapToGrid(e.clientX,e.clientY),o=t.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:{toolId:this.cid}});this.cellView.setEventData(e,o),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}},{key:"onMouseMove",value:function(e){var t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,r.x,r.y),this.update()}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),r=this.cellView,o=this.graph.snapToGrid(t.clientX,t.clientY);r.onMouseUp(t,o.x,o.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}]),i}(Rl.ToolItem);(function(a){a.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(Yv||(Yv={}));var VA=Yv.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),zA=Yv.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),yp=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.labelIndex=-1,n.distance=.5,n}return Object(Br.a)(i,[{key:"render",value:function(){return this.createElement(),this.update(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}},{key:"createElement",value:function(){var e=this.cell,t=[this.prefixClassName("".concat(e.isEdge()?"edge":"node","-tool-editor")),this.prefixClassName("cell-tool-editor")];this.editor=Rl.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}},{key:"update",value:function(){var e=this.graph,t=this.cell,r=this.editor,o=r.style,c=new Bt,p=20;if(t.isNode())c=t.getBBox().center,p=t.size().width-4;else if(t.isEdge()){var y=this.options.event,C=y.target,S=C.parentElement,I=S&&O.hasClass(S,this.prefixClassName("edge-label"));if(I){var W=S.getAttribute("data-index")||"0";this.labelIndex=parseInt(W,10);var q=S.getAttribute("transform"),ie=O.parseTransformString(q),ve=ie.translation;c=new Bt(ve.tx,ve.ty),p=O.getBBox(C).width}else{if(!this.options.labelAddable)return this;c=e.clientToLocal(Bt.create(y.clientX,y.clientY));var Le=this.cellView,Oe=Le.path.closestPointLength(c);this.distance=Oe}}c=e.localToGraph(c),o.left="".concat(c.x,"px"),o.top="".concat(c.y,"px"),o.minWidth="".concat(p,"px");var it=e.scale();o.transform="scale(".concat(it.sx,", ").concat(it.sy,") translate(-50%, -50%)");var at=this.options.attrs;o.fontSize="".concat(at.fontSize,"px"),o.fontFamily=at.fontFamily,o.color=at.color,o.backgroundColor=at.backgroundColor;var Qe=this.options.getText,qt;return typeof Qe=="function"&&(qt=w.call(Qe,this.cellView,{cell:this.cell,index:this.labelIndex})),r.innerText=qt||"",this}},{key:"onDocumentMouseDown",value:function(e){if(e.target!==this.editor){var t=this.cell,r=this.editor.innerText.replace(/\n$/,"")||"",o=this.options.setText;typeof o=="function"&&w.call(o,this.cellView,{cell:this.cell,value:r,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}},{key:"onDblClick",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.stopPropagation()}},{key:"autoFocus",value:function(){var e=this;setTimeout(function(){e.editor.focus(),e.selectText()})}},{key:"selectText",value:function(){if(window.getSelection){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}]),i}(Rl.ToolItem);(function(a){a.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(yp||(yp={})),function(a){a.NodeEditor=a.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(i){var n=i.cell;return n.attr("text/text")},setText:function(i){var n=i.cell,e=i.value;n.attr("text/text",e)}}),a.EdgeEditor=a.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:function(i){var n=i.cell,e=i.index;return e===-1?"":n.prop("labels/".concat(e,"/attrs/label/text"))},setText:function(i){var n=i.cell,e=i.value,t=i.index,r=i.distance,o=n;t===-1?o.appendLabel({position:{distance:r},attrs:{label:{text:e}}}):e?o.prop("labels/".concat(t,"/attrs/label/text"),e):typeof t=="number"&&o.removeLabelAt(t)}})}(yp||(yp={}));var y0=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},bp;(function(a){a.presets={boundary:Kv,button:Mh,"button-remove":Mh.Remove,"node-editor":yp.NodeEditor},a.registry=Os.create({type:"node tool",process:function(i,n){if(typeof n=="function")return n;var e=Rl.ToolItem,t=n.inherit,r=y0(n,["inherit"]);if(t){var o=this.get(t);o==null?this.onNotFound(t,"inherited"):e=o}return r.name==null&&(r.name=i),e.define.call(e,r)}}),a.registry.register(a.presets,!0)})(bp||(bp={}));var Ep;(function(a){a.presets={boundary:Kv,vertices:Kp,segments:$p,button:Mh,"button-remove":Mh.Remove,"source-anchor":UA,"target-anchor":FA,"source-arrowhead":VA,"target-arrowhead":zA,"edge-editor":yp.EdgeEditor},a.registry=Os.create({type:"edge tool",process:function(i,n){if(typeof n=="function")return n;var e=Rl.ToolItem,t=n.inherit,r=y0(n,["inherit"]);if(t){var o=this.get(t);o==null?this.onNotFound(t,"inherited"):e=o}return r.name==null&&(r.name=i),e.define.call(e,r)}}),a.registry.register(a.presets,!0)})(Ep||(Ep={}));var GA=Qf("center"),XA=Qf("topCenter"),WA=Qf("bottomCenter"),HA=Qf("leftMiddle"),KA=Qf("rightMiddle"),$A=Qf("topLeft"),YA=Qf("topRight"),QA=Qf("bottomLeft"),JA=Qf("bottomRight");function Qf(a){return function(s,i,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=e.rotate?s.getUnrotatedBBoxOfElement(i):s.getBBoxOfElement(i),r=t[a];r.x+=T.normalizePercentage(e.dx,t.width),r.y+=T.normalizePercentage(e.dy,t.height);var o=s.cell;return e.rotate?r.rotate(-o.getAngle(),o.getBBox().getCenter()):r}}function Qv(a){return function(s,i,n,e){if(n instanceof Element){var t=this.graph.renderer.findViewByElem(n),r;if(t)if(t.isEdgeElement(n)){var o=e.fixedAt!=null?e.fixedAt:"50%";r=b0(t,o)}else r=t.getBBoxOfElement(n).getCenter();else r=new Bt;return a.call(this,s,i,r,e)}return a.apply(this,arguments)}}function b0(a,s){var i=T.isPercentage(s),n=typeof s=="string"?parseFloat(s):s;return i?a.getPointAtRatio(n/100):a.getPointAtLength(n)}var ZA=function(s,i,n,e){var t=s.cell.getAngle(),r=s.getBBoxOfElement(i),o=r.getCenter(),c=r.getTopLeft(),p=r.getBottomRight(),y=e.padding;if(Number.isFinite(y)||(y=0),c.y+y<=n.y&&n.y<=p.y-y){var C=n.y-o.y;o.x+=t===0||t===180?0:C*1/Math.tan(Pi.toRad(t)),o.y+=C}else if(c.x+y<=n.x&&n.x<=p.x-y){var S=n.x-o.x;o.y+=t===90||t===270?0:S*Math.tan(Pi.toRad(t)),o.x+=S}return o},qA=Qv(ZA),eO=function(s,i,n,e,t){var r=s.cell.getConnectionPoint(this.cell,t);return(e.dx||e.dy)&&r.translate(e.dx||0,e.dy||0),r},tO=function(s,i,n,e){var t,r=0,o,c=s.cell;e.rotate?(t=s.getUnrotatedBBoxOfElement(i),o=c.getBBox().getCenter(),r=c.getAngle()):t=s.getBBoxOfElement(i);var p=e.padding;p!=null&&Number.isFinite(p)&&t.inflate(p),e.rotate&&n.rotate(r,o);var y=t.getNearestSideToPoint(n),C;switch(y){case"left":C=t.getLeftMiddle();break;case"right":C=t.getRightMiddle();break;case"top":C=t.getTopCenter();break;case"bottom":C=t.getBottomCenter();break;default:break}var S=e.direction;return S==="H"?(y==="top"||y==="bottom")&&(n.x<=t.x+t.width?C=t.getLeftMiddle():C=t.getRightMiddle()):S==="V"&&(n.y<=t.y+t.height?C=t.getTopCenter():C=t.getBottomCenter()),e.rotate?C.rotate(-r,o):C},nO=Qv(tO),xp;(function(a){a.presets=ae,a.registry=Os.create({type:"node endpoint"}),a.registry.register(a.presets,!0)})(xp||(xp={}));var rO=function(s,i,n,e){var t=e.ratio!=null?e.ratio:.5;return t>1&&(t/=100),s.getPointAtRatio(t)},aO=function(s,i,n,e){var t=e.length!=null?e.length:20;return s.getPointAtLength(t)},E0=function(s,i,n,e){var t=s.getClosestPoint(n);return t??new Bt},iO=Qv(E0),oO=function(s,i,n,e){var t=1e6,r=s.getConnection(),o=s.getConnectionSubdivisions(),c=new Ba(n.clone().translate(0,t),n.clone().translate(0,-t)),p=new Ba(n.clone().translate(t,0),n.clone().translate(-t,0)),y=c.intersect(r,{segmentSubdivisions:o}),C=p.intersect(r,{segmentSubdivisions:o}),S=[];return y&&S.push.apply(S,Object(Ca.a)(y)),C&&S.push.apply(S,Object(Ca.a)(C)),S.length>0?n.closest(S):e.fallbackAt!=null?b0(s,e.fallbackAt):w.call(E0,this,s,i,n,e)},sO=Qv(oO),wp;(function(a){a.presets=le,a.registry=Os.create({type:"edge endpoint"}),a.registry.register(a.presets,!0)})(wp||(wp={}));function Jv(a,s,i){var n;if(typeof i=="object"){if(Number.isFinite(i.y)){var e=new Ba(s,a),t=e.parallel(i.y),r=t.start,o=t.end;s=r,a=o}n=i.x}else n=i;if(n==null||!Number.isFinite(n))return a;var c=a.distance(s);return n===0&&c>0?a:a.move(s,-Math.min(n,c-1))}function Zv(a){var s=a.getAttribute("stroke-width");return s===null?0:parseFloat(s)||0}function uO(a){if(a==null)return null;var s=a;do{var i=s.tagName;if(typeof i!="string")return null;if(i=i.toUpperCase(),i==="G")s=s.firstElementChild;else if(i==="TITLE")s=s.nextElementSibling;else break}while(s);return s}var x0=function(s,i,n,e){var t=i.getBBoxOfElement(n);e.stroked&&t.inflate(Zv(n)/2);var r=s.intersect(t),o=r&&r.length?s.start.closest(r):s.end;return Jv(o,s.start,e.offset)},lO=function(s,i,n,e,t){var r=i.cell,o=r.isNode()?r.getAngle():0;if(o===0)return w.call(x0,this,s,i,n,e,t);var c=i.getUnrotatedBBoxOfElement(n);e.stroked&&c.inflate(Zv(n)/2);var p=c.getCenter(),y=s.clone().rotate(o,p),C=y.setLength(1e6).intersect(c),S=C&&C.length?y.start.closest(C).rotate(-o,p):s.end;return Jv(S,s.start,e.offset)},cO=function(s,i,n,e){var t,r,o=s.end,c=e.selector;if(typeof c=="string"?t=i.findOne(c):Array.isArray(c)?t=f.getByPath(n,c):t=uO(n),!O.isSVGGraphicsElement(t)){if(t===n||!O.isSVGGraphicsElement(n))return o;t=n}var p=i.getShapeOfElement(t),y=i.getMatrixOfElement(t),C=i.getRootTranslatedMatrix(),S=i.getRootRotatedMatrix(),I=C.multiply(S).multiply(y),W=I.inverse(),q=O.transformLine(s,W),ie=q.start.clone(),ve=i.getDataOfElement(t);if(e.insideout===!1){ve.shapeBBox==null&&(ve.shapeBBox=p.bbox());var Le=ve.shapeBBox;if(Le!=null&&Le.containsPoint(ie))return o}e.extrapolate===!0&&q.setLength(1e6);var Oe;if(Ii.isPath(p)){var it=e.precision||2;ve.segmentSubdivisions==null&&(ve.segmentSubdivisions=p.getSegmentSubdivisions({precision:it})),Oe={precision:it,segmentSubdivisions:ve.segmentSubdivisions},r=q.intersect(p,Oe)}else r=q.intersect(p);r?Array.isArray(r)&&(r=ie.closest(r)):e.sticky===!0&&(qr.isRectangle(p)?r=p.getNearestPointToPoint(ie):Eh.isEllipse(p)?r=p.intersectsWithLineFromCenterToPoint(ie):r=p.closestPoint(ie,Oe));var at=r?O.transformPoint(r,I):o,Qe=e.offset||0;return e.stroked!==!1&&(typeof Qe=="object"?(Qe=Object.assign({},Qe),Qe.x==null&&(Qe.x=0),Qe.x+=Zv(t)/2):Qe+=Zv(t)/2),Jv(at,s.start,Qe)};function dO(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=a.start,e=a.end,t,r,o,c;switch(s){case"left":c="x",t=e,r=n,o=-1;break;case"right":c="x",t=n,r=e,o=1;break;case"top":c="y",t=e,r=n,o=-1;break;case"bottom":c="y",t=n,r=e,o=1;break;default:return}n[c]<e[c]?t[c]=r[c]:r[c]=t[c],Number.isFinite(i)&&(t[c]+=o*i,r[c]+=o*i)}var fO=function(s,i,n,e){var t=e.alignOffset,r=e.align;return r&&dO(s,r,t),Jv(s.end,s.start,e.offset)},Cp;(function(a){a.presets=re,a.registry=Os.create({type:"connection point"}),a.registry.register(a.presets,!0)})(Cp||(Cp={}));var hO=function(s){return Object(Ca.a)(s)},pO=function(s,i,n){var e=i.side||"bottom",t=T.normalizeSides(i.padding||40),r=n.sourceBBox,o=n.targetBBox,c=r.getCenter(),p=o.getCenter(),y,C,S;switch(e){case"top":S=-1,y="y",C="height";break;case"left":S=-1,y="x",C="width";break;case"right":S=1,y="x",C="width";break;case"bottom":default:S=1,y="y",C="height";break}return c[y]+=S*(r[C]/2+t[e]),p[y]+=S*(o[C]/2+t[e]),S*(c[y]-p[y])>0?p[y]=c[y]:c[y]=p[y],[c.toJSON()].concat(Object(Ca.a)(s),[p.toJSON()])};function qv(a){return new qr(a.x,a.y,0,0)}function em(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=T.normalizeSides(a.padding||20);return{x:-s.left,y:-s.top,width:s.left+s.right,height:s.top+s.bottom}}function w0(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a.sourceBBox.clone().moveAndExpand(em(s))}function C0(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a.targetBBox.clone().moveAndExpand(em(s))}function vO(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a.sourceAnchor)return a.sourceAnchor;var i=w0(a,s);return i.getCenter()}function mO(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a.targetAnchor)return a.targetAnchor;var i=C0(a,s);return i.getCenter()}var T0=function(s,i,n){var e=w0(n,i),t=C0(n,i),r=vO(n,i),o=mO(n,i);e=e.union(qv(r)),t=t.union(qv(o));var c=s.map(function(Le){return Bt.create(Le)});c.unshift(r),c.push(o);for(var p=null,y=[],C=0,S=c.length-1;C<S;C+=1){var I=null,W=c[C],q=c[C+1],ie=yd.getBearing(W,q)!=null;if(C===0)C+1===S?e.intersectsWithRect(t.clone().inflate(1))?I=yd.insideNode(W,q,e,t):ie||(I=yd.nodeToNode(W,q,e,t)):e.containsPoint(q)?I=yd.insideNode(W,q,e,qv(q).moveAndExpand(em(i))):ie||(I=yd.nodeToVertex(W,q,e));else if(C+1===S){var ve=ie&&yd.getBearing(q,W)===p;t.containsPoint(W)||ve?I=yd.insideNode(W,q,qv(W).moveAndExpand(em(i)),t,p):ie||(I=yd.vertexToNode(W,q,t,p))}else ie||(I=yd.vertexToVertex(W,q,p));I?(y.push.apply(y,Object(Ca.a)(I.points)),p=I.direction):p=yd.getBearing(W,q),C+1<S&&y.push(q)}return y},yd;(function(a){var s={N:"S",S:"N",E:"W",W:"E"},i={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(C,S,I){var W=new Bt(C.x,S.y);return I.containsPoint(W)&&(W=new Bt(S.x,C.y)),W}function e(C,S){return C[S==="W"||S==="E"?"width":"height"]}a.getBBoxSize=e;function t(C,S){return C.x===S.x?C.y>S.y?"N":"S":C.y===S.y?C.x>S.x?"W":"E":null}a.getBearing=t;function r(C,S,I){var W=new Bt(C.x,S.y),q=new Bt(S.x,C.y),ie=t(C,W),ve=t(C,q),Le=I?s[I]:null,Oe=ie===I||ie!==Le&&(ve===Le||ve!==I)?W:q;return{points:[Oe],direction:t(Oe,S)}}a.vertexToVertex=r;function o(C,S,I){var W=n(C,S,I);return{points:[W],direction:t(W,S)}}a.nodeToVertex=o;function c(C,S,I,W){var q=[new Bt(C.x,S.y),new Bt(S.x,C.y)],ie=q.filter(function(at){return!I.containsPoint(at)}),ve=ie.filter(function(at){return t(at,C)!==W}),Le;if(ve.length>0)return Le=ve.filter(function(at){return t(C,at)===W}).pop(),Le=Le||ve[0],{points:[Le],direction:t(Le,S)};{Le=g.difference(q,ie)[0];var Oe=Bt.create(S).move(Le,-e(I,W)/2),it=n(Oe,C,I);return{points:[it,Oe],direction:t(Oe,S)}}}a.vertexToNode=c;function p(C,S,I,W){var q=o(S,C,W),ie=q.points[0];if(I.containsPoint(ie)){q=o(C,S,I);var ve=q.points[0];if(W.containsPoint(ve)){var Le=Bt.create(C).move(ve,-e(I,t(C,ve))/2),Oe=Bt.create(S).move(ie,-e(W,t(S,ie))/2),it=new Ba(Le,Oe).getCenter(),at=o(C,it,I),Qe=r(it,S,at.direction);q.points=[at.points[0],Qe.points[0]],q.direction=Qe.direction}}return q}a.nodeToNode=p;function y(C,S,I,W,q){var ie=I.union(W).inflate(1),ve=ie.getCenter(),Le=ve.distance(S)>ve.distance(C),Oe=Le?S:C,it=Le?C:S,at,Qe,qt;q?(at=Bt.fromPolar(ie.width+ie.height,i[q],Oe),at=ie.getNearestPointToPoint(at).move(at,-1)):at=ie.getNearestPointToPoint(Oe).move(Oe,1),Qe=n(at,it,ie);var Kt;at.round().equals(Qe.round())?(Qe=Bt.fromPolar(ie.width+ie.height,Pi.toRad(at.theta(Oe))+Math.PI/2,it),Qe=ie.getNearestPointToPoint(Qe).move(it,1).round(),qt=n(at,Qe,ie),Kt=Le?[Qe,qt,at]:[at,qt,Qe]):Kt=Le?[Qe,at]:[at,Qe];var Tn=t(Le?at:Qe,S);return{points:Kt,direction:Tn}}a.insideNode=y})(yd||(yd={}));var gO={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){var s=_h(this.step,this);return s},directions:function(){var s=_h(this.step,this),i=_h(this.cost,this);return[{cost:i,offsetX:s,offsetY:0},{cost:i,offsetX:-s,offsetY:0},{cost:i,offsetX:0,offsetY:s},{cost:i,offsetX:0,offsetY:-s}]},penalties:function(){var s=_h(this.step,this);return{0:0,45:s/2,90:s/2}},paddingBox:function(){var s=_h(this.step,this);return{x:-s,y:-s,width:2*s,height:2*s}},fallbackRouter:T0,draggingRouter:null};function _h(a,s){return typeof a=="function"?a.call(s):a}function yO(a){var s=Object.keys(a).reduce(function(n,e){var t=n;return e==="fallbackRouter"||e==="draggingRouter"||e==="fallbackRoute"?t[e]=a[e]:t[e]=_h(a[e],a),n},{});if(s.padding){var i=T.normalizeSides(s.padding);s.paddingBox={x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom}}return s.directions.forEach(function(n){var e=new Bt(0,0),t=new Bt(n.offsetX,n.offsetY);n.angle=Pi.normalize(e.theta(t))}),s}var A0=1,O0=2,bO=function(){function a(){Object(_r.a)(this,a),this.items=[],this.hash={},this.values={}}return Object(Br.a)(a,[{key:"add",value:function(i,n){var e=this;this.hash[i]?this.items.splice(this.items.indexOf(i),1):this.hash[i]=A0,this.values[i]=n;var t=g.sortedIndexBy(this.items,i,function(r){return e.values[r]});this.items.splice(t,0,i)}},{key:"pop",value:function(){var i=this.items.shift();return i&&(this.hash[i]=O0),i}},{key:"isOpen",value:function(i){return this.hash[i]===A0}},{key:"isClose",value:function(i){return this.hash[i]===O0}},{key:"isEmpty",value:function(){return this.items.length===0}}]),a}(),EO=function(){function a(s){Object(_r.a)(this,a),this.options=s,this.mapGridSize=100,this.map={}}return Object(Br.a)(a,[{key:"build",value:function(i,n){var e=this.options,t=e.excludeTerminals.reduce(function(y,C){var S=n[C];if(S){var I=i.getCell(S.cell);I&&y.push(I)}return y},[]),r=[],o=i.getCell(n.getSourceCellId());o&&(r=g.union(r,o.getAncestors().map(function(y){return y.id})));var c=i.getCell(n.getTargetCellId());c&&(r=g.union(r,c.getAncestors().map(function(y){return y.id})));var p=this.mapGridSize;return i.getNodes().reduce(function(y,C){var S=C.shape,I=e.excludeShapes,W=S?I.includes(S):!1,q=t.some(function(Bn){return Bn.id===C.id}),ie=e.excludeNodes.includes(C),ve=r.includes(C.id),Le=e.excludeHiddenNodes&&!C.isVisible(),Oe=W||q||ie||ve||Le;if(!Oe)for(var it=C.getBBox().moveAndExpand(e.paddingBox),at=it.getOrigin().snapToGrid(p),Qe=it.getCorner().snapToGrid(p),qt=at.x;qt<=Qe.x;qt+=p)for(var Kt=at.y;Kt<=Qe.y;Kt+=p){var Tn=new Bt(qt,Kt).toString();y[Tn]==null&&(y[Tn]=[]),y[Tn].push(it)}return y},this.map),this}},{key:"isAccessible",value:function(i){var n=i.clone().snapToGrid(this.mapGridSize).toString(),e=this.map[n];return e?e.every(function(t){return!t.containsPoint(i)}):!0}}]),a}();function S0(a,s){var i=a.sourceBBox.clone();return s&&s.paddingBox?i.moveAndExpand(s.paddingBox):i}function D0(a,s){var i=a.targetBBox.clone();return s&&s.paddingBox?i.moveAndExpand(s.paddingBox):i}function M0(a,s){if(a.sourceAnchor)return a.sourceAnchor;var i=S0(a,s);return i.getCenter()}function xO(a,s){if(a.targetAnchor)return a.targetAnchor;var i=D0(a,s);return i.getCenter()}function yg(a,s,i,n,e){var t=360/i,r=a.theta(wO(a,s,n,e)),o=Pi.normalize(r+t/2);return t*Math.floor(o/t)}function wO(a,s,i,n){var e=n.step,t=s.x-a.x,r=s.y-a.y,o=t/i.x,c=r/i.y,p=o*e,y=c*e;return new Bt(a.x+p,a.y+y)}function _0(a,s){var i=Math.abs(a-s);return i>180?360-i:i}function CO(a,s){var i=s.step;return s.directions.forEach(function(n){n.gridOffsetX=n.offsetX/i*a.x,n.gridOffsetY=n.offsetY/i*a.y}),s.directions}function TO(a,s,i){return{source:s.clone(),x:k0(i.x-s.x,a),y:k0(i.y-s.y,a)}}function k0(a,s){if(!a)return s;var i=Math.abs(a),n=Math.round(i/s);if(!n)return i;var e=n*s,t=i-e,r=t/n;return s+r}function AO(a,s){var i=s.source,n=zs.snapToGrid(a.x-i.x,s.x)+i.x,e=zs.snapToGrid(a.y-i.y,s.y)+i.y;return new Bt(n,e)}function Yp(a,s){return a.round(s)}function tm(a,s,i){return Yp(AO(a.clone(),s),i)}function Qp(a){return a.toString()}function bg(a){return new Bt(a.x===0?0:Math.abs(a.x)/a.x,a.y===0?0:Math.abs(a.y)/a.y)}function N0(a,s){for(var i=Infinity,n=0,e=s.length;n<e;n+=1){var t=a.manhattanDistance(s[n]);t<i&&(i=t)}return i}function R0(a,s,i,n,e){var t=e.precision,r=e.directionMap,o=a.diff(s.getCenter()),c=Object.keys(r).reduce(function(p,y){if(i.includes(y)){for(var C=r[y],S=new Bt(a.x+C.x*(Math.abs(o.x)+s.width),a.y+C.y*(Math.abs(o.y)+s.height)),I=new Ba(a,S),W=I.intersect(s)||[],q,ie=null,ve=0;ve<W.length;ve+=1){var Le=W[ve],Oe=a.squaredDistance(Le);(q==null||Oe>q)&&(q=Oe,ie=Le)}if(ie){var it=tm(ie,n,t);s.containsPoint(it)&&(it=tm(it.translate(C.x*n.x,C.y*n.y),n,t)),p.push(it)}}return p},[]);return s.containsPoint(a)||c.push(tm(a,n,t)),c}function OO(a,s,i,n,e){for(var t=[],r=bg(e.diff(i)),o=Qp(i),c=a[o],p;c;){p=s[o];var y=bg(p.diff(c));y.equals(r)||(t.unshift(p),r=y),o=Qp(c),c=a[o]}var C=s[o],S=bg(C.diff(n));return S.equals(r)||t.unshift(C),t}function SO(a,s,i,n,e){var t=e.precision,r,o;qr.isRectangle(s)?r=Yp(M0(a,e).clone(),t):r=Yp(s.clone(),t),qr.isRectangle(i)?o=Yp(xO(a,e).clone(),t):o=Yp(i.clone(),t);var c=TO(e.step,r,o),p=r,y=o,C,S;if(qr.isRectangle(s)?C=R0(p,s,e.startDirections,c,e):C=[p],qr.isRectangle(i)?S=R0(o,i,e.endDirections,c,e):S=[y],C=C.filter(function(Ph){return n.isAccessible(Ph)}),S=S.filter(function(Ph){return n.isAccessible(Ph)}),C.length>0&&S.length>0){for(var I=new bO,W={},q={},ie={},ve=0,Le=C.length;ve<Le;ve+=1){var Oe=C[ve],it=Qp(Oe);I.add(it,N0(Oe,S)),W[it]=Oe,ie[it]=0}for(var at=e.previousDirectionAngle,Qe=at===void 0,qt,Kt,Tn=CO(c,e),Bn=Tn.length,tr=S.reduce(function(Ph,zS){var GS=Qp(zS);return Ph.push(GS),Ph},[]),hr=Bt.equalPoints(C,S),Lr=e.maxLoopCount;!I.isEmpty()&&Lr>0;){var Vr=I.pop(),dn=W[Vr],Xn=q[Vr],ra=ie[Vr],Ea=dn.equals(p),ja=Xn==null,li=void 0;ja?Qe?Ea?li=null:li=yg(p,dn,Bn,c,e):li=at:li=yg(Xn,dn,Bn,c,e);var Si=ja&&hr;if(!Si&&tr.indexOf(Vr)>=0)return e.previousDirectionAngle=li,OO(q,W,dn,p,y);for(var Di=0;Di<Bn;Di+=1){qt=Tn[Di];var hl=qt.angle;if(Kt=_0(li,hl),!(Qe&&Ea)&&Kt>e.maxDirectionChange)continue;var pu=tm(dn.clone().translate(qt.gridOffsetX||0,qt.gridOffsetY||0),c,t),ns=Qp(pu);if(I.isClose(ns)||!n.isAccessible(pu))continue;if(tr.indexOf(ns)>=0){var xd=pu.equals(y);if(!xd){var ef=yg(pu,y,Bn,c,e),wd=_0(hl,ef);if(wd>e.maxDirectionChange)continue}}var mm=qt.cost,gm=Ea?0:e.penalties[Kt],Af=ra+mm+gm;(!I.isOpen(ns)||Af<ie[ns])&&(W[ns]=pu,q[ns]=dn,ie[ns]=Af,I.add(ns,Af+N0(pu,S)))}Lr-=1}}return e.fallbackRoute?w.call(e.fallbackRoute,this,p,y,e):null}var DO=function(s,i,n){for(var e=yO(i),t=S0(n,e),r=D0(n,e),o=M0(n,e),c=new EO(e).build(n.graph.model,n.cell),p=s.map(function(Qe){return Bt.create(Qe)}),y=[],C=o,S,I,W=0,q=p.length;W<=q;W+=1){var ie=null;if(S=I||t,I=p[W],I==null){I=r;var ve=n.cell,Le=ve.getSourceCellId()==null||ve.getTargetCellId()==null;if(Le&&typeof e.draggingRouter=="function"){var Oe=S===t?o:S,it=I.getOrigin();ie=w.call(e.draggingRouter,n,Oe,it,e)}}if(ie==null&&(ie=SO(n,S,I,c,e)),ie===null)return w.call(e.fallbackRouter,this,s,e,n);var at=ie[0];at&&at.equals(C)&&ie.shift(),C=ie[ie.length-1]||C,y.push.apply(y,Object(Ca.a)(ie))}return y},P0=function(s,i,n){return w.call(DO,this,s,Object.assign(Object.assign({},gO),i),n)},MO={maxDirectionChange:45,directions:function(){var s=_h(this.step,this),i=_h(this.cost,this),n=Math.ceil(Math.sqrt(s*s<<1));return[{cost:i,offsetX:s,offsetY:0},{cost:n,offsetX:s,offsetY:s},{cost:i,offsetX:0,offsetY:s},{cost:n,offsetX:-s,offsetY:s},{cost:i,offsetX:-s,offsetY:0},{cost:n,offsetX:-s,offsetY:-s},{cost:i,offsetX:0,offsetY:-s},{cost:n,offsetX:s,offsetY:-s}]},fallbackRoute:function(s,i,n){var e=s.theta(i),t=[],r={x:i.x,y:s.y},o={x:s.x,y:i.y};if(e%180>90){var c=r;r=o,o=c}var p=e%90<45?r:o,y=new Ba(s,p),C=90*Math.ceil(e/90),S=Bt.fromPolar(y.squaredLength(),Pi.toRad(C+135),p),I=new Ba(i,S),W=y.intersectsWithLine(I),q=W||i,ie=W?q:s,ve=360/n.directions.length,Le=ie.theta(i),Oe=Pi.normalize(Le+ve/2),it=ve*Math.floor(Oe/ve);return n.previousDirectionAngle=it,q&&t.push(q.round()),t.push(i),t}},_O=function(s,i,n){return w.call(P0,this,s,Object.assign(Object.assign({},MO),i),n)},kO=function(s,i,n){var e=i.offset||32,t=i.min==null?16:i.min,r=0,o=i.direction,c=n.sourceBBox,p=n.targetBBox,y=c.getCenter(),C=p.getCenter();if(typeof e=="number"&&(r=e),o==null){var S=p.left-c.right,I=p.top-c.bottom;S>=0&&I>=0?o=S>=I?"L":"T":S<=0&&I>=0?(S=c.left-p.right,S>=0?o=S>=I?"R":"T":o="T"):S>=0&&I<=0?(I=c.top-p.bottom,I>=0?o=S>=I?"L":"B":o="L"):(S=c.left-p.right,I=c.top-p.bottom,S>=0&&I>=0?o=S>=I?"R":"B":S<=0&&I>=0?o="B":S>=0&&I<=0?o="R":o=Math.abs(S)>Math.abs(I)?"R":"B")}o==="H"?o=C.x-y.x>=0?"L":"R":o==="V"&&(o=C.y-y.y>=0?"T":"B"),e==="center"&&(o==="L"?r=(p.left-c.right)/2:o==="R"?r=(c.left-p.right)/2:o==="T"?r=(p.top-c.bottom)/2:o==="B"&&(r=(c.top-p.bottom)/2));var W,q,ie,ve=o==="L"||o==="R";if(ve){if(C.y===y.y)return Object(Ca.a)(s);ie=o==="L"?1:-1,W="x",q="width"}else{if(C.x===y.x)return Object(Ca.a)(s);ie=o==="T"?1:-1,W="y",q="height"}var Le=y.clone(),Oe=C.clone();if(Le[W]+=ie*(c[q]/2+r),Oe[W]-=ie*(p[q]/2+r),ve){var it=Le.x,at=Oe.x,Qe=c.width/2+t,qt=p.width/2+t;C.x>y.x?at<=it&&(Le.x=Math.max(at,y.x+Qe),Oe.x=Math.min(it,C.x-qt)):at>=it&&(Le.x=Math.min(at,y.x-Qe),Oe.x=Math.max(it,C.x+qt))}else{var Kt=Le.y,Tn=Oe.y,Bn=c.height/2+t,tr=p.height/2+t;C.y>y.y?Tn<=Kt&&(Le.y=Math.max(Tn,y.y+Bn),Oe.y=Math.min(Kt,C.y-tr)):Tn>=Kt&&(Le.y=Math.min(Tn,y.y-Bn),Oe.y=Math.max(Kt,C.y+tr))}return[Le.toJSON()].concat(Object(Ca.a)(s),[Oe.toJSON()])};function Tp(a,s){if(s!=null&&s!==!1){var i=typeof s=="boolean"?0:s;if(i>0){var n=Bt.create(a[1]).move(a[2],i),e=Bt.create(a[1]).move(a[0],i);return[n.toJSON()].concat(Object(Ca.a)(a),[e.toJSON()])}{var t=a[1];return[Object.assign({},t)].concat(Object(Ca.a)(a),[Object.assign({},t)])}}return a}var NO=function(s,i,n){var e=i.width||50,t=i.height||80,r=t/2,o=i.angle||"auto",c=n.sourceAnchor,p=n.targetAnchor,y=n.sourceBBox,C=n.targetBBox;if(c.equals(p)){var S=function(ja){var li=Pi.toRad(ja),Si=Math.sin(li),Di=Math.cos(li),hl=new Bt(c.x+Di*e,c.y+Si*e),pu=new Bt(hl.x-Di*r,hl.y-Si*r),ns=pu.clone().rotate(-90,hl),xd=pu.clone().rotate(90,hl);return[ns.toJSON(),hl.toJSON(),xd.toJSON()]},I=function(ja){var li=c.clone().move(ja,-1),Si=new Ba(li,ja);return!y.containsPoint(ja)&&!y.intersectsWithLine(Si)},W=[0,90,180,270,45,135,225,315];if(typeof o=="number")return Tp(S(o),i.merge);var q=y.getCenter();if(q.equals(c))return Tp(S(0),i.merge);var ie=q.angleBetween(c,q.clone().translate(1,0)),ve=S(ie);if(I(ve[1]))return Tp(ve,i.merge);for(var Le=1,Oe=W.length;Le<Oe;Le+=1)if(ve=S(ie+W[Le]),I(ve[1]))return Tp(ve,i.merge);return Tp(ve,i.merge)}{var it=new Ba(c,p),at=it.parallel(-e),Qe=at.getCenter(),qt=at.start.clone().move(at.end,r),Kt=at.end.clone().move(at.start,r),Tn=it.parallel(-1),Bn=new Ba(Tn.start,Qe),tr=new Ba(Tn.end,Qe);if((y.containsPoint(Qe)||C.containsPoint(Qe)||y.intersectsWithLine(Bn)||y.intersectsWithLine(tr)||C.intersectsWithLine(Bn)||C.intersectsWithLine(tr))&&(at=it.parallel(e),Qe=at.getCenter(),qt=at.start.clone().move(at.end,r),Kt=at.end.clone().move(at.start,r)),i.merge){var hr=new Ba(c,p),Lr=new Ba(Qe,hr.center).setLength(Number.MAX_SAFE_INTEGER),Vr=y.intersectsWithLine(Lr),dn=C.intersectsWithLine(Lr),Xn=Vr?Array.isArray(Vr)?Vr:[Vr]:[];dn&&(Array.isArray(dn)?Xn.push.apply(Xn,Object(Ca.a)(dn)):Xn.push(dn));var ra=hr.center.closest(Xn);ra?(n.sourceAnchor=ra.clone(),n.targetAnchor=ra.clone()):(n.sourceAnchor=hr.center.clone(),n.targetAnchor=hr.center.clone())}return Tp([qt.toJSON(),Qe.toJSON(),Kt.toJSON()],i.merge)}},kh;(function(a){a.presets=se,a.registry=Os.create({type:"router"}),a.registry.register(a.presets,!0)})(kh||(kh={}));var RO=function(s,i,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=[s].concat(Object(Ca.a)(n),[i]),r=new kl(t),o=new Ii(r);return e.raw?o:o.serialize()},PO=function(s,i,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=n.length===3?0:1,r=Bt.create(n[0+t]),o=Bt.create(n[2+t]),c=Bt.create(n[1+t]);if(!Bt.equals(s,i)){var p=new Bt((s.x+i.x)/2,(s.y+i.y)/2),y=p.angleBetween(Bt.create(s).rotate(90,p),c);y>1&&(r.rotate(180-y,p),o.rotate(180-y,p),c.rotate(180-y,p))}var C=`
     M `.concat(s.x," ").concat(s.y,`
     Q `).concat(r.x," ").concat(r.y," ").concat(c.x," ").concat(c.y,`
     Q `).concat(o.x," ").concat(o.y," ").concat(i.x," ").concat(i.y,`
  `);return e.raw?Ii.parse(C):C},IO=function(s,i,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=new Ii;t.appendSegment(Ii.createSegment("M",s));for(var r=1/3,o=2/3,c=e.radius||10,p,y,C=0,S=n.length;C<S;C+=1){var I=Bt.create(n[C]),W=n[C-1]||s,q=n[C+1]||i;p=y||I.distance(W)/2,y=I.distance(q)/2;var ie=-Math.min(c,p),ve=-Math.min(c,y),Le=I.clone().move(W,ie).round(),Oe=I.clone().move(q,ve).round(),it=new Bt(r*Le.x+o*I.x,o*I.y+r*Le.y),at=new Bt(r*Oe.x+o*I.x,o*I.y+r*Oe.y);t.appendSegment(Ii.createSegment("L",Le)),t.appendSegment(Ii.createSegment("C",it,at,Oe))}return t.appendSegment(Ii.createSegment("L",i)),e.raw?t:t.serialize()},LO=function(s,i,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t,r=e.direction;if(n&&n.length!==0){var o=[s].concat(Object(Ca.a)(n),[i]),c=zc.throughPoints(o);t=new Ii(c)}else if(t=new Ii,t.appendSegment(Ii.createSegment("M",s)),r||(r=Math.abs(s.x-i.x)>=Math.abs(s.y-i.y)?"H":"V"),r==="H"){var p=(s.x+i.x)/2;t.appendSegment(Ii.createSegment("C",p,s.y,p,i.y,i.x,i.y))}else{var y=(s.y+i.y)/2;t.appendSegment(Ii.createSegment("C",s.x,y,i.x,y,i.x,i.y))}return e.raw?t:t.serialize()},I0=1,nm=1/3,rm=2/3;function jO(a){var s=a.graph._jumpOverUpdateList;if(s==null&&(s=a.graph._jumpOverUpdateList=[],a.graph.on("cell:mouseup",function(){for(var n=a.graph._jumpOverUpdateList,e=0;e<n.length;e+=1)n[e].update()}),a.graph.on("model:reseted",function(){s=a.graph._jumpOverUpdateList=[]})),s.indexOf(a)<0){s.push(a);var i=function(){return s.splice(s.indexOf(a),1)};a.cell.once("change:connector",i),a.cell.once("removed",i)}}function Eg(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=[a].concat(Object(Ca.a)(i),[s]),e=[];return n.forEach(function(t,r){var o=n[r+1];o!=null&&e.push(new Ba(t,o))}),e}function UO(a,s){var i=[];return s.forEach(function(n){var e=a.intersectsWithLine(n);e&&i.push(e)}),i}function L0(a,s){return new Ba(a,s).squaredLength()}function FO(a,s,i){return s.reduce(function(n,e,t){if(am.includes(e))return n;var r=n.pop()||a,o=Bt.create(e).move(r.start,-i),c=Bt.create(e).move(r.start,+i),p=s[t+1];if(p!=null){var y=c.distance(p);y<=i&&(c=p.move(r.start,y),am.push(p))}else{var C=o.distance(r.end);if(C<i*2+I0)return n.push(r),n}var S=c.distance(r.start);if(S<i*2+I0)return n.push(r),n;var I=new Ba(o,c);return Jp.push(I),n.push(new Ba(r.start,o),I,new Ba(c,r.end)),n},[])}function j0(a,s,i,n){var e=new Ii,t;return t=Ii.createSegment("M",a[0].start),e.appendSegment(t),a.forEach(function(r,o){if(Jp.includes(r)){var c,p,y,C;if(i==="arc"){c=-90,p=r.start.diff(r.end);var S=p.x<0||p.x===0&&p.y<0;S&&(c+=180);var I=r.getCenter(),W=new Ba(I,r.end).rotate(c,I),q;q=new Ba(r.start,I),y=q.pointAt(2/3).rotate(c,r.start),C=W.pointAt(1/3).rotate(-c,W.end),t=Ii.createSegment("C",y,C,W.end),e.appendSegment(t),q=new Ba(I,r.end),y=W.pointAt(1/3).rotate(c,W.end),C=q.pointAt(1/3).rotate(-c,r.end),t=Ii.createSegment("C",y,C,r.end),e.appendSegment(t)}else if(i==="gap")t=Ii.createSegment("M",r.end),e.appendSegment(t);else if(i==="cubic"){c=r.start.theta(r.end);var ie=s*.6,ve=s*1.35;p=r.start.diff(r.end);var Le=p.x<0||p.x===0&&p.y<0;Le&&(ve*=-1),y=new Bt(r.start.x+ie,r.start.y+ve).rotate(c,r.start),C=new Bt(r.end.x-ie,r.end.y+ve).rotate(c,r.end),t=Ii.createSegment("C",y,C,r.end),e.appendSegment(t)}}else{var Oe=a[o+1];n===0||!Oe||Jp.includes(Oe)?(t=Ii.createSegment("L",r.end),e.appendSegment(t)):BO(n,e,r.end,r.start,Oe.end)}}),e}function BO(a,s,i,n,e){var t=i.distance(n)/2,r=i.distance(e)/2,o=-Math.min(a,t),c=-Math.min(a,r),p=i.clone().move(n,o).round(),y=i.clone().move(e,c).round(),C=new Bt(nm*p.x+rm*i.x,rm*i.y+nm*p.y),S=new Bt(nm*y.x+rm*i.x,rm*i.y+nm*y.y),I;I=Ii.createSegment("L",p),s.appendSegment(I),I=Ii.createSegment("C",C,S,y),s.appendSegment(I)}var Jp,am,VO=function(s,i,n){var e=this,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Jp=[],am=[],jO(this);var r=t.size||5,o=t.type||"arc",c=t.radius||0,p=t.ignoreConnectors||["smooth"],y=this.graph,C=y.model,S=C.getEdges();if(S.length===1)return j0(Eg(s,i,n),r,o,c);var I=this.cell,W=S.indexOf(I),q=y.options.connecting.connector||{},ie=S.filter(function(Qe,qt){var Kt=Qe.getConnector()||q;return p.includes(Kt.name)?!1:qt>W?Kt.name!=="jumpover":!0}),ve=ie.map(function(Qe){return y.renderer.findViewByCell(Qe)}),Le=Eg(s,i,n),Oe=ve.map(function(Qe){return Qe==null?[]:Qe===e?Le:Eg(Qe.sourcePoint,Qe.targetPoint,Qe.routePoints)}),it=[];Le.forEach(function(Qe){var qt=ie.reduce(function(Kt,Tn,Bn){if(Tn!==I){var tr=UO(Qe,Oe[Bn]);Kt.push.apply(Kt,Object(Ca.a)(tr))}return Kt},[]).sort(function(Kt,Tn){return L0(Qe.start,Kt)-L0(Qe.start,Tn)});qt.length>0?it.push.apply(it,Object(Ca.a)(FO(Qe,qt,r))):it.push(Qe)});var at=j0(it,r,o,c);return Jp=[],am=[],t.raw?at:at.serialize()},Jh;(function(a){a.presets=ye,a.registry=Os.create({type:"connector"}),a.registry.register(a.presets,!0)})(Jh||(Jh={}));var WS=Os.create,xg=function(){function a(s){Object(_r.a)(this,a),this.cell=s,this.ids={},this.cache={}}return Object(Br.a)(a,[{key:"get",value:function(){return Object.keys(this.ids)}},{key:"start",value:function(i,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",o=this.cell.getPropByPath(i),c=f.defaults(t,a.defaultOptions),p=this.getTiming(c.timing),y=this.getInterp(c.interp,o,n),C=0,S=Array.isArray(i)?i.join(r):i,I=Array.isArray(i)?i:i.split(r),W=function q(){var ie=new Date().getTime();C===0&&(C=ie);var ve=ie-C,Le=ve/c.duration;Le<1?e.ids[S]=O.requestAnimationFrame(q):Le=1;var Oe=y(p(Le));e.cell.setPropByPath(I,Oe),t.progress&&t.progress(Object.assign({progress:Le,currentValue:Oe},e.getArgs(S))),Le===1&&(e.cell.notify("transition:end",e.getArgs(S)),e.cell.notify("transition:complete",e.getArgs(S)),t.complete&&t.complete(e.getArgs(S)),e.cell.notify("transition:finish",e.getArgs(S)),t.finish&&t.finish(e.getArgs(S)),e.clean(S))};return setTimeout(function(){e.stop(i,void 0,r),e.cache[S]={startValue:o,targetValue:n,options:c},e.ids[S]=O.requestAnimationFrame(W),e.cell.notify("transition:begin",e.getArgs(S)),e.cell.notify("transition:start",e.getArgs(S)),t.start&&t.start(e.getArgs(S))},t.delay),this.stop.bind(this,i,r,t)}},{key:"stop",value:function(i){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",r=Array.isArray(i)?i:i.split(t);return Object.keys(this.ids).filter(function(o){return f.isEqual(r,o.split(t).slice(0,r.length))}).forEach(function(o){O.cancelAnimationFrame(n.ids[o]);var c=n.cache[o],p=n.getArgs(o),y=Object.assign(Object.assign({},c.options),e),C=y.jumpedToEnd;C&&c.targetValue!=null&&(n.cell.setPropByPath(o,c.targetValue),n.cell.notify("transition:end",Object.assign({},p)),n.cell.notify("transition:complete",Object.assign({},p)),y.complete&&y.complete(Object.assign({},p)));var S=Object.assign({jumpedToEnd:C},p);n.cell.notify("transition:stop",Object.assign({},S)),y.stop&&y.stop(Object.assign({},S)),n.cell.notify("transition:finish",Object.assign({},p)),y.finish&&y.finish(Object.assign({},p)),n.clean(o)}),this}},{key:"clean",value:function(i){delete this.ids[i],delete this.cache[i]}},{key:"getTiming",value:function(i){return typeof i=="string"?Yh[i]:i}},{key:"getInterp",value:function(i,n,e){return i?i(n,e):typeof e=="number"?Qh.number(n,e):typeof e=="string"?e[0]==="#"?Qh.color(n,e):Qh.unit(n,e):Qh.object(n,e)}},{key:"getArgs",value:function(i){var n=this.cache[i];return{path:i,startValue:n.startValue,targetValue:n.targetValue,cell:this.cell}}}]),a}();(function(a){a.defaultOptions={delay:10,duration:100,timing:"linear"}})(xg||(xg={}));var zO=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},U0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(_r.a)(this,i),n=s.call(this),n.pending=!1,n.changing=!1,n.data={},n.mutate(f.cloneDeep(e)),n.changed={},n}return Object(Br.a)(i,[{key:"mutate",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.unset===!0,c=r.silent===!0,p=[],y=this.changing;this.changing=!0,y||(this.previous=f.cloneDeep(this.data),this.changed={});var C=this.data,S=this.previous,I=this.changed;if(Object.keys(e).forEach(function(W){var q=W,ie=e[q];f.isEqual(C[q],ie)||p.push(q),f.isEqual(S[q],ie)?delete I[q]:I[q]=ie,o?delete C[q]:C[q]=ie}),!c&&p.length>0&&(this.pending=!0,this.pendingOptions=r,p.forEach(function(W){t.emit("change:*",{key:W,options:r,store:t,current:C[W],previous:S[W]})})),y)return this;if(!c)for(;this.pending;)this.pending=!1,this.emit("changed",{current:C,previous:S,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}},{key:"get",value:function(e,t){if(e==null)return this.data;var r=this.data[e];return r??t}},{key:"getPrevious",value:function(e){if(this.previous){var t=this.previous[e];return t??void 0}return}},{key:"set",value:function(e,t,r){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate(Z({},e,t),r)),this}},{key:"remove",value:function(e,t){var r=void 0,o={},c;if(typeof e=="string")o[e]=r,c=t;else if(Array.isArray(e))e.forEach(function(y){return o[y]=r}),c=t;else{for(var p in this.data)o[p]=r;c=e}return this.mutate(o,Object.assign(Object.assign({},c),{unset:!0})),this}},{key:"getByPath",value:function(e){return f.getByPath(this.data,e,"/")}},{key:"setByPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o="/",c=Array.isArray(e)?Object(Ca.a)(e):e.split(o),p=Array.isArray(e)?e.join(o):e,y=c[0],C=c.length;if(r.propertyPath=p,r.propertyValue=t,r.propertyPathArray=c,C===1)this.set(y,t,r);else{for(var S={},I=S,W=y,q=1;q<C;q+=1){var ie=c[q],ve=Number.isFinite(Number(ie));I=I[W]=ve?[]:{},W=ie}f.setByPath(S,c,t,o);var Le=f.cloneDeep(this.data);r.rewrite&&f.unsetByPath(Le,e,o);var Oe=f.merge(Le,S);this.set(y,Oe[y],r)}return this}},{key:"removeByPath",value:function(e,t){var r=Array.isArray(e)?e:e.split("/"),o=r[0];if(r.length===1)this.remove(o,t);else{var c=r.slice(1),p=f.cloneDeep(this.get(o));p&&f.unsetByPath(p,c),this.set(o,p,t)}return this}},{key:"hasChanged",value:function(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}},{key:"getChanges",value:function(e){if(e==null)return this.hasChanged()?f.cloneDeep(this.changed):null;var t=this.changing?this.previous:this.data,r={},o;for(var c in e){var p=e[c];f.isEqual(t[c],p)||(r[c]=p,o=!0)}return o?f.cloneDeep(r):null}},{key:"toJSON",value:function(){return f.cloneDeep(this.data)}},{key:"clone",value:function(){var e=this.constructor;return new e(this.data)}},{key:"dispose",value:function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}]),i}(fl);zO([fl.dispose()],U0.prototype,"dispose",null);var GO=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},F0=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},no=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(_r.a)(this,i),n=s.call(this);var t=n.constructor,r=t.getDefaults(!0),o=f.merge({},n.preprocess(r),n.preprocess(e));return n.id=o.id||E.uuid(),n.store=new U0(o),n.animation=new xg(Object(fu.a)(n)),n.setup(),n.init(),n.postprocess(e),n}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"init",value:function(){}},{key:"model",get:function(){return this._model}},{key:"model",set:function(e){this._model!==e&&(this._model=e)}},{key:"preprocess",value:function(e,t){var r=e.id,o=this.constructor,c=o.applyPropHooks(this,e);return r==null&&t!==!0&&(c.id=E.uuid()),c}},{key:"postprocess",value:function(e){}},{key:"setup",value:function(){var e=this;this.store.on("change:*",function(t){var r=t.key,o=t.current,c=t.previous,p=t.options;e.notify("change:*",{key:r,options:p,current:o,previous:c,cell:e}),e.notify("change:".concat(r),{options:p,current:o,previous:c,cell:e});var y=r;(y==="source"||y==="target")&&e.notify("change:terminal",{type:y,current:o,previous:c,options:p,cell:e})}),this.store.on("changed",function(t){var r=t.options;return e.notify("changed",{options:r,cell:e})})}},{key:"notify",value:function(e,t){this.trigger(e,t);var r=this.model;return r&&(r.notify("cell:".concat(e),t),this.isNode()?r.notify("node:".concat(e),Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&r.notify("edge:".concat(e),Object.assign(Object.assign({},t),{edge:this}))),this}},{key:"isNode",value:function(){return!1}},{key:"isEdge",value:function(){return!1}},{key:"isSameStore",value:function(e){return this.store===e.store}},{key:"view",get:function(){return this.store.get("view")}},{key:"shape",get:function(){return this.store.get("shape","")}},{key:"getProp",value:function(e,t){return e==null?this.store.get():this.store.get(e,t)}},{key:"setProp",value:function(e,t,r){if(typeof e=="string")this.store.set(e,t,r);else{var o=this.preprocess(e,!0);this.store.set(f.merge({},this.getProp(),o),t),this.postprocess(e)}return this}},{key:"removeProp",value:function(e,t){return typeof e=="string"||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}},{key:"hasChanged",value:function(e){return e==null?this.store.hasChanged():this.store.hasChanged(e)}},{key:"getPropByPath",value:function(e){return this.store.getByPath(e)}},{key:"setPropByPath",value:function(e,t){var r=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model&&(e==="children"?this._children=t?t.map(function(c){return r.model.getCell(c)}).filter(function(c){return c!=null}):null:e==="parent"&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,o),this}},{key:"removePropByPath",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Array.isArray(e)?e:e.split("/");return r[0]==="attrs"&&(t.dirty=!0),this.store.removeByPath(r,t),this}},{key:"prop",value:function(e,t,r){return e==null?this.getProp():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getPropByPath(e):t==null?this.removePropByPath(e,r||{}):this.setPropByPath(e,t,r||{}):this.setProp(e,t||{})}},{key:"previous",value:function(e){return this.store.getPrevious(e)}},{key:"zIndex",get:function(){return this.getZIndex()}},{key:"zIndex",set:function(e){e==null?this.removeZIndex():this.setZIndex(e)}},{key:"getZIndex",value:function(){return this.store.get("zIndex")}},{key:"setZIndex",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("zIndex",e,t),this}},{key:"removeZIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("zIndex",e),this}},{key:"toFront",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.model;if(t){var r=t.getMaxZIndex(),o;e.deep?(o=this.getDescendants({deep:!0,breadthFirst:!0}),o.unshift(this)):o=[this],r=r-o.length+1;var c=t.total(),p=t.indexOf(this)!==c-o.length;p||(p=o.some(function(y,C){return y.getZIndex()!==r+C})),p&&this.batchUpdate("to-front",function(){r+=o.length,o.forEach(function(y,C){y.setZIndex(r+C,e)})})}return this}},{key:"toBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.model;if(t){var r=t.getMinZIndex(),o;e.deep?(o=this.getDescendants({deep:!0,breadthFirst:!0}),o.unshift(this)):o=[this];var c=t.indexOf(this)!==0;c||(c=o.some(function(p,y){return p.getZIndex()!==r+y})),c&&this.batchUpdate("to-back",function(){r-=o.length,o.forEach(function(p,y){p.setZIndex(r+y,e)})})}return this}},{key:"markup",get:function(){return this.getMarkup()}},{key:"markup",set:function(e){e==null?this.removeMarkup():this.setMarkup(e)}},{key:"getMarkup",value:function(){var e=this.store.get("markup");if(e==null){var t=this.constructor;e=t.getMarkup()}return e}},{key:"setMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("markup",e,t),this}},{key:"removeMarkup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("markup",e),this}},{key:"attrs",get:function(){return this.getAttrs()}},{key:"attrs",set:function(e){e==null?this.removeAttrs():this.setAttrs(e)}},{key:"getAttrs",value:function(){var e=this.store.get("attrs");return e?Object.assign({},e):{}}},{key:"setAttrs",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)this.removeAttrs(r);else{var o=function(y){return t.store.set("attrs",y,r)};if(r.overwrite===!0)o(e);else{var c=this.getAttrs();r.deep===!1?o(Object.assign(Object.assign({},c),e)):o(f.merge({},c,e))}}return this}},{key:"replaceAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}},{key:"updateAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}},{key:"removeAttrs",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("attrs",e),this}},{key:"getAttrDefinition",value:function(e){if(!e)return null;var t=this.constructor,r=t.getAttrHooks()||{},o=r[e]||Ef.registry.get(e);if(!o){var c=E.camelCase(e);o=r[c]||Ef.registry.get(c)}return o||null}},{key:"getAttrByPath",value:function(e){return e==null||e===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}},{key:"setAttrByPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setPropByPath(this.prefixAttrPath(e),t,r),this}},{key:"removeAttrByPath",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePropByPath(this.prefixAttrPath(e),t),this}},{key:"prefixAttrPath",value:function(e){return Array.isArray(e)?["attrs"].concat(e):"attrs/".concat(e)}},{key:"attr",value:function(e,t,r){return e==null?this.getAttrByPath():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getAttrByPath(e):t==null?this.removeAttrByPath(e,r||{}):this.setAttrByPath(e,t,r||{}):this.setAttrs(e,t||{})}},{key:"visible",get:function(){return this.isVisible()}},{key:"visible",set:function(e){this.setVisible(e)}},{key:"setVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("visible",e,t),this}},{key:"isVisible",value:function(){return this.store.get("visible")!==!1}},{key:"show",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()||this.setVisible(!0,e),this}},{key:"hide",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()&&this.setVisible(!1,e),this}},{key:"toggleVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=typeof e=="boolean"?e:!this.isVisible(),o=typeof e=="boolean"?t:e;return r?this.show(o):this.hide(o),this}},{key:"data",get:function(){return this.getData()}},{key:"data",set:function(e){this.setData(e)}},{key:"getData",value:function(){return this.store.get("data")}},{key:"setData",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)this.removeData(r);else{var o=function(y){return t.store.set("data",y,r)};if(r.overwrite===!0)o(e);else{var c=this.getData();r.deep===!1?o(typeof e=="object"?Object.assign(Object.assign({},c),e):e):o(f.merge({},c,e))}}return this}},{key:"replaceData",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}},{key:"updateData",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}},{key:"removeData",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("data",e),this}},{key:"parent",get:function(){return this.getParent()}},{key:"children",get:function(){return this.getChildren()}},{key:"getParentId",value:function(){return this.store.get("parent")}},{key:"getParent",value:function(){var e=this.getParentId();if(e&&this.model){var t=this.model.getCell(e);return this._parent=t,t}return null}},{key:"getChildren",value:function(){var e=this,t=this.store.get("children");if(t&&t.length&&this.model){var r=t.map(function(o){var c;return(c=e.model)===null||c===void 0?void 0:c.getCell(o)}).filter(function(o){return o!=null});return this._children=r,Object(Ca.a)(r)}return null}},{key:"hasParent",value:function(){return this.parent!=null}},{key:"isParentOf",value:function(e){return e!=null&&e.getParent()===this}},{key:"isChildOf",value:function(e){return e!=null&&this.getParent()===e}},{key:"eachChild",value:function(e,t){return this.children&&this.children.forEach(e,t),this}},{key:"filterChild",value:function(e,t){return this.children?this.children.filter(e,t):[]}},{key:"getChildCount",value:function(){return this.children==null?0:this.children.length}},{key:"getChildIndex",value:function(e){return this.children==null?-1:this.children.indexOf(e)}},{key:"getChildAt",value:function(e){return this.children!=null&&e>=0?this.children[e]:null}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=[],r=this.getParent();r;)t.push(r),r=e.deep!==!1?r.getParent():null;return t}},{key:"getDescendants",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.deep!==!1){if(e.breadthFirst){for(var t=[],r=this.getChildren()||[];r.length>0;){var o=r.shift(),c=o.getChildren();t.push(o),c&&r.push.apply(r,Object(Ca.a)(c))}return t}{var p=this.getChildren()||[];return p.forEach(function(y){p.push.apply(p,Object(Ca.a)(y.getDescendants(e)))}),p}}return this.getChildren()||[]}},{key:"isDescendantOf",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return!1;if(t.deep!==!1){for(var r=this.getParent();r;){if(r===e)return!0;r=r.getParent()}return!1}return this.isChildOf(e)}},{key:"isAncestorOf",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?!1:e.isDescendantOf(this,t)}},{key:"contains",value:function(e){return this.isAncestorOf(e)}},{key:"getCommonAncestor",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.getCommonAncestor.apply(i,[this].concat(t))}},{key:"setParent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}},{key:"setChildren",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._children=e,e!=null?this.store.set("children",e.map(function(r){return r.id}),t):this.store.remove("children",t),this}},{key:"unembed",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.children;if(r!=null&&e!=null){var o=this.getChildIndex(e);o!==-1&&(r.splice(o,1),e.setParent(null,t),this.setChildren(r,t))}return this}},{key:"embed",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.addTo(this,t),this}},{key:"addTo",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}},{key:"insertTo",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.insertChild(this,t,r),this}},{key:"addChild",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertChild(e,void 0,t)}},{key:"insertChild",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null&&e!==this){var o=e.getParent(),c=this!==o,p=t;if(p==null&&(p=this.getChildCount(),c||(p-=1)),o){var y=o.getChildren();if(y){var C=y.indexOf(e);C>=0&&(e.setParent(null,r),y.splice(C,1),o.setChildren(y,r))}}var S=this.children;if(S==null?(S=[],S.push(e)):S.splice(p,0,e),e.setParent(this,r),this.setChildren(S,r),c&&this.model){var I=this.model.getIncomingEdges(this),W=this.model.getOutgoingEdges(this);I&&I.forEach(function(q){return q.updateParent(r)}),W&&W.forEach(function(q){return q.updateParent(r)})}this.model&&this.model.addCell(e,r)}return this}},{key:"removeFromParent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getParent();if(t!=null){var r=t.getChildIndex(this);t.removeChildAt(r,e)}return this}},{key:"removeChild",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getChildIndex(e);return this.removeChildAt(r,t)}},{key:"removeChildAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getChildAt(e),o=this.children;return o!=null&&r!=null&&(this.unembed(r,t),r.remove(t)),r}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.batchUpdate("remove",function(){var r=e.getParent();r&&r.removeChild(e,t),t.deep!==!1&&e.eachChild(function(o){return o.remove(t)}),e.model&&e.model.removeCell(e,t)}),this}},{key:"transition",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/";return this.animation.start(e,t,r,o)}},{key:"stopTransition",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/";return this.animation.stop(e,t,r),this}},{key:"getTransitions",value:function(){return this.animation.get()}},{key:"translate",value:function(e,t,r){return this}},{key:"scale",value:function(e,t,r,o){return this}},{key:"addTools",value:function(e,t,r){var o=Array.isArray(e)?e:[e],c=typeof t=="string"?t:null,p=typeof t=="object"?t:typeof r=="object"?r:{};if(p.reset)return this.setTools({name:c,items:o,local:p.local},p);var y=f.cloneDeep(this.getTools());if(y==null||c==null||y.name===c)return y==null&&(y={}),y.items||(y.items=[]),y.name=c,y.items=[].concat(Object(Ca.a)(y.items),Object(Ca.a)(o)),this.setTools(Object.assign({},y),p)}},{key:"setTools",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeTools():this.store.set("tools",i.normalizeTools(e),t),this}},{key:"getTools",value:function(){return this.store.get("tools")}},{key:"removeTools",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("tools",e),this}},{key:"hasTools",value:function(e){var t=this.getTools();return t==null?!1:e==null?!0:t.name===e}},{key:"hasTool",value:function(e){var t=this.getTools();return t==null?!1:t.items.some(function(r){return typeof r=="string"?r===e:r.name===e})}},{key:"removeTool",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=f.cloneDeep(this.getTools());if(r){var o=!1,c=r.items.slice(),p=function(W){c.splice(W,1),o=!0};if(typeof e=="number")p(e);else for(var y=c.length-1;y>=0;y-=1){var C=c[y],S=typeof C=="string"?C===e:C.name===e;S&&p(y)}o&&(r.items=c,this.setTools(r,t))}return this}},{key:"getBBox",value:function(e){return new qr}},{key:"getConnectionPoint",value:function(e,t){return new Bt}},{key:"toJSON",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Object.assign({},this.store.get()),o=Object.prototype.toString,c=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!r.shape){var p=this.constructor;throw new Error("Unable to serialize ".concat(c,' missing "shape" prop, check the ').concat(c,' "').concat(p.name||o.call(p),'"'))}var y=this.constructor,C=t.diff===!0,S=r.attrs||{},I=y.getDefaults(!0),W=C?this.preprocess(I,!0):I,q=W.attrs||{},ie={};Object.keys(r).forEach(function(Oe){var it=r[Oe];if(it!=null&&!Array.isArray(it)&&typeof it=="object"&&!f.isPlainObject(it))throw new Error("Can only serialize ".concat(c,' with plain-object props, but got a "').concat(o.call(it),'" type of key "').concat(Oe,'" on ').concat(c,' "').concat(e.id,'"'));if(Oe!=="attrs"&&Oe!=="shape"&&C){var at=W[Oe];f.isEqual(it,at)&&delete r[Oe]}}),Object.keys(S).forEach(function(Oe){var it=S[Oe],at=q[Oe];Object.keys(it).forEach(function(Qe){var qt=it[Qe],Kt=at?at[Qe]:null;qt!=null&&typeof qt=="object"&&!Array.isArray(qt)?Object.keys(qt).forEach(function(Tn){var Bn=qt[Tn];if(at==null||Kt==null||!f.isObject(Kt)||!f.isEqual(Kt[Tn],Bn)){ie[Oe]==null&&(ie[Oe]={}),ie[Oe][Qe]==null&&(ie[Oe][Qe]={});var tr=ie[Oe][Qe];tr[Tn]=Bn}}):(at==null||!f.isEqual(Kt,qt))&&(ie[Oe]==null&&(ie[Oe]={}),ie[Oe][Qe]=qt)})});var ve=Object.assign(Object.assign({},r),{attrs:f.isEmpty(ie)?void 0:ie});ve.attrs==null&&delete ve.attrs;var Le=ve;return Le.angle===0&&delete Le.angle,f.cloneDeep(Le)}},{key:"clone",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e.deep){var t=Object.assign({},this.store.get());e.keepId||delete t.id,delete t.parent,delete t.children;var r=this.constructor;return new r(t)}var o=i.deepClone(this);return o[this.id]}},{key:"findView",value:function(e){return e.renderer.findViewByCell(this)}},{key:"startBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return this.notify("batch:start",{name:e,data:t,cell:this}),r&&r.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return r&&r.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}},{key:"batchUpdate",value:function(e,t,r){var o=this.model;this.startBatch(e,r,o);var c=t();return this.stopBatch(e,r,o),c}},{key:"dispose",value:function(){this.removeFromParent(),this.store.dispose()}}],[{key:"config",value:function(e){var t=this,r=e.markup,o=e.propHooks,c=e.attrHooks,p=F0(e,["markup","propHooks","attrHooks"]);if(r!=null&&(this.markup=r),o)if(this.propHooks=this.propHooks.slice(),Array.isArray(o)){var y;(y=this.propHooks).push.apply(y,Object(Ca.a)(o))}else typeof o=="function"?this.propHooks.push(o):Object.keys(o).forEach(function(C){var S=o[C];typeof S=="function"&&t.propHooks.push(S)});c&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),c)),this.defaults=f.merge({},this.defaults,p)}},{key:"getMarkup",value:function(){return this.markup}},{key:"getDefaults",value:function(e){return e?this.defaults:f.cloneDeep(this.defaults)}},{key:"getAttrHooks",value:function(){return this.attrHooks}},{key:"applyPropHooks",value:function(e,t){return this.propHooks.reduce(function(r,o){return o?w.call(o,e,r):r},t)}}]),i}(fl);no.defaults={},no.attrHooks={},no.propHooks=[],GO([fl.dispose()],no.prototype,"dispose",null),function(a){function s(i){return typeof i=="string"?{items:[i]}:Array.isArray(i)?{items:i}:i.items?i:{items:[i]}}a.normalizeTools=s}(no||(no={})),function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"}a.isCell=s}(no||(no={})),function(a){function s(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var c=r.filter(function(y){return y!=null}).map(function(y){return y.getAncestors()}).sort(function(y,C){return y.length-C.length}),p=c.shift();return p.find(function(y){return c.every(function(C){return C.includes(y)})})||null}a.getCommonAncestor=s;function i(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=null,c=0,p=t.length;c<p;c+=1){var y=t[c],C=y.getBBox(r);if(C){if(y.isNode()){var S=y.getAngle();S!=null&&S!==0&&(C=C.bbox(S))}o=o==null?C:o.union(C)}}return o}a.getCellsBBox=i;function n(t){var r=[t].concat(Object(Ca.a)(t.getDescendants({deep:!0})));return a.cloneCells(r)}a.deepClone=n;function e(t){var r=g.uniq(t),o=r.reduce(function(c,p){return c[p.id]=p.clone(),c},{});return r.forEach(function(c){var p=o[c.id];if(p.isEdge()){var y=p.getSourceCellId(),C=p.getTargetCellId();y&&o[y]&&p.setSource(Object.assign(Object.assign({},p.getSource()),{cell:o[y].id})),C&&o[C]&&p.setTarget(Object.assign(Object.assign({},p.getTarget()),{cell:o[C].id}))}var S=c.getParent();S&&o[S.id]&&p.setParent(o[S.id]);var I=c.getChildren();if(I&&I.length){var W=I.reduce(function(q,ie){return o[ie.id]&&q.push(o[ie.id]),q},[]);W.length>0&&p.setChildren(W)}}),o}a.cloneCells=e}(no||(no={})),function(a){a.config({propHooks:function(i){var n=i.tools,e=F0(i,["tools"]);return n&&(e.tools=a.normalizeTools(n)),e}})}(no||(no={}));var Ap;(function(a){var s,i;function n(r,o){return o?s!=null&&s.exist(r):i!=null&&i.exist(r)}a.exist=n;function e(r){s=r}a.setEdgeRegistry=e;function t(r){i=r}a.setNodeRegistry=t})(Ap||(Ap={}));var XO=function(){function a(s){Object(_r.a)(this,a),this.ports=[],this.groups={},this.init(f.cloneDeep(s))}return Object(Br.a)(a,[{key:"getPorts",value:function(){return this.ports}},{key:"getGroup",value:function(i){return i!=null?this.groups[i]:null}},{key:"getPortsByGroup",value:function(i){return this.ports.filter(function(n){return n.group===i||n.group==null&&i==null})}},{key:"getPortsLayoutByGroup",value:function(i,n){var e=this,t=this.getPortsByGroup(i),r=i?this.getGroup(i):null,o=r?r.position:null,c=o?o.name:null,p;if(c!=null){var y=$h.registry.get(c);if(y==null)return $h.registry.onNotFound(c);p=y}else p=$h.presets.left;var C=t.map(function(W){return W&&W.position&&W.position.args||{}}),S=o&&o.args||{},I=p(C,n,S);return I.map(function(W,q){var ie=t[q];return{portLayout:W,portId:ie.id,portSize:ie.size,portAttrs:ie.attrs,labelSize:ie.label.size,labelLayout:e.getPortLabelLayout(ie,Bt.create(W.position),n)}})}},{key:"init",value:function(i){var n=this,e=i.groups,t=i.items;e!=null&&Object.keys(e).forEach(function(r){n.groups[r]=n.parseGroup(e[r])}),Array.isArray(t)&&t.forEach(function(r){n.ports.push(n.parsePort(r))})}},{key:"parseGroup",value:function(i){return Object.assign(Object.assign({},i),{label:this.getLabel(i,!0),position:this.getPortPosition(i.position,!0)})}},{key:"parsePort",value:function(i){var n=Object.assign({},i),e=this.getGroup(i.group)||{};return n.markup=n.markup||e.markup,n.attrs=f.merge({},e.attrs,n.attrs),n.position=this.createPosition(e,n),n.label=f.merge({},e.label,this.getLabel(n)),n.zIndex=this.getZIndex(e,n),n.size=Object.assign(Object.assign({},e.size),n.size),n}},{key:"getZIndex",value:function(i,n){return typeof n.zIndex=="number"?n.zIndex:typeof i.zIndex=="number"||i.zIndex==="auto"?i.zIndex:"auto"}},{key:"createPosition",value:function(i,n){return f.merge({name:"left",args:{}},i.position,{args:n.args})}},{key:"getPortPosition",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i==null){if(n)return{name:"left",args:{}}}else{if(typeof i=="string")return{name:i,args:{}};if(Array.isArray(i))return{name:"absolute",args:{x:i[0],y:i[1]}};if(typeof i=="object")return i}return{args:{}}}},{key:"getPortLabelPosition",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i==null){if(n)return{name:"left",args:{}}}else{if(typeof i=="string")return{name:i,args:{}};if(typeof i=="object")return i}return{args:{}}}},{key:"getLabel",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=i.label||{};return e.position=this.getPortLabelPosition(e.position,n),e}},{key:"getPortLabelLayout",value:function(i,n,e){var t=i.label.position.name||"left",r=i.label.position.args||{},o=mp.registry.get(t)||mp.presets.left;return o?o(n,e,r):null}}]),a}(),im=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Ds=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(_r.a)(this,i),n=s.call(this,e),n.initPorts(),n}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"preprocess",value:function(e,t){var r=e.x,o=e.y,c=e.width,p=e.height,y=im(e,["x","y","width","height"]);if(r!=null||o!=null){var C=y.position;y.position=Object.assign(Object.assign({},C),{x:r??(C?C.x:0),y:o??(C?C.y:0)})}if(c!=null||p!=null){var S=y.size;y.size=Object.assign(Object.assign({},S),{width:c??(S?S.width:0),height:p??(S?S.height:0)})}return ni(Object(ui.a)(i.prototype),"preprocess",this).call(this,y,t)}},{key:"isNode",value:function(){return!0}},{key:"size",value:function(e,t,r){return e===void 0?this.getSize():typeof e=="number"?this.setSize(e,t,r):this.setSize(e,t)}},{key:"getSize",value:function(){var e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}},{key:"setSize",value:function(e,t,r){return typeof e=="object"?this.resize(e.width,e.height,t):this.resize(e,t,r),this}},{key:"resize",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch("resize",r);var o=r.direction;if(o){var c=this.getSize();switch(o){case"left":case"right":t=c.height;break;case"top":case"bottom":e=c.width;break;default:break}var p={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3},y=p[o],C=Pi.normalize(this.getAngle()||0);r.absolute&&(y+=Math.floor((C+45)/90),y%=4);var S=this.getBBox(),I;y===0?I=S.getBottomLeft():y===1?I=S.getCorner():y===2?I=S.getTopRight():I=S.getOrigin();var W=I.clone().rotate(-C,S.getCenter()),q=Math.sqrt(e*e+t*t)/2,ie=y*Math.PI/2;ie+=Math.atan(y%2===0?t/e:e/t),ie-=Pi.toRad(C);var ve=Bt.fromPolar(q,ie,W),Le=ve.clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},r),this.setPosition(Le.x,Le.y,r)}else this.store.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this}},{key:"scale",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=this.getBBox().scale(e,t,r??void 0);return this.startBatch("scale",o),this.setPosition(c.x,c.y,o),this.resize(c.width,c.height,o),this.stopBatch("scale"),this}},{key:"position",value:function(e,t,r){return typeof e=="number"?this.setPosition(e,t,r):this.getPosition(e)}},{key:"getPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.relative){var t=this.getParent();if(t!=null&&t.isNode()){var r=this.getPosition(),o=t.getPosition();return{x:r.x-o.x,y:r.y-o.y}}}var c=this.store.get("position");return c?Object.assign({},c):{x:0,y:0}}},{key:"setPosition",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,c,p;if(typeof e=="object"?(o=e.x,c=e.y,p=t||{}):(o=e,c=t,p=r||{}),p.relative){var y=this.getParent();if(y!=null&&y.isNode()){var C=y.getPosition();o+=C.x,c+=C.y}}if(p.deep){var S=this.getPosition();this.translate(o-S.x,c-S.y,p)}else this.store.set("position",{x:o,y:c},p);return this}},{key:"translate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===0&&t===0)return this;r.translateBy=r.translateBy||this.id;var o=this.getPosition();if(r.restrict!=null&&r.translateBy===this.id){var c=this.getBBox({deep:!0}),p=r.restrict,y=o.x-c.x,C=o.y-c.y,S=Math.max(p.x+y,Math.min(p.x+p.width+y-c.width,o.x+e)),I=Math.max(p.y+C,Math.min(p.y+p.height+C-c.height,o.y+t));e=S-o.x,t=I-o.y}var W={x:o.x+e,y:o.y+t};return r.tx=e,r.ty=t,r.transition?(typeof r.transition!="object"&&(r.transition={}),this.transition("position",W,Object.assign(Object.assign({},r.transition),{interp:Qh.object})),this.eachChild(function(q){var ie,ve=(ie=r.exclude)===null||ie===void 0?void 0:ie.includes(q);ve||q.translate(e,t,r)})):(this.startBatch("translate",r),this.store.set("position",W,r),this.eachChild(function(q){var ie,ve=(ie=r.exclude)===null||ie===void 0?void 0:ie.includes(q);ve||q.translate(e,t,r)}),this.stopBatch("translate",r)),this}},{key:"angle",value:function(e,t){return e==null?this.getAngle():this.rotate(e,t)}},{key:"getAngle",value:function(){return this.store.get("angle",0)}},{key:"rotate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getAngle();if(t.center){var o=this.getSize(),c=this.getPosition(),p=this.getBBox().getCenter();p.rotate(r-e,t.center);var y=p.x-o.width/2-c.x,C=p.y-o.height/2-c.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(c.x+y,c.y+C,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(r+e)%360,t);return this}},{key:"getBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.deep){var t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),no.getCellsBBox(t)}return qr.fromPositionAndSize(this.getPosition(),this.getSize())}},{key:"getConnectionPoint",value:function(e,t){var r=this.getBBox(),o=r.getCenter(),c=e.getTerminal(t);if(c==null)return o;var p=c.port;if(!p||!this.hasPort(p))return o;var y=this.getPort(p);if(!y||!y.group)return o;var C=this.getPortsPosition(y.group),S=C[p].position,I=Bt.create(S).translate(r.getOrigin()),W=this.getAngle();return W&&I.rotate(-W,o),I}},{key:"fit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getChildren()||[],r=t.filter(function(I){return I.isNode()});if(r.length===0)return this;this.startBatch("fit-embeds",e),e.deep&&r.forEach(function(I){return I.fit(e)});var o=no.getCellsBBox(r),c=o.x,p=o.y,y=o.width,C=o.height,S=T.normalizeSides(e.padding);return c-=S.left,p-=S.top,y+=S.left+S.right,C+=S.bottom+S.top,this.store.set({position:{x:c,y:p},size:{width:y,height:C}},e),this.stopBatch("fit-embeds"),this}},{key:"portContainerMarkup",get:function(){return this.getPortContainerMarkup()}},{key:"portContainerMarkup",set:function(e){this.setPortContainerMarkup(e)}},{key:"getDefaultPortContainerMarkup",value:function(){return this.store.get("defaultPortContainerMarkup")||Xi.getPortContainerMarkup()}},{key:"getPortContainerMarkup",value:function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}},{key:"setPortContainerMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portContainerMarkup",Xi.clone(e),t),this}},{key:"portMarkup",get:function(){return this.getPortMarkup()}},{key:"portMarkup",set:function(e){this.setPortMarkup(e)}},{key:"getDefaultPortMarkup",value:function(){return this.store.get("defaultPortMarkup")||Xi.getPortMarkup()}},{key:"getPortMarkup",value:function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}},{key:"setPortMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portMarkup",Xi.clone(e),t),this}},{key:"portLabelMarkup",get:function(){return this.getPortLabelMarkup()}},{key:"portLabelMarkup",set:function(e){this.setPortLabelMarkup(e)}},{key:"getDefaultPortLabelMarkup",value:function(){return this.store.get("defaultPortLabelMarkup")||Xi.getPortLabelMarkup()}},{key:"getPortLabelMarkup",value:function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}},{key:"setPortLabelMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portLabelMarkup",Xi.clone(e),t),this}},{key:"ports",get:function(){var e=this.store.get("ports",{items:[]});return e.items==null&&(e.items=[]),e}},{key:"getPorts",value:function(){return f.cloneDeep(this.ports.items)}},{key:"getPortsByGroup",value:function(e){return this.getPorts().filter(function(t){return t.group===e})}},{key:"getPort",value:function(e){return f.cloneDeep(this.ports.items.find(function(t){return t.id&&t.id===e}))}},{key:"getPortAt",value:function(e){return this.ports.items[e]||null}},{key:"hasPorts",value:function(){return this.ports.items.length>0}},{key:"hasPort",value:function(e){return this.getPortIndex(e)!==-1}},{key:"getPortIndex",value:function(e){var t=typeof e=="string"?e:e.id;return t!=null?this.ports.items.findIndex(function(r){return r.id===t}):-1}},{key:"getPortsPosition",value:function(e){var t=this.getSize(),r=this.port.getPortsLayoutByGroup(e,new qr(0,0,t.width,t.height));return r.reduce(function(o,c){var p=c.portLayout;return o[c.portId]={position:Object.assign({},p.position),angle:p.angle||0},o},{})}},{key:"getPortProp",value:function(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}},{key:"setPortProp",value:function(e,t,r,o){if(typeof t=="string"||Array.isArray(t)){var c=this.prefixPortPath(e,t),p=r;return this.setPropByPath(c,p,o)}var y=this.prefixPortPath(e),C=t;return this.setPropByPath(y,C,r)}},{key:"removePortProp",value:function(e,t,r){return typeof t=="string"||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),r):this.removePropByPath(this.prefixPortPath(e),t)}},{key:"portProp",value:function(e,t,r,o){return t==null?this.getPortProp(e):typeof t=="string"||Array.isArray(t)?arguments.length===2?this.getPortProp(e,t):r==null?this.removePortProp(e,t,o):this.setPortProp(e,t,r,o):this.setPortProp(e,t,r)}},{key:"prefixPortPath",value:function(e,t){var r=this.getPortIndex(e);if(r===-1)throw new Error('Unable to find port with id: "'.concat(e,'"'));return t==null||t===""?["ports","items","".concat(r)]:Array.isArray(t)?["ports","items","".concat(r)].concat(Object(Ca.a)(t)):"ports/items/".concat(r,"/").concat(t)}},{key:"addPort",value:function(e,t){var r=Object(Ca.a)(this.ports.items);return r.push(e),this.setPropByPath("ports/items",r,t),this}},{key:"addPorts",value:function(e,t){return this.setPropByPath("ports/items",[].concat(Object(Ca.a)(this.ports.items),Object(Ca.a)(e)),t),this}},{key:"insertPort",value:function(e,t,r){var o=Object(Ca.a)(this.ports.items);return o.splice(e,0,t),this.setPropByPath("ports/items",o,r),this}},{key:"removePort",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePortAt(this.getPortIndex(e),t)}},{key:"removePortAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e>=0){var r=Object(Ca.a)(this.ports.items);r.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",r,t)}return this}},{key:"removePorts",value:function(e,t){var r;if(Array.isArray(e)){if(r=t||{},e.length){r.rewrite=!0;var o=Object(Ca.a)(this.ports.items),c=o.filter(function(p){return!e.some(function(y){var C=typeof y=="string"?y:y.id;return p.id===C})});this.setPropByPath("ports/items",c,r)}}else r=e||{},r.rewrite=!0,this.setPropByPath("ports/items",[],r);return this}},{key:"getParsedPorts",value:function(){return this.port.getPorts()}},{key:"getParsedGroups",value:function(){return this.port.groups}},{key:"getPortsLayoutByGroup",value:function(e,t){return this.port.getPortsLayoutByGroup(e,t)}},{key:"initPorts",value:function(){var e=this;this.updatePortData(),this.on("change:ports",function(){e.processRemovedPort(),e.updatePortData()})}},{key:"processRemovedPort",value:function(){var e=this.ports,t={};e.items.forEach(function(C){C.id&&(t[C.id]=!0)});var r={},o=this.store.getPrevious("ports")||{items:[]};o.items.forEach(function(C){C.id&&!t[C.id]&&(r[C.id]=!0)});var c=this.model;if(c&&!f.isEmpty(r)){var p=c.getConnectedEdges(this,{incoming:!0});p.forEach(function(C){var S=C.getTargetPortId();S&&r[S]&&C.remove()});var y=c.getConnectedEdges(this,{outgoing:!0});y.forEach(function(C){var S=C.getSourcePortId();S&&r[S]&&C.remove()})}}},{key:"validatePorts",value:function(){var e=this,t={},r=[];return this.ports.items.forEach(function(o){typeof o!="object"&&r.push("Invalid port ".concat(o,".")),o.id==null&&(o.id=e.generatePortId()),t[o.id]&&r.push("Duplicitied port id."),t[o.id]=!0}),r}},{key:"generatePortId",value:function(){return E.uuid()}},{key:"updatePortData",value:function(){var e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));var t=this.port?this.port.getPorts():null;this.port=new XO(this.ports);var r=this.port.getPorts(),o=t?r.filter(function(p){return t.find(function(y){return y.id===p.id})?null:p}):Object(Ca.a)(r),c=t?t.filter(function(p){return r.find(function(y){return y.id===p.id})?null:p}):[];o.length>0&&this.notify("ports:added",{added:o,cell:this,node:this}),c.length>0&&this.notify("ports:removed",{removed:c,cell:this,node:this})}}]),i}(no);Ds.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.size=="function"&&typeof e.position=="function"}a.isNode=s}(Ds||(Ds={})),function(a){a.config({propHooks:function(i){var n=i.ports,e=im(i,["ports"]);return n&&(e.ports=Array.isArray(n)?{items:n}:n),e}})}(Ds||(Ds={})),function(a){a.registry=Os.create({type:"node",process:function(i,n){if(Ap.exist(i,!0))throw new Error("Node with name '".concat(i,"' was registered by anthor Edge"));if(typeof n=="function")return n.config({shape:i}),n;var e=a,t=n.inherit,r=im(n,["inherit"]);if(t)if(typeof t=="string"){var o=this.get(t);o==null?this.onNotFound(t,"inherited"):e=o}else e=t;r.constructorName==null&&(r.constructorName=i);var c=e.define.call(e,r);return c.config({shape:i}),c}}),Ap.setNodeRegistry(a.registry)}(Ds||(Ds={})),function(a){var s=0;function i(t){return t?E.pascalCase(t):(s+=1,"CustomNode".concat(s))}function n(t){var r=t.constructorName,o=t.overwrite,c=im(t,["constructorName","overwrite"]),p=f.createClass(i(r||c.shape),this);return p.config(c),c.shape&&a.registry.register(c.shape,p,o),p}a.define=n;function e(t){var r=t.shape||"rect",o=a.registry.get(r);return o?new o(t):a.registry.onNotFound(r)}a.create=e}(Ds||(Ds={}));var WO=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Qu=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"label",get:function(){return this.getLabel()},set:function(e){this.setLabel(e)}},{key:"getLabel",value:function(){return this.getAttrByPath("text/text")}},{key:"setLabel",value:function(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}},{key:"removeLabel",value:function(){return this.removeAttrByPath("text/text"),this}}]),i}(Ds);(function(a){a.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},a.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},a.config({attrs:{text:Object.assign({},a.labelAttr)},propHooks:function(i){var n=i.label,e=WO(i,["label"]);return n&&f.setByPath(e,"attrs/text/text",n),e},visible:!0})})(Qu||(Qu={}));var HO=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i};function KO(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return'<g class="rotatable"><g class="scalable"><'.concat(a,"/></g>").concat(s?"":"<text/>","</g>")}function wg(a){return"basic.".concat(a)}function Zp(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"xlink:href",s=function(n){var e=n.imageUrl,t=n.imageWidth,r=n.imageHeight,o=HO(n,["imageUrl","imageWidth","imageHeight"]);if(e!=null||t!=null||r!=null){var c=function(){if(o.attrs){var y=o.attrs.image;e!=null&&(y[a]=e),t!=null&&(y.width=t),r!=null&&(y.height=r),o.attrs.image=y}};o.attrs?(o.attrs.image==null&&(o.attrs.image={}),c()):(o.attrs={image:{}},c())}return o};return s}function xf(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=wg(a),e={constructorName:n,attrs:Z({".":{fill:"#ffffff",stroke:"none"}},a,{fill:"#ffffff",stroke:"#000000"})};i.ignoreMarkup||(e.markup=KO(a,i.noText===!0));var t=i.parent||Qu;return t.define(f.merge(e,s,{shape:n}))}var HS=xf("rect",{attrs:{rect:{width:100,height:60}}}),KS=xf("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),$S=xf("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),YS=xf("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),QS=xf("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),JS=xf("image",{attrs:{text:{refY:null,refDy:16}},propHooks:Zp()}),$O=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},B0=xf("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(s){var i=s.d,n=$O(s,["d"]);return i!=null&&f.setByPath(n,"attrs/path/d",i),n}}),ZS=xf("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:B0,ignoreMarkup:!0}),qS=xf("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:B0,ignoreMarkup:!0}),om=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},gs=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(_r.a)(this,i),s.call(this,n)}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"preprocess",value:function(e,t){var r=e.source,o=e.sourceCell,c=e.sourcePort,p=e.sourcePoint,y=e.target,C=e.targetCell,S=e.targetPort,I=e.targetPoint,W=om(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),q=W,ie=function(Kt){return typeof Kt=="string"||typeof Kt=="number"};if(r!=null)if(no.isCell(r))q.source={cell:r.id};else if(ie(r))q.source={cell:r};else if(Bt.isPoint(r))q.source=r.toJSON();else if(Array.isArray(r))q.source={x:r[0],y:r[1]};else{var ve=r.cell;no.isCell(ve)?q.source=Object.assign(Object.assign({},r),{cell:ve.id}):q.source=r}if(o!=null||c!=null){var Le=q.source;if(o!=null){var Oe=ie(o)?o:o.id;Le?Le.cell=Oe:Le=q.source={cell:Oe}}c!=null&&Le&&(Le.port=c)}else p!=null&&(q.source=Bt.create(p).toJSON());if(y!=null)if(no.isCell(y))q.target={cell:y.id};else if(ie(y))q.target={cell:y};else if(Bt.isPoint(y))q.target=y.toJSON();else if(Array.isArray(y))q.target={x:y[0],y:y[1]};else{var it=y.cell;no.isCell(it)?q.target=Object.assign(Object.assign({},y),{cell:it.id}):q.target=y}if(C!=null||S!=null){var at=q.target;if(C!=null){var Qe=ie(C)?C:C.id;at?at.cell=Qe:at=q.target={cell:Qe}}S!=null&&at&&(at.port=S)}else I!=null&&(q.target=Bt.create(I).toJSON());return ni(Object(ui.a)(i.prototype),"preprocess",this).call(this,q,t)}},{key:"setup",value:function(){var e=this;ni(Object(ui.a)(i.prototype),"setup",this).call(this),this.on("change:labels",function(t){return e.onLabelsChanged(t)}),this.on("change:vertices",function(t){return e.onVertexsChanged(t)})}},{key:"isEdge",value:function(){return!0}},{key:"disconnect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}},{key:"source",get:function(){return this.getSource()}},{key:"source",set:function(e){this.setSource(e)}},{key:"getSource",value:function(){return this.getTerminal("source")}},{key:"getSourceCellId",value:function(){return this.source.cell}},{key:"getSourcePortId",value:function(){return this.source.port}},{key:"setSource",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("source",e,t,r)}},{key:"target",get:function(){return this.getTarget()}},{key:"target",set:function(e){this.setTarget(e)}},{key:"getTarget",value:function(){return this.getTerminal("target")}},{key:"getTargetCellId",value:function(){return this.target.cell}},{key:"getTargetPortId",value:function(){return this.target.port}},{key:"setTarget",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("target",e,t,r)}},{key:"getTerminal",value:function(e){return Object.assign({},this.store.get(e))}},{key:"setTerminal",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(no.isCell(t))return this.store.set(e,f.merge({},r,{cell:t.id}),o),this;var c=t;return Bt.isPoint(t)||c.x!=null&&c.y!=null?(this.store.set(e,f.merge({},r,{x:c.x,y:c.y}),o),this):(this.store.set(e,f.cloneDeep(t),o),this)}},{key:"getSourcePoint",value:function(){return this.getTerminalPoint("source")}},{key:"getTargetPoint",value:function(){return this.getTerminalPoint("target")}},{key:"getTerminalPoint",value:function(e){var t=this[e];if(Bt.isPointLike(t))return Bt.create(t);var r=this.getTerminalCell(e);return r?r.getConnectionPoint(this,e):new Bt}},{key:"getSourceCell",value:function(){return this.getTerminalCell("source")}},{key:"getTargetCell",value:function(){return this.getTerminalCell("target")}},{key:"getTerminalCell",value:function(e){if(this.model){var t=e==="source"?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}},{key:"getSourceNode",value:function(){return this.getTerminalNode("source")}},{key:"getTargetNode",value:function(){return this.getTerminalNode("target")}},{key:"getTerminalNode",value:function(e){for(var t=this,r={};t&&t.isEdge();){if(r[t.id])return null;r[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}},{key:"router",get:function(){return this.getRouter()}},{key:"router",set:function(e){e==null?this.removeRouter():this.setRouter(e)}},{key:"getRouter",value:function(){return this.store.get("router")}},{key:"setRouter",value:function(e,t,r){return typeof e=="object"?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},r),this}},{key:"removeRouter",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("router",e),this}},{key:"connector",get:function(){return this.getConnector()}},{key:"connector",set:function(e){e==null?this.removeConnector():this.setConnector(e)}},{key:"getConnector",value:function(){return this.store.get("connector")}},{key:"setConnector",value:function(e,t,r){return typeof e=="object"?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},r),this}},{key:"removeConnector",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("connector",e)}},{key:"strategy",get:function(){return this.getStrategy()}},{key:"strategy",set:function(e){e==null?this.removeStrategy():this.setStrategy(e)}},{key:"getStrategy",value:function(){return this.store.get("strategy")}},{key:"setStrategy",value:function(e,t,r){return typeof e=="object"?this.store.set("strategy",e,t):this.store.set("strategy",{name:e,args:t},r),this}},{key:"removeStrategy",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("strategy",e)}},{key:"getDefaultLabel",value:function(){var e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return f.cloneDeep(t)}},{key:"labels",get:function(){return this.getLabels()}},{key:"labels",set:function(e){this.setLabels(e)}},{key:"getLabels",value:function(){var e=this;return Object(Ca.a)(this.store.get("labels",[])).map(function(t){return e.parseLabel(t)})}},{key:"setLabels",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("labels",Array.isArray(e)?e:[e],t),this}},{key:"insertLabel",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.getLabels(),c=o.length,p=t!=null&&Number.isFinite(t)?t:c;return p<0&&(p=c+p+1),o.splice(p,0,this.parseLabel(e)),this.setLabels(o,r)}},{key:"appendLabel",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertLabel(e,-1,t)}},{key:"getLabelAt",value:function(e){var t=this.getLabels();return e!=null&&Number.isFinite(e)?this.parseLabel(t[e]):null}},{key:"setLabelAt",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null&&Number.isFinite(e)){var o=this.getLabels();o[e]=this.parseLabel(t),this.setLabels(o,r)}return this}},{key:"removeLabelAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getLabels(),o=e!=null&&Number.isFinite(e)?e:-1,c=r.splice(o,1);return this.setLabels(r,t),c.length?c[0]:null}},{key:"parseLabel",value:function(e){if(typeof e=="string"){var t=this.constructor;return t.parseStringLabel(e)}return e}},{key:"onLabelsChanged",value:function(e){var t=e.previous,r=e.current,o=t&&r?r.filter(function(p){return t.find(function(y){return p===y||f.isEqual(p,y)})?null:p}):r?Object(Ca.a)(r):[],c=t&&r?t.filter(function(p){return r.find(function(y){return p===y||f.isEqual(p,y)})?null:p}):t?Object(Ca.a)(t):[];o.length>0&&this.notify("labels:added",{added:o,cell:this,edge:this}),c.length>0&&this.notify("labels:removed",{removed:c,cell:this,edge:this})}},{key:"vertexMarkup",get:function(){return this.getVertexMarkup()}},{key:"vertexMarkup",set:function(e){this.setVertexMarkup(e)}},{key:"getDefaultVertexMarkup",value:function(){return this.store.get("defaultVertexMarkup")||Xi.getEdgeVertexMarkup()}},{key:"getVertexMarkup",value:function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}},{key:"setVertexMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("vertexMarkup",Xi.clone(e),t),this}},{key:"vertices",get:function(){return this.getVertices()}},{key:"vertices",set:function(e){this.setVertices(e)}},{key:"getVertices",value:function(){return Object(Ca.a)(this.store.get("vertices",[]))}},{key:"setVertices",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Array.isArray(e)?e:[e];return this.store.set("vertices",r.map(function(o){return Bt.toJSON(o)}),t),this}},{key:"insertVertex",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.getVertices(),c=o.length,p=t!=null&&Number.isFinite(t)?t:c;return p<0&&(p=c+p+1),o.splice(p,0,Bt.toJSON(e)),this.setVertices(o,r)}},{key:"appendVertex",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertVertex(e,-1,t)}},{key:"getVertexAt",value:function(e){if(e!=null&&Number.isFinite(e)){var t=this.getVertices();return t[e]}return null}},{key:"setVertexAt",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null&&Number.isFinite(e)){var o=this.getVertices();o[e]=t,this.setVertices(o,r)}return this}},{key:"removeVertexAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getVertices(),o=e!=null&&Number.isFinite(e)?e:-1;return r.splice(o,1),this.setVertices(r,t)}},{key:"onVertexsChanged",value:function(e){var t=e.previous,r=e.current,o=t&&r?r.filter(function(p){return t.find(function(y){return Bt.equals(p,y)})?null:p}):r?Object(Ca.a)(r):[],c=t&&r?t.filter(function(p){return r.find(function(y){return Bt.equals(p,y)})?null:p}):t?Object(Ca.a)(t):[];o.length>0&&this.notify("vertexs:added",{added:o,cell:this,edge:this}),c.length>0&&this.notify("vertexs:removed",{removed:c,cell:this,edge:this})}},{key:"getDefaultMarkup",value:function(){return this.store.get("defaultMarkup")||Xi.getEdgeMarkup()}},{key:"getMarkup",value:function(){return ni(Object(ui.a)(i.prototype),"getMarkup",this).call(this)||this.getDefaultMarkup()}},{key:"toolMarkup",get:function(){return this.getToolMarkup()}},{key:"toolMarkup",set:function(e){this.setToolMarkup(e)}},{key:"getDefaultToolMarkup",value:function(){return this.store.get("defaultToolMarkup")||Xi.getEdgeToolMarkup()}},{key:"getToolMarkup",value:function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}},{key:"setToolMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("toolMarkup",e,t),this}},{key:"doubleToolMarkup",get:function(){return this.getDoubleToolMarkup()}},{key:"doubleToolMarkup",set:function(e){this.setDoubleToolMarkup(e)}},{key:"getDefaultDoubleToolMarkup",value:function(){return this.store.get("defaultDoubleToolMarkup")}},{key:"getDoubleToolMarkup",value:function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}},{key:"setDoubleToolMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("doubleToolMarkup",e,t),this}},{key:"arrowheadMarkup",get:function(){return this.getArrowheadMarkup()}},{key:"arrowheadMarkup",set:function(e){this.setArrowheadMarkup(e)}},{key:"getDefaultArrowheadMarkup",value:function(){return this.store.get("defaultArrowheadMarkup")||Xi.getEdgeArrowheadMarkup()}},{key:"getArrowheadMarkup",value:function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}},{key:"setArrowheadMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("arrowheadMarkup",e,t),this}},{key:"translate",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(function(o){return{x:(o.x||0)+e,y:(o.y||0)+t}},r)}},{key:"scale",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.applyToPoints(function(c){return Bt.create(c).scale(e,t,r).toJSON()},o)}},{key:"applyToPoints",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={},o=this.getSource(),c=this.getTarget();Bt.isPointLike(o)&&(r.source=e(o)),Bt.isPointLike(c)&&(r.target=e(c));var p=this.getVertices();return p.length>0&&(r.vertices=p.map(e)),this.store.set(r,t),this}},{key:"getBBox",value:function(){return this.getPolyline().bbox()}},{key:"getConnectionPoint",value:function(){return this.getPolyline().pointAt(.5)}},{key:"getPolyline",value:function(){var e=[this.getSourcePoint()].concat(Object(Ca.a)(this.getVertices().map(function(t){return Bt.create(t)})),[this.getTargetPoint()]);return new kl(e)}},{key:"updateParent",value:function(e){var t=null,r=this.getSourceCell(),o=this.getTargetCell(),c=this.getParent();return r&&o&&(r===o||r.isDescendantOf(o)?t=o:o.isDescendantOf(r)?t=r:t=no.getCommonAncestor(r,o)),c&&(!t||t.id!==c.id)&&c.unembed(this,e),t&&t.embed(this,e),t}},{key:"hasLoop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getSource(),r=this.getTarget(),o=t.cell,c=r.cell;if(!o||!c)return!1;var p=o===c;if(!p&&e.deep&&this._model){var y=this.getSourceCell(),C=this.getTargetCell();y&&C&&(p=y.isAncestorOf(C,e)||C.isAncestorOf(y,e))}return p}},{key:"getFragmentAncestor",value:function(){var e=[this,this.getSourceNode(),this.getTargetNode()].filter(function(t){return t!=null});return this.getCommonAncestor.apply(this,Object(Ca.a)(e))}},{key:"isFragmentDescendantOf",value:function(e){var t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}}]),i}(no);gs.defaults={},function(a){function s(i,n){var e=i,t=n;return e.cell===t.cell?e.port===t.port||e.port==null&&t.port==null:!1}a.equalTerminals=s}(gs||(gs={})),function(a){a.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function s(i){return{attrs:{label:{text:i}}}}a.parseStringLabel=s}(gs||(gs={})),function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.disconnect=="function"&&typeof e.getSource=="function"&&typeof e.getTarget=="function"}a.isEdge=s}(gs||(gs={})),function(a){a.registry=Os.create({type:"edge",process:function(i,n){if(Ap.exist(i,!1))throw new Error("Edge with name '".concat(i,"' was registered by anthor Node"));if(typeof n=="function")return n.config({shape:i}),n;var e=a,t=n.inherit,r=t===void 0?"edge":t,o=om(n,["inherit"]);if(typeof r=="string"){var c=this.get(r||"edge");c==null&&r?this.onNotFound(r,"inherited"):e=c}else e=r;o.constructorName==null&&(o.constructorName=i);var p=e.define.call(e,o);return p.config({shape:i}),p}}),Ap.setEdgeRegistry(a.registry)}(gs||(gs={})),function(a){var s=0;function i(t){return t?E.pascalCase(t):(s+=1,"CustomEdge".concat(s))}function n(t){var r=t.constructorName,o=t.overwrite,c=om(t,["constructorName","overwrite"]),p=f.createClass(i(r||c.shape),this);return p.config(c),c.shape&&a.registry.register(c.shape,p,o),p}a.define=n;function e(t){var r=t.shape||"edge",o=a.registry.get(r);return o?new o(t):a.registry.onNotFound(r)}a.create=e}(gs||(gs={})),function(a){var s="basic.edge";a.config({shape:s,propHooks:function(n){var e=n.label,t=n.vertices,r=om(n,["label","vertices"]);if(e){r.labels==null&&(r.labels=[]);var o=typeof e=="string"?a.parseStringLabel(e):e;r.labels.push(o)}return t&&(Array.isArray(t)&&(r.vertices=t.map(function(c){return Bt.create(c).toJSON()}))),r}}),a.registry.register(s,a)}(gs||(gs={}));var YO=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Zh=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.POINT_ROUNDING=2,n.markerCache={},n}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"getContainerClassName",value:function(){return[ni(Object(ui.a)(i.prototype),"getContainerClassName",this).call(this),this.prefixClassName("edge")].join(" ")}},{key:"sourceBBox",get:function(){var e=this.sourceView;if(!e){var t=this.cell.getSource();return new qr(t.x,t.y)}var r=this.sourceMagnet;return e.isEdgeElement(r)?new qr(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(r||e.container)}},{key:"targetBBox",get:function(){var e=this.targetView;if(!e){var t=this.cell.getTarget();return new qr(t.x,t.y)}var r=this.targetMagnet;return e.isEdgeElement(r)?new qr(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(r||e.container)}},{key:"isEdgeView",value:function(){return!0}},{key:"confirmUpdate",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e;if(this.hasAction(o,"source")){if(!this.updateTerminalProperties("source"))return o;o=this.removeAction(o,"source")}if(this.hasAction(o,"target")){if(!this.updateTerminalProperties("target"))return o;o=this.removeAction(o,"target")}var c=this.graph,p=this.sourceView,y=this.targetView;return c&&(p&&!c.renderer.isViewMounted(p)||y&&!c.renderer.isViewMounted(y))?o:this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","vertices","labels","tools","widget"]),o):(o=this.handleAction(o,"vertices",function(){return t.renderVertexMarkers()}),o=this.handleAction(o,"update",function(){return t.update(null,r)}),o=this.handleAction(o,"labels",function(){return t.onLabelsChange(r)}),o=this.handleAction(o,"tools",function(){t.renderTools(),t.updateToolsPosition()}),o=this.handleAction(o,"widget",function(){return t.renderExternalTools()}),o)}},{key:"onLabelsChange",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}},{key:"shouldRerenderLabels",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell.previous("labels");if(t==null)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],o=r.length;if(o>1){var c=r[1];if(t[c]){if(o===2)return typeof e.propertyValue=="object"&&f.has(e.propertyValue,"markup");if(r[2]!=="markup")return!1}}}return!0}},{key:"render",value:function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}},{key:"renderMarkup",value:function(){var e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}},{key:"renderJSONMarkup",value:function(e){var t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}},{key:"renderStringMarkup",value:function(e){var t=this.containers,r=pi.createVectors(e);r.forEach(function(o){var c=o.attr("class");c&&(t[E.camelCase(c)]=o.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),O.append(this.container,r.map(function(o){return o.node}))}},{key:"renderLabels",value:function(){var e=this.cell,t=e.getLabels(),r=t.length,o=this.containers.labels;if(this.labelCache={},this.labelSelectors={},r<=0)return o&&o.parentNode&&o.parentNode.removeChild(o),this;o?this.empty(o):(o=O.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),o),this.containers.labels=o);for(var c=0,p=t.length;c<p;c+=1){var y=t[c],C=this.normalizeLabelMarkup(this.parseLabelMarkup(y.markup)),S=void 0,I=void 0;if(C)S=C.node,I=C.selectors;else{var W=e.getDefaultLabel(),q=this.normalizeLabelMarkup(this.parseLabelMarkup(W.markup));S=q.node,I=q.selectors}S.setAttribute("data-index","".concat(c)),o.appendChild(S);var ie=this.rootSelector;if(I[ie])throw new Error("Ambiguous label root selector.");I[ie]=S,this.labelCache[c]=S,this.labelSelectors[c]=I}return o.parentNode==null&&this.container.appendChild(o),this.updateLabels(),this.customizeLabels(),this}},{key:"parseLabelMarkup",value:function(e){return e?typeof e=="string"?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}},{key:"parseLabelStringMarkup",value:function(e){for(var t=pi.createVectors(e),r=document.createDocumentFragment(),o=0,c=t.length;o<c;o+=1){var p=t[o].node;r.appendChild(p)}return{fragment:r,selectors:{}}}},{key:"normalizeLabelMarkup",value:function(e){if(e==null)return;var t=e.fragment;if(!(t instanceof DocumentFragment)||!t.hasChildNodes())throw new Error("Invalid label markup.");var r,o=t.childNodes;return o.length>1||o[0].nodeName.toUpperCase()!=="G"?r=pi.create("g").append(t):r=pi.create(o[0]),r.addClass(this.prefixClassName("edge-label")),{node:r.node,selectors:e.selectors}}},{key:"updateLabels",value:function(){if(this.containers.labels)for(var e=this.cell,t=e.labels,r=this.can("edgeLabelMovable"),o=e.getDefaultLabel(),c=0,p=t.length;c<p;c+=1){var y=this.labelCache[c],C=this.labelSelectors[c];y.setAttribute("cursor",r?"move":"default");var S=t[c],I=f.merge({},o.attrs,S.attrs);this.updateAttrs(y,I,{selectors:C,rootBBox:S.size?qr.fromSize(S.size):void 0})}}},{key:"mergeLabelAttrs",value:function(e,t,r){if(t===null)return null;if(t===void 0)return r===null?null:r===void 0?void 0:e?r:f.merge({},r);if(e)return f.merge({},r,t)}},{key:"customizeLabels",value:function(){if(this.containers.labels)for(var e=this.cell,t=e.labels,r=0,o=t.length;r<o;r+=1){var c=t[r],p=this.labelCache[r],y=this.labelSelectors[r];this.graph.hook.onEdgeLabelRendered({edge:e,label:c,container:p,selectors:y})}}},{key:"renderTools",value:function(){var e=this.containers.tools;if(e==null)return this;var t=this.cell.toolMarkup,r=this.$(e).empty();if(Xi.isStringMarkup(t)){var o=E.template(t),c=pi.create(o());if(r.append(c.node),this.toolCache=c.node,this.options.doubleTools){var p,y=this.cell.doubleToolMarkup;Xi.isStringMarkup(y)?(o=E.template(y),p=pi.create(o())):p=c.clone(),r.append(p.node),this.tool2Cache=p.node}}return this}},{key:"renderExternalTools",value:function(){var e=this.cell.getTools();return this.addTools(e),this}},{key:"renderVertexMarkers",value:function(){var e=this.containers.vertices;if(e==null)return this;var t=this.cell.vertexMarkup,r=this.$(e).empty();if(Xi.isStringMarkup(t)){var o=E.template(t);this.cell.getVertices().forEach(function(c,p){r.append(pi.create(o(Object.assign({index:p},c))).node)})}return this}},{key:"renderArrowheadMarkers",value:function(){var e=this.containers.arrowheads;if(e==null)return this;var t=this.cell.arrowheadMarkup,r=this.$(e).empty();if(Xi.isStringMarkup(t)){var o=E.template(t),c=pi.create(o({end:"source"})).node,p=pi.create(o({end:"target"})).node;this.containers.sourceArrowhead=c,this.containers.targetArrowhead=p,r.append(c,p)}return this}},{key:"update",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.cleanCache(),this.updateConnection(t);var r=this.cell.getAttrs();return r!=null&&this.updateAttrs(this.container,r,{attrs:e===r?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(t),this}},{key:"removeRedundantLinearVertices",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell,r=t.getVertices(),o=[this.sourceAnchor].concat(Object(Ca.a)(r),[this.targetAnchor]),c=o.length,p=new kl(o);p.simplify({threshold:.01});var y=p.points.map(function(S){return S.toJSON()}),C=y.length;return c===C?0:(t.setVertices(y.slice(1,C-1),e),c-C)}},{key:"updateConnectionPath",value:function(){var e=this.containers;if(e.connection){var t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){var r=this.getConnectionPathData();e.connectionWrap.setAttribute("d",r)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}},{key:"getTerminalView",value:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalAnchor",value:function(e){switch(e){case"source":return Bt.create(this.sourceAnchor);case"target":return Bt.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalConnectionPoint",value:function(e){switch(e){case"source":return Bt.create(this.sourcePoint);case"target":return Bt.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalMagnet",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case"source":{if(t.raw)return this.sourceMagnet;var r=this.sourceView;return r?this.sourceMagnet||r.container:null}case"target":{if(t.raw)return this.targetMagnet;var o=this.targetView;return o?this.targetMagnet||o.container:null}default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"updateConnection",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){var r=e.tx||0,o=e.ty||0;this.routePoints=new kl(this.routePoints).translate(r,o).points,this.translateConnectionPoints(r,o),this.path.translate(r,o)}else{var c=t.getVertices(),p=this.findAnchors(c);this.sourceAnchor=p.source,this.targetAnchor=p.target,this.routePoints=this.findRoutePoints(c);var y=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=y.source,this.targetPoint=y.target;var C=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,C.source||this.sourcePoint,C.target||this.targetPoint)}this.cleanCache()}},{key:"findAnchors",value:function(e){var t=this.cell,r=t.source,o=t.target,c=e[0],p=e[e.length-1];return o.priority&&!r.priority?this.findAnchorsOrdered("target",p,"source",c):this.findAnchorsOrdered("source",c,"target",p)}},{key:"findAnchorsOrdered",value:function(e,t,r,o){var c,p,y,C=this.cell,S=C[e],I=C[r],W=this.getTerminalView(e),q=this.getTerminalView(r),ie=this.getTerminalMagnet(e),ve=this.getTerminalMagnet(r);if(W){var Le;t?Le=Bt.create(t):q?Le=ve:Le=Bt.create(I),p=this.getAnchor(S.anchor,W,ie,Le,e)}else p=Bt.create(S);if(q){var Oe=Bt.create(o||p);y=this.getAnchor(I.anchor,q,ve,Oe,r)}else y=Bt.isPointLike(I)?Bt.create(I):new Bt;return c={},Z(c,e,p),Z(c,r,y),c}},{key:"getAnchor",value:function(e,t,r,o,c){var p=t.isEdgeElement(r),y=this.graph.options.connecting,C=typeof e=="string"?{name:e}:e;if(!C){var S=p?(c==="source"?y.sourceEdgeAnchor:y.targetEdgeAnchor)||y.edgeAnchor:(c==="source"?y.sourceAnchor:y.targetAnchor)||y.anchor;C=typeof S=="string"?{name:S}:S}if(!C)throw new Error("Anchor should be specified.");var I,W=C.name;if(p){var q=wp.registry.get(W);if(typeof q!="function")return wp.registry.onNotFound(W);I=w.call(q,this,t,r,o,C.args||{},c)}else{var ie=xp.registry.get(W);if(typeof ie!="function")return xp.registry.onNotFound(W);I=w.call(ie,this,t,r,o,C.args||{},c)}return I?I.round(this.POINT_ROUNDING):new Bt}},{key:"findRoutePoints",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.graph.options.connecting.router||kh.presets.normal,r=this.cell.getRouter()||t,o;if(typeof r=="function")o=w.call(r,this,e,{},this);else{var c=typeof r=="string"?r:r.name,p=typeof r=="string"?{}:r.args||{},y=c?kh.registry.get(c):kh.presets.normal;if(typeof y!="function")return kh.registry.onNotFound(c);o=w.call(y,this,e,p,this)}return o==null?e.map(function(C){return Bt.create(C)}):o.map(function(C){return Bt.create(C)})}},{key:"findConnectionPoints",value:function(e,t,r){var o=this.cell,c=this.graph.options.connecting,p=o.getSource(),y=o.getTarget(),C=this.sourceView,S=this.targetView,I=e[0],W=e[e.length-1],q;if(C&&!C.isEdgeElement(this.sourceMagnet)){var ie=this.sourceMagnet||C.container,ve=I||r,Le=new Ba(ve,t),Oe=p.connectionPoint||c.sourceConnectionPoint||c.connectionPoint;q=this.getConnectionPoint(Oe,C,ie,Le,"source")}else q=t;var it;if(S&&!S.isEdgeElement(this.targetMagnet)){var at=this.targetMagnet||S.container,Qe=y.connectionPoint||c.targetConnectionPoint||c.connectionPoint,qt=W||t,Kt=new Ba(qt,r);it=this.getConnectionPoint(Qe,S,at,Kt,"target")}else it=r;return{source:q,target:it}}},{key:"getConnectionPoint",value:function(e,t,r,o,c){var p=o.end;if(e==null)return p;var y=typeof e=="string"?e:e.name,C=typeof e=="string"?{}:e.args,S=Cp.registry.get(y);if(typeof S!="function")return Cp.registry.onNotFound(y);var I=w.call(S,this,o,t,r,C||{},c);return I?I.round(this.POINT_ROUNDING):p}},{key:"updateMarkerAttr",value:function(e){var t=this.cell.getAttrs(),r=".".concat(e,"-marker"),o=t&&t[r];o&&this.updateAttrs(this.container,{},{attrs:Z({},r,o),selectors:this.selectors})}},{key:"findMarkerPoints",value:function(e,t,r){var o=this,c=function(at){for(var Qe=o.cell.getAttrs(),qt=Object.keys(Qe),Kt=0,Tn=qt.length;Kt<Tn;Kt+=1){var Bn=Qe[qt[Kt]];if(Bn["".concat(at,"Marker")]||Bn["".concat(at,"-marker")]){var tr=Bn.strokeWidth||Bn["stroke-width"];if(tr)return parseFloat(tr);break}}return null},p=e[0],y=e[e.length-1],C=this.containers.sourceMarker,S=this.containers.targetMarker,I=this.markerCache,W,q;if(C){if(this.updateMarkerAttr("source"),I.sourceBBox=I.sourceBBox||O.getBBox(C),I.sourceBBox.width>0){var ie=O.scale(C);W=t.clone().move(p||r,I.sourceBBox.width*ie.sx*-1)}}else{var ve=c("source");ve&&(W=t.clone().move(p||r,-ve))}if(S){if(this.updateMarkerAttr("target"),I.targetBBox=I.targetBBox||O.getBBox(S),I.targetBBox.width>0){var Le=O.scale(S);q=r.clone().move(y||t,I.targetBBox.width*Le.sx*-1)}}else{var Oe=c("target");Oe&&(q=r.clone().move(y||t,-Oe))}return I.sourcePoint=W||t.clone(),I.targetPoint=q||r.clone(),{source:W,target:q}}},{key:"findPath",value:function(e,t,r){var o=this.cell.getConnector()||this.graph.options.connecting.connector,c,p,y;if(typeof o=="string"?c=o:(c=o.name,p=o.args),c){var C=Jh.registry.get(c);if(typeof C!="function")return Jh.registry.onNotFound(c);y=C}else y=Jh.presets.normal;var S=w.call(y,this,t,r,e,Object.assign(Object.assign({},p),{raw:!0}),this);return typeof S=="string"?Ii.parse(S):S}},{key:"translateConnectionPoints",value:function(e,t){var r=this.markerCache;r.sourcePoint&&r.sourcePoint.translate(e,t),r.targetPoint&&r.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}},{key:"updateLabelPositions",value:function(){if(this.containers.labels==null)return this;var e=this.path;if(!e)return this;var t=this.cell,r=t.getLabels();if(r.length===0)return this;for(var o=t.getDefaultLabel(),c=this.normalizeLabelPosition(o.position),p=0,y=r.length;p<y;p+=1){var C=r[p],S=this.normalizeLabelPosition(C.position),I=f.merge({},c,S),W=this.getLabelTransformationMatrix(I);this.labelCache[p].setAttribute("transform",O.matrixToTransformString(W))}return this}},{key:"updateToolsPosition",value:function(){if(this.containers.tools==null)return this;var e="",t=this.options.toolsOffset,r=this.getConnectionLength();if(r!=null){r<this.options.shortLength&&(e="scale(.5)",t/=2);var o=this.getPointAtLength(t);if(o!=null&&O.attr(this.toolCache,"transform","translate(".concat(o.x,",").concat(o.y,") ").concat(e)),this.options.doubleTools&&r>=this.options.longLength){var c=this.options.doubleToolsOffset||t;o=this.getPointAtLength(r-c),o!=null&&O.attr(this.tool2Cache,"transform","translate(".concat(o.x,",").concat(o.y,") ").concat(e)),O.attr(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&O.attr(this.tool2Cache,"visibility","hidden")}return this}},{key:"updateArrowheadMarkers",value:function(){var e=this.containers.arrowheads;if(e==null)return this;if(e.style.display==="none")return this;var t=this.containers.sourceArrowhead,r=this.containers.targetArrowhead;if(t&&r){var o=this.getConnectionLength()||0,c=o<this.options.shortLength?.5:1;O.scale(t,c),O.scale(r,c),this.translateAndAutoOrientArrows(t,r)}return this}},{key:"updateTerminalProperties",value:function(e){var t=this.cell,r=this.graph,o=t[e],c=o&&o.cell,p="".concat(e,"View");if(!c)return this[p]=null,this.updateTerminalMagnet(e),!0;var y=r.getCellById(c);if(!y)throw new Error("Edge's ".concat(e,' node with id "').concat(c,'" not exists'));var C=y.findView(r);return C?(this[p]=C,this.updateTerminalMagnet(e),!0):!1}},{key:"updateTerminalMagnet",value:function(e){var t="".concat(e,"Magnet"),r=this.getTerminalView(e);if(r){var o=r.getMagnetFromEdgeTerminal(this.cell[e]);o===r.container&&(o=null),this[t]=o}else this[t]=null}},{key:"translateAndAutoOrientArrows",value:function(e,t){var r=this.routePoints;e&&O.translateAndAutoOrient(e,this.sourcePoint,r[0]||this.targetPoint,this.graph.view.stage),t&&O.translateAndAutoOrient(t,this.targetPoint,r[r.length-1]||this.sourcePoint,this.graph.view.stage)}},{key:"getLabelPositionAngle",value:function(e){var t=this.cell.getLabelAt(e);return t&&t.position&&typeof t.position=="object"&&t.position.angle||0}},{key:"getLabelPositionArgs",value:function(e){var t=this.cell.getLabelAt(e);if(t&&t.position&&typeof t.position=="object")return t.position.options}},{key:"getDefaultLabelPositionArgs",value:function(){var e=this.cell.getDefaultLabel();if(e&&e.position&&typeof e.position=="object")return e.position.options}},{key:"mergeLabelPositionArgs",value:function(e,t){return e===null?null:e===void 0?t===null?null:t:f.merge({},t,e)}},{key:"addLabel",value:function(e,t,r,o){var c,p,y=0,C;typeof e!="number"?(c=e.x,p=e.y,typeof t=="number"?(y=t,C=r):C=t):(c=e,p=t,typeof r=="number"?(y=r,C=o):C=r);var S=this.getDefaultLabelPositionArgs(),I=C,W=this.mergeLabelPositionArgs(I,S),q={position:this.getLabelPosition(c,p,y,W)},ie=-1;return this.cell.insertLabel(q,ie,C),ie}},{key:"addVertex",value:function(e,t,r){var o=typeof e!="number",c=o?e.x:e,p=o?e.y:t,y=o?t:r,C={x:c,y:p},S=this.getVertexIndex(c,p);return this.cell.insertVertex(C,S,y),S}},{key:"sendToken",value:function(e,t,r){var o,c,p,y,C="linear";typeof t=="object"?(o=t.duration,c=t.reversed===!0,p=t.selector,t.rotate===!1?y="":t.rotate===!0?y="auto":t.rotate!=null&&(y="".concat(t.rotate)),t.timing&&(C=t.timing)):(o=t,c=!1,p=null),o=o||1e3;var S={dur:"".concat(o,"ms"),repeatCount:"1",calcMode:C,fill:"freeze"};if(y&&(S.rotate=y),c&&(S.keyPoints="1;0",S.keyTimes="0;1"),typeof t=="object"){var I=t.duration,W=t.reversed,q=t.selector,ie=t.rotate,ve=t.timing,Le=YO(t,["duration","reversed","selector","rotate","timing"]);Object.keys(Le).forEach(function(Bn){S[Bn]=Le[Bn]})}var Oe;if(typeof p=="string"?Oe=this.findOne(p,this.container,this.selectors):Oe=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(Oe instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var it=typeof e=="string"?this.findOne(e):e;if(it==null)throw new Error("Token animation requires a valid token element.");var at=it.parentNode,Qe=function(){at||O.remove(it)},qt=pi.create(it);at||qt.appendTo(this.graph.view.stage);var Kt=S.complete;S.complete=function(Bn){Qe(),r&&r(),Kt&&Kt(Bn)};var Tn=qt.animateAlongPath(S,Oe);return function(){Qe(),Tn()}}},{key:"getConnection",value:function(){return this.path!=null?this.path.clone():null}},{key:"getConnectionPathData",value:function(){if(this.path==null)return"";var e=this.cache.pathCache;return f.has(e,"data")||(e.data=this.path.serialize()),e.data||""}},{key:"getConnectionSubdivisions",value:function(){if(this.path==null)return null;var e=this.cache.pathCache;return f.has(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}},{key:"getConnectionLength",value:function(){if(this.path==null)return 0;var e=this.cache.pathCache;return f.has(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}},{key:"getPointAtLength",value:function(e){return this.path==null?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getPointAtRatio",value:function(e){return this.path==null?null:(T.isPercentage(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}},{key:"getTangentAtLength",value:function(e){return this.path==null?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getTangentAtRatio",value:function(e){return this.path==null?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPoint",value:function(e){return this.path==null?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointLength",value:function(e){return this.path==null?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointRatio",value:function(e){return this.path==null?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getLabelPosition",value:function(e,t,r,o){var c={distance:0},p=0,y;typeof r=="number"?(p=r,y=o):y=r,y!=null&&(c.options=y);var C=y&&y.absoluteOffset,S=!(y&&y.absoluteDistance),I=y&&y.absoluteDistance&&y.reverseDistance,W=this.path,q={segmentSubdivisions:this.getConnectionSubdivisions()},ie=new Bt(e,t),ve=W.closestPointT(ie,q),Le=this.getConnectionLength()||0,Oe=W.lengthAtT(ve,q);S&&(Oe=Le>0?Oe/Le:0),I&&(Oe=-1*(Le-Oe)||1),c.distance=Oe;var it;C||(it=W.tangentAtT(ve));var at;if(it)at=it.pointOffset(ie);else{var Qe=W.pointAtT(ve),qt=ie.diff(Qe);at={x:qt.x,y:qt.y}}return c.offset=at,c.angle=p,c}},{key:"normalizeLabelPosition",value:function(e){return typeof e=="number"?{distance:e}:e}},{key:"getLabelTransformationMatrix",value:function(e){var t=this.normalizeLabelPosition(e),r=t.options||{},o=t.angle||0,c=t.distance,p=c>0&&c<=1,y=0,C={x:0,y:0},S=t.offset;S&&(typeof S=="number"?y=S:(S.x!=null&&(C.x=S.x),S.y!=null&&(C.y=S.y)));var I=C.x!==0||C.y!==0||y===0,W=r.keepGradient,q=r.ensureLegibility,ie=this.path,ve={segmentSubdivisions:this.getConnectionSubdivisions()},Le=p?c*this.getConnectionLength():c,Oe=ie.tangentAtLength(Le,ve),it,at=o;if(Oe){if(I)it=Oe.start,it.translate(C);else{var Qe=Oe.clone();Qe.rotate(-90,Oe.start),Qe.setLength(y),it=Qe.end}W&&(at=Oe.angle()+o,q&&(at=Pi.normalize((at+90)%180-90)))}else it=ie.start,I&&it.translate(C);return O.createSVGMatrix().translate(it.x,it.y).rotate(at)}},{key:"getLabelCoordinates",value:function(e){var t=this.getLabelTransformationMatrix(e);return new Bt(t.e,t.f)}},{key:"getVertexIndex",value:function(e,t){var r=this.cell,o=r.getVertices(),c=this.getClosestPointLength(new Bt(e,t)),p=0;if(c!=null)for(var y=o.length;p<y;p+=1){var C=o[p],S=this.getClosestPointLength(C);if(S!=null&&c<S)break}return p}},{key:"getEventArgs",value:function(e,t,r){var o=this,c=o.cell,p=c;return t==null||r==null?{e,view:o,edge:c,cell:p}:{e,x:t,y:r,view:o,edge:c,cell:p}}},{key:"notifyUnhandledMouseDown",value:function(e,t,r){this.notify("edge:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}},{key:"notifyMouseDown",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onMouseDown",this).call(this,e,t,r),this.notify("edge:mousedown",this.getEventArgs(e,t,r))}},{key:"notifyMouseMove",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onMouseMove",this).call(this,e,t,r),this.notify("edge:mousemove",this.getEventArgs(e,t,r))}},{key:"notifyMouseUp",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onMouseUp",this).call(this,e,t,r),this.notify("edge:mouseup",this.getEventArgs(e,t,r))}},{key:"onClick",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onClick",this).call(this,e,t,r),this.notify("edge:click",this.getEventArgs(e,t,r))}},{key:"onDblClick",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onDblClick",this).call(this,e,t,r),this.notify("edge:dblclick",this.getEventArgs(e,t,r))}},{key:"onContextMenu",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onContextMenu",this).call(this,e,t,r),this.notify("edge:contextmenu",this.getEventArgs(e,t,r))}},{key:"onMouseDown",value:function(e,t,r){this.notifyMouseDown(e,t,r);var o=e.target.getAttribute("class");switch(o){case"vertex":{this.startVertexDragging(e,t,r);return}case"vertex-remove":case"vertex-remove-area":{this.handleVertexRemoving(e,t,r);return}case"connection":case"connection-wrap":{this.handleVertexAdding(e,t,r);return}case"arrowhead":{this.startArrowheadDragging(e,t,r);return}case"source-marker":case"target-marker":{this.notifyUnhandledMouseDown(e,t,r);return}default:break}this.startEdgeDragging(e,t,r)}},{key:"onMouseMove",value:function(e,t,r){var o=this.getEventData(e);switch(o.action){case"drag-vertex":{this.dragVertex(e,t,r);break}case"drag-label":{this.dragLabel(e,t,r);break}case"drag-arrowhead":{this.dragArrowhead(e,t,r);break}case"drag-edge":{this.dragEdge(e,t,r);break}default:break}return this.notifyMouseMove(e,t,r),o}},{key:"onMouseUp",value:function(e,t,r){var o=this.getEventData(e);switch(o.action){case"drag-vertex":{this.stopVertexDragging(e,t,r);break}case"drag-label":{this.stopLabelDragging(e,t,r);break}case"drag-arrowhead":{this.stopArrowheadDragging(e,t,r);break}case"drag-edge":{this.stopEdgeDragging(e,t,r);break}default:break}return this.notifyMouseUp(e,t,r),this.checkMouseleave(e),o}},{key:"onMouseOver",value:function(e){ni(Object(ui.a)(i.prototype),"onMouseOver",this).call(this,e),this.notify("edge:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){ni(Object(ui.a)(i.prototype),"onMouseOut",this).call(this,e),this.notify("edge:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){ni(Object(ui.a)(i.prototype),"onMouseEnter",this).call(this,e),this.notify("edge:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){ni(Object(ui.a)(i.prototype),"onMouseLeave",this).call(this,e),this.notify("edge:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,t,r,o){ni(Object(ui.a)(i.prototype),"onMouseWheel",this).call(this,e,t,r,o),this.notify("edge:mousewheel",Object.assign({delta:o},this.getEventArgs(e,t,r)))}},{key:"onCustomEvent",value:function(e,t,r,o){var c=O.findParentByClass(e.target,"edge-tool",this.container);if(c){if(e.stopPropagation(),this.can("useEdgeTools")){if(t==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,o)))}this.notifyMouseDown(e,r,o)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,o))),ni(Object(ui.a)(i.prototype),"onCustomEvent",this).call(this,e,t,r,o)}},{key:"onLabelMouseDown",value:function(e,t,r){this.notifyMouseDown(e,t,r),this.startLabelDragging(e,t,r);var o=this.getEventData(e).stopPropagation;o&&e.stopPropagation()}},{key:"startEdgeDragging",value:function(e,t,r){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(e,t,r);return}this.setEventData(e,{x:t,y:r,moving:!1,action:"drag-edge"})}},{key:"dragEdge",value:function(e,t,r){var o=this.getEventData(e);o.moving||(o.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-o.x,r-o.y,{ui:!0}),this.setEventData(e,{x:t,y:r}),this.notify("edge:moving",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}},{key:"stopEdgeDragging",value:function(e,t,r){var o=this.getEventData(e);o.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),o.moving=!1}},{key:"prepareArrowheadDragging",value:function(e,t){var r=this.getTerminalMagnet(e),o={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:t.isNewEdge===!0,terminalType:e,initialMagnet:r,initialTerminal:f.clone(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(o),o}},{key:"createValidateConnectionArgs",value:function(e){var t=[];t[4]=e,t[5]=this;var r,o=0,c=0;e==="source"?(o=2,r="target"):(c=2,r="source");var p=this.cell[r],y=p.cell;if(y){var C,S=t[o]=this.graph.renderer.findViewByCell(y);S&&(C=S.getMagnetFromEdgeTerminal(p),C===S.container&&(C=void 0)),t[o+1]=C}return function(I,W){return t[c]=I,t[c+1]=I.container===W?void 0:W,t}}},{key:"beforeArrowheadDragging",value:function(e){e.zIndex=this.cell.zIndex,this.cell.toFront();var t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}},{key:"afterArrowheadDragging",value:function(e){e.zIndex!=null&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);var t=this.container;t.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}},{key:"arrowheadDragging",value:function(e,t,r,o){if(o.x=t,o.y=r,o.currentTarget!==e)if(o.currentMagnet&&o.currentView&&o.currentView.unhighlight(o.currentMagnet,{type:"magnetAdsorbed"}),o.currentView=this.graph.renderer.findViewByElem(e),o.currentView){var c;o.currentMagnet=o.currentView.findMagnet(e),o.currentMagnet&&(c=this.graph.hook).validateConnection.apply(c,Object(Ca.a)(o.getValidateConnectionArgs(o.currentView,o.currentMagnet)).concat([o.currentView.getEdgeTerminal(o.currentMagnet,t,r,this.cell,o.terminalType)]))?o.currentView.highlight(o.currentMagnet,{type:"magnetAdsorbed"}):o.currentMagnet=null}else o.currentMagnet=null;o.currentTarget=e,this.cell.prop(o.terminalType,{x:t,y:r},Object.assign(Object.assign({},o.options),{ui:!0}))}},{key:"arrowheadDragged",value:function(e,t,r){var o=e.currentView,c=e.currentMagnet;if(!c||!o)return;o.unhighlight(c,{type:"magnetAdsorbed"});var p=e.terminalType,y=o.getEdgeTerminal(c,t,r,this.cell,p);this.cell.setTerminal(p,y,{ui:!0})}},{key:"snapArrowhead",value:function(e,t,r){var o=this,c=this.graph,p=c.options.connecting,y=p.snap,C=p.allowEdge,S=typeof y=="object"&&y.radius||50,I={x:e-S,y:t-S,width:2*S,height:2*S},W=c.renderer.findViewsInArea(I);if(C){var q=c.renderer.findEdgeViewsInArea(I).filter(function(Bn){return Bn!==o});W.push.apply(W,Object(Ca.a)(q))}var ie=r.closestView||null,ve=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;var Le,Oe=Number.MAX_SAFE_INTEGER,it=new Bt(e,t);W.forEach(function(Bn){if(Bn.container.getAttribute("magnet")!=="false"&&(Le=Bn.cell.getBBox().getCenter().distance(it),Le<S&&Le<Oe)){var tr;(ve===Bn.container||(tr=c.hook).validateConnection.apply(tr,Object(Ca.a)(r.getValidateConnectionArgs(Bn,null)).concat([Bn.getEdgeTerminal(Bn.container,e,t,o.cell,r.terminalType)])))&&(Oe=Le,r.closestView=Bn,r.closestMagnet=Bn.container)}Bn.container.querySelectorAll("[magnet]").forEach(function(hr){if(hr.getAttribute("magnet")!=="false"){var Lr=Bn.getBBoxOfElement(hr);if(Le=it.distance(Lr.getCenter()),Le<S&&Le<Oe){var Vr;(ve===hr||(Vr=c.hook).validateConnection.apply(Vr,Object(Ca.a)(r.getValidateConnectionArgs(Bn,hr)).concat([Bn.getEdgeTerminal(hr,e,t,o.cell,r.terminalType)])))&&(Oe=Le,r.closestView=Bn,r.closestMagnet=hr)}}})});var at,Qe=r.terminalType,qt=r.closestView,Kt=r.closestMagnet,Tn=ve!==Kt;if(ie&&Tn&&ie.unhighlight(ve,{type:"magnetAdsorbed"}),qt){if(!Tn)return;qt.highlight(Kt,{type:"magnetAdsorbed"}),at=qt.getEdgeTerminal(Kt,e,t,this.cell,Qe)}else at={x:e,y:t};this.cell.setTerminal(Qe,at,{},Object.assign(Object.assign({},r.options),{ui:!0}))}},{key:"snapArrowheadEnd",value:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(r,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(r)),e.closestView=null,e.closestMagnet=null}},{key:"finishEmbedding",value:function(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}},{key:"fallbackConnection",value:function(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0});break}}},{key:"notifyConnectionEvent",value:function(e,t){var r=e.terminalType,o=e.initialTerminal,c=this.cell[r],p=c&&!gs.equalTerminals(o,c);if(p){var y=this.graph,C=o,S=C.cell?y.getCellById(C.cell):null,I=C.port,W=S?y.findViewByCell(S):null,q=S||e.isNewEdge?null:Bt.create(o).toJSON(),ie=c,ve=ie.cell?y.getCellById(ie.cell):null,Le=ie.port,Oe=ve?y.findViewByCell(ve):null,it=ve?null:Bt.create(c).toJSON();this.notify("edge:connected",{e:t,previousCell:S,previousPort:I,previousView:W,previousPoint:q,currentCell:ve,currentView:Oe,currentPort:Le,currentPoint:it,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:r,isNew:e.isNewEdge})}}},{key:"highlightAvailableMagnets",value:function(e){var t=this,r=this.graph,o=r.model.getCells();e.marked={};for(var c=function(I,W){var q=r.renderer.findViewByCell(o[I]);if(!q)return"continue";var ie=Array.prototype.slice.call(q.container.querySelectorAll("[magnet]"));q.container.getAttribute("magnet")!=="false"&&ie.push(q.container);var ve=ie.filter(function(it){var at;return(at=r.hook).validateConnection.apply(at,Object(Ca.a)(e.getValidateConnectionArgs(q,it)).concat([q.getEdgeTerminal(it,e.x,e.y,t.cell,e.terminalType)]))});if(ve.length>0){for(var Le=0,Oe=ve.length;Le<Oe;Le+=1)q.highlight(ve[Le],{type:"magnetAvailable"});q.highlight(null,{type:"nodeAvailable"}),e.marked[q.cell.id]=ve}},p=0,y=o.length;p<y;p+=1){var C=c(p,y);if(C==="continue")continue}}},{key:"unhighlightAvailableMagnets",value:function(e){var t=this,r=e.marked||{};Object.keys(r).forEach(function(o){var c=t.graph.renderer.findViewByCell(o);if(c){var p=r[o];p.forEach(function(y){c.unhighlight(y,{type:"magnetAvailable"})}),c.unhighlight(null,{type:"nodeAvailable"})}}),e.marked=null}},{key:"startArrowheadDragging",value:function(e,t,r){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(e,t,r);return}var o=e.target,c=o.getAttribute("data-terminal"),p=this.prepareArrowheadDragging(c,{x:t,y:r});this.setEventData(e,p)}},{key:"dragArrowhead",value:function(e,t,r){var o=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,r,o):this.arrowheadDragging(this.getEventTarget(e),t,r,o)}},{key:"stopArrowheadDragging",value:function(e,t,r){var o=this.graph,c=this.getEventData(e);o.options.connecting.snap?this.snapArrowheadEnd(c):this.arrowheadDragged(c,t,r);var p=o.hook.validateEdge(this.cell,c.terminalType,c.initialTerminal);p?(this.finishEmbedding(c),this.notifyConnectionEvent(c,e)):this.fallbackConnection(c),this.afterArrowheadDragging(c)}},{key:"startLabelDragging",value:function(e,t,r){if(this.can("edgeLabelMovable")){var o=e.currentTarget,c=parseInt(o.getAttribute("data-index"),10),p=this.getLabelPositionAngle(c),y=this.getLabelPositionArgs(c),C=this.getDefaultLabelPositionArgs(),S=this.mergeLabelPositionArgs(y,C);this.setEventData(e,{index:c,positionAngle:p,positionArgs:S,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}},{key:"dragLabel",value:function(e,t,r){var o=this.getEventData(e),c=this.cell.getLabelAt(o.index),p=f.merge({},c,{position:this.getLabelPosition(t,r,o.positionAngle,o.positionArgs)});this.cell.setLabelAt(o.index,p)}},{key:"stopLabelDragging",value:function(e,t,r){}},{key:"handleVertexAdding",value:function(e,t,r){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(e,t,r);return}var o=this.addVertex({x:t,y:r},{ui:!0});this.setEventData(e,{index:o,action:"drag-vertex"})}},{key:"handleVertexRemoving",value:function(e,t,r){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(e,t,r);return}var o=e.target,c=parseInt(o.getAttribute("idx"),10);this.cell.removeVertexAt(c)}},{key:"startVertexDragging",value:function(e,t,r){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(e,t,r);return}var o=e.target,c=parseInt(o.getAttribute("idx"),10);this.setEventData(e,{index:c,action:"drag-vertex"})}},{key:"dragVertex",value:function(e,t,r){var o=this.getEventData(e);this.cell.setVertexAt(o.index,{x:t,y:r},{ui:!0})}},{key:"stopVertexDragging",value:function(e,t,r){}}]),i}(Ss);(function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.getConnection=="function"}a.isEdgeView=s})(Zh||(Zh={})),Zh.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),Zh.registry.register("edge",Zh,!0);var Gc=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.scalableNode=null,n.rotatableNode=null,n.scalableSelector="scalable",n.rotatableSelector="rotatable",n.defaultPortMarkup=Xi.getPortMarkup(),n.defaultPortLabelMarkup=Xi.getPortLabelMarkup(),n.defaultPortContainerMarkup=Xi.getPortContainerMarkup(),n.portsCache={},n}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"getContainerClassName",value:function(){var e=[ni(Object(ui.a)(i.prototype),"getContainerClassName",this).call(this),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}},{key:"updateClassName",value:function(e){var t=e.target;if(t.hasAttribute("magnet")){var r=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?O.removeClass(t,r):O.addClass(t,r)}else{var o=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(o):this.addClass(o)}}},{key:"isNodeView",value:function(){return!0}},{key:"confirmUpdate",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e;return this.hasAction(o,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","resize","translate","rotate","ports","tools"])):(o=this.handleAction(o,"resize",function(){return t.resize(r)},"update"),o=this.handleAction(o,"update",function(){return t.update()},Nl.useCSSSelector?"ports":null),o=this.handleAction(o,"translate",function(){return t.translate()}),o=this.handleAction(o,"rotate",function(){return t.rotate()}),o=this.handleAction(o,"ports",function(){return t.renderPorts()}),o=this.handleAction(o,"tools",function(){return t.renderTools()})),o}},{key:"update",value:function(e){this.cleanCache(),Nl.useCSSSelector&&this.removePorts();var t=this.cell,r=t.getSize(),o=t.getAttrs();this.updateAttrs(this.container,o,{attrs:e===o?null:e,rootBBox:new qr(0,0,r.width,r.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),Nl.useCSSSelector&&this.renderPorts()}},{key:"renderMarkup",value:function(){var e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}},{key:"renderJSONMarkup",value:function(e){var t=this.parseJSONMarkup(e,this.container),r=function(c){return Array.isArray(c)?c[0]:c};this.selectors=t.selectors,this.rotatableNode=r(this.selectors[this.rotatableSelector]),this.scalableNode=r(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}},{key:"renderStringMarkup",value:function(e){O.append(this.container,pi.toNodes(pi.createVectors(e))),this.rotatableNode=O.findOne(this.container,".".concat(this.rotatableSelector)),this.scalableNode=O.findOne(this.container,".".concat(this.scalableSelector)),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),Nl.useCSSSelector||this.renderPorts(),this.renderTools(),this}},{key:"resize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}},{key:"translate",value:function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}},{key:"rotate",value:function(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}},{key:"getTranslationString",value:function(){var e=this.cell.getPosition();return"translate(".concat(e.x,",").concat(e.y,")")}},{key:"getRotationString",value:function(){var e=this.cell.getAngle();if(e){var t=this.cell.getSize();return"rotate(".concat(e,",").concat(t.width/2,",").concat(t.height/2,")")}}},{key:"updateTransform",value:function(){var e=this.getTranslationString(),t=this.getRotationString();t&&(e+=" ".concat(t)),this.container.setAttribute("transform",e)}},{key:"updateRotation",value:function(){if(this.rotatableNode!=null){var e=this.getRotationString();e!=null?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}},{key:"updateTranslation",value:function(){this.container.setAttribute("transform",this.getTranslationString())}},{key:"updateSize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell,r=t.getSize(),o=t.getAngle(),c=this.scalableNode,p=!1;c.getElementsByTagName("path").length>0&&(p=!0);var y=O.getBBox(c,{recursive:p}),C=r.width/(y.width||1),S=r.height/(y.height||1);c.setAttribute("transform","scale(".concat(C,",").concat(S,")"));var I=this.rotatableNode;if(I!=null){var W=I.getAttribute("transform");if(W){I.setAttribute("transform","".concat(W," rotate(").concat(-o,",").concat(r.width/2,",").concat(r.height/2,")"));var q=O.getBBox(c,{target:this.graph.view.stage});t.prop("position",{x:q.x,y:q.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}},{key:"findPortElem",value:function(e,t){var r=e?this.portsCache[e]:null;if(!r)return null;var o=r.portContentElement,c=r.portContentSelectors||{};return this.findOne(t,o,c)}},{key:"initializePorts",value:function(){this.cleanPortsCache()}},{key:"refreshPorts",value:function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}},{key:"cleanPortsCache",value:function(){this.portsCache={}}},{key:"removePorts",value:function(){var e=this;Object.keys(this.portsCache).forEach(function(t){var r=e.portsCache[t];O.remove(r.portElement)})}},{key:"renderPorts",value:function(){var e=this,t=this.getPortsContainer(),r=[];t.childNodes.forEach(function(p){r.push(p)});var o=g.groupBy(this.cell.getParsedPorts(),"zIndex"),c="auto";o[c]&&o[c].forEach(function(p){var y=e.getPortElement(p);t.append(y),r.push(y)}),Object.keys(o).forEach(function(p){if(p!==c){var y=parseInt(p,10);e.appendPorts(o[p],y,r)}}),this.updatePorts()}},{key:"getPortsContainer",value:function(){return this.rotatableNode||this.container}},{key:"appendPorts",value:function(e,t,r){var o=this,c=e.map(function(p){return o.getPortElement(p)});r[t]||t<0?O.before(r[Math.max(t,0)],c):O.append(this.getPortsContainer(),c)}},{key:"getPortElement",value:function(e){var t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}},{key:"createPortElement",value:function(e){var t=Xi.renderMarkup(this.getPortContainerMarkup()),r=t.elem;if(r==null)throw new Error("Invalid port container markup.");t=Xi.renderMarkup(this.getPortMarkup(e));var o=t.elem,c=t.selectors;if(o==null)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},o),t=Xi.renderMarkup(this.getPortLabelMarkup(e.label));var p=t.elem,y=t.selectors;if(p==null)throw new Error("Invalid port label markup.");var C;if(c&&y){for(var S in y)if(c[S]&&S!==this.rootSelector)throw new Error("Selectors within port must be unique.");C=Object.assign(Object.assign({},c),y)}else C=c||y;var I="x6-port";return e.group&&(I+=" x6-port-".concat(e.group)),O.addClass(r,I),O.addClass(o,"x6-port-body"),O.addClass(p,"x6-port-label"),r.appendChild(o),r.appendChild(p),this.portsCache[e.id]={portElement:r,portSelectors:C,portLabelElement:p,portLabelSelectors:y,portContentElement:o,portContentSelectors:c},this.graph.hook.onPortRendered({port:e,node:this.cell,container:r,selectors:C,labelContainer:p,labelSelectors:y,contentContainer:o,contentSelectors:c}),r}},{key:"updatePorts",value:function(){var e=this;this.updatePortGroup();var t=this.cell.getParsedGroups();Object.keys(t).forEach(function(r){return e.updatePortGroup(r)})}},{key:"updatePortGroup",value:function(e){for(var t=qr.fromSize(this.cell.getSize()),r=this.cell.getPortsLayoutByGroup(e,t),o=0,c=r.length;o<c;o+=1){var p=r[o],y=p.portId,C=this.portsCache[y]||{},S=p.portLayout;if(this.applyPortTransform(C.portElement,S),p.portAttrs!=null){var I={selectors:C.portSelectors||{}};p.portSize&&(I.rootBBox=qr.fromSize(p.portSize)),this.updateAttrs(C.portElement,p.portAttrs,I)}var W=p.labelLayout;if(W&&(this.applyPortTransform(C.portLabelElement,W,-(S.angle||0)),W.attrs)){var q={selectors:C.portLabelSelectors||{}};p.labelSize&&(q.rootBBox=qr.fromSize(p.labelSize)),this.updateAttrs(C.portLabelElement,W.attrs,q)}}}},{key:"applyPortTransform",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=t.angle,c=t.position,p=O.createSVGMatrix().rotate(r).translate(c.x||0,c.y||0).rotate(o||0);O.transform(e,p,{absolute:!0})}},{key:"getPortContainerMarkup",value:function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}},{key:"getPortMarkup",value:function(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}},{key:"getPortLabelMarkup",value:function(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}},{key:"getEventArgs",value:function(e,t,r){var o=this,c=o.cell,p=c;return t==null||r==null?{e,view:o,node:c,cell:p}:{e,x:t,y:r,view:o,node:c,cell:p}}},{key:"notifyMouseDown",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onMouseDown",this).call(this,e,t,r),this.notify("node:mousedown",this.getEventArgs(e,t,r))}},{key:"notifyMouseMove",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onMouseMove",this).call(this,e,t,r),this.notify("node:mousemove",this.getEventArgs(e,t,r))}},{key:"notifyMouseUp",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onMouseUp",this).call(this,e,t,r),this.notify("node:mouseup",this.getEventArgs(e,t,r))}},{key:"onClick",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onClick",this).call(this,e,t,r),this.notify("node:click",this.getEventArgs(e,t,r))}},{key:"onDblClick",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onDblClick",this).call(this,e,t,r),this.notify("node:dblclick",this.getEventArgs(e,t,r))}},{key:"onContextMenu",value:function(e,t,r){ni(Object(ui.a)(i.prototype),"onContextMenu",this).call(this,e,t,r),this.notify("node:contextmenu",this.getEventArgs(e,t,r))}},{key:"onMouseDown",value:function(e,t,r){if(this.isPropagationStopped(e))return;this.notifyMouseDown(e,t,r),this.startNodeDragging(e,t,r)}},{key:"onMouseMove",value:function(e,t,r){var o=this.getEventData(e),c=o.action;if(c==="magnet")this.dragMagnet(e,t,r);else{if(c==="move"){var p=o,y=p.targetView||this;y.dragNode(e,t,r),y.notify("node:moving",{e,x:t,y:r,view:y,cell:y.cell,node:y.cell})}this.notifyMouseMove(e,t,r)}this.setEventData(e,o)}},{key:"onMouseUp",value:function(e,t,r){var o=this.getEventData(e),c=o.action;if(c==="magnet")this.stopMagnetDragging(e,t,r);else if(this.notifyMouseUp(e,t,r),c==="move"){var p=o,y=p.targetView||this;y.stopNodeDragging(e,t,r)}var C=o.targetMagnet;C&&this.onMagnetClick(e,C,t,r),this.checkMouseleave(e)}},{key:"onMouseOver",value:function(e){ni(Object(ui.a)(i.prototype),"onMouseOver",this).call(this,e),this.notify("node:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){ni(Object(ui.a)(i.prototype),"onMouseOut",this).call(this,e),this.notify("node:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){this.updateClassName(e),ni(Object(ui.a)(i.prototype),"onMouseEnter",this).call(this,e),this.notify("node:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){ni(Object(ui.a)(i.prototype),"onMouseLeave",this).call(this,e),this.notify("node:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,t,r,o){ni(Object(ui.a)(i.prototype),"onMouseWheel",this).call(this,e,t,r,o),this.notify("node:mousewheel",Object.assign({delta:o},this.getEventArgs(e,t,r)))}},{key:"onMagnetClick",value:function(e,t,r,o){var c=this.graph.view.getMouseMovedCount(e);if(c>this.graph.options.clickThreshold)return;this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,r,o)))}},{key:"onMagnetDblClick",value:function(e,t,r,o){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,r,o)))}},{key:"onMagnetContextMenu",value:function(e,t,r,o){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,r,o)))}},{key:"onMagnetMouseDown",value:function(e,t,r,o){this.startMagnetDragging(e,r,o)}},{key:"onCustomEvent",value:function(e,t,r,o){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,r,o))),ni(Object(ui.a)(i.prototype),"onCustomEvent",this).call(this,e,t,r,o)}},{key:"prepareEmbedding",value:function(e){var t=this.getEventData(e),r=t.cell||this.cell,o=this.graph.findViewByCell(r),c=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:r,view:o,cell:r,x:c.x,y:c.y,currentParent:r.getParent()})}},{key:"processEmbedding",value:function(e,t){var r=this,o=t.cell||this.cell,c=t.graph||this.graph,p=c.options.embedding,y=p.findParent,C=typeof y=="function"?w.call(y,c,{view:this,node:this.cell}).filter(function(at){return no.isCell(at)&&r.cell.id!==at.id&&!at.isDescendantOf(r.cell)}):c.model.getNodesUnderNode(o,{by:y});if(p.frontOnly&&C.length>0){var S=g.groupBy(C,"zIndex"),I=g.max(Object.keys(S));I&&(C=S[I])}C=C.filter(function(at){return at.visible});for(var W=null,q=t.candidateEmbedView,ie=p.validate,ve=C.length-1;ve>=0;ve-=1){var Le=C[ve];if(q&&q.cell.id===Le.id){W=q;break}else{var Oe=Le.findView(c);if(w.call(ie,c,{child:this.cell,parent:Oe.cell,childView:this,parentView:Oe})){W=Oe;break}}}this.clearEmbedding(t),W&&W.highlight(null,{type:"embedding"}),t.candidateEmbedView=W;var it=c.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:o,node:o,view:c.findViewByCell(o),x:it.x,y:it.y,currentParent:o.getParent(),candidateParent:W?W.cell:null})}},{key:"clearEmbedding",value:function(e){var t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}},{key:"finalizeEmbedding",value:function(e,t){var r=t.cell||this.cell,o=t.graph||this.graph,c=o.findViewByCell(r),p=r.getParent(),y=t.candidateEmbedView;if(y?(y.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(p==null||p.id!==y.cell.id)&&y.cell.insertChild(r,void 0,{ui:!0})):p&&p.unembed(r,{ui:!0}),o.model.getConnectedEdges(r,{deep:!0}).forEach(function(S){S.updateParent({ui:!0})}),c&&y){var C=o.snapToGrid(e.clientX,e.clientY);c.notify("node:embedded",{e,cell:r,x:C.x,y:C.y,node:r,view:o.findViewByCell(r),previousParent:p,currentParent:r.getParent()})}}},{key:"getDelegatedView",value:function(){for(var e=this.cell,t=this;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}},{key:"startMagnetDragging",value:function(e,t,r){if(!this.can("magnetConnectable"))return;e.stopPropagation();var o=e.currentTarget,c=this.graph;this.setEventData(e,{targetMagnet:o}),c.hook.validateMagnet(this,o,e)?(c.options.magnetThreshold<=0&&this.startConnectting(e,o,t,r),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):((O.hasClass(o,"x6-port-body")||k()(o).closest(".x6-port-body").length>0)&&this.stopPropagation(e),this.onMouseDown(e,t,r)),c.view.delegateDragEvents(e,this)}},{key:"startConnectting",value:function(e,t,r,o){this.graph.model.startBatch("add-edge");var c=this.createEdgeFromMagnet(t,r,o);c.notifyMouseDown(e,r,o),c.setEventData(e,c.prepareArrowheadDragging("target",{x:r,y:o,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:c})}},{key:"createEdgeFromMagnet",value:function(e,t,r){var o=this.graph,c=o.model,p=o.hook.getDefaultEdge(this,e);return p.setSource(Object.assign(Object.assign({},p.getSource()),this.getEdgeTerminal(e,t,r,p,"source"))),p.setTarget(Object.assign(Object.assign({},p.getTarget()),{x:t,y:r})),p.addTo(c,{async:!1,ui:!0}),p.findView(o)}},{key:"dragMagnet",value:function(e,t,r){var o=this.getEventData(e),c=o.edgeView;if(c)c.onMouseMove(e,t,r),this.autoScrollGraph(e.clientX,e.clientY);else{var p=this.graph,y=p.options.magnetThreshold,C=this.getEventTarget(e),S=o.targetMagnet;if(y==="onleave"){if(S===C||S.contains(C))return}else if(p.view.getMouseMovedCount(e)<=y)return;this.startConnectting(e,S,t,r)}}},{key:"stopMagnetDragging",value:function(e,t,r){var o=this.eventData(e),c=o.edgeView;c&&(c.onMouseUp(e,t,r),this.graph.model.stopBatch("add-edge"))}},{key:"notifyUnhandledMouseDown",value:function(e,t,r){this.notify("node:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,node:this.cell})}},{key:"notifyNodeMove",value:function(e,t,r,o,c){var p=this,y=[c],C=this.graph.selection.widget;if(C&&C.options.movable){var S=this.graph.getSelectedCells();S.includes(c)&&(y=S.filter(function(I){return I.isNode()}))}y.forEach(function(I){p.notify(e,{e:t,x:r,y:o,cell:I,node:I,view:I.findView(p.graph)})})}},{key:"startNodeDragging",value:function(e,t,r){var o=this.getDelegatedView();if(o==null||!o.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,r);this.setEventData(e,{targetView:o,action:"move"});var c=Bt.create(o.cell.getPosition());o.setEventData(e,{moving:!1,offset:c.diff(t,r),restrict:this.graph.hook.getRestrictArea(o)})}},{key:"dragNode",value:function(e,t,r){var o=this.cell,c=this.graph,p=c.getGridSize(),y=this.getEventData(e),C=y.offset,S=y.restrict;y.moving||(y.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,r,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);var I=zs.snapToGrid(t+C.x,p),W=zs.snapToGrid(r+C.y,p);o.setPosition(I,W,{restrict:S,deep:!0,ui:!0}),c.options.embedding.enabled&&(y.embedding||(this.prepareEmbedding(e),y.embedding=!0),this.processEmbedding(e,y))}},{key:"stopNodeDragging",value:function(e,t,r){var o=this.getEventData(e);o.embedding&&this.finalizeEmbedding(e,o),o.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,r,this.cell)),o.moving=!1,o.embedding=!1}},{key:"autoScrollGraph",value:function(e,t){var r=this.graph.scroller.widget;r&&r.autoScroll(e,t)}}]),i}(Ss);(function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.findPortElem=="function"&&typeof e.resize=="function"&&typeof e.rotate=="function"&&typeof e.translate=="function"}a.isNodeView=s})(Gc||(Gc={})),Gc.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Gc.registry.register("node",Gc,!0);var V0=wg("text"),z0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return i}(xf("text",{view:V0,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}));(function(a){var s=function(i){Object(Zr.a)(e,i);var n=Object(Wr.a)(e);function e(){return Object(_r.a)(this,e),n.apply(this,arguments)}return Object(Br.a)(e,[{key:"confirmUpdate",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=ni(Object(ui.a)(e.prototype),"confirmUpdate",this).call(this,r,o);return this.hasAction(c,"scale")&&(this.resize(),c=this.removeAction(c,"scale")),c}}]),e}(Gc);a.View=s,s.config({actions:{attrs:["scale"]}}),Gc.registry.register(V0,s)})(z0||(z0={}));var G0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(_r.a)(this,i),e=s.call(this),e.length=0,e.comparator=t.comparator||"zIndex",e.clean(),n&&e.reset(n,{silent:!0}),e}return Object(Br.a)(i,[{key:"toJSON",value:function(){return this.cells.map(function(e){return e.toJSON()})}},{key:"add",value:function(e,t,r){var o=this,c,p;typeof t=="number"?(c=t,p=Object.assign({merge:!1},r)):(c=this.length,p=Object.assign({merge:!1},t)),c>this.length&&(c=this.length),c<0&&(c+=this.length+1);var y=Array.isArray(e)?e:[e],C=this.comparator&&typeof t!="number"&&p.sort!==!1,S=this.comparator||null,I=!1,W=[],q=[];if(y.forEach(function(ve){var Le=o.get(ve);Le?p.merge&&!ve.isSameStore(Le)&&(Le.setProp(ve.getProp(),r),q.push(Le),C&&!I&&(S==null||typeof S=="function"?I=Le.hasChanged():typeof S=="string"?I=Le.hasChanged(S):I=S.some(function(Oe){return Le.hasChanged(Oe)}))):(W.push(ve),o.reference(ve))}),W.length){var ie;C&&(I=!0),(ie=this.cells).splice.apply(ie,[c,0].concat(W)),this.length=this.cells.length}return I&&this.sort({silent:!0}),p.silent||(W.forEach(function(ve,Le){var Oe={cell:ve,index:c+Le,options:p};o.trigger("added",Oe),p.dryrun||ve.notify("added",Object.assign({},Oe))}),I&&this.trigger("sorted"),(W.length||q.length)&&this.trigger("updated",{added:W,merged:q,removed:[],options:p})),this}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Array.isArray(e)?e:[e],o=this.removeCells(r,t);return!t.silent&&o.length>0&&this.trigger("updated",{options:t,removed:o,added:[],merged:[]}),Array.isArray(e)?o:o[0]}},{key:"removeCells",value:function(e,t){for(var r=[],o=0;o<e.length;o+=1){var c=this.get(e[o]);if(c==null)continue;var p=this.cells.indexOf(c);this.cells.splice(p,1),this.length-=1,delete this.map[c.id],r.push(c),this.unreference(c),t.dryrun||c.remove(),t.silent||(this.trigger("removed",{cell:c,index:p,options:t}),t.dryrun||c.notify("removed",{cell:c,index:p,options:t}))}return r}},{key:"reset",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.cells.slice();if(o.forEach(function(C){return t.unreference(C)}),this.clean(),this.add(e,Object.assign({silent:!0},r)),!r.silent){var c=this.cells.slice();this.trigger("reseted",{options:r,previous:o,current:c});var p=[],y=[];c.forEach(function(C){var S=o.some(function(I){return I.id===C.id});S||p.push(C)}),o.forEach(function(C){var S=c.some(function(I){return I.id===C.id});S||y.push(C)}),this.trigger("updated",{options:r,added:p,removed:y,merged:[]})}return this}},{key:"push",value:function(e,t){return this.add(e,this.length,t)}},{key:"pop",value:function(e){var t=this.at(this.length-1);return this.remove(t,e)}},{key:"unshift",value:function(e,t){return this.add(e,0,t)}},{key:"shift",value:function(e){var t=this.at(0);return this.remove(t,e)}},{key:"get",value:function(e){if(e==null)return null;var t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}},{key:"has",value:function(e){return this.get(e)!=null}},{key:"at",value:function(e){return e<0&&(e+=this.length),this.cells[e]||null}},{key:"first",value:function(){return this.at(0)}},{key:"last",value:function(){return this.at(-1)}},{key:"indexOf",value:function(e){return this.cells.indexOf(e)}},{key:"toArray",value:function(){return this.cells.slice()}},{key:"sort",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.comparator!=null&&(this.cells=g.sortBy(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}},{key:"clone",value:function(){var e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}},{key:"reference",value:function(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}},{key:"unreference",value:function(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}},{key:"notifyCellEvent",value:function(e,t){var r=t.cell;this.trigger("cell:".concat(e),t),r&&(r.isNode()?this.trigger("node:".concat(e),Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.trigger("edge:".concat(e),Object.assign(Object.assign({},t),{edge:r})))}},{key:"clean",value:function(){this.length=0,this.cells=[],this.map={}}}]),i}(fl),Xc=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Object(_r.a)(this,i),n=s.call(this),n.batches={},n.addings=new WeakMap,n.nodes={},n.edges={},n.outgoings={},n.incomings={},n.collection=new G0(e),n.setup(),n}return Object(Br.a)(i,[{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"notify",value:function(e,t){this.trigger(e,t);var r=this.graph;return r&&(e==="sorted"||e==="reseted"||e==="updated"?r.trigger("model:".concat(e),t):r.trigger(e,t)),this}},{key:"setup",value:function(){var e=this,t=this.collection;t.on("sorted",function(){return e.notify("sorted",null)}),t.on("updated",function(r){return e.notify("updated",r)}),t.on("cell:change:zIndex",function(){return e.sortOnChangeZ()}),t.on("added",function(r){var o=r.cell;e.onCellAdded(o)}),t.on("removed",function(r){var o=r.cell;e.onCellRemoved(o,r.options),e.notify("cell:removed",r),o.isNode()?e.notify("node:removed",Object.assign(Object.assign({},r),{node:o})):o.isEdge()&&e.notify("edge:removed",Object.assign(Object.assign({},r),{edge:o}))}),t.on("reseted",function(r){e.onReset(r.current),e.notify("reseted",r)}),t.on("edge:change:source",function(r){var o=r.edge;return e.onEdgeTerminalChanged(o,"source")}),t.on("edge:change:target",function(r){var o=r.edge;e.onEdgeTerminalChanged(o,"target")})}},{key:"sortOnChangeZ",value:function(){this.collection.sort()}},{key:"onCellAdded",value:function(e){var t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}},{key:"onCellRemoved",value:function(e,t){var r=e.id;if(e.isEdge()){delete this.edges[r];var o=e.getSource(),c=e.getTarget();if(o&&o.cell){var p=this.outgoings[o.cell],y=p?p.indexOf(r):-1;y>=0&&(p.splice(y,1),p.length===0&&delete this.outgoings[o.cell])}if(c&&c.cell){var C=this.incomings[c.cell],S=C?C.indexOf(r):-1;S>=0&&(C.splice(S,1),C.length===0&&delete this.incomings[c.cell])}}else delete this.nodes[r];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}},{key:"onReset",value:function(e){var t=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(function(r){return t.onCellAdded(r)})}},{key:"onEdgeTerminalChanged",value:function(e,t){var r=t==="source"?this.outgoings:this.incomings,o=e.previous(t);if(o&&o.cell){var c=r[o.cell],p=c?c.indexOf(e.id):-1;p>=0&&(c.splice(p,1),c.length===0&&delete r[o.cell])}var y=e.getTerminal(t);if(y&&y.cell){var C=r[y.cell]||[],S=C.indexOf(e.id);S===-1&&C.push(e.id),r[y.cell]=C}}},{key:"prepareCell",value:function(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),e.zIndex==null&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}},{key:"resetCells",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.map(function(o){return t.prepareCell(o,Object.assign(Object.assign({},r),{dryrun:!0}))}),this.collection.reset(e,r),e.map(function(o){return t.prepareCell(o,{options:r})}),this}},{key:"clear",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getCells();if(t.length===0)return this;var r=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",function(){for(var o=t.sort(function(p,y){var C=p.isEdge()?1:2,S=y.isEdge()?1:2;return C-S});o.length>0;){var c=o.shift();c&&c.remove(r)}},r),this}},{key:"addNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Ds.isNode(e)?e:this.createNode(e);return this.addCell(r,t),r}},{key:"createNode",value:function(e){return Ds.create(e)}},{key:"addEdge",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=gs.isEdge(e)?e:this.createEdge(e);return this.addCell(r,t),r}},{key:"createEdge",value:function(e){return gs.create(e)}},{key:"addCell",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)?this.addCells(e,r):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,r),r),e.eachChild(function(o){return t.addCell(o,r)}),this.addings.delete(e)),this)}},{key:"addCells",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.length;if(o===0)return this;var c=Object.assign(Object.assign({},r),{position:o-1,maxPosition:o-1});return this.startBatch("add",Object.assign(Object.assign({},c),{cells:e})),e.forEach(function(p){t.addCell(p,c),c.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},c),{cells:e})),this}},{key:"removeCell",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=typeof e=="string"?this.getCell(e):e;return r&&this.has(r)?this.collection.remove(r,t):null}},{key:"updateCellId",value:function(e,t){this.startBatch("update",{id:t}),e.prop("id",t);var r=e.clone({keepId:!0});this.addCell(r);var o=this.getConnectedEdges(e);return o.forEach(function(c){var p=c.getSourceCell(),y=c.getTargetCell();p===e&&c.setSource(Object.assign(Object.assign({},c.getSource()),{cell:t})),y===e&&c.setTarget(Object.assign(Object.assign({},c.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),r}},{key:"removeCells",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.length?this.batchUpdate("remove",function(){return e.map(function(o){return t.removeCell(o,r)})}):[]}},{key:"removeConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getConnectedEdges(e);return r.forEach(function(o){o.remove(t)}),r}},{key:"disconnectConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=typeof e=="string"?e:e.id;this.getConnectedEdges(e).forEach(function(o){var c=o.getSourceCell(),p=o.getTargetCell();c&&c.id===r&&o.setSource({x:0,y:0},t),p&&p.id===r&&o.setTarget({x:0,y:0},t)})}},{key:"has",value:function(e){return this.collection.has(e)}},{key:"total",value:function(){return this.collection.length}},{key:"indexOf",value:function(e){return this.collection.indexOf(e)}},{key:"getCell",value:function(e){return this.collection.get(e)}},{key:"getCells",value:function(){return this.collection.toArray()}},{key:"getFirstCell",value:function(){return this.collection.first()}},{key:"getLastCell",value:function(){return this.collection.last()}},{key:"getMinZIndex",value:function(){var e=this.collection.first();return e&&e.getZIndex()||0}},{key:"getMaxZIndex",value:function(){var e=this.collection.last();return e&&e.getZIndex()||0}},{key:"getCellsFromCache",value:function(e){var t=this;return e?Object.keys(e).map(function(r){return t.getCell(r)}).filter(function(r){return r!=null}):[]}},{key:"getNodes",value:function(){return this.getCellsFromCache(this.nodes)}},{key:"getEdges",value:function(){return this.getCellsFromCache(this.edges)}},{key:"getOutgoingEdges",value:function(e){var t=this,r=typeof e=="string"?e:e.id,o=this.outgoings[r];return o?o.map(function(c){return t.getCell(c)}).filter(function(c){return c&&c.isEdge()}):null}},{key:"getIncomingEdges",value:function(e){var t=this,r=typeof e=="string"?e:e.id,o=this.incomings[r];return o?o.map(function(c){return t.getCell(c)}).filter(function(c){return c&&c.isEdge()}):null}},{key:"getConnectedEdges",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],c=typeof e=="string"?this.getCell(e):e;if(c==null)return o;var p={},y=r.indirect,C=r.incoming,S=r.outgoing;C==null&&S==null&&(C=S=!0);var I=function ve(Le,Oe){var it=Oe?t.getOutgoingEdges(Le):t.getIncomingEdges(Le);if(it!=null&&it.forEach(function(Qe){if(p[Qe.id])return;o.push(Qe),p[Qe.id]=!0,y&&(C&&ve(Qe,!1),S&&ve(Qe,!0))}),y&&Le.isEdge()){var at=Oe?Le.getTargetCell():Le.getSourceCell();at&&at.isEdge()&&(p[at.id]||(o.push(at),ve(at,Oe)))}};if(S&&I(c,!0),C&&I(c,!1),r.deep){var W=c.getDescendants({deep:!0}),q={};W.forEach(function(ve){ve.isNode()&&(q[ve.id]=!0)});var ie=function(Le,Oe){var it=Oe?t.getOutgoingEdges(Le.id):t.getIncomingEdges(Le.id);it!=null&&it.forEach(function(at){if(!p[at.id]){var Qe=at.getSourceCell(),qt=at.getTargetCell();if(!r.enclosed&&Qe&&q[Qe.id]&&qt&&q[qt.id])return;o.push(at),p[at.id]=!0}})};W.forEach(function(ve){if(ve.isEdge())return;S&&ie(ve,!0),C&&ie(ve,!1)})}return o}},{key:"isBoundary",value:function(e,t){var r=typeof e=="string"?this.getCell(e):e,o=t?this.getIncomingEdges(r):this.getOutgoingEdges(r);return o==null||o.length===0}},{key:"getBoundaryNodes",value:function(e){var t=this,r=[];return Object.keys(this.nodes).forEach(function(o){if(t.isBoundary(o,e)){var c=t.getCell(o);c&&r.push(c)}}),r}},{key:"getRoots",value:function(){return this.getBoundaryNodes(!0)}},{key:"getLeafs",value:function(){return this.getBoundaryNodes(!1)}},{key:"isRoot",value:function(e){return this.isBoundary(e,!0)}},{key:"isLeaf",value:function(e){return this.isBoundary(e,!1)}},{key:"getNeighbors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.incoming,o=t.outgoing;r==null&&o==null&&(r=o=!0);var c=this.getConnectedEdges(e,t),p=c.reduce(function(S,I){var W=I.hasLoop(t),q=I.getSourceCell(),ie=I.getTargetCell();return r&&q&&q.isNode()&&!S[q.id]&&((W||q!==e&&(!t.deep||!q.isDescendantOf(e)))&&(S[q.id]=q)),o&&ie&&ie.isNode()&&!S[ie.id]&&((W||ie!==e&&(!t.deep||!ie.isDescendantOf(e)))&&(S[ie.id]=ie)),S},{});if(e.isEdge()){if(r){var y=e.getSourceCell();y&&y.isNode()&&!p[y.id]&&(p[y.id]=y)}if(o){var C=e.getTargetCell();C&&C.isNode()&&!p[C.id]&&(p[C.id]=C)}}return Object.keys(p).map(function(S){return p[S]})}},{key:"isNeighbor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.incoming,c=r.outgoing;return o==null&&c==null&&(o=c=!0),this.getConnectedEdges(e,r).some(function(p){var y=p.getSourceCell(),C=p.getTargetCell();return o&&y&&y.id===t.id?!0:!!(c&&C&&C.id===t.id)})}},{key:"getSuccessors",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return this.search(e,function(c,p){c!==e&&t.matchDistance(p,r.distance)&&o.push(c)},Object.assign(Object.assign({},r),{outgoing:!0})),o}},{key:"isSuccessor",value:function(e,t){var r=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=!1;return this.search(e,function(p,y){if(p===t&&p!==e&&r.matchDistance(y,o.distance))return c=!0,!1},Object.assign(Object.assign({},o),{outgoing:!0})),c}},{key:"getPredecessors",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[];return this.search(e,function(c,p){c!==e&&t.matchDistance(p,r.distance)&&o.push(c)},Object.assign(Object.assign({},r),{incoming:!0})),o}},{key:"isPredecessor",value:function(e,t){var r=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=!1;return this.search(e,function(p,y){if(p===t&&p!==e&&r.matchDistance(y,o.distance))return c=!0,!1},Object.assign(Object.assign({},o),{incoming:!0})),c}},{key:"matchDistance",value:function(e,t){return t==null?!0:typeof t=="function"?t(e):Array.isArray(t)&&t.includes(e)?!0:e===t}},{key:"getCommonAncestor",value:function(){for(var e=[],t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.forEach(function(c){c&&(Array.isArray(c)?e.push.apply(e,Object(Ca.a)(c)):e.push(c))}),no.getCommonAncestor.apply(no,e)}},{key:"getSubGraph",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],c={},p=[],y=[],C=function(I){c[I.id]||(o.push(I),c[I.id]=I,I.isEdge()&&y.push(I),I.isNode()&&p.push(I))};return e.forEach(function(S){if(C(S),r.deep){var I=S.getDescendants({deep:!0});I.forEach(function(W){return C(W)})}}),y.forEach(function(S){var I=S.getSourceCell(),W=S.getTargetCell();I&&!c[I.id]&&(o.push(I),c[I.id]=I,I.isNode()&&p.push(I)),W&&!c[W.id]&&(o.push(W),c[W.id]=W,W.isNode()&&p.push(W))}),p.forEach(function(S){var I=t.getConnectedEdges(S,r);I.forEach(function(W){var q=W.getSourceCell(),ie=W.getTargetCell();!c[W.id]&&q&&c[q.id]&&ie&&c[ie.id]&&(o.push(W),c[W.id]=W)})}),o}},{key:"cloneSubGraph",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getSubGraph(e,t);return this.cloneCells(r)}},{key:"cloneCells",value:function(e){return no.cloneCells(e)}},{key:"getNodesFromPoint",value:function(e,t){var r=typeof e=="number"?{x:e,y:t||0}:e;return this.getNodes().filter(function(o){return o.getBBox().containsPoint(r)})}},{key:"getNodesInArea",value:function(e,t,r,o,c){var p=typeof e=="number"?new qr(e,t,r,o):qr.create(e),y=typeof e=="number"?c:t,C=y&&y.strict;return this.getNodes().filter(function(S){var I=S.getBBox();return C?p.containsRect(I):p.isIntersectWithRect(I)})}},{key:"getEdgesInArea",value:function(e,t,r,o,c){var p=typeof e=="number"?new qr(e,t,r,o):qr.create(e),y=typeof e=="number"?c:t,C=y&&y.strict;return this.getEdges().filter(function(S){var I=S.getBBox();return I.width===0?I.inflate(1,0):I.height===0&&I.inflate(0,1),C?p.containsRect(I):p.isIntersectWithRect(I)})}},{key:"getNodesUnderNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.getBBox(),o=t.by==null||t.by==="bbox"?this.getNodesInArea(r):this.getNodesFromPoint(r[t.by]);return o.filter(function(c){return e.id!==c.id&&!c.isDescendantOf(e)})}},{key:"getAllCellsBBox",value:function(){return this.getCellsBBox(this.getCells())}},{key:"getCellsBBox",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return no.getCellsBBox(e,t)}},{key:"search",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.breadthFirst?this.breadthFirstSearch(e,t,r):this.depthFirstSearch(e,t,r)}},{key:"breadthFirstSearch",value:function(e,t){var r=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=[],p={},y={};c.push(e),y[e.id]=0;for(var C=function(){var W=c.shift();if(W==null||p[W.id])return"continue";if(p[W.id]=!0,w.call(t,r,W,y[W.id])===!1)return"continue";var q=r.getNeighbors(W,o);q.forEach(function(ie){y[ie.id]=y[W.id]+1,c.push(ie)})};c.length>0;){var S=C();if(S==="continue")continue}}},{key:"depthFirstSearch",value:function(e,t){var r=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=[],p={},y={};c.push(e),y[e.id]=0;for(var C=function(){var W=c.pop();if(W==null||p[W.id])return"continue";if(p[W.id]=!0,w.call(t,r,W,y[W.id])===!1)return"continue";var q=r.getNeighbors(W,o),ie=c.length;q.forEach(function(ve){y[ve.id]=y[W.id]+1,c.splice(ie,0,ve)})};c.length>0;){var S=C();if(S==="continue")continue}}},{key:"getShortestPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o={};this.getEdges().forEach(function(S){var I=S.getSourceCellId(),W=S.getTargetCellId();I&&W&&(o[I]||(o[I]=[]),o[W]||(o[W]=[]),o[I].push(W),r.directed||o[W].push(I))});var c=typeof e=="string"?e:e.id,p=mg.run(o,c,r.weight),y=[],C=typeof t=="string"?t:t.id;for(p[C]&&y.push(C);C=p[C];)y.unshift(C);return y}},{key:"translate",value:function(e,t,r){return this.getCells().filter(function(o){return!o.hasParent()}).forEach(function(o){return o.translate(e,t,r)}),this}},{key:"resize",value:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)}},{key:"resizeCells",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=this.getCellsBBox(r);if(c){var p=Math.max(e/c.width,0),y=Math.max(t/c.height,0),C=c.getOrigin();r.forEach(function(S){return S.scale(p,y,C,o)})}return this}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return i.toJSON(this.getCells(),e)}},{key:"parseJSON",value:function(e){return i.fromJSON(e)}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.parseJSON(e);return this.resetCells(r,t),this}},{key:"startBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}},{key:"batchUpdate",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch(e,r);var o=t();return this.stopBatch(e,r),o}},{key:"hasActiveBatch",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(this.batches),r=Array.isArray(t)?t:[t];return r.some(function(o){return e.batches[o]>0})}}]),i}(fl);(function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&typeof e.addNode=="function"&&typeof e.addEdge=="function"&&e.collection!=null}a.isModel=s})(Xc||(Xc={})),function(a){function s(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{cells:n.map(function(t){return t.toJSON(e)})}}a.toJSON=s;function i(n){var e=[];return Array.isArray(n)?e.push.apply(e,Object(Ca.a)(n)):(n.cells&&e.push.apply(e,Object(Ca.a)(n.cells)),n.nodes&&n.nodes.forEach(function(t){t.shape==null&&(t.shape="rect"),e.push(t)}),n.edges&&n.edges.forEach(function(t){t.shape==null&&(t.shape="edge"),e.push(t)})),e.map(function(t){var r=t.shape;if(r){if(Ds.registry.exist(r))return Ds.create(t);if(gs.registry.exist(r))return gs.create(t)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}a.fromJSON=i}(Xc||(Xc={}));var wf=".text-block-content",sm=wg("text-block"),um=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"content",get:function(){return this.getContent()},set:function(e){this.setContent(e)}},{key:"getContent",value:function(){return this.store.get("content","")}},{key:"setContent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.store.set("content",e,t)}},{key:"setup",value:function(){var e=this;ni(Object(ui.a)(i.prototype),"setup",this).call(this),this.store.on("change:*",function(t){var r=t.key;r==="content"?e.updateContent(e.getContent()):r==="size"&&e.updateSize(e.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}},{key:"updateSize",value:function(e){Ue.SUPPORT_FOREIGNOBJECT&&this.setAttrs(Z({foreignObject:Object.assign({},e)},wf,{style:Object.assign({},e)}))}},{key:"updateContent",value:function(e){Ue.SUPPORT_FOREIGNOBJECT?this.setAttrs(Z({},wf,{html:e?E.sanitizeHTML(e):""})):this.setAttrs(Z({},wf,{text:e}))}}]),i}(Ds);(function(a){a.config({type:sm,view:sm,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Ue.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'.concat(wf.substr(1),'" />'),"</body>","</foreignObject>"].join(""):'<text class="'.concat(wf.substr(1),'"/>'),"</g>"].join(""),attrs:Z({".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}},wf,{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}})}),Ds.registry.register(sm,a)})(um||(um={})),function(a){var s="content",i=function(n){Object(Zr.a)(t,n);var e=Object(Wr.a)(t);function t(){return Object(_r.a)(this,t),e.apply(this,arguments)}return Object(Br.a)(t,[{key:"confirmUpdate",value:function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=ni(Object(ui.a)(t.prototype),"confirmUpdate",this).call(this,o,c);return this.hasAction(p,s)&&(this.updateContent(),p=this.removeAction(p,s)),p}},{key:"update",value:function(o){if(Ue.SUPPORT_FOREIGNOBJECT)ni(Object(ui.a)(t.prototype),"update",this).call(this,o);else{var c=this.cell,p=Object.assign({},o||c.getAttrs());delete p[wf],ni(Object(ui.a)(t.prototype),"update",this).call(this,p),(!o||f.has(o,wf))&&this.updateContent(o)}}},{key:"updateContent",value:function(o){if(Ue.SUPPORT_FOREIGNOBJECT)ni(Object(ui.a)(t.prototype),"update",this).call(this,o);else{var c=this.cell,p=(o||c.getAttrs())[wf],y=O.breakText(c.getContent(),c.getSize(),p,{svgDocument:this.graph.view.svg}),C=Z({},wf,f.merge({},p,{text:y}));ni(Object(ui.a)(t.prototype),"update",this).call(this,C)}}}]),t}(Gc);a.View=i,function(n){n.config({bootstrap:["render",s],actions:Ue.SUPPORT_FOREIGNOBJECT?{}:{size:s,content:s}}),Gc.registry.register(sm,n)}(i=a.View||(a.View={}))}(um||(um={}));var eD=Qu.define({shape:"empty"});function QO(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body";return[{tagName:a,selector:s},{tagName:"text",selector:"label"}]}function Jf(a,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n={constructorName:a,markup:QO(a,i.selector),attrs:Z({},a,Object.assign({},Qu.bodyAttr))},e=i.parent||Qu;return e.define(f.merge(n,s,{shape:a}))}var tD=Jf("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),nD=Ds.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},Qu.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},Qu.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},Qu.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},Qu.labelAttr),{refY2:15})}}),rD=Jf("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),Cg=10,aD=Qu.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},Qu.bodyAttr),{lateral:Cg}),top:Object.assign(Object.assign({},Qu.bodyAttr),{refCx:"50%",refRx:"50%",cy:Cg,ry:Cg})},attrHooks:{lateral:{set:function(s,i){var n=i.refBBox,e=T.isPercentage(s);e&&(s=parseFloat(s)/100);var t=n.x,r=n.y,o=n.width,c=n.height,p=o/2,y=e?c*s:s,C=.551784,S=C*p,I=C*y,W=t,q=t+o/2,ie=t+o,ve=r+y,Le=ve-y,Oe=r+c-y,it=r+c,at=["M",W,ve,"L",W,Oe,"C",t,Oe+I,q-S,it,q,it,"C",q+S,it,ie,Oe+I,ie,Oe,"L",ie,ve,"C",ie,ve-I,q+S,Le,q,Le,"C",q-S,Le,W,ve-I,W,ve,"Z"];return{d:at.join(" ")}}}},knob:{enabled:!0,position:function(s){var i=s.node,n=i.attr("body/lateral");return{x:0,y:n}},onMouseMove:function(s){var i=s.node,n=s.data,e=s.deltaY;if(e!==0){var t=i.getBBox(),r=i.attr("body/lateral");n.round==null&&(n.round=r);var o=0,c=t.height/2,p=T.clamp(n.round+e,o,c);p!==r&&i.attr({body:{lateral:p},top:{cy:p,ry:p}})}}}}),iD=Jf("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),JO=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},lm=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"points",get:function(){return this.getPoints()},set:function(e){this.setPoints(e)}},{key:"getPoints",value:function(){return this.getAttrByPath("body/refPoints")}},{key:"setPoints",value:function(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",i.pointsToString(e),t),this}},{key:"removePoints",value:function(){return this.removeAttrByPath("body/refPoints"),this}}]),i}(Qu);(function(a){function s(i){return typeof i=="string"?i:i.map(function(n){return Array.isArray(n)?n.join(","):Bt.isPointLike(n)?"".concat(n.x,", ").concat(n.y):""}).join(" ")}a.pointsToString=s,a.config({propHooks:function(n){var e=n.points,t=JO(n,["points"]);if(e){var r=s(e);r&&f.setByPath(t,"attrs/body/refPoints",r)}return t}})})(lm||(lm={}));var oD=Jf("polygon",{},{parent:lm}),sD=Jf("polyline",{},{parent:lm}),ZO=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},uD=Qu.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(s){var i=s.path,n=ZO(s,["path"]);return i&&f.setByPath(n,"attrs/body/refD",i),n}}),qO=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},lD=Qu.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Ue.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:O.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},Qu.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(s){var i=s.text,n=qO(s,["text"]);return i&&f.setByPath(n,"attrs/label/text",i),n},attrHooks:{text:{set:function(s,i){var n=i.cell,e=i.view,t=i.refBBox,r=i.elem,o=i.attrs;if(r instanceof HTMLElement)r.textContent=s;else{var c=o.style||{},p={text:s,width:-5,height:"100%"},y=Object.assign({textVerticalAnchor:"middle"},c),C=Ef.presets.textWrap;return w.call(C.set,this,p,{cell:n,view:e,elem:r,refBBox:t,attrs:y}),{fill:c.color||null}}},position:function(s,i){var n=i.refBBox,e=i.elem;if(e instanceof SVGElement)return n.getCenter()}}}}),cD=Jf("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Zp()},{selector:"image"}),dD=Jf("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:Zp()}),fD=Jf("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:Zp()}),hD=Jf("image-inscribed",{propHooks:Zp(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),X0=gs.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),pD=gs.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),vD=gs.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),Cf=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"html",get:function(){return this.getHTML()},set:function(e){this.setHTML(e)}},{key:"getHTML",value:function(){return this.store.get("html")}},{key:"setHTML",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeHTML(t):this.store.set("html",e,t),this}},{key:"removeHTML",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("html",e)}}]),i}(Qu);(function(a){var s=function(i){Object(Zr.a)(e,i);var n=Object(Wr.a)(e);function e(){return Object(_r.a)(this,e),n.apply(this,arguments)}return Object(Br.a)(e,[{key:"init",value:function(){var r=this;ni(Object(ui.a)(e.prototype),"init",this).call(this),this.cell.on("change:*",function(){var o=r.graph.hook.shouldUpdateHTMLComponent(r.cell);o&&r.renderHTMLComponent()})}},{key:"confirmUpdate",value:function(r){var o=this,c=ni(Object(ui.a)(e.prototype),"confirmUpdate",this).call(this,r);return this.handleAction(c,e.action,function(){return o.renderHTMLComponent()})}},{key:"renderHTMLComponent",value:function(){var r=this.selectors.foContent;if(r){var o=this.$(r).empty(),c=this.graph.hook.getHTMLComponent(this.cell);c&&(typeof c=="string"?o.html(c):o.append(c))}}}]),e}(Gc);a.View=s,function(i){i.action="html",i.config({bootstrap:[i.action],actions:{html:i.action}}),Gc.registry.register("html-view",i)}(s=a.View||(a.View={}))})(Cf||(Cf={})),function(a){a.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Xi.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Ds.registry.register("html",a)}(Cf||(Cf={})),function(a){a.componentRegistry=Os.create({type:"html componnet"})}(Cf||(Cf={}));var eS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},Tg=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;return Object(_r.a)(this,i),e=s.call(this),e.delay=10,e.throttle=2,e.threshold=5,e.changeCount=0,e.timestamp=0,e.options=Object.assign(Object.assign({},i.defaultOptions),n),e.graph.model.on("cell:change:*",e.onModelChanged,Object(fu.a)(e)),e}return Object(Br.a)(i,[{key:"graph",get:function(){return this.options.graph}},{key:"onModelChanged",value:function(){if(this.disabled)return;var e=new Date().getTime(),t=(e-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}},{key:"save",value:function(){this.trigger("save")}},{key:"reset",value:function(){this.changeCount=0,this.timestamp=new Date().getTime()}},{key:"dispose",value:function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}]),i}(d0);eS([d0.dispose()],Tg.prototype,"dispose",null),function(a){a.defaultOptions={delay:10,throttle:2,threshold:5}}(Tg||(Tg={}));var xo=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;return Object(_r.a)(this,i),e=s.call(this),e.graph=n,e.init(),e}return Object(Br.a)(i,[{key:"options",get:function(){return this.graph.options}},{key:"model",get:function(){return this.graph.model}},{key:"view",get:function(){return this.graph.view}},{key:"init",value:function(){}}]),i}(Jd),tS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},Nh=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;Object(_r.a)(this,i),e=s.call(this),e.graph=n;var t=Xi.parseJSONMarkup(i.markup),r=t.selectors,o=t.fragment;return e.background=r.background,e.grid=r.grid,e.svg=r.svg,e.defs=r.defs,e.viewport=r.viewport,e.primer=r.primer,e.stage=r.stage,e.decorator=r.decorator,e.overlay=r.overlay,e.container=e.options.container,e.restore=i.snapshoot(e.container),e.$(e.container).addClass(e.prefixClassName("graph")).append(o),e.delegateEvents(),e}return Object(Br.a)(i,[{key:"model",get:function(){return this.graph.model}},{key:"options",get:function(){return this.graph.options}},{key:"delegateEvents",value:function(){var e=this.constructor;return ni(Object(ui.a)(i.prototype),"delegateEvents",this).call(this,e.events),this}},{key:"guard",value:function(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:t&&t.cell&&no.isCell(t.cell)?!1:!(this.svg===e.target||this.container===e.target||k.a.contains(this.svg,e.target))}},{key:"findView",value:function(e){return this.graph.renderer.findViewByElem(e)}},{key:"onDblClick",value:function(e){this.options.preventDefaultDblClick&&e.preventDefault();var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var o=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onDblClick(t,o.x,o.y):this.graph.trigger("blank:dblclick",{e:t,x:o.x,y:o.y})}},{key:"onClick",value:function(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var o=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onClick(t,o.x,o.y):this.graph.trigger("blank:click",{e:t,x:o.x,y:o.y})}}},{key:"onContextMenu",value:function(e){this.options.preventDefaultContextMenu&&e.preventDefault();var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var o=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onContextMenu(t,o.x,o.y):this.graph.trigger("blank:contextmenu",{e:t,x:o.x,y:o.y})}},{key:"delegateDragEvents",value:function(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});var r=this.constructor;this.delegateDocumentEvents(r.documentEvents,e.data),this.undelegateEvents()}},{key:"getMouseMovedCount",value:function(e){var t=this.getEventData(e);return t.mouseMovedCount||0}},{key:"onMouseDown",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;this.options.preventDefaultMouseDown&&t.preventDefault();var o=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onMouseDown(t,o.x,o.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:o.x,y:o.y})),this.delegateDragEvents(t,r)}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),r=t.startPosition;if(r&&r.x===e.clientX&&r.y===e.clientY)return;t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1;var o=t.mouseMovedCount;if(o<=this.options.moveThreshold)return;var c=this.normalizeEvent(e),p=this.graph.snapToGrid(c.clientX,c.clientY),y=t.currentView;y?y.onMouseMove(c,p.x,p.y):this.graph.trigger("blank:mousemove",{e:c,x:p.x,y:p.y}),this.setEventData(c,t)}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY),o=this.getEventData(e),c=o.currentView;c?c.onMouseUp(t,r.x,r.y):this.graph.trigger("blank:mouseup",{e:t,x:r.x,y:r.y}),e.isPropagationStopped()||this.onClick(k.a.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}},{key:"onMouseOver",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;if(r)r.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}},{key:"onMouseOut",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;if(r)r.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}},{key:"onMouseEnter",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var o=this.graph.renderer.findViewByElem(t.relatedTarget);if(r){if(o===r)return;r.onMouseEnter(t)}else{if(o)return;this.graph.trigger("graph:mouseenter",{e:t})}}},{key:"onMouseLeave",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var o=this.graph.renderer.findViewByElem(t.relatedTarget);if(r){if(o===r)return;r.onMouseLeave(t)}else{if(o)return;this.graph.trigger("graph:mouseleave",{e:t})}}},{key:"onMouseWheel",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var o=t.originalEvent,c=this.graph.snapToGrid(o.clientX,o.clientY),p=Math.max(-1,Math.min(1,o.wheelDelta||-o.detail));r?r.onMouseWheel(t,c.x,c.y,p):this.graph.trigger("blank:mousewheel",{e:t,delta:p,x:c.x,y:c.y})}},{key:"onCustomEvent",value:function(e){var t=e.currentTarget,r=t.getAttribute("event")||t.getAttribute("data-event");if(r){var o=this.findView(t);if(o){var c=this.normalizeEvent(e);if(this.guard(c,o))return;var p=this.graph.snapToGrid(c.clientX,c.clientY);o.onCustomEvent(c,r,p.x,p.y)}}}},{key:"handleMagnetEvent",value:function(e,t){var r=e.currentTarget,o=r.getAttribute("magnet");if(o&&o.toLowerCase()!=="false"){var c=this.findView(r);if(c){var p=this.normalizeEvent(e);if(this.guard(p,c))return;var y=this.graph.snapToGrid(p.clientX,p.clientY);w.call(t,this.graph,c,p,r,y.x,y.y)}}}},{key:"onMagnetMouseDown",value:function(e){this.handleMagnetEvent(e,function(t,r,o,c,p){t.onMagnetMouseDown(r,o,c,p)})}},{key:"onMagnetDblClick",value:function(e){this.handleMagnetEvent(e,function(t,r,o,c,p){t.onMagnetDblClick(r,o,c,p)})}},{key:"onMagnetContextMenu",value:function(e){this.options.preventDefaultContextMenu&&e.preventDefault(),this.handleMagnetEvent(e,function(t,r,o,c,p){t.onMagnetContextMenu(r,o,c,p)})}},{key:"onLabelMouseDown",value:function(e){var t=e.currentTarget,r=this.findView(t);if(r){var o=this.normalizeEvent(e);if(this.guard(o,r))return;var c=this.graph.snapToGrid(o.clientX,o.clientY);r.onLabelMouseDown(o,c.x,c.y)}}},{key:"onImageDragStart",value:function(){return!1}},{key:"dispose",value:function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}}}]),i}(so);tS([so.dispose()],Nh.prototype,"dispose",null),function(a){var s="".concat(Nl.prefixCls,"-graph");a.markup=[{ns:O.ns.xhtml,tagName:"div",selector:"background",className:"".concat(s,"-background")},{ns:O.ns.xhtml,tagName:"div",selector:"grid",className:"".concat(s,"-grid")},{ns:O.ns.svg,tagName:"svg",selector:"svg",className:"".concat(s,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":O.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(s,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(s,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(s,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(s,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(s,"-svg-overlay")}]}]}];function i(n){var e=n.cloneNode();return n.childNodes.forEach(function(t){return e.appendChild(t)}),function(){for(O.empty(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(var t=0,r=e.attributes.length;t<r;t+=1){var o=e.attributes[t];n.setAttribute(o.name,o.value)}e.childNodes.forEach(function(c){return n.appendChild(c)})}}a.snapshoot=i}(Nh||(Nh={})),function(a){var s,i=Nl.prefixCls;a.events=(s={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"},Z(s,"mouseenter  .".concat(i,"-cell"),"onMouseEnter"),Z(s,"mouseleave  .".concat(i,"-cell"),"onMouseLeave"),Z(s,"mouseenter  .".concat(i,"-cell-tools"),"onMouseEnter"),Z(s,"mouseleave  .".concat(i,"-cell-tools"),"onMouseLeave"),Z(s,"mousedown   .".concat(i,"-cell [event]"),"onCustomEvent"),Z(s,"touchstart  .".concat(i,"-cell [event]"),"onCustomEvent"),Z(s,"mousedown   .".concat(i,"-cell [data-event]"),"onCustomEvent"),Z(s,"touchstart  .".concat(i,"-cell [data-event]"),"onCustomEvent"),Z(s,"dblclick    .".concat(i,"-cell [magnet]"),"onMagnetDblClick"),Z(s,"contextmenu .".concat(i,"-cell [magnet]"),"onMagnetContextMenu"),Z(s,"mousedown   .".concat(i,"-cell [magnet]"),"onMagnetMouseDown"),Z(s,"touchstart  .".concat(i,"-cell [magnet]"),"onMagnetMouseDown"),Z(s,"dblclick    .".concat(i,"-cell [data-magnet]"),"onMagnetDblClick"),Z(s,"contextmenu .".concat(i,"-cell [data-magnet]"),"onMagnetContextMenu"),Z(s,"mousedown   .".concat(i,"-cell [data-magnet]"),"onMagnetMouseDown"),Z(s,"touchstart  .".concat(i,"-cell [data-magnet]"),"onMagnetMouseDown"),Z(s,"dragstart   .".concat(i,"-cell image"),"onImageDragStart"),Z(s,"mousedown   .".concat(i,"-edge .").concat(i,"-edge-label"),"onLabelMouseDown"),Z(s,"touchstart  .".concat(i,"-edge .").concat(i,"-edge-label"),"onLabelMouseDown"),s),a.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Nh||(Nh={}));var bd;(function(a){function s(i,n){return function(e,t,r){var o=r.value;r.value=function(){var c=this.scroller.widget;if(c==null){var p="Shoule enable scroller to use method '".concat(t,"'");if(i!==!1)throw console.error(p),new Error(p);return n!==!1&&console.warn(p),this}for(var y=arguments.length,C=new Array(y),S=0;S<y;S++)C[S]=arguments[S];return o.call.apply(o,[this].concat(C))}}}a.checkScroller=s})(bd||(bd={}));var nS=`.x6-graph {
  position: relative;
  outline: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`,rS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},qp=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"init",value:function(){Nl.autoInsertCSS&&i.ensure()}},{key:"dispose",value:function(){i.clean()}}]),i}(xo);rS([qp.dispose()],qp.prototype,"dispose",null),function(a){var s,i=0;function n(){if(i+=1,i>1)return;if(!Ue.isApplyingHMR()){s=document.createElement("style"),s.setAttribute("type","text/css"),s.textContent=nS;var t=document.querySelector("head");t&&t.insertBefore(s,t.firstChild)}}a.ensure=n;function e(){if(i-=1,i>0)return;s&&s.parentNode&&s.parentNode.removeChild(s),s=null}a.clean=e}(qp||(qp={}));var aS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},ev=function(){function a(){Object(_r.a)(this,a)}return Object(Br.a)(a,[{key:"handleClassName",get:function(){return wo.handle}},{key:"pie",get:function(){return Object.assign(Object.assign({},a.defaultPieOptions),this.handleOptions.pie)}},{key:"initHandles",value:function(){var i=this,n;if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(r){return i.addHandle(r)}),this.handleOptions.type==="pie"){if(this.pie.toggles){var e=wo.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(function(r){var o=i.$("<div/>");i.applyAttrs(o,r.attrs),o.addClass(e).addClass("".concat(e,"-pos-").concat(r.position||"e")).attr("data-name",r.name).appendTo(i.container),i.$pieToggles[r.name]=o})}this.setPieIcons()}if(this.$handleContainer){var t=this.handleOptions.type||"surround";this.$handleContainer.addClass(wo.wrap).addClass(wo.animate).addClass("".concat(wo.handle,"-").concat(t))}this.delegateEvents((n={},Z(n,"mousedown .".concat(wo.handle),"onHandleMouseDown"),Z(n,"touchstart .".concat(wo.handle),"onHandleMouseDown"),Z(n,"mousedown .".concat(wo.pieToggle),"onPieToggleMouseDown"),Z(n,"touchstart .".concat(wo.pieToggle),"onPieToggleMouseDown"),n))}},{key:"onHandleMouseDown",value:function(i){var n=this.$(i.currentTarget).closest(".".concat(wo.handle)).attr("data-action");n&&(i.preventDefault(),i.stopPropagation(),this.setEventData(i,{action:n,clientX:i.clientX,clientY:i.clientY,startX:i.clientX,startY:i.clientY}),i.type==="mousedown"&&i.button===2?this.triggerHandleAction(n,"contextmenu",i):(this.triggerHandleAction(n,"mousedown",i),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},i.data)))}},{key:"onHandleMouseMove",value:function(i){var n=this.getEventData(i),e=n.action;e&&this.triggerHandleAction(e,"mousemove",i)}},{key:"onHandleMouseUp",value:function(i){var n=this.getEventData(i),e=n.action;e&&(this.triggerHandleAction(e,"mouseup",i),this.undelegateDocumentEvents())}},{key:"triggerHandleAction",value:function(i,n,e,t){e.preventDefault(),e.stopPropagation();var r=this.normalizeEvent(e),o=this.getEventData(r),c=this.graph.snapToGrid(r.clientX,r.clientY),p=this.graph.snapToGrid(o.clientX,o.clientY),y=c.x-p.x,C=c.y-p.y;this.trigger("action:".concat(i,":").concat(n),Object.assign({e:r,dx:y,dy:C,x:c.x,y:c.y,offsetX:e.clientX-o.startX,offsetY:e.clientY-o.startY},t)),o.clientX=e.clientX,o.clientY=e.clientY}},{key:"onPieToggleMouseDown",value:function(i){i.stopPropagation();var n=this.$(i.target).closest(".".concat(wo.pieToggle)).attr("data-name");this.isOpen(n)||this.isOpen()&&this.toggleState(),this.toggleState(n)}},{key:"setPieIcons",value:function(){var i=this;this.handleOptions.type==="pie"&&this.$handleContainer.find(".".concat(wo.handle)).each(function(n,e){var t=i.$(e),r=t.attr("data-action"),o=wo.pieSlice,c=i.getHandle(r);if(!c||!c.icon){var p=window.getComputedStyle(e,":before").getPropertyValue("content");if(p&&p!=="none"){var y=t.find(".".concat(o,"-txt"));y.length&&pi.create(y[0]).text(p.replace(/['"]/g,""))}var C=t.css("background-image");if(C){var S=C.match(/url\(['"]?([^'"]+)['"]?\)/);if(S){var I=S[1],W=t.find(".".concat(o,"-img"));W.length>0&&pi.create(W[0]).attr("xlink:href",I)}}}})}},{key:"getHandleIdx",value:function(i){return this.handles.findIndex(function(n){return n.name===i})}},{key:"hasHandle",value:function(i){return this.getHandleIdx(i)>=0}},{key:"getHandle",value:function(i){return this.handles.find(function(n){return n.name===i})}},{key:"renderHandle",value:function(i){var n=this.$("<div/>").addClass("".concat(wo.handle," ").concat(wo.handle,"-").concat(i.name)).attr("data-action",i.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){var e=this.getHandleIdx(i.name),t=this.pie,r=t.outerRadius,o=t.innerRadius,c=(r+o)/2,p=new Bt(r,r),y=Pi.toRad(t.sliceAngle),C=e*y+Pi.toRad(t.startAngle),S=C+y,I=O.createSlicePathData(o,r,C,S),W=pi.create("svg").addClass("".concat(wo.pieSlice,"-svg")),q=pi.create("path").addClass(wo.pieSlice).attr("d",I).translate(r,r),ie=Bt.fromPolar(c,-C-y/2,p).toJSON(),ve=t.iconSize,Le=pi.create("image").attr(ie).addClass("".concat(wo.pieSlice,"-img"));ie.y=ie.y+ve-2;var Oe=pi.create("text",{"font-size":ve}).attr(ie).addClass("".concat(wo.pieSlice,"-txt"));Le.attr({width:ve,height:ve}),Le.translate(-ve/2,-ve/2),Oe.translate(-ve/2,-ve/2),W.append([q,Le,Oe]),n.append(W.node)}else n.addClass("".concat(wo.handle,"-pos-").concat(i.position)),i.content&&(typeof i.content=="string"?n.html(i.content):n.append(i.content));return this.updateHandleIcon(n,i.icon),this.applyAttrs(n,i.attrs),n}},{key:"addHandle",value:function(i){var n=this;if(!this.hasHandle(i.name)){this.handles.push(i);var e=i.events;e&&Object.keys(e).forEach(function(t){var r=e[t],o="action:".concat(i.name,":").concat(t);typeof r=="string"?n.on(o,n[r],n):n.on(o,r)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(i))}return this}},{key:"addHandles",value:function(i){var n=this;return i.forEach(function(e){return n.addHandle(e)}),this}},{key:"removeHandles",value:function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}},{key:"removeHandle",value:function(i){var n=this,e=this.getHandleIdx(i),t=this.handles[e];return t&&(t.events&&Object.keys(t.events).forEach(function(r){n.off("action:".concat(i,":").concat(r))}),this.getHandleElem(i).remove(),this.handles.splice(e,1)),this}},{key:"changeHandle",value:function(i,n){var e=this.getHandle(i);return e&&(this.removeHandle(i),this.addHandle(Object.assign(Object.assign({},e),n))),this}},{key:"toggleHandle",value:function(i,n){var e=this.getHandle(i);if(e){var t=this.getHandleElem(i),r="".concat(wo.handle,"-selected");n===void 0&&(n=!t.hasClass(r)),t.toggleClass(r,n);var o=n?e.iconSelected:e.icon;o&&this.updateHandleIcon(t,o)}return this}},{key:"selectHandle",value:function(i){return this.toggleHandle(i,!0)}},{key:"deselectHandle",value:function(i){return this.toggleHandle(i,!1)}},{key:"deselectAllHandles",value:function(){var i=this;return this.handles.forEach(function(n){return i.deselectHandle(n.name)}),this}},{key:"getHandleElem",value:function(i){return this.$handleContainer.find(".".concat(wo.handle,"-").concat(i))}},{key:"updateHandleIcon",value:function(i,n){if(this.handleOptions.type==="pie"){var e=i.find(".".concat(wo.pieSliceImg));this.$(e[0]).attr("xlink:href",n||"")}else i.css("background-image",n?"url(".concat(n,")"):"")}},{key:"isRendered",value:function(){return this.$handleContainer!=null}},{key:"isOpen",value:function(i){return this.isRendered()?i?this.$pieToggles[i].hasClass(wo.pieToggleOpened):this.$handleContainer.hasClass("".concat(wo.pieOpended)):!1}},{key:"toggleState",value:function(i){var n=this;if(this.isRendered()){var e=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(function(o){var c=n.$pieToggles[o];c.removeClass(wo.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:i}),e.removeClass(wo.pieOpended);else{if(this.trigger("pie:open",{name:i}),i){var t=this.pie.toggles,r=t&&t.find(function(o){return o.name===i});r&&e.attr({"data-pie-toggle-name":r.name,"data-pie-toggle-position":r.position}),this.$pieToggles[i].addClass(wo.pieToggleOpened)}e.addClass(wo.pieOpended)}}}},{key:"applyAttrs",value:function(i,n){if(n){var e=so.$(i);Object.keys(n).forEach(function(t){var r=e.find(t).addBack().filter(t),o=n[t],c=o.class,p=aS(o,["class"]);c&&r.addClass(c),r.attr(p)})}}}]),a}();(function(a){a.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(ev||(ev={}));var wo;(function(a){a.handle=so.prototype.prefixClassName("widget-handle"),a.wrap="".concat(a.handle,"-wrap"),a.animate="".concat(a.handle,"-animate"),a.pieOpended="".concat(a.handle,"-pie-opened"),a.pieToggle="".concat(a.handle,"-pie-toggle"),a.pieToggleOpened="".concat(a.handle,"-pie-toggle-opened"),a.pieSlice="".concat(a.handle,"-pie-slice"),a.pieSliceImg="".concat(a.handle,"-pie-slice-img")})(wo||(wo={}));var iS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},oS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},tv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;Object(_r.a)(this,i),e=s.call(this);var t=n,r=t.view,o=t.cell,c=t.node,p=t.edge,y=t.graph,C=oS(t,["view","cell","node","edge","graph"]);r?(e.view=r,e.cell=r.cell,e.graph=r.graph,e.model=e.graph.model):(o||p||c)&&y&&(e.cell=c||p||o,e.view=y.renderer.findViewByCell(e.cell),e.graph=y,e.model=e.graph.model);var S=e.constructor;return n.clearAll!==!1&&S.removeInstances(e.graph),S.register(Object(fu.a)(e)),e.init(C),e}return Object(Br.a)(i,[{key:"init",value:function(e){}},{key:"render",value:function(){return this}},{key:"startListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}},{key:"stopListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}},{key:"remove",value:function(){this.stopListening();var e=this.constructor;return e.unregister(this),ni(Object(ui.a)(i.prototype),"remove",this).call(this)}},{key:"dispose",value:function(){this.remove()}}],[{key:"ensureCache",value:function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}},{key:"register",value:function(e,t){t==null&&(t=e.graph);var r=this.ensureCache(),o=r[t.view.cid];o==null&&(o=r[t.view.cid]={}),o[e.cid]=e}},{key:"unregister",value:function(e,t){t==null&&(t=e.graph);var r=this.ensureCache();r[t.view.cid]&&delete r[t.view.cid][e.cid]}},{key:"removeInstances",value:function(e){var t=this.ensureCache(),r=t[e.view.cid];r&&Object.keys(r).forEach(function(o){var c=r[o];c&&c.remove()})}},{key:"getInstances",value:function(e){var t=this.ensureCache();return t[e.view.cid]||{}}}]),i}(so);tv.instanceCache=new WeakMap,iS([so.dispose()],tv.prototype,"dispose",null);var W0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"node",get:function(){return this.cell}},{key:"metadata",get:function(){var e=this.cell.prop("knob");return Array.isArray(e)?this.options.index!=null?e[this.options.index]:null:e}},{key:"init",value:function(e){this.options=Object.assign({},e),this.render(),this.startListening()}},{key:"startListening",value:function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),ni(Object(ui.a)(i.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),ni(Object(ui.a)(i.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){return this.container=document.createElement("div"),O.addClass(this.container,this.prefixClassName("widget-knob")),this.options.className&&O.addClass(this.container,this.options.className),this.view.addClass(qh.KNOB),this.graph.container.appendChild(this.container),this.update(),this}},{key:"remove",value:function(){return this.view.removeClass(qh.KNOB),ni(Object(ui.a)(i.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.metadata){var e=this.metadata,t=e.update,r=e.position,o={knob:this,cell:this.cell,node:this.node};if(r){var c=r.call(this.graph,Object.assign({},o));if(c){var p=this.graph.matrix(),y=this.node.getBBox(),C=Pi.normalize(this.node.getAngle()),S=Bt.create(c);C!==0&&S.rotate(-C,{x:y.width/2,y:y.height/2}),S.translate(y).scale(p.a,p.d).translate(p.e,p.f),this.container.style.left="".concat(S.x,"px"),this.container.style.top="".concat(S.y,"px")}}t&&t.call(this.graph,Object.assign({},o))}}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display=""}},{key:"onTransform",value:function(){this.hide()}},{key:"onTransformed",value:function(){this.show()}},{key:"onKnobMouseDown",value:function(e){var t=e.knob;this.cid!==t.cid&&this.hide()}},{key:"onKnobMouseUp",value:function(){this.show()}},{key:"notify",value:function(e,t){if(this.view){var r=this.view.normalizeEvent(t),o=this.graph.snapToGrid(r.clientX,r.clientY);this.view.notify("cell:".concat(e),{e:r,view:this.view,node:this.node,cell:this.cell,x:o.x,y:o.y,knob:this}),this.cell.isNode()?this.view.notify("node:".concat(e),{e:r,view:this.view,node:this.node,cell:this.cell,x:o.x,y:o.y,knob:this}):this.cell.isEdge()&&this.view.notify("edge:".concat(e),{e:r,view:this.view,edge:this.cell,cell:this.cell,x:o.x,y:o.y,knob:this})}}},{key:"onMouseDown",value:function(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(qh.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),r=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,r&&(r.addClass(qh.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){var o=this.graph.matrix(),c=(e.clientX-t.originX)/o.a,p=(e.clientY-t.originY)/o.d,y=this.node.getAngle(),C=new Bt(c,p).rotate(y);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:C.x,deltaY:C.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.getEventData(e),r=this.graph.findViewByCell(this.node);t.knobbing&&(r&&r.removeClass(qh.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}]),i}(tv),qh;(function(a){a.KNOB="has-widget-knob",a.KNOBBING="node-knobbing",a.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(qh||(qh={}));var sS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},nv;(function(a){a.root="widget-minimap",a.viewport="".concat(a.root,"-viewport"),a.zoom="".concat(a.viewport,"-zoom")})(nv||(nv={}));var H0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;Object(_r.a)(this,i),e=s.call(this),e.options=Object.assign(Object.assign({},cm.defaultOptions),n),e.updateViewport=w.debounce(e.updateViewport.bind(Object(fu.a)(e)),0),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(nv.root));var t=document.createElement("div");e.container.appendChild(t),e.$viewport=e.$("<div>").addClass(e.prefixClassName(nv.viewport)),e.options.scalable&&(e.zoomHandle=e.$("<div>").addClass(e.prefixClassName(nv.zoom)).appendTo(e.$viewport).get(0)),e.$container.append(e.$viewport).css({width:e.options.width,height:e.options.height,padding:e.options.padding}),e.options.container&&e.options.container.appendChild(e.container),e.sourceGraph=e.graph;var r=Object.assign(Object.assign({},e.options.graphOptions),{container:t,model:e.sourceGraph.model,frozen:!0,async:e.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return e.targetGraph=e.options.createGraph?e.options.createGraph(r):new co(r),e.targetGraph.renderer.unfreeze(),e.updatePaper(e.sourceGraph.options.width,e.sourceGraph.options.height),e.startListening(),e}return Object(Br.a)(i,[{key:"graph",get:function(){return this.options.graph}},{key:"scroller",get:function(){return this.graph.scroller.widget}},{key:"graphContainer",get:function(){return this.scroller?this.scroller.container:this.graph.container}},{key:"$graphContainer",get:function(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}},{key:"startListening",value:function(){var e;this.scroller?this.$graphContainer.on("scroll".concat(this.getEventNamespace()),this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents((e={mousedown:"startAction",touchstart:"startAction"},Z(e,"mousedown .".concat(this.prefixClassName("graph")),"scrollTo"),Z(e,"touchstart .".concat(this.prefixClassName("graph")),"scrollTo"),e))}},{key:"stopListening",value:function(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}},{key:"onRemove",value:function(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}},{key:"onTransform",value:function(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}},{key:"onModelUpdated",value:function(){this.targetGraph.zoomToFit()}},{key:"updatePaper",value:function(e,t){var r,o;typeof e=="object"?(r=e.width,o=e.height):(r=e,o=t);var c=this.sourceGraph.options,p=this.sourceGraph.transform.getScale(),y=this.options.width-2*this.options.padding,C=this.options.height-2*this.options.padding;r/=p.sx,o/=p.sy,this.ratio=Math.min(y/r,C/o);var S=this.ratio,I=c.x*S/p.sx,W=c.y*S/p.sy;return r*=S,o*=S,this.targetGraph.resizeGraph(r,o),this.targetGraph.translate(I,W),this.scroller?this.targetGraph.scale(S,S):this.targetGraph.zoomToFit(),this.updateViewport(),this}},{key:"updateViewport",value:function(){var e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale(),r=null;this.scroller?r=this.scroller.clientToLocalPoint(0,0):r=this.graph.graphToLocal(0,0);var o=this.$(this.targetGraph.container).position(),c=this.targetGraph.translate();c.ty=c.ty||0,this.geometry={top:o.top+r.y*t.sy+c.ty,left:o.left+r.x*t.sx+c.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}},{key:"startAction",value:function(e){var t=this.normalizeEvent(e),r=t.target===this.zoomHandle?"zooming":"panning",o=this.sourceGraph.translate(),c=o.tx,p=o.ty,y={action:r,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:c,translateY:p};this.targetGraphTransforming=!0,this.delegateDocumentEvents(cm.documentEvents,y)}},{key:"doAction",value:function(e){var t=this,r=this.normalizeEvent(e),o=r.clientX,c=r.clientY,p=r.data;switch(p.action){case"panning":{var y=this.sourceGraph.transform.getScale(),C=(o-p.clientX)*y.sx,S=(c-p.clientY)*y.sy;this.scroller?(this.graphContainer.scrollLeft=p.scrollLeft+C/this.ratio,this.graphContainer.scrollTop=p.scrollTop+S/this.ratio):this.sourceGraph.translate(p.translateX-C/this.ratio,p.translateY-S/this.ratio);break}case"zooming":{var I=p.scale,W=p.geometry,q=1+(p.clientX-o)/W.width/I.sx;p.frameId&&cancelAnimationFrame(p.frameId),p.frameId=requestAnimationFrame(function(){t.sourceGraph.zoom(q*p.zoom,{absolute:!0,minScale:t.options.minScale,maxScale:t.options.maxScale})});break}default:break}}},{key:"stopAction",value:function(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}},{key:"scrollTo",value:function(e){var t=this.normalizeEvent(e),r,o,c=this.targetGraph.translate();if(c.ty=c.ty||0,t.offsetX==null){var p=this.$(this.targetGraph.container).offset();r=t.pageX-p.left,o=t.pageY-p.top}else r=t.offsetX,o=t.offsetY;var y=(r-c.tx)/this.ratio,C=(o-c.ty)/this.ratio;this.sourceGraph.centerPoint(y,C)}},{key:"dispose",value:function(){this.remove()}}]),i}(so);sS([so.dispose()],H0.prototype,"dispose",null);var cm;(function(a){a.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(i){return new co(i)}},a.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(cm||(cm={}));var uS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},lS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},K0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;Object(_r.a)(this,i),e=s.call(this);var t=n.graph,r=lS(n,["graph"]);return e.graph=t,e.options=Object.assign({tolerance:10},r),e.offset={x:0,y:0},e.render(),e.parseFilter(),e.disabled||e.startListening(),e}return Object(Br.a)(i,[{key:"model",get:function(){return this.graph.model}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-snapline")}},{key:"verticalClassName",get:function(){return"".concat(this.containerClassName,"-vertical")}},{key:"horizontalClassName",get:function(){return"".concat(this.containerClassName,"-horizontal")}},{key:"disabled",get:function(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}},{key:"setFilter",value:function(e){this.options.filter=e,this.parseFilter()}},{key:"render",value:function(){var e=this.containerWrapper=new pi("svg"),t=this.horizontal=new pi("path"),r=this.vertical=new pi("path");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),r.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),r.setAttribute("display","none"),e.append([t,r]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}},{key:"startListening",value:function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}},{key:"stopListening",value:function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}},{key:"parseFilter",value:function(){var e=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var t=this.options.filter;Array.isArray(t)?t.forEach(function(r){typeof r=="string"?e.filterShapes[r]=!0:e.filterCells[r.id]=!0}):typeof t=="function"&&(this.filterFunction=t)}},{key:"onBatchStop",value:function(e){var t=e.name,r=e.data;t==="resize"&&this.snapOnResizing(r.cell,r)}},{key:"captureCursorOffset",value:function(e){var t=e.view,r=e.x,o=e.y,c=t.getDelegatedView();if(c&&this.isNodeMovable(c)){var p=t.cell.getPosition();this.offset={x:r-p.x,y:o-p.y}}}},{key:"isNodeMovable",value:function(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}},{key:"snapOnResizing",value:function(e,t){var r=this;if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){var o=this.graph.renderer.findViewByCell(e);if(o&&o.cell.isNode()){var c=e.getBBox(),p=c.bbox(e.getAngle()),y=p.getTopLeft(),C=p.getBottomRight(),S=Pi.normalize(e.getAngle()),I=this.options.tolerance||0,W,q,ie,ve,Le,Oe,it={vertical:0,horizontal:0},at=t.direction,Qe=t.trueDirection,qt=t.relativeDirection;Qe.indexOf("right")!==-1?it.vertical=C.x:it.vertical=y.x,Qe.indexOf("bottom")!==-1?it.horizontal=C.y:it.horizontal=y.y,this.model.getNodes().some(function(ja){if(r.isIgnored(e,ja))return!1;var li=ja.getBBox().bbox(ja.getAngle()),Si=li.getTopLeft(),Di=li.getBottomRight(),hl={vertical:[Si.x,Di.x],horizontal:[Si.y,Di.y]},pu={};return Object.keys(hl).forEach(function(ns){var xd=ns,ef=hl[xd].map(function(wd){return{position:wd,distance:Math.abs(wd-it[xd])}}).filter(function(wd){return wd.distance<=I});pu[xd]=g.sortBy(ef,function(wd){return wd.distance})}),W==null&&pu.vertical.length>0&&(W=pu.vertical[0].position,q=Math.min(p.y,li.y),ie=Math.max(C.y,Di.y)-q),ve==null&&pu.horizontal.length>0&&(ve=pu.horizontal[0].position,Le=Math.min(p.x,li.x),Oe=Math.max(C.x,Di.x)-Le),W!=null&&ve!=null}),this.hide();var Kt=0,Tn=0;(ve!=null||W!=null)&&(W!=null&&(Kt=Qe.indexOf("right")!==-1?W-C.x:y.x-W),ve!=null&&(Tn=Qe.indexOf("bottom")!==-1?ve-C.y:y.y-ve));var Bn=0,tr=0;if(S%90===0)S===90||S===270?(Bn=Tn,tr=Kt):(Bn=Kt,tr=Tn);else{var hr=S>=0&&S<90?1:S>=90&&S<180?4:S>=180&&S<270?3:2;ve!=null&&W!=null&&(Kt<Tn?(Tn=0,ve=void 0):(Kt=0,W=void 0));var Lr=Pi.toRad(S%90);Kt&&(Bn=hr===3?Kt/Math.cos(Lr):Kt/Math.sin(Lr)),Tn&&(tr=hr===3?Tn/Math.cos(Lr):Tn/Math.sin(Lr));var Vr=hr===1||hr===3;switch(qt){case"top":case"bottom":tr=Tn?Tn/(Vr?Math.cos(Lr):Math.sin(Lr)):Kt/(Vr?Math.sin(Lr):Math.cos(Lr));break;case"left":case"right":Bn=Kt?Kt/(Vr?Math.cos(Lr):Math.sin(Lr)):Tn/(Vr?Math.sin(Lr):Math.cos(Lr));break;default:break}}switch(qt){case"top":case"bottom":Bn=0;break;case"left":case"right":tr=0;break;default:break}var dn=this.graph.getGridSize(),Xn=Math.max(c.width+Bn,dn),ra=Math.max(c.height+tr,dn);t.minWidth&&t.minWidth>dn&&(Xn=Math.max(Xn,t.minWidth)),t.minHeight&&t.minHeight>dn&&(ra=Math.max(ra,t.minHeight)),t.maxWidth&&(Xn=Math.min(Xn,t.maxWidth)),t.maxHeight&&(ra=Math.min(ra,t.maxHeight)),t.preserveAspectRatio&&(tr<Bn?ra=Xn*(c.height/c.width):Xn=ra*(c.width/c.height)),(Xn!==c.width||ra!==c.height)&&(e.resize(Xn,ra,{direction:at,relativeDirection:qt,trueDirection:Qe,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(o)}),ie&&(ie+=ra-c.height),Oe&&(Oe+=Xn-c.width));var Ea=e.getBBox().bbox(S);W&&Math.abs(Ea.x-W)>1&&Math.abs(Ea.width+Ea.x-W)>1&&(W=void 0),ve&&Math.abs(Ea.y-ve)>1&&Math.abs(Ea.height+Ea.y-ve)>1&&(ve=void 0),this.update({verticalLeft:W,verticalTop:q,verticalHeight:ie,horizontalTop:ve,horizontalLeft:Le,horizontalWidth:Oe})}}}},{key:"snapOnMoving",value:function(e){var t=this,r=e.view,o=e.e,c=e.x,p=e.y,y=r.getEventData(o).delegatedView||r;if(!this.isNodeMovable(y))return;var C=y.cell,S=C.getSize(),I=C.getPosition(),W=new qr(c-this.offset.x,p-this.offset.y,S.width,S.height),q=C.getAngle(),ie=W.getCenter(),ve=W.bbox(q),Le=ve.getTopLeft(),Oe=ve.getBottomRight(),it=this.options.tolerance||0,at,Qe,qt,Kt,Tn,Bn,tr=0,hr=0;if(this.model.getNodes().some(function(Ea){if(t.isIgnored(C,Ea))return!1;var ja=Ea.getBBox().bbox(Ea.getAngle()),li=ja.getCenter(),Si=ja.getTopLeft(),Di=ja.getBottomRight();return at==null&&(Math.abs(li.x-ie.x)<it?(at=li.x,tr=.5):Math.abs(Si.x-Le.x)<it?(at=Si.x,tr=0):Math.abs(Si.x-Oe.x)<it?(at=Si.x,tr=1):Math.abs(Di.x-Oe.x)<it?(at=Di.x,tr=1):Math.abs(Di.x-Le.x)<it&&(at=Di.x),at!=null&&(Qe=Math.min(ve.y,ja.y),qt=Math.max(Oe.y,Di.y)-Qe)),Kt==null&&(Math.abs(li.y-ie.y)<it?(Kt=li.y,hr=.5):Math.abs(Si.y-Le.y)<it?Kt=Si.y:Math.abs(Si.y-Oe.y)<it?(Kt=Si.y,hr=1):Math.abs(Di.y-Oe.y)<it?(Kt=Di.y,hr=1):Math.abs(Di.y-Le.y)<it&&(Kt=Di.y),Kt!=null&&(Tn=Math.min(ve.x,ja.x),Bn=Math.max(Oe.x,Di.x)-Tn)),at!=null&&Kt!=null}),this.hide(),Kt!=null||at!=null){Kt!=null&&(ve.y=Kt-hr*ve.height),at!=null&&(ve.x=at-tr*ve.width);var Lr=ve.getCenter(),Vr=Lr.x-W.width/2,dn=Lr.y-W.height/2,Xn=Vr-I.x,ra=dn-I.y;(Xn!==0||ra!==0)&&(C.translate(Xn,ra,{snapped:!0,restrict:this.graph.hook.getRestrictArea(y)}),Bn&&(Bn+=Xn),qt&&(qt+=ra)),this.update({verticalLeft:at,verticalTop:Qe,verticalHeight:qt,horizontalTop:Kt,horizontalLeft:Tn,horizontalWidth:Bn})}}},{key:"isIgnored",value:function(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&w.call(this.filterFunction,this.graph,t)}},{key:"update",value:function(e){if(e.horizontalTop){var t=this.graph.localToGraph(new Bt(e.horizontalLeft,e.horizontalTop)),r=this.graph.localToGraph(new Bt(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({d:"M ".concat(t.x,",").concat(t.y," L ").concat(r.x,",").concat(r.y),display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){var o=this.graph.localToGraph(new Bt(e.verticalLeft,e.verticalTop)),c=this.graph.localToGraph(new Bt(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({d:"M ".concat(o.x,",").concat(o.y," L ").concat(c.x,",").concat(c.y),display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}},{key:"resetTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"show",value:function(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}},{key:"hide",value:function(){var e=this;this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");var t=this.options.clean,r=typeof t=="number"?t:t!==!1?3e3:0;return r>0&&(this.timer=window.setTimeout(function(){e.container.parentNode!==null&&e.unmount()},r)),this}},{key:"onRemove",value:function(){this.stopListening(),this.hide()}},{key:"dispose",value:function(){this.remove()}}]),i}(so);uS([so.dispose()],K0.prototype,"dispose",null);var cS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},ep=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"init",value:function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}},{key:"startListening",value:function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"stopListening",value:function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"resetUpdates",value:function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}},{key:"onSortModel",value:function(){if(this.model.hasActiveBatch(i.SORT_DELAYING_BATCHES))return;this.sortViews()}},{key:"onModelReseted",value:function(e){var t=e.options;this.removeZPivots(),this.resetViews(this.model.getCells(),t)}},{key:"onBatchStop",value:function(e){var t=e.name,r=e.data;if(this.isFrozen())return;var o=this.model;if(!this.isAsync()){var c=i.UPDATE_DELAYING_BATCHES;c.includes(t)&&!o.hasActiveBatch(c)&&this.updateViews(r)}var p=i.SORT_DELAYING_BATCHES;p.includes(t)&&!o.hasActiveBatch(p)&&this.sortViews()}},{key:"onCellAdded",value:function(e){var t=e.cell,r=e.options,o=r.position;this.isAsync()||typeof o!="number"?this.renderView(t,r):(r.maxPosition===o&&this.freeze({key:"addCells"}),this.renderView(t,r),o===0&&this.unfreeze({key:"addCells"}))}},{key:"onCellRemoved",value:function(e){var t=e.cell,r=e.options,o=this.findViewByCell(t);o&&this.requestViewUpdate(o,i.FLAG_REMOVE,o.priority,r)}},{key:"onCellZIndexChanged",value:function(e){var t=e.cell,r=e.options;if(this.options.sorting==="approx"){var o=this.findViewByCell(t);o&&this.requestViewUpdate(o,i.FLAG_INSERT,o.priority,r)}}},{key:"onCellVisibleChanged",value:function(e){var t=e.cell,r=e.current,o=e.options;r||this.processEdgeOnTerminalVisibleChanged(t,!1);var c=this.findViewByCell(t);!r&&c?this.removeView(t):r&&c==null&&this.renderView(t,o),r&&this.processEdgeOnTerminalVisibleChanged(t,!0)}},{key:"processEdgeOnTerminalVisibleChanged",value:function(e,t){var r=function(c,p){var y=c.getSourceCellId();if(y!==p.id)return c.getSourceCell();var C=c.getTargetCellId();return C!==p.id?c.getTargetCell():null};this.model.getConnectedEdges(e).forEach(function(o){var c=r(o,e);(c==null||c.isVisible())&&(t?o.show():o.hide())})}},{key:"isEdgeTerminalVisible",value:function(e,t){var r=t==="source"?e.getSourceCellId():e.getTargetCellId(),o=r?this.model.getCell(r):null;return!(o&&!o.isVisible())}},{key:"requestConnectedEdgesUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ss.isCellView(e))for(var r=e.cell,o=this.model.getConnectedEdges(r),c=0,p=o.length;c<p;c+=1){var y=o[c],C=this.findViewByCell(y);if(!C)continue;var S=["update"];y.getTargetCell()===r&&S.push("target"),y.getSourceCell()===r&&S.push("source"),this.scheduleViewUpdate(C,C.getFlag(S),C.priority,t)}}},{key:"forcePostponedViewUpdate",value:function(e,t){if(!e||!Ss.isCellView(e))return!1;var r=e.cell;if(r.isNode())return!1;var o=e;if(r.isEdge()&&(t&e.getFlag(["source","target"]))===0){var c=0,p=this.findViewByCell(r.getSourceCell());p&&!this.isViewMounted(p)&&(c=this.dumpView(p),o.updateTerminalMagnet("source"));var y=0,C=this.findViewByCell(r.getTargetCell());if(C&&!this.isViewMounted(C)&&(y=this.dumpView(C),o.updateTerminalMagnet("target")),c===0&&y===0)return!this.dumpView(o)}return!1}},{key:"scheduleViewUpdate",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=e.cid,p=this.updates,y=p.priorities[r];y||(y=p.priorities[r]={});var C=y[c]||0;if((C&t)===t)return;C||(p.count+=1),t&i.FLAG_REMOVE&&C&i.FLAG_INSERT?y[c]^=i.FLAG_INSERT:t&i.FLAG_INSERT&&C&i.FLAG_REMOVE&&(y[c]^=i.FLAG_REMOVE),y[c]|=t,this.graph.hook.onViewUpdated(e,t,o)}},{key:"requestViewUpdate",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.scheduleViewUpdate(e,t,r,o);var c=this.isAsync();if(this.isFrozen()||c&&o.async!==!1||this.model.hasActiveBatch(i.UPDATE_DELAYING_BATCHES))return;var p=this.updateViews(o);c&&this.graph.trigger("render:done",{stats:p,options:o})}},{key:"dumpView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return 0;var r=e.cid,o=this.updates,c=o.priorities[e.priority],p=this.registerMountedView(e)|c[r];return delete c[r],p?this.updateView(e,p,t):0}},{key:"dumpViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.checkView(e),this.updateViews(e)}},{key:"requireView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.findViewByCell(e);return r==null?null:(this.dumpView(r,t),r)}},{key:"updateView",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e==null)return 0;if(Ss.isCellView(e)){if(t&i.FLAG_REMOVE)return this.removeView(e.cell),0;t&i.FLAG_INSERT&&(this.insertView(e),t^=i.FLAG_INSERT)}return t?e.confirmUpdate(t,r):0}},{key:"updateViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t,r=0,o=0,c=i.MIN_PRIORITY;do t=this.updateViewsBatch(e),r+=1,o+=t.updatedCount,c=Math.min(t.priority,c);while(!t.empty);return{priority:c,batchCount:r,updatedCount:o}}},{key:"updateViewsBatch",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.updates,r=t.priorities,o=e.batchSize||i.UPDATE_BATCH_SIZE,c=!0,p=i.MIN_PRIORITY,y=0,C=0,S=0,I=0,W=e.checkView||this.options.checkView;typeof W!="function"&&(W=null);e:for(var q=0,ie=r.length;q<ie;q+=1){var ve=r[q];for(var Le in ve){if(S>=o){c=!1;break e}var Oe=so.views[Le];if(!Oe){delete ve[Le];continue}var it=ve[Le];if((it&i.FLAG_REMOVE)===0){var at=Le in t.unmounted;if(W&&!w.call(W,this.graph,{view:Oe,unmounted:at})){at||(this.registerUnmountedView(Oe),Oe.unmount()),t.unmounted[Le]|=it,delete ve[Le],C+=1;continue}at&&(it|=i.FLAG_INSERT,y+=1),it|=this.registerMountedView(Oe)}var Qe=Oe,qt=this.updateView(Oe,it,e);if(qt>0){var Kt=Qe.cell;Kt&&Kt.isEdge()&&(Qe.hasAction(qt,"source")&&!this.isEdgeTerminalVisible(Kt,"source")&&(qt=Qe.removeAction(qt,"source"),qt|=i.FLAG_REMOVE),Qe.hasAction(qt,"target")&&!this.isEdgeTerminalVisible(Kt,"target")&&(qt=Qe.removeAction(qt,"target"),qt|=i.FLAG_REMOVE))}if(qt>0&&(ve[Le]=qt,!this.graph.hook.onViewPostponed(Qe,qt,e)||ve[Le])){I+=1,c=!1;continue}p>q&&(p=q),S+=1,delete ve[Le]}}return{empty:c,priority:p,mountedCount:y,unmountedCount:C,updatedCount:S,postponedCount:I}}},{key:"updateViewsAsync",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{processed:0,priority:i.MIN_PRIORITY},o=this.updates,c=o.animationId;if(c){if(O.cancelAnimationFrame(c),r.processed===0){var p=t.before;typeof p=="function"&&w.call(p,this.graph,this.graph)}var y=this.updateViewsBatch(t),C=this.checkViewImpl({checkView:t.checkView,mountedBatchSize:i.MOUNT_BATCH_SIZE-y.mountedCount,unmountedBatchSize:i.MOUNT_BATCH_SIZE-y.unmountedCount}),S=r.processed,I=o.count,W=C.mountedCount,q=C.unmountedCount;y.updatedCount>0&&(S+=y.updatedCount+y.unmountedCount,r.priority=Math.min(y.priority,r.priority),y.empty&&W===0?(y.priority=r.priority,y.mountedCount+=W,y.unmountedCount+=q,this.graph.trigger("render:done",{stats:y,options:t}),r.processed=0,o.count=0):r.processed=S);var ie=t.progress;if(I&&typeof ie=="function"&&w.call(ie,this.graph,{total:I,done:y.empty,current:S}),o.animationId!==c)return}o.animationId=O.requestAnimationFrame(function(){e.updateViewsAsync(t,r)})}},{key:"registerMountedView",value:function(e){var t=e.cid,r=this.updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var o=r.unmounted[t]||0;return delete r.unmounted[t],o}},{key:"registerUnmountedView",value:function(e){var t=e.cid,r=this.updates;if(t in r.unmounted)return 0;r.unmounted[t]|=i.FLAG_INSERT;var o=r.unmounted[t];return r.unmountedCids.push(t),delete r.mounted[t],o}},{key:"isViewMounted",value:function(e){if(e==null)return!1;var t=e.cid;return t in this.updates.mounted}},{key:"getMountedViews",value:function(){return Object.keys(this.updates.mounted).map(function(e){return Ss.views[e]})}},{key:"getUnmountedViews",value:function(){return Object.keys(this.updates.unmounted).map(function(e){return Ss.views[e]})}},{key:"checkMountedViews",value:function(e,t){var r=0;if(typeof e!="function")return r;for(var o=this.updates,c=o.mounted,p=o.mountedCids,y=t==null?p.length:Math.min(p.length,t),C=0;C<y;C+=1){var S=p[C];if(!(S in c))continue;var I=Ss.views[S];if(I==null)continue;var W=w.call(e,this.graph,{view:I,unmounted:!0});if(W){p.push(S);continue}r+=1;var q=this.registerUnmountedView(I);q&&I.unmount()}return p.splice(0,y),r}},{key:"checkUnmountedViews",value:function(e,t){var r=0;typeof e!="function"&&(e=null);for(var o=this.updates,c=o.unmounted,p=o.unmountedCids,y=t==null?p.length:Math.min(p.length,t),C=0;C<y;C+=1){var S=p[C];if(!(S in c))continue;var I=Ss.views[S];if(I==null)continue;if(e&&!w.call(e,this.graph,{view:I,unmounted:!1})){p.push(S);continue}r+=1;var W=this.registerMountedView(I);W&&this.scheduleViewUpdate(I,W,I.priority,{mounting:!0})}return p.splice(0,y),r}},{key:"checkViewImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER},t=e.checkView||this.options.checkView,r=this.checkMountedViews(t,e.unmountedBatchSize),o=this.checkUnmountedViews(t,r>0?Math.min(this.updates.unmountedCids.length-r,e.mountedBatchSize):e.mountedBatchSize);return{mountedCount:o,unmountedCount:r}}},{key:"checkView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.checkViewImpl(e)}},{key:"isFrozen",value:function(){return!!this.options.frozen}},{key:"freeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.key,r=this.updates,o=this.options.frozen,c=r.freezeKey;if(t&&t!==c){if(o&&c)return;r.frozen=o,r.freezeKey=t}this.options.frozen=!0;var p=r.animationId;r.animationId=null,this.isAsync()&&p!=null&&O.cancelAnimationFrame(p),this.graph.trigger("freeze",{key:t})}},{key:"unfreeze",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.key,o=this.updates,c=o.freezeKey;if(r&&c&&r!==c)return;if(o.freezeKey=null,r&&r===c&&o.frozen)return;var p=function(){e.options.frozen=o.frozen=!1,o.sort&&(e.sortViews(),o.sort=!1);var S=t.after;S&&w.call(S,e.graph,e.graph),e.graph.trigger("unfreeze",{key:r})};if(this.isAsync()){this.freeze();var y=t.progress;this.updateViewsAsync(Object.assign(Object.assign({},t),{progress:function(S){var I=S.done,W=S.current,q=S.total;y&&w.call(y,e.graph,{done:I,current:W,total:q}),I&&p()}}))}else this.updateViews(t),p()}},{key:"isAsync",value:function(){return!!this.options.async}},{key:"setAsync",value:function(e){this.options.async=e}},{key:"onRemove",value:function(){this.freeze(),this.removeViews()}},{key:"resetViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var r=0,o=e.length;r<o;r+=1)this.renderView(e[r],t);this.unfreeze({key:"reset"}),this.sortViews()}},{key:"removeView",value:function(e){var t=this.views[e.id];if(t){var r=t.cid,o=this.updates,c=o.mounted,p=o.unmounted;t.remove(),delete this.views[e.id],delete c[r],delete p[r]}return t}},{key:"removeViews",value:function(){var e=this;this.views&&Object.keys(this.views).forEach(function(t){var r=e.views[t];r&&e.removeView(r.cell)}),this.views={}}},{key:"renderView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.id,o=this.views,c=0,p=o[r];if(!e.isVisible())return;if(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))return;if(p)c=i.FLAG_INSERT;else{var y=this.graph.hook.createCellView(e);y&&(p=o[e.id]=y,p.graph=this.graph,c=this.registerUnmountedView(p)|p.getBootstrapFlag())}p&&this.requestViewUpdate(p,c,p.priority,t)}},{key:"isExactSorting",value:function(){return this.options.sorting==="exact"}},{key:"sortViews",value:function(){if(!this.isExactSorting())return;if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}},{key:"sortElements",value:function(e,t){var r=e.map(function(o){var c=o.parentNode,p=c.insertBefore(document.createTextNode(""),o.nextSibling);return function(y){if(c===y)throw new Error("You can't sort elements if any one is a descendant of another.");c.insertBefore(y,p),c.removeChild(p)}});e.sort(t).forEach(function(o,c){return r[c](o)})}},{key:"sortViewsExact",value:function(){var e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,function(r,o){var c=t.getCell(r.getAttribute("data-cell-id")||""),p=t.getCell(o.getAttribute("data-cell-id")||""),y=c.getZIndex()||0,C=p.getZIndex()||0;return y===C?0:y<C?-1:1})}},{key:"addZPivot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zPivots==null&&(this.zPivots={});var t=this.zPivots,r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:".concat(e+1));var o=-Infinity;for(var c in t){var p=+c;if(p<e&&p>o&&(o=p,o===e-1))continue}var y=this.view.stage;if(o!==-Infinity){var C=t[o];y.insertBefore(r,C.nextSibling)}else y.insertBefore(r,y.firstChild);return r}},{key:"removeZPivots",value:function(){var e=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(t){var r=e.zPivots[t];r&&r.parentNode&&r.parentNode.removeChild(r)}),this.zPivots={}}},{key:"insertView",value:function(e){var t=this.view.stage;switch(this.options.sorting){case"approx":{var r=e.cell.getZIndex(),o=this.addZPivot(r);t.insertBefore(e.container,o);break}case"exact":default:t.appendChild(e.container);break}}},{key:"findViewByCell",value:function(e){if(e==null)return null;var t=no.isCell(e)?e.id:e;return this.views[t]}},{key:"findViewByElem",value:function(e){if(e==null)return null;var t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){var r=this.view.findAttr("data-cell-id",t);if(r)return this.views[r]}return null}},{key:"findViewsFromPoint",value:function(e){var t=this,r={x:e.x,y:e.y};return this.model.getCells().map(function(o){return t.findViewByCell(o)}).filter(function(o){return o!=null?O.getBBox(o.container,{target:t.view.stage}).containsPoint(r):!1})}},{key:"findEdgeViewsInArea",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=qr.create(e);return this.model.getEdges().map(function(c){return t.findViewByCell(c)}).filter(function(c){if(c){var p=O.getBBox(c.container,{target:t.view.stage});return p.width===0?p.inflate(1,0):p.height===0&&p.inflate(0,1),r.strict?o.containsRect(p):o.isIntersectWithRect(p)}return!1})}},{key:"findViewsInArea",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=qr.create(e);return this.model.getNodes().map(function(c){return t.findViewByCell(c)}).filter(function(c){if(c){var p=O.getBBox(c.container,{target:t.view.stage});return r.strict?o.containsRect(p):o.isIntersectWithRect(p)}return!1})}},{key:"dispose",value:function(){this.resetUpdates(),this.stopListening()}}]),i}(xo);cS([xo.dispose()],ep.prototype,"dispose",null),function(a){a.FLAG_INSERT=1<<30,a.FLAG_REMOVE=1<<29,a.MOUNT_BATCH_SIZE=1e3,a.UPDATE_BATCH_SIZE=1e3,a.MIN_PRIORITY=2,a.SORT_DELAYING_BATCHES=["add","to-front","to-back"],a.UPDATE_DELAYING_BATCHES=["translate"]}(ep||(ep={}));var dS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},dm=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"elem",get:function(){return this.view.background}},{key:"init",value:function(){this.startListening(),this.options.background&&this.draw(this.options.background)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"updateBackgroundImage",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.size||"auto auto",r=e.position||"center",o=this.graph.transform.getScale(),c=this.graph.translate();if(typeof r=="object"){var p=c.tx+o.sx*(r.x||0),y=c.ty+o.sy*(r.y||0);r="".concat(p,"px ").concat(y,"px")}typeof t=="object"&&(t=qr.fromSize(t).scale(o.sx,o.sy),t="".concat(t.width,"px ").concat(t.height,"px")),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=r}},{key:"drawBackgroundImage",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}var r=this.optionsCache;if(r&&r.image!==t.image)return;var o,c=t.opacity,p=t.size,y=t.repeat||"no-repeat",C=Xp.registry.get(y);if(typeof C=="function"){var S=t.quality||1;e.width*=S,e.height*=S;var I=C(e,t);if(!(I instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");o=I.toDataURL("image/png"),t.repeat&&y!==t.repeat?y=t.repeat:y="repeat",typeof p=="object"?(p.width*=I.width/e.width,p.height*=I.height/e.height):p===void 0&&(t.size={width:I.width/S,height:I.height/S})}else o=e.src,p===void 0&&(t.size={width:e.width,height:e.height});r!=null&&typeof t.size=="object"&&t.image===r.image&&t.repeat===r.repeat&&t.quality===r.quality&&(r.size=f.clone(t.size));var W=this.elem.style;W.backgroundImage="url(".concat(o,")"),W.backgroundRepeat=y,W.opacity=c==null||c>=1?"":"".concat(c),this.updateBackgroundImage(t)}},{key:"updateBackgroundColor",value:function(e){this.elem.style.backgroundColor=e||""}},{key:"updateBackgroundOptions",value:function(e){this.graph.options.background=e}},{key:"update",value:function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}},{key:"draw",value:function(e){var t=this,r=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(r.color),r.image){this.optionsCache=f.clone(r);var o=document.createElement("img");o.onload=function(){return t.drawBackgroundImage(o,e)},o.setAttribute("crossorigin","anonymous"),o.src=r.image}else this.drawBackgroundImage(null),this.optionsCache=null}},{key:"clear",value:function(){this.draw()}},{key:"dispose",value:function(){this.clear(),this.stopListening()}}]),i}(xo);dS([xo.dispose()],dm.prototype,"dispose",null);var fS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},hS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},fm=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;Object(_r.a)(this,i),e=s.call(this),e.padding={left:0,top:0,right:0,bottom:0},e.options=Ed.getOptions(n);var t=e.graph.transform.getScale();e.sx=t.sx,e.sy=t.sy;var r=e.options.width||e.graph.options.width,o=e.options.height||e.graph.options.height;e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Ed.containerClass)).css({width:r,height:o}),e.options.pageVisible&&e.$container.addClass(e.prefixClassName(Ed.pagedClass)),e.options.className&&e.$container.addClass(e.options.className);var c=e.graph.container;c.parentNode&&e.$container.insertBefore(c);var p=c.getAttribute("style");if(p){var y={},C=p.split(";");C.forEach(function(S){var I=S.trim();if(I){var W=I.split(":");W.length&&(y[W[0].trim()]=W[1]?W[1].trim():"")}}),Object.keys(y).forEach(function(S){if(S==="width"||S==="height")return;c.style[S]="",e.container.style[S]=y[S]})}return e.content=document.createElement("div"),e.$content=e.$(e.content).addClass(e.prefixClassName(Ed.contentClass)).css({width:e.graph.options.width,height:e.graph.options.height}),e.background=document.createElement("div"),e.$background=e.$(e.background).addClass(e.prefixClassName(Ed.backgroundClass)),e.$content.append(e.background),e.options.pageVisible||e.$content.append(e.graph.view.grid),e.$content.append(c),e.$content.appendTo(e.container),e.startListening(),e.options.pageVisible||e.graph.grid.update(),e.backgroundManager=new i.Background(Object(fu.a)(e)),e.options.autoResize||e.update(),e}return Object(Br.a)(i,[{key:"graph",get:function(){return this.options.graph}},{key:"model",get:function(){return this.graph.model}},{key:"startListening",value:function(){var e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}},{key:"stopListening",value:function(){var e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}},{key:"enableAutoResize",value:function(){this.options.autoResize=!0}},{key:"disableAutoResize",value:function(){this.options.autoResize=!1}},{key:"onUpdate",value:function(){if(this.graph.isAsync()||!this.options.autoResize)return;this.update()}},{key:"onBatchStop",value:function(e){if(this.graph.isAsync()||!this.options.autoResize)return;ep.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}},{key:"delegateBackgroundEvents",value:function(e){var t=this,r=e||Nh.events;this.delegatedHandlers=Object.keys(r).reduce(function(o,c){var p=r[c];if(c.indexOf(" ")===-1)if(typeof p=="function")o[c]=p;else{var y=t.graph.view[p];typeof y=="function"&&(y=y.bind(t.graph.view),o[c]=y)}return o},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(o){t.delegateEvent(o,{guarded:!1},t.onBackgroundEvent)})}},{key:"undelegateBackgroundEvents",value:function(){var e=this;Object.keys(this.delegatedHandlers).forEach(function(t){e.undelegateEvent(t,e.onBackgroundEvent)})}},{key:"onBackgroundEvent",value:function(e){var t=!1,r=e.target;if(this.options.pageVisible)this.options.background?t=this.background===r:t=this.content===r;else{var o=this.graph.view;t=o.background===r||o.grid===r}if(t){var c=this.delegatedHandlers[e.type];typeof c=="function"&&c.apply(this.graph,arguments)}}},{key:"onRenderDone",value:function(e){var t=e.stats;this.options.autoResize&&t.priority<2&&this.update()}},{key:"onResize",value:function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}},{key:"onScale",value:function(e){var t=e.sx,r=e.sy,o=e.ox,c=e.oy;this.updateScale(t,r),(o||c)&&(this.centerPoint(o,c),this.updatePageBreak());var p=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof p=="function"&&this.update()}},{key:"storeScrollPosition",value:function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}},{key:"restoreScrollPosition",value:function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}},{key:"storeClientSize",value:function(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"restoreClientSize",value:function(){this.cachedClientSize=null}},{key:"beforeManipulation",value:function(){(Ue.IS_IE||Ue.IS_EDGE)&&this.$container.css("visibility","hidden")}},{key:"afterManipulation",value:function(){(Ue.IS_IE||Ue.IS_EDGE)&&this.$container.css("visibility","visible")}},{key:"updatePageSize",value:function(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}},{key:"updatePageBreak",value:function(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){var e=this.graph.options.width,t=this.graph.options.height,r=this.options.pageWidth*this.sx,o=this.options.pageHeight*this.sy;if(e>r||t>o){for(var c=!1,p=document.createElement("div"),y=1,C=Math.floor(e/r);y<C;y+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:y*r}).appendTo(p),c=!0;for(var S=1,I=Math.floor(t/o);S<I;S+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:S*o}).appendTo(p),c=!0;c&&(O.addClass(p,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(p),this.pageBreak=p)}}}},{key:"update",value:function(){var e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);var t=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof t=="function"&&(t=w.call(t,this,this));var r=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},t);this.graph.fitToContent(this.getFitToContentOptions(r))}},{key:"getFitToContentOptions",value:function(e){var t=this.sx,r=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=r),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=r),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*r,bottom:(e.padding.bottom||0)*r}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=qr.create()),e}},{key:"updateScale",value:function(e,t){var r=this.graph.options,o=e/this.sx,c=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(r.x*o,r.y*c),this.graph.resizeGraph(r.width*o,r.height*c)}},{key:"scrollbarPosition",value:function(e,t,r){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};var o={};return typeof e=="number"&&(o.scrollLeft=e),typeof t=="number"&&(o.scrollTop=t),r&&r.animation?this.$container.animate(o,r.animation):this.$container.prop(o),this}},{key:"scrollToPoint",value:function(e,t,r){var o=this.getClientSize(),c=this.graph.matrix(),p={};return typeof e=="number"&&(p.scrollLeft=e-o.width/2+c.e+(this.padding.left||0)),typeof t=="number"&&(p.scrollTop=t-o.height/2+c.f+(this.padding.top||0)),r&&r.animation?this.$container.animate(p,r.animation):this.$container.prop(p),this}},{key:"scrollToContent",value:function(e){var t=this.sx,r=this.sy,o=this.graph.getContentArea().getCenter();return this.scrollToPoint(o.x*t,o.y*r,e)}},{key:"scrollToCell",value:function(e,t){var r=this.sx,o=this.sy,c=e.getBBox().getCenter();return this.scrollToPoint(c.x*r,c.y*o,t)}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,r){var o=this.graph.matrix(),c=o.a,p=o.d,y=-o.e,C=-o.f,S=y+this.graph.options.width,I=C+this.graph.options.height,W;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){W=r;var q=this.getVisibleArea().getCenter();typeof e=="number"?e*=c:e=q.x,typeof t=="number"?t*=p:t=q.y}else W=e,e=(y+S)/2,t=(C+I)/2;if(W&&W.padding)return this.positionPoint({x:e,y:t},"50%","50%",W);var ie=this.getPadding(),ve=this.getClientSize(),Le=ve.width/2,Oe=ve.height/2,it=Le-ie.left-e+y,at=Le-ie.right+e-S,Qe=Oe-ie.top-t+C,qt=Oe-ie.bottom+t-I;this.addPadding(Math.max(it,0),Math.max(at,0),Math.max(Qe,0),Math.max(qt,0));var Kt=this.scrollToPoint(e,t,W||void 0);return this.restoreClientSize(),Kt}},{key:"centerContent",value:function(e){return this.positionContent("center",e)}},{key:"centerCell",value:function(e,t){return this.positionCell(e,"center",t)}},{key:"positionContent",value:function(e,t){var r=this.graph.getContentArea(t);return this.positionRect(r,e,t)}},{key:"positionCell",value:function(e,t,r){var o=e.getBBox();return this.positionRect(o,t,r)}},{key:"positionRect",value:function(e,t,r){var o=qr.create(e);switch(t){case"center":return this.positionPoint(o.getCenter(),"50%","50%",r);case"top":return this.positionPoint(o.getTopCenter(),"50%",0,r);case"top-right":return this.positionPoint(o.getTopRight(),"100%",0,r);case"right":return this.positionPoint(o.getRightMiddle(),"100%","50%",r);case"bottom-right":return this.positionPoint(o.getBottomRight(),"100%","100%",r);case"bottom":return this.positionPoint(o.getBottomCenter(),"50%","100%",r);case"bottom-left":return this.positionPoint(o.getBottomLeft(),0,"100%",r);case"left":return this.positionPoint(o.getLeftMiddle(),0,"50%",r);case"top-left":return this.positionPoint(o.getTopLeft(),0,0,r);default:return this}}},{key:"positionPoint",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=o.padding,p=hS(o,["padding"]),y=T.normalizeSides(c),C=qr.fromSize(this.getClientSize()),S=C.clone().moveAndExpand({x:y.left,y:y.top,width:-y.right-y.left,height:-y.top-y.bottom});t=T.normalizePercentage(t,Math.max(0,S.width)),t<0&&(t=S.width+t),r=T.normalizePercentage(r,Math.max(0,S.height)),r<0&&(r=S.height+r);var I=S.getTopLeft().translate(t,r),W=C.getCenter().diff(I),q=this.zoom(),ie=W.scale(1/q,1/q),ve=Bt.create(e).translate(ie);return this.centerPoint(ve.x,ve.y,p)}},{key:"zoom",value:function(e,t){if(e==null)return this.sx;t=t||{};var r,o,c=this.getClientSize(),p=this.clientToLocalPoint(c.width/2,c.height/2),y=e,C=e;if(t.absolute||(y+=this.sx,C+=this.sy),t.scaleGrid&&(y=Math.round(y/t.scaleGrid)*t.scaleGrid,C=Math.round(C/t.scaleGrid)*t.scaleGrid),t.maxScale&&(y=Math.min(t.maxScale,y),C=Math.min(t.maxScale,C)),t.minScale&&(y=Math.max(t.minScale,y),C=Math.max(t.minScale,C)),y=this.graph.transform.clampScale(y),C=this.graph.transform.clampScale(C),t.center){var S=y/this.sx,I=C/this.sy;r=t.center.x-(t.center.x-p.x)/S,o=t.center.y-(t.center.y-p.y)/I}else r=p.x,o=p.y;return this.beforeManipulation(),this.graph.transform.scale(y,C),this.centerPoint(r,o),this.afterManipulation(),this}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=qr.create(e),o=this.graph;t.contentArea=r,t.viewportArea==null&&(t.viewportArea={x:o.options.x,y:o.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),o.transform.scaleContentToFitImpl(t,!1);var c=r.getCenter();return this.centerPoint(c.x,c.y),this.afterManipulation(),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.graph.getContentArea(e),e)}},{key:"transitionToPoint",value:function(e,t,r){var o=this;typeof e=="object"?(r=t,t=e.y,e=e.x):t=t,r==null&&(r={});var c,p,y=this.sx,C=Math.max(r.scale||y,1e-6),S=this.getClientSize(),I=new Bt(e,t),W=this.clientToLocalPoint(S.width/2,S.height/2);if(y===C){var q=W.diff(I).scale(y,y).round();c="translate(".concat(q.x,"px,").concat(q.y,"px)")}else{var ie=C/(y-C)*I.distance(W),ve=W.clone().move(I,ie),Le=this.localToBackgroundPoint(ve).round();c="scale(".concat(C/y,")"),p="".concat(Le.x,"px ").concat(Le.y,"px")}var Oe=r.onTransitionEnd;return this.$container.addClass(Ed.transitionClassName),this.$content.off(Ed.transitionEventName).on(Ed.transitionEventName,function(it){o.syncTransition(C,{x:e,y:t}),typeof Oe=="function"&&w.call(Oe,o,it.originalEvent)}).css({transform:c,transformOrigin:p,transition:"transform",transitionDuration:r.duration||"1s",transitionDelay:r.delay,transitionTimingFunction:r.timing}),this}},{key:"syncTransition",value:function(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}},{key:"removeTransition",value:function(){return this.$container.removeClass(Ed.transitionClassName),this.$content.off(Ed.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=qr.create(e),o=t.maxScale||Infinity,c=t.minScale||Number.MIN_VALUE,p=t.scaleGrid||null,y=t.visibility||1,C=t.center?Bt.create(t.center):r.getCenter(),S=this.getClientSize(),I=S.width*y,W=S.height*y,q=new qr(C.x-I/2,C.y-W/2,I,W).getMaxUniformScaleToFit(r,C);return q=Math.min(q,o),p&&(q=Math.floor(q/p)*p),q=Math.max(c,q),this.transitionToPoint(C,Object.assign({scale:q},t))}},{key:"startPanning",value:function(e){var t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.normalizeEvent(e),r=t.clientX-this.clientX,o=t.clientY-this.clientY;this.container.scrollTop-=o,this.container.scrollLeft-=r,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}},{key:"stopPanning",value:function(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}},{key:"clientToLocalPoint",value:function(e,t){var r=typeof e=="object"?e.x:e,o=typeof e=="object"?e.y:t,c=this.graph.matrix();return r+=this.container.scrollLeft-this.padding.left-c.e,o+=this.container.scrollTop-this.padding.top-c.f,new Bt(r/c.a,o/c.d)}},{key:"localToBackgroundPoint",value:function(e,t){var r=typeof e=="object"?Bt.create(e):new Bt(e,t),o=this.graph.matrix(),c=this.padding;return O.transformPoint(r,o).translate(c.left,c.top)}},{key:"resize",value:function(e,t){var r=e??this.container.offsetWidth,o=t??this.container.offsetHeight;typeof r=="number"&&(r=Math.round(r)),typeof o=="number"&&(o=Math.round(o)),this.options.width=r,this.options.height=o,this.$container.css({width:r,height:o}),this.update()}},{key:"getClientSize",value:function(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"autoScroll",value:function(e,t){var r=10,o=this.container,c=o.getBoundingClientRect(),p=0,y=0;return e<=c.left+r&&(p=-r),t<=c.top+r&&(y=-r),e>=c.right-r&&(p=r),t>=c.bottom-r&&(y=r),p!==0&&(o.scrollLeft+=p),y!==0&&(o.scrollTop+=y),{scrollerX:p,scrollerY:y}}},{key:"addPadding",value:function(e,t,r,o){var c=this.getPadding();this.padding={left:Math.round(c.left+(e||0)),top:Math.round(c.top+(r||0)),bottom:Math.round(c.bottom+(o||0)),right:Math.round(c.right+(t||0))},c=this.padding,this.$content.css({width:c.left+this.graph.options.width+c.right,height:c.top+this.graph.options.height+c.bottom});var p=this.graph.container;return p.style.left="".concat(this.padding.left,"px"),p.style.top="".concat(this.padding.top,"px"),this}},{key:"getPadding",value:function(){var e=this.options.padding;return typeof e=="function"?T.normalizeSides(w.call(e,this,this)):T.normalizeSides(e)}},{key:"getVisibleArea",value:function(){var e=this.graph.matrix(),t=this.getClientSize(),r={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},o=O.transformRectangle(r,e.inverse());return o.x-=(this.padding.left||0)/this.sx,o.y-=(this.padding.top||0)/this.sy,o}},{key:"isCellVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.getBBox(),o=this.getVisibleArea();return t.strict?o.containsRect(r):o.isIntersectWithRect(r)}},{key:"isPointVisible",value:function(e){return this.getVisibleArea().containsPoint(e)}},{key:"lock",value:function(){return this.$container.css("overflow","hidden"),this}},{key:"unlock",value:function(){return this.$container.css("overflow","scroll"),this}},{key:"onRemove",value:function(){this.stopListening()}},{key:"dispose",value:function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}]),i}(so);fS([so.dispose()],fm.prototype,"dispose",null),function(a){var s=function(i){Object(Zr.a)(e,i);var n=Object(Wr.a)(e);function e(t){var r;return Object(_r.a)(this,e),r=n.call(this,t.graph),r.scroller=t,t.options.background&&r.draw(t.options.background),r}return Object(Br.a)(e,[{key:"elem",get:function(){return this.scroller.background}},{key:"init",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"updateBackgroundOptions",value:function(r){this.scroller.options.background=r}}]),e}(dm);a.Background=s}(fm||(fm={}));var Ed;(function(a){a.containerClass="graph-scroller",a.panningClass="".concat(a.containerClass,"-panning"),a.pannableClass="".concat(a.containerClass,"-pannable"),a.pagedClass="".concat(a.containerClass,"-paged"),a.contentClass="".concat(a.containerClass,"-content"),a.backgroundClass="".concat(a.containerClass,"-background"),a.transitionClassName="transition-in-progress",a.transitionEventName="transitionend.graph-scroller-transition",a.defaultOptions={padding:function(){var n=this.getClientSize(),e=Math.max(this.options.minVisibleWidth||0,1)||1,t=Math.max(this.options.minVisibleHeight||0,1)||1,r=Math.max(n.width-e,0),o=Math.max(n.height-t,0);return{left:r,top:o,right:r,bottom:o}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function s(i){var n=f.merge({},a.defaultOptions,i);return n.pageWidth==null&&(n.pageWidth=i.graph.options.width),n.pageHeight==null&&(n.pageHeight=i.graph.options.height),n}a.getOptions=s})(Ed||(Ed={}));function hu(a,s,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(i){var e=i.graph,t=e.view.normalizeEvent(s),r=e.snapToGrid(t.clientX,t.clientY);i.notify(a,Object.assign({e:t,view:i,node:i.cell,cell:i.cell,x:r.x,y:r.y},n))}}var pS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},Ag=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;return Object(_r.a)(this,i),e=s.call(this),e.options=f.merge({},Ql.defaultOptions,n),e.options.model&&(e.options.collection=e.options.model.collection),e.options.collection?e.collection=e.options.collection:(e.collection=new G0([],{comparator:Ql.depthComparator}),e.options.collection=e.collection),e.boxCount=0,e.createContainer(),e.initHandles(),e.startListening(),e}return Object(Br.a)(i,[{key:"graph",get:function(){return this.options.graph}},{key:"boxClassName",get:function(){return this.prefixClassName(Ql.classNames.box)}},{key:"$boxes",get:function(){return this.$container.children(".".concat(this.boxClassName))}},{key:"handleOptions",get:function(){return this.options}},{key:"startListening",value:function(){var e,t=this.graph,r=this.collection;this.delegateEvents((e={},Z(e,"mousedown .".concat(this.boxClassName),"onSelectionBoxMouseDown"),Z(e,"touchstart .".concat(this.boxClassName),"onSelectionBoxMouseDown"),e),!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),r.on("added",this.onCellAdded,this),r.on("removed",this.onCellRemoved,this),r.on("reseted",this.onReseted,this),r.on("updated",this.onCollectionUpdated,this),r.on("node:change:position",this.onNodePositionChanged,this),r.on("cell:changed",this.onCellChanged,this)}},{key:"stopListening",value:function(){var e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}},{key:"onRemove",value:function(){this.stopListening()}},{key:"onGraphTransformed",value:function(){this.updateSelectionBoxes({async:!1})}},{key:"onCellChanged",value:function(){this.updateSelectionBoxes()}},{key:"onNodePositionChanged",value:function(e){var t=e.node,r=e.options,o=this.options,c=o.showNodeSelectionBox,p=o.pointerEvents,y=r.ui,C=r.selection,S=r.translateBy,I=!this.translating;if(I=I&&(c!==!0||p==="none"),I=I&&y&&!C,I=I&&S&&t.id===S,I){this.translating=!0;var W=t.position(),q=t.previous("position"),ie=W.x-q.x,ve=W.y-q.y;(ie!==0||ve!==0)&&this.translateSelectedNodes(ie,ve,t,r),this.translating=!1}}},{key:"onModelUpdated",value:function(e){var t=e.removed;t&&t.length&&this.unselect(t)}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.collection.has(e)}},{key:"length",get:function(){return this.collection.length}},{key:"cells",get:function(){return this.collection.toArray()}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.dryrun=!0;var r=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(r,t),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e){if(t.batch){var r=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(r,Object.assign(Object.assign({},t),{ui:!0})),this}var o=this.cells,c=this.filter(Array.isArray(e)?e:[e]),p={},y={};o.forEach(function(I){return p[I.id]=I}),c.forEach(function(I){return y[I.id]=I});var C=[],S=[];return c.forEach(function(I){p[I.id]||C.push(I)}),o.forEach(function(I){y[I.id]||S.push(I)}),S.length&&this.unselect(S,Object.assign(Object.assign({},t),{ui:!0})),C.length&&this.select(C,Object.assign(Object.assign({},t),{ui:!0})),S.length===0&&C.length===0&&this.updateContainer(),this}return this.clean(t)}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}},{key:"setFilter",value:function(e){this.options.filter=e}},{key:"setContent",value:function(e){this.options.content=e}},{key:"startSelecting",value:function(e){e=this.normalizeEvent(e),this.clean();var t,r,o=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&o.contains(e.target))t=e.offsetX,r=e.offsetY;else{var c=this.$(o).offset(),p=o.scrollLeft,y=o.scrollTop;t=e.clientX-c.left+window.pageXOffset+p,r=e.clientY-c.top+window.pageYOffset+y}this.$container.css({top:r,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:r,scrollerX:0,scrollerY:0}),this.delegateDocumentEvents(Ql.documentEvents,e.data)}},{key:"filter",value:function(e){var t=this,r=this.options.filter;return Array.isArray(r)?e.filter(function(o){return!r.includes(o)&&!r.includes(o.shape)}):typeof r=="function"?e.filter(function(o){return w.call(r,t.graph,o)}):e}},{key:"stopSelecting",value:function(e){var t=this.graph,r=this.getEventData(e),o=r.action;switch(o){case"selecting":{var c=this.$container.width(),p=this.$container.height(),y=this.$container.offset(),C=t.pageToLocal(y.left,y.top),S=t.transform.getScale();c/=S.sx,p/=S.sy;var I=new qr(C.x,C.y,c,p),W=this.getCellViewsInArea(I).map(function(ve){return ve.cell});this.reset(W,{batch:!0}),this.hideRubberband();break}case"translating":{var q=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){var ie=r;this.updateSelectedNodesPosition({dx:ie.clientX-ie.originX,dy:ie.clientY-ie.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,q.x,q.y);break}default:{this.clean();break}}}},{key:"onMouseUp",value:function(e){var t=this.getEventData(e).action;t&&(this.stopSelecting(e),this.undelegateDocumentEvents())}},{key:"onSelectionBoxMouseDown",value:function(e){this.options.following||e.stopPropagation();var t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);var r=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:r});var o=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,o.x,o.y),this.delegateDocumentEvents(Ql.documentEvents,t.data)}},{key:"startTranslating",value:function(e){this.graph.model.startBatch("move-selection");var t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}},{key:"getSelectionOffset",value:function(e,t){var r=e.x-t.clientX,o=e.y-t.clientY,c=this.graph.hook.getRestrictArea();if(c){var p=this.collection.toArray(),y=no.getCellsBBox(p,{deep:!0})||qr.create(),C=c.x-y.x,S=c.y-y.y,I=c.x+c.width-(y.x+y.width),W=c.y+c.height-(y.y+y.height);if(r<C&&(r=C),o<S&&(o=S),I<r&&(r=I),W<o&&(o=W),!this.options.following){var q=e.x-t.originX,ie=e.y-t.originY;r=q<=C||q>=I?0:r,o=ie<=S||ie>=W?0:o}}return{dx:r,dy:o}}},{key:"updateSelectedNodesPosition",value:function(e){var t=e.dx,r=e.dy;if(t||r)if(this.translateSelectedNodes(t,r),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{var o=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+=".concat(t*o.sx),top:"+=".concat(r*o.sy)})}}},{key:"autoScrollGraph",value:function(e,t){var r=this.graph.scroller.widget;return r?r.autoScroll(e,t):{scrollerX:0,scrollerY:0}}},{key:"adjustSelection",value:function(e){var t=this.normalizeEvent(e),r=this.getEventData(t),o=r.action;switch(o){case"selecting":{var c=r;c.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),c.moving=!0);var p=this.autoScrollGraph(t.clientX,t.clientY),y=p.scrollerX,C=p.scrollerY;c.scrollerX+=y,c.scrollerY+=C;var S=t.clientX-c.clientX+c.scrollerX,I=t.clientY-c.clientY+c.scrollerY,W=parseInt(this.$container.css("left"),10),q=parseInt(this.$container.css("top"),10);this.$container.css({left:S<0?c.offsetX+S:W,top:I<0?c.offsetY+I:q,width:Math.abs(S),height:Math.abs(I)});break}case"translating":{var ie=this.graph.snapToGrid(t.clientX,t.clientY),ve=r,Le=this.getSelectionOffset(ie,ve);this.options.following?this.updateSelectedNodesPosition(Le):this.updateContainerPosition(Le),Le.dx&&(ve.clientX=ie.x),Le.dy&&(ve.clientY=ie.y),this.notifyBoxEvent("box:mousemove",e,ie.x,ie.y);break}default:break}this.boxesUpdated=!1}},{key:"translateSelectedNodes",value:function(e,t,r,o){var c=this,p={},y=[];if(r&&(p[r.id]=!0),this.collection.toArray().forEach(function(S){S.getDescendants({deep:!0}).forEach(function(I){p[I.id]=!0})}),o&&o.translateBy){var C=this.graph.getCellById(o.translateBy);C&&(p[C.id]=!0,C.getDescendants({deep:!0}).forEach(function(S){p[S.id]=!0}),y.push(C))}this.collection.toArray().forEach(function(S){if(!p[S.id]){var I=Object.assign(Object.assign({},o),{selection:c.cid,exclude:y});S.translate(e,t,I),c.graph.model.getConnectedEdges(S).forEach(function(W){p[W.id]||(W.translate(e,t,I),p[W.id]=!0)})}})}},{key:"getCellViewsInArea",value:function(e){var t=this.graph,r={strict:this.options.strict},o=[];return this.options.rubberNode&&(this.options.useCellGeometry?o=o.concat(t.model.getNodesInArea(e,r).map(function(c){return t.renderer.findViewByCell(c)}).filter(function(c){return c!=null})):o=o.concat(t.renderer.findViewsInArea(e,r))),this.options.rubberEdge&&(this.options.useCellGeometry?o=o.concat(t.model.getEdgesInArea(e,r).map(function(c){return t.renderer.findViewByCell(c)}).filter(function(c){return c!=null})):o=o.concat(t.renderer.findEdgeViewsInArea(e,r))),o}},{key:"notifyBoxEvent",value:function(e,t,r,o){var c=this.getEventData(t),p=c.activeView;this.trigger(e,{e:t,view:p,x:r,y:o,cell:p.cell})}},{key:"getSelectedClassName",value:function(e){return this.prefixClassName("".concat(e.isNode()?"node":"edge","-selected"))}},{key:"addCellSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}},{key:"removeCellUnSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}},{key:"destroySelectionBox",value:function(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find('[data-cell-id="'.concat(e.id,'"]')).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}},{key:"destroyAllSelectionBoxes",value:function(e){var t=this;e.forEach(function(r){return t.removeCellUnSelectedClassName(r)}),this.hide(),this.$boxes.remove(),this.boxCount=0}},{key:"hide",value:function(){this.$container.removeClass(this.prefixClassName(Ql.classNames.rubberband)).removeClass(this.prefixClassName(Ql.classNames.selected))}},{key:"showRubberband",value:function(){this.$container.addClass(this.prefixClassName(Ql.classNames.rubberband))}},{key:"hideRubberband",value:function(){this.$container.removeClass(this.prefixClassName(Ql.classNames.rubberband))}},{key:"showSelected",value:function(){this.$container.removeAttr("style").addClass(this.prefixClassName(Ql.classNames.selected))}},{key:"createContainer",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Ql.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Ql.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Ql.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}},{key:"updateContainerPosition",value:function(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:"+=".concat(e.dx),top:"+=".concat(e.dy)})}},{key:"updateContainer",value:function(){var e=this,t={x:Infinity,y:Infinity},r={x:0,y:0},o=this.collection.toArray().filter(function(y){return e.canShowSelectionBox(y)});o.forEach(function(y){var C=e.graph.renderer.findViewByCell(y);if(C){var S=C.getBBox({useCellGeometry:e.options.useCellGeometry});t.x=Math.min(t.x,S.x),t.y=Math.min(t.y,S.y),r.x=Math.max(r.x,S.x+S.width),r.y=Math.max(r.y,S.y+S.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:r.x-t.x,height:r.y-t.y}).attr("data-selection-length",this.collection.length);var c=this.options.content;if(c)if(typeof c=="function"){var p=w.call(c,this.graph,this,this.$selectionContent[0]);p&&this.$selectionContent.html(p)}else this.$selectionContent.html(c);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"canShowSelectionBox",value:function(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}},{key:"createSelectionBox",value:function(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){var t=this.graph.renderer.findViewByCell(e);if(t){var r=t.getBBox({useCellGeometry:this.options.useCellGeometry}),o=this.boxClassName;this.$("<div/>").addClass(o).addClass("".concat(o,"-").concat(e.isNode()?"node":"edge")).attr("data-cell-id",e.id).css({position:"absolute",left:r.x,top:r.y,width:r.width,height:r.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}},{key:"updateSelectionBoxes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}},{key:"confirmUpdate",value:function(){var e=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(t,r){var o=e.$(r).remove().attr("data-cell-id"),c=e.collection.get(o);c&&e.createSelectionBox(c)}),this.updateContainer()),0}},{key:"getCellViewFromElem",value:function(e){var t=e.getAttribute("data-cell-id");if(t){var r=this.collection.get(t);if(r)return this.graph.renderer.findViewByCell(r)}return null}},{key:"onCellRemoved",value:function(e){var t=e.cell;this.destroySelectionBox(t),this.updateContainer()}},{key:"onReseted",value:function(e){var t=this,r=e.previous,o=e.current;this.destroyAllSelectionBoxes(r),o.forEach(function(c){t.listenCellRemoveEvent(c),t.createSelectionBox(c)}),this.updateContainer()}},{key:"onCellAdded",value:function(e){var t=e.cell;this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}},{key:"listenCellRemoveEvent",value:function(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}},{key:"onCollectionUpdated",value:function(e){var t=this,r=e.added,o=e.removed,c=e.options;r.forEach(function(y){t.trigger("cell:selected",{cell:y,options:c}),t.graph.trigger("cell:selected",{cell:y,options:c}),y.isNode()?(t.trigger("node:selected",{cell:y,options:c,node:y}),t.graph.trigger("node:selected",{cell:y,options:c,node:y})):y.isEdge()&&(t.trigger("edge:selected",{cell:y,options:c,edge:y}),t.graph.trigger("edge:selected",{cell:y,options:c,edge:y}))}),o.forEach(function(y){t.trigger("cell:unselected",{cell:y,options:c}),t.graph.trigger("cell:unselected",{cell:y,options:c}),y.isNode()?(t.trigger("node:unselected",{cell:y,options:c,node:y}),t.graph.trigger("node:unselected",{cell:y,options:c,node:y})):y.isEdge()&&(t.trigger("edge:unselected",{cell:y,options:c,edge:y}),t.graph.trigger("edge:unselected",{cell:y,options:c,edge:y}))});var p={added:r,removed:o,options:c,selected:this.cells};this.trigger("selection:changed",p),this.graph.trigger("selection:changed",p)}},{key:"deleteSelectedCells",value:function(){var e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}},{key:"startRotate",value:function(e){var t=e.e,r=this.collection.toArray(),o=no.getCellsBBox(r).getCenter(),c=this.graph.snapToGrid(t.clientX,t.clientY),p=r.reduce(function(y,C){return y[C.id]=Pi.normalize(C.getAngle()),y},{});this.setEventData(t,{center:o,angles:p,start:c.theta(o)})}},{key:"doRotate",value:function(e){var t=this,r=e.e,o=this.getEventData(r),c=this.graph.options.rotating.grid,p=typeof c=="function"?w.call(c,this.graph,null):c,y=this.graph.snapToGrid(r.clientX,r.clientY),C=o.start-y.theta(o.center);o.rotated||(o.rotated=!0),Math.abs(C)>.001&&(this.collection.toArray().forEach(function(S){var I=zs.snapToGrid(o.angles[S.id]+C,p||15);S.rotate(I,{absolute:!0,center:o.center,selection:t.cid})}),this.updateSelectionBoxes())}},{key:"stopRotate",value:function(e){var t=this,r=e.e,o=this.getEventData(r);o.rotated&&(o.rotated=!1,this.collection.toArray().forEach(function(c){hu("node:rotated",r,t.graph.findViewByCell(c))}))}},{key:"startResize",value:function(e){var t=e.e,r=this.graph.getGridSize(),o=this.collection.toArray(),c=no.getCellsBBox(o),p=o.map(function(S){return S.getBBox()}),y=p.reduce(function(S,I){return I.width<S?I.width:S},Infinity),C=p.reduce(function(S,I){return I.height<S?I.height:S},Infinity);this.setEventData(t,{bbox:c,cells:this.graph.model.getSubGraph(o),minWidth:r*c.width/y,minHeight:r*c.height/C})}},{key:"doResize",value:function(e){var t=e.e,r=e.dx,o=e.dy,c=this.eventData(t),p=c.bbox,y=p.width,C=p.height,S=Math.max(y+r,c.minWidth),I=Math.max(C+o,c.minHeight);c.resized||(c.resized=!0),(Math.abs(y-S)>.001||Math.abs(C-I)>.001)&&(this.graph.model.resizeCells(S,I,c.cells,{selection:this.cid}),p.width=S,p.height=I,this.updateSelectionBoxes())}},{key:"stopResize",value:function(e){var t=this,r=e.e,o=this.eventData(r);o.resized&&(o.resized=!1,this.collection.toArray().forEach(function(c){hu("node:resized",r,t.graph.findViewByCell(c))}))}},{key:"dispose",value:function(){this.clean(),this.remove()}}]),i}(so);pS([so.dispose()],Ag.prototype,"dispose",null),f.applyMixins(Ag,ev);var Ql;(function(a){var s="widget-selection";a.classNames={root:s,inner:"".concat(s,"-inner"),box:"".concat(s,"-box"),content:"".concat(s,"-content"),rubberband:"".concat(s,"-rubberband"),selected:"".concat(s,"-selected")},a.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},a.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:function(e){return E.template('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:e.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function i(n){return n.getAncestors().length}a.depthComparator=i})(Ql||(Ql={}));var $0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"node",get:function(){return this.cell}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-transform")}},{key:"resizeClassName",get:function(){return"".concat(this.containerClassName,"-resize")}},{key:"rotateClassName",get:function(){return"".concat(this.containerClassName,"-rotate")}},{key:"init",value:function(e){this.options=Object.assign(Object.assign({},Pu.defaultOptions),e),this.render(),this.startListening()}},{key:"startListening",value:function(){var e;this.delegateEvents((e={},Z(e,"mousedown .".concat(this.resizeClassName),"startResizing"),Z(e,"touchstart .".concat(this.resizeClassName),"startResizing"),Z(e,"mousedown .".concat(this.rotateClassName),"startRotating"),Z(e,"touchstart .".concat(this.rotateClassName),"startRotating"),e)),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),ni(Object(ui.a)(i.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),ni(Object(ui.a)(i.prototype),"stopListening",this).call(this)}},{key:"renderHandles",value:function(){var e=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var t=this.$("<div/>").prop("draggable",!1),r=t.clone().addClass(this.rotateClassName),o=Pu.POSITIONS.map(function(c){return t.clone().addClass(e.resizeClassName).attr("data-position",c)});this.empty(),this.$container.append(o,r)}},{key:"render",value:function(){return this.renderHandles(),this.view.addClass(Pu.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}},{key:"update",value:function(){var e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;var r=Pi.normalize(this.node.getAngle()),o=r!==0?"rotate(".concat(r,"deg)"):"";return this.$container.css({transform:o,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}},{key:"remove",value:function(){return this.view.removeClass(Pu.NODE_CLS),ni(Object(ui.a)(i.prototype),"remove",this).call(this)}},{key:"onKnobMouseDown",value:function(){this.startHandle()}},{key:"onKnobMouseUp",value:function(){this.stopHandle()}},{key:"updateResizerDirections",value:function(){var e=this,t=Pi.normalize(this.node.getAngle()),r=Math.floor(t*(Pu.DIRECTIONS.length/360));if(r!==this.prevShift){var o=Pu.DIRECTIONS.slice(r).concat(Pu.DIRECTIONS.slice(0,r)),c=function(y){return"".concat(e.containerClassName,"-cursor-").concat(y)};this.$container.find(".".concat(this.resizeClassName)).removeClass(Pu.DIRECTIONS.map(function(p){return c(p)}).join(" ")).each(function(p,y){e.$(y).addClass(c(o[p]))}),this.prevShift=r}}},{key:"getTrueDirection",value:function(e){var t=Pi.normalize(this.node.getAngle()),r=Pu.POSITIONS.indexOf(e);return r+=Math.floor(t*(Pu.POSITIONS.length/360)),r%=Pu.POSITIONS.length,Pu.POSITIONS[r]}},{key:"toValidResizeDirection",value:function(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}},{key:"startResizing",value:function(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var t=this.$(e.target).attr("data-position"),r=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),hu("node:resize:mousedown",e,r)}},{key:"prepareResizing",value:function(e,t){var r=this.getTrueDirection(t),o=0,c=0;t.split("-").forEach(function(S){o={left:-1,right:1}[S]||o,c={top:-1,bottom:1}[S]||c});var p=this.toValidResizeDirection(t),y={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[p],C=Pi.normalize(this.node.getAngle());this.setEventData(e,{selector:y,direction:p,trueDirection:r,relativeDirection:t,angle:C,resizeX:o,resizeY:c,action:"resizing"})}},{key:"startRotating",value:function(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var t=this.graph.findViewByCell(this.node),r=this.node.getBBox().getCenter(),o=this.normalizeEvent(e),c=this.graph.snapToGrid(o.clientX,o.clientY);this.setEventData(e,{center:r,action:"rotating",angle:Pi.normalize(this.node.getAngle()),start:Bt.create(c).theta(r)}),this.startAction(e),hu("node:rotate:mousedown",e,t)}},{key:"onMouseMove",value:function(e){var t=this.graph.findViewByCell(this.node),r=this.getEventData(e);if(r.action){var o=this.normalizeEvent(e),c=o.clientX,p=o.clientY,y=this.graph.scroller.widget,C=this.options.restrictedResizing;if(C===!0||typeof C=="number"){var S=C===!0?0:C,I=y?Math.max(S,8):S,W=this.graph.container.getBoundingClientRect();c=T.clamp(c,W.left+I,W.right-I),p=T.clamp(p,W.top+I,W.bottom-I)}else this.options.autoScrollOnResizing&&y&&y.autoScroll(c,p);var q=this.graph.snapToGrid(c,p),ie=this.graph.getGridSize(),ve=this.node,Le=this.options;if(r.action==="resizing"){r=r,r.resized||(t&&(t.addClass("node-resizing"),hu("node:resize",e,t)),r.resized=!0);var Oe=ve.getBBox(),it=Bt.create(q).rotate(r.angle,Oe.getCenter()).diff(Oe[r.selector]),at=r.resizeX?it.x*r.resizeX:Oe.width,Qe=r.resizeY?it.y*r.resizeY:Oe.height,qt=at,Kt=Qe;if(at=zs.snapToGrid(at,ie),Qe=zs.snapToGrid(Qe,ie),at=Math.max(at,Le.minWidth||ie),Qe=Math.max(Qe,Le.minHeight||ie),at=Math.min(at,Le.maxWidth||Infinity),Qe=Math.min(Qe,Le.maxHeight||Infinity),Le.preserveAspectRatio){var Tn=Oe.width*Qe/Oe.height,Bn=Oe.height*at/Oe.width;at<Tn?Qe=Bn:at=Tn}var tr=r.relativeDirection;if(Le.allowReverse&&(qt<=-at||Kt<=-Qe)){var hr;tr==="left"?qt<=-at&&(hr="right"):tr==="right"?qt<=-at&&(hr="left"):tr==="top"?Kt<=-Qe&&(hr="bottom"):tr==="bottom"?Kt<=-Qe&&(hr="top"):tr==="top-left"?qt<=-at&&Kt<=-Qe?hr="bottom-right":qt<=-at?hr="top-right":Kt<=-Qe&&(hr="bottom-left"):tr==="top-right"?qt<=-at&&Kt<=-Qe?hr="bottom-left":qt<=-at?hr="top-left":Kt<=-Qe&&(hr="bottom-right"):tr==="bottom-left"?qt<=-at&&Kt<=-Qe?hr="top-right":qt<=-at?hr="bottom-right":Kt<=-Qe&&(hr="top-left"):tr==="bottom-right"&&(qt<=-at&&Kt<=-Qe?hr="top-left":qt<=-at?hr="bottom-left":Kt<=-Qe&&(hr="top-right"));var Lr=hr;this.stopHandle();var Vr=this.$container.find(".".concat(this.resizeClassName,'[data-position="').concat(Lr,'"]'));this.startHandle(Vr[0]),this.prepareResizing(e,Lr),this.onMouseMove(e)}if(Oe.width!==at||Oe.height!==Qe){var dn={ui:!0,direction:r.direction,relativeDirection:r.relativeDirection,trueDirection:r.trueDirection,minWidth:Le.minWidth,minHeight:Le.minHeight,maxWidth:Le.maxWidth,maxHeight:Le.maxHeight,preserveAspectRatio:Le.preserveAspectRatio===!0};ve.resize(at,Qe,dn),hu("node:resizing",e,t)}hu("node:resize:mousemove",e,t)}else if(r.action==="rotating"){r=r,r.rotated||(t&&(t.addClass("node-rotating"),hu("node:rotate",e,t)),r.rotated=!0);var Xn=ve.getAngle(),ra=r.start-Bt.create(q).theta(r.center),Ea=r.angle+ra;Le.rotateGrid&&(Ea=zs.snapToGrid(Ea,Le.rotateGrid)),Ea=Pi.normalize(Ea),Xn!==Ea&&(ve.rotate(Ea,{absolute:!0}),hu("node:rotating",e,t)),hu("node:rotate:mousemove",e,t)}}}},{key:"onMouseUp",value:function(e){var t=this.graph.findViewByCell(this.node),r=this.getEventData(e);r.action&&(this.stopAction(e),this.model.stopBatch(r.action==="resizing"?"resize":"rotate",{cid:this.cid}),r.action==="resizing"?hu("node:resize:mouseup",e,t):r.action==="rotating"&&hu("node:rotate:mouseup",e,t))}},{key:"startHandle",value:function(e){if(this.handle=e||null,this.$container.addClass("".concat(this.containerClassName,"-active")),e){this.$(e).addClass("".concat(this.containerClassName,"-active-handle"));var t=e.getAttribute("data-position");if(t){var r=Pu.DIRECTIONS[Pu.POSITIONS.indexOf(t)];this.$container.addClass("".concat(this.containerClassName,"-cursor-").concat(r))}}}},{key:"stopHandle",value:function(){if(this.$container.removeClass("".concat(this.containerClassName,"-active")),this.handle){this.$(this.handle).removeClass("".concat(this.containerClassName,"-active-handle"));var e=this.handle.getAttribute("data-position");if(e){var t=Pu.DIRECTIONS[Pu.POSITIONS.indexOf(e)];this.$container.removeClass("".concat(this.containerClassName,"-cursor-").concat(t))}this.handle=null}}},{key:"startAction",value:function(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Pu.documentEvents,e.data)}},{key:"stopAction",value:function(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.graph.findViewByCell(this.node),r=this.getEventData(e);t&&(t.removeClass("node-".concat(r.action)),r.action==="resizing"&&r.resized?hu("node:resized",e,t):r.action==="rotating"&&r.rotated&&hu("node:rotated",e,t))}}]),i}(tv),Pu;(function(a){a.NODE_CLS="has-widget-transform",a.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],a.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],a.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},a.defaultOptions={minWidth:0,minHeight:0,maxWidth:Infinity,maxHeight:Infinity,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(Pu||(Pu={}));var vS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Zd;(function(a){function s(i,n,e){var t={};return Object.keys(e||{}).forEach(function(r){var o=e[r];t[r]=typeof o=="function"?o.call(i,n):o}),t}a.parseOptionGroup=s})(Zd||(Zd={})),function(a){function s(i){var n=i.grid,e=i.panning,t=i.selecting,r=i.embedding,o=i.snapline,c=i.resizing,p=i.rotating,y=i.knob,C=i.clipboard,S=i.history,I=i.scroller,W=i.minimap,q=i.keyboard,ie=i.mousewheel,ve=vS(i,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),Le=i.container;if(Le!=null)ve.width==null&&(ve.width=Le.clientWidth),ve.height==null&&(ve.height=Le.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");var Oe=f.merge({},a.defaults,ve),it={size:10,visible:!1};typeof n=="number"?Oe.grid={size:n,visible:!1}:typeof n=="boolean"?Oe.grid=Object.assign(Object.assign({},it),{visible:n}):Oe.grid=Object.assign(Object.assign({},it),n);var at=["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"];return at.forEach(function(Qe){var qt=i[Qe];typeof qt=="boolean"?Oe[Qe].enabled=qt:Oe[Qe]=Object.assign(Object.assign({},Oe[Qe]),qt)}),Oe.background&&Oe.scroller.enabled&&Oe.scroller.background==null&&(Oe.scroller.background=Oe.background,delete Oe.background),Oe}a.get=s}(Zd||(Zd={})),function(a){a.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:zs.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:zs.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(i){var n=i.type,e=i.sourceView,t=i.targetView,r=n==="target"?t:e;return r!=null},createEdge:function(){return new X0}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}}}(Zd||(Zd={}));var Y0=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Q0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"cid",get:function(){return this.graph.view.cid}},{key:"svg",get:function(){return this.view.svg}},{key:"defs",get:function(){return this.view.defs}},{key:"isDefined",value:function(e){return this.svg.getElementById(e)!=null}},{key:"filter",value:function(e){var t=e.id,r=e.name;if(t||(t="filter-".concat(r,"-").concat(this.cid,"-").concat(E.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var o=vp.registry.get(r);if(o==null)return vp.registry.onNotFound(r);var c=o(e.args||{}),p=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});pi.create(Xi.sanitize(c),p).appendTo(this.defs)}return t}},{key:"gradient",value:function(e){var t=e.id,r=e.type;if(t||(t="gradient-".concat(r,"-").concat(this.cid,"-").concat(E.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var o=e.stops,c=o.map(function(C){var S=C.opacity!=null&&Number.isFinite(C.opacity)?C.opacity:1;return'<stop offset="'.concat(C.offset,'" stop-color="').concat(C.color,'" stop-opacity="').concat(S,'"/>')}),p="<".concat(r,">").concat(c.join(""),"</").concat(r,">"),y=Object.assign({id:t},e.attrs);pi.create(p,y).appendTo(this.defs)}return t}},{key:"marker",value:function(e){var t=e.id,r=e.refX,o=e.refY,c=e.markerUnits,p=e.markerOrient,y=e.tagName,C=e.children,S=Y0(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),I=t;if(I||(I="marker-".concat(this.cid,"-").concat(E.hashcode(JSON.stringify(e)))),!this.isDefined(I)){y!=="path"&&delete S.d;var W=pi.create("marker",{refX:r,refY:o,id:I,overflow:"visible",orient:p??"auto",markerUnits:c||"userSpaceOnUse"},C?C.map(function(q){var ie=q.tagName,ve=Y0(q,["tagName"]);return pi.create("".concat(ie)||"path",O.kebablizeAttrs(Object.assign(Object.assign({},S),ve)))}):[pi.create(y||"path",O.kebablizeAttrs(S))]);this.defs.appendChild(W.node)}return I}},{key:"remove",value:function(e){var t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}]),i}(xo),mS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},gS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Og=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"elem",get:function(){return this.view.grid}},{key:"grid",get:function(){return this.options.grid}},{key:"init",value:function(){this.startListening(),this.draw(this.grid)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"setVisible",value:function(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}},{key:"getGridSize",value:function(){return this.grid.size}},{key:"setGridSize",value:function(e){this.grid.size=Math.max(e,1),this.update()}},{key:"show",value:function(){this.setVisible(!0),this.update()}},{key:"hide",value:function(){this.setVisible(!1),this.update()}},{key:"clear",value:function(){this.elem.style.backgroundImage=""}},{key:"draw",value:function(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();var r=this.graph.matrix(),o=this.getInstance(),c=Array.isArray(e)?e:[e];this.patterns.forEach(function(C,S){var I="pattern_".concat(S),W=r.a||1,q=r.d||1,ie=C.update,ve=C.markup,Le=gS(C,["update","markup"]),Oe=Object.assign(Object.assign(Object.assign({},Le),c[S]),{sx:W,sy:q,ox:r.e||0,oy:r.f||0,width:t*W,height:t*q});o.has(I)||o.add(I,pi.create("pattern",{id:I,patternUnits:"userSpaceOnUse"},pi.createVectors(ve)).node);var it=o.get(I);typeof ie=="function"&&ie(it.childNodes[0],Oe);var at=Oe.ox%Oe.width;at<0&&(at+=Oe.width);var Qe=Oe.oy%Oe.height;Qe<0&&(Qe+=Oe.height),O.attr(it,{x:at,y:Qe,width:Oe.width,height:Oe.height})});var p=new XMLSerializer().serializeToString(o.root),y="url(data:image/svg+xml;base64,".concat(btoa(p),")");this.elem.style.backgroundImage=y}},{key:"getInstance",value:function(){return this.instance||(this.instance=new Oh),this.instance}},{key:"resolveGrid",value:function(e){if(!e)return[];var t=e.type;if(t==null)return[Object.assign(Object.assign({},Oh.presets.dot),e.args)];var r=Oh.registry.get(t);if(r){var o=e.args||[];return Array.isArray(o)||(o=[o]),Array.isArray(r)?r.map(function(c,p){return Object.assign(Object.assign({},c),o[p])}):[Object.assign(Object.assign({},r),o[0])]}return Oh.registry.onNotFound(t)}},{key:"dispose",value:function(){this.stopListening(),this.clear()}}]),i}(xo);mS([xo.dispose()],Og.prototype,"dispose",null);var J0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"getClientMatrix",value:function(){return O.createSVGMatrix(this.view.stage.getScreenCTM())}},{key:"getClientOffset",value:function(){var e=this.view.svg.getBoundingClientRect();return new Bt(e.left,e.top)}},{key:"getPageOffset",value:function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}},{key:"snapToGrid",value:function(e,t){var r=typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y);return r.snapToGrid(this.graph.getGridSize())}},{key:"localToGraphPoint",value:function(e,t){var r=Bt.create(e,t);return O.transformPoint(r,this.graph.matrix())}},{key:"localToClientPoint",value:function(e,t){var r=Bt.create(e,t);return O.transformPoint(r,this.getClientMatrix())}},{key:"localToPagePoint",value:function(e,t){var r=typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e);return r.translate(this.getPageOffset())}},{key:"localToGraphRect",value:function(e,t,r,o){var c=qr.create(e,t,r,o);return O.transformRectangle(c,this.graph.matrix())}},{key:"localToClientRect",value:function(e,t,r,o){var c=qr.create(e,t,r,o);return O.transformRectangle(c,this.getClientMatrix())}},{key:"localToPageRect",value:function(e,t,r,o){var c=typeof e=="number"?this.localToGraphRect(e,t,r,o):this.localToGraphRect(e);return c.translate(this.getPageOffset())}},{key:"graphToLocalPoint",value:function(e,t){var r=Bt.create(e,t);return O.transformPoint(r,this.graph.matrix().inverse())}},{key:"clientToLocalPoint",value:function(e,t){var r=Bt.create(e,t);return O.transformPoint(r,this.getClientMatrix().inverse())}},{key:"clientToGraphPoint",value:function(e,t){var r=Bt.create(e,t);return O.transformPoint(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalPoint",value:function(e,t){var r=Bt.create(e,t),o=r.diff(this.getPageOffset());return this.graphToLocalPoint(o)}},{key:"graphToLocalRect",value:function(e,t,r,o){var c=qr.create(e,t,r,o);return O.transformRectangle(c,this.graph.matrix().inverse())}},{key:"clientToLocalRect",value:function(e,t,r,o){var c=qr.create(e,t,r,o);return O.transformRectangle(c,this.getClientMatrix().inverse())}},{key:"clientToGraphRect",value:function(e,t,r,o){var c=qr.create(e,t,r,o);return O.transformRectangle(c,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalRect",value:function(e,t,r,o){var c=qr.create(e,t,r,o),p=this.getPageOffset();return c.x-=p.x,c.y-=p.y,this.graphToLocalRect(c)}}]),i}(xo),yS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},Sg=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.widget=n.graph.hook.createSnapline(),n}return Object(Br.a)(i,[{key:"dispose",value:function(){this.widget.dispose()}}]),i}(xo);yS([xo.dispose()],Sg.prototype,"dispose",null);var Rh;(function(a){function s(e){var t=[],r=[];return Array.isArray(e)?t.push.apply(t,Object(Ca.a)(e)):e.split("|").forEach(function(o){o.indexOf("&")===-1?t.push(o):r.push.apply(r,Object(Ca.a)(o.split("&")))}),{or:t,and:r}}a.parse=s;function i(e,t){if(e!=null&&t!=null){var r=s(e),o=s(t),c=r.or.sort(),p=o.or.sort(),y=r.and.sort(),C=o.and.sort(),S=function(W,q){return W.length===q.length&&(W.length===0||W.every(function(ie,ve){return ie===q[ve]}))};return S(c,p)&&S(y,C)}return e==null&&t==null}a.equals=i;function n(e,t,r){if(t==null||Array.isArray(t)&&t.length===0)return r?e.altKey!==!0&&e.ctrlKey!==!0&&e.metaKey!==!0&&e.shiftKey!==!0:!0;var o=s(t),c=o.or,p=o.and,y=function(S){var I="".concat(S.toLowerCase(),"Key");return e[I]===!0};return c.some(function(C){return y(C)})&&p.every(function(C){return y(C)})}a.isMatch=n})(Rh||(Rh={}));var bS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},Dg=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"widgetOptions",get:function(){return this.options.scroller}},{key:"pannable",get:function(){return this.widgetOptions?typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable:!1}},{key:"init",value:function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}},{key:"startListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}},{key:"stopListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}},{key:"onRightMouseDown",value:function(e){var t=this;e.button===2&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"preparePanning",value:function(e){var t=this,r=e.e;this.widget&&((this.allowPanning(r,!0)||this.allowPanning(r)&&!this.graph.selection.allowRubberband(r,!0))&&(this.updateClassName(!0),this.widget.startPanning(r),this.widget.once("pan:stop",function(){return t.updateClassName(!1)})))}},{key:"allowPanning",value:function(e,t){return this.widget&&this.pannable&&Rh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"updateClassName",value:function(e){if(this.widget==null)return;var t=this.widget.container,r=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(O.addClass(t,r),t.dataset.panning=(!!e).toString()):O.removeClass(t,r)}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}},{key:"lock",value:function(){this.widget&&this.widget.lock()}},{key:"unlock",value:function(){this.widget&&this.widget.unlock()}},{key:"update",value:function(){this.widget&&this.widget.update()}},{key:"enableAutoResize",value:function(){this.widget&&this.widget.enableAutoResize()}},{key:"disableAutoResize",value:function(){this.widget&&this.widget.disableAutoResize()}},{key:"resize",value:function(e,t){this.widget&&this.widget.resize(e,t)}},{key:"dispose",value:function(){this.widget&&this.widget.dispose(),this.stopListening()}}]),i}(xo);bS([xo.dispose()],Dg.prototype,"dispose",null);var ES=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},xS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Mg=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"commonOptions",get:function(){var e=this.instanceOptions,t=e.enabled,r=xS(e,["enabled"]);return r}},{key:"instanceOptions",get:function(){return this.options.clipboard}},{key:"cells",get:function(){return this.widget.cells}},{key:"disabled",get:function(){return this.instanceOptions.enabled!==!0}},{key:"init",value:function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}},{key:"enable",value:function(){this.disabled&&(this.instanceOptions.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.instanceOptions.enabled=!1)}},{key:"copy",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"cut",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"paste",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.graph;return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}},{key:"clean",value:function(e){(!this.disabled||e)&&(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}},{key:"isEmpty",value:function(){return this.widget.isEmpty()}},{key:"dispose",value:function(){this.clean(!0)}}]),i}(xo);ES([xo.dispose()],Mg.prototype,"dispose",null);var wS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},hm=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.highlights={},n}return Object(Br.a)(i,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"stopListening",value:function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"onCellHighlight",value:function(e){var t=e.view,r=e.magnet,o=e.options,c=o===void 0?{}:o,p=this.resolveHighlighter(c);if(!p)return;var y=this.getHighlighterId(r,p);if(!this.highlights[y]){var C=p.highlighter;C.highlight(t,r,Object.assign({},p.args)),this.highlights[y]={cellView:t,magnet:r,highlighter:C,args:p.args}}}},{key:"onCellUnhighlight",value:function(e){var t=e.magnet,r=e.options,o=r===void 0?{}:r,c=this.resolveHighlighter(o);if(!c)return;var p=this.getHighlighterId(t,c);this.unhighlight(p)}},{key:"resolveHighlighter",value:function(e){var t=this.options,r=e.highlighter;if(r==null){var o=e.type;r=o&&t.highlighting[o]||t.highlighting.default}if(r==null)return null;var c=typeof r=="string"?{name:r}:r,p=c.name,y=Yf.registry.get(p);return y==null?Yf.registry.onNotFound(p):(Yf.check(p,y),{name:p,highlighter:y,args:c.args||{}})}},{key:"getHighlighterId",value:function(e,t){return O.ensureId(e),t.name+e.id+JSON.stringify(t.args)}},{key:"unhighlight",value:function(e){var t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}},{key:"dispose",value:function(){var e=this;Object.keys(this.highlights).forEach(function(t){return e.unhighlight(t)}),this.stopListening()}}]),i}(xo);wS([hm.dispose()],hm.prototype,"dispose",null);var CS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},pm=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.widgets=new Map,n}return Object(Br.a)(i,[{key:"container",get:function(){return this.graph.view.container}},{key:"viewport",get:function(){return this.graph.view.viewport}},{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening(),this.resize()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var r=this.graph.hook.createTransform(t,{clearAll:!0});r&&this.widgets.set(t,r)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var r=this.graph.hook.createTransform(t,{clearAll:!1});r&&this.widgets.set(t,r)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var r=this.widgets.get(t);r&&r.dispose(),this.widgets.delete(t)}}},{key:"getMatrix",value:function(){var e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),O.createSVGMatrix(this.viewportMatrix)}},{key:"setMatrix",value:function(e){var t=O.createSVGMatrix(e),r=O.matrixToTransformString(t);this.viewport.setAttribute("transform",r),this.viewportMatrix=t,this.viewportTransformString=r}},{key:"resize",value:function(e,t){var r=e===void 0?this.options.width:e,o=t===void 0?this.options.height:t;this.options.width=r,this.options.height=o,typeof r=="number"&&(r=Math.round(r)),typeof o=="number"&&(o=Math.round(o)),this.container.style.width=r==null?"":"".concat(r,"px"),this.container.style.height=o==null?"":"".concat(o,"px");var c=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},c)),this}},{key:"getComputedSize",value:function(){var e=this.options.width,t=this.options.height;return T.isNumber(e)||(e=this.container.clientWidth),T.isNumber(t)||(t=this.container.clientHeight),{width:e,height:t}}},{key:"getScale",value:function(){return O.matrixToScale(this.getMatrix())}},{key:"scale",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(e=this.clampScale(e),t=this.clampScale(t),r||o){var p=this.getTranslation(),y=p.tx-r*(e-1),C=p.ty-o*(t-1);(y!==p.tx||C!==p.ty)&&this.translate(y,C)}var S=this.getMatrix();return S.a=e,S.d=t,this.setMatrix(S),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:r,oy:o},c)),this}},{key:"clampScale",value:function(e){var t=this.graph.options.scaling;return T.clamp(e,t.min||.01,t.max||16)}},{key:"getZoom",value:function(){return this.getScale().sx}},{key:"zoom",value:function(e,t){t=t||{};var r=e,o=e,c=this.getScale(),p=this.getComputedSize(),y=p.width/2,C=p.height/2;if(t.absolute||(r+=c.sx,o+=c.sy),t.scaleGrid&&(r=Math.round(r/t.scaleGrid)*t.scaleGrid,o=Math.round(o/t.scaleGrid)*t.scaleGrid),t.maxScale&&(r=Math.min(t.maxScale,r),o=Math.min(t.maxScale,o)),t.minScale&&(r=Math.max(t.minScale,r),o=Math.max(t.minScale,o)),t.center&&(y=t.center.x,C=t.center.y),r=this.clampScale(r),o=this.clampScale(o),y||C){var S=this.getTranslation(),I=y-(y-S.tx)*(r/c.sx),W=C-(C-S.ty)*(o/c.sy);(I!==S.tx||W!==S.ty)&&this.translate(I,W,{ui:t.ui})}return this.scale(r,o,0,0,{ui:t.ui}),this}},{key:"getRotation",value:function(){return O.matrixToRotation(this.getMatrix())}},{key:"rotate",value:function(e,t,r){if(t==null||r==null){var o=O.getBBox(this.graph.view.stage);t=o.width/2,r=o.height/2}var c=this.getMatrix().translate(t,r).rotate(e).translate(-t,-r);return this.setMatrix(c),this}},{key:"getTranslation",value:function(){return O.matrixToTranslation(this.getMatrix())}},{key:"translate",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.getMatrix();o.e=e||0,o.f=t||0,this.setMatrix(o);var c=this.getTranslation();return this.options.x=c.tx,this.options.y=c.ty,this.graph.trigger("translate",Object.assign(Object.assign({},c),r)),this}},{key:"setOrigin",value:function(e,t){return this.translate(e||0,t||0)}},{key:"fitToContent",value:function(e,t,r,o){if(typeof e=="object"){var c=e;e=c.gridWidth||1,t=c.gridHeight||1,r=c.padding||0,o=c}else e=e||1,t=t||1,r=r||0,o==null&&(o={});var p=T.normalizeSides(r),y=o.border||0,C=o.contentArea?qr.create(o.contentArea):this.getContentArea(o);y>0&&C.inflate(y);var S=this.getScale(),I=this.getTranslation(),W=S.sx,q=S.sy;C.x*=W,C.y*=q,C.width*=W,C.height*=q;var ie=Math.max(Math.ceil((C.width+C.x)/e),1)*e,ve=Math.max(Math.ceil((C.height+C.y)/t),1)*t,Le=0,Oe=0;(o.allowNewOrigin==="negative"&&C.x<0||o.allowNewOrigin==="positive"&&C.x>=0||o.allowNewOrigin==="any")&&(Le=Math.ceil(-C.x/e)*e,Le+=p.left,ie+=Le),(o.allowNewOrigin==="negative"&&C.y<0||o.allowNewOrigin==="positive"&&C.y>=0||o.allowNewOrigin==="any")&&(Oe=Math.ceil(-C.y/t)*t,Oe+=p.top,ve+=Oe),ie+=p.right,ve+=p.bottom,ie=Math.max(ie,o.minWidth||0),ve=Math.max(ve,o.minHeight||0),ie=Math.min(ie,o.maxWidth||Number.MAX_SAFE_INTEGER),ve=Math.min(ve,o.maxHeight||Number.MAX_SAFE_INTEGER);var it=this.getComputedSize(),at=ie!==it.width||ve!==it.height,Qe=Le!==I.tx||Oe!==I.ty;return Qe&&this.translate(Le,Oe),at&&this.resize(ie,ve),new qr(-Le/W,-Oe/q,ie/W,ve/q)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.scaleContentToFitImpl(e)}},{key:"scaleContentToFitImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,o;if(e.contentArea){var c=e.contentArea;r=this.graph.localToGraph(c),o=Bt.create(c)}else r=this.getContentBBox(e),o=this.graph.graphToLocal(r);if(!r.width||!r.height)return;var p=T.normalizeSides(e.padding),y=e.minScale||0,C=e.maxScale||Number.MAX_SAFE_INTEGER,S=e.minScaleX||y,I=e.maxScaleX||C,W=e.minScaleY||y,q=e.maxScaleY||C,ie;if(e.viewportArea)ie=e.viewportArea;else{var ve=this.getComputedSize(),Le=this.getTranslation();ie={x:Le.tx,y:Le.ty,width:ve.width,height:ve.height}}ie=qr.create(ie).moveAndExpand({x:p.left,y:p.top,width:-p.left-p.right,height:-p.top-p.bottom});var Oe=this.getScale(),it=ie.width/r.width*Oe.sx,at=ie.height/r.height*Oe.sy;e.preserveAspectRatio!==!1&&(it=at=Math.min(it,at));var Qe=e.scaleGrid;if(Qe&&(it=Qe*Math.floor(it/Qe),at=Qe*Math.floor(at/Qe)),it=T.clamp(it,S,I),at=T.clamp(at,W,q),this.scale(it,at),t){var qt=this.options,Kt=ie.x-o.x*it-qt.x,Tn=ie.y-o.y*at-qt.y;this.translate(Kt,Tn)}}},{key:"getContentArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.useCellGeometry?this.model.getAllCellsBBox()||new qr:O.getBBox(this.graph.view.stage)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.graph.localToGraph(this.getContentArea(e))}},{key:"getGraphArea",value:function(){var e=qr.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=qr.create(e),o=this.graph;t.contentArea=r,t.viewportArea==null&&(t.viewportArea={x:o.options.x,y:o.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);var c=r.getCenter();return this.centerPoint(c.x,c.y),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.getContentArea(e),e)}},{key:"centerPoint",value:function(e,t){var r=this.getComputedSize(),o=this.getScale(),c=this.getTranslation(),p=r.width/2,y=r.height/2;e=typeof e=="number"?e:p,t=typeof t=="number"?t:y,e=p-e*o.sx,t=y-t*o.sy,(c.tx!==e||c.ty!==t)&&this.translate(e,t)}},{key:"centerContent",value:function(e){var t=this.graph.getContentArea(e),r=t.getCenter();this.centerPoint(r.x,r.y)}},{key:"centerCell",value:function(e){return this.positionCell(e,"center")}},{key:"positionPoint",value:function(e,t,r){var o=this.getComputedSize();t=T.normalizePercentage(t,Math.max(0,o.width)),t<0&&(t=o.width+t),r=T.normalizePercentage(r,Math.max(0,o.height)),r<0&&(r=o.height+r);var c=this.getTranslation(),p=this.getScale(),y=t-e.x*p.sx,C=r-e.y*p.sy;(c.tx!==y||c.ty!==C)&&this.translate(y,C)}},{key:"positionRect",value:function(e,t){var r=qr.create(e);switch(t){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}}},{key:"positionCell",value:function(e,t){var r=e.getBBox();return this.positionRect(r,t)}},{key:"positionContent",value:function(e,t){var r=this.graph.getContentArea(t);return this.positionRect(r,e)}},{key:"dispose",value:function(){this.widgets.forEach(function(e){return e.dispose()}),this.widgets.clear(),this.stopListening()}}]),i}(xo);CS([pm.dispose()],pm.prototype,"dispose",null);var TS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},_g=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.movedMap=new WeakMap,n.unselectMap=new WeakMap,n}return Object(Br.a)(i,[{key:"widgetOptions",get:function(){return this.options.selecting}},{key:"rubberbandDisabled",get:function(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}},{key:"disabled",get:function(){return this.widgetOptions.enabled!==!0}},{key:"length",get:function(){return this.widget.length}},{key:"cells",get:function(){return this.widget.cells}},{key:"init",value:function(){this.widget=this.graph.hook.createSelection(),this.startListening()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}},{key:"onBlankMouseDown",value:function(e){var t=e.e;(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!this.graph.scroller.allowPanning(t,!0)&&!this.graph.panning.allowPanning(t,!0))&&this.startRubberband(t)}},{key:"onBlankClick",value:function(){this.clean()}},{key:"allowRubberband",value:function(e,t){return!this.rubberbandDisabled&&Rh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}},{key:"allowMultipleSelection",value:function(e){return this.isMultiple()&&Rh.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}},{key:"onCellMouseMove",value:function(e){var t=e.cell;this.movedMap.set(t,!0)}},{key:"onCellMouseUp",value:function(e){var t=e.e,r=e.cell,o=this.widgetOptions,c=this.disabled;!c&&this.movedMap.has(r)&&(c=o.selectCellOnMoved===!1,c||(c=o.selectNodeOnMoved===!1&&r.isNode()),c||(c=o.selectEdgeOnMoved===!1&&r.isEdge())),c||(this.allowMultipleSelection(t)?this.unselectMap.has(r)?this.unselectMap.delete(r):this.isSelected(r)?this.unselect(r):this.select(r):this.reset(r)),this.movedMap.delete(r)}},{key:"onBoxMouseDown",value:function(e){var t=e.e,r=e.cell;this.disabled||this.allowMultipleSelection(t)&&(this.unselect(r),this.unselectMap.set(r,!0))}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.widget.isSelected(e)}},{key:"getCells",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(r){return typeof r=="string"?t.graph.getCellById(r):r}).filter(function(r){return r!=null})}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getCells(e);return r.length&&(this.isMultiple()?this.widget.select(r,t):this.reset(r.slice(0,1),t)),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.unselect(this.getCells(e),t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.reset(e?this.getCells(e):[],t),this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.widget.clean(e),this}},{key:"enable",value:function(){return this.disabled&&(this.widgetOptions.enabled=!0),this}},{key:"disable",value:function(){return this.disabled||(this.widgetOptions.enabled=!1),this}},{key:"startRubberband",value:function(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}},{key:"enableRubberband",value:function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}},{key:"disableRubberband",value:function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}},{key:"isMultiple",value:function(){return this.widgetOptions.multiple!==!1}},{key:"enableMultiple",value:function(){return this.widgetOptions.multiple=!0,this}},{key:"disableMultiple",value:function(){return this.widgetOptions.multiple=!1,this}},{key:"setModifiers",value:function(e){return this.widgetOptions.modifiers=e,this}},{key:"setContent",value:function(e){return this.widget.setContent(e),this}},{key:"setFilter",value:function(e){return this.widget.setFilter(e),this}},{key:"dispose",value:function(){this.stopListening(),this.widget.dispose()}}]),i}(xo);TS([xo.dispose()],_g.prototype,"dispose",null);var Z0=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},AS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},rv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;return Object(_r.a)(this,i),e=s.call(this),e.batchCommands=null,e.batchLevel=0,e.lastBatchIndex=-1,e.freezed=!1,e.handlers=[],e.graph=n.graph,e.model=n.graph.model,e.options=Ms.getOptions(n),e.validator=new i.Validator({history:Object(fu.a)(e),cancelInvalid:e.options.cancelInvalid}),e.clean(),e.startListening(),e}return Object(Br.a)(i,[{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1)}},{key:"undo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}},{key:"redo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}},{key:"canUndo",value:function(){return!this.disabled&&this.undoStack.length>0}},{key:"canRedo",value:function(){return!this.disabled&&this.redoStack.length>0}},{key:"validate",value:function(e){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return(t=this.validator).validate.apply(t,[e].concat(o)),this}},{key:"dispose",value:function(){this.validator.dispose(),this.clean(),this.stopListening()}},{key:"startListening",value:function(){var e=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(t,r){e.handlers[r]=e.addCommand.bind(e,t),e.model.on(t,e.handlers[r])}),this.validator.on("invalid",function(t){return e.trigger("invalid",t)})}},{key:"stopListening",value:function(){var e=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(t,r){e.model.off(t,e.handlers[r])}),this.handlers.length=0),this.validator.off("invalid")}},{key:"createCommand",value:function(e){return{batch:e?e.batch:!1,data:{}}}},{key:"revertCommand",value:function(e,t){this.freezed=!0;for(var r=Array.isArray(e)?Ms.sortBatchCommands(e):[e],o=r.length-1;o>=0;o-=1){var c=r[o],p=Object.assign(Object.assign({},t),f.pick(c.options,this.options.revertOptionsList||[]));this.executeCommand(c,!0,p)}this.freezed=!1}},{key:"applyCommand",value:function(e,t){this.freezed=!0;for(var r=Array.isArray(e)?Ms.sortBatchCommands(e):[e],o=0;o<r.length;o+=1){var c=r[o],p=Object.assign(Object.assign({},t),f.pick(c.options,this.options.applyOptionsList||[]));this.executeCommand(c,!1,p)}this.freezed=!1}},{key:"executeCommand",value:function(e,t,r){var o=this.model,c=o.getCell(e.data.id),p=e.event;if(Ms.isAddEvent(p)&&t||Ms.isRemoveEvent(p)&&!t)c.remove(r);else if(Ms.isAddEvent(p)&&!t||Ms.isRemoveEvent(p)&&t){var y=e.data;y.node?o.addNode(y.props,r):y.edge&&o.addEdge(y.props,r)}else if(Ms.isChangeEvent(p)){var C=e.data,S=C.key;if(S){var I=t?C.prev[S]:C.next[S];c.prop(S,I,r)}}else{var W=this.options.executeCommand;W&&w.call(W,this,e,t,r)}}},{key:"addCommand",value:function(e,t){if(this.freezed||this.disabled)return;var r=t,o=r.options||{};if(o.dryrun)return;if(Ms.isAddEvent(e)&&this.options.ignoreAdd||Ms.isRemoveEvent(e)&&this.options.ignoreRemove||Ms.isChangeEvent(e)&&this.options.ignoreChange)return;var c=this.options.beforeAddCommand;if(c!=null&&w.call(c,this,e,t)===!1)return;e==="cell:change:*"&&(e="cell:change:".concat(r.key));var p=r.cell,y=Xc.isModel(p),C;if(this.batchCommands){C=this.batchCommands[Math.max(this.lastBatchIndex,0)];var S=y&&!C.modelChange||C.data.id!==p.id,I=C.event!==e;if(this.lastBatchIndex>=0&&(S||I)){var W=this.batchCommands.findIndex(function(Oe){return(y&&Oe.modelChange||Oe.data.id===p.id)&&Oe.event===e});W<0||Ms.isAddEvent(e)||Ms.isRemoveEvent(e)?C=this.createCommand({batch:!0}):(C=this.batchCommands[W],this.batchCommands.splice(W,1)),this.batchCommands.push(C),this.lastBatchIndex=this.batchCommands.length-1}}else C=this.createCommand({batch:!1});if(Ms.isAddEvent(e)||Ms.isRemoveEvent(e)){var q=C.data;return C.event=e,C.options=o,q.id=p.id,q.props=f.cloneDeep(p.toJSON()),p.isEdge()?q.edge=!0:p.isNode()&&(q.node=!0),this.push(C,o)}if(Ms.isChangeEvent(e)){var ie=t.key,ve=C.data;return(!C.batch||!C.event)&&(C.event=e,C.options=o,ve.key=ie,ve.prev==null&&(ve.prev={}),ve.prev[ie]=f.clone(p.previous(ie)),y?C.modelChange=!0:ve.id=p.id),ve.next==null&&(ve.next={}),ve.next[ie]=f.clone(p.prop(ie)),this.push(C,o)}var Le=this.options.afterAddCommand;Le&&w.call(Le,this,e,t,C),this.push(C,o)}},{key:"initBatchCommand",value:function(e){if(this.freezed)return;this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1)}},{key:"storeBatchCommand",value:function(e){if(this.freezed)return;if(this.batchCommands&&this.batchLevel<=0){var t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}},{key:"filterBatchCommand",value:function(e){for(var t=e.slice(),r=[],o=function(){var y=t.shift(),C=y.event,S=y.data.id;if(C!=null&&(S!=null||y.modelChange)){if(Ms.isAddEvent(C)){var I=t.findIndex(function(ie){return Ms.isRemoveEvent(ie.event)&&ie.data.id===S});if(I>=0)return t=t.filter(function(ie,ve){return I<ve||ie.data.id!==S}),"continue"}else if(Ms.isRemoveEvent(C)){var W=t.findIndex(function(ie){return Ms.isAddEvent(ie.event)&&ie.data.id===S});if(W>=0)return t.splice(W,1),"continue"}else if(Ms.isChangeEvent(C)){var q=y.data;if(f.isEqual(q.prev,q.next))return"continue"}r.push(y)}};t.length>0;){var c=o();if(c==="continue")continue}return r}},{key:"notify",value:function(e,t,r){var o=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:o,options:r}),this.emit("change",{cmds:o,options:r})}},{key:"push",value:function(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.notify("add",e,t))}}]),i}(fl);Z0([fl.dispose()],rv.prototype,"dispose",null),function(a){var s=function(i){Object(Zr.a)(e,i);var n=Object(Wr.a)(e);function e(t){var r;return Object(_r.a)(this,e),r=n.call(this),r.map={},r.command=t.history,r.cancelInvalid=t.cancelInvalid!==!1,r.command.on("add",r.onCommandAdded,Object(fu.a)(r)),r}return Object(Br.a)(e,[{key:"onCommandAdded",value:function(r){var o=this,c=r.cmds;return Array.isArray(c)?c.every(function(p){return o.isValidCommand(p)}):this.isValidCommand(c)}},{key:"isValidCommand",value:function(r){if(r.options&&r.options.validation===!1)return!0;var o=r.event&&this.map[r.event]||[],c=null;return o.forEach(function(p){var y=0,C=function S(I){var W=p[y];y+=1;try{if(W)W(I,r,S);else{c=I;return}}catch(q){S(q)}};C(c)}),c?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:c}),!1):!0}},{key:"validate",value:function(r){for(var o=this,c=arguments.length,p=new Array(c>1?c-1:0),y=1;y<c;y++)p[y-1]=arguments[y];var C=Array.isArray(r)?r:r.split(/\s+/);return p.forEach(function(S){if(typeof S!="function")throw new Error("".concat(C.join(" ")," requires callback functions."))}),C.forEach(function(S){o.map[S]==null&&(o.map[S]=[]),o.map[S].push(p)}),this}},{key:"dispose",value:function(){this.command.off("add",this.onCommandAdded,this)}}]),e}(fl);Z0([fl.dispose()],s.prototype,"dispose",null),a.Validator=s}(rv||(rv={}));var Ms;(function(a){function s(r){return r==="cell:added"}a.isAddEvent=s;function i(r){return r==="cell:removed"}a.isRemoveEvent=i;function n(r){return r!=null&&r.startsWith("cell:change:")}a.isChangeEvent=n;function e(r){var o=r.graph,c=AS(r,["graph"]),p=["cell:added","cell:removed","cell:change:*"],y=["batch:start","batch:stop"],C=r.eventNames?r.eventNames.filter(function(S){return!(a.isChangeEvent(S)||p.includes(S)||y.includes(S))}):p;return Object.assign(Object.assign({},c),{eventNames:C,applyOptionsList:r.applyOptionsList||["propertyPath"],revertOptionsList:r.revertOptionsList||["propertyPath"]})}a.getOptions=e;function t(r){for(var o=[],c=0,p=r.length;c<p;c+=1){var y=r[c],C=null;if(a.isAddEvent(y.event)){for(var S=y.data.id,I=0;I<c;I+=1)if(r[I].data.id===S){C=I;break}}C!==null?o.splice(C,0,y):o.push(y)}return o}a.sortBatchCommands=t})(Ms||(Ms={}));var OS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},kg=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"widgetOptions",get:function(){return this.options.minimap}},{key:"init",value:function(){this.widget=this.graph.hook.createMiniMap()}},{key:"dispose",value:function(){this.widget&&this.widget.dispose()}}]),i}(xo);OS([xo.dispose()],kg.prototype,"dispose",null);var SS=u(283),DS=u.n(SS),MS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},av=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;Object(_r.a)(this,i),e=s.call(this),e.options=n;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,n.global?e.target=document:(e.target=e.container,e.disabled||e.target.setAttribute("tabindex","-1"),e.graph.on("cell:mouseup",e.focus,Object(fu.a)(e)),e.graph.on("blank:mouseup",e.focus,Object(fu.a)(e))),e.mousetrap=i.createMousetrap(Object(fu.a)(e)),e}return Object(Br.a)(i,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"on",value:function(e,t,r){this.mousetrap.bind(this.getKeys(e),t,r)}},{key:"off",value:function(e,t){this.mousetrap.unbind(this.getKeys(e),t)}},{key:"focus",value:function(e){var t=this.isInputEvent(e.e);if(t)return;var r=this.target;r.focus({preventScroll:!0})}},{key:"getKeys",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(r){return t.formatkey(r)})}},{key:"formatkey",value:function(e){var t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),r=this.options.format;return r?w.call(r,this.graph,t):t}},{key:"isGraphEvent",value:function(e){var t=e.srcElement||e.target,r=e.currentTarget;return t?t===this.target||r===this.target||t===document.body?!0:O.contains(this.container,t):!1}},{key:"isInputEvent",value:function(e){var t=e.target,r=t&&t.tagName.toLowerCase();return r==="input"}},{key:"isEnabledForEvent",value:function(e){var t=!this.disabled&&this.isGraphEvent(e),r=this.isInputEvent(e);if(t){var o=e.keyCode||e.which;if(r&&(o===8||o===46))return!1;if(this.options.guard)return w.call(this.options.guard,this.graph,e)}return t}},{key:"dispose",value:function(){this.mousetrap.reset()}}]),i}(Jd);MS([Jd.dispose()],av.prototype,"dispose",null),function(a){function s(i){var n=new DS.a(i.target),e=n.stopCallback;return n.stopCallback=function(t,r,o){return i.isEnabledForEvent(t)?e?e.call(n,t,r,o):!1:!0},n}a.createMousetrap=s}(av||(av={}));var _S=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},Ng=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;Object(_r.a)(this,i),e=s.call(this),e.options=n,e.cumulatedFactor=1;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,e.target=e.options.global?document:e.container,e.mousewheelHandle=new O.MouseWheelHandle(e.target,e.onMouseWheel.bind(Object(fu.a)(e)),e.allowMouseWheel.bind(Object(fu.a)(e))),e.options.enabled&&e.enable(!0),e}return Object(Br.a)(i,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}},{key:"allowMouseWheel",value:function(e){var t=e.originalEvent||e,r=this.options.guard;return(r==null||r.call(this.graph,t))&&Rh.isMatch(t,this.options.modifiers)}},{key:"onMouseWheel",value:function(e){var t=e.originalEvent||e,r=this.options.guard;if((r==null||r.call(this.graph,t))&&Rh.isMatch(t,this.options.modifiers)){var o=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx);var c=e.deltaY;c<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*o*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/o)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var p=this.graph.scroller.widget,y=this.currentScale,C=this.graph.transform.clampScale(y*this.cumulatedFactor),S=this.options.minScale||Number.MIN_SAFE_INTEGER,I=this.options.maxScale||Number.MAX_SAFE_INTEGER;if(C=T.clamp(C,S,I),C!==y)if(p)if(this.options.zoomAtMousePosition){var W=this.graph.coord.clientToLocalPoint(this.startPos);p.zoom(C,{absolute:!0,center:W.clone()})}else p.zoom(C,{absolute:!0});else if(this.options.zoomAtMousePosition){var q=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(C,{absolute:!0,center:q.clone(),ui:!0})}else this.graph.transform.zoom(C,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}},{key:"dispose",value:function(){this.disable()}}]),i}(Jd);_S([Jd.dispose()],Ng.prototype,"dispose",null);var kS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},iv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"show",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Object.assign(Object.assign({},i.defaultOptions),t),o=this.createPrintPages(r);r.ready(o,function(c){return e.showPrintWindow(c,r)},{sheetSize:this.getSheetSize(r)})}},{key:"className",get:function(){return this.view.prefixClassName("graph-print")}},{key:"showPrintWindow",value:function(e,t){var r=this;if(e){var o=k()(document.body),c=k()(this.view.container),p=this.view.prefixClassName("graph-printing");o.addClass(p);var y=c.children().detach();e.forEach(function(I){I.removeClass("".concat(r.className,"-preview")).addClass("".concat(r.className,"-ready")).appendTo(o)});var C=!1,S=function I(){C||(C=!0,o.removeClass(p),e.forEach(function(W){return W.remove()}),c.append(y),k()("#".concat(r.styleSheetId)).remove(),r.graph.trigger("after:print",t),k()(window).off("afterprint",I))};k()(window).one("afterprint",S),setTimeout(S,200),window.print()}}},{key:"createPrintPage",value:function(e,t){this.graph.trigger("before:print",t);var r=k()("<div/>").addClass(this.className),o=k()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&r.addClass("".concat(this.className,"-size-").concat(t.size));var c=pi.create(this.view.svg).clone(),p=c.findOne(".".concat(this.view.prefixClassName("graph-svg-stage")));o.append(c.node);var y=this.getSheetSize(t),C=this.graph.transform.getGraphArea(),S=this.graph.transform.getScale(),I=this.graph.translate(),W=O.createSVGMatrix().translate(I.tx/S.sx,I.ty/S.sy),q=this.getPageInfo(C,e,y),ie=q.scale,ve=q.bbox;return o.css({left:0,top:0}),c.attr({width:ve.width*ie,height:ve.height*ie,style:"position:relative",viewBox:[ve.x,ve.y,ve.width,ve.height].join(" ")}),p.attr("transform",O.matrixToTransformString(W)),r.append(o),r.addClass("".concat(this.className,"-preview")),{$page:r,sheetSize:y}}},{key:"createPrintPages",value:function(e){var t=this,r,o=this.getPrintArea(e),c=[];if(e.page){var p=this.getPageSize(o,e.page),y=this.getPageAreas(o,p);y.forEach(function(S){r=t.createPrintPage(S,e),c.push(r.$page)})}else r=this.createPrintPage(o,e),c.push(r.$page);if(r){var C={width:r.sheetSize.cssWidth,height:r.sheetSize.cssHeight};this.updatePrintStyle(C,e)}return c}},{key:"styleSheetId",get:function(){return this.view.prefixClassName("graph-print-style")}},{key:"updatePrintStyle",value:function(e,t){var r=Object.keys(e).reduce(function(I,W){return"".concat(I," ").concat(W,":").concat(e[W],";")},""),o=T.normalizeSides(t.margin),c=t.marginUnit||"",p=t.sheetUnit||"",y=`
      @media print {
        .`.concat(this.className,".").concat(this.className,`-ready {
          `).concat(r,`
        }

        @page {
          margin:
          `).concat([o.top+c,o.right+c,o.bottom+c,o.left+c].join(" "),`;
          size: `).concat(t.sheet.width+p," ").concat(t.sheet.height+p,`;

        .`).concat(this.className,".").concat(this.className,`-preview {
          `).concat(r,`
        }
      }`),C=this.styleSheetId,S=k()("#".concat(C));S.length?S.html(y):k()("head").append(`'<style type="text/css" id="`.concat(C,'">').concat(y,"</style>'"))}},{key:"getPrintArea",value:function(e){var t=e.area;if(!t){var r=T.normalizeSides(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom})}return t}},{key:"getPageSize",value:function(e,t){if(typeof t=="object"){var r=t,o={width:r.width,height:r.height};return o.width==null&&(o.width=Math.ceil(e.width/(r.columns||1))),o.height==null&&(o.height=Math.ceil(e.height/(r.rows||1))),o}return{width:e.width,height:e.height}}},{key:"getPageAreas",value:function(e,t){for(var r=[],o=t.width,c=t.height,p=0,y=0;p<e.height&&y<200;p+=c,y+=1)for(var C=0,S=0;C<e.width&&S<200;C+=o,S+=1)r.push(new qr(e.x+C,e.y+p,o,c));return r}},{key:"getSheetSize",value:function(e){var t=e.sheet,r=T.normalizeSides(e.margin),o=e.marginUnit||"",c=e.sheetUnit||"",p="calc(".concat(t.width).concat(c," - ").concat(r.left+r.right).concat(o,")"),y="calc(".concat(t.height).concat(c," - ").concat(r.top+r.bottom).concat(o,")"),C=Ym.measure(p,y);return{cssWidth:p,cssHeight:y,width:C.width,height:C.height}}},{key:"getPageInfo",value:function(e,t,r){var o=new qr(t.x-e.x,t.y-e.y,t.width,t.height),c=o.width/o.height,p=r.width/r.height;return{bbox:o,scale:p<c?r.width/o.width:r.height/o.height,fitHorizontal:p<c}}},{key:"dispose",value:function(){}}]),i}(xo);kS([xo.dispose()],iv.prototype,"dispose",null),function(a){a.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(i,n){return n(i)}}}(iv||(iv={}));var q0=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"toSVG",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.graph.trigger("before:export",r);var o=this.view.svg,c=pi.create(o).clone(),p=c.node,y=c.findOne(".".concat(this.view.prefixClassName("graph-svg-stage"))),C=r.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),S=r.preserveDimensions;if(S){var I=typeof S=="boolean"?C:S;c.attr({width:I.width,height:I.height})}if(c.removeAttribute("style").attr("viewBox",[C.x,C.y,C.width,C.height].join(" ")),y.removeAttribute("transform"),r.copyStyles!==!1){for(var W=o.ownerDocument,q=Array.from(o.querySelectorAll("*")),ie=Array.from(p.querySelectorAll("*")),ve=W.styleSheets.length,Le=[],Oe=ve-1;Oe>=0;Oe-=1)Le[Oe]=W.styleSheets[Oe],W.styleSheets[Oe].disabled=!0;var it={};q.forEach(function(tr,hr){var Lr=window.getComputedStyle(tr,null),Vr={};Object.keys(Lr).forEach(function(dn){Vr[dn]=Lr.getPropertyValue(dn)}),it[hr]=Vr}),ve!==W.styleSheets.length&&Le.forEach(function(tr,hr){W.styleSheets[hr]=tr});for(var at=0;at<ve;at+=1)W.styleSheets[at].disabled=!1;var Qe={};q.forEach(function(tr,hr){var Lr=window.getComputedStyle(tr,null),Vr=it[hr],dn={};Object.keys(Lr).forEach(function(Xn){!T.isNumeric(Xn)&&Lr.getPropertyValue(Xn)!==Vr[Xn]&&(dn[Xn]=Lr.getPropertyValue(Xn))}),Qe[hr]=dn}),ie.forEach(function(tr,hr){k()(tr).css(Qe[hr])})}var qt=r.stylesheet;if(typeof qt=="string"){var Kt=o.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(qt);c.prepend(pi.create("style",{type:"text/css"},[Kt]))}var Tn=function(){var hr=r.beforeSerialize;if(typeof hr=="function"){var Lr=w.call(hr,t.graph,p);Lr instanceof SVGSVGElement&&(p=Lr)}var Vr=new XMLSerializer().serializeToString(p).replace(/&nbsp;/g,"\xA0");t.graph.trigger("after:export",r),e(Vr)};if(r.serializeImages){var Bn=c.find("image").map(function(tr){return new Promise(function(hr){var Lr=tr.attr("xlink:href")||tr.attr("href");$m.imageToDataUri(Lr,function(Vr,dn){!Vr&&dn&&tr.attr("xlink:href",dn),hr()})})});Promise.all(Bn).then(Tn)}else Tn()}},{key:"toDataURL",value:function(e,t){var r=t.viewBox||this.graph.getContentBBox(),o=T.normalizeSides(t.padding);t.width&&t.height&&(o.left+o.right>=t.width&&(o.left=o.right=0),o.top+o.bottom>=t.height&&(o.top=o.bottom=0));var c=new qr(-o.left,-o.top,o.left+o.right,o.top+o.bottom);if(t.width&&t.height){var p=r.width+o.left+o.right,y=r.height+o.top+o.bottom;c.scale(p/t.width,y/t.height)}r=qr.create(r).moveAndExpand(c);var C=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:r,S=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(S)||S===0)&&(S=1);var I={width:Math.max(Math.round(C.width*S),1),height:Math.max(Math.round(C.height*S),1)};{var W=document.createElement("canvas"),q=W.getContext("2d");W.width=I.width,W.height=I.height;var ie=I.width-1,ve=I.height-1;q.fillStyle="rgb(1,1,1)",q.fillRect(ie,ve,1,1);var Le=q.getImageData(ie,ve,1,1).data;if(Le[0]!==1||Le[1]!==1||Le[2]!==1)throw new Error("size exceeded")}var Oe=new Image;Oe.onload=function(){var it=document.createElement("canvas");it.width=I.width,it.height=I.height;var at=it.getContext("2d");at.fillStyle=t.backgroundColor||"white",at.fillRect(0,0,I.width,I.height);try{at.drawImage(Oe,0,0,I.width,I.height);var Qe=it.toDataURL(t.type,t.quality);e(Qe)}catch(qt){}},this.toSVG(function(it){Oe.src="data:image/svg+xml,".concat(encodeURIComponent(it))},Object.assign(Object.assign({},t),{viewBox:r,serializeImages:!0,preserveDimensions:Object.assign({},I)}))}},{key:"toPNG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}]),i}(xo),NS=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){var n;return Object(_r.a)(this,i),n=s.apply(this,arguments),n.widgets=new Map,n}return Object(Br.a)(i,[{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var r=this.graph.hook.createKnob(t,{clearAll:!0});r&&this.widgets.set(t,r)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var r=this.graph.hook.createKnob(t,{clearAll:!1});r&&this.widgets.set(t,r)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var r=this.widgets.get(t);r&&r.forEach(function(o){return o.dispose()}),this.widgets.delete(t)}}}]),i}(xo),RS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},eE=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"widgetOptions",get:function(){return this.options.panning}},{key:"pannable",get:function(){return this.widgetOptions&&this.widgetOptions.enabled===!0}},{key:"init",value:function(){this.startListening(),this.updateClassName()}},{key:"startListening",value:function(){var e=this.widgetOptions.eventTypes;if(!e)return;e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new O.MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable())}},{key:"stopListening",value:function(){var e=this.widgetOptions.eventTypes;if(!e)return;e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&(this.mousewheelHandle&&this.mousewheelHandle.disable())}},{key:"preparePanning",value:function(e){var t=e.e;(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&this.startPanning(t)}},{key:"allowPanning",value:function(e,t){return this.pannable&&Rh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"startPanning",value:function(e){var t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.view.normalizeEvent(e),r=t.clientX-this.clientX,o=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;var c=this.graph.transform.getTranslation(),p=c.tx+r,y=c.ty+o;this.graph.transform.translate(p,y,{ui:!0})}},{key:"stopPanning",value:function(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}},{key:"updateClassName",value:function(){var e=this.view.container,t=this.view.prefixClassName("graph-panning"),r=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(O.addClass(e,t),O.removeClass(e,r)):(O.removeClass(e,t),O.addClass(e,r)):(O.removeClass(e,t),O.removeClass(e,r))}},{key:"onRightMouseDown",value:function(e){e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}},{key:"allowMouseWheel",value:function(e){return this.pannable&&!e.ctrlKey}},{key:"onMouseWheel",value:function(e,t,r){e.ctrlKey||this.graph.translateBy(-t,-r)}},{key:"autoPanning",value:function(e,t){var r=10,o=this.graph.getGraphArea(),c=0,p=0;e<=o.left+r&&(c=-r),t<=o.top+r&&(p=-r),e>=o.right-r&&(c=r),t>=o.bottom-r&&(p=r),(c!==0||p!==0)&&this.graph.translateBy(-c,-p)}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}},{key:"dispose",value:function(){this.stopListening()}}]),i}(xo);RS([xo.dispose()],eE.prototype,"dispose",null);var PS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},tE=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"hasScroller",value:function(){return this.graph.scroller.widget!=null}},{key:"getContainer",value:function(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}},{key:"init",value:function(){var e=this,t=this.options.autoResize;if(t){var r=typeof t=="boolean"?this.getContainer():t;Vv.bind(r,function(){var o=e.getContainer(),c=o.offsetWidth,p=o.offsetHeight;e.resize(c,p)})}}},{key:"resize",value:function(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}},{key:"resizeGraph",value:function(e,t){this.graph.transform.resize(e,t)}},{key:"resizeScroller",value:function(e,t){this.graph.scroller.resize(e,t)}},{key:"resizePage",value:function(e,t){var r=this.graph.scroller.widget;r&&r.updatePageSize(e,t)}},{key:"dispose",value:function(){Vv.clear(this.getContainer())}}]),i}(xo);PS([xo.dispose()],tE.prototype,"dispose",null);var Li=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},IS=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(a);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(a,n[e])&&(i[n[e]]=a[n[e]]);return i},Ai;(function(a){function s(n,e){return function(t,r,o){var c=o.value,p=e||r;o.value=function(){for(var y=this.options[p],C=arguments.length,S=new Array(C),I=0;I<C;I++)S[I]=arguments[I];if(y!=null){this.getNativeValue=c.bind.apply(c,[this].concat(S));var W=w.call.apply(w,[y,this.graph].concat(S));if(this.getNativeValue=null,W!=null||n===!0&&W===null)return W}return c.call.apply(c,[this].concat(S))}}}a.hook=s;function i(n){return function(e,t,r){var o=r.value,c=n||t;r.value=function(){for(var p=arguments.length,y=new Array(p),C=0;C<p;C++)y[C]=arguments[C];var S=o.call.apply(o,[this].concat(y)),I=this.options[c];return I!=null&&(S=w.call.apply(w,[I,this.graph].concat(y))&&S),S}}}a.after=i})(Ai||(Ai={}));var Oi=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"createModel",value:function(){if(this.options.model)return this.options.model;var e=new Xc;return e.graph=this.graph,e}},{key:"createView",value:function(){return new Nh(this.graph)}},{key:"createRenderer",value:function(){return new ep(this.graph)}},{key:"createDefsManager",value:function(){return new Q0(this.graph)}},{key:"createGridManager",value:function(){return new Og(this.graph)}},{key:"createCoordManager",value:function(){return new J0(this.graph)}},{key:"createKnobManager",value:function(){return new NS(this.graph)}},{key:"createTransform",value:function(e,t){var r=this.getTransformOptions(e);return r.resizable||r.rotatable?new $0(Object.assign(Object.assign({node:e,graph:this.graph},r),t)):(r.clearAll&&$0.removeInstances(this.graph),null)}},{key:"createKnob",value:function(e,t){var r=this,o=Zd.parseOptionGroup(this.graph,e,this.options.knob),c=Object.assign(Object.assign({},o),t);c.clearAll&&W0.removeInstances(this.graph),c.clearAll=!1;var p=e.prop("knob"),y=[],C=Array.isArray(p)?p:[p];return C.forEach(function(S,I){if(S){if(S.enabled===!1)return;if(typeof S.enabled=="function"&&S.enabled.call(r.graph,e)===!1)return}else return;o.enabled&&y.push(new W0(Object.assign({node:e,index:I,graph:r.graph},c)))}),y}},{key:"getTransformOptions",value:function(e){var t=Zd.parseOptionGroup(this.graph,e,this.options.resizing),r=Zd.parseOptionGroup(this.graph,e,this.options.rotating),o=Zd.parseOptionGroup(this.graph,e,this.options.transforming),c=Object.assign(Object.assign({},o),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restrict!=null?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:r.enabled,rotateGrid:r.grid});return c}},{key:"createTransformManager",value:function(){return new pm(this.graph)}},{key:"createHighlightManager",value:function(){return new hm(this.graph)}},{key:"createBackgroundManager",value:function(){return new dm(this.graph)}},{key:"createClipboard",value:function(){return new LS}},{key:"createClipboardManager",value:function(){return new Mg(this.graph)}},{key:"createSnapline",value:function(){return new K0(Object.assign({graph:this.graph},this.options.snapline))}},{key:"createSnaplineManager",value:function(){return new Sg(this.graph)}},{key:"createSelection",value:function(){return new Ag(Object.assign({graph:this.graph},this.options.selecting))}},{key:"createSelectionManager",value:function(){return new _g(this.graph)}},{key:"allowRubberband",value:function(e){return!0}},{key:"createHistoryManager",value:function(){return new rv(Object.assign({graph:this.graph},this.options.history))}},{key:"createScroller",value:function(){return this.options.scroller.enabled?new fm(Object.assign({graph:this.graph},this.options.scroller)):null}},{key:"createScrollerManager",value:function(){return new Dg(this.graph)}},{key:"allowPanning",value:function(e){return!0}},{key:"createMiniMap",value:function(){var e=this.options.minimap,t=e.enabled,r=IS(e,["enabled"]);return t?new H0(Object.assign({graph:this.graph},r)):null}},{key:"createMiniMapManager",value:function(){return new kg(this.graph)}},{key:"createKeyboard",value:function(){return new av(Object.assign({graph:this.graph},this.options.keyboard))}},{key:"createMouseWheel",value:function(){return new Ng(Object.assign({graph:this.graph},this.options.mousewheel))}},{key:"createPrintManager",value:function(){return new iv(this.graph)}},{key:"createFormatManager",value:function(){return new q0(this.graph)}},{key:"createPanningManager",value:function(){return new eE(this.graph)}},{key:"createSizeManager",value:function(){return new tE(this.graph)}},{key:"allowConnectToBlank",value:function(e){var t=this.options.connecting,r=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof r!="function")return!!r;var o=this.graph.findViewByCell(e),c=e.getSourceCell(),p=e.getTargetCell(),y=this.graph.findViewByCell(c),C=this.graph.findViewByCell(p);return w.call(r,this.graph,{edge:e,edgeView:o,sourceCell:c,targetCell:p,sourceView:y,targetView:C,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:o.sourceMagnet,targetMagnet:o.targetMagnet})}},{key:"validateEdge",value:function(e,t,r){if(!this.allowConnectToBlank(e)){var o=e.getSourceCellId(),c=e.getTargetCellId();if(!(o&&c))return!1}var p=this.options.connecting.validateEdge;return p?w.call(p,this.graph,{edge:e,type:t,previous:r}):!0}},{key:"validateMagnet",value:function(e,t,r){if(t.getAttribute("magnet")!=="passive"){var o=this.options.connecting.validateMagnet;return o?w.call(o,this.graph,{e:r,magnet:t,view:e,cell:e.cell}):!0}return!1}},{key:"getDefaultEdge",value:function(e,t){var r,o=this.options.connecting.createEdge;return o&&(r=w.call(o,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),r==null&&(r=new X0),r}},{key:"validateConnection",value:function(e,t,r,o,c,p,y){var C=this,S=this.options.connecting,I=S.allowLoop,W=S.allowNode,q=S.allowEdge,ie=S.allowPort,ve=S.allowMulti!=null?S.allowMulti:S.multi,Le=S.validateConnection,Oe=p?p.cell:null,it=c==="target"?r:e,at=c==="target"?o:t,Qe=!0,qt=function(Xn){var ra=c==="source"?y?y.port:null:Oe?Oe.getSourcePortId():null,Ea=c==="target"?y?y.port:null:Oe?Oe.getTargetPortId():null;return w.call(Xn,C.graph,{edge:Oe,edgeView:p,sourceView:e,targetView:r,sourcePort:ra,targetPort:Ea,sourceMagnet:t,targetMagnet:o,sourceCell:e?e.cell:null,targetCell:r?r.cell:null,type:c})};if(I!=null&&(typeof I=="boolean"?!I&&e===r&&(Qe=!1):Qe=qt(I)),Qe&&ie!=null&&(typeof ie=="boolean"?!ie&&at&&(Qe=!1):Qe=qt(ie)),Qe&&q!=null&&(typeof q=="boolean"?!q&&Zh.isEdgeView(it)&&(Qe=!1):Qe=qt(q)),Qe&&W!=null&&at==null&&(typeof W=="boolean"?!W&&Gc.isNodeView(it)&&(Qe=!1):Qe=qt(W)),Qe&&ve!=null&&p){var Kt=p.cell,Tn=c==="source"?y:Kt.getSource(),Bn=c==="target"?y:Kt.getTarget(),tr=y?this.graph.getCellById(y.cell):null;if(Tn&&Bn&&Tn.cell&&Bn.cell&&tr)if(typeof ve=="function")Qe=qt(ve);else{var hr=this.model.getConnectedEdges(tr,{outgoing:c==="source",incoming:c==="target"});if(hr.length){if(ve==="withPort"){var Lr=hr.some(function(dn){var Xn=dn.getSource(),ra=dn.getTarget();return Xn&&ra&&Xn.cell===Tn.cell&&ra.cell===Bn.cell&&Xn.port!=null&&Xn.port===Tn.port&&ra.port!=null&&ra.port===Bn.port});Lr&&(Qe=!1)}else if(!ve){var Vr=hr.some(function(dn){var Xn=dn.getSource(),ra=dn.getTarget();return Xn&&ra&&Xn.cell===Tn.cell&&ra.cell===Bn.cell});Vr&&(Qe=!1)}}}}return Qe&&Le!=null&&(Qe=qt(Le)),Qe}},{key:"getRestrictArea",value:function(e){var t=this.options.translating.restrict,r=typeof t=="function"?w.call(t,this.graph,e):t;return typeof r=="number"?this.graph.transform.getGraphArea().inflate(r):r===!0?this.graph.transform.getGraphArea():r||null}},{key:"onViewUpdated",value:function(e,t,r){if(t&ep.FLAG_INSERT||r.mounting)return;this.graph.renderer.requestConnectedEdgesUpdate(e,r)}},{key:"onViewPostponed",value:function(e,t,r){return this.graph.renderer.forcePostponedViewUpdate(e,t)}},{key:"getCellView",value:function(e){return null}},{key:"createCellView",value:function(e){var t={graph:this.graph},r=this.getCellView(e);if(r)return new r(e,t);var o=e.view;if(o!=null&&typeof o=="string"){var c=Ss.registry.get(o);return c?new c(e,t):Ss.registry.onNotFound(o)}return e.isNode()?new Gc(e,t):e.isEdge()?new Zh(e,t):null}},{key:"getHTMLComponent",value:function(e){var t=e.getHTML();return typeof t=="string"&&(t=Cf.componentRegistry.get(t)||t),f.isPlainObject(t)&&(t=t.render),typeof t=="function"?w.call(t,this.graph,e):t}},{key:"shouldUpdateHTMLComponent",value:function(e){var t=e.getHTML();if(typeof t=="string"&&(t=Cf.componentRegistry.get(t)||t),f.isPlainObject(t)){var r=t.shouldComponentUpdate;return typeof r=="function"?w.call(r,this.graph,e):!!r}return!1}},{key:"onEdgeLabelRendered",value:function(e){}},{key:"onPortRendered",value:function(e){}},{key:"onToolItemCreated",value:function(e){}}]),i}(xo);Li([Ai.hook()],Oi.prototype,"createModel",null),Li([Ai.hook()],Oi.prototype,"createView",null),Li([Ai.hook()],Oi.prototype,"createRenderer",null),Li([Ai.hook()],Oi.prototype,"createDefsManager",null),Li([Ai.hook()],Oi.prototype,"createGridManager",null),Li([Ai.hook()],Oi.prototype,"createCoordManager",null),Li([Ai.hook()],Oi.prototype,"createKnobManager",null),Li([Ai.hook()],Oi.prototype,"createTransform",null),Li([Ai.hook()],Oi.prototype,"createKnob",null),Li([Ai.hook()],Oi.prototype,"createTransformManager",null),Li([Ai.hook()],Oi.prototype,"createHighlightManager",null),Li([Ai.hook()],Oi.prototype,"createBackgroundManager",null),Li([Ai.hook()],Oi.prototype,"createClipboard",null),Li([Ai.hook()],Oi.prototype,"createClipboardManager",null),Li([Ai.hook()],Oi.prototype,"createSnapline",null),Li([Ai.hook()],Oi.prototype,"createSnaplineManager",null),Li([Ai.hook()],Oi.prototype,"createSelection",null),Li([Ai.hook()],Oi.prototype,"createSelectionManager",null),Li([Ai.hook()],Oi.prototype,"allowRubberband",null),Li([Ai.hook()],Oi.prototype,"createHistoryManager",null),Li([Ai.hook()],Oi.prototype,"createScroller",null),Li([Ai.hook()],Oi.prototype,"createScrollerManager",null),Li([Ai.hook()],Oi.prototype,"allowPanning",null),Li([Ai.hook()],Oi.prototype,"createMiniMap",null),Li([Ai.hook()],Oi.prototype,"createMiniMapManager",null),Li([Ai.hook()],Oi.prototype,"createKeyboard",null),Li([Ai.hook()],Oi.prototype,"createMouseWheel",null),Li([Ai.hook()],Oi.prototype,"createPrintManager",null),Li([Ai.hook()],Oi.prototype,"createFormatManager",null),Li([Ai.hook()],Oi.prototype,"createPanningManager",null),Li([Ai.hook()],Oi.prototype,"createSizeManager",null),Li([Ai.after()],Oi.prototype,"onViewUpdated",null),Li([Ai.after()],Oi.prototype,"onViewPostponed",null),Li([Ai.hook()],Oi.prototype,"getCellView",null),Li([Ai.hook(!0)],Oi.prototype,"createCellView",null),Li([Ai.hook()],Oi.prototype,"getHTMLComponent",null),Li([Ai.hook()],Oi.prototype,"shouldUpdateHTMLComponent",null),Li([Ai.hook()],Oi.prototype,"onEdgeLabelRendered",null),Li([Ai.hook()],Oi.prototype,"onPortRendered",null),Li([Ai.hook()],Oi.prototype,"onToolItemCreated",null);var qd=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},co=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;return Object(_r.a)(this,i),e=s.call(this),e.options=Zd.get(n),e.css=new qp(Object(fu.a)(e)),e.hook=new Oi(Object(fu.a)(e)),e.view=e.hook.createView(),e.defs=e.hook.createDefsManager(),e.coord=e.hook.createCoordManager(),e.transform=e.hook.createTransformManager(),e.knob=e.hook.createKnobManager(),e.highlight=e.hook.createHighlightManager(),e.grid=e.hook.createGridManager(),e.background=e.hook.createBackgroundManager(),e.model=e.hook.createModel(),e.renderer=e.hook.createRenderer(),e.clipboard=e.hook.createClipboardManager(),e.snapline=e.hook.createSnaplineManager(),e.selection=e.hook.createSelectionManager(),e.history=e.hook.createHistoryManager(),e.scroller=e.hook.createScrollerManager(),e.minimap=e.hook.createMiniMapManager(),e.keyboard=e.hook.createKeyboard(),e.mousewheel=e.hook.createMouseWheel(),e.print=e.hook.createPrintManager(),e.format=e.hook.createFormatManager(),e.panning=e.hook.createPanningManager(),e.size=e.hook.createSizeManager(),e}return Object(Br.a)(i,[{key:"container",get:function(){return this.view.container}},{key:Symbol.toStringTag,get:function(){return i.toStringTag}},{key:"isNode",value:function(e){return e.isNode()}},{key:"isEdge",value:function(e){return e.isEdge()}},{key:"resetCells",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.resetCells(e,t),this}},{key:"clearCells",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.clear(e),this}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.toJSON(e)}},{key:"parseJSON",value:function(e){return this.model.parseJSON(e)}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.fromJSON(e,t),this}},{key:"getCellById",value:function(e){return this.model.getCell(e)}},{key:"addNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addNode(e,t)}},{key:"addNodes",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(e.map(function(o){return Ds.isNode(o)?o:t.createNode(o)}),r)}},{key:"createNode",value:function(e){return this.model.createNode(e)}},{key:"removeNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"addEdge",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addEdge(e,t)}},{key:"addEdges",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(e.map(function(o){return gs.isEdge(o)?o:t.createEdge(o)}),r)}},{key:"removeEdge",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"createEdge",value:function(e){return this.model.createEdge(e)}},{key:"addCell",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addCell(e,t),this}},{key:"removeCell",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"removeCells",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCells(e,t)}},{key:"removeConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeConnectedEdges(e,t)}},{key:"disconnectConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.disconnectConnectedEdges(e,t),this}},{key:"hasCell",value:function(e){return this.model.has(e)}},{key:"getCell",value:function(e){return this.model.getCell(e)}},{key:"getCells",value:function(){return this.model.getCells()}},{key:"getCellCount",value:function(){return this.model.total()}},{key:"getNodes",value:function(){return this.model.getNodes()}},{key:"getEdges",value:function(){return this.model.getEdges()}},{key:"getOutgoingEdges",value:function(e){return this.model.getOutgoingEdges(e)}},{key:"getIncomingEdges",value:function(e){return this.model.getIncomingEdges(e)}},{key:"getConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getConnectedEdges(e,t)}},{key:"getRootNodes",value:function(){return this.model.getRoots()}},{key:"getLeafNodes",value:function(){return this.model.getLeafs()}},{key:"isRootNode",value:function(e){return this.model.isRoot(e)}},{key:"isLeafNode",value:function(e){return this.model.isLeaf(e)}},{key:"getNeighbors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNeighbors(e,t)}},{key:"isNeighbor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isNeighbor(e,t,r)}},{key:"getSuccessors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSuccessors(e,t)}},{key:"isSuccessor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isSuccessor(e,t,r)}},{key:"getPredecessors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getPredecessors(e,t)}},{key:"isPredecessor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isPredecessor(e,t,r)}},{key:"getCommonAncestor",value:function(){var e;return(e=this.model).getCommonAncestor.apply(e,arguments)}},{key:"getSubGraph",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSubGraph(e,t)}},{key:"cloneSubGraph",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.cloneSubGraph(e,t)}},{key:"cloneCells",value:function(e){return this.model.cloneCells(e)}},{key:"getNodesFromPoint",value:function(e,t){return this.model.getNodesFromPoint(e,t)}},{key:"getNodesInArea",value:function(e,t,r,o,c){return this.model.getNodesInArea(e,t,r,o,c)}},{key:"getNodesUnderNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNodesUnderNode(e,t)}},{key:"searchCell",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.search(e,t,r),this}},{key:"getShortestPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.getShortestPath(e,t,r)}},{key:"getAllCellsBBox",value:function(){return this.model.getAllCellsBBox()}},{key:"getCellsBBox",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getCellsBBox(e,t)}},{key:"startBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.startBatch(e,t)}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.stopBatch(e,t)}},{key:"batchUpdate",value:function(e,t,r){var o=typeof e=="string"?e:"update",c=typeof e=="string"?t:e,p=typeof t=="function"?r:t;this.startBatch(o,p);var y=c();return this.stopBatch(o,p),y}},{key:"updateCellId",value:function(e,t){return this.model.updateCellId(e,t)}},{key:"isFrozen",value:function(){return this.renderer.isFrozen()}},{key:"freeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.freeze(e),this}},{key:"unfreeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.unfreeze(e),this}},{key:"isAsync",value:function(){return this.renderer.isAsync()}},{key:"setAsync",value:function(e){return this.renderer.setAsync(e),this}},{key:"findView",value:function(e){return no.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}},{key:"findViews",value:function(e){return qr.isRectangleLike(e)?this.findViewsInArea(e):Bt.isPointLike(e)?this.findViewsFromPoint(e):[]}},{key:"findViewByCell",value:function(e){return this.renderer.findViewByCell(e)}},{key:"findViewByElem",value:function(e){return this.renderer.findViewByElem(e)}},{key:"findViewsFromPoint",value:function(e,t){var r=typeof e=="number"?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(r)}},{key:"findViewsInArea",value:function(e,t,r,o,c){var p=typeof e=="number"?{x:e,y:t,width:r,height:o}:e,y=typeof e=="number"?c:t;return this.renderer.findViewsInArea(p,y)}},{key:"isViewMounted",value:function(e){return this.renderer.isViewMounted(e)}},{key:"getMountedViews",value:function(){return this.renderer.getMountedViews()}},{key:"getUnmountedViews",value:function(){return this.renderer.getUnmountedViews()}},{key:"matrix",value:function(e){return typeof e=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}},{key:"resize",value:function(e,t){return this.size.resize(e,t),this}},{key:"resizeGraph",value:function(e,t){return this.size.resizeGraph(e,t),this}},{key:"resizeScroller",value:function(e,t){return this.size.resizeScroller(e,t),this}},{key:"resizePage",value:function(e,t){return this.size.resizePage(e,t),this}},{key:"scale",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return typeof e=="undefined"?this.transform.getScale():(this.transform.scale(e,t,r,o),this)}},{key:"zoom",value:function(e,t){var r=this.scroller.widget;if(r){if(typeof e=="undefined")return r.zoom();r.zoom(e,t)}else{if(typeof e=="undefined")return this.transform.getZoom();this.transform.zoom(e,t)}return this}},{key:"zoomTo",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.scroller.widget;return r?r.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.scroller.widget;return r?r.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}},{key:"rotate",value:function(e,t,r){return typeof e=="undefined"?this.transform.getRotation():(this.transform.rotate(e,t,r),this)}},{key:"translate",value:function(e,t){return typeof e=="undefined"?this.transform.getTranslation():(this.transform.translate(e,t),this)}},{key:"translateBy",value:function(e,t){var r=this.translate(),o=r.tx+e,c=r.ty+t;return this.translate(o,c)}},{key:"getArea",value:function(){return this.transform.getGraphArea()}},{key:"getGraphArea",value:function(){return this.transform.getGraphArea()}},{key:"getContentArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentArea(e)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentBBox(e)}},{key:"fitToContent",value:function(e,t,r,o){return this.transform.fitToContent(e,t,r,o)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.scaleContentToFit(e),this}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,r){var o=this.scroller.widget;return o?o.centerPoint(e,t,r):this.transform.centerPoint(e,t),this}},{key:"centerContent",value:function(e){var t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}},{key:"centerCell",value:function(e,t){var r=this.scroller.widget;return r?r.centerCell(e,t):this.transform.centerCell(e),this}},{key:"positionPoint",value:function(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=this.scroller.widget;return c?c.positionPoint(e,t,r,o):this.transform.positionPoint(e,t,r),this}},{key:"positionRect",value:function(e,t,r){var o=this.scroller.widget;return o?o.positionRect(e,t,r):this.transform.positionRect(e,t),this}},{key:"positionCell",value:function(e,t,r){var o=this.scroller.widget;return o?o.positionCell(e,t,r):this.transform.positionCell(e,t),this}},{key:"positionContent",value:function(e,t){var r=this.scroller.widget;return r?r.positionContent(e,t):this.transform.positionContent(e,t),this}},{key:"getClientMatrix",value:function(){return this.coord.getClientMatrix()}},{key:"getClientOffset",value:function(){return this.coord.getClientOffset()}},{key:"getPageOffset",value:function(){return this.coord.getPageOffset()}},{key:"snapToGrid",value:function(e,t){return this.coord.snapToGrid(e,t)}},{key:"pageToLocal",value:function(e,t,r,o){return qr.isRectangleLike(e)?this.coord.pageToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.pageToLocalRect(e,t,r,o):this.coord.pageToLocalPoint(e,t)}},{key:"localToPage",value:function(e,t,r,o){return qr.isRectangleLike(e)?this.coord.localToPageRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.localToPageRect(e,t,r,o):this.coord.localToPagePoint(e,t)}},{key:"clientToLocal",value:function(e,t,r,o){return qr.isRectangleLike(e)?this.coord.clientToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.clientToLocalRect(e,t,r,o):this.coord.clientToLocalPoint(e,t)}},{key:"localToClient",value:function(e,t,r,o){return qr.isRectangleLike(e)?this.coord.localToClientRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.localToClientRect(e,t,r,o):this.coord.localToClientPoint(e,t)}},{key:"localToGraph",value:function(e,t,r,o){return qr.isRectangleLike(e)?this.coord.localToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.localToGraphRect(e,t,r,o):this.coord.localToGraphPoint(e,t)}},{key:"graphToLocal",value:function(e,t,r,o){return qr.isRectangleLike(e)?this.coord.graphToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.graphToLocalRect(e,t,r,o):this.coord.graphToLocalPoint(e,t)}},{key:"clientToGraph",value:function(e,t,r,o){return qr.isRectangleLike(e)?this.coord.clientToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof o=="number"?this.coord.clientToGraphRect(e,t,r,o):this.coord.clientToGraphPoint(e,t)}},{key:"defineFilter",value:function(e){return this.defs.filter(e)}},{key:"defineGradient",value:function(e){return this.defs.gradient(e)}},{key:"defineMarker",value:function(e){return this.defs.marker(e)}},{key:"getGridSize",value:function(){return this.grid.getGridSize()}},{key:"setGridSize",value:function(e){return this.grid.setGridSize(e),this}},{key:"showGrid",value:function(){return this.grid.show(),this}},{key:"hideGrid",value:function(){return this.grid.hide(),this}},{key:"clearGrid",value:function(){return this.grid.clear(),this}},{key:"drawGrid",value:function(e){return this.grid.draw(e),this}},{key:"updateBackground",value:function(){return this.background.update(),this}},{key:"drawBackground",value:function(e,t){var r=this.scroller.widget;return r!=null&&(this.options.background==null||!t)?r.backgroundManager.draw(e):this.background.draw(e),this}},{key:"clearBackground",value:function(e){var t=this.scroller.widget;return t!=null&&(this.options.background==null||!e)?t.backgroundManager.clear():this.background.clear(),this}},{key:"isClipboardEnabled",value:function(){return!this.clipboard.disabled}},{key:"enableClipboard",value:function(){return this.clipboard.enable(),this}},{key:"disableClipboard",value:function(){return this.clipboard.disable(),this}},{key:"toggleClipboard",value:function(e){return e!=null?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}},{key:"isClipboardEmpty",value:function(){return this.clipboard.isEmpty()}},{key:"getCellsInClipboard",value:function(){return this.clipboard.cells}},{key:"cleanClipboard",value:function(){return this.clipboard.clean(),this}},{key:"copy",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.copy(e,t),this}},{key:"cut",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.cut(e,t),this}},{key:"paste",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;return this.clipboard.paste(e,t)}},{key:"isHistoryEnabled",value:function(){return!this.history.disabled}},{key:"enableHistory",value:function(){return this.history.enable(),this}},{key:"disableHistory",value:function(){return this.history.disable(),this}},{key:"toggleHistory",value:function(e){return e!=null?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}},{key:"undo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.undo(e),this}},{key:"undoAndCancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.cancel(e),this}},{key:"redo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.redo(e),this}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"cleanHistory",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.history.clean(e)}},{key:"isKeyboardEnabled",value:function(){return!this.keyboard.disabled}},{key:"enableKeyboard",value:function(){return this.keyboard.enable(),this}},{key:"disableKeyboard",value:function(){return this.keyboard.disable(),this}},{key:"toggleKeyboard",value:function(e){return e!=null?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}},{key:"bindKey",value:function(e,t,r){return this.keyboard.on(e,t,r),this}},{key:"unbindKey",value:function(e,t){return this.keyboard.off(e,t),this}},{key:"isMouseWheelEnabled",value:function(){return!this.mousewheel.disabled}},{key:"enableMouseWheel",value:function(){return this.mousewheel.enable(),this}},{key:"disableMouseWheel",value:function(){return this.mousewheel.disable(),this}},{key:"toggleMouseWheel",value:function(e){return e==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}},{key:"isPannable",value:function(){var e=this.scroller.widget;return e?this.scroller.pannable:this.panning.pannable}},{key:"enablePanning",value:function(){var e=this.scroller.widget;return e?this.scroller.enablePanning():this.panning.enablePanning(),this}},{key:"disablePanning",value:function(){var e=this.scroller.widget;return e?this.scroller.disablePanning():this.panning.disablePanning(),this}},{key:"togglePanning",value:function(e){return e==null?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}},{key:"lockScroller",value:function(){var e;(e=this.scroller.widget)===null||e===void 0||e.lock()}},{key:"unlockScroller",value:function(){var e;(e=this.scroller.widget)===null||e===void 0||e.unlock()}},{key:"updateScroller",value:function(){var e;(e=this.scroller.widget)===null||e===void 0||e.update()}},{key:"getScrollbarPosition",value:function(){var e=this.scroller.widget;return e.scrollbarPosition()}},{key:"setScrollbarPosition",value:function(e,t,r){var o=this.scroller.widget;return o.scrollbarPosition(e,t,r),this}},{key:"scrollToPoint",value:function(e,t,r){var o=this.scroller.widget;return o.scrollToPoint(e,t,r),this}},{key:"scrollToContent",value:function(e){var t=this.scroller.widget;return t.scrollToContent(e),this}},{key:"scrollToCell",value:function(e,t){var r=this.scroller.widget;return r.scrollToCell(e,t),this}},{key:"transitionToPoint",value:function(e,t,r){var o=this.scroller.widget;return o.transitionToPoint(e,t,r),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.scroller.widget;return r.transitionToRect(e,t),this}},{key:"isSelectionEnabled",value:function(){return!this.selection.disabled}},{key:"enableSelection",value:function(){return this.selection.enable(),this}},{key:"disableSelection",value:function(){return this.selection.disable(),this}},{key:"toggleSelection",value:function(e){return e!=null?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}},{key:"isMultipleSelection",value:function(){return this.selection.isMultiple()}},{key:"enableMultipleSelection",value:function(){return this.selection.enableMultiple(),this}},{key:"disableMultipleSelection",value:function(){return this.selection.disableMultiple(),this}},{key:"toggleMultipleSelection",value:function(e){return e!=null?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}},{key:"isSelectionMovable",value:function(){return this.selection.widget.options.movable!==!1}},{key:"enableSelectionMovable",value:function(){return this.selection.widget.options.movable=!0,this}},{key:"disableSelectionMovable",value:function(){return this.selection.widget.options.movable=!1,this}},{key:"toggleSelectionMovable",value:function(e){return e!=null?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}},{key:"isRubberbandEnabled",value:function(){return!this.selection.rubberbandDisabled}},{key:"enableRubberband",value:function(){return this.selection.enableRubberband(),this}},{key:"disableRubberband",value:function(){return this.selection.disableRubberband(),this}},{key:"toggleRubberband",value:function(e){return e!=null?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}},{key:"isStrictRubberband",value:function(){return this.selection.widget.options.strict===!0}},{key:"enableStrictRubberband",value:function(){return this.selection.widget.options.strict=!0,this}},{key:"disableStrictRubberband",value:function(){return this.selection.widget.options.strict=!1,this}},{key:"toggleStrictRubberband",value:function(e){return e!=null?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}},{key:"setRubberbandModifiers",value:function(e){this.selection.setModifiers(e)}},{key:"setSelectionFilter",value:function(e){return this.selection.setFilter(e),this}},{key:"setSelectionDisplayContent",value:function(e){return this.selection.setContent(e),this}},{key:"isSelectionEmpty",value:function(){return this.selection.isEmpty()}},{key:"cleanSelection",value:function(e){return this.selection.clean(e),this}},{key:"resetSelection",value:function(e,t){return this.selection.reset(e,t),this}},{key:"getSelectedCells",value:function(){return this.selection.cells}},{key:"getSelectedCellCount",value:function(){return this.selection.length}},{key:"isSelected",value:function(e){return this.selection.isSelected(e)}},{key:"select",value:function(e,t){return this.selection.select(e,t),this}},{key:"unselect",value:function(e,t){return this.selection.unselect(e,t),this}},{key:"isSnaplineEnabled",value:function(){return!this.snapline.widget.disabled}},{key:"enableSnapline",value:function(){return this.snapline.widget.enable(),this}},{key:"disableSnapline",value:function(){return this.snapline.widget.disable(),this}},{key:"toggleSnapline",value:function(e){if(e!=null)e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}},{key:"hideSnapline",value:function(){return this.snapline.widget.hide(),this}},{key:"setSnaplineFilter",value:function(e){return this.snapline.widget.setFilter(e),this}},{key:"isSnaplineOnResizingEnabled",value:function(){return this.snapline.widget.options.resizing===!0}},{key:"enableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!0,this}},{key:"disableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!1,this}},{key:"toggleSnaplineOnResizing",value:function(e){return e!=null?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}},{key:"isSharpSnapline",value:function(){return this.snapline.widget.options.sharp===!0}},{key:"enableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!0,this}},{key:"disableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!1,this}},{key:"toggleSharpSnapline",value:function(e){return e!=null?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}},{key:"getSnaplineTolerance",value:function(){return this.snapline.widget.options.tolerance}},{key:"setSnaplineTolerance",value:function(e){return this.snapline.widget.options.tolerance=e,this}},{key:"removeTools",value:function(){return this.emit("tools:remove"),this}},{key:"hideTools",value:function(){return this.emit("tools:hide"),this}},{key:"showTools",value:function(){return this.emit("tools:show"),this}},{key:"toSVG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toSVG(e,t)}},{key:"toDataURL",value:function(e,t){this.format.toDataURL(e,t)}},{key:"toPNG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toPNG(e,t)}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toJPEG(e,t)}},{key:"printPreview",value:function(e){this.print.show(e)}},{key:"dispose",value:function(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}]),i}(fl);qd([bd.checkScroller()],co.prototype,"lockScroller",null),qd([bd.checkScroller()],co.prototype,"unlockScroller",null),qd([bd.checkScroller()],co.prototype,"updateScroller",null),qd([bd.checkScroller()],co.prototype,"getScrollbarPosition",null),qd([bd.checkScroller()],co.prototype,"setScrollbarPosition",null),qd([bd.checkScroller()],co.prototype,"scrollToPoint",null),qd([bd.checkScroller()],co.prototype,"scrollToContent",null),qd([bd.checkScroller()],co.prototype,"scrollToCell",null),qd([bd.checkScroller()],co.prototype,"transitionToPoint",null),qd([bd.checkScroller()],co.prototype,"transitionToRect",null),qd([fl.dispose()],co.prototype,"dispose",null),function(a){a.View=Nh,a.Hook=Oi,a.Renderer=ep,a.Keyboard=av,a.MouseWheel=Ng,a.BaseManager=xo,a.DefsManager=Q0,a.GridManager=Og,a.CoordManager=J0,a.PrintManager=iv,a.FormatManager=q0,a.MiniMapManager=kg,a.HistoryManager=rv,a.SnaplineManager=Sg,a.ScrollerManager=Dg,a.ClipboardManager=Mg,a.TransformManager=pm,a.HighlightManager=hm,a.BackgroundManager=dm,a.SelectionManager=_g}(co||(co={})),function(a){a.toStringTag="X6.".concat(a.name);function s(i){if(i==null)return!1;if(i instanceof a)return!0;var n=i[Symbol.toStringTag],e=i;return(n==null||n===a.toStringTag)&&e.hook!=null&&e.view!=null&&e.model!=null}a.isGraph=s}(co||(co={})),function(a){function s(i,n){var e=i instanceof HTMLElement?new a({container:i}):new a(i);return n!=null&&e.fromJSON(n),e}a.render=s}(co||(co={})),function(a){a.registerNode=Ds.registry.register,a.registerEdge=gs.registry.register,a.registerView=Ss.registry.register,a.registerAttr=Ef.registry.register,a.registerGrid=Oh.registry.register,a.registerFilter=vp.registry.register,a.registerNodeTool=bp.registry.register,a.registerEdgeTool=Ep.registry.register,a.registerBackground=Xp.registry.register,a.registerHighlighter=Yf.registry.register,a.registerPortLayout=$h.registry.register,a.registerPortLabelLayout=mp.registry.register,a.registerMarker=Ah.registry.register,a.registerRouter=kh.registry.register,a.registerConnector=Jh.registry.register,a.registerAnchor=xp.registry.register,a.registerEdgeAnchor=wp.registry.register,a.registerConnectionPoint=Cp.registry.register,a.registerConnectionStrategy=gp.registry.register,a.registerHTMLComponent=Cf.componentRegistry.register}(co||(co={})),function(a){a.unregisterNode=Ds.registry.unregister,a.unregisterEdge=gs.registry.unregister,a.unregisterView=Ss.registry.unregister,a.unregisterAttr=Ef.registry.unregister,a.unregisterGrid=Oh.registry.unregister,a.unregisterFilter=vp.registry.unregister,a.unregisterNodeTool=bp.registry.unregister,a.unregisterEdgeTool=Ep.registry.unregister,a.unregisterBackground=Xp.registry.unregister,a.unregisterHighlighter=Yf.registry.unregister,a.unregisterPortLayout=$h.registry.unregister,a.unregisterPortLabelLayout=mp.registry.unregister,a.unregisterMarker=Ah.registry.unregister,a.unregisterRouter=kh.registry.unregister,a.unregisterConnector=Jh.registry.unregister,a.unregisterAnchor=xp.registry.unregister,a.unregisterEdgeAnchor=wp.registry.unregister,a.unregisterConnectionPoint=Cp.registry.unregister,a.unregisterConnectionStrategy=gp.registry.unregister,a.unregisterHTMLComponent=Cf.componentRegistry.unregister}(co||(co={}));var LS=function(){function a(){Object(_r.a)(this,a),this.cells=[]}return Object(Br.a)(a,[{key:"copy",value:function(i,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.options=Object.assign({},e);var t=Xc.isModel(n)?n:n.model,r=t.cloneSubGraph(i,e);this.cells=g.sortBy(Object.keys(r).map(function(o){return r[o]}),function(o){return o.isEdge()?2:1}),this.serialize(e)}},{key:"cut",value:function(i,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.copy(i,n,e);var t=co.isGraph(n)?n.model:n;t.batchUpdate("cut",function(){i.forEach(function(r){return r.remove()})})}},{key:"paste",value:function(i){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Object.assign(Object.assign({},this.options),e),r=t.offset,o=t.edgeProps,c=t.nodeProps,p=20,y=20;r&&(p=typeof r=="number"?r:r.dx,y=typeof r=="number"?r:r.dy),this.deserialize(t);var C=this.cells;C.forEach(function(I){I.model=null,I.removeProp("zIndex"),(p||y)&&I.translate(p,y),c&&I.isNode()&&I.prop(c),o&&I.isEdge()&&I.prop(o)});var S=co.isGraph(i)?i.model:i;return S.batchUpdate("paste",function(){S.addCells(n.cells)}),this.copy(C,i,e),C}},{key:"serialize",value:function(i){i.useLocalStorage!==!1&&ov.save(this.cells)}},{key:"deserialize",value:function(i){if(i.useLocalStorage){var n=ov.fetch();n&&(this.cells=n)}}},{key:"isEmpty",value:function(){return this.cells.length<=0}},{key:"clean",value:function(){this.options={},this.cells=[],ov.clean()}}]),a}(),ov;(function(a){var s="".concat(Nl.prefixCls,".clipboard.cells");function i(t){if(window.localStorage){var r=t.map(function(o){return o.toJSON()});localStorage.setItem(s,JSON.stringify(r))}}a.save=i;function n(){if(window.localStorage){var t=localStorage.getItem(s),r=t?JSON.parse(t):[];if(r)return Xc.fromJSON(r)}}a.fetch=n;function e(){window.localStorage&&localStorage.removeItem(s)}a.clean=e})(ov||(ov={}));var jS=function(){function a(s){Object(_r.a)(this,a),this.halo=s}return Object(Br.a)(a,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"node",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(n){if(this.options.useCellGeometry){var e=n.cell;return e.getBBox()}return n.getBBox()},content:function(n){var e=E.template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),t=n.cell,r=t.getBBox();return e({x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height),angle:Math.floor(t.getAngle())})},magnet:function(n){return n.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}},{key:"removeCell",value:function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}},{key:"startLink",value:function(i){var n=i.x,e=i.y;this.halo.startBatch();var t=this.graph,r=this.createEdgeConnectedToSource();r.setTarget({x:n,y:e}),this.model.addEdge(r,{validation:!1,halo:this.halo.cid,async:!1}),t.view.undelegateEvents(),this.edgeView=t.renderer.findViewByCell(r),this.edgeView.prepareArrowheadDragging("target",{x:n,y:e,fallbackAction:"remove"})}},{key:"createEdgeConnectedToSource",value:function(){var i=this.getMagnet(this.view,"source"),n=this.getEdgeTerminal(this.view,i),e=this.graph.hook.getDefaultEdge(this.view,i);return e.setSource(n),e}},{key:"getMagnet",value:function(i,n){var e=this.options.magnet;if(typeof e=="function"){var t=w.call(e,this.halo,i,n);if(t instanceof SVGElement)return t}throw new Error("`magnet()` has to return an SVGElement")}},{key:"getEdgeTerminal",value:function(i,n){var e={cell:i.cell.id};if(n!==i.container){var t=n.getAttribute("port");t?e.port=t:e.selector=i.getSelector(n)}return e}},{key:"doLink",value:function(i){var n=i.e,e=i.x,t=i.y;this.edgeView&&this.edgeView.onMouseMove(n,e,t)}},{key:"stopLink",value:function(i){var n=i.e,e=i.x,t=i.y,r=this.edgeView;if(r){r.onMouseUp(n,e,t);var o=r.cell;o.hasLoop()&&this.makeLoopEdge(o),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:o}),this.edgeView=null}this.graph.view.delegateEvents()}},{key:"makeLoopEdge",value:function(i){var n=null,e=null,t=this.options.loopEdgeWidth,r=this.graph.options,o=new qr(0,0,r.width,r.height),c=this.graph.graphToLocal(this.view.getBBox()),p=[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(y){var C=null,S=0,I=0;switch(y){case"top":C=new Bt(c.x+c.width/2,c.y-t),S=t/2;break;case"bottom":C=new Bt(c.x+c.width/2,c.y+c.height+t),S=t/2;break;case"left":C=new Bt(c.x-t,c.y+c.height/2),I=t/2;break;case"right":C=new Bt(c.x+c.width+t,c.y+c.height/2),I=t/2;break;default:break}return C?(n=C.translate(-S,-I),e=C.translate(S,I),o.containsPoint(n)&&o.containsPoint(e)):!1});p&&n&&e&&i.setVertices([n,e])}},{key:"startResize",value:function(i){var n=i.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(Pi.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),hu("node:resize",n,this.view)}},{key:"doResize",value:function(i){var n=i.e,e=i.dx,t=i.dy,r=this.node.getSize(),o=Math.max(r.width+(this.flip?e:t),1),c=Math.max(r.height+(this.flip?t:e),1);this.node.resize(o,c,{absolute:!0}),hu("node:resizing",n,this.view)}},{key:"stopResize",value:function(i){var n=i.e;this.view.removeClass("node-resizing"),hu("node:resized",n,this.view),this.halo.stopBatch()}},{key:"startClone",value:function(i){var n=i.e,e=i.x,t=i.y;this.halo.startBatch();var r=this.options,o=r.clone(this.cell,{clone:!0});if(!no.isCell(o))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(o,e,t),this.model.addCell(o,{halo:this.halo.cid,async:!1});var c=this.graph.renderer.findViewByCell(o);c.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:c})}},{key:"centerNodeAtCursor",value:function(i,n,e){var t=i.getBBox().getCenter(),r=n-t.x,o=e-t.y;i.translate(r,o)}},{key:"doClone",value:function(i){var n=i.e,e=i.x,t=i.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseMove(n,e,t)}},{key:"stopClone",value:function(i){var n=i.e,e=i.x,t=i.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startFork",value:function(i){var n=i.e,e=i.x,t=i.y;this.halo.startBatch();var r=this.options.clone(this.cell,{fork:!0});if(!no.isCell(r))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(r,e,t),this.model.addCell(r,{halo:this.halo.cid,async:!1});var o=this.createEdgeConnectedToSource(),c=this.graph.renderer.findViewByCell(r),p=this.getMagnet(c,"target"),y=this.getEdgeTerminal(c,p);o.setTarget(y),this.model.addEdge(o,{halo:this.halo.cid,async:!1}),c.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:c})}},{key:"doFork",value:function(i){var n=i.e,e=i.x,t=i.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseMove(n,e,t)}},{key:"stopFork",value:function(i){var n=i.e,e=i.x,t=i.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startRotate",value:function(i){var n=this,e=i.e,t=i.x,r=i.y;this.halo.startBatch();var o=this.node.getBBox().getCenter(),c=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(p,y){return y.isNode()&&p.push(y),p},c),this.halo.setEventData(e,{center:o,nodes:c,rotateStartAngles:c.map(function(p){return p.getAngle()}),clientStartAngle:new Bt(t,r).theta(o)}),c.forEach(function(p){var y=n.graph.findViewByCell(p);y&&(y.addClass("node-rotating"),hu("node:rotate",e,y))})}},{key:"doRotate",value:function(i){var n=this,e=i.e,t=i.x,r=i.y,o=this.halo.getEventData(e),c=o.clientStartAngle-new Bt(t,r).theta(o.center);o.nodes.forEach(function(p,y){var C=o.rotateStartAngles[y],S=zs.snapToGrid(C+c,n.options.rotateGrid);p.rotate(S,{absolute:!0,center:o.center,halo:n.halo.cid}),hu("node:rotating",e,n.graph.findViewByCell(p))})}},{key:"stopRotate",value:function(i){var n=this,e=i.e,t=this.halo.getEventData(e);t.nodes.forEach(function(r){var o=n.graph.findViewByCell(r);o.removeClass("node-rotating"),hu("node:rotated",e,o)}),this.halo.stopBatch()}},{key:"unlink",value:function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}]),a}(),US=function(){function a(s){Object(_r.a)(this,a),this.halo=s}return Object(Br.a)(a,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"edge",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(n){return n.graph.localToGraph(n.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}},{key:"removeEdge",value:function(){this.cell.remove()}},{key:"directionSwap",value:function(){var i=this.edge.getSource(),n=this.edge.getTarget();this.edge.prop({source:n,target:i})}}]),a}(),Rg=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(){return Object(_r.a)(this,i),s.apply(this,arguments)}return Object(Br.a)(i,[{key:"type",get:function(){return this.options.type||"surround"}},{key:"handleOptions",get:function(){return this.options}},{key:"init",value:function(e){this.options=f.merge(i.defaultOptions,this.cell.isNode()?new jS(this).getPresets():this.cell.isEdge()?new US(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}},{key:"startListening",value:function(){var e=this.model,t=this.graph,r=this.view.cell;r.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),ni(Object(ui.a)(i.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){var e=this.model,t=this.graph,r=this.view.cell;this.undelegateEvents(),r.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),ni(Object(ui.a)(i.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){var e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(vm.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass("".concat(t,"-handles")).appendTo(this.container),this.$content=this.$("<div/>").addClass("".concat(t,"-content")).appendTo(this.container),this.$container.appendTo(this.graph.container),this}},{key:"remove",value:function(){return this.stopBatch(),this.view.removeClass(vm.NODE_CLS),ni(Object(ui.a)(i.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.isRendered()){this.updateContent();var e=this.getBBox(),t=this.options.tinyThreshold||0,r=this.options.smallThreshold||0;this.$handleContainer.toggleClass("".concat(this.handleClassName,"-tiny"),e.width<t&&e.height<t);var o="".concat(this.handleClassName,"-small");this.$handleContainer.toggleClass(o,!this.$handleContainer.hasClass(o)&&e.width<r&&e.height<r),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&(this.hasHandle("fork")&&this.toggleFork())}}},{key:"updateContent",value:function(){var e=this.options.content;if(typeof e=="function"){var t=w.call(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}},{key:"getBBox",value:function(){var e=this.view,t=this.options.bbox,r=typeof t=="function"?w.call(t,this,e):t;return qr.create(Object.assign({x:0,y:0,width:1,height:1},r))}},{key:"removeCell",value:function(){this.cell.remove()}},{key:"toggleFork",value:function(){var e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),r=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!r),t.remove()}},{key:"toggleUnlink",value:function(){var e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}},{key:"startBatch",value:function(){this.model.startBatch("halo",{halo:this.cid})}},{key:"stopBatch",value:function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}]),i}(tv);(function(a){a.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(i){return i.clone().removeZIndex()}}})(Rg||(Rg={})),Object.getOwnPropertyNames(ev.prototype).forEach(function(a){a!=="constructor"&&Object.defineProperty(Rg.prototype,a,Object.getOwnPropertyDescriptor(ev.prototype,a))});var vm;(function(a){a.NODE_CLS="has-widget-halo"})(vm||(vm={}));var FS=function(a,s,i,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,i):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,s,i,n);else for(var o=a.length-1;o>=0;o--)(r=a[o])&&(t=(e<3?r(t):e>3?r(s,i,t):r(s,i))||t);return e>3&&t&&Object.defineProperty(s,i,t),t},sv=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;return Object(_r.a)(this,i),e=s.call(this),e.options=Object.assign(Object.assign({},i.defaults),n),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName("widget-dnd")),e.draggingGraph=new co(Object.assign(Object.assign({},e.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),e.$container.append(e.draggingGraph.container),e}return Object(Br.a)(i,[{key:"targetScroller",get:function(){var e=this.options.target;return co.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return co.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"snapline",get:function(){return this.targetGraph.snapline.widget}},{key:"start",value:function(e,t){var r=t;r.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.containerParent||document.body),this.sourceNode=e,this.prepareDragging(e,r.clientX,r.clientY);var o=this.updateNodePosition(r.clientX,r.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:r,node:e,cell:e,view:this.draggingView,x:o.x,y:o.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(i.documentEvents,r.data)}},{key:"isSnaplineEnabled",value:function(){return this.snapline&&!this.snapline.disabled}},{key:"prepareDragging",value:function(e,t,r){var o=this.draggingGraph,c=o.model,p=this.options.getDragNode(e,{sourceNode:e,draggingGraph:o,targetGraph:this.targetGraph});p.position(0,0);var y=5;if(this.isSnaplineEnabled()&&(y+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){var C=this.targetGraph.transform.getScale();o.scale(C.sx,C.sy),y*=Math.max(C.sx,C.sy)}else o.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),c.resetCells([p]);var S=o.findViewByCell(p);S.undelegateEvents(),S.cell.off("changed"),o.fitToContent({padding:y,allowNewOrigin:"any"});var I=S.getBBox();this.geometryBBox=S.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(I.getTopLeft()),this.draggingNode=p,this.draggingView=S,this.draggingBBox=p.getBBox(),this.padding=y,this.originOffset=this.updateGraphPosition(t,r)}},{key:"updateGraphPosition",value:function(e,t){var r=document.body.scrollTop||document.documentElement.scrollTop,o=this.delta,c=this.geometryBBox,p=this.padding||5,y={left:e-o.x-c.width/2-p,top:t-o.y-c.height/2-p+r};return this.draggingGraph&&this.$container.offset(y),y}},{key:"updateNodePosition",value:function(e,t){var r=this.targetGraph.clientToLocal(e,t),o=this.draggingBBox;return r.x-=o.width/2,r.y-=o.height/2,this.draggingNode.position(r.x,r.y),r}},{key:"snap",value:function(e){var t=e.cell,r=e.current,o=e.options,c=t;if(o.snapped){var p=this.draggingBBox;c.position(p.x+o.tx,p.y+o.ty,{silent:!0}),this.draggingView.translate(),c.position(r.x,r.y,{silent:!0}),this.snapOffset={x:o.tx,y:o.ty}}else this.snapOffset=null}},{key:"onDragging",value:function(e){var t=this.draggingView;if(t){e.preventDefault();var r=this.normalizeEvent(e),o=r.clientX,c=r.clientY;this.updateGraphPosition(o,c);var p=this.updateNodePosition(o,c),y=this.targetGraph.options.embedding.enabled,C=(y||this.isSnaplineEnabled())&&this.isInsideValidArea({x:o,y:c});if(y){t.setEventData(r,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});var S=t.getEventData(r);C?t.processEmbedding(r,S):t.clearEmbedding(S),this.candidateEmbedView=S.candidateEmbedView}this.isSnaplineEnabled()&&(C?this.snapline.snapOnMoving({e:r,view:t,x:p.x,y:p.y}):this.snapline.hide())}}},{key:"onDragEnd",value:function(e){var t=this,r=this.draggingNode;if(r){var o=this.normalizeEvent(e),c=this.draggingView,p=this.draggingBBox,y=this.snapOffset,C=p.x,S=p.y;y&&(C+=y.x,S+=y.y),r.position(C,S,{silent:!0});var I=this.drop(r,{x:o.clientX,y:o.clientY}),W=function(ie){ie?(t.onDropped(r),t.targetGraph.options.embedding.enabled&&c&&(c.setEventData(o,{cell:ie,graph:t.targetGraph,candidateEmbedView:t.candidateEmbedView}),c.finalizeEmbedding(o,c.getEventData(o)))):t.onDropInvalid(),t.candidateEmbedView=null,t.targetModel.stopBatch("dnd")};w.isAsync(I)?(this.undelegateDocumentEvents(),I.then(W)):W(I)}}},{key:"clearDragging",value:function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}},{key:"onDropped",value:function(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}},{key:"onDropInvalid",value:function(){var e=this,t=this.draggingNode;if(t){var r=this.options.animation;if(r){var o=typeof r=="object"&&r.duration||150,c=typeof r=="object"&&r.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,o,c,function(){return e.onDropped(t)})}else this.onDropped(t)}}},{key:"isInsideValidArea",value:function(e){var t,r=this.targetGraph,o=this.targetScroller;if(o)if(o.options.autoResize)t=this.getDropArea(o.container);else{var c=this.getDropArea(o.container);t=this.getDropArea(r.container).intersectsWithRect(c)}else t=this.getDropArea(r.container);return t&&t.containsPoint(e)}},{key:"getDropArea",value:function(e){var t=this.$(e),r=t.offset(),o=document.body.scrollTop||document.documentElement.scrollTop,c=document.body.scrollLeft||document.documentElement.scrollLeft;return qr.create({x:r.left+parseInt(t.css("border-left-width"),10)-c,y:r.top+parseInt(t.css("border-top-width"),10)-o,width:t.innerWidth(),height:t.innerHeight()})}},{key:"drop",value:function(e,t){var r=this;if(this.isInsideValidArea(t)){var o=this.targetGraph,c=o.model,p=o.clientToLocal(t),y=this.sourceNode,C=this.options.getDropNode(e,{sourceNode:y,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),S=C.getBBox();p.x+=S.x-S.width/2,p.y+=S.y-S.height/2;var I=this.snapOffset?1:o.getGridSize();C.position(zs.snapToGrid(p.x,I),zs.snapToGrid(p.y,I)),C.removeZIndex();var W=this.options.validateNode,q=W?W(C,{sourceNode:y,draggingNode:e,droppingNode:C,targetGraph:o,draggingGraph:this.draggingGraph}):!0;return typeof q=="boolean"?q?(c.addCell(C,{stencil:this.cid}),C):null:w.toDeferredBoolean(q).then(function(ie){return ie?(c.addCell(C,{stencil:r.cid}),C):null})}return null}},{key:"onRemove",value:function(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}},{key:"dispose",value:function(){this.remove()}}]),i}(so);FS([so.dispose()],sv.prototype,"dispose",null),function(a){a.defaults={animation:!1,getDragNode:function(i){return i.clone()},getDropNode:function(i){return i.clone()}},a.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(sv||(sv={}));function BS(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Xc.isModel(a)?a:new Xc().resetCells(a,{sort:!1,dryrun:!0}),n=i.getNodes(),e=s.columns||1,t=Math.ceil(n.length/e),r=s.dx||0,o=s.dy||0,c=s.center!==!1,p=s.resizeToFit===!0,y=s.marginX||0,C=s.marginY||0,S=[],I=s.columnWidth;if(I==="compact")for(var W=0;W<e;W+=1){var q=Tf.getNodesInColumn(n,W,e);S.push(Tf.getMaxDim(q,"width")+r)}else{(I==null||I==="auto")&&(I=Tf.getMaxDim(n,"width")+r);for(var ie=0;ie<e;ie+=1)S.push(I)}var ve=Tf.accumulate(S,y),Le=[],Oe=s.rowHeight;if(Oe==="compact")for(var it=0;it<t;it+=1){var at=Tf.getNodesInRow(n,it,e);Le.push(Tf.getMaxDim(at,"height")+o)}else{(Oe==null||Oe==="auto")&&(Oe=Tf.getMaxDim(n,"height")+o);for(var Qe=0;Qe<t;Qe+=1)Le.push(Oe)}var qt=Tf.accumulate(Le,C);i.startBatch("layout"),n.forEach(function(Kt,Tn){var Bn=Tn%e,tr=Math.floor(Tn/e),hr=S[Bn],Lr=Le[tr],Vr=0,dn=0,Xn=Kt.getSize();if(p){var ra=hr-2*r,Ea=Lr-2*o,ja=Xn.height*(Xn.width?ra/Xn.width:1),li=Xn.width*(Xn.height?Ea/Xn.height:1);Lr<ja?ra=li:Ea=ja,Xn={width:ra,height:Ea},Kt.setSize(Xn,s)}c&&(Vr=(hr-Xn.width)/2,dn=(Lr-Xn.height)/2),Kt.position(ve[Bn]+r+Vr,qt[tr]+o+dn,s)}),i.stopBatch("layout")}var Tf;(function(a){function s(t,r){return t.reduce(function(o,c){return Math.max(c.getSize()[r],o)},0)}a.getMaxDim=s;function i(t,r,o){for(var c=[],p=o*r,y=p+o;p<y;p+=1)c.push(t[p]);return c}a.getNodesInRow=i;function n(t,r,o){for(var c=[],p=r,y=t.length;p<y;p+=o)c.push(t[p]);return c}a.getNodesInColumn=n;function e(t,r){return t.reduce(function(o,c,p){return o.push(o[p]+c),o},[r||0])}a.accumulate=e})(Tf||(Tf={}));var nE=function(a){Object(Zr.a)(i,a);var s=Object(Wr.a)(i);function i(n){var e;if(Object(_r.a)(this,i),e=s.call(this),e.graphs={},e.$groups={},e.options=Object.assign(Object.assign({},i.defaultOptions),n),e.dnd=new sv(e.options),e.onSearch=w.debounce(e.onSearch,200),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Ec.base)).attr("data-not-found-text",e.options.notFoundText||"No matches found"),e.options.collapsable=n.collapsable&&n.groups&&n.groups.some(function(c){return c.collapsable!==!1}),e.options.collapsable){e.$container.addClass("collapsable");var t=n.groups&&n.groups.every(function(c){return c.collapsed||c.collapsable===!1});t&&e.$container.addClass("collapsed")}e.$("<div/>").addClass(e.prefixClassName(Ec.title)).html(e.options.title).appendTo(e.$container),n.search&&e.$container.addClass("searchable").append(e.renderSearch()),e.$content=e.$("<div/>").addClass(e.prefixClassName(Ec.content)).appendTo(e.$container);var r=n.stencilGraphOptions||{};if(n.groups&&n.groups.length)n.groups.forEach(function(c){var p=e.$("<div/>").addClass(e.prefixClassName(Ec.group)).attr("data-name",c.name);(c.collapsable==null&&n.collapsable||c.collapsable!==!1)&&p.addClass("collapsable"),p.toggleClass("collapsed",c.collapsed===!0);var y=e.$("<h3/>").addClass(e.prefixClassName(Ec.groupTitle)).html(c.title||c.name),C=e.$("<div/>").addClass(e.prefixClassName(Ec.groupContent)),S=c.graphOptions,I=new co(Object.assign(Object.assign(Object.assign({},r),S),{container:document.createElement("div"),model:r.model||new Xc,width:c.graphWidth||n.stencilGraphWidth,height:c.graphHeight||n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));C.append(I.container),p.append(y,C).appendTo(e.$content),e.$groups[c.name]=p,e.graphs[c.name]=I});else{var o=new co(Object.assign(Object.assign({},r),{container:document.createElement("div"),model:r.model||new Xc,width:n.stencilGraphWidth,height:n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));e.$content.append(o.container),e.graphs[uv.defaultGroupName]=o}return e.startListening(),Object(cb.a)(e,Object(fu.a)(e))}return Object(Br.a)(i,[{key:"targetScroller",get:function(){var e=this.options.target;return co.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return co.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"renderSearch",value:function(){return this.$("<div/>").addClass(this.prefixClassName(Ec.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Ec.searchText)))}},{key:"startListening",value:function(){var e,t=this,r=this.prefixClassName(Ec.title),o=this.prefixClassName(Ec.searchText),c=this.prefixClassName(Ec.groupTitle);this.delegateEvents((e={},Z(e,"click .".concat(r),"onTitleClick"),Z(e,"touchstart .".concat(r),"onTitleClick"),Z(e,"click .".concat(c),"onGroupTitleClick"),Z(e,"touchstart .".concat(c),"onGroupTitleClick"),Z(e,"input .".concat(o),"onSearch"),Z(e,"focusin .".concat(o),"onSearchFocusIn"),Z(e,"focusout .".concat(o),"onSearchFocusOut"),e)),Object.keys(this.graphs).forEach(function(p){var y=t.graphs[p];y.on("cell:mousedown",t.onDragStart,t)})}},{key:"stopListening",value:function(){var e=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(t){var r=e.graphs[t];r.off("cell:mousedown",e.onDragStart,e)})}},{key:"load",value:function(e,t){var r=this;return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(function(o){e[o]&&r.loadGroup(e[o],o)}),this}},{key:"loadGroup",value:function(e,t){var r=this.getModel(t);if(r){var o=e.map(function(S){return Ds.isNode(S)?S:Ds.create(S)});r.resetCells(o)}var c=this.getGroup(t),p=this.options.stencilGraphHeight;c&&c.graphHeight!=null&&(p=c.graphHeight);var y=c&&c.layout||this.options.layout;if(y&&r&&w.call(y,this,r,c),!p){var C=this.getGraph(t);C.fitToContent({minWidth:C.options.width,gridHeight:1,padding:c&&c.graphPadding||this.options.stencilGraphPadding||10})}return this}},{key:"onDragStart",value:function(e){var t=e.e,r=e.node;this.dnd.start(r,t)}},{key:"filter",value:function(e,t){var r=this,o=Object.keys(this.graphs).reduce(function(c,p){var y=r.graphs[p],C=p===uv.defaultGroupName?null:p,S=y.model.getNodes().filter(function(ie){var ve=!1;typeof t=="function"?ve=w.call(t,r,ie,e,C,r):typeof t=="boolean"?ve=t:ve=r.isCellMatched(ie,e,t,e.toLowerCase()!==e);var Le=y.renderer.findViewByCell(ie);return Le&&Le.$(Le.container).toggleClass("unmatched",!ve),ve}),I=S.length>0,W=r.options,q=new Xc;return q.resetCells(S),W.layout&&w.call(W.layout,r,q,r.getGroup(p)),r.$groups[p]&&r.$groups[p].toggleClass("unmatched",!I),y.fitToContent({gridWidth:1,gridHeight:1,padding:W.stencilGraphPadding||10}),c||I},!1);this.$container.toggleClass("not-found",!o)}},{key:"isCellMatched",value:function(e,t,r,o){return t&&r?Object.keys(r).some(function(c){if(c==="*"||e.shape===c){var p=r[c];if(typeof p=="boolean")return p;var y=Array.isArray(p)?p:[p];return y.some(function(C){var S=e.getPropByPath(C);return S!=null?(S="".concat(S),o||(S=S.toLowerCase()),S.indexOf(t)>=0):!1})}return!1}):!0}},{key:"onSearch",value:function(e){this.filter(e.target.value,this.options.search)}},{key:"onSearchFocusIn",value:function(){this.$container.addClass("is-focused")}},{key:"onSearchFocusOut",value:function(){this.$container.removeClass("is-focused")}},{key:"onTitleClick",value:function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}},{key:"onGroupTitleClick",value:function(e){var t=this,r=this.$(e.target).closest(".".concat(this.prefixClassName(Ec.group)));this.toggleGroup(r.attr("data-name")||"");var o=Object.keys(this.$groups).every(function(c){var p=t.getGroup(c),y=t.$groups[c];return p&&p.collapsable===!1||y.hasClass("collapsed")});this.$container.toggleClass("collapsed",o)}},{key:"getModel",value:function(e){var t=this.getGraph(e);return t?t.model:null}},{key:"getGraph",value:function(e){return this.graphs[e||uv.defaultGroupName]}},{key:"getGroup",value:function(e){var t=this.options.groups;return e!=null&&t&&t.length?t.find(function(r){return r.name===e}):null}},{key:"toggleGroup",value:function(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}},{key:"collapseGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}},{key:"expandGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}},{key:"isGroupCollapsable",value:function(e){var t=this.$groups[e];return t.hasClass("collapsable")}},{key:"isGroupCollapsed",value:function(e){var t=this.$groups[e];return t&&t.hasClass("collapsed")}},{key:"collapseGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.collapseGroup(t)}),this}},{key:"expandGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.expandGroup(t)}),this}},{key:"resizeGroup",value:function(e,t){var r=this.graphs[e];return r&&r.resize(t.width,t.height),this}},{key:"onRemove",value:function(){var e=this;Object.keys(this.graphs).forEach(function(t){var r=e.graphs[t];r.view.remove(),delete e.graphs[t]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}]),i}(so);(function(a){a.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout:function(i,n){var e={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};BS(i,Object.assign(Object.assign(Object.assign({},e),this.options.layoutOptions),n?n.layoutOptions:{}))}},sv.defaults)})(nE||(nE={}));var Ec;(function(a){a.base="widget-stencil",a.title="".concat(a.base,"-title"),a.search="".concat(a.base,"-search"),a.searchText="".concat(a.search,"-text"),a.content="".concat(a.base,"-content"),a.group="".concat(a.base,"-group"),a.groupTitle="".concat(a.group,"-title"),a.groupContent="".concat(a.group,"-content")})(Ec||(Ec={}));var uv;(function(a){a.defaultGroupName="__default__"})(uv||(uv={}));function VS(){if(Nl.trackable){var a="https://kcart.alipay.com/web/bi.do",s=new Image,i=Object.assign(Object.assign({},Nl.trackInfo),{version:tA,pg:document.URL,r:new Date().getTime(),x6:!0,page_type:"syslog"}),n=encodeURIComponent(JSON.stringify([i]));s.src="".concat(a,"?BIProfile=merge&d=").concat(n)}}Nl.trackable&&setTimeout(VS,3e3)},function(j,_,u){"use strict";var g=u(18),f=u(21),E=u(57),T=u(58),w=u(140),D=u(59),O=u(60),L=u(1),U=u.n(L),V=u(53),z=u.n(V),K=u(55),J=u(89),he=u(141),ue=u(80),de=u(81),ae=u(272),le=u(32),re=u.n(le);function se($e,Re,Ye){return Ye?$e[0]===Re[0]:$e[0]===Re[0]&&$e[1]===Re[1]}function ye($e,Re,Ye){var tt=$e[Re]||{};return Object(g.a)(Object(g.a)({},tt),Ye)}function Z($e,Re,Ye,tt){for(var gt=Ye.points,kt=Object.keys($e),Pe=0;Pe<kt.length;Pe+=1){var pt=kt[Pe];if(se($e[pt].points,gt,tt))return"".concat(Re,"-placement-").concat(pt)}return""}var Ee=u(22),k=u(46),Te=u(273),De=u(70);function Ue($e){var Re=$e.prefixCls,Ye=$e.motion,tt=$e.animation,gt=$e.transitionName;return Ye||(tt?{motionName:"".concat(Re,"-").concat(tt)}:gt?{motionName:gt}:null)}function St($e){var Re=$e.prefixCls,Ye=$e.visible,tt=$e.zIndex,gt=$e.mask,kt=$e.maskMotion,Pe=$e.maskAnimation,pt=$e.maskTransitionName;if(!gt)return null;var st={};return(kt||pt||Pe)&&(st=Object(g.a)({motionAppear:!0},Ue({motion:kt,prefixCls:Re,transitionName:pt,animation:Pe}))),L.createElement(De.a,Object(f.a)({},st,{visible:Ye,removeOnLeave:!0}),function(Ft){var An=Ft.className;return L.createElement("div",{style:{zIndex:tt},className:re()("".concat(Re,"-mask"),An)})})}var Ae=u(42),Wt=u(274),At=u(171),mt=u(275);function Dt($e,Re){return $e===Re?!0:!$e||!Re?!1:"pageX"in Re&&"pageY"in Re?$e.pageX===Re.pageX&&$e.pageY===Re.pageY:"clientX"in Re&&"clientY"in Re?$e.clientX===Re.clientX&&$e.clientY===Re.clientY:!1}function Ke($e,Re){$e!==document.activeElement&&Object(J.a)(Re,$e)&&typeof $e.focus=="function"&&$e.focus()}function Tt($e,Re){var Ye=null,tt=null;function gt(Pe){var pt=Object(Ee.a)(Pe,1),st=pt[0].target;if(!document.documentElement.contains(st))return;var Ft=st.getBoundingClientRect(),An=Ft.width,Gn=Ft.height,Yn=Math.floor(An),vr=Math.floor(Gn);(Ye!==Yn||tt!==vr)&&Promise.resolve().then(function(){Re({width:Yn,height:vr})}),Ye=Yn,tt=vr}var kt=new mt.a(gt);return $e&&kt.observe($e),function(){kt.disconnect()}}var Gt=function($e,Re){var Ye=U.a.useRef(!1),tt=U.a.useRef(null);function gt(){window.clearTimeout(tt.current)}function kt(Pe){if(!Ye.current||Pe===!0){if($e()===!1)return;Ye.current=!0,gt(),tt.current=window.setTimeout(function(){Ye.current=!1},Re)}else gt(),tt.current=window.setTimeout(function(){Ye.current=!1,kt()},Re)}return[kt,function(){Ye.current=!1,gt()}]};function gn($e){return typeof $e!="function"?null:$e()}function Ut($e){return Object(Ae.a)($e)!=="object"||!$e?null:$e}var Ht=function(Re,Ye){var tt=Re.children,gt=Re.disabled,kt=Re.target,Pe=Re.align,pt=Re.onAlign,st=Re.monitorWindowResize,Ft=Re.monitorBufferTime,An=Ft===void 0?0:Ft,Gn=U.a.useRef({}),Yn=U.a.useRef(),vr=U.a.Children.only(tt),zr=U.a.useRef({});zr.current.disabled=gt,zr.current.target=kt,zr.current.onAlign=pt;var et=Gt(function(){var vt=zr.current,Kn=vt.disabled,kr=vt.target,Ur=vt.onAlign;if(!Kn&&kr){var fa=Yn.current,ea,ia=gn(kr),Va=Ut(kr);Gn.current.element=ia,Gn.current.point=Va;var da=document,$a=da.activeElement;return ia&&Object(Wt.a)(ia)?ea=Object(At.a)(fa,ia,Pe):Va&&(ea=Object(At.b)(fa,Va,Pe)),Ke($a,fa),Ur&&ea&&Ur(fa,ea),!0}return!1},An),wt=Object(Ee.a)(et,2),lt=wt[0],Vt=wt[1],cn=U.a.useRef({cancel:function(){}}),We=U.a.useRef({cancel:function(){}});U.a.useEffect(function(){var vt=gn(kt),Kn=Ut(kt);Yn.current!==We.current.element&&(We.current.cancel(),We.current.element=Yn.current,We.current.cancel=Tt(Yn.current,lt)),(Gn.current.element!==vt||!Dt(Gn.current.point,Kn))&&(lt(),cn.current.element!==vt&&(cn.current.cancel(),cn.current.element=vt,cn.current.cancel=Tt(vt,lt)))}),U.a.useEffect(function(){gt?Vt():lt()},[gt]);var Jt=U.a.useRef(null);return U.a.useEffect(function(){st?Jt.current||(Jt.current=Object(de.a)(window,"resize",lt)):Jt.current&&(Jt.current.remove(),Jt.current=null)},[st]),U.a.useEffect(function(){return function(){cn.current.cancel(),We.current.cancel(),Jt.current&&Jt.current.remove(),Vt()}},[]),U.a.useImperativeHandle(Ye,function(){return{forceAlign:function(){return lt(!0)}}}),U.a.isValidElement(vr)&&(vr=U.a.cloneElement(vr,{ref:Object(ue.a)(vr.ref,Yn)})),vr},Rt=U.a.forwardRef(Ht);Rt.displayName="Align";var Fe=Rt,me=Fe,ze=u(13),Be=u.n(ze),ut=u(276),xt=["measure","align",null,"motion"],$t=function($e,Re){var Ye=Object(L.useState)(null),tt=Object(Ee.a)(Ye,2),gt=tt[0],kt=tt[1],Pe=Object(L.useRef)(),pt=Object(L.useRef)(!1);function st(Gn){pt.current||kt(Gn)}function Ft(){K.a.cancel(Pe.current)}function An(Gn){Ft(),Pe.current=Object(K.a)(function(){st(function(Yn){switch(gt){case"align":return"motion";case"motion":return"stable";default:}return Yn}),Gn==null||Gn()})}return Object(L.useEffect)(function(){st("measure")},[$e]),Object(L.useEffect)(function(){switch(gt){case"measure":Re();break;default:}gt&&(Pe.current=Object(K.a)(Object(ut.a)(Be.a.mark(function Gn(){var Yn,vr;return Be.a.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:Yn=xt.indexOf(gt),vr=xt[Yn+1],vr&&Yn!==-1&&st(vr);case 3:case"end":return et.stop()}},Gn)}))))},[gt]),Object(L.useEffect)(function(){return function(){pt.current=!0,Ft()}},[]),[gt,An]},Qt=function($e){var Re=L.useState({width:0,height:0}),Ye=Object(Ee.a)(Re,2),tt=Ye[0],gt=Ye[1];function kt(pt){gt({width:pt.offsetWidth,height:pt.offsetHeight})}var Pe=L.useMemo(function(){var pt={};if($e){var st=tt.width,Ft=tt.height;$e.indexOf("height")!==-1&&Ft?pt.height=Ft:$e.indexOf("minHeight")!==-1&&Ft&&(pt.minHeight=Ft),$e.indexOf("width")!==-1&&st?pt.width=st:$e.indexOf("minWidth")!==-1&&st&&(pt.minWidth=st)}return pt},[$e,tt]);return[Pe,kt]},on=L.forwardRef(function($e,Re){var Ye=$e.visible,tt=$e.prefixCls,gt=$e.className,kt=$e.style,Pe=$e.children,pt=$e.zIndex,st=$e.stretch,Ft=$e.destroyPopupOnHide,An=$e.forceRender,Gn=$e.align,Yn=$e.point,vr=$e.getRootDomNode,zr=$e.getClassNameFromAlign,et=$e.onAlign,wt=$e.onMouseEnter,lt=$e.onMouseLeave,Vt=$e.onMouseDown,cn=$e.onTouchStart,We=Object(L.useRef)(),Jt=Object(L.useRef)(),vt=Object(L.useState)(),Kn=Object(Ee.a)(vt,2),kr=Kn[0],Ur=Kn[1],fa=Qt(st),ea=Object(Ee.a)(fa,2),ia=ea[0],Va=ea[1];function da(){st&&Va(vr())}var $a=$t(Ye,da),di=Object(Ee.a)($a,2),Da=di[0],Ya=di[1],ro=Object(L.useRef)();function ys(){return Yn||vr}function Co(){var fo;(fo=We.current)===null||fo===void 0||fo.forceAlign()}function Gs(fo,To){if(Da==="align"){var bs=zr(To);Ur(bs),kr!==bs?Promise.resolve().then(function(){Co()}):Ya(function(){var bo;(bo=ro.current)===null||bo===void 0||bo.call(ro)}),et==null||et(fo,To)}}var Ho=Object(g.a)({},Ue($e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(fo){var To=Ho[fo];Ho[fo]=function(bs,bo){return Ya(),To==null?void 0:To(bs,bo)}});function rs(){return new Promise(function(fo){ro.current=fo})}L.useEffect(function(){!Ho.motionName&&Da==="motion"&&Ya()},[Ho.motionName,Da]),L.useImperativeHandle(Re,function(){return{forceAlign:Co,getElement:function(){return Jt.current}}});var as=Object(g.a)(Object(g.a)({},ia),{},{zIndex:pt,opacity:Da==="motion"||Da==="stable"||!Ye?void 0:0,pointerEvents:Da==="stable"?void 0:"none"},kt),_s=!0;(Gn==null?void 0:Gn.points)&&(Da==="align"||Da==="stable")&&(_s=!1);var Js=Pe;return L.Children.count(Pe)>1&&(Js=L.createElement("div",{className:"".concat(tt,"-content")},Pe)),L.createElement(De.a,Object(f.a)({visible:Ye,ref:Jt,leavedClassName:"".concat(tt,"-hidden")},Ho,{onAppearPrepare:rs,onEnterPrepare:rs,removeOnLeave:Ft,forceRender:An}),function(fo,To){var bs=fo.className,bo=fo.style,Es=re()(tt,gt,kr,bs);return L.createElement(me,{target:ys(),key:"popup",ref:We,monitorWindowResize:!0,disabled:_s,align:Gn,onAlign:Gs},L.createElement("div",{ref:To,className:Es,onMouseEnter:wt,onMouseLeave:lt,onMouseDownCapture:Vt,onTouchStartCapture:cn,style:Object(g.a)(Object(g.a)({},bo),as)},Js))})});on.displayName="PopupInner";var Mn=on,Nn=L.forwardRef(function($e,Re){var Ye=$e.prefixCls,tt=$e.visible,gt=$e.zIndex,kt=$e.children,Pe=$e.mobile;Pe=Pe===void 0?{}:Pe;var pt=Pe.popupClassName,st=Pe.popupStyle,Ft=Pe.popupMotion,An=Ft===void 0?{}:Ft,Gn=Pe.popupRender,Yn=L.useRef();L.useImperativeHandle(Re,function(){return{forceAlign:function(){},getElement:function(){return Yn.current}}});var vr=Object(g.a)({zIndex:gt},st),zr=kt;return L.Children.count(kt)>1&&(zr=L.createElement("div",{className:"".concat(Ye,"-content")},kt)),Gn&&(zr=Gn(zr)),L.createElement(De.a,Object(f.a)({visible:tt,ref:Yn,removeOnLeave:!0},An),function(et,wt){var lt=et.className,Vt=et.style,cn=re()(Ye,pt,lt);return L.createElement("div",{ref:wt,className:cn,style:Object(g.a)(Object(g.a)({},Vt),vr)},zr)})});Nn.displayName="MobilePopupInner";var qn=Nn,nr=L.forwardRef(function($e,Re){var Ye=$e.visible,tt=$e.mobile,gt=Object(k.a)($e,["visible","mobile"]),kt=Object(L.useState)(Ye),Pe=Object(Ee.a)(kt,2),pt=Pe[0],st=Pe[1],Ft=Object(L.useState)(!1),An=Object(Ee.a)(Ft,2),Gn=An[0],Yn=An[1],vr=Object(g.a)(Object(g.a)({},gt),{},{visible:pt});Object(L.useEffect)(function(){st(Ye),Ye&&tt&&Yn(Object(Te.a)())},[Ye,tt]);var zr=Gn?L.createElement(qn,Object(f.a)({},vr,{mobile:tt,ref:Re})):L.createElement(Mn,Object(f.a)({},vr,{ref:Re}));return L.createElement("div",null,L.createElement(St,vr),zr)});nr.displayName="Popup";var xn=nr,pn=L.createContext(null),pr=pn;function gr(){}function Ce(){return""}function Jn($e){return $e?$e.ownerDocument:window.document}var Ln=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function yr($e){var Re=function(Ye){Object(D.a)(gt,Ye);var tt=Object(O.a)(gt);function gt(kt){var Pe;Object(E.a)(this,gt),Pe=tt.call(this,kt),Pe.popupRef=L.createRef(),Pe.triggerRef=L.createRef(),Pe.onMouseEnter=function(st){var Ft=Pe.props.mouseEnterDelay;Pe.fireEvents("onMouseEnter",st),Pe.delaySetPopupVisible(!0,Ft,Ft?null:st)},Pe.onMouseMove=function(st){Pe.fireEvents("onMouseMove",st),Pe.setPoint(st)},Pe.onMouseLeave=function(st){Pe.fireEvents("onMouseLeave",st),Pe.delaySetPopupVisible(!1,Pe.props.mouseLeaveDelay)},Pe.onPopupMouseEnter=function(){Pe.clearDelayTimer()},Pe.onPopupMouseLeave=function(st){var Ft;if(st.relatedTarget&&!st.relatedTarget.setTimeout&&Object(J.a)((Ft=Pe.popupRef.current)===null||Ft===void 0?void 0:Ft.getElement(),st.relatedTarget))return;Pe.delaySetPopupVisible(!1,Pe.props.mouseLeaveDelay)},Pe.onFocus=function(st){Pe.fireEvents("onFocus",st),Pe.clearDelayTimer(),Pe.isFocusToShow()&&(Pe.focusTime=Date.now(),Pe.delaySetPopupVisible(!0,Pe.props.focusDelay))},Pe.onMouseDown=function(st){Pe.fireEvents("onMouseDown",st),Pe.preClickTime=Date.now()},Pe.onTouchStart=function(st){Pe.fireEvents("onTouchStart",st),Pe.preTouchTime=Date.now()},Pe.onBlur=function(st){Pe.fireEvents("onBlur",st),Pe.clearDelayTimer(),Pe.isBlurToHide()&&Pe.delaySetPopupVisible(!1,Pe.props.blurDelay)},Pe.onContextMenu=function(st){st.preventDefault(),Pe.fireEvents("onContextMenu",st),Pe.setPopupVisible(!0,st)},Pe.onContextMenuClose=function(){Pe.isContextMenuToShow()&&Pe.close()},Pe.onClick=function(st){if(Pe.fireEvents("onClick",st),Pe.focusTime){var Ft;if(Pe.preClickTime&&Pe.preTouchTime?Ft=Math.min(Pe.preClickTime,Pe.preTouchTime):Pe.preClickTime?Ft=Pe.preClickTime:Pe.preTouchTime&&(Ft=Pe.preTouchTime),Math.abs(Ft-Pe.focusTime)<20)return;Pe.focusTime=0}Pe.preClickTime=0,Pe.preTouchTime=0,Pe.isClickToShow()&&(Pe.isClickToHide()||Pe.isBlurToHide())&&st&&st.preventDefault&&st.preventDefault();var An=!Pe.state.popupVisible;(Pe.isClickToHide()&&!An||An&&Pe.isClickToShow())&&Pe.setPopupVisible(!Pe.state.popupVisible,st)},Pe.onPopupMouseDown=function(){if(Pe.hasPopupMouseDown=!0,clearTimeout(Pe.mouseDownTimeout),Pe.mouseDownTimeout=window.setTimeout(function(){Pe.hasPopupMouseDown=!1},0),Pe.context){var st;(st=Pe.context).onPopupMouseDown.apply(st,arguments)}},Pe.onDocumentClick=function(st){if(Pe.props.mask&&!Pe.props.maskClosable)return;var Ft=st.target,An=Pe.getRootDomNode(),Gn=Pe.getPopupDomNode();(!Object(J.a)(An,Ft)||Pe.isContextMenuOnly())&&!Object(J.a)(Gn,Ft)&&!Pe.hasPopupMouseDown&&Pe.close()},Pe.getRootDomNode=function(){var st=Pe.props.getTriggerDOMNode;if(st)return st(Pe.triggerRef.current);try{var Ft=Object(he.a)(Pe.triggerRef.current);if(Ft)return Ft}catch(An){}return z.a.findDOMNode(Object(w.a)(Pe))},Pe.getPopupClassNameFromAlign=function(st){var Ft=[],An=Pe.props,Gn=An.popupPlacement,Yn=An.builtinPlacements,vr=An.prefixCls,zr=An.alignPoint,et=An.getPopupClassNameFromAlign;return Gn&&Yn&&Ft.push(Z(Yn,vr,st,zr)),et&&Ft.push(et(st)),Ft.join(" ")},Pe.getComponent=function(){var st=Pe.props,Ft=st.prefixCls,An=st.destroyPopupOnHide,Gn=st.popupClassName,Yn=st.onPopupAlign,vr=st.popupMotion,zr=st.popupAnimation,et=st.popupTransitionName,wt=st.popupStyle,lt=st.mask,Vt=st.maskAnimation,cn=st.maskTransitionName,We=st.maskMotion,Jt=st.zIndex,vt=st.popup,Kn=st.stretch,kr=st.alignPoint,Ur=st.mobile,fa=st.forceRender,ea=Pe.state,ia=ea.popupVisible,Va=ea.point,da=Pe.getPopupAlign(),$a={};return Pe.isMouseEnterToShow()&&($a.onMouseEnter=Pe.onPopupMouseEnter),Pe.isMouseLeaveToHide()&&($a.onMouseLeave=Pe.onPopupMouseLeave),$a.onMouseDown=Pe.onPopupMouseDown,$a.onTouchStart=Pe.onPopupMouseDown,L.createElement(xn,Object(f.a)({prefixCls:Ft,destroyPopupOnHide:An,visible:ia,point:kr&&Va,className:Gn,align:da,onAlign:Yn,animation:zr,getClassNameFromAlign:Pe.getPopupClassNameFromAlign},$a,{stretch:Kn,getRootDomNode:Pe.getRootDomNode,style:wt,mask:lt,zIndex:Jt,transitionName:et,maskAnimation:Vt,maskTransitionName:cn,maskMotion:We,ref:Pe.popupRef,motion:vr,mobile:Ur,forceRender:fa}),typeof vt=="function"?vt():vt)},Pe.attachParent=function(st){K.a.cancel(Pe.attachId);var Ft=Pe.props,An=Ft.getPopupContainer,Gn=Ft.getDocument,Yn=Pe.getRootDomNode(),vr;An?(Yn||An.length===0)&&(vr=An(Yn)):vr=Gn(Pe.getRootDomNode()).body,vr?vr.appendChild(st):Pe.attachId=Object(K.a)(function(){Pe.attachParent(st)})},Pe.getContainer=function(){var st=Pe.props.getDocument,Ft=st(Pe.getRootDomNode()).createElement("div");return Ft.style.position="absolute",Ft.style.top="0",Ft.style.left="0",Ft.style.width="100%",Pe.attachParent(Ft),Ft},Pe.setPoint=function(st){var Ft=Pe.props.alignPoint;if(!Ft||!st)return;Pe.setState({point:{pageX:st.pageX,pageY:st.pageY}})},Pe.handlePortalUpdate=function(){Pe.state.prevPopupVisible!==Pe.state.popupVisible&&Pe.props.afterPopupVisibleChange(Pe.state.popupVisible)},Pe.triggerContextValue={onPopupMouseDown:Pe.onPopupMouseDown};var pt;return"popupVisible"in kt?pt=!!kt.popupVisible:pt=!!kt.defaultPopupVisible,Pe.state={prevPopupVisible:pt,popupVisible:pt},Ln.forEach(function(st){Pe["fire".concat(st)]=function(Ft){Pe.fireEvents(st,Ft)}}),Pe}return Object(T.a)(gt,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var Pe=this.props,pt=this.state;if(pt.popupVisible){var st;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(st=Pe.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Object(de.a)(st,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(st=st||Pe.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Object(de.a)(st,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(st=st||Pe.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Object(de.a)(st,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Object(de.a)(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),K.a.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var Pe;return((Pe=this.popupRef.current)===null||Pe===void 0?void 0:Pe.getElement())||null}},{key:"getPopupAlign",value:function(){var Pe=this.props,pt=Pe.popupPlacement,st=Pe.popupAlign,Ft=Pe.builtinPlacements;return pt&&Ft?ye(Ft,pt,st):st}},{key:"setPopupVisible",value:function(Pe,pt){var st=this.props.alignPoint,Ft=this.state.popupVisible;this.clearDelayTimer(),Ft!==Pe&&("popupVisible"in this.props||this.setState({popupVisible:Pe,prevPopupVisible:Ft}),this.props.onPopupVisibleChange(Pe)),st&&pt&&Pe&&this.setPoint(pt)}},{key:"delaySetPopupVisible",value:function(Pe,pt,st){var Ft=this,An=pt*1e3;if(this.clearDelayTimer(),An){var Gn=st?{pageX:st.pageX,pageY:st.pageY}:null;this.delayTimer=window.setTimeout(function(){Ft.setPopupVisible(Pe,Gn),Ft.clearDelayTimer()},An)}else this.setPopupVisible(Pe,st)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(Pe){var pt=this.props.children.props,st=this.props;return pt[Pe]&&st[Pe]?this["fire".concat(Pe)]:pt[Pe]||st[Pe]}},{key:"isClickToShow",value:function(){var Pe=this.props,pt=Pe.action,st=Pe.showAction;return pt.indexOf("click")!==-1||st.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var Pe=this.props.action;return Pe==="contextMenu"||Pe.length===1&&Pe[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var Pe=this.props,pt=Pe.action,st=Pe.showAction;return pt.indexOf("contextMenu")!==-1||st.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var Pe=this.props,pt=Pe.action,st=Pe.hideAction;return pt.indexOf("click")!==-1||st.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var Pe=this.props,pt=Pe.action,st=Pe.showAction;return pt.indexOf("hover")!==-1||st.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var Pe=this.props,pt=Pe.action,st=Pe.hideAction;return pt.indexOf("hover")!==-1||st.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var Pe=this.props,pt=Pe.action,st=Pe.showAction;return pt.indexOf("focus")!==-1||st.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var Pe=this.props,pt=Pe.action,st=Pe.hideAction;return pt.indexOf("focus")!==-1||st.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var Pe;(Pe=this.popupRef.current)===null||Pe===void 0||Pe.forceAlign()}}},{key:"fireEvents",value:function(Pe,pt){var st=this.props.children.props[Pe];st&&st(pt);var Ft=this.props[Pe];Ft&&Ft(pt)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var Pe=this.state.popupVisible,pt=this.props,st=pt.children,Ft=pt.forceRender,An=pt.alignPoint,Gn=pt.className,Yn=pt.autoDestroy,vr=L.Children.only(st),zr={key:"trigger"};this.isContextMenuToShow()?zr.onContextMenu=this.onContextMenu:zr.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(zr.onClick=this.onClick,zr.onMouseDown=this.onMouseDown,zr.onTouchStart=this.onTouchStart):(zr.onClick=this.createTwoChains("onClick"),zr.onMouseDown=this.createTwoChains("onMouseDown"),zr.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(zr.onMouseEnter=this.onMouseEnter,An&&(zr.onMouseMove=this.onMouseMove)):zr.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?zr.onMouseLeave=this.onMouseLeave:zr.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(zr.onFocus=this.onFocus,zr.onBlur=this.onBlur):(zr.onFocus=this.createTwoChains("onFocus"),zr.onBlur=this.createTwoChains("onBlur"));var et=re()(vr&&vr.props&&vr.props.className,Gn);et&&(zr.className=et);var wt=Object(g.a)({},zr);Object(ue.c)(vr)&&(wt.ref=Object(ue.a)(this.triggerRef,vr.ref));var lt=L.cloneElement(vr,wt),Vt;return(Pe||this.popupRef.current||Ft)&&(Vt=L.createElement($e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!Pe&&Yn&&(Vt=null),L.createElement(pr.Provider,{value:this.triggerContextValue},lt,Vt)}}],[{key:"getDerivedStateFromProps",value:function(Pe,pt){var st=Pe.popupVisible,Ft={};return st!==void 0&&pt.popupVisible!==st&&(Ft.popupVisible=st,Ft.prevPopupVisible=pt.popupVisible),Ft}}]),gt}(L.Component);return Re.contextType=pr,Re.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Ce,getDocument:Jn,onPopupVisibleChange:gr,afterPopupVisibleChange:gr,onPopupAlign:gr,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},Re}var Un=_.a=yr(ae.a)},,,,,,,,,,function(j,_,u){"use strict";/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g=u(122),f=typeof Symbol=="function"&&Symbol.for,E=f?Symbol.for("react.element"):60103,T=f?Symbol.for("react.portal"):60106,w=f?Symbol.for("react.fragment"):60107,D=f?Symbol.for("react.strict_mode"):60108,O=f?Symbol.for("react.profiler"):60114,L=f?Symbol.for("react.provider"):60109,U=f?Symbol.for("react.context"):60110,V=f?Symbol.for("react.forward_ref"):60112,z=f?Symbol.for("react.suspense"):60113,K=f?Symbol.for("react.memo"):60115,J=f?Symbol.for("react.lazy"):60116,he=typeof Symbol=="function"&&Symbol.iterator;function ue(me){for(var ze="https://reactjs.org/docs/error-decoder.html?invariant="+me,Be=1;Be<arguments.length;Be++)ze+="&args[]="+encodeURIComponent(arguments[Be]);return"Minified React error #"+me+"; visit "+ze+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var de={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ae={};function le(me,ze,Be){this.props=me,this.context=ze,this.refs=ae,this.updater=Be||de}le.prototype.isReactComponent={},le.prototype.setState=function(me,ze){if(typeof me!="object"&&typeof me!="function"&&me!=null)throw Error(ue(85));this.updater.enqueueSetState(this,me,ze,"setState")},le.prototype.forceUpdate=function(me){this.updater.enqueueForceUpdate(this,me,"forceUpdate")};function re(){}re.prototype=le.prototype;function se(me,ze,Be){this.props=me,this.context=ze,this.refs=ae,this.updater=Be||de}var ye=se.prototype=new re;ye.constructor=se,g(ye,le.prototype),ye.isPureReactComponent=!0;var Z={current:null},Ee=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function Te(me,ze,Be){var ut,xt={},$t=null,Qt=null;if(ze!=null)for(ut in ze.ref!==void 0&&(Qt=ze.ref),ze.key!==void 0&&($t=""+ze.key),ze)Ee.call(ze,ut)&&!k.hasOwnProperty(ut)&&(xt[ut]=ze[ut]);var on=arguments.length-2;if(on===1)xt.children=Be;else if(1<on){for(var Mn=Array(on),Nn=0;Nn<on;Nn++)Mn[Nn]=arguments[Nn+2];xt.children=Mn}if(me&&me.defaultProps)for(ut in on=me.defaultProps,on)xt[ut]===void 0&&(xt[ut]=on[ut]);return{$$typeof:E,type:me,key:$t,ref:Qt,props:xt,_owner:Z.current}}function De(me,ze){return{$$typeof:E,type:me.type,key:ze,ref:me.ref,props:me.props,_owner:me._owner}}function Ue(me){return typeof me=="object"&&me!==null&&me.$$typeof===E}function St(me){var ze={"=":"=0",":":"=2"};return"$"+(""+me).replace(/[=:]/g,function(Be){return ze[Be]})}var Ae=/\/+/g,Wt=[];function At(me,ze,Be,ut){if(Wt.length){var xt=Wt.pop();return xt.result=me,xt.keyPrefix=ze,xt.func=Be,xt.context=ut,xt.count=0,xt}return{result:me,keyPrefix:ze,func:Be,context:ut,count:0}}function mt(me){me.result=null,me.keyPrefix=null,me.func=null,me.context=null,me.count=0,10>Wt.length&&Wt.push(me)}function Dt(me,ze,Be,ut){var xt=typeof me;(xt==="undefined"||xt==="boolean")&&(me=null);var $t=!1;if(me===null)$t=!0;else switch(xt){case"string":case"number":$t=!0;break;case"object":switch(me.$$typeof){case E:case T:$t=!0}}if($t)return Be(ut,me,ze===""?"."+Tt(me,0):ze),1;if($t=0,ze=ze===""?".":ze+":",Array.isArray(me))for(var Qt=0;Qt<me.length;Qt++){xt=me[Qt];var on=ze+Tt(xt,Qt);$t+=Dt(xt,on,Be,ut)}else if(me===null||typeof me!="object"?on=null:(on=he&&me[he]||me["@@iterator"],on=typeof on=="function"?on:null),typeof on=="function")for(me=on.call(me),Qt=0;!(xt=me.next()).done;)xt=xt.value,on=ze+Tt(xt,Qt++),$t+=Dt(xt,on,Be,ut);else if(xt==="object")throw Be=""+me,Error(ue(31,Be==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":Be,""));return $t}function Ke(me,ze,Be){return me==null?0:Dt(me,"",ze,Be)}function Tt(me,ze){return typeof me=="object"&&me!==null&&me.key!=null?St(me.key):ze.toString(36)}function Gt(me,ze){me.func.call(me.context,ze,me.count++)}function gn(me,ze,Be){var ut=me.result,xt=me.keyPrefix;me=me.func.call(me.context,ze,me.count++),Array.isArray(me)?Ut(me,ut,Be,function($t){return $t}):me!=null&&(Ue(me)&&(me=De(me,xt+(!me.key||ze&&ze.key===me.key?"":(""+me.key).replace(Ae,"$&/")+"/")+Be)),ut.push(me))}function Ut(me,ze,Be,ut,xt){var $t="";Be!=null&&($t=(""+Be).replace(Ae,"$&/")+"/"),ze=At(ze,$t,ut,xt),Ke(me,gn,ze),mt(ze)}var Ht={current:null};function Rt(){var me=Ht.current;if(me===null)throw Error(ue(321));return me}var Fe={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:Z,IsSomeRendererActing:{current:!1},assign:g};_.Children={map:function(ze,Be,ut){if(ze==null)return ze;var xt=[];return Ut(ze,xt,null,Be,ut),xt},forEach:function(ze,Be,ut){if(ze==null)return ze;Be=At(null,null,Be,ut),Ke(ze,Gt,Be),mt(Be)},count:function(ze){return Ke(ze,function(){return null},null)},toArray:function(ze){var Be=[];return Ut(ze,Be,null,function(ut){return ut}),Be},only:function(ze){if(!Ue(ze))throw Error(ue(143));return ze}},_.Component=le,_.Fragment=w,_.Profiler=O,_.PureComponent=se,_.StrictMode=D,_.Suspense=z,_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fe,_.cloneElement=function(me,ze,Be){if(me==null)throw Error(ue(267,me));var ut=g({},me.props),xt=me.key,$t=me.ref,Qt=me._owner;if(ze!=null){if(ze.ref!==void 0&&($t=ze.ref,Qt=Z.current),ze.key!==void 0&&(xt=""+ze.key),me.type&&me.type.defaultProps)var on=me.type.defaultProps;for(Mn in ze)Ee.call(ze,Mn)&&!k.hasOwnProperty(Mn)&&(ut[Mn]=ze[Mn]===void 0&&on!==void 0?on[Mn]:ze[Mn])}var Mn=arguments.length-2;if(Mn===1)ut.children=Be;else if(1<Mn){on=Array(Mn);for(var Nn=0;Nn<Mn;Nn++)on[Nn]=arguments[Nn+2];ut.children=on}return{$$typeof:E,type:me.type,key:xt,ref:$t,props:ut,_owner:Qt}},_.createContext=function(me,ze){return ze===void 0&&(ze=null),me={$$typeof:U,_calculateChangedBits:ze,_currentValue:me,_currentValue2:me,_threadCount:0,Provider:null,Consumer:null},me.Provider={$$typeof:L,_context:me},me.Consumer=me},_.createElement=Te,_.createFactory=function(me){var ze=Te.bind(null,me);return ze.type=me,ze},_.createRef=function(){return{current:null}},_.forwardRef=function(me){return{$$typeof:V,render:me}},_.isValidElement=Ue,_.lazy=function(me){return{$$typeof:J,_ctor:me,_status:-1,_result:null}},_.memo=function(me,ze){return{$$typeof:K,type:me,compare:ze===void 0?null:ze}},_.useCallback=function(me,ze){return Rt().useCallback(me,ze)},_.useContext=function(me,ze){return Rt().useContext(me,ze)},_.useDebugValue=function(){},_.useEffect=function(me,ze){return Rt().useEffect(me,ze)},_.useImperativeHandle=function(me,ze,Be){return Rt().useImperativeHandle(me,ze,Be)},_.useLayoutEffect=function(me,ze){return Rt().useLayoutEffect(me,ze)},_.useMemo=function(me,ze){return Rt().useMemo(me,ze)},_.useReducer=function(me,ze,Be){return Rt().useReducer(me,ze,Be)},_.useRef=function(me){return Rt().useRef(me)},_.useState=function(me){return Rt().useState(me)},_.version="16.14.0"},function(j,_,u){"use strict";/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g=u(1),f=u(122),E=u(299);function T(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!g)throw Error(T(227));function w(d,h,x,F,Q,pe,je,ct,yn){var or=Array.prototype.slice.call(arguments,3);try{h.apply(x,or)}catch(wr){this.onError(wr)}}var D=!1,O=null,L=!1,U=null,V={onError:function(h){D=!0,O=h}};function z(d,h,x,F,Q,pe,je,ct,yn){D=!1,O=null,w.apply(V,arguments)}function K(d,h,x,F,Q,pe,je,ct,yn){if(z.apply(this,arguments),D){if(D){var or=O;D=!1,O=null}else throw Error(T(198));L||(L=!0,U=or)}}var J=null,he=null,ue=null;function de(d,h,x){var F=d.type||"unknown-event";d.currentTarget=ue(x),K(F,h,void 0,d),d.currentTarget=null}var ae=null,le={};function re(){if(ae)for(var d in le){var h=le[d],x=ae.indexOf(d);if(!(-1<x))throw Error(T(96,d));if(!ye[x]){if(!h.extractEvents)throw Error(T(97,d));ye[x]=h,x=h.eventTypes;for(var F in x){var Q=void 0,pe=x[F],je=h,ct=F;if(Z.hasOwnProperty(ct))throw Error(T(99,ct));Z[ct]=pe;var yn=pe.phasedRegistrationNames;if(yn){for(Q in yn)yn.hasOwnProperty(Q)&&se(yn[Q],je,ct);Q=!0}else pe.registrationName?(se(pe.registrationName,je,ct),Q=!0):Q=!1;if(!Q)throw Error(T(98,F,d))}}}}function se(d,h,x){if(Ee[d])throw Error(T(100,d));Ee[d]=h,k[d]=h.eventTypes[x].dependencies}var ye=[],Z={},Ee={},k={};function Te(d){var h=!1,x;for(x in d)if(d.hasOwnProperty(x)){var F=d[x];if(!le.hasOwnProperty(x)||le[x]!==F){if(le[x])throw Error(T(102,x));le[x]=F,h=!0}}h&&re()}var De=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ue=null,St=null,Ae=null;function Wt(d){if(d=he(d)){if(typeof Ue!="function")throw Error(T(280));var h=d.stateNode;h&&(h=J(h),Ue(d.stateNode,d.type,h))}}function At(d){St?Ae?Ae.push(d):Ae=[d]:St=d}function mt(){if(St){var d=St,h=Ae;if(Ae=St=null,Wt(d),h)for(d=0;d<h.length;d++)Wt(h[d])}}function Dt(d,h){return d(h)}function Ke(d,h,x,F,Q){return d(h,x,F,Q)}function Tt(){}var Gt=Dt,gn=!1,Ut=!1;function Ht(){(St!==null||Ae!==null)&&(Tt(),mt())}function Rt(d,h,x){if(Ut)return d(h,x);Ut=!0;try{return Gt(d,h,x)}finally{Ut=!1,Ht()}}var Fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,me=Object.prototype.hasOwnProperty,ze={},Be={};function ut(d){return me.call(Be,d)?!0:me.call(ze,d)?!1:Fe.test(d)?Be[d]=!0:(ze[d]=!0,!1)}function xt(d,h,x,F){if(x!==null&&x.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return F?!1:x!==null?!x.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function $t(d,h,x,F){if(h===null||typeof h=="undefined"||xt(d,h,x,F))return!0;if(F)return!1;if(x!==null)switch(x.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function Qt(d,h,x,F,Q,pe){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=F,this.attributeNamespace=Q,this.mustUseProperty=x,this.propertyName=d,this.type=h,this.sanitizeURL=pe}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){on[d]=new Qt(d,0,!1,d,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0];on[h]=new Qt(h,1,!1,d[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){on[d]=new Qt(d,2,!1,d.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){on[d]=new Qt(d,2,!1,d,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){on[d]=new Qt(d,3,!1,d.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(d){on[d]=new Qt(d,3,!0,d,null,!1)}),["capture","download"].forEach(function(d){on[d]=new Qt(d,4,!1,d,null,!1)}),["cols","rows","size","span"].forEach(function(d){on[d]=new Qt(d,6,!1,d,null,!1)}),["rowSpan","start"].forEach(function(d){on[d]=new Qt(d,5,!1,d.toLowerCase(),null,!1)});var Mn=/[\-:]([a-z])/g;function Nn(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var h=d.replace(Mn,Nn);on[h]=new Qt(h,1,!1,d,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var h=d.replace(Mn,Nn);on[h]=new Qt(h,1,!1,d,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(Mn,Nn);on[h]=new Qt(h,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(d){on[d]=new Qt(d,1,!1,d.toLowerCase(),null,!1)}),on.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(d){on[d]=new Qt(d,1,!1,d.toLowerCase(),null,!0)});var qn=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;qn.hasOwnProperty("ReactCurrentDispatcher")||(qn.ReactCurrentDispatcher={current:null}),qn.hasOwnProperty("ReactCurrentBatchConfig")||(qn.ReactCurrentBatchConfig={suspense:null});function nr(d,h,x,F){var Q=on.hasOwnProperty(h)?on[h]:null,pe=Q!==null?Q.type===0:F?!1:!(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N");pe||($t(h,x,Q,F)&&(x=null),F||Q===null?ut(h)&&(x===null?d.removeAttribute(h):d.setAttribute(h,""+x)):Q.mustUseProperty?d[Q.propertyName]=x===null?Q.type===3?!1:"":x:(h=Q.attributeName,F=Q.attributeNamespace,x===null?d.removeAttribute(h):(Q=Q.type,x=Q===3||Q===4&&x===!0?"":""+x,F?d.setAttributeNS(F,h,x):d.setAttribute(h,x))))}var xn=/^(.*)[\\\/]/,pn=typeof Symbol=="function"&&Symbol.for,pr=pn?Symbol.for("react.element"):60103,gr=pn?Symbol.for("react.portal"):60106,Ce=pn?Symbol.for("react.fragment"):60107,Jn=pn?Symbol.for("react.strict_mode"):60108,Ln=pn?Symbol.for("react.profiler"):60114,yr=pn?Symbol.for("react.provider"):60109,Un=pn?Symbol.for("react.context"):60110,$e=pn?Symbol.for("react.concurrent_mode"):60111,Re=pn?Symbol.for("react.forward_ref"):60112,Ye=pn?Symbol.for("react.suspense"):60113,tt=pn?Symbol.for("react.suspense_list"):60120,gt=pn?Symbol.for("react.memo"):60115,kt=pn?Symbol.for("react.lazy"):60116,Pe=pn?Symbol.for("react.block"):60121,pt=typeof Symbol=="function"&&Symbol.iterator;function st(d){return d===null||typeof d!="object"?null:(d=pt&&d[pt]||d["@@iterator"],typeof d=="function"?d:null)}function Ft(d){if(d._status===-1){d._status=0;var h=d._ctor;h=h(),d._result=h,h.then(function(x){d._status===0&&(x=x.default,d._status=1,d._result=x)},function(x){d._status===0&&(d._status=2,d._result=x)})}}function An(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case Ce:return"Fragment";case gr:return"Portal";case Ln:return"Profiler";case Jn:return"StrictMode";case Ye:return"Suspense";case tt:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case Un:return"Context.Consumer";case yr:return"Context.Provider";case Re:var h=d.render;return h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case gt:return An(d.type);case Pe:return An(d.render);case kt:if(d=d._status===1?d._result:null)return An(d)}return null}function Gn(d){var h="";do{e:switch(d.tag){case 3:case 4:case 6:case 7:case 10:case 9:var x="";break e;default:var F=d._debugOwner,Q=d._debugSource,pe=An(d.type);x=null,F&&(x=An(F.type)),F=pe,pe="",Q?pe=" (at "+Q.fileName.replace(xn,"")+":"+Q.lineNumber+")":x&&(pe=" (created by "+x+")"),x=`
    in `+(F||"Unknown")+pe}h+=x,d=d.return}while(d);return h}function Yn(d){switch(typeof d){case"boolean":case"number":case"object":case"string":case"undefined":return d;default:return""}}function vr(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function zr(d){var h=vr(d)?"checked":"value",x=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),F=""+d[h];if(!d.hasOwnProperty(h)&&typeof x!="undefined"&&typeof x.get=="function"&&typeof x.set=="function"){var Q=x.get,pe=x.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return Q.call(this)},set:function(ct){F=""+ct,pe.call(this,ct)}}),Object.defineProperty(d,h,{enumerable:x.enumerable}),{getValue:function(){return F},setValue:function(ct){F=""+ct},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function et(d){d._valueTracker||(d._valueTracker=zr(d))}function wt(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var x=h.getValue(),F="";return d&&(F=vr(d)?d.checked?"true":"false":d.value),d=F,d!==x?(h.setValue(d),!0):!1}function lt(d,h){var x=h.checked;return f({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??d._wrapperState.initialChecked})}function Vt(d,h){var x=h.defaultValue==null?"":h.defaultValue,F=h.checked!=null?h.checked:h.defaultChecked;x=Yn(h.value!=null?h.value:x),d._wrapperState={initialChecked:F,initialValue:x,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function cn(d,h){h=h.checked,h!=null&&nr(d,"checked",h,!1)}function We(d,h){cn(d,h);var x=Yn(h.value),F=h.type;if(x!=null)F==="number"?(x===0&&d.value===""||d.value!=x)&&(d.value=""+x):d.value!==""+x&&(d.value=""+x);else if(F==="submit"||F==="reset"){d.removeAttribute("value");return}h.hasOwnProperty("value")?vt(d,h.type,x):h.hasOwnProperty("defaultValue")&&vt(d,h.type,Yn(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(d.defaultChecked=!!h.defaultChecked)}function Jt(d,h,x){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var F=h.type;if(!(F!=="submit"&&F!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+d._wrapperState.initialValue,x||h===d.value||(d.value=h),d.defaultValue=h}x=d.name,x!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,x!==""&&(d.name=x)}function vt(d,h,x){(h!=="number"||d.ownerDocument.activeElement!==d)&&(x==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+x&&(d.defaultValue=""+x))}function Kn(d){var h="";return g.Children.forEach(d,function(x){x!=null&&(h+=x)}),h}function kr(d,h){return d=f({children:void 0},h),(h=Kn(h.children))&&(d.children=h),d}function Ur(d,h,x,F){if(d=d.options,h){h={};for(var Q=0;Q<x.length;Q++)h["$"+x[Q]]=!0;for(x=0;x<d.length;x++)Q=h.hasOwnProperty("$"+d[x].value),d[x].selected!==Q&&(d[x].selected=Q),Q&&F&&(d[x].defaultSelected=!0)}else{for(x=""+Yn(x),h=null,Q=0;Q<d.length;Q++){if(d[Q].value===x){d[Q].selected=!0,F&&(d[Q].defaultSelected=!0);return}h!==null||d[Q].disabled||(h=d[Q])}h!==null&&(h.selected=!0)}}function fa(d,h){if(h.dangerouslySetInnerHTML!=null)throw Error(T(91));return f({},h,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function ea(d,h){var x=h.value;if(x==null){if(x=h.children,h=h.defaultValue,x!=null){if(h!=null)throw Error(T(92));if(Array.isArray(x)){if(!(1>=x.length))throw Error(T(93));x=x[0]}h=x}h==null&&(h=""),x=h}d._wrapperState={initialValue:Yn(x)}}function ia(d,h){var x=Yn(h.value),F=Yn(h.defaultValue);x!=null&&(x=""+x,x!==d.value&&(d.value=x),h.defaultValue==null&&d.defaultValue!==x&&(d.defaultValue=x)),F!=null&&(d.defaultValue=""+F)}function Va(d){var h=d.textContent;h===d._wrapperState.initialValue&&h!==""&&h!==null&&(d.value=h)}var da={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function $a(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function di(d,h){return d==null||d==="http://www.w3.org/1999/xhtml"?$a(h):d==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Da,Ya=function(d){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(h,x,F,Q){MSApp.execUnsafeLocalFunction(function(){return d(h,x,F,Q)})}:d}(function(d,h){if(d.namespaceURI!==da.svg||"innerHTML"in d)d.innerHTML=h;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Da.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;h.firstChild;)d.appendChild(h.firstChild)}});function ro(d,h){if(h){var x=d.firstChild;if(x&&x===d.lastChild&&x.nodeType===3){x.nodeValue=h;return}}d.textContent=h}function ys(d,h){var x={};return x[d.toLowerCase()]=h.toLowerCase(),x["Webkit"+d]="webkit"+h,x["Moz"+d]="moz"+h,x}var Co={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},Gs={},Ho={};De&&(Ho=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function rs(d){if(Gs[d])return Gs[d];if(!Co[d])return d;var h=Co[d],x;for(x in h)if(h.hasOwnProperty(x)&&x in Ho)return Gs[d]=h[x];return d}var as=rs("animationend"),_s=rs("animationiteration"),Js=rs("animationstart"),fo=rs("transitionend"),To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bs=new(typeof WeakMap=="function"?WeakMap:Map);function bo(d){var h=bs.get(d);return h===void 0&&(h=new Map,bs.set(d,h)),h}function Es(d){var h=d,x=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.effectTag&1026)!==0&&(x=h.return),d=h.return;while(d)}return h.tag===3?x:null}function vu(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function Zs(d){if(Es(d)!==d)throw Error(T(188))}function Ko(d){var h=d.alternate;if(!h){if(h=Es(d),h===null)throw Error(T(188));return h!==d?null:d}for(var x=d,F=h;;){var Q=x.return;if(Q===null)break;var pe=Q.alternate;if(pe===null){if(F=Q.return,F!==null){x=F;continue}break}if(Q.child===pe.child){for(pe=Q.child;pe;){if(pe===x)return Zs(Q),d;if(pe===F)return Zs(Q),h;pe=pe.sibling}throw Error(T(188))}if(x.return!==F.return)x=Q,F=pe;else{for(var je=!1,ct=Q.child;ct;){if(ct===x){je=!0,x=Q,F=pe;break}if(ct===F){je=!0,F=Q,x=pe;break}ct=ct.sibling}if(!je){for(ct=pe.child;ct;){if(ct===x){je=!0,x=pe,F=Q;break}if(ct===F){je=!0,F=pe,x=Q;break}ct=ct.sibling}if(!je)throw Error(T(189))}}if(x.alternate!==F)throw Error(T(190))}if(x.tag!==3)throw Error(T(188));return x.stateNode.current===x?d:h}function is(d){if(d=Ko(d),!d)return null;for(var h=d;;){if(h.tag===5||h.tag===6)return h;if(h.child)h.child.return=h,h=h.child;else{if(h===d)break;for(;!h.sibling;){if(!h.return||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}}return null}function cs(d,h){if(h==null)throw Error(T(30));return d==null?h:Array.isArray(d)?Array.isArray(h)?(d.push.apply(d,h),d):(d.push(h),d):Array.isArray(h)?[d].concat(h):[d,h]}function qs(d,h,x){Array.isArray(d)?d.forEach(h,x):d&&h.call(x,d)}var Ju=null;function eu(d){if(d){var h=d._dispatchListeners,x=d._dispatchInstances;if(Array.isArray(h))for(var F=0;F<h.length&&!d.isPropagationStopped();F++)de(d,h[F],x[F]);else h&&de(d,h,x);d._dispatchListeners=null,d._dispatchInstances=null,d.isPersistent()||d.constructor.release(d)}}function Wi(d){if(d!==null&&(Ju=cs(Ju,d)),d=Ju,Ju=null,d){if(qs(d,eu),Ju)throw Error(T(95));if(L)throw d=U,L=!1,U=null,d}}function ji(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}function _o(d){if(!De)return!1;d="on"+d;var h=d in document;return h||(h=document.createElement("div"),h.setAttribute(d,"return;"),h=typeof h[d]=="function"),h}var mu=[];function Pl(d){d.topLevelType=null,d.nativeEvent=null,d.targetInst=null,d.ancestors.length=0,10>mu.length&&mu.push(d)}function Fo(d,h,x,F){if(mu.length){var Q=mu.pop();return Q.topLevelType=d,Q.eventSystemFlags=F,Q.nativeEvent=h,Q.targetInst=x,Q}return{topLevelType:d,eventSystemFlags:F,nativeEvent:h,targetInst:x,ancestors:[]}}function ks(d){var h=d.targetInst,x=h;do{if(!x){d.ancestors.push(x);break}var F=x;if(F.tag===3)F=F.stateNode.containerInfo;else{for(;F.return;)F=F.return;F=F.tag!==3?null:F.stateNode.containerInfo}if(!F)break;h=x.tag,h!==5&&h!==6||d.ancestors.push(x),x=Vi(F)}while(x);for(x=0;x<d.ancestors.length;x++){h=d.ancestors[x];var Q=ji(d.nativeEvent);F=d.topLevelType;var pe=d.nativeEvent,je=d.eventSystemFlags;x===0&&(je|=64);for(var ct=null,yn=0;yn<ye.length;yn++){var or=ye[yn];or&&(or=or.extractEvents(F,h,pe,Q,je))&&(ct=cs(ct,or))}Wi(ct)}}function gu(d,h,x){if(!x.has(d)){switch(d){case"scroll":Rs(h,"scroll",!0);break;case"focus":case"blur":Rs(h,"focus",!0),Rs(h,"blur",!0),x.set("blur",null),x.set("focus",null);break;case"cancel":case"close":_o(d)&&Rs(h,d,!0);break;case"invalid":case"submit":case"reset":break;default:To.indexOf(d)===-1&&Qa(d,h)}x.set(d,null)}}var Jl,Zl,Iu,yu=!1,os=[],Bi=null,Mi=null,Bo=null,ds=new Map,Zu=new Map,Lu=[],ql="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),ec="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function tu(d,h){var x=bo(h);ql.forEach(function(F){gu(F,h,x)}),ec.forEach(function(F){gu(F,h,x)})}function Ns(d,h,x,F,Q){return{blockedOn:d,topLevelType:h,eventSystemFlags:x|32,nativeEvent:Q,container:F}}function nu(d,h){switch(d){case"focus":case"blur":Bi=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Bo=null;break;case"pointerover":case"pointerout":ds.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(h.pointerId)}}function pl(d,h,x,F,Q,pe){return d===null||d.nativeEvent!==pe?(d=Ns(h,x,F,Q,pe),h!==null&&(h=wu(h),h!==null&&Zl(h)),d):(d.eventSystemFlags|=F,d)}function Wc(d,h,x,F,Q){switch(h){case"focus":return Bi=pl(Bi,d,h,x,F,Q),!0;case"dragenter":return Mi=pl(Mi,d,h,x,F,Q),!0;case"mouseover":return Bo=pl(Bo,d,h,x,F,Q),!0;case"pointerover":var pe=Q.pointerId;return ds.set(pe,pl(ds.get(pe)||null,d,h,x,F,Q)),!0;case"gotpointercapture":return pe=Q.pointerId,Zu.set(pe,pl(Zu.get(pe)||null,d,h,x,F,Q)),!0}return!1}function Hc(d){var h=Vi(d.target);if(h!==null){var x=Es(h);if(x!==null){if(h=x.tag,h===13){if(h=vu(x),h!==null){d.blockedOn=h,E.unstable_runWithPriority(d.priority,function(){Iu(x)});return}}else if(h===3&&x.stateNode.hydrate){d.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Il(d){if(d.blockedOn!==null)return!1;var h=$(d.topLevelType,d.eventSystemFlags,d.container,d.nativeEvent);if(h!==null){var x=wu(h);return x!==null&&Zl(x),d.blockedOn=h,!1}return!0}function vl(d,h,x){Il(d)&&x.delete(h)}function xc(){for(yu=!1;0<os.length;){var d=os[0];if(d.blockedOn!==null){d=wu(d.blockedOn),d!==null&&Jl(d);break}var h=$(d.topLevelType,d.eventSystemFlags,d.container,d.nativeEvent);h!==null?d.blockedOn=h:os.shift()}Bi!==null&&Il(Bi)&&(Bi=null),Mi!==null&&Il(Mi)&&(Mi=null),Bo!==null&&Il(Bo)&&(Bo=null),ds.forEach(vl),Zu.forEach(vl)}function Ll(d,h){d.blockedOn===h&&(d.blockedOn=null,yu||(yu=!0,E.unstable_scheduleCallback(E.unstable_NormalPriority,xc)))}function bu(d){function h(Q){return Ll(Q,d)}if(0<os.length){Ll(os[0],d);for(var x=1;x<os.length;x++){var F=os[x];F.blockedOn===d&&(F.blockedOn=null)}}for(Bi!==null&&Ll(Bi,d),Mi!==null&&Ll(Mi,d),Bo!==null&&Ll(Bo,d),ds.forEach(h),Zu.forEach(h),x=0;x<Lu.length;x++)F=Lu[x],F.blockedOn===d&&(F.blockedOn=null);for(;0<Lu.length&&(x=Lu[0],x.blockedOn===null);)Hc(x),x.blockedOn===null&&Lu.shift()}var tc={},wc=new Map,Eu=new Map,nc=["abort","abort",as,"animationEnd",_s,"animationIteration",Js,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",fo,"transitionEnd","waiting","waiting"];function ml(d,h){for(var x=0;x<d.length;x+=2){var F=d[x],Q=d[x+1],pe="on"+(Q[0].toUpperCase()+Q.slice(1));pe={phasedRegistrationNames:{bubbled:pe,captured:pe+"Capture"},dependencies:[F],eventPriority:h},Eu.set(F,h),wc.set(F,pe),tc[Q]=pe}}ml("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ml("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ml(nc,2);for(var gl="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),jl=0;jl<gl.length;jl++)Eu.set(gl[jl],0);var yl=E.unstable_UserBlockingPriority,Cc=E.unstable_runWithPriority,$o=!0;function Qa(d,h){Rs(h,d,!1)}function Rs(d,h,x){var F=Eu.get(h);switch(F===void 0?2:F){case 0:F=Pa.bind(null,h,1,d);break;case 1:F=qu.bind(null,h,1,d);break;default:F=xu.bind(null,h,1,d)}x?d.addEventListener(h,F,!0):d.addEventListener(h,F,!1)}function Pa(d,h,x,F){gn||Tt();var Q=xu,pe=gn;gn=!0;try{Ke(Q,d,h,x,F)}finally{(gn=pe)||Ht()}}function qu(d,h,x,F){Cc(yl,xu.bind(null,d,h,x,F))}function xu(d,h,x,F){if($o)if(0<os.length&&-1<ql.indexOf(d))d=Ns(null,d,h,x,F),os.push(d);else{var Q=$(d,h,x,F);if(Q===null)nu(d,F);else if(-1<ql.indexOf(d))d=Ns(Q,d,h,x,F),os.push(d);else if(!Wc(Q,d,h,x,F)){nu(d,F),d=Fo(d,F,null,h);try{Rt(ks,d)}finally{Pl(d)}}}}function $(d,h,x,F){if(x=ji(F),x=Vi(x),x!==null){var Q=Es(x);if(Q===null)x=null;else{var pe=Q.tag;if(pe===13){if(x=vu(Q),x!==null)return x;x=null}else if(pe===3){if(Q.stateNode.hydrate)return Q.tag===3?Q.stateNode.containerInfo:null;x=null}else Q!==x&&(x=null)}}d=Fo(d,F,x,h);try{Rt(ks,d)}finally{Pl(d)}return null}var R={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G=["Webkit","ms","Moz","O"];Object.keys(R).forEach(function(d){G.forEach(function(h){h=h+d.charAt(0).toUpperCase()+d.substring(1),R[h]=R[d]})});function Y(d,h,x){return h==null||typeof h=="boolean"||h===""?"":x||typeof h!="number"||h===0||R.hasOwnProperty(d)&&R[d]?(""+h).trim():h+"px"}function fe(d,h){d=d.style;for(var x in h)if(h.hasOwnProperty(x)){var F=x.indexOf("--")===0,Q=Y(x,h[x],F);x==="float"&&(x="cssFloat"),F?d.setProperty(x,Q):d[x]=Q}}var Se=f({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(d,h){if(h){if(Se[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(T(137,d,""));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(T(60));if(!(typeof h.dangerouslySetInnerHTML=="object"&&"__html"in h.dangerouslySetInnerHTML))throw Error(T(61))}if(h.style!=null&&typeof h.style!="object")throw Error(T(62,""))}}function Ze(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=da.html;function zt(d,h){d=d.nodeType===9||d.nodeType===11?d:d.ownerDocument;var x=bo(d);h=k[h];for(var F=0;F<h.length;F++)gu(h[F],d,x)}function Cn(){}function Sr(d){if(d=d||(typeof document!="undefined"?document:void 0),typeof d=="undefined")return null;try{return d.activeElement||d.body}catch(h){return d.body}}function Dr(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function en(d,h){var x=Dr(d);d=0;for(var F;x;){if(x.nodeType===3){if(F=d+x.textContent.length,d<=h&&F>=h)return{node:x,offset:h-d};d=F}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Dr(x)}}function sr(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?sr(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function Kr(){for(var d=window,h=Sr();h instanceof d.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch(F){x=!1}if(x)d=h.contentWindow;else break;h=Sr(d.document)}return h}function ma(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var sa="$",Yo="/$",ka="$?",bi="$!",Na=null,Sa=null;function rt(d,h){switch(d){case"button":case"input":case"select":case"textarea":return!!h.autoFocus}return!1}function Rn(d,h){return d==="textarea"||d==="option"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Qr=typeof setTimeout=="function"?setTimeout:void 0,mi=typeof clearTimeout=="function"?clearTimeout:void 0;function Hi(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break}return d}function ho(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var x=d.data;if(x===sa||x===bi||x===ka){if(h===0)return d;h--}else x===Yo&&h++}d=d.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),uo="__reactInternalInstance$"+Ao,Io="__reactEventHandlers$"+Ao,Lo="__reactContainere$"+Ao;function Vi(d){var h=d[uo];if(h)return h;for(var x=d.parentNode;x;){if(h=x[Lo]||x[uo]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(d=ho(d);d!==null;){if(x=d[uo])return x;d=ho(d)}return h}d=x,x=d.parentNode}return null}function wu(d){return d=d[uo]||d[Lo],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Qo(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(T(33))}function el(d){return d[Io]||null}function ua(d){do d=d.return;while(d&&d.tag!==5);return d||null}function fs(d,h){var x=d.stateNode;if(!x)return null;var F=J(x);if(!F)return null;x=F[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(d=d.type,F=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!F;break e;default:d=!1}if(d)return null;if(x&&typeof x!="function")throw Error(T(231,h,typeof x));return x}function Cu(d,h,x){(h=fs(d,x.dispatchConfig.phasedRegistrationNames[h]))&&(x._dispatchListeners=cs(x._dispatchListeners,h),x._dispatchInstances=cs(x._dispatchInstances,d))}function Ps(d){if(d&&d.dispatchConfig.phasedRegistrationNames){for(var h=d._targetInst,x=[];h;)x.push(h),h=ua(h);for(h=x.length;0<h--;)Cu(x[h],"captured",d);for(h=0;h<x.length;h++)Cu(x[h],"bubbled",d)}}function xs(d,h,x){d&&x&&x.dispatchConfig.registrationName&&(h=fs(d,x.dispatchConfig.registrationName))&&(x._dispatchListeners=cs(x._dispatchListeners,h),x._dispatchInstances=cs(x._dispatchInstances,d))}function ju(d){d&&d.dispatchConfig.registrationName&&xs(d._targetInst,null,d)}function ru(d){qs(d,Ps)}var Is=null,au=null,Uu=null;function Fu(){if(Uu)return Uu;var d,h=au,x=h.length,F,Q="value"in Is?Is.value:Is.textContent,pe=Q.length;for(d=0;d<x&&h[d]===Q[d];d++);var je=x-d;for(F=1;F<=je&&h[x-F]===Q[pe-F];F++);return Uu=Q.slice(d,1<F?1-F:void 0)}function ws(){return!0}function hs(){return!1}function Eo(d,h,x,F){this.dispatchConfig=d,this._targetInst=h,this.nativeEvent=x,d=this.constructor.Interface;for(var Q in d)d.hasOwnProperty(Q)&&((h=d[Q])?this[Q]=h(x):Q==="target"?this.target=F:this[Q]=x[Q]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ws:hs,this.isPropagationStopped=hs,this}f(Eo.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){this.isPersistent=ws},isPersistent:hs,destructor:function(){var h=this.constructor.Interface,x;for(x in h)this[x]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=hs,this._dispatchInstances=this._dispatchListeners=null}}),Eo.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Eo.extend=function(d){function h(){}function x(){return F.apply(this,arguments)}var F=this;h.prototype=F.prototype;var Q=new h;return f(Q,x.prototype),x.prototype=Q,x.prototype.constructor=x,x.Interface=f({},F.Interface,d),x.extend=F.extend,b(x),x},b(Eo);function Ul(d,h,x,F){if(this.eventPool.length){var Q=this.eventPool.pop();return this.call(Q,d,h,x,F),Q}return new this(d,h,x,F)}function Ua(d){if(!(d instanceof this))throw Error(T(279));d.destructor(),10>this.eventPool.length&&this.eventPool.push(d)}function b(d){d.eventPool=[],d.getPooled=Ul,d.release=Ua}var N=Eo.extend({data:null}),te=Eo.extend({data:null}),ee=[9,13,27,32],ce=De&&"CompositionEvent"in window,Ve=null;De&&"documentMode"in document&&(Ve=document.documentMode);var ft=De&&"TextEvent"in window&&!Ve,yt=De&&(!ce||Ve&&8<Ve&&11>=Ve),Ct=String.fromCharCode(32),Xt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},un=!1;function _n(d,h){switch(d){case"keyup":return ee.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Fn(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var jn=!1;function Ar(d,h){switch(d){case"compositionend":return Fn(h);case"keypress":return h.which!==32?null:(un=!0,Ct);case"textInput":return d=h.data,d===Ct&&un?null:d;default:return null}}function Nr(d,h){if(jn)return d==="compositionend"||!ce&&_n(d,h)?(d=Fu(),Uu=au=Is=null,jn=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return yt&&h.locale!=="ko"?null:h.data;default:return null}}var Wn={eventTypes:Xt,extractEvents:function(h,x,F,Q){var pe;if(ce)e:{switch(h){case"compositionstart":var je=Xt.compositionStart;break e;case"compositionend":je=Xt.compositionEnd;break e;case"compositionupdate":je=Xt.compositionUpdate;break e}je=void 0}else jn?_n(h,F)&&(je=Xt.compositionEnd):h==="keydown"&&F.keyCode===229&&(je=Xt.compositionStart);return je?(yt&&F.locale!=="ko"&&(jn||je!==Xt.compositionStart?je===Xt.compositionEnd&&jn&&(pe=Fu()):(Is=Q,au="value"in Is?Is.value:Is.textContent,jn=!0)),je=N.getPooled(je,x,F,Q),pe?je.data=pe:(pe=Fn(F),pe!==null&&(je.data=pe)),ru(je),pe=je):pe=null,(h=ft?Ar(h,F):Nr(h,F))?(x=te.getPooled(Xt.beforeInput,x,F,Q),x.data=h,ru(x)):x=null,pe===null?x:x===null?pe:[pe,x]}},Yr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xa(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!Yr[d.type]:h==="textarea"}var Ta={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function xa(d,h,x){return d=Eo.getPooled(Ta.change,d,h,x),d.type="change",At(x),ru(d),d}var wa=null,Oa=null;function Ki(d){Wi(d)}function _i(d){var h=Qo(d);if(wt(h))return d}function $i(d,h){if(d==="change")return h}var ki=!1;De&&(ki=_o("input")&&(!document.documentMode||9<document.documentMode));function Ui(){wa&&(wa.detachEvent("onpropertychange",bt),Oa=wa=null)}function bt(d){if(d.propertyName==="value"&&_i(Oa))if(d=xa(Oa,d,ji(d)),gn)Wi(d);else{gn=!0;try{Dt(Ki,d)}finally{gn=!1,Ht()}}}function Je(d,h,x){d==="focus"?(Ui(),wa=h,Oa=x,wa.attachEvent("onpropertychange",bt)):d==="blur"&&Ui()}function It(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return _i(Oa)}function Dn(d,h){if(d==="click")return _i(h)}function hn(d,h){if(d==="input"||d==="change")return _i(h)}var rr={eventTypes:Ta,_isInputEventSupported:ki,extractEvents:function(h,x,F,Q){var pe=x?Qo(x):window,je=pe.nodeName&&pe.nodeName.toLowerCase();if(je==="select"||je==="input"&&pe.type==="file")var ct=$i;else if(Xa(pe))if(ki)ct=hn;else{ct=It;var yn=Je}else(je=pe.nodeName)&&je.toLowerCase()==="input"&&(pe.type==="checkbox"||pe.type==="radio")&&(ct=Dn);if(ct&&(ct=ct(h,x)))return xa(ct,F,Q);yn&&yn(h,pe,x),h==="blur"&&(h=pe._wrapperState)&&h.controlled&&pe.type==="number"&&vt(pe,"number",pe.value)}},Or=Eo.extend({view:null,detail:null}),jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ta(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=jr[d])?!!h[d]:!1}function Gr(){return ta}var za=0,Fa=0,fi=!1,Zi=!1,zi=Or.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Gr,button:null,buttons:null,relatedTarget:function(h){return h.relatedTarget||(h.fromElement===h.srcElement?h.toElement:h.fromElement)},movementX:function(h){if("movementX"in h)return h.movementX;var x=za;return za=h.screenX,fi?h.type==="mousemove"?h.screenX-x:0:(fi=!0,0)},movementY:function(h){if("movementY"in h)return h.movementY;var x=Fa;return Fa=h.screenY,Zi?h.type==="mousemove"?h.screenY-x:0:(Zi=!0,0)}}),ai=zi.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Yi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ei={eventTypes:Yi,extractEvents:function(h,x,F,Q,pe){var je=h==="mouseover"||h==="pointerover",ct=h==="mouseout"||h==="pointerout";if(je&&(pe&32)===0&&(F.relatedTarget||F.fromElement)||!ct&&!je)return null;if(je=Q.window===Q?Q:(je=Q.ownerDocument)?je.defaultView||je.parentWindow:window,ct){if(ct=x,x=(x=F.relatedTarget||F.toElement)?Vi(x):null,x!==null){var yn=Es(x);(x!==yn||x.tag!==5&&x.tag!==6)&&(x=null)}}else ct=null;if(ct===x)return null;if(h==="mouseout"||h==="mouseover")var or=zi,wr=Yi.mouseLeave,ga=Yi.mouseEnter,pa="mouse";else(h==="pointerout"||h==="pointerover")&&(or=ai,wr=Yi.pointerLeave,ga=Yi.pointerEnter,pa="pointer");if(h=ct==null?je:Qo(ct),je=x==null?je:Qo(x),wr=or.getPooled(wr,ct,F,Q),wr.type=pa+"leave",wr.target=h,wr.relatedTarget=je,F=or.getPooled(ga,x,F,Q),F.type=pa+"enter",F.target=je,F.relatedTarget=h,Q=ct,pa=x,Q&&pa)e:{for(or=Q,ga=pa,ct=0,h=or;h;h=ua(h))ct++;for(h=0,x=ga;x;x=ua(x))h++;for(;0<ct-h;)or=ua(or),ct--;for(;0<h-ct;)ga=ua(ga),h--;for(;ct--;){if(or===ga||or===ga.alternate)break e;or=ua(or),ga=ua(ga)}or=null}else or=null;for(ga=or,or=[];Q&&Q!==ga&&!(ct=Q.alternate,ct!==null&&ct===ga);)or.push(Q),Q=ua(Q);for(Q=[];pa&&pa!==ga&&!(ct=pa.alternate,ct!==null&&ct===ga);)Q.push(pa),pa=ua(pa);for(pa=0;pa<or.length;pa++)xs(or[pa],"bubbled",wr);for(pa=Q.length;0<pa--;)xs(Q[pa],"captured",F);return(pe&64)===0?[wr]:[wr,F]}};function ao(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var ps=typeof Object.is=="function"?Object.is:ao,iu=Object.prototype.hasOwnProperty;function Xs(d,h){if(ps(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var x=Object.keys(d),F=Object.keys(h);if(x.length!==F.length)return!1;for(F=0;F<x.length;F++)if(!iu.call(h,x[F])||!ps(d[x[F]],h[x[F]]))return!1;return!0}var Cs=De&&"documentMode"in document&&11>=document.documentMode,Of={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},rc=null,Kc=null,$c=null,Yc=!1;function tf(d,h){var x=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;return Yc||rc==null||rc!==Sr(x)?null:(x=rc,"selectionStart"in x&&ma(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),$c&&Xs($c,x)?null:($c=x,d=Eo.getPooled(Of.select,Kc,d,h),d.type="select",d.target=rc,ru(d),d))}var Sf={eventTypes:Of,extractEvents:function(h,x,F,Q,pe,je){if(pe=je||(Q.window===Q?Q.document:Q.nodeType===9?Q:Q.ownerDocument),!(je=!pe)){e:{pe=bo(pe),je=k.onSelect;for(var ct=0;ct<je.length;ct++)if(!pe.has(je[ct])){pe=!1;break e}pe=!0}je=!pe}if(je)return null;pe=x?Qo(x):window;switch(h){case"focus":(Xa(pe)||pe.contentEditable==="true")&&(rc=pe,Kc=x,$c=null);break;case"blur":$c=Kc=rc=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yc=!1,tf(F,Q);case"selectionchange":if(Cs)break;case"keydown":case"keyup":return tf(F,Q)}return null}},Df=Eo.extend({animationName:null,elapsedTime:null,pseudoElement:null}),nf=Eo.extend({clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Zf=Or.extend({relatedTarget:null});function Fl(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}var qf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qc=Or.extend({key:function(h){if(h.key){var x=qf[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=Fl(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Bl[h.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Gr,charCode:function(h){return h.type==="keypress"?Fl(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Fl(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Mf=zi.extend({dataTransfer:null}),Cd=Or.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Gr}),_f=Eo.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kf=zi.extend({deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:null,deltaMode:null}),ac={eventTypes:tc,extractEvents:function(h,x,F,Q){var pe=wc.get(h);if(!pe)return null;switch(h){case"keypress":if(Fl(F)===0)return null;case"keydown":case"keyup":h=Qc;break;case"blur":case"focus":h=Zf;break;case"click":if(F.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=zi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Mf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Cd;break;case as:case _s:case Js:h=Df;break;case fo:h=_f;break;case"scroll":h=Or;break;case"wheel":h=kf;break;case"copy":case"cut":case"paste":h=nf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=ai;break;default:h=Eo}return x=h.getPooled(pe,x,F,Q),ru(x),x}};if(ae)throw Error(T(101));ae=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),re();var Nf=wu;J=el,he=Nf,ue=Qo,Te({SimpleEventPlugin:ac,EnterLeaveEventPlugin:Ei,ChangeEventPlugin:rr,SelectEventPlugin:Sf,BeforeInputEventPlugin:Wn});var Vl=[],ic=-1;function qi(d){0>ic||(d.current=Vl[ic],Vl[ic]=null,ic--)}function Gi(d,h){ic++,Vl[ic]=d.current,d.current=h}var bl={},ss={current:bl},ko={current:!1},Ls=bl;function Bu(d,h){var x=d.type.contextTypes;if(!x)return bl;var F=d.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===h)return F.__reactInternalMemoizedMaskedChildContext;var Q={},pe;for(pe in x)Q[pe]=h[pe];return F&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=Q),Q}function Ts(d){return d=d.childContextTypes,d!=null}function Td(){qi(ko),qi(ss)}function tl(d,h,x){if(ss.current!==bl)throw Error(T(168));Gi(ss,h),Gi(ko,x)}function Tc(d,h,x){var F=d.stateNode;if(d=h.childContextTypes,typeof F.getChildContext!="function")return x;F=F.getChildContext();for(var Q in F)if(!(Q in d))throw Error(T(108,An(h)||"Unknown",Q));return f({},x,{},F)}function Tu(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||bl,Ls=ss.current,Gi(ss,d),Gi(ko,ko.current),!0}function ou(d,h,x){var F=d.stateNode;if(!F)throw Error(T(169));x?(d=Tc(d,h,Ls),F.__reactInternalMemoizedMergedChildContext=d,qi(ko),qi(ss),Gi(ss,d)):qi(ko),Gi(ko,x)}var Ad=E.unstable_runWithPriority,El=E.unstable_scheduleCallback,Jc=E.unstable_cancelCallback,Od=E.unstable_requestPaint,Vu=E.unstable_now,Ac=E.unstable_getCurrentPriorityLevel,Jo=E.unstable_ImmediatePriority,zu=E.unstable_UserBlockingPriority,Gu=E.unstable_NormalPriority,Sd=E.unstable_LowPriority,eh=E.unstable_IdlePriority,Dd={},Qi=E.unstable_shouldYield,Ih=Od!==void 0?Od:function(){},zl=null,Md=null,Gl=!1,Xl=Vu(),su=1e4>Xl?Vu:function(){return Vu()-Xl};function _d(){switch(Ac()){case Jo:return 99;case zu:return 98;case Gu:return 97;case Sd:return 96;case eh:return 95;default:throw Error(T(332))}}function oc(d){switch(d){case 99:return Jo;case 98:return zu;case 97:return Gu;case 96:return Sd;case 95:return eh;default:throw Error(T(332))}}function sc(d,h){return d=oc(d),Ad(d,h)}function Oc(d,h,x){return d=oc(d),El(d,h,x)}function th(d){return zl===null?(zl=[d],Md=El(Jo,nh)):zl.push(d),Dd}function js(){if(Md!==null){var d=Md;Md=null,Jc(d)}nh()}function nh(){if(!Gl&&zl!==null){Gl=!0;var d=0;try{var h=zl;sc(99,function(){for(;d<h.length;d++){var x=h[d];do x=x(!0);while(x!==null)}}),zl=null}catch(x){throw zl!==null&&(zl=zl.slice(d+1)),El(Jo,js),x}finally{Gl=!1}}}function Oo(d,h,x){return x/=10,1073741821-(((1073741821-d+h/10)/x|0)+1)*x}function Ws(d,h){if(d&&d.defaultProps){h=f({},h),d=d.defaultProps;for(var x in d)h[x]===void 0&&(h[x]=d[x])}return h}var Zc={current:null},kd=null,Sc=null,rf=null;function Rf(){rf=Sc=kd=null}function Pf(d){var h=Zc.current;qi(Zc),d.type._context._currentValue=h}function rh(d,h){for(;d!==null;){var x=d.alternate;if(d.childExpirationTime<h)d.childExpirationTime=h,x!==null&&x.childExpirationTime<h&&(x.childExpirationTime=h);else if(x!==null&&x.childExpirationTime<h)x.childExpirationTime=h;else break;d=d.return}}function Dc(d,h){kd=d,rf=Sc=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.expirationTime>=h&&(Ku=!0),d.firstContext=null)}function Us(d,h){if(rf!==d&&h!==!1&&h!==0)if((typeof h!="number"||h===1073741823)&&(rf=d,h=1073741823),h={context:d,observedBits:h,next:null},Sc===null){if(kd===null)throw Error(T(308));Sc=h,kd.dependencies={expirationTime:0,firstContext:h,responders:null}}else Sc=Sc.next=h;return d._currentValue}var Au=!1;function qc(d){d.updateQueue={baseState:d.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Nd(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,baseQueue:d.baseQueue,shared:d.shared,effects:d.effects})}function Ou(d,h){return d={expirationTime:d,suspenseConfig:h,tag:0,payload:null,callback:null,next:null},d.next=d}function Su(d,h){if(d=d.updateQueue,d!==null){d=d.shared;var x=d.pending;x===null?h.next=h:(h.next=x.next,x.next=h),d.pending=h}}function ah(d,h){var x=d.alternate;x!==null&&Nd(x,d),d=d.updateQueue,x=d.baseQueue,x===null?(d.baseQueue=h.next=h,h.next=h):(h.next=x.next,x.next=h)}function xl(d,h,x,F){var Q=d.updateQueue;Au=!1;var pe=Q.baseQueue,je=Q.shared.pending;if(je!==null){if(pe!==null){var ct=pe.next;pe.next=je.next,je.next=ct}pe=je,Q.shared.pending=null,ct=d.alternate,ct!==null&&(ct=ct.updateQueue,ct!==null&&(ct.baseQueue=je))}if(pe!==null){ct=pe.next;var yn=Q.baseState,or=0,wr=null,ga=null,pa=null;if(ct!==null){var Fi=ct;do{if(je=Fi.expirationTime,je<F){var ul={expirationTime:Fi.expirationTime,suspenseConfig:Fi.suspenseConfig,tag:Fi.tag,payload:Fi.payload,callback:Fi.callback,next:null};pa===null?(ga=pa=ul,wr=yn):pa=pa.next=ul,je>or&&(or=je)}else{pa!==null&&(pa=pa.next={expirationTime:1073741823,suspenseConfig:Fi.suspenseConfig,tag:Fi.tag,payload:Fi.payload,callback:Fi.callback,next:null}),Ja(je,Fi.suspenseConfig);e:{var Vs=d,In=Fi;je=h,ul=x;switch(In.tag){case 1:if(Vs=In.payload,typeof Vs=="function"){yn=Vs.call(ul,yn,je);break e}yn=Vs;break e;case 3:Vs.effectTag=Vs.effectTag&-4097|64;case 0:if(Vs=In.payload,je=typeof Vs=="function"?Vs.call(ul,yn,je):Vs,je==null)break e;yn=f({},yn,je);break e;case 2:Au=!0}}Fi.callback!==null&&(d.effectTag|=32,je=Q.effects,je===null?Q.effects=[Fi]:je.push(Fi))}if(Fi=Fi.next,Fi===null||Fi===ct){if(je=Q.shared.pending,je===null)break;Fi=pe.next=je.next,je.next=ct,Q.baseQueue=pe=je,Q.shared.pending=null}}while(1)}pa===null?wr=yn:pa.next=ga,Q.baseState=wr,Q.baseQueue=pa,Aa(or),d.expirationTime=or,d.memoizedState=yn}}function If(d,h,x){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var F=d[h],Q=F.callback;if(Q!==null){if(F.callback=null,F=Q,Q=x,typeof F!="function")throw Error(T(191,F));F.call(Q)}}}var wl=qn.ReactCurrentBatchConfig,ed=new g.Component().refs;function td(d,h,x,F){h=d.memoizedState,x=x(F,h),x=x==null?h:f({},h,x),d.memoizedState=x,d.expirationTime===0&&(d.updateQueue.baseState=x)}var uc={isMounted:function(h){return(h=h._reactInternalFiber)?Es(h)===h:!1},enqueueSetState:function(h,x,F){h=h._reactInternalFiber;var Q=Pn(),pe=wl.suspense;Q=na(Q,h,pe),pe=Ou(Q,pe),pe.payload=x,F!=null&&(pe.callback=F),Su(h,pe),dr(h,Q)},enqueueReplaceState:function(h,x,F){h=h._reactInternalFiber;var Q=Pn(),pe=wl.suspense;Q=na(Q,h,pe),pe=Ou(Q,pe),pe.tag=1,pe.payload=x,F!=null&&(pe.callback=F),Su(h,pe),dr(h,Q)},enqueueForceUpdate:function(h,x){h=h._reactInternalFiber;var F=Pn(),Q=wl.suspense;F=na(F,h,Q),Q=Ou(F,Q),Q.tag=2,x!=null&&(Q.callback=x),Su(h,Q),dr(h,F)}};function af(d,h,x,F,Q,pe,je){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(F,pe,je):h.prototype&&h.prototype.isPureReactComponent?!Xs(x,F)||!Xs(Q,pe):!0}function nd(d,h,x){var F=!1,Q=bl,pe=h.contextType;return typeof pe=="object"&&pe!==null?pe=Us(pe):(Q=Ts(h)?Ls:ss.current,F=h.contextTypes,pe=(F=F!=null)?Bu(d,Q):bl),h=new h(x,pe),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=uc,d.stateNode=h,h._reactInternalFiber=d,F&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=Q,d.__reactInternalMemoizedMaskedChildContext=pe),h}function rd(d,h,x,F){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,F),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,F),h.state!==d&&uc.enqueueReplaceState(h,h.state,null)}function io(d,h,x,F){var Q=d.stateNode;Q.props=x,Q.state=d.memoizedState,Q.refs=ed,qc(d);var pe=h.contextType;typeof pe=="object"&&pe!==null?Q.context=Us(pe):(pe=Ts(h)?Ls:ss.current,Q.context=Bu(d,pe)),xl(d,x,Q,F),Q.state=d.memoizedState,pe=h.getDerivedStateFromProps,typeof pe=="function"&&(td(d,h,pe,x),Q.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(h=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),h!==Q.state&&uc.enqueueReplaceState(Q,Q.state,null),xl(d,x,Q,F),Q.state=d.memoizedState),typeof Q.componentDidMount=="function"&&(d.effectTag|=4)}var Rd=Array.isArray;function Mc(d,h,x){if(d=x.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(T(309));var F=x.stateNode}if(!F)throw Error(T(147,d));var Q=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===Q?h.ref:(h=function(je){var ct=F.refs;ct===ed&&(ct=F.refs={}),je===null?delete ct[Q]:ct[Q]=je},h._stringRef=Q,h)}if(typeof d!="string")throw Error(T(284));if(!x._owner)throw Error(T(290,d))}return d}function ad(d,h){if(d.type!=="textarea")throw Error(T(31,Object.prototype.toString.call(h)==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":h,""))}function of(d){function h(In,wn){if(d){var cr=In.lastEffect;cr!==null?(cr.nextEffect=wn,In.lastEffect=wn):In.firstEffect=In.lastEffect=wn,wn.nextEffect=null,wn.effectTag=8}}function x(In,wn){if(!d)return null;for(;wn!==null;)h(In,wn),wn=wn.sibling;return null}function F(In,wn){for(In=new Map;wn!==null;)wn.key!==null?In.set(wn.key,wn):In.set(wn.index,wn),wn=wn.sibling;return In}function Q(In,wn){return In=ht(In,wn),In.index=0,In.sibling=null,In}function pe(In,wn,cr){return In.index=cr,d?(cr=In.alternate,cr!==null?(cr=cr.index,cr<wn?(In.effectTag=2,wn):cr):(In.effectTag=2,wn)):wn}function je(In){return d&&In.alternate===null&&(In.effectTag=2),In}function ct(In,wn,cr,Xr){return wn===null||wn.tag!==6?(wn=Hr(cr,In.mode,Xr),wn.return=In,wn):(wn=Q(wn,cr),wn.return=In,wn)}function yn(In,wn,cr,Xr){return wn!==null&&wn.elementType===cr.type?(Xr=Q(wn,cr.props),Xr.ref=Mc(In,wn,cr),Xr.return=In,Xr):(Xr=On(cr.type,cr.key,cr.props,null,In.mode,Xr),Xr.ref=Mc(In,wn,cr),Xr.return=In,Xr)}function or(In,wn,cr,Xr){return wn===null||wn.tag!==4||wn.stateNode.containerInfo!==cr.containerInfo||wn.stateNode.implementation!==cr.implementation?(wn=Ga(cr,In.mode,Xr),wn.return=In,wn):(wn=Q(wn,cr.children||[]),wn.return=In,wn)}function wr(In,wn,cr,Xr,aa){return wn===null||wn.tag!==7?(wn=ln(cr,In.mode,Xr,aa),wn.return=In,wn):(wn=Q(wn,cr),wn.return=In,wn)}function ga(In,wn,cr){if(typeof wn=="string"||typeof wn=="number")return wn=Hr(""+wn,In.mode,cr),wn.return=In,wn;if(typeof wn=="object"&&wn!==null){switch(wn.$$typeof){case pr:return cr=On(wn.type,wn.key,wn.props,null,In.mode,cr),cr.ref=Mc(In,null,wn),cr.return=In,cr;case gr:return wn=Ga(wn,In.mode,cr),wn.return=In,wn}if(Rd(wn)||st(wn))return wn=ln(wn,In.mode,cr,null),wn.return=In,wn;ad(In,wn)}return null}function pa(In,wn,cr,Xr){var aa=wn!==null?wn.key:null;if(typeof cr=="string"||typeof cr=="number")return aa!==null?null:ct(In,wn,""+cr,Xr);if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case pr:return cr.key===aa?cr.type===Ce?wr(In,wn,cr.props.children,Xr,aa):yn(In,wn,cr,Xr):null;case gr:return cr.key===aa?or(In,wn,cr,Xr):null}if(Rd(cr)||st(cr))return aa!==null?null:wr(In,wn,cr,Xr,null);ad(In,cr)}return null}function Fi(In,wn,cr,Xr,aa){if(typeof Xr=="string"||typeof Xr=="number")return In=In.get(cr)||null,ct(wn,In,""+Xr,aa);if(typeof Xr=="object"&&Xr!==null){switch(Xr.$$typeof){case pr:return In=In.get(Xr.key===null?cr:Xr.key)||null,Xr.type===Ce?wr(wn,In,Xr.props.children,aa,Xr.key):yn(wn,In,Xr,aa);case gr:return In=In.get(Xr.key===null?cr:Xr.key)||null,or(wn,In,Xr,aa)}if(Rd(Xr)||st(Xr))return In=In.get(cr)||null,wr(wn,In,Xr,aa,null);ad(wn,Xr)}return null}function ul(In,wn,cr,Xr){for(var aa=null,ba=null,ri=wn,Ri=wn=0,mo=null;ri!==null&&Ri<cr.length;Ri++){ri.index>Ri?(mo=ri,ri=null):mo=ri.sibling;var wi=pa(In,ri,cr[Ri],Xr);if(wi===null){ri===null&&(ri=mo);break}d&&ri&&wi.alternate===null&&h(In,ri),wn=pe(wi,wn,Ri),ba===null?aa=wi:ba.sibling=wi,ba=wi,ri=mo}if(Ri===cr.length)return x(In,ri),aa;if(ri===null){for(;Ri<cr.length;Ri++)ri=ga(In,cr[Ri],Xr),ri!==null&&(wn=pe(ri,wn,Ri),ba===null?aa=ri:ba.sibling=ri,ba=ri);return aa}for(ri=F(In,ri);Ri<cr.length;Ri++)mo=Fi(ri,In,Ri,cr[Ri],Xr),mo!==null&&(d&&mo.alternate!==null&&ri.delete(mo.key===null?Ri:mo.key),wn=pe(mo,wn,Ri),ba===null?aa=mo:ba.sibling=mo,ba=mo);return d&&ri.forEach(function(vd){return h(In,vd)}),aa}function Vs(In,wn,cr,Xr){var aa=st(cr);if(typeof aa!="function")throw Error(T(150));if(cr=aa.call(cr),cr==null)throw Error(T(151));for(var ba=aa=null,ri=wn,Ri=wn=0,mo=null,wi=cr.next();ri!==null&&!wi.done;Ri++,wi=cr.next()){ri.index>Ri?(mo=ri,ri=null):mo=ri.sibling;var vd=pa(In,ri,wi.value,Xr);if(vd===null){ri===null&&(ri=mo);break}d&&ri&&vd.alternate===null&&h(In,ri),wn=pe(vd,wn,Ri),ba===null?aa=vd:ba.sibling=vd,ba=vd,ri=mo}if(wi.done)return x(In,ri),aa;if(ri===null){for(;!wi.done;Ri++,wi=cr.next())wi=ga(In,wi.value,Xr),wi!==null&&(wn=pe(wi,wn,Ri),ba===null?aa=wi:ba.sibling=wi,ba=wi);return aa}for(ri=F(In,ri);!wi.done;Ri++,wi=cr.next())wi=Fi(ri,In,Ri,wi.value,Xr),wi!==null&&(d&&wi.alternate!==null&&ri.delete(wi.key===null?Ri:wi.key),wn=pe(wi,wn,Ri),ba===null?aa=wi:ba.sibling=wi,ba=wi);return d&&ri.forEach(function(Op){return h(In,Op)}),aa}return function(In,wn,cr,Xr){var aa=typeof cr=="object"&&cr!==null&&cr.type===Ce&&cr.key===null;aa&&(cr=cr.props.children);var ba=typeof cr=="object"&&cr!==null;if(ba)switch(cr.$$typeof){case pr:e:{for(ba=cr.key,aa=wn;aa!==null;){if(aa.key===ba){switch(aa.tag){case 7:if(cr.type===Ce){x(In,aa.sibling),wn=Q(aa,cr.props.children),wn.return=In,In=wn;break e}break;default:if(aa.elementType===cr.type){x(In,aa.sibling),wn=Q(aa,cr.props),wn.ref=Mc(In,aa,cr),wn.return=In,In=wn;break e}}x(In,aa);break}else h(In,aa);aa=aa.sibling}cr.type===Ce?(wn=ln(cr.props.children,In.mode,Xr,cr.key),wn.return=In,In=wn):(Xr=On(cr.type,cr.key,cr.props,null,In.mode,Xr),Xr.ref=Mc(In,wn,cr),Xr.return=In,In=Xr)}return je(In);case gr:e:{for(aa=cr.key;wn!==null;){if(wn.key===aa)if(wn.tag===4&&wn.stateNode.containerInfo===cr.containerInfo&&wn.stateNode.implementation===cr.implementation){x(In,wn.sibling),wn=Q(wn,cr.children||[]),wn.return=In,In=wn;break e}else{x(In,wn);break}else h(In,wn);wn=wn.sibling}wn=Ga(cr,In.mode,Xr),wn.return=In,In=wn}return je(In)}if(typeof cr=="string"||typeof cr=="number")return cr=""+cr,wn!==null&&wn.tag===6?(x(In,wn.sibling),wn=Q(wn,cr),wn.return=In,In=wn):(x(In,wn),wn=Hr(cr,In.mode,Xr),wn.return=In,In=wn),je(In);if(Rd(cr))return ul(In,wn,cr,Xr);if(st(cr))return Vs(In,wn,cr,Xr);if(ba&&ad(In,cr),typeof cr=="undefined"&&!aa)switch(In.tag){case 1:case 0:throw In=In.type,Error(T(152,In.displayName||In.name||"Component"))}return x(In,wn)}}var lc=of(!0),Pd=of(!1),cc={},Xu={current:cc},_c={current:cc},Wu={current:cc};function Hs(d){if(d===cc)throw Error(T(174));return d}function kc(d,h){Gi(Wu,h),Gi(_c,d),Gi(Xu,cc),d=h.nodeType;switch(d){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:di(null,"");break;default:d=d===8?h.parentNode:h,h=d.namespaceURI||null,d=d.tagName,h=di(h,d)}qi(Xu),Gi(Xu,h)}function dc(){qi(Xu),qi(_c),qi(Wu)}function Id(d){Hs(Wu.current);var h=Hs(Xu.current),x=di(h,d.type);h!==x&&(Gi(_c,d),Gi(Xu,x))}function fc(d){_c.current===d&&(qi(Xu),qi(_c))}var No={current:0};function nl(d){for(var h=d;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data===ka||x.data===bi))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.effectTag&64)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function id(d,h){return{responder:d,props:h}}var od=qn.ReactCurrentDispatcher,Zo=qn.ReactCurrentBatchConfig,rl=0,qo=null,us=null,ls=null,Wl=!1;function uu(){throw Error(T(321))}function Nc(d,h){if(h===null)return!1;for(var x=0;x<h.length&&x<d.length;x++)if(!ps(d[x],h[x]))return!1;return!0}function al(d,h,x,F,Q,pe){if(rl=pe,qo=h,h.memoizedState=null,h.updateQueue=null,h.expirationTime=0,od.current=d===null||d.memoizedState===null?jf:lf,d=x(F,Q),h.expirationTime===rl){pe=0;do{if(h.expirationTime=0,!(25>pe))throw Error(T(301));pe+=1,ls=us=null,h.updateQueue=null,od.current=Uf,d=x(F,Q)}while(h.expirationTime===rl)}if(od.current=uf,h=us!==null&&us.next!==null,rl=0,ls=us=qo=null,Wl=!1,h)throw Error(T(300));return d}function Cl(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?qo.memoizedState=ls=d:ls=ls.next=d,ls}function Ks(){if(us===null){var d=qo.alternate;d=d!==null?d.memoizedState:null}else d=us.next;var h=ls===null?qo.memoizedState:ls.next;if(h!==null)ls=h,us=d;else{if(d===null)throw Error(T(310));us=d,d={memoizedState:us.memoizedState,baseState:us.baseState,baseQueue:us.baseQueue,queue:us.queue,next:null},ls===null?qo.memoizedState=ls=d:ls=ls.next=d}return ls}function Hu(d,h){return typeof h=="function"?h(d):h}function Tl(d){var h=Ks(),x=h.queue;if(x===null)throw Error(T(311));x.lastRenderedReducer=d;var F=us,Q=F.baseQueue,pe=x.pending;if(pe!==null){if(Q!==null){var je=Q.next;Q.next=pe.next,pe.next=je}F.baseQueue=Q=pe,x.pending=null}if(Q!==null){Q=Q.next,F=F.baseState;var ct=je=pe=null,yn=Q;do{var or=yn.expirationTime;if(or<rl){var wr={expirationTime:yn.expirationTime,suspenseConfig:yn.suspenseConfig,action:yn.action,eagerReducer:yn.eagerReducer,eagerState:yn.eagerState,next:null};ct===null?(je=ct=wr,pe=F):ct=ct.next=wr,or>qo.expirationTime&&(qo.expirationTime=or,Aa(or))}else ct!==null&&(ct=ct.next={expirationTime:1073741823,suspenseConfig:yn.suspenseConfig,action:yn.action,eagerReducer:yn.eagerReducer,eagerState:yn.eagerState,next:null}),Ja(or,yn.suspenseConfig),F=yn.eagerReducer===d?yn.eagerState:d(F,yn.action);yn=yn.next}while(yn!==null&&yn!==Q);ct===null?pe=F:ct.next=je,ps(F,h.memoizedState)||(Ku=!0),h.memoizedState=F,h.baseState=pe,h.baseQueue=ct,x.lastRenderedState=F}return[h.memoizedState,x.dispatch]}function Al(d){var h=Ks(),x=h.queue;if(x===null)throw Error(T(311));x.lastRenderedReducer=d;var F=x.dispatch,Q=x.pending,pe=h.memoizedState;if(Q!==null){x.pending=null;var je=Q=Q.next;do pe=d(pe,je.action),je=je.next;while(je!==Q);ps(pe,h.memoizedState)||(Ku=!0),h.memoizedState=pe,h.baseQueue===null&&(h.baseState=pe),x.lastRenderedState=pe}return[pe,F]}function lu(d){var h=Cl();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d=h.queue={pending:null,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:d},d=d.dispatch=Ys.bind(null,qo,d),[h.memoizedState,d]}function Hl(d,h,x,F){return d={tag:d,create:h,destroy:x,deps:F,next:null},h=qo.updateQueue,h===null?(h={lastEffect:null},qo.updateQueue=h,h.lastEffect=d.next=d):(x=h.lastEffect,x===null?h.lastEffect=d.next=d:(F=x.next,x.next=d,d.next=F,h.lastEffect=d)),d}function Ld(){return Ks().memoizedState}function hc(d,h,x,F){var Q=Cl();qo.effectTag|=d,Q.memoizedState=Hl(1|h,x,void 0,F===void 0?null:F)}function Rc(d,h,x,F){var Q=Ks();F=F===void 0?null:F;var pe=void 0;if(us!==null){var je=us.memoizedState;if(pe=je.destroy,F!==null&&Nc(F,je.deps)){Hl(h,x,pe,F);return}}qo.effectTag|=d,Q.memoizedState=Hl(1|h,x,pe,F)}function cu(d,h){return hc(516,4,d,h)}function $s(d,h){return Rc(516,4,d,h)}function Du(d,h){return Rc(4,2,d,h)}function Vo(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function Pc(d,h,x){return x=x!=null?x.concat([d]):null,Rc(4,2,Vo.bind(null,h,d),x)}function sd(){}function Ic(d,h){return Cl().memoizedState=[d,h===void 0?null:h],d}function jd(d,h){var x=Ks();h=h===void 0?null:h;var F=x.memoizedState;return F!==null&&h!==null&&Nc(h,F[1])?F[0]:(x.memoizedState=[d,h],d)}function Lf(d,h){var x=Ks();h=h===void 0?null:h;var F=x.memoizedState;return F!==null&&h!==null&&Nc(h,F[1])?F[0]:(d=d(),x.memoizedState=[d,h],d)}function sf(d,h,x){var F=_d();sc(98>F?98:F,function(){d(!0)}),sc(97<F?97:F,function(){var Q=Zo.suspense;Zo.suspense=h===void 0?null:h;try{d(!1),x()}finally{Zo.suspense=Q}})}function Ys(d,h,x){var F=Pn(),Q=wl.suspense;F=na(F,d,Q),Q={expirationTime:F,suspenseConfig:Q,action:x,eagerReducer:null,eagerState:null,next:null};var pe=h.pending;if(pe===null?Q.next=Q:(Q.next=pe.next,pe.next=Q),h.pending=Q,pe=d.alternate,d===qo||pe!==null&&pe===qo)Wl=!0,Q.expirationTime=rl,qo.expirationTime=rl;else{if(d.expirationTime===0&&(pe===null||pe.expirationTime===0)&&(pe=h.lastRenderedReducer,pe!==null))try{var je=h.lastRenderedState,ct=pe(je,x);if(Q.eagerReducer=pe,Q.eagerState=ct,ps(ct,je))return}catch(yn){}finally{}dr(d,F)}}var uf={readContext:Us,useCallback:uu,useContext:uu,useEffect:uu,useImperativeHandle:uu,useLayoutEffect:uu,useMemo:uu,useReducer:uu,useRef:uu,useState:uu,useDebugValue:uu,useResponder:uu,useDeferredValue:uu,useTransition:uu},jf={readContext:Us,useCallback:Ic,useContext:Us,useEffect:cu,useImperativeHandle:function(h,x,F){return F=F!=null?F.concat([h]):null,hc(4,2,Vo.bind(null,x,h),F)},useLayoutEffect:function(h,x){return hc(4,2,h,x)},useMemo:function(h,x){var F=Cl();return x=x===void 0?null:x,h=h(),F.memoizedState=[h,x],h},useReducer:function(h,x,F){var Q=Cl();return x=F!==void 0?F(x):x,Q.memoizedState=Q.baseState=x,h=Q.queue={pending:null,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},h=h.dispatch=Ys.bind(null,qo,h),[Q.memoizedState,h]},useRef:function(h){var x=Cl();return h={current:h},x.memoizedState=h},useState:lu,useDebugValue:sd,useResponder:id,useDeferredValue:function(h,x){var F=lu(h),Q=F[0],pe=F[1];return cu(function(){var je=Zo.suspense;Zo.suspense=x===void 0?null:x;try{pe(h)}finally{Zo.suspense=je}},[h,x]),Q},useTransition:function(h){var x=lu(!1),F=x[0];return x=x[1],[Ic(sf.bind(null,x,h),[x,h]),F]}},lf={readContext:Us,useCallback:jd,useContext:Us,useEffect:$s,useImperativeHandle:Pc,useLayoutEffect:Du,useMemo:Lf,useReducer:Tl,useRef:Ld,useState:function(){return Tl(Hu)},useDebugValue:sd,useResponder:id,useDeferredValue:function(h,x){var F=Tl(Hu),Q=F[0],pe=F[1];return $s(function(){var je=Zo.suspense;Zo.suspense=x===void 0?null:x;try{pe(h)}finally{Zo.suspense=je}},[h,x]),Q},useTransition:function(h){var x=Tl(Hu),F=x[0];return x=x[1],[jd(sf.bind(null,x,h),[x,h]),F]}},Uf={readContext:Us,useCallback:jd,useContext:Us,useEffect:$s,useImperativeHandle:Pc,useLayoutEffect:Du,useMemo:Lf,useReducer:Al,useRef:Ld,useState:function(){return Al(Hu)},useDebugValue:sd,useResponder:id,useDeferredValue:function(h,x){var F=Al(Hu),Q=F[0],pe=F[1];return $s(function(){var je=Zo.suspense;Zo.suspense=x===void 0?null:x;try{pe(h)}finally{Zo.suspense=je}},[h,x]),Q},useTransition:function(h){var x=Al(Hu),F=x[0];return x=x[1],[jd(sf.bind(null,x,h),[x,h]),F]}},Qs=null,pc=null,lo=!1;function Lc(d,h){var x=eo(5,null,null,0);x.elementType="DELETED",x.type="DELETED",x.stateNode=h,x.return=d,x.effectTag=8,d.lastEffect!==null?(d.lastEffect.nextEffect=x,d.lastEffect=x):d.firstEffect=d.lastEffect=x}function Ud(d,h){switch(d.tag){case 5:var x=d.type;return h=h.nodeType!==1||x.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(d.stateNode=h,!0):!1;case 6:return h=d.pendingProps===""||h.nodeType!==3?null:h,h!==null?(d.stateNode=h,!0):!1;case 13:return!1;default:return!1}}function Ff(d){if(lo){var h=pc;if(h){var x=h;if(!Ud(d,h)){if(h=Hi(x.nextSibling),!h||!Ud(d,h)){d.effectTag=d.effectTag&-1025|2,lo=!1,Qs=d;return}Lc(Qs,x)}Qs=d,pc=Hi(h.firstChild)}else d.effectTag=d.effectTag&-1025|2,lo=!1,Qs=d}}function ih(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Qs=d}function Kl(d){if(d!==Qs)return!1;if(!lo)return ih(d),lo=!0,!1;var h=d.type;if(d.tag!==5||h!=="head"&&h!=="body"&&!Rn(h,d.memoizedProps))for(h=pc;h;)Lc(d,h),h=Hi(h.nextSibling);if(ih(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(T(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8){var x=d.data;if(x===Yo){if(h===0){pc=Hi(d.nextSibling);break e}h--}else x!==sa&&x!==bi&&x!==ka||h++}d=d.nextSibling}pc=null}}else pc=Qs?Hi(d.stateNode.nextSibling):null;return!0}function cf(){pc=Qs=null,lo=!1}var Fd=qn.ReactCurrentOwner,Ku=!1;function Fs(d,h,x,F){h.child=d===null?Pd(h,null,x,F):lc(h,d.child,x,F)}function Bd(d,h,x,F,Q){x=x.render;var pe=h.ref;return Dc(h,Q),F=al(d,h,x,F,pe,Q),d!==null&&!Ku?(h.updateQueue=d.updateQueue,h.effectTag&=-517,d.expirationTime<=Q&&(d.expirationTime=0),_u(d,h,Q)):(h.effectTag|=1,Fs(d,h,F,Q),h.child)}function Vd(d,h,x,F,Q,pe){if(d===null){var je=x.type;return typeof je=="function"&&!ms(je)&&je.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=je,il(d,h,je,F,Q,pe)):(d=On(x.type,null,F,null,h.mode,pe),d.ref=h.ref,d.return=h,h.child=d)}return je=d.child,Q<pe&&(Q=je.memoizedProps,x=x.compare,x=x!==null?x:Xs,x(Q,F)&&d.ref===h.ref)?_u(d,h,pe):(h.effectTag|=1,d=ht(je,F),d.ref=h.ref,d.return=h,h.child=d)}function il(d,h,x,F,Q,pe){return d!==null&&Xs(d.memoizedProps,F)&&d.ref===h.ref&&(Ku=!1,Q<pe)?(h.expirationTime=d.expirationTime,_u(d,h,pe)):Mu(d,h,x,F,pe)}function ud(d,h){var x=h.ref;(d===null&&x!==null||d!==null&&d.ref!==x)&&(h.effectTag|=128)}function Mu(d,h,x,F,Q){var pe=Ts(x)?Ls:ss.current;return pe=Bu(h,pe),Dc(h,Q),x=al(d,h,x,F,pe,Q),d!==null&&!Ku?(h.updateQueue=d.updateQueue,h.effectTag&=-517,d.expirationTime<=Q&&(d.expirationTime=0),_u(d,h,Q)):(h.effectTag|=1,Fs(d,h,x,Q),h.child)}function ld(d,h,x,F,Q){if(Ts(x)){var pe=!0;Tu(h)}else pe=!1;if(Dc(h,Q),h.stateNode===null)d!==null&&(d.alternate=null,h.alternate=null,h.effectTag|=2),nd(h,x,F),io(h,x,F,Q),F=!0;else if(d===null){var je=h.stateNode,ct=h.memoizedProps;je.props=ct;var yn=je.context,or=x.contextType;typeof or=="object"&&or!==null?or=Us(or):(or=Ts(x)?Ls:ss.current,or=Bu(h,or));var wr=x.getDerivedStateFromProps,ga=typeof wr=="function"||typeof je.getSnapshotBeforeUpdate=="function";ga||typeof je.UNSAFE_componentWillReceiveProps!="function"&&typeof je.componentWillReceiveProps!="function"||(ct!==F||yn!==or)&&rd(h,je,F,or),Au=!1;var pa=h.memoizedState;je.state=pa,xl(h,F,je,Q),yn=h.memoizedState,ct!==F||pa!==yn||ko.current||Au?(typeof wr=="function"&&(td(h,x,wr,F),yn=h.memoizedState),(ct=Au||af(h,x,ct,F,pa,yn,or))?(ga||typeof je.UNSAFE_componentWillMount!="function"&&typeof je.componentWillMount!="function"||(typeof je.componentWillMount=="function"&&je.componentWillMount(),typeof je.UNSAFE_componentWillMount=="function"&&je.UNSAFE_componentWillMount()),typeof je.componentDidMount=="function"&&(h.effectTag|=4)):(typeof je.componentDidMount=="function"&&(h.effectTag|=4),h.memoizedProps=F,h.memoizedState=yn),je.props=F,je.state=yn,je.context=or,F=ct):(typeof je.componentDidMount=="function"&&(h.effectTag|=4),F=!1)}else je=h.stateNode,Nd(d,h),ct=h.memoizedProps,je.props=h.type===h.elementType?ct:Ws(h.type,ct),yn=je.context,or=x.contextType,typeof or=="object"&&or!==null?or=Us(or):(or=Ts(x)?Ls:ss.current,or=Bu(h,or)),wr=x.getDerivedStateFromProps,(ga=typeof wr=="function"||typeof je.getSnapshotBeforeUpdate=="function")||typeof je.UNSAFE_componentWillReceiveProps!="function"&&typeof je.componentWillReceiveProps!="function"||(ct!==F||yn!==or)&&rd(h,je,F,or),Au=!1,yn=h.memoizedState,je.state=yn,xl(h,F,je,Q),pa=h.memoizedState,ct!==F||yn!==pa||ko.current||Au?(typeof wr=="function"&&(td(h,x,wr,F),pa=h.memoizedState),(wr=Au||af(h,x,ct,F,yn,pa,or))?(ga||typeof je.UNSAFE_componentWillUpdate!="function"&&typeof je.componentWillUpdate!="function"||(typeof je.componentWillUpdate=="function"&&je.componentWillUpdate(F,pa,or),typeof je.UNSAFE_componentWillUpdate=="function"&&je.UNSAFE_componentWillUpdate(F,pa,or)),typeof je.componentDidUpdate=="function"&&(h.effectTag|=4),typeof je.getSnapshotBeforeUpdate=="function"&&(h.effectTag|=256)):(typeof je.componentDidUpdate!="function"||ct===d.memoizedProps&&yn===d.memoizedState||(h.effectTag|=4),typeof je.getSnapshotBeforeUpdate!="function"||ct===d.memoizedProps&&yn===d.memoizedState||(h.effectTag|=256),h.memoizedProps=F,h.memoizedState=pa),je.props=F,je.state=pa,je.context=or,F=wr):(typeof je.componentDidUpdate!="function"||ct===d.memoizedProps&&yn===d.memoizedState||(h.effectTag|=4),typeof je.getSnapshotBeforeUpdate!="function"||ct===d.memoizedProps&&yn===d.memoizedState||(h.effectTag|=256),F=!1);return es(d,h,x,F,pe,Q)}function es(d,h,x,F,Q,pe){ud(d,h);var je=(h.effectTag&64)!==0;if(!F&&!je)return Q&&ou(h,x,!1),_u(d,h,pe);F=h.stateNode,Fd.current=h;var ct=je&&typeof x.getDerivedStateFromError!="function"?null:F.render();return h.effectTag|=1,d!==null&&je?(h.child=lc(h,d.child,null,pe),h.child=lc(h,null,ct,pe)):Fs(d,h,ct,pe),h.memoizedState=F.state,Q&&ou(h,x,!0),h.child}function cd(d){var h=d.stateNode;h.pendingContext?tl(d,h.pendingContext,h.pendingContext!==h.context):h.context&&tl(d,h.context,!1),kc(d,h.containerInfo)}var jc={dehydrated:null,retryTime:0};function zd(d,h,x){var F=h.mode,Q=h.pendingProps,pe=No.current,je=!1,ct;if((ct=(h.effectTag&64)!==0)||(ct=(pe&2)!==0&&(d===null||d.memoizedState!==null)),ct?(je=!0,h.effectTag&=-65):d!==null&&d.memoizedState===null||Q.fallback===void 0||Q.unstable_avoidThisFallback===!0||(pe|=1),Gi(No,pe&1),d===null){if(Q.fallback!==void 0&&Ff(h),je){if(je=Q.fallback,Q=ln(null,F,0,null),Q.return=h,(h.mode&2)===0)for(d=h.memoizedState!==null?h.child.child:h.child,Q.child=d;d!==null;)d.return=Q,d=d.sibling;return x=ln(je,F,x,null),x.return=h,Q.sibling=x,h.memoizedState=jc,h.child=Q,x}return F=Q.children,h.memoizedState=null,h.child=Pd(h,null,F,x)}if(d.memoizedState!==null){if(d=d.child,F=d.sibling,je){if(Q=Q.fallback,x=ht(d,d.pendingProps),x.return=h,(h.mode&2)===0&&(je=h.memoizedState!==null?h.child.child:h.child,je!==d.child))for(x.child=je;je!==null;)je.return=x,je=je.sibling;return F=ht(F,Q),F.return=h,x.sibling=F,x.childExpirationTime=0,h.memoizedState=jc,h.child=x,F}return x=lc(h,d.child,Q.children,x),h.memoizedState=null,h.child=x}if(d=d.child,je){if(je=Q.fallback,Q=ln(null,F,0,null),Q.return=h,Q.child=d,d!==null&&(d.return=Q),(h.mode&2)===0)for(d=h.memoizedState!==null?h.child.child:h.child,Q.child=d;d!==null;)d.return=Q,d=d.sibling;return x=ln(je,F,x,null),x.return=h,Q.sibling=x,x.effectTag|=2,Q.childExpirationTime=0,h.memoizedState=jc,h.child=Q,x}return h.memoizedState=null,h.child=lc(h,d,Q.children,x)}function dd(d,h){d.expirationTime<h&&(d.expirationTime=h);var x=d.alternate;x!==null&&x.expirationTime<h&&(x.expirationTime=h),rh(d.return,h)}function Ol(d,h,x,F,Q,pe){var je=d.memoizedState;je===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:F,tail:x,tailExpiration:0,tailMode:Q,lastEffect:pe}:(je.isBackwards=h,je.rendering=null,je.renderingStartTime=0,je.last=F,je.tail=x,je.tailExpiration=0,je.tailMode=Q,je.lastEffect=pe)}function Uc(d,h,x){var F=h.pendingProps,Q=F.revealOrder,pe=F.tail;if(Fs(d,h,F.children,x),F=No.current,(F&2)!==0)F=F&1|2,h.effectTag|=64;else{if(d!==null&&(d.effectTag&64)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&dd(d,x);else if(d.tag===19)dd(d,x);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}F&=1}if(Gi(No,F),(h.mode&2)===0)h.memoizedState=null;else switch(Q){case"forwards":for(x=h.child,Q=null;x!==null;)d=x.alternate,d!==null&&nl(d)===null&&(Q=x),x=x.sibling;x=Q,x===null?(Q=h.child,h.child=null):(Q=x.sibling,x.sibling=null),Ol(h,!1,Q,x,pe,h.lastEffect);break;case"backwards":for(x=null,Q=h.child,h.child=null;Q!==null;){if(d=Q.alternate,d!==null&&nl(d)===null){h.child=Q;break}d=Q.sibling,Q.sibling=x,x=Q,Q=d}Ol(h,!0,x,null,pe,h.lastEffect);break;case"together":Ol(h,!1,null,null,void 0,h.lastEffect);break;default:h.memoizedState=null}return h.child}function _u(d,h,x){d!==null&&(h.dependencies=d.dependencies);var F=h.expirationTime;if(F!==0&&Aa(F),h.childExpirationTime<x)return null;if(d!==null&&h.child!==d.child)throw Error(T(153));if(h.child!==null){for(d=h.child,x=ht(d,d.pendingProps),h.child=x,x.return=h;d.sibling!==null;)d=d.sibling,x=x.sibling=ht(d,d.pendingProps),x.return=h;x.sibling=null}return h.child}var fd,Gd,Fc,Sl;fd=function(h,x){for(var F=x.child;F!==null;){if(F.tag===5||F.tag===6)h.appendChild(F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===x)break;for(;F.sibling===null;){if(F.return===null||F.return===x)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},Gd=function(){},Fc=function(h,x,F,Q,pe){var je=h.memoizedProps;if(je!==Q){var ct=x.stateNode;Hs(Xu.current),h=null;switch(F){case"input":je=lt(ct,je),Q=lt(ct,Q),h=[];break;case"option":je=kr(ct,je),Q=kr(ct,Q),h=[];break;case"select":je=f({},je,{value:void 0}),Q=f({},Q,{value:void 0}),h=[];break;case"textarea":je=fa(ct,je),Q=fa(ct,Q),h=[];break;default:typeof je.onClick!="function"&&typeof Q.onClick=="function"&&(ct.onclick=Cn)}Ie(F,Q);var yn,or;F=null;for(yn in je)if(!Q.hasOwnProperty(yn)&&je.hasOwnProperty(yn)&&je[yn]!=null)if(yn==="style")for(or in ct=je[yn],ct)ct.hasOwnProperty(or)&&(F||(F={}),F[or]="");else yn!=="dangerouslySetInnerHTML"&&yn!=="children"&&yn!=="suppressContentEditableWarning"&&yn!=="suppressHydrationWarning"&&yn!=="autoFocus"&&(Ee.hasOwnProperty(yn)?h||(h=[]):(h=h||[]).push(yn,null));for(yn in Q){var wr=Q[yn];if(ct=je!=null?je[yn]:void 0,Q.hasOwnProperty(yn)&&wr!==ct&&(wr!=null||ct!=null))if(yn==="style")if(ct){for(or in ct)!ct.hasOwnProperty(or)||wr&&wr.hasOwnProperty(or)||(F||(F={}),F[or]="");for(or in wr)wr.hasOwnProperty(or)&&ct[or]!==wr[or]&&(F||(F={}),F[or]=wr[or])}else F||(h||(h=[]),h.push(yn,F)),F=wr;else yn==="dangerouslySetInnerHTML"?(wr=wr?wr.__html:void 0,ct=ct?ct.__html:void 0,wr!=null&&ct!==wr&&(h=h||[]).push(yn,wr)):yn==="children"?ct===wr||typeof wr!="string"&&typeof wr!="number"||(h=h||[]).push(yn,""+wr):yn!=="suppressContentEditableWarning"&&yn!=="suppressHydrationWarning"&&(Ee.hasOwnProperty(yn)?(wr!=null&&zt(pe,yn),h||ct===wr||(h=[])):(h=h||[]).push(yn,wr))}F&&(h=h||[]).push("style",F),pe=h,(x.updateQueue=pe)&&(x.effectTag|=4)}},Sl=function(h,x,F,Q){F!==Q&&(x.effectTag|=4)};function Xd(d,h){switch(d.tailMode){case"hidden":h=d.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?d.tail=null:x.sibling=null;break;case"collapsed":x=d.tail;for(var F=null;x!==null;)x.alternate!==null&&(F=x),x=x.sibling;F===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:F.sibling=null}}function Bf(d,h,x){var F=h.pendingProps;switch(h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ts(h.type)&&Td(),null;case 3:return dc(),qi(ko),qi(ss),x=h.stateNode,x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),d!==null&&d.child!==null||!Kl(h)||(h.effectTag|=4),Gd(h),null;case 5:fc(h),x=Hs(Wu.current);var Q=h.type;if(d!==null&&h.stateNode!=null)Fc(d,h,Q,F,x),d.ref!==h.ref&&(h.effectTag|=128);else{if(!F){if(h.stateNode===null)throw Error(T(166));return null}if(d=Hs(Xu.current),Kl(h)){F=h.stateNode,Q=h.type;var pe=h.memoizedProps;F[uo]=h,F[Io]=pe;switch(Q){case"iframe":case"object":case"embed":Qa("load",F);break;case"video":case"audio":for(d=0;d<To.length;d++)Qa(To[d],F);break;case"source":Qa("error",F);break;case"img":case"image":case"link":Qa("error",F),Qa("load",F);break;case"form":Qa("reset",F),Qa("submit",F);break;case"details":Qa("toggle",F);break;case"input":Vt(F,pe),Qa("invalid",F),zt(x,"onChange");break;case"select":F._wrapperState={wasMultiple:!!pe.multiple},Qa("invalid",F),zt(x,"onChange");break;case"textarea":ea(F,pe),Qa("invalid",F),zt(x,"onChange")}Ie(Q,pe),d=null;for(var je in pe)if(pe.hasOwnProperty(je)){var ct=pe[je];je==="children"?typeof ct=="string"?F.textContent!==ct&&(d=["children",ct]):typeof ct=="number"&&F.textContent!==""+ct&&(d=["children",""+ct]):Ee.hasOwnProperty(je)&&ct!=null&&zt(x,je)}switch(Q){case"input":et(F),Jt(F,pe,!0);break;case"textarea":et(F),Va(F);break;case"select":case"option":break;default:typeof pe.onClick=="function"&&(F.onclick=Cn)}x=d,h.updateQueue=x,x!==null&&(h.effectTag|=4)}else{je=x.nodeType===9?x:x.ownerDocument,d===Pt&&(d=$a(Q)),d===Pt?Q==="script"?(d=je.createElement("div"),d.innerHTML="<script></script>",d=d.removeChild(d.firstChild)):typeof F.is=="string"?d=je.createElement(Q,{is:F.is}):(d=je.createElement(Q),Q==="select"&&(je=d,F.multiple?je.multiple=!0:F.size&&(je.size=F.size))):d=je.createElementNS(d,Q),d[uo]=h,d[Io]=F,fd(d,h,!1,!1),h.stateNode=d,je=Ze(Q,F);switch(Q){case"iframe":case"object":case"embed":Qa("load",d),ct=F;break;case"video":case"audio":for(ct=0;ct<To.length;ct++)Qa(To[ct],d);ct=F;break;case"source":Qa("error",d),ct=F;break;case"img":case"image":case"link":Qa("error",d),Qa("load",d),ct=F;break;case"form":Qa("reset",d),Qa("submit",d),ct=F;break;case"details":Qa("toggle",d),ct=F;break;case"input":Vt(d,F),ct=lt(d,F),Qa("invalid",d),zt(x,"onChange");break;case"option":ct=kr(d,F);break;case"select":d._wrapperState={wasMultiple:!!F.multiple},ct=f({},F,{value:void 0}),Qa("invalid",d),zt(x,"onChange");break;case"textarea":ea(d,F),ct=fa(d,F),Qa("invalid",d),zt(x,"onChange");break;default:ct=F}Ie(Q,ct);var yn=ct;for(pe in yn)if(yn.hasOwnProperty(pe)){var or=yn[pe];pe==="style"?fe(d,or):pe==="dangerouslySetInnerHTML"?(or=or?or.__html:void 0,or!=null&&Ya(d,or)):pe==="children"?typeof or=="string"?(Q!=="textarea"||or!=="")&&ro(d,or):typeof or=="number"&&ro(d,""+or):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(Ee.hasOwnProperty(pe)?or!=null&&zt(x,pe):or!=null&&nr(d,pe,or,je))}switch(Q){case"input":et(d),Jt(d,F,!1);break;case"textarea":et(d),Va(d);break;case"option":F.value!=null&&d.setAttribute("value",""+Yn(F.value));break;case"select":d.multiple=!!F.multiple,x=F.value,x!=null?Ur(d,!!F.multiple,x,!1):F.defaultValue!=null&&Ur(d,!!F.multiple,F.defaultValue,!0);break;default:typeof ct.onClick=="function"&&(d.onclick=Cn)}rt(Q,F)&&(h.effectTag|=4)}h.ref!==null&&(h.effectTag|=128)}return null;case 6:if(d&&h.stateNode!=null)Sl(d,h,d.memoizedProps,F);else{if(typeof F!="string"&&h.stateNode===null)throw Error(T(166));x=Hs(Wu.current),Hs(Xu.current),Kl(h)?(x=h.stateNode,F=h.memoizedProps,x[uo]=h,x.nodeValue!==F&&(h.effectTag|=4)):(x=(x.nodeType===9?x:x.ownerDocument).createTextNode(F),x[uo]=h,h.stateNode=x)}return null;case 13:return qi(No),F=h.memoizedState,(h.effectTag&64)!==0?(h.expirationTime=x,h):(x=F!==null,F=!1,d===null?h.memoizedProps.fallback!==void 0&&Kl(h):(Q=d.memoizedState,F=Q!==null,x||Q===null||(Q=d.child.sibling,Q!==null&&(pe=h.firstEffect,pe!==null?(h.firstEffect=Q,Q.nextEffect=pe):(h.firstEffect=h.lastEffect=Q,Q.nextEffect=null),Q.effectTag=8))),x&&!F&&(h.mode&2)!==0&&(d===null&&h.memoizedProps.unstable_avoidThisFallback!==!0||(No.current&1)!==0?vs===gc&&(vs=$d):((vs===gc||vs===$d)&&(vs=pd),Vn!==0&&du!==null&&(Nt(du,Bs),tn(du,Vn)))),(x||F)&&(h.effectTag|=4),null);case 4:return dc(),Gd(h),null;case 10:return Pf(h),null;case 17:return Ts(h.type)&&Td(),null;case 19:if(qi(No),F=h.memoizedState,F===null)return null;if(Q=(h.effectTag&64)!==0,pe=F.rendering,pe===null){if(Q)Xd(F,!1);else if(vs!==gc||d!==null&&(d.effectTag&64)!==0)for(pe=h.child;pe!==null;){if(d=nl(pe),d!==null){for(h.effectTag|=64,Xd(F,!1),Q=d.updateQueue,Q!==null&&(h.updateQueue=Q,h.effectTag|=4),F.lastEffect===null&&(h.firstEffect=null),h.lastEffect=F.lastEffect,F=h.child;F!==null;)Q=F,pe=x,Q.effectTag&=2,Q.nextEffect=null,Q.firstEffect=null,Q.lastEffect=null,d=Q.alternate,d===null?(Q.childExpirationTime=0,Q.expirationTime=pe,Q.child=null,Q.memoizedProps=null,Q.memoizedState=null,Q.updateQueue=null,Q.dependencies=null):(Q.childExpirationTime=d.childExpirationTime,Q.expirationTime=d.expirationTime,Q.child=d.child,Q.memoizedProps=d.memoizedProps,Q.memoizedState=d.memoizedState,Q.updateQueue=d.updateQueue,pe=d.dependencies,Q.dependencies=pe===null?null:{expirationTime:pe.expirationTime,firstContext:pe.firstContext,responders:pe.responders}),F=F.sibling;return Gi(No,No.current&1|2),h.child}pe=pe.sibling}}else{if(!Q)if(d=nl(pe),d!==null){if(h.effectTag|=64,Q=!0,x=d.updateQueue,x!==null&&(h.updateQueue=x,h.effectTag|=4),Xd(F,!0),F.tail===null&&F.tailMode==="hidden"&&!pe.alternate)return h=h.lastEffect=F.lastEffect,h!==null&&(h.nextEffect=null),null}else 2*su()-F.renderingStartTime>F.tailExpiration&&1<x&&(h.effectTag|=64,Q=!0,Xd(F,!1),h.expirationTime=h.childExpirationTime=x-1);F.isBackwards?(pe.sibling=h.child,h.child=pe):(x=F.last,x!==null?x.sibling=pe:h.child=pe,F.last=pe)}return F.tail!==null?(F.tailExpiration===0&&(F.tailExpiration=su()+500),x=F.tail,F.rendering=x,F.tail=x.sibling,F.lastEffect=h.lastEffect,F.renderingStartTime=su(),x.sibling=null,h=No.current,Gi(No,Q?h&1|2:h&1),x):null}throw Error(T(156,h.tag))}function oh(d){switch(d.tag){case 1:Ts(d.type)&&Td();var h=d.effectTag;return h&4096?(d.effectTag=h&-4097|64,d):null;case 3:if(dc(),qi(ko),qi(ss),h=d.effectTag,(h&64)!==0)throw Error(T(285));return d.effectTag=h&-4097|64,d;case 5:return fc(d),null;case 13:return qi(No),h=d.effectTag,h&4096?(d.effectTag=h&-4097|64,d):null;case 19:return qi(No),null;case 4:return dc(),null;case 10:return Pf(d),null;default:return null}}function df(d,h){return{value:d,source:h,stack:Gn(h)}}var Lh=typeof WeakSet=="function"?WeakSet:Set;function $u(d,h){var x=h.source,F=h.stack;F===null&&x!==null&&(F=Gn(x)),x!==null&&An(x.type),h=h.value,d!==null&&d.tag===1&&An(d.type);try{console.error(h)}catch(Q){setTimeout(function(){throw Q})}}function sh(d,h){try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(x){Do(d,x)}}function ff(d){var h=d.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(x){Do(d,x)}else h.current=null}function Vf(d,h){switch(h.tag){case 0:case 11:case 15:case 22:return;case 1:if(h.effectTag&256&&d!==null){var x=d.memoizedProps,F=d.memoizedState;d=h.stateNode,h=d.getSnapshotBeforeUpdate(h.elementType===h.type?x:Ws(h.type,x),F),d.__reactInternalSnapshotBeforeUpdate=h}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(T(163))}function uh(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&d)===d){var F=x.destroy;x.destroy=void 0,F!==void 0&&F()}x=x.next}while(x!==h)}}function zf(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&d)===d){var F=x.create;x.destroy=F()}x=x.next}while(x!==h)}}function lh(d,h,x){switch(x.tag){case 0:case 11:case 15:case 22:zf(3,x);return;case 1:if(d=x.stateNode,x.effectTag&4)if(h===null)d.componentDidMount();else{var F=x.elementType===x.type?h.memoizedProps:Ws(x.type,h.memoizedProps);d.componentDidUpdate(F,h.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}h=x.updateQueue,h!==null&&If(x,h,d);return;case 3:if(h=x.updateQueue,h!==null){if(d=null,x.child!==null)switch(x.child.tag){case 5:d=x.child.stateNode;break;case 1:d=x.child.stateNode}If(x,h,d)}return;case 5:d=x.stateNode,h===null&&x.effectTag&4&&rt(x.type,x.memoizedProps)&&d.focus();return;case 6:return;case 4:return;case 12:return;case 13:x.memoizedState===null&&(x=x.alternate,x!==null&&(x=x.memoizedState,x!==null&&(x=x.dehydrated,x!==null&&bu(x))));return;case 19:case 17:case 20:case 21:return}throw Error(T(163))}function ol(d,h,x){typeof va=="function"&&va(h);switch(h.tag){case 0:case 11:case 14:case 15:case 22:if(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var F=d.next;sc(97<x?97:x,function(){var Q=F;do{var pe=Q.destroy;if(pe!==void 0){var je=h;try{pe()}catch(ct){Do(je,ct)}}Q=Q.next}while(Q!==F)})}break;case 1:ff(h),x=h.stateNode,typeof x.componentWillUnmount=="function"&&sh(h,x);break;case 5:ff(h);break;case 4:mc(d,h,x)}}function ku(d){var h=d.alternate;d.return=null,d.child=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.alternate=null,d.firstEffect=null,d.lastEffect=null,d.pendingProps=null,d.memoizedProps=null,d.stateNode=null,h!==null&&ku(h)}function vc(d){return d.tag===5||d.tag===3||d.tag===4}function Dl(d){e:{for(var h=d.return;h!==null;){if(vc(h)){var x=h;break e}h=h.return}throw Error(T(160))}h=x.stateNode;switch(x.tag){case 5:var F=!1;break;case 3:h=h.containerInfo,F=!0;break;case 4:h=h.containerInfo,F=!0;break;default:throw Error(T(161))}x.effectTag&16&&(ro(h,""),x.effectTag&=-17);e:t:for(x=d;;){for(;x.sibling===null;){if(x.return===null||vc(x.return)){x=null;break e}x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.effectTag&2)continue t;if(x.child===null||x.tag===4)continue t;x.child.return=x,x=x.child}if(!(x.effectTag&2)){x=x.stateNode;break e}}F?Wd(d,x,h):hd(d,x,h)}function Wd(d,h,x){var F=d.tag,Q=F===5||F===6;if(Q)d=Q?d.stateNode:d.stateNode.instance,h?x.nodeType===8?x.parentNode.insertBefore(d,h):x.insertBefore(d,h):(x.nodeType===8?(h=x.parentNode,h.insertBefore(d,x)):(h=x,h.appendChild(d)),x=x._reactRootContainer,x!=null||h.onclick!==null||(h.onclick=Cn));else if(F!==4&&(d=d.child,d!==null))for(Wd(d,h,x),d=d.sibling;d!==null;)Wd(d,h,x),d=d.sibling}function hd(d,h,x){var F=d.tag,Q=F===5||F===6;if(Q)d=Q?d.stateNode:d.stateNode.instance,h?x.insertBefore(d,h):x.appendChild(d);else if(F!==4&&(d=d.child,d!==null))for(hd(d,h,x),d=d.sibling;d!==null;)hd(d,h,x),d=d.sibling}function mc(d,h,x){for(var F=h,Q=!1,pe,je;;){if(!Q){Q=F.return;e:for(;;){if(Q===null)throw Error(T(160));pe=Q.stateNode;switch(Q.tag){case 5:je=!1;break e;case 3:pe=pe.containerInfo,je=!0;break e;case 4:pe=pe.containerInfo,je=!0;break e}Q=Q.return}Q=!0}if(F.tag===5||F.tag===6){e:for(var ct=d,yn=F,or=x,wr=yn;;)if(ol(ct,wr,or),wr.child!==null&&wr.tag!==4)wr.child.return=wr,wr=wr.child;else{if(wr===yn)break e;for(;wr.sibling===null;){if(wr.return===null||wr.return===yn)break e;wr=wr.return}wr.sibling.return=wr.return,wr=wr.sibling}je?(ct=pe,yn=F.stateNode,ct.nodeType===8?ct.parentNode.removeChild(yn):ct.removeChild(yn)):pe.removeChild(F.stateNode)}else if(F.tag===4){if(F.child!==null){pe=F.stateNode.containerInfo,je=!0,F.child.return=F,F=F.child;continue}}else if(ol(d,F,x),F.child!==null){F.child.return=F,F=F.child;continue}if(F===h)break;for(;F.sibling===null;){if(F.return===null||F.return===h)return;F=F.return,F.tag===4&&(Q=!1)}F.sibling.return=F.return,F=F.sibling}}function Hd(d,h){switch(h.tag){case 0:case 11:case 14:case 15:case 22:uh(3,h);return;case 1:return;case 5:var x=h.stateNode;if(x!=null){var F=h.memoizedProps,Q=d!==null?d.memoizedProps:F;d=h.type;var pe=h.updateQueue;if(h.updateQueue=null,pe!==null){for(x[Io]=F,d==="input"&&F.type==="radio"&&F.name!=null&&cn(x,F),Ze(d,Q),h=Ze(d,F),Q=0;Q<pe.length;Q+=2){var je=pe[Q],ct=pe[Q+1];je==="style"?fe(x,ct):je==="dangerouslySetInnerHTML"?Ya(x,ct):je==="children"?ro(x,ct):nr(x,je,ct,h)}switch(d){case"input":We(x,F);break;case"textarea":ia(x,F);break;case"select":h=x._wrapperState.wasMultiple,x._wrapperState.wasMultiple=!!F.multiple,d=F.value,d!=null?Ur(x,!!F.multiple,d,!1):h!==!!F.multiple&&(F.defaultValue!=null?Ur(x,!!F.multiple,F.defaultValue,!0):Ur(x,!!F.multiple,F.multiple?[]:"",!1))}}}return;case 6:if(h.stateNode===null)throw Error(T(162));h.stateNode.nodeValue=h.memoizedProps;return;case 3:h=h.stateNode,h.hydrate&&(h.hydrate=!1,bu(h.containerInfo));return;case 12:return;case 13:if(x=h,h.memoizedState===null?F=!1:(F=!0,x=h.child,bn=su()),x!==null)e:for(d=x;;){if(d.tag===5)pe=d.stateNode,F?(pe=pe.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none"):(pe=d.stateNode,Q=d.memoizedProps.style,Q=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,pe.style.display=Y("display",Q));else if(d.tag===6)d.stateNode.nodeValue=F?"":d.memoizedProps;else if(d.tag===13&&d.memoizedState!==null&&d.memoizedState.dehydrated===null){pe=d.child.sibling,pe.return=d,d=pe;continue}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===x)break;for(;d.sibling===null;){if(d.return===null||d.return===x)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}As(h);return;case 19:As(h);return;case 17:return}throw Error(T(163))}function As(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var x=d.stateNode;x===null&&(x=d.stateNode=new Lh),h.forEach(function(F){var Q=Ha.bind(null,d,F);x.has(F)||(x.add(F),F.then(Q,Q))})}}var $l=typeof WeakMap=="function"?WeakMap:Map;function Ro(d,h,x){x=Ou(x,null),x.tag=3,x.payload={element:null};var F=h.value;return x.callback=function(){mr||(mr=!0,Er=F),$u(d,h)},x}function zo(d,h,x){x=Ou(x,null),x.tag=3;var F=d.type.getDerivedStateFromError;if(typeof F=="function"){var Q=h.value;x.payload=function(){return $u(d,h),F(Q)}}var pe=d.stateNode;return pe!==null&&typeof pe.componentDidCatch=="function"&&(x.callback=function(){typeof F!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this),$u(d,h));var je=h.stack;this.componentDidCatch(h.value,{componentStack:je!==null?je:""})}),x}var ch=Math.ceil,hf=qn.ReactCurrentDispatcher,dh=qn.ReactCurrentOwner,Go=0,Gf=8,Nu=16,sl=32,gc=0,Kd=1,Xf=2,$d=3,pd=4,yc=5,ii=Go,du=null,ci=null,Bs=0,vs=gc,ge=null,_e=1073741823,Et=1073741823,vn=null,Vn=0,kn=!1,bn=0,ur=500,Sn=null,mr=!1,Er=null,Cr=null,Ir=!1,Mr=null,xr=90,mn=null,fn=0,br=null,Fr=0;function Pn(){return(ii&(Nu|sl))!==Go?1073741821-(su()/10|0):Fr!==0?Fr:Fr=1073741821-(su()/10|0)}function na(d,h,x){if(h=h.mode,(h&2)===0)return 1073741823;var F=_d();if((h&4)===0)return F===99?1073741823:1073741822;if((ii&Nu)!==Go)return Bs;if(x!==null)d=Oo(d,x.timeoutMs|0||5e3,250);else switch(F){case 99:d=1073741823;break;case 98:d=Oo(d,150,100);break;case 97:case 96:d=Oo(d,5e3,250);break;case 95:d=2;break;default:throw Error(T(326))}return du!==null&&d===Bs&&--d,d}function dr(d,h){if(50<fn)throw fn=0,br=null,Error(T(185));if(d=lr(d,h),d!==null){var x=_d();h===1073741823?(ii&Gf)!==Go&&(ii&(Nu|sl))===Go?Ma(d):(fr(d),ii===Go&&js()):fr(d),(ii&4)===Go||x!==98&&x!==99||(mn===null?mn=new Map([[d,h]]):(x=mn.get(d),(x===void 0||x>h)&&mn.set(d,h)))}}function lr(d,h){d.expirationTime<h&&(d.expirationTime=h);var x=d.alternate;x!==null&&x.expirationTime<h&&(x.expirationTime=h);var F=d.return,Q=null;if(F===null&&d.tag===3)Q=d.stateNode;else for(;F!==null;){if(x=F.alternate,F.childExpirationTime<h&&(F.childExpirationTime=h),x!==null&&x.childExpirationTime<h&&(x.childExpirationTime=h),F.return===null&&F.tag===3){Q=F.stateNode;break}F=F.return}return Q!==null&&(du===Q&&(Aa(h),vs===pd&&Nt(Q,Bs)),tn(Q,h)),Q}function ir(d){var h=d.lastExpiredTime;if(h!==0)return h;if(h=d.firstPendingTime,!Ge(d,h))return h;var x=d.lastPingedTime;return d=d.nextKnownPendingLevel,d=x>d?x:d,2>=d&&h!==d?0:d}function fr(d){if(d.lastExpiredTime!==0)d.callbackExpirationTime=1073741823,d.callbackPriority=99,d.callbackNode=th(Ma.bind(null,d));else{var h=ir(d),x=d.callbackNode;if(h===0)x!==null&&(d.callbackNode=null,d.callbackExpirationTime=0,d.callbackPriority=90);else{var F=Pn();if(h===1073741823?F=99:h===1||h===2?F=95:(F=10*(1073741821-h)-10*(1073741821-F),F=0>=F?99:250>=F?98:5250>=F?97:95),x!==null){var Q=d.callbackPriority;if(d.callbackExpirationTime===h&&Q>=F)return;x!==Dd&&Jc(x)}d.callbackExpirationTime=h,d.callbackPriority=F,h=h===1073741823?th(Ma.bind(null,d)):Oc(F,oa.bind(null,d),{timeout:10*(1073741821-h)-su()}),d.callbackNode=h}}}function oa(d,h){if(Fr=0,h)return h=Pn(),nn(d,h),fr(d),null;var x=ir(d);if(x!==0){if(h=d.callbackNode,(ii&(Nu|sl))!==Go)throw Error(T(327));if(po(),d===du&&x===Bs||ha(d,x),ci!==null){var F=ii;ii|=Nu;var Q=Jr();do try{gi();break}catch(ct){Wa(d,ct)}while(1);if(Rf(),ii=F,hf.current=Q,vs===Kd)throw h=ge,ha(d,x),Nt(d,x),fr(d),h;if(ci===null)switch(Q=d.finishedWork=d.current.alternate,d.finishedExpirationTime=x,F=vs,du=null,F){case gc:case Kd:throw Error(T(345));case Xf:nn(d,2<x?2:x);break;case $d:if(Nt(d,x),F=d.lastSuspendedTime,x===F&&(d.nextKnownPendingLevel=oi(Q)),_e===1073741823&&(Q=bn+ur-su(),10<Q)){if(kn){var pe=d.lastPingedTime;if(pe===0||pe>=x){d.lastPingedTime=x,ha(d,x);break}}if(pe=ir(d),pe!==0&&pe!==x)break;if(F!==0&&F!==x){d.lastPingedTime=F;break}d.timeoutHandle=Qr(Ni.bind(null,d),Q);break}Ni(d);break;case pd:if(Nt(d,x),F=d.lastSuspendedTime,x===F&&(d.nextKnownPendingLevel=oi(Q)),kn&&(Q=d.lastPingedTime,Q===0||Q>=x)){d.lastPingedTime=x,ha(d,x);break}if(Q=ir(d),Q!==0&&Q!==x)break;if(F!==0&&F!==x){d.lastPingedTime=F;break}if(Et!==1073741823?F=10*(1073741821-Et)-su():_e===1073741823?F=0:(F=10*(1073741821-_e)-5e3,Q=su(),x=10*(1073741821-x)-Q,F=Q-F,0>F&&(F=0),F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*ch(F/1960))-F,x<F&&(F=x)),10<F){d.timeoutHandle=Qr(Ni.bind(null,d),F);break}Ni(d);break;case yc:if(_e!==1073741823&&vn!==null){pe=_e;var je=vn;if(F=je.busyMinDurationMs|0,0>=F?F=0:(Q=je.busyDelayMs|0,pe=su()-(10*(1073741821-pe)-(je.timeoutMs|0||5e3)),F=pe<=Q?0:Q+F-pe),10<F){Nt(d,x),d.timeoutHandle=Qr(Ni.bind(null,d),F);break}}Ni(d);break;default:throw Error(T(329))}if(fr(d),d.callbackNode===h)return oa.bind(null,d)}}return null}function Ma(d){var h=d.lastExpiredTime;if(h=h!==0?h:1073741823,(ii&(Nu|sl))!==Go)throw Error(T(327));if(po(),d===du&&h===Bs||ha(d,h),ci!==null){var x=ii;ii|=Nu;var F=Jr();do try{ei();break}catch(Q){Wa(d,Q)}while(1);if(Rf(),ii=x,hf.current=F,vs===Kd)throw x=ge,ha(d,h),Nt(d,h),fr(d),x;if(ci!==null)throw Error(T(261));d.finishedWork=d.current.alternate,d.finishedExpirationTime=h,du=null,Ni(d),fr(d)}return null}function Pr(){if(mn!==null){var d=mn;mn=null,d.forEach(function(h,x){nn(x,h),fr(x)}),js()}}function Tr(d,h){var x=ii;ii|=1;try{return d(h)}finally{ii=x,ii===Go&&js()}}function er(d,h){var x=ii;ii&=-2,ii|=Gf;try{return d(h)}finally{ii=x,ii===Go&&js()}}function ha(d,h){d.finishedWork=null,d.finishedExpirationTime=0;var x=d.timeoutHandle;if(x!==-1&&(d.timeoutHandle=-1,mi(x)),ci!==null)for(x=ci.return;x!==null;){var F=x;switch(F.tag){case 1:F=F.type.childContextTypes,F!=null&&Td();break;case 3:dc(),qi(ko),qi(ss);break;case 5:fc(F);break;case 4:dc();break;case 13:qi(No);break;case 19:qi(No);break;case 10:Pf(F)}x=x.return}du=d,ci=ht(d.current,null),Bs=h,vs=gc,ge=null,Et=_e=1073741823,vn=null,Vn=0,kn=!1}function Wa(d,h){do{try{if(Rf(),od.current=uf,Wl)for(var x=qo.memoizedState;x!==null;){var F=x.queue;F!==null&&(F.pending=null),x=x.next}if(rl=0,ls=us=qo=null,Wl=!1,ci===null||ci.return===null)return vs=Kd,ge=h,ci=null;e:{var Q=d,pe=ci.return,je=ci,ct=h;if(h=Bs,je.effectTag|=2048,je.firstEffect=je.lastEffect=null,ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var yn=ct;if((je.mode&2)===0){var or=je.alternate;or?(je.updateQueue=or.updateQueue,je.memoizedState=or.memoizedState,je.expirationTime=or.expirationTime):(je.updateQueue=null,je.memoizedState=null)}var wr=(No.current&1)!==0,ga=pe;do{var pa;if(pa=ga.tag===13){var Fi=ga.memoizedState;if(Fi!==null)pa=Fi.dehydrated!==null;else{var ul=ga.memoizedProps;pa=ul.fallback===void 0?!1:ul.unstable_avoidThisFallback!==!0?!0:!wr}}if(pa){var Vs=ga.updateQueue;if(Vs===null){var In=new Set;In.add(yn),ga.updateQueue=In}else Vs.add(yn);if((ga.mode&2)===0){if(ga.effectTag|=64,je.effectTag&=-2981,je.tag===1)if(je.alternate===null)je.tag=17;else{var wn=Ou(1073741823,null);wn.tag=2,Su(je,wn)}je.expirationTime=1073741823;break e}ct=void 0,je=h;var cr=Q.pingCache;if(cr===null?(cr=Q.pingCache=new $l,ct=new Set,cr.set(yn,ct)):(ct=cr.get(yn),ct===void 0&&(ct=new Set,cr.set(yn,ct))),!ct.has(je)){ct.add(je);var Xr=vo.bind(null,Q,yn,je);yn.then(Xr,Xr)}ga.effectTag|=4096,ga.expirationTime=h;break e}ga=ga.return}while(ga!==null);ct=Error((An(je.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+Gn(je))}vs!==yc&&(vs=Xf),ct=df(ct,je),ga=pe;do{switch(ga.tag){case 3:yn=ct,ga.effectTag|=4096,ga.expirationTime=h;var aa=Ro(ga,yn,h);ah(ga,aa);break e;case 1:yn=ct;var ba=ga.type,ri=ga.stateNode;if((ga.effectTag&64)===0&&(typeof ba.getDerivedStateFromError=="function"||ri!==null&&typeof ri.componentDidCatch=="function"&&(Cr===null||!Cr.has(ri)))){ga.effectTag|=4096,ga.expirationTime=h;var Ri=zo(ga,yn,h);ah(ga,Ri);break e}}ga=ga.return}while(ga!==null)}ci=jo(ci)}catch(mo){h=mo;continue}break}while(1)}function Jr(){var d=hf.current;return hf.current=uf,d===null?uf:d}function Ja(d,h){d<_e&&2<d&&(_e=d),h!==null&&d<Et&&2<d&&(Et=d,vn=h)}function Aa(d){d>Vn&&(Vn=d)}function ei(){for(;ci!==null;)ci=So(ci)}function gi(){for(;ci!==null&&!Qi();)ci=So(ci)}function So(d){var h=Wo(d.alternate,d,Bs);return d.memoizedProps=d.pendingProps,h===null&&(h=jo(d)),dh.current=null,h}function jo(d){ci=d;do{var h=ci.alternate;if(d=ci.return,(ci.effectTag&2048)===0){if(h=Bf(h,ci,Bs),Bs===1||ci.childExpirationTime!==1){for(var x=0,F=ci.child;F!==null;){var Q=F.expirationTime,pe=F.childExpirationTime;Q>x&&(x=Q),pe>x&&(x=pe),F=F.sibling}ci.childExpirationTime=x}if(h!==null)return h;d!==null&&(d.effectTag&2048)===0&&(d.firstEffect===null&&(d.firstEffect=ci.firstEffect),ci.lastEffect!==null&&(d.lastEffect!==null&&(d.lastEffect.nextEffect=ci.firstEffect),d.lastEffect=ci.lastEffect),1<ci.effectTag&&(d.lastEffect!==null?d.lastEffect.nextEffect=ci:d.firstEffect=ci,d.lastEffect=ci))}else{if(h=oh(ci),h!==null)return h.effectTag&=2047,h;d!==null&&(d.firstEffect=d.lastEffect=null,d.effectTag|=2048)}if(h=ci.sibling,h!==null)return h;ci=d}while(ci!==null);return vs===gc&&(vs=yc),null}function oi(d){var h=d.expirationTime;return d=d.childExpirationTime,h>d?h:d}function Ni(d){var h=_d();return sc(99,oo.bind(null,d,h)),null}function oo(d,h){do po();while(Mr!==null);if((ii&(Nu|sl))!==Go)throw Error(T(327));var x=d.finishedWork,F=d.finishedExpirationTime;if(x===null)return null;if(d.finishedWork=null,d.finishedExpirationTime=0,x===d.current)throw Error(T(177));d.callbackNode=null,d.callbackExpirationTime=0,d.callbackPriority=90,d.nextKnownPendingLevel=0;var Q=oi(x);if(d.firstPendingTime=Q,F<=d.lastSuspendedTime?d.firstSuspendedTime=d.lastSuspendedTime=d.nextKnownPendingLevel=0:F<=d.firstSuspendedTime&&(d.firstSuspendedTime=F-1),F<=d.lastPingedTime&&(d.lastPingedTime=0),F<=d.lastExpiredTime&&(d.lastExpiredTime=0),d===du&&(ci=du=null,Bs=0),1<x.effectTag?x.lastEffect!==null?(x.lastEffect.nextEffect=x,Q=x.firstEffect):Q=x:Q=x.firstEffect,Q!==null){var pe=ii;ii|=sl,dh.current=null,Na=$o;var je=Kr();if(ma(je)){if("selectionStart"in je)var ct={start:je.selectionStart,end:je.selectionEnd};else e:{ct=(ct=je.ownerDocument)&&ct.defaultView||window;var yn=ct.getSelection&&ct.getSelection();if(yn&&yn.rangeCount!==0){ct=yn.anchorNode;var or=yn.anchorOffset,wr=yn.focusNode;yn=yn.focusOffset;try{ct.nodeType,wr.nodeType}catch(wi){ct=null;break e}var ga=0,pa=-1,Fi=-1,ul=0,Vs=0,In=je,wn=null;t:for(;;){for(var cr;!(In!==ct||or!==0&&In.nodeType!==3||(pa=ga+or),In!==wr||yn!==0&&In.nodeType!==3||(Fi=ga+yn),In.nodeType===3&&(ga+=In.nodeValue.length),(cr=In.firstChild)===null);)wn=In,In=cr;for(;;){if(In===je)break t;if(wn===ct&&++ul===or&&(pa=ga),wn===wr&&++Vs===yn&&(Fi=ga),(cr=In.nextSibling)!==null)break;In=wn,wn=In.parentNode}In=cr}ct=pa===-1||Fi===-1?null:{start:pa,end:Fi}}else ct=null}ct=ct||{start:0,end:0}}else ct=null;Sa={activeElementDetached:null,focusedElem:je,selectionRange:ct},$o=!1,Sn=Q;do try{Uo()}catch(wi){if(Sn===null)throw Error(T(330));Do(Sn,wi),Sn=Sn.nextEffect}while(Sn!==null);Sn=Q;do try{for(je=d,ct=h;Sn!==null;){var Xr=Sn.effectTag;if(Xr&16&&ro(Sn.stateNode,""),Xr&128){var aa=Sn.alternate;if(aa!==null){var ba=aa.ref;ba!==null&&(typeof ba=="function"?ba(null):ba.current=null)}}switch(Xr&1038){case 2:Dl(Sn),Sn.effectTag&=-3;break;case 6:Dl(Sn),Sn.effectTag&=-3,Hd(Sn.alternate,Sn);break;case 1024:Sn.effectTag&=-1025;break;case 1028:Sn.effectTag&=-1025,Hd(Sn.alternate,Sn);break;case 4:Hd(Sn.alternate,Sn);break;case 8:or=Sn,mc(je,or,ct),ku(or)}Sn=Sn.nextEffect}}catch(wi){if(Sn===null)throw Error(T(330));Do(Sn,wi),Sn=Sn.nextEffect}while(Sn!==null);if(ba=Sa,aa=Kr(),Xr=ba.focusedElem,ct=ba.selectionRange,aa!==Xr&&Xr&&Xr.ownerDocument&&sr(Xr.ownerDocument.documentElement,Xr)){for(ct!==null&&ma(Xr)&&(aa=ct.start,ba=ct.end,ba===void 0&&(ba=aa),"selectionStart"in Xr?(Xr.selectionStart=aa,Xr.selectionEnd=Math.min(ba,Xr.value.length)):(ba=(aa=Xr.ownerDocument||document)&&aa.defaultView||window,ba.getSelection&&(ba=ba.getSelection(),or=Xr.textContent.length,je=Math.min(ct.start,or),ct=ct.end===void 0?je:Math.min(ct.end,or),!ba.extend&&je>ct&&(or=ct,ct=je,je=or),or=en(Xr,je),wr=en(Xr,ct),or&&wr&&(ba.rangeCount!==1||ba.anchorNode!==or.node||ba.anchorOffset!==or.offset||ba.focusNode!==wr.node||ba.focusOffset!==wr.offset)&&(aa=aa.createRange(),aa.setStart(or.node,or.offset),ba.removeAllRanges(),je>ct?(ba.addRange(aa),ba.extend(wr.node,wr.offset)):(aa.setEnd(wr.node,wr.offset),ba.addRange(aa)))))),aa=[],ba=Xr;ba=ba.parentNode;)ba.nodeType===1&&aa.push({element:ba,left:ba.scrollLeft,top:ba.scrollTop});for(typeof Xr.focus=="function"&&Xr.focus(),Xr=0;Xr<aa.length;Xr++)ba=aa[Xr],ba.element.scrollLeft=ba.left,ba.element.scrollTop=ba.top}$o=!!Na,Sa=Na=null,d.current=x,Sn=Q;do try{for(Xr=d;Sn!==null;){var ri=Sn.effectTag;if(ri&36&&lh(Xr,Sn.alternate,Sn),ri&128){aa=void 0;var Ri=Sn.ref;if(Ri!==null){var mo=Sn.stateNode;switch(Sn.tag){case 5:aa=mo;break;default:aa=mo}typeof Ri=="function"?Ri(aa):Ri.current=aa}}Sn=Sn.nextEffect}}catch(wi){if(Sn===null)throw Error(T(330));Do(Sn,wi),Sn=Sn.nextEffect}while(Sn!==null);Sn=null,Ih(),ii=pe}else d.current=x;if(Ir)Ir=!1,Mr=d,xr=h;else for(Sn=Q;Sn!==null;)h=Sn.nextEffect,Sn.nextEffect=null,Sn=h;if(h=d.firstPendingTime,h===0&&(Cr=null),h===1073741823?d===br?fn++:(fn=0,br=d):fn=0,typeof yi=="function"&&yi(x.stateNode,F),fr(d),mr)throw mr=!1,d=Er,Er=null,d;return(ii&Gf)!==Go||js(),null}function Uo(){for(;Sn!==null;){var d=Sn.effectTag;(d&256)!==0&&Vf(Sn.alternate,Sn),(d&512)===0||Ir||(Ir=!0,Oc(97,function(){return po(),null})),Sn=Sn.nextEffect}}function po(){if(xr!==90){var d=97<xr?97:xr;return xr=90,sc(d,Po)}}function Po(){if(Mr===null)return!1;var d=Mr;if(Mr=null,(ii&(Nu|sl))!==Go)throw Error(T(331));var h=ii;for(ii|=sl,d=d.current.firstEffect;d!==null;){try{var x=d;if((x.effectTag&512)!==0)switch(x.tag){case 0:case 11:case 15:case 22:uh(5,x),zf(5,x)}}catch(F){if(d===null)throw Error(T(330));Do(d,F)}x=d.nextEffect,d.nextEffect=null,d=x}return ii=h,js(),!0}function Xo(d,h,x){h=df(x,h),h=Ro(d,h,1073741823),Su(d,h),d=lr(d,1073741823),d!==null&&fr(d)}function Do(d,h){if(d.tag===3)Xo(d,d,h);else for(var x=d.return;x!==null;){if(x.tag===3){Xo(x,d,h);break}else if(x.tag===1){var F=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Cr===null||!Cr.has(F))){d=df(h,d),d=zo(x,d,1073741823),Su(x,d),x=lr(x,1073741823),x!==null&&fr(x);break}}x=x.return}}function vo(d,h,x){var F=d.pingCache;F!==null&&F.delete(h),du===d&&Bs===x?vs===pd||vs===$d&&_e===1073741823&&su()-bn<ur?ha(d,Bs):kn=!0:Ge(d,x)&&(h=d.lastPingedTime,h!==0&&h<x||(d.lastPingedTime=x,fr(d)))}function Ha(d,h){var x=d.stateNode;x!==null&&x.delete(h),h=0,h===0&&(h=Pn(),h=na(h,d,null)),d=lr(d,h),d!==null&&fr(d)}var Wo;Wo=function(h,x,F){var Q=x.expirationTime;if(h!==null){var pe=x.pendingProps;if(h.memoizedProps!==pe||ko.current)Ku=!0;else{if(Q<F){Ku=!1;switch(x.tag){case 3:cd(x),cf();break;case 5:if(Id(x),x.mode&4&&F!==1&&pe.hidden)return x.expirationTime=x.childExpirationTime=1,null;break;case 1:Ts(x.type)&&Tu(x);break;case 4:kc(x,x.stateNode.containerInfo);break;case 10:Q=x.memoizedProps.value,pe=x.type._context,Gi(Zc,pe._currentValue),pe._currentValue=Q;break;case 13:if(x.memoizedState!==null)return Q=x.child.childExpirationTime,Q!==0&&Q>=F?zd(h,x,F):(Gi(No,No.current&1),x=_u(h,x,F),x!==null?x.sibling:null);Gi(No,No.current&1);break;case 19:if(Q=x.childExpirationTime>=F,(h.effectTag&64)!==0){if(Q)return Uc(h,x,F);x.effectTag|=64}if(pe=x.memoizedState,pe!==null&&(pe.rendering=null,pe.tail=null),Gi(No,No.current),!Q)return null}return _u(h,x,F)}Ku=!1}}else Ku=!1;x.expirationTime=0;switch(x.tag){case 2:if(Q=x.type,h!==null&&(h.alternate=null,x.alternate=null,x.effectTag|=2),h=x.pendingProps,pe=Bu(x,ss.current),Dc(x,F),pe=al(null,x,Q,h,pe,F),x.effectTag|=1,typeof pe=="object"&&pe!==null&&typeof pe.render=="function"&&pe.$$typeof===void 0){if(x.tag=1,x.memoizedState=null,x.updateQueue=null,Ts(Q)){var je=!0;Tu(x)}else je=!1;x.memoizedState=pe.state!==null&&pe.state!==void 0?pe.state:null,qc(x);var ct=Q.getDerivedStateFromProps;typeof ct=="function"&&td(x,Q,ct,h),pe.updater=uc,x.stateNode=pe,pe._reactInternalFiber=x,io(x,Q,h,F),x=es(null,x,Q,!0,je,F)}else x.tag=0,Fs(null,x,pe,F),x=x.child;return x;case 16:e:{if(pe=x.elementType,h!==null&&(h.alternate=null,x.alternate=null,x.effectTag|=2),h=x.pendingProps,Ft(pe),pe._status!==1)throw pe._result;pe=pe._result,x.type=pe,je=x.tag=Ml(pe),h=Ws(pe,h);switch(je){case 0:x=Mu(null,x,pe,h,F);break e;case 1:x=ld(null,x,pe,h,F);break e;case 11:x=Bd(null,x,pe,h,F);break e;case 14:x=Vd(null,x,pe,Ws(pe.type,h),Q,F);break e}throw Error(T(306,pe,""))}return x;case 0:return Q=x.type,pe=x.pendingProps,pe=x.elementType===Q?pe:Ws(Q,pe),Mu(h,x,Q,pe,F);case 1:return Q=x.type,pe=x.pendingProps,pe=x.elementType===Q?pe:Ws(Q,pe),ld(h,x,Q,pe,F);case 3:if(cd(x),Q=x.updateQueue,h===null||Q===null)throw Error(T(282));if(Q=x.pendingProps,pe=x.memoizedState,pe=pe!==null?pe.element:null,Nd(h,x),xl(x,Q,null,F),Q=x.memoizedState.element,Q===pe)cf(),x=_u(h,x,F);else{if((pe=x.stateNode.hydrate)&&(pc=Hi(x.stateNode.containerInfo.firstChild),Qs=x,pe=lo=!0),pe)for(F=Pd(x,null,Q,F),x.child=F;F;)F.effectTag=F.effectTag&-3|1024,F=F.sibling;else Fs(h,x,Q,F),cf();x=x.child}return x;case 5:return Id(x),h===null&&Ff(x),Q=x.type,pe=x.pendingProps,je=h!==null?h.memoizedProps:null,ct=pe.children,Rn(Q,pe)?ct=null:je!==null&&Rn(Q,je)&&(x.effectTag|=16),ud(h,x),x.mode&4&&F!==1&&pe.hidden?(x.expirationTime=x.childExpirationTime=1,x=null):(Fs(h,x,ct,F),x=x.child),x;case 6:return h===null&&Ff(x),null;case 13:return zd(h,x,F);case 4:return kc(x,x.stateNode.containerInfo),Q=x.pendingProps,h===null?x.child=lc(x,null,Q,F):Fs(h,x,Q,F),x.child;case 11:return Q=x.type,pe=x.pendingProps,pe=x.elementType===Q?pe:Ws(Q,pe),Bd(h,x,Q,pe,F);case 7:return Fs(h,x,x.pendingProps,F),x.child;case 8:return Fs(h,x,x.pendingProps.children,F),x.child;case 12:return Fs(h,x,x.pendingProps.children,F),x.child;case 10:e:{Q=x.type._context,pe=x.pendingProps,ct=x.memoizedProps,je=pe.value;var yn=x.type._context;if(Gi(Zc,yn._currentValue),yn._currentValue=je,ct!==null)if(yn=ct.value,je=ps(yn,je)?0:(typeof Q._calculateChangedBits=="function"?Q._calculateChangedBits(yn,je):1073741823)|0,je===0){if(ct.children===pe.children&&!ko.current){x=_u(h,x,F);break e}}else for(yn=x.child,yn!==null&&(yn.return=x);yn!==null;){var or=yn.dependencies;if(or!==null){ct=yn.child;for(var wr=or.firstContext;wr!==null;){if(wr.context===Q&&(wr.observedBits&je)!==0){yn.tag===1&&(wr=Ou(F,null),wr.tag=2,Su(yn,wr)),yn.expirationTime<F&&(yn.expirationTime=F),wr=yn.alternate,wr!==null&&wr.expirationTime<F&&(wr.expirationTime=F),rh(yn.return,F),or.expirationTime<F&&(or.expirationTime=F);break}wr=wr.next}}else ct=yn.tag===10&&yn.type===x.type?null:yn.child;if(ct!==null)ct.return=yn;else for(ct=yn;ct!==null;){if(ct===x){ct=null;break}if(yn=ct.sibling,yn!==null){yn.return=ct.return,ct=yn;break}ct=ct.return}yn=ct}Fs(h,x,pe.children,F),x=x.child}return x;case 9:return pe=x.type,je=x.pendingProps,Q=je.children,Dc(x,F),pe=Us(pe,je.unstable_observedBits),Q=Q(pe),x.effectTag|=1,Fs(h,x,Q,F),x.child;case 14:return pe=x.type,je=Ws(pe,x.pendingProps),je=Ws(pe.type,je),Vd(h,x,pe,je,Q,F);case 15:return il(h,x,x.type,x.pendingProps,Q,F);case 17:return Q=x.type,pe=x.pendingProps,pe=x.elementType===Q?pe:Ws(Q,pe),h!==null&&(h.alternate=null,x.alternate=null,x.effectTag|=2),x.tag=1,Ts(Q)?(h=!0,Tu(x)):h=!1,Dc(x,F),nd(x,Q,pe),io(x,Q,pe,F),es(null,x,Q,!0,h,F);case 19:return Uc(h,x,F)}throw Error(T(156,x.tag))};var yi=null,va=null;function Ra(d){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)return!0;try{var x=h.inject(d);yi=function(Q){try{h.onCommitFiberRoot(x,Q,void 0,(Q.current.effectTag&64)===64)}catch(pe){}},va=function(Q){try{h.onCommitFiberUnmount(x,Q)}catch(pe){}}}catch(F){}return!0}function hi(d,h,x,F){this.tag=d,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function eo(d,h,x,F){return new hi(d,h,x,F)}function ms(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Ml(d){if(typeof d=="function")return ms(d)?1:0;if(d!=null){if(d=d.$$typeof,d===Re)return 11;if(d===gt)return 14}return 2}function ht(d,h){var x=d.alternate;return x===null?(x=eo(d.tag,h,d.key,d.mode),x.elementType=d.elementType,x.type=d.type,x.stateNode=d.stateNode,x.alternate=d,d.alternate=x):(x.pendingProps=h,x.effectTag=0,x.nextEffect=null,x.firstEffect=null,x.lastEffect=null),x.childExpirationTime=d.childExpirationTime,x.expirationTime=d.expirationTime,x.child=d.child,x.memoizedProps=d.memoizedProps,x.memoizedState=d.memoizedState,x.updateQueue=d.updateQueue,h=d.dependencies,x.dependencies=h===null?null:{expirationTime:h.expirationTime,firstContext:h.firstContext,responders:h.responders},x.sibling=d.sibling,x.index=d.index,x.ref=d.ref,x}function On(d,h,x,F,Q,pe){var je=2;if(F=d,typeof d=="function")ms(d)&&(je=1);else if(typeof d=="string")je=5;else e:switch(d){case Ce:return ln(x.children,Q,pe,h);case $e:je=8,Q|=7;break;case Jn:je=8,Q|=1;break;case Ln:return d=eo(12,x,h,Q|8),d.elementType=Ln,d.type=Ln,d.expirationTime=pe,d;case Ye:return d=eo(13,x,h,Q),d.type=Ye,d.elementType=Ye,d.expirationTime=pe,d;case tt:return d=eo(19,x,h,Q),d.elementType=tt,d.expirationTime=pe,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case yr:je=10;break e;case Un:je=9;break e;case Re:je=11;break e;case gt:je=14;break e;case kt:je=16,F=null;break e;case Pe:je=22;break e}throw Error(T(130,d==null?d:typeof d,""))}return h=eo(je,x,h,Q),h.elementType=d,h.type=F,h.expirationTime=pe,h}function ln(d,h,x,F){return d=eo(7,d,F,h),d.expirationTime=x,d}function Hr(d,h,x){return d=eo(6,d,null,h),d.expirationTime=x,d}function Ga(d,h,x){return h=eo(4,d.children!==null?d.children:[],d.key,h),h.expirationTime=x,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function ot(d,h,x){this.tag=h,this.current=null,this.containerInfo=d,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=x,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ge(d,h){var x=d.firstSuspendedTime;return d=d.lastSuspendedTime,x!==0&&x>=h&&d<=h}function Nt(d,h){var x=d.firstSuspendedTime,F=d.lastSuspendedTime;x<h&&(d.firstSuspendedTime=h),(F>h||x===0)&&(d.lastSuspendedTime=h),h<=d.lastPingedTime&&(d.lastPingedTime=0),h<=d.lastExpiredTime&&(d.lastExpiredTime=0)}function tn(d,h){h>d.firstPendingTime&&(d.firstPendingTime=h);var x=d.firstSuspendedTime;x!==0&&(h>=x?d.firstSuspendedTime=d.lastSuspendedTime=d.nextKnownPendingLevel=0:h>=d.lastSuspendedTime&&(d.lastSuspendedTime=h+1),h>d.nextKnownPendingLevel&&(d.nextKnownPendingLevel=h))}function nn(d,h){var x=d.lastExpiredTime;(x===0||x>h)&&(d.lastExpiredTime=h)}function jt(d,h,x,F){var Q=h.current,pe=Pn(),je=wl.suspense;pe=na(pe,Q,je);e:if(x){x=x._reactInternalFiber;t:{if(Es(x)!==x||x.tag!==1)throw Error(T(170));var ct=x;do{switch(ct.tag){case 3:ct=ct.stateNode.context;break t;case 1:if(Ts(ct.type)){ct=ct.stateNode.__reactInternalMemoizedMergedChildContext;break t}}ct=ct.return}while(ct!==null);throw Error(T(171))}if(x.tag===1){var yn=x.type;if(Ts(yn)){x=Tc(x,yn,ct);break e}}x=ct}else x=bl;return h.context===null?h.context=x:h.pendingContext=x,h=Ou(pe,je),h.payload={element:d},F=F===void 0?null:F,F!==null&&(h.callback=F),Su(Q,h),dr(Q,pe),pe}function Lt(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function Yt(d,h){d=d.memoizedState,d!==null&&d.dehydrated!==null&&d.retryTime<h&&(d.retryTime=h)}function nt(d,h){Yt(d,h),(d=d.alternate)&&Yt(d,h)}function Mt(d,h,x){x=x!=null&&x.hydrate===!0;var F=new ot(d,h,x),Q=eo(3,null,null,h===2?7:h===1?3:0);F.current=Q,Q.stateNode=F,qc(Q),d[Lo]=F.current,x&&h!==0&&tu(d,d.nodeType===9?d:d.ownerDocument),this._internalRoot=F}Mt.prototype.render=function(d){jt(d,this._internalRoot,null,null)},Mt.prototype.unmount=function(){var d=this._internalRoot,h=d.containerInfo;jt(null,d,null,function(){h[Lo]=null})};function qe(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function Zt(d,h){if(h||(h=d?d.nodeType===9?d.documentElement:d.firstChild:null,h=!(!h||h.nodeType!==1||!h.hasAttribute("data-reactroot"))),!h)for(var x;x=d.lastChild;)d.removeChild(x);return new Mt(d,0,h?{hydrate:!0}:void 0)}function sn(d,h,x,F,Q){var pe=x._reactRootContainer;if(pe){var je=pe._internalRoot;if(typeof Q=="function"){var ct=Q;Q=function(){var wr=Lt(je);ct.call(wr)}}jt(h,je,d,Q)}else{if(pe=x._reactRootContainer=Zt(x,F),je=pe._internalRoot,typeof Q=="function"){var yn=Q;Q=function(){var wr=Lt(je);yn.call(wr)}}er(function(){jt(h,je,d,Q)})}return Lt(je)}function $n(d,h,x){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:F==null?null:""+F,children:d,containerInfo:h,implementation:x}}Jl=function(h){if(h.tag===13){var x=Oo(Pn(),150,100);dr(h,x),nt(h,x)}},Zl=function(h){h.tag===13&&(dr(h,3),nt(h,3))},Iu=function(h){if(h.tag===13){var x=Pn();x=na(x,h,null),dr(h,x),nt(h,x)}},Ue=function(h,x,F){switch(x){case"input":if(We(h,F),x=F.name,F.type==="radio"&&x!=null){for(F=h;F.parentNode;)F=F.parentNode;for(F=F.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<F.length;x++){var Q=F[x];if(Q!==h&&Q.form===h.form){var pe=el(Q);if(!pe)throw Error(T(90));wt(Q),We(Q,pe)}}}break;case"textarea":ia(h,F);break;case"select":x=F.value,x!=null&&Ur(h,!!F.multiple,x,!1)}},Dt=Tr,Ke=function(h,x,F,Q,pe){var je=ii;ii|=4;try{return sc(98,h.bind(null,x,F,Q,pe))}finally{ii=je,ii===Go&&js()}},Tt=function(){(ii&(1|Nu|sl))===Go&&(Pr(),po())},Gt=function(h,x){var F=ii;ii|=2;try{return h(x)}finally{ii=F,ii===Go&&js()}};function Qn(d,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qe(h))throw Error(T(200));return $n(d,h,null,x)}var zn={Events:[wu,Qo,el,Te,Z,ru,function(d){qs(d,ju)},At,mt,xu,Wi,po,{current:!1}]};(function(d){var h=d.findFiberByHostInstance;return Ra(f({},d,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(F){return F=is(F),F===null?null:F.stateNode},findFiberByHostInstance:function(F){return h?h(F):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Vi,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zn,_.createPortal=Qn,_.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var h=d._reactInternalFiber;if(h===void 0)throw typeof d.render=="function"?Error(T(188)):Error(T(268,Object.keys(d)));return d=is(h),d=d===null?null:d.stateNode,d},_.flushSync=function(d,h){if((ii&(Nu|sl))!==Go)throw Error(T(187));var x=ii;ii|=1;try{return sc(99,d.bind(null,h))}finally{ii=x,js()}},_.hydrate=function(d,h,x){if(!qe(h))throw Error(T(200));return sn(null,d,h,!0,x)},_.render=function(d,h,x){if(!qe(h))throw Error(T(200));return sn(null,d,h,!1,x)},_.unmountComponentAtNode=function(d){if(!qe(d))throw Error(T(40));return d._reactRootContainer?(er(function(){sn(null,null,d,!1,function(){d._reactRootContainer=null,d[Lo]=null})}),!0):!1},_.unstable_batchedUpdates=Tr,_.unstable_createPortal=function(d,h){return Qn(d,h,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},_.unstable_renderSubtreeIntoContainer=function(d,h,x,F){if(!qe(x))throw Error(T(200));if(d==null||d._reactInternalFiber===void 0)throw Error(T(38));return sn(d,h,x,!1,F)},_.version="16.14.0"},function(j,_,u){"use strict";j.exports=u(300)},function(j,_,u){"use strict";/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g,f,E,T,w;if(typeof window=="undefined"||typeof MessageChannel!="function"){var D=null,O=null,L=function Rt(){if(D!==null)try{var Fe=_.unstable_now();D(!0,Fe),D=null}catch(me){throw setTimeout(Rt,0),me}},U=Date.now();_.unstable_now=function(){return Date.now()-U},g=function(Fe){D!==null?setTimeout(g,0,Fe):(D=Fe,setTimeout(L,0))},f=function(Fe,me){O=setTimeout(Fe,me)},E=function(){clearTimeout(O)},T=function(){return!1},w=_.unstable_forceFrameRate=function(){}}else{var V=window.performance,z=window.Date,K=window.setTimeout,J=window.clearTimeout;if(typeof console!="undefined"){var he=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof he!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof V=="object"&&typeof V.now=="function")_.unstable_now=function(){return V.now()};else{var ue=z.now();_.unstable_now=function(){return z.now()-ue}}var de=!1,ae=null,le=-1,re=5,se=0;T=function(){return _.unstable_now()>=se},w=function(){},_.unstable_forceFrameRate=function(Rt){0>Rt||125<Rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):re=0<Rt?Math.floor(1e3/Rt):5};var ye=new MessageChannel,Z=ye.port2;ye.port1.onmessage=function(){if(ae!==null){var Rt=_.unstable_now();se=Rt+re;try{ae(!0,Rt)?Z.postMessage(null):(de=!1,ae=null)}catch(Fe){throw Z.postMessage(null),Fe}}else de=!1},g=function(Fe){ae=Fe,de||(de=!0,Z.postMessage(null))},f=function(Fe,me){le=K(function(){Fe(_.unstable_now())},me)},E=function(){J(le),le=-1}}function Ee(Rt,Fe){var me=Rt.length;Rt.push(Fe);e:for(;;){var ze=me-1>>>1,Be=Rt[ze];if(Be!==void 0&&0<De(Be,Fe))Rt[ze]=Fe,Rt[me]=Be,me=ze;else break e}}function k(Rt){return Rt=Rt[0],Rt===void 0?null:Rt}function Te(Rt){var Fe=Rt[0];if(Fe!==void 0){var me=Rt.pop();if(me!==Fe){Rt[0]=me;e:for(var ze=0,Be=Rt.length;ze<Be;){var ut=2*(ze+1)-1,xt=Rt[ut],$t=ut+1,Qt=Rt[$t];if(xt!==void 0&&0>De(xt,me))Qt!==void 0&&0>De(Qt,xt)?(Rt[ze]=Qt,Rt[$t]=me,ze=$t):(Rt[ze]=xt,Rt[ut]=me,ze=ut);else if(Qt!==void 0&&0>De(Qt,me))Rt[ze]=Qt,Rt[$t]=me,ze=$t;else break e}}return Fe}return null}function De(Rt,Fe){var me=Rt.sortIndex-Fe.sortIndex;return me!==0?me:Rt.id-Fe.id}var Ue=[],St=[],Ae=1,Wt=null,At=3,mt=!1,Dt=!1,Ke=!1;function Tt(Rt){for(var Fe=k(St);Fe!==null;){if(Fe.callback===null)Te(St);else if(Fe.startTime<=Rt)Te(St),Fe.sortIndex=Fe.expirationTime,Ee(Ue,Fe);else break;Fe=k(St)}}function Gt(Rt){if(Ke=!1,Tt(Rt),!Dt)if(k(Ue)!==null)Dt=!0,g(gn);else{var Fe=k(St);Fe!==null&&f(Gt,Fe.startTime-Rt)}}function gn(Rt,Fe){Dt=!1,Ke&&(Ke=!1,E()),mt=!0;var me=At;try{for(Tt(Fe),Wt=k(Ue);Wt!==null&&(!(Wt.expirationTime>Fe)||Rt&&!T());){var ze=Wt.callback;if(ze!==null){Wt.callback=null,At=Wt.priorityLevel;var Be=ze(Wt.expirationTime<=Fe);Fe=_.unstable_now(),typeof Be=="function"?Wt.callback=Be:Wt===k(Ue)&&Te(Ue),Tt(Fe)}else Te(Ue);Wt=k(Ue)}if(Wt!==null)var ut=!0;else{var xt=k(St);xt!==null&&f(Gt,xt.startTime-Fe),ut=!1}return ut}finally{Wt=null,At=me,mt=!1}}function Ut(Rt){switch(Rt){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Ht=w;_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(Rt){Rt.callback=null},_.unstable_continueExecution=function(){Dt||mt||(Dt=!0,g(gn))},_.unstable_getCurrentPriorityLevel=function(){return At},_.unstable_getFirstCallbackNode=function(){return k(Ue)},_.unstable_next=function(Rt){switch(At){case 1:case 2:case 3:var Fe=3;break;default:Fe=At}var me=At;At=Fe;try{return Rt()}finally{At=me}},_.unstable_pauseExecution=function(){},_.unstable_requestPaint=Ht,_.unstable_runWithPriority=function(Rt,Fe){switch(Rt){case 1:case 2:case 3:case 4:case 5:break;default:Rt=3}var me=At;At=Rt;try{return Fe()}finally{At=me}},_.unstable_scheduleCallback=function(Rt,Fe,me){var ze=_.unstable_now();if(typeof me=="object"&&me!==null){var Be=me.delay;Be=typeof Be=="number"&&0<Be?ze+Be:ze,me=typeof me.timeout=="number"?me.timeout:Ut(Rt)}else me=Ut(Rt),Be=ze;return me=Be+me,Rt={id:Ae++,callback:Fe,priorityLevel:Rt,startTime:Be,expirationTime:me,sortIndex:-1},Be>ze?(Rt.sortIndex=Be,Ee(St,Rt),k(Ue)===null&&Rt===k(St)&&(Ke?E():Ke=!0,f(Gt,Be-ze))):(Rt.sortIndex=me,Ee(Ue,Rt),Dt||mt||(Dt=!0,g(gn))),Rt},_.unstable_shouldYield=function(){var Rt=_.unstable_now();Tt(Rt);var Fe=k(Ue);return Fe!==Wt&&Wt!==null&&Fe!==null&&Fe.callback!==null&&Fe.startTime<=Rt&&Fe.expirationTime<Wt.expirationTime||T()},_.unstable_wrapCallback=function(Rt){var Fe=At;return function(){var me=At;At=Fe;try{return Rt.apply(this,arguments)}finally{At=me}}}},function(j,_,u){},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getParameters=void 0;var g=u(303);function f(T){return g.compressToBase64(T).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function E(T){return f(JSON.stringify(T))}_.getParameters=E},function(j,_,u){var g,f=function(){var E=String.fromCharCode,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",D={};function O(U,V){if(!D[U]){D[U]={};for(var z=0;z<U.length;z++)D[U][U.charAt(z)]=z}return D[U][V]}var L={compressToBase64:function(V){if(V==null)return"";var z=L._compress(V,6,function(K){return T.charAt(K)});switch(z.length%4){default:case 0:return z;case 1:return z+"===";case 2:return z+"==";case 3:return z+"="}},decompressFromBase64:function(V){return V==null?"":V==""?null:L._decompress(V.length,32,function(z){return O(T,V.charAt(z))})},compressToUTF16:function(V){return V==null?"":L._compress(V,15,function(z){return E(z+32)})+" "},decompressFromUTF16:function(V){return V==null?"":V==""?null:L._decompress(V.length,16384,function(z){return V.charCodeAt(z)-32})},compressToUint8Array:function(V){for(var z=L.compress(V),K=new Uint8Array(z.length*2),J=0,he=z.length;J<he;J++){var ue=z.charCodeAt(J);K[J*2]=ue>>>8,K[J*2+1]=ue%256}return K},decompressFromUint8Array:function(V){if(V==null)return L.decompress(V);for(var z=new Array(V.length/2),K=0,J=z.length;K<J;K++)z[K]=V[K*2]*256+V[K*2+1];var he=[];return z.forEach(function(ue){he.push(E(ue))}),L.decompress(he.join(""))},compressToEncodedURIComponent:function(V){return V==null?"":L._compress(V,6,function(z){return w.charAt(z)})},decompressFromEncodedURIComponent:function(V){return V==null?"":V==""?null:(V=V.replace(/ /g,"+"),L._decompress(V.length,32,function(z){return O(w,V.charAt(z))}))},compress:function(V){return L._compress(V,16,function(z){return E(z)})},_compress:function(V,z,K){if(V==null)return"";var J,he,ue={},de={},ae="",le="",re="",se=2,ye=3,Z=2,Ee=[],k=0,Te=0,De;for(De=0;De<V.length;De+=1)if(ae=V.charAt(De),Object.prototype.hasOwnProperty.call(ue,ae)||(ue[ae]=ye++,de[ae]=!0),le=re+ae,Object.prototype.hasOwnProperty.call(ue,le))re=le;else{if(Object.prototype.hasOwnProperty.call(de,re)){if(re.charCodeAt(0)<256){for(J=0;J<Z;J++)k=k<<1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++;for(he=re.charCodeAt(0),J=0;J<8;J++)k=k<<1|he&1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=he>>1}else{for(he=1,J=0;J<Z;J++)k=k<<1|he,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=0;for(he=re.charCodeAt(0),J=0;J<16;J++)k=k<<1|he&1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=he>>1}se--,se==0&&(se=Math.pow(2,Z),Z++),delete de[re]}else for(he=ue[re],J=0;J<Z;J++)k=k<<1|he&1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=he>>1;se--,se==0&&(se=Math.pow(2,Z),Z++),ue[le]=ye++,re=String(ae)}if(re!==""){if(Object.prototype.hasOwnProperty.call(de,re)){if(re.charCodeAt(0)<256){for(J=0;J<Z;J++)k=k<<1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++;for(he=re.charCodeAt(0),J=0;J<8;J++)k=k<<1|he&1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=he>>1}else{for(he=1,J=0;J<Z;J++)k=k<<1|he,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=0;for(he=re.charCodeAt(0),J=0;J<16;J++)k=k<<1|he&1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=he>>1}se--,se==0&&(se=Math.pow(2,Z),Z++),delete de[re]}else for(he=ue[re],J=0;J<Z;J++)k=k<<1|he&1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=he>>1;se--,se==0&&(se=Math.pow(2,Z),Z++)}for(he=2,J=0;J<Z;J++)k=k<<1|he&1,Te==z-1?(Te=0,Ee.push(K(k)),k=0):Te++,he=he>>1;for(;;)if(k=k<<1,Te==z-1){Ee.push(K(k));break}else Te++;return Ee.join("")},decompress:function(V){return V==null?"":V==""?null:L._decompress(V.length,32768,function(z){return V.charCodeAt(z)})},_decompress:function(V,z,K){var J=[],he,ue=4,de=4,ae=3,le="",re=[],se,ye,Z,Ee,k,Te,De,Ue={val:K(0),position:z,index:1};for(se=0;se<3;se+=1)J[se]=se;for(Z=0,k=Math.pow(2,2),Te=1;Te!=k;)Ee=Ue.val&Ue.position,Ue.position>>=1,Ue.position==0&&(Ue.position=z,Ue.val=K(Ue.index++)),Z|=(Ee>0?1:0)*Te,Te<<=1;switch(he=Z){case 0:for(Z=0,k=Math.pow(2,8),Te=1;Te!=k;)Ee=Ue.val&Ue.position,Ue.position>>=1,Ue.position==0&&(Ue.position=z,Ue.val=K(Ue.index++)),Z|=(Ee>0?1:0)*Te,Te<<=1;De=E(Z);break;case 1:for(Z=0,k=Math.pow(2,16),Te=1;Te!=k;)Ee=Ue.val&Ue.position,Ue.position>>=1,Ue.position==0&&(Ue.position=z,Ue.val=K(Ue.index++)),Z|=(Ee>0?1:0)*Te,Te<<=1;De=E(Z);break;case 2:return""}for(J[3]=De,ye=De,re.push(De);;){if(Ue.index>V)return"";for(Z=0,k=Math.pow(2,ae),Te=1;Te!=k;)Ee=Ue.val&Ue.position,Ue.position>>=1,Ue.position==0&&(Ue.position=z,Ue.val=K(Ue.index++)),Z|=(Ee>0?1:0)*Te,Te<<=1;switch(De=Z){case 0:for(Z=0,k=Math.pow(2,8),Te=1;Te!=k;)Ee=Ue.val&Ue.position,Ue.position>>=1,Ue.position==0&&(Ue.position=z,Ue.val=K(Ue.index++)),Z|=(Ee>0?1:0)*Te,Te<<=1;J[de++]=E(Z),De=de-1,ue--;break;case 1:for(Z=0,k=Math.pow(2,16),Te=1;Te!=k;)Ee=Ue.val&Ue.position,Ue.position>>=1,Ue.position==0&&(Ue.position=z,Ue.val=K(Ue.index++)),Z|=(Ee>0?1:0)*Te,Te<<=1;J[de++]=E(Z),De=de-1,ue--;break;case 2:return re.join("")}if(ue==0&&(ue=Math.pow(2,ae),ae++),J[De])le=J[De];else if(De===de)le=ye+ye.charAt(0);else return null;re.push(le),J[de++]=ye+le.charAt(0),ue--,ye=le,ue==0&&(ue=Math.pow(2,ae),ae++)}}};return L}();!(g=function(){return f}.call(_,u,_,j),g!==void 0&&(j.exports=g))},,,function(j,_,u){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g=typeof Symbol=="function"&&Symbol.for,f=g?Symbol.for("react.element"):60103,E=g?Symbol.for("react.portal"):60106,T=g?Symbol.for("react.fragment"):60107,w=g?Symbol.for("react.strict_mode"):60108,D=g?Symbol.for("react.profiler"):60114,O=g?Symbol.for("react.provider"):60109,L=g?Symbol.for("react.context"):60110,U=g?Symbol.for("react.async_mode"):60111,V=g?Symbol.for("react.concurrent_mode"):60111,z=g?Symbol.for("react.forward_ref"):60112,K=g?Symbol.for("react.suspense"):60113,J=g?Symbol.for("react.suspense_list"):60120,he=g?Symbol.for("react.memo"):60115,ue=g?Symbol.for("react.lazy"):60116,de=g?Symbol.for("react.block"):60121,ae=g?Symbol.for("react.fundamental"):60117,le=g?Symbol.for("react.responder"):60118,re=g?Symbol.for("react.scope"):60119;function se(Z){if(typeof Z=="object"&&Z!==null){var Ee=Z.$$typeof;switch(Ee){case f:switch(Z=Z.type,Z){case U:case V:case T:case D:case w:case K:return Z;default:switch(Z=Z&&Z.$$typeof,Z){case L:case z:case ue:case he:case O:return Z;default:return Ee}}case E:return Ee}}}function ye(Z){return se(Z)===V}_.AsyncMode=U,_.ConcurrentMode=V,_.ContextConsumer=L,_.ContextProvider=O,_.Element=f,_.ForwardRef=z,_.Fragment=T,_.Lazy=ue,_.Memo=he,_.Portal=E,_.Profiler=D,_.StrictMode=w,_.Suspense=K,_.isAsyncMode=function(Z){return ye(Z)||se(Z)===U},_.isConcurrentMode=ye,_.isContextConsumer=function(Z){return se(Z)===L},_.isContextProvider=function(Z){return se(Z)===O},_.isElement=function(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===f},_.isForwardRef=function(Z){return se(Z)===z},_.isFragment=function(Z){return se(Z)===T},_.isLazy=function(Z){return se(Z)===ue},_.isMemo=function(Z){return se(Z)===he},_.isPortal=function(Z){return se(Z)===E},_.isProfiler=function(Z){return se(Z)===D},_.isStrictMode=function(Z){return se(Z)===w},_.isSuspense=function(Z){return se(Z)===K},_.isValidElementType=function(Z){return typeof Z=="string"||typeof Z=="function"||Z===T||Z===V||Z===D||Z===w||Z===K||Z===J||typeof Z=="object"&&Z!==null&&(Z.$$typeof===ue||Z.$$typeof===he||Z.$$typeof===O||Z.$$typeof===L||Z.$$typeof===z||Z.$$typeof===ae||Z.$$typeof===le||Z.$$typeof===re||Z.$$typeof===de)},_.typeOf=se},function(j,_,u){"use strict";var g=u(308);function f(){}function E(){}E.resetWarningCache=f,j.exports=function(){function T(O,L,U,V,z,K){if(K===g)return;var J=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw J.name="Invariant Violation",J}T.isRequired=T;function w(){return T}var D={array:T,bool:T,func:T,number:T,object:T,string:T,symbol:T,any:T,arrayOf:w,element:T,elementType:T,instanceOf:w,node:T,objectOf:w,oneOf:w,oneOfType:w,shape:w,exact:w,checkPropTypes:E,resetWarningCache:f};return D.PropTypes=D,D}},function(j,_,u){"use strict";var g="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";j.exports=g},,function(j,_,u){},function(j,_,u){var g,f,E;/*!
* jQuery Mousewheel 3.1.13
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license
* http://jquery.org/license
*/(function(T){!(f=[u(31)],g=T,E=typeof g=="function"?g.apply(_,f):g,E!==void 0&&(j.exports=E))})(function(T){var w=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],D="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],O=Array.prototype.slice,L,U;if(T.event.fixHooks)for(var V=w.length;V;)T.event.fixHooks[w[--V]]=T.event.mouseHooks;var z=T.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var de=D.length;de;)this.addEventListener(D[--de],K,!1);else this.onmousewheel=K;T.data(this,"mousewheel-line-height",z.getLineHeight(this)),T.data(this,"mousewheel-page-height",z.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var de=D.length;de;)this.removeEventListener(D[--de],K,!1);else this.onmousewheel=null;T.removeData(this,"mousewheel-line-height"),T.removeData(this,"mousewheel-page-height")},getLineHeight:function(de){var ae=T(de),le=ae["offsetParent"in T.fn?"offsetParent":"parent"]();return le.length||(le=T("body")),parseInt(le.css("fontSize"),10)||parseInt(ae.css("fontSize"),10)||16},getPageHeight:function(de){return T(de).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};T.fn.extend({mousewheel:function(de){return de?this.bind("mousewheel",de):this.trigger("mousewheel")},unmousewheel:function(de){return this.unbind("mousewheel",de)}});function K(ue){var de=ue||window.event,ae=O.call(arguments,1),le=0,re=0,se=0,ye=0,Z=0,Ee=0;if(ue=T.event.fix(de),ue.type="mousewheel","detail"in de&&(se=de.detail*-1),"wheelDelta"in de&&(se=de.wheelDelta),"wheelDeltaY"in de&&(se=de.wheelDeltaY),"wheelDeltaX"in de&&(re=de.wheelDeltaX*-1),"axis"in de&&de.axis===de.HORIZONTAL_AXIS&&(re=se*-1,se=0),le=se===0?re:se,"deltaY"in de&&(se=de.deltaY*-1,le=se),"deltaX"in de&&(re=de.deltaX,se===0&&(le=re*-1)),se===0&&re===0)return;if(de.deltaMode===1){var k=T.data(this,"mousewheel-line-height");le*=k,se*=k,re*=k}else if(de.deltaMode===2){var Te=T.data(this,"mousewheel-page-height");le*=Te,se*=Te,re*=Te}if(ye=Math.max(Math.abs(se),Math.abs(re)),(!U||ye<U)&&(U=ye,he(de,ye)&&(U/=40)),he(de,ye)&&(le/=40,re/=40,se/=40),le=Math[le>=1?"floor":"ceil"](le/U),re=Math[re>=1?"floor":"ceil"](re/U),se=Math[se>=1?"floor":"ceil"](se/U),z.settings.normalizeOffset&&this.getBoundingClientRect){var De=this.getBoundingClientRect();Z=ue.clientX-De.left,Ee=ue.clientY-De.top}return ue.deltaX=re,ue.deltaY=se,ue.deltaFactor=U,ue.offsetX=Z,ue.offsetY=Ee,ue.deltaMode=0,ae.unshift(ue,le,re,se),L&&clearTimeout(L),L=setTimeout(J,200),(T.event.dispatch||T.event.handle).apply(this,ae)}function J(){U=null}function he(ue,de){return z.settings.adjustOldDeltas&&ue.type==="mousewheel"&&de%120===0}})},function(j,_,u){var g=u(313);j.exports={Graph:g.Graph,json:u(415),alg:u(416),version:g.version}},function(j,_,u){j.exports={Graph:u(148),version:u(414)}},function(j,_,u){var g=u(175),f=4;function E(T){return g(T,f)}j.exports=E},function(j,_){function u(){this.__data__=[],this.size=0}j.exports=u},function(j,_,u){var g=u(105),f=Array.prototype,E=f.splice;function T(w){var D=this.__data__,O=g(D,w);if(O<0)return!1;var L=D.length-1;return O==L?D.pop():E.call(D,O,1),--this.size,!0}j.exports=T},function(j,_,u){var g=u(105);function f(E){var T=this.__data__,w=g(T,E);return w<0?void 0:T[w][1]}j.exports=f},function(j,_,u){var g=u(105);function f(E){return g(this.__data__,E)>-1}j.exports=f},function(j,_,u){var g=u(105);function f(E,T){var w=this.__data__,D=g(w,E);return D<0?(++this.size,w.push([E,T])):w[D][1]=T,this}j.exports=f},function(j,_,u){var g=u(104);function f(){this.__data__=new g,this.size=0}j.exports=f},function(j,_){function u(g){var f=this.__data__,E=f.delete(g);return this.size=f.size,E}j.exports=u},function(j,_){function u(g){return this.__data__.get(g)}j.exports=u},function(j,_){function u(g){return this.__data__.has(g)}j.exports=u},function(j,_,u){var g=u(104),f=u(149),E=u(150),T=200;function w(D,O){var L=this.__data__;if(L instanceof g){var U=L.__data__;if(!f||U.length<T-1)return U.push([D,O]),this.size=++L.size,this;L=this.__data__=new E(U)}return L.set(D,O),this.size=L.size,this}j.exports=w},function(j,_,u){var g=u(94),f=u(328),E=u(48),T=u(177),w=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,O=Function.prototype,L=Object.prototype,U=O.toString,V=L.hasOwnProperty,z=RegExp("^"+U.call(V).replace(w,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function K(J){if(!E(J)||f(J))return!1;var he=g(J)?z:D;return he.test(T(J))}j.exports=K},function(j,_,u){var g=u(83),f=Object.prototype,E=f.hasOwnProperty,T=f.toString,w=g?g.toStringTag:void 0;function D(O){var L=E.call(O,w),U=O[w];try{O[w]=void 0;var V=!0}catch(K){}var z=T.call(O);return V&&(L?O[w]=U:delete O[w]),z}j.exports=D},function(j,_){var u=Object.prototype,g=u.toString;function f(E){return g.call(E)}j.exports=f},function(j,_,u){var g=u(329),f=function(){var T=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}();function E(T){return!!f&&f in T}j.exports=E},function(j,_,u){var g=u(51),f=g["__core-js_shared__"];j.exports=f},function(j,_){function u(g,f){return g==null?void 0:g[f]}j.exports=u},function(j,_,u){var g=u(332),f=u(104),E=u(149);function T(){this.size=0,this.__data__={hash:new g,map:new(E||f),string:new g}}j.exports=T},function(j,_,u){var g=u(333),f=u(334),E=u(335),T=u(336),w=u(337);function D(O){var L=-1,U=O==null?0:O.length;for(this.clear();++L<U;){var V=O[L];this.set(V[0],V[1])}}D.prototype.clear=g,D.prototype.delete=f,D.prototype.get=E,D.prototype.has=T,D.prototype.set=w,j.exports=D},function(j,_,u){var g=u(106);function f(){this.__data__=g?g(null):{},this.size=0}j.exports=f},function(j,_){function u(g){var f=this.has(g)&&delete this.__data__[g];return this.size-=f?1:0,f}j.exports=u},function(j,_,u){var g=u(106),f="__lodash_hash_undefined__",E=Object.prototype,T=E.hasOwnProperty;function w(D){var O=this.__data__;if(g){var L=O[D];return L===f?void 0:L}return T.call(O,D)?O[D]:void 0}j.exports=w},function(j,_,u){var g=u(106),f=Object.prototype,E=f.hasOwnProperty;function T(w){var D=this.__data__;return g?D[w]!==void 0:E.call(D,w)}j.exports=T},function(j,_,u){var g=u(106),f="__lodash_hash_undefined__";function E(T,w){var D=this.__data__;return this.size+=this.has(T)?0:1,D[T]=g&&w===void 0?f:w,this}j.exports=E},function(j,_,u){var g=u(107);function f(E){var T=g(this,E).delete(E);return this.size-=T?1:0,T}j.exports=f},function(j,_){function u(g){var f=typeof g;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?g!=="__proto__":g===null}j.exports=u},function(j,_,u){var g=u(107);function f(E){return g(this,E).get(E)}j.exports=f},function(j,_,u){var g=u(107);function f(E){return g(this,E).has(E)}j.exports=f},function(j,_,u){var g=u(107);function f(E,T){var w=g(this,E),D=w.size;return w.set(E,T),this.size+=w.size==D?0:1,this}j.exports=f},function(j,_,u){var g=u(95),f=u(67);function E(T,w){return T&&g(w,f(w),T)}j.exports=E},function(j,_){function u(g,f){for(var E=-1,T=Array(g);++E<g;)T[E]=f(E);return T}j.exports=u},function(j,_,u){var g=u(75),f=u(56),E="[object Arguments]";function T(w){return f(w)&&g(w)==E}j.exports=T},function(j,_){function u(){return!1}j.exports=u},function(j,_,u){var g=u(75),f=u(153),E=u(56),T="[object Arguments]",w="[object Array]",D="[object Boolean]",O="[object Date]",L="[object Error]",U="[object Function]",V="[object Map]",z="[object Number]",K="[object Object]",J="[object RegExp]",he="[object Set]",ue="[object String]",de="[object WeakMap]",ae="[object ArrayBuffer]",le="[object DataView]",re="[object Float32Array]",se="[object Float64Array]",ye="[object Int8Array]",Z="[object Int16Array]",Ee="[object Int32Array]",k="[object Uint8Array]",Te="[object Uint8ClampedArray]",De="[object Uint16Array]",Ue="[object Uint32Array]",St={};St[re]=St[se]=St[ye]=St[Z]=St[Ee]=St[k]=St[Te]=St[De]=St[Ue]=!0,St[T]=St[w]=St[ae]=St[D]=St[le]=St[O]=St[L]=St[U]=St[V]=St[z]=St[K]=St[J]=St[he]=St[ue]=St[de]=!1;function Ae(Wt){return E(Wt)&&f(Wt.length)&&!!St[g(Wt)]}j.exports=Ae},function(j,_,u){var g=u(180),f=g(Object.keys,Object);j.exports=f},function(j,_,u){var g=u(95),f=u(76);function E(T,w){return T&&g(w,f(w),T)}j.exports=E},function(j,_,u){var g=u(48),f=u(112),E=u(351),T=Object.prototype,w=T.hasOwnProperty;function D(O){if(!g(O))return E(O);var L=f(O),U=[];for(var V in O)V=="constructor"&&(L||!w.call(O,V))||U.push(V);return U}j.exports=D},function(j,_){function u(g){var f=[];if(g!=null)for(var E in Object(g))f.push(E);return f}j.exports=u},function(j,_,u){var g=u(95),f=u(156);function E(T,w){return g(T,f(T),w)}j.exports=E},function(j,_,u){var g=u(95),f=u(185);function E(T,w){return g(T,f(T),w)}j.exports=E},function(j,_,u){var g=u(187),f=u(185),E=u(76);function T(w){return g(w,E,f)}j.exports=T},function(j,_,u){var g=u(74),f=u(51),E=g(f,"DataView");j.exports=E},function(j,_,u){var g=u(74),f=u(51),E=g(f,"Promise");j.exports=E},function(j,_,u){var g=u(74),f=u(51),E=g(f,"WeakMap");j.exports=E},function(j,_){var u=Object.prototype,g=u.hasOwnProperty;function f(E){var T=E.length,w=new E.constructor(T);return T&&typeof E[0]=="string"&&g.call(E,"index")&&(w.index=E.index,w.input=E.input),w}j.exports=f},function(j,_,u){var g=u(158),f=u(360),E=u(361),T=u(362),w=u(190),D="[object Boolean]",O="[object Date]",L="[object Map]",U="[object Number]",V="[object RegExp]",z="[object Set]",K="[object String]",J="[object Symbol]",he="[object ArrayBuffer]",ue="[object DataView]",de="[object Float32Array]",ae="[object Float64Array]",le="[object Int8Array]",re="[object Int16Array]",se="[object Int32Array]",ye="[object Uint8Array]",Z="[object Uint8ClampedArray]",Ee="[object Uint16Array]",k="[object Uint32Array]";function Te(De,Ue,St){var Ae=De.constructor;switch(Ue){case he:return g(De);case D:case O:return new Ae(+De);case ue:return f(De,St);case de:case ae:case le:case re:case se:case ye:case Z:case Ee:case k:return w(De,St);case L:return new Ae;case U:case K:return new Ae(De);case V:return E(De);case z:return new Ae;case J:return T(De)}}j.exports=Te},function(j,_,u){var g=u(158);function f(E,T){var w=T?g(E.buffer):E.buffer;return new E.constructor(w,E.byteOffset,E.byteLength)}j.exports=f},function(j,_){var u=/\w*$/;function g(f){var E=new f.constructor(f.source,u.exec(f));return E.lastIndex=f.lastIndex,E}j.exports=g},function(j,_,u){var g=u(83),f=g?g.prototype:void 0,E=f?f.valueOf:void 0;function T(w){return E?Object(E.call(w)):{}}j.exports=T},function(j,_,u){var g=u(364),f=u(111),E=u(154),T=E&&E.isMap,w=T?f(T):g;j.exports=w},function(j,_,u){var g=u(85),f=u(56),E="[object Map]";function T(w){return f(w)&&g(w)==E}j.exports=T},function(j,_,u){var g=u(366),f=u(111),E=u(154),T=E&&E.isSet,w=T?f(T):g;j.exports=w},function(j,_,u){var g=u(85),f=u(56),E="[object Set]";function T(w){return f(w)&&g(w)==E}j.exports=T},function(j,_){function u(g){return function(f,E,T){for(var w=-1,D=Object(f),O=T(f),L=O.length;L--;){var U=O[g?L:++w];if(E(D[U],U,D)===!1)break}return f}}j.exports=u},function(j,_,u){var g=u(62);function f(E,T){return function(w,D){if(w==null)return w;if(!g(w))return E(w,D);for(var O=w.length,L=T?O:-1,U=Object(w);(T?L--:++L<O)&&!(D(U[L],L,U)===!1););return w}}j.exports=f},function(j,_,u){var g=u(114);function f(E,T){var w=[];return g(E,function(D,O,L){T(D,O,L)&&w.push(D)}),w}j.exports=f},function(j,_,u){var g=u(371),f=u(379),E=u(202);function T(w){var D=f(w);return D.length==1&&D[0][2]?E(D[0][0],D[0][1]):function(O){return O===w||g(O,w,D)}}j.exports=T},function(j,_,u){var g=u(103),f=u(197),E=1,T=2;function w(D,O,L,U){var V=L.length,z=V,K=!U;if(D==null)return!z;for(D=Object(D);V--;){var J=L[V];if(K&&J[2]?J[1]!==D[J[0]]:!(J[0]in D))return!1}for(;++V<z;){J=L[V];var he=J[0],ue=D[he],de=J[1];if(K&&J[2]){if(ue===void 0&&!(he in D))return!1}else{var ae=new g;if(U)var le=U(ue,de,he,D,O,ae);if(!(le===void 0?f(de,ue,E|T,U,ae):le))return!1}}return!0}j.exports=w},function(j,_,u){var g=u(103),f=u(198),E=u(376),T=u(378),w=u(85),D=u(37),O=u(84),L=u(97),U=1,V="[object Arguments]",z="[object Array]",K="[object Object]",J=Object.prototype,he=J.hasOwnProperty;function ue(de,ae,le,re,se,ye){var Z=D(de),Ee=D(ae),k=Z?z:w(de),Te=Ee?z:w(ae);k=k==V?K:k,Te=Te==V?K:Te;var De=k==K,Ue=Te==K,St=k==Te;if(St&&O(de)){if(!O(ae))return!1;Z=!0,De=!1}if(St&&!De)return ye||(ye=new g),Z||L(de)?f(de,ae,le,re,se,ye):E(de,ae,k,le,re,se,ye);if(!(le&U)){var Ae=De&&he.call(de,"__wrapped__"),Wt=Ue&&he.call(ae,"__wrapped__");if(Ae||Wt){var At=Ae?de.value():de,mt=Wt?ae.value():ae;return ye||(ye=new g),se(At,mt,le,re,ye)}}return St?(ye||(ye=new g),T(de,ae,le,re,se,ye)):!1}j.exports=ue},function(j,_){var u="__lodash_hash_undefined__";function g(f){return this.__data__.set(f,u),this}j.exports=g},function(j,_){function u(g){return this.__data__.has(g)}j.exports=u},function(j,_){function u(g,f){for(var E=-1,T=g==null?0:g.length;++E<T;)if(f(g[E],E,g))return!0;return!1}j.exports=u},function(j,_,u){var g=u(83),f=u(189),E=u(82),T=u(198),w=u(377),D=u(162),O=1,L=2,U="[object Boolean]",V="[object Date]",z="[object Error]",K="[object Map]",J="[object Number]",he="[object RegExp]",ue="[object Set]",de="[object String]",ae="[object Symbol]",le="[object ArrayBuffer]",re="[object DataView]",se=g?g.prototype:void 0,ye=se?se.valueOf:void 0;function Z(Ee,k,Te,De,Ue,St,Ae){switch(Te){case re:if(Ee.byteLength!=k.byteLength||Ee.byteOffset!=k.byteOffset)return!1;Ee=Ee.buffer,k=k.buffer;case le:return!(Ee.byteLength!=k.byteLength||!St(new f(Ee),new f(k)));case U:case V:case J:return E(+Ee,+k);case z:return Ee.name==k.name&&Ee.message==k.message;case he:case de:return Ee==k+"";case K:var Wt=w;case ue:var At=De&O;if(Wt||(Wt=D),Ee.size!=k.size&&!At)return!1;var mt=Ae.get(Ee);if(mt)return mt==k;De|=L,Ae.set(Ee,k);var Dt=T(Wt(Ee),Wt(k),De,Ue,St,Ae);return Ae.delete(Ee),Dt;case ae:if(ye)return ye.call(Ee)==ye.call(k)}return!1}j.exports=Z},function(j,_){function u(g){var f=-1,E=Array(g.size);return g.forEach(function(T,w){E[++f]=[w,T]}),E}j.exports=u},function(j,_,u){var g=u(186),f=1,E=Object.prototype,T=E.hasOwnProperty;function w(D,O,L,U,V,z){var K=L&f,J=g(D),he=J.length,ue=g(O),de=ue.length;if(he!=de&&!K)return!1;for(var ae=he;ae--;){var le=J[ae];if(!(K?le in O:T.call(O,le)))return!1}var re=z.get(D),se=z.get(O);if(re&&se)return re==O&&se==D;var ye=!0;z.set(D,O),z.set(O,D);for(var Z=K;++ae<he;){le=J[ae];var Ee=D[le],k=O[le];if(U)var Te=K?U(k,Ee,le,O,D,z):U(Ee,k,le,D,O,z);if(!(Te===void 0?Ee===k||V(Ee,k,L,U,z):Te)){ye=!1;break}Z||(Z=le=="constructor")}if(ye&&!Z){var De=D.constructor,Ue=O.constructor;De!=Ue&&"constructor"in D&&"constructor"in O&&!(typeof De=="function"&&De instanceof De&&typeof Ue=="function"&&Ue instanceof Ue)&&(ye=!1)}return z.delete(D),z.delete(O),ye}j.exports=w},function(j,_,u){var g=u(201),f=u(67);function E(T){for(var w=f(T),D=w.length;D--;){var O=w[D],L=T[O];w[D]=[O,L,g(L)]}return w}j.exports=E},function(j,_,u){var g=u(197),f=u(381),E=u(204),T=u(163),w=u(201),D=u(202),O=u(98),L=1,U=2;function V(z,K){return T(z)&&w(K)?D(O(z),K):function(J){var he=f(J,z);return he===void 0&&he===K?E(J,z):g(K,he,L|U)}}j.exports=V},function(j,_,u){var g=u(115);function f(E,T,w){var D=E==null?void 0:g(E,T);return D===void 0?w:D}j.exports=f},function(j,_,u){var g=u(383),f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/\\(\\)?/g,T=g(function(w){var D=[];return w.charCodeAt(0)===46&&D.push(""),w.replace(f,function(O,L,U,V){D.push(U?V.replace(E,"$1"):L||O)}),D});j.exports=T},function(j,_,u){var g=u(384),f=500;function E(T){var w=g(T,function(O){return D.size===f&&D.clear(),O}),D=w.cache;return w}j.exports=E},function(j,_,u){var g=u(150),f="Expected a function";function E(T,w){if(typeof T!="function"||w!=null&&typeof w!="function")throw new TypeError(f);var D=function O(){var L=arguments,U=w?w.apply(this,L):L[0],V=O.cache;if(V.has(U))return V.get(U);var z=T.apply(this,L);return O.cache=V.set(U,z)||V,z};return D.cache=new(E.Cache||g),D}E.Cache=g,j.exports=E},function(j,_,u){var g=u(83),f=u(117),E=u(37),T=u(86),w=1/0,D=g?g.prototype:void 0,O=D?D.toString:void 0;function L(U){if(typeof U=="string")return U;if(E(U))return f(U,L)+"";if(T(U))return O?O.call(U):"";var V=U+"";return V=="0"&&1/U==-w?"-0":V}j.exports=L},function(j,_){function u(g,f){return g!=null&&f in Object(g)}j.exports=u},function(j,_,u){var g=u(206),f=u(388),E=u(163),T=u(98);function w(D){return E(D)?g(T(D)):f(D)}j.exports=w},function(j,_,u){var g=u(115);function f(E){return function(T){return g(T,E)}}j.exports=f},function(j,_){var u=Object.prototype,g=u.hasOwnProperty;function f(E,T){return E!=null&&g.call(E,T)}j.exports=f},function(j,_,u){var g=u(155),f=u(85),E=u(96),T=u(37),w=u(62),D=u(84),O=u(112),L=u(97),U="[object Map]",V="[object Set]",z=Object.prototype,K=z.hasOwnProperty;function J(he){if(he==null)return!0;if(w(he)&&(T(he)||typeof he=="string"||typeof he.splice=="function"||D(he)||L(he)||E(he)))return!he.length;var ue=f(he);if(ue==U||ue==V)return!he.size;if(O(he))return!g(he).length;for(var de in he)if(K.call(he,de))return!1;return!0}j.exports=J},function(j,_){function u(g,f,E,T){var w=-1,D=g==null?0:g.length;for(T&&D&&(E=g[++w]);++w<D;)E=f(E,g[w],w,g);return E}j.exports=u},function(j,_){function u(g,f,E,T,w){return w(g,function(D,O,L){E=T?(T=!1,D):f(E,D,O,L)}),E}j.exports=u},function(j,_,u){var g=u(155),f=u(85),E=u(62),T=u(394),w=u(395),D="[object Map]",O="[object Set]";function L(U){if(U==null)return 0;if(E(U))return T(U)?w(U):U.length;var V=f(U);return V==D||V==O?U.size:g(U).length}j.exports=L},function(j,_,u){var g=u(75),f=u(37),E=u(56),T="[object String]";function w(D){return typeof D=="string"||!f(D)&&E(D)&&g(D)==T}j.exports=w},function(j,_,u){var g=u(396),f=u(397),E=u(398);function T(w){return f(w)?E(w):g(w)}j.exports=T},function(j,_,u){var g=u(206),f=g("length");j.exports=f},function(j,_){var u="\\ud800-\\udfff",g="\\u0300-\\u036f",f="\\ufe20-\\ufe2f",E="\\u20d0-\\u20ff",T=g+f+E,w="\\ufe0e\\ufe0f",D="\\u200d",O=RegExp("["+D+u+T+w+"]");function L(U){return O.test(U)}j.exports=L},function(j,_){var u="\\ud800-\\udfff",g="\\u0300-\\u036f",f="\\ufe20-\\ufe2f",E="\\u20d0-\\u20ff",T=g+f+E,w="\\ufe0e\\ufe0f",D="["+u+"]",O="["+T+"]",L="\\ud83c[\\udffb-\\udfff]",U="(?:"+O+"|"+L+")",V="[^"+u+"]",z="(?:\\ud83c[\\udde6-\\uddff]){2}",K="[\\ud800-\\udbff][\\udc00-\\udfff]",J="\\u200d",he=U+"?",ue="["+w+"]?",de="(?:"+J+"(?:"+[V,z,K].join("|")+")"+ue+he+")*",ae=ue+he+de,le="(?:"+[V+O+"?",O,z,K,D].join("|")+")",re=RegExp(L+"(?="+L+")|"+le+ae,"g");function se(ye){for(var Z=re.lastIndex=0;re.test(ye);)++Z;return Z}j.exports=se},function(j,_,u){var g=u(151),f=u(192),E=u(160),T=u(63),w=u(113),D=u(37),O=u(84),L=u(94),U=u(48),V=u(97);function z(K,J,he){var ue=D(K),de=ue||O(K)||V(K);if(J=T(J,4),he==null){var ae=K&&K.constructor;de?he=ue?new ae:[]:U(K)?he=L(ae)?f(w(K)):{}:he={}}return(de?g:E)(K,function(le,re,se){return J(he,le,re,se)}),he}j.exports=z},function(j,_,u){var g=u(164),f=u(118),E=u(405),T=u(215),w=f(function(D){return E(g(D,1,T,!0))});j.exports=w},function(j,_,u){var g=u(83),f=u(96),E=u(37),T=g?g.isConcatSpreadable:void 0;function w(D){return E(D)||f(D)||!!(T&&D&&D[T])}j.exports=w},function(j,_){function u(g,f,E){switch(E.length){case 0:return g.call(f);case 1:return g.call(f,E[0]);case 2:return g.call(f,E[0],E[1]);case 3:return g.call(f,E[0],E[1],E[2])}return g.apply(f,E)}j.exports=u},function(j,_,u){var g=u(159),f=u(178),E=u(77),T=f?function(w,D){return f(w,"toString",{configurable:!0,enumerable:!1,value:g(D),writable:!0})}:E;j.exports=T},function(j,_){var u=800,g=16,f=Date.now;function E(T){var w=0,D=0;return function(){var O=f(),L=g-(O-D);if(D=O,L>0){if(++w>=u)return arguments[0]}else w=0;return T.apply(void 0,arguments)}}j.exports=E},function(j,_,u){var g=u(199),f=u(406),E=u(410),T=u(200),w=u(411),D=u(162),O=200;function L(U,V,z){var K=-1,J=f,he=U.length,ue=!0,de=[],ae=de;if(z)ue=!1,J=E;else if(he>=O){var le=V?null:w(U);if(le)return D(le);ue=!1,J=T,ae=new g}else ae=V?[]:de;e:for(;++K<he;){var re=U[K],se=V?V(re):re;if(re=z||re!==0?re:0,ue&&se===se){for(var ye=ae.length;ye--;)if(ae[ye]===se)continue e;V&&ae.push(se),de.push(re)}else J(ae,se,z)||(ae!==de&&ae.push(se),de.push(re))}return de}j.exports=L},function(j,_,u){var g=u(407);function f(E,T){var w=E==null?0:E.length;return!!w&&g(E,T,0)>-1}j.exports=f},function(j,_,u){var g=u(214),f=u(408),E=u(409);function T(w,D,O){return D===D?E(w,D,O):g(w,f,O)}j.exports=T},function(j,_){function u(g){return g!==g}j.exports=u},function(j,_){function u(g,f,E){for(var T=E-1,w=g.length;++T<w;)if(g[T]===f)return T;return-1}j.exports=u},function(j,_){function u(g,f,E){for(var T=-1,w=g==null?0:g.length;++T<w;)if(E(f,g[T]))return!0;return!1}j.exports=u},function(j,_,u){var g=u(188),f=u(412),E=u(162),T=1/0,w=g&&1/E(new g([,-0]))[1]==T?function(D){return new g(D)}:f;j.exports=w},function(j,_){function u(){}j.exports=u},function(j,_,u){var g=u(117);function f(E,T){return g(T,function(w){return E[w]})}j.exports=f},function(j,_){j.exports="2.1.8"},function(j,_,u){var g=u(47),f=u(148);j.exports={write:E,read:D};function E(O){var L={options:{directed:O.isDirected(),multigraph:O.isMultigraph(),compound:O.isCompound()},nodes:T(O),edges:w(O)};return g.isUndefined(O.graph())||(L.value=g.clone(O.graph())),L}function T(O){return g.map(O.nodes(),function(L){var U=O.node(L),V=O.parent(L),z={v:L};return g.isUndefined(U)||(z.value=U),g.isUndefined(V)||(z.parent=V),z})}function w(O){return g.map(O.edges(),function(L){var U=O.edge(L),V={v:L.v,w:L.w};return g.isUndefined(L.name)||(V.name=L.name),g.isUndefined(U)||(V.value=U),V})}function D(O){var L=new f(O.options).setGraph(O.value);return g.each(O.nodes,function(U){L.setNode(U.v,U.value),U.parent&&L.setParent(U.v,U.parent)}),g.each(O.edges,function(U){L.setEdge({v:U.v,w:U.w,name:U.name},U.value)}),L}},function(j,_,u){j.exports={components:u(417),dijkstra:u(217),dijkstraAll:u(418),findCycles:u(419),floydWarshall:u(420),isAcyclic:u(421),postorder:u(422),preorder:u(423),prim:u(424),tarjan:u(219),topsort:u(220)}},function(j,_,u){var g=u(47);j.exports=f;function f(E){var T={},w=[],D;function O(L){if(g.has(T,L))return;T[L]=!0,D.push(L),g.each(E.successors(L),O),g.each(E.predecessors(L),O)}return g.each(E.nodes(),function(L){D=[],O(L),D.length&&w.push(D)}),w}},function(j,_,u){var g=u(217),f=u(47);j.exports=E;function E(T,w,D){return f.transform(T.nodes(),function(O,L){O[L]=g(T,L,w,D)},{})}},function(j,_,u){var g=u(47),f=u(219);j.exports=E;function E(T){return g.filter(f(T),function(w){return w.length>1||w.length===1&&T.hasEdge(w[0],w[0])})}},function(j,_,u){var g=u(47);j.exports=E;var f=g.constant(1);function E(w,D,O){return T(w,D||f,O||function(L){return w.outEdges(L)})}function T(w,D,O){var L={},U=w.nodes();return U.forEach(function(V){L[V]={},L[V][V]={distance:0},U.forEach(function(z){V!==z&&(L[V][z]={distance:Number.POSITIVE_INFINITY})}),O(V).forEach(function(z){var K=z.v===V?z.w:z.v,J=D(z);L[V][K]={distance:J,predecessor:V}})}),U.forEach(function(V){var z=L[V];U.forEach(function(K){var J=L[K];U.forEach(function(he){var ue=J[V],de=z[he],ae=J[he],le=ue.distance+de.distance;le<ae.distance&&(ae.distance=le,ae.predecessor=de.predecessor)})})}),L}},function(j,_,u){var g=u(220);j.exports=f;function f(E){try{g(E)}catch(T){if(T instanceof g.CycleException)return!1;throw T}return!0}},function(j,_,u){var g=u(221);j.exports=f;function f(E,T){return g(E,T,"post")}},function(j,_,u){var g=u(221);j.exports=f;function f(E,T){return g(E,T,"pre")}},function(j,_,u){var g=u(47),f=u(148),E=u(218);j.exports=T;function T(w,D){var O=new f,L={},U=new E,V;function z(J){var he=J.v===V?J.w:J.v,ue=U.priority(he);if(ue!==void 0){var de=D(J);de<ue&&(L[he]=V,U.decrease(he,de))}}if(w.nodeCount()===0)return O;g.each(w.nodes(),function(J){U.add(J,Number.POSITIVE_INFINITY),O.setNode(J)}),U.decrease(w.nodes()[0],0);for(var K=!1;U.size()>0;){if(V=U.removeMin(),g.has(L,V))O.setEdge(V,L[V]);else{if(K)throw new Error("Input graph is not connected: "+w);K=!0}w.nodeEdges(V).forEach(z)}return O}},function(j,_,u){"use strict";var g=u(34),f=u(465),E=u(468),T=u(469),w=u(44).normalizeRanks,D=u(471),O=u(44).removeEmptyRanks,L=u(472),U=u(473),V=u(474),z=u(475),K=u(484),J=u(44),he=u(50).Graph;j.exports=ue;function ue(Fe,me){var ze=me&&me.debugTiming?J.time:J.notime;ze("layout",function(){var Be=ze("  buildLayoutGraph",function(){return De(Fe)});ze("  runLayout",function(){de(Be,ze)}),ze("  updateInputGraph",function(){ae(Fe,Be)})})}function de(Fe,me){me("    makeSpaceForEdgeLabels",function(){Ue(Fe)}),me("    removeSelfEdges",function(){Gt(Fe)}),me("    acyclic",function(){f.run(Fe)}),me("    nestingGraph.run",function(){L.run(Fe)}),me("    rank",function(){T(J.asNonCompoundGraph(Fe))}),me("    injectEdgeLabelProxies",function(){St(Fe)}),me("    removeEmptyRanks",function(){O(Fe)}),me("    nestingGraph.cleanup",function(){L.cleanup(Fe)}),me("    normalizeRanks",function(){w(Fe)}),me("    assignRankMinMax",function(){Ae(Fe)}),me("    removeEdgeLabelProxies",function(){Wt(Fe)}),me("    normalize.run",function(){E.run(Fe)}),me("    parentDummyChains",function(){D(Fe)}),me("    addBorderSegments",function(){U(Fe)}),me("    order",function(){z(Fe)}),me("    insertSelfEdges",function(){gn(Fe)}),me("    adjustCoordinateSystem",function(){V.adjust(Fe)}),me("    position",function(){K(Fe)}),me("    positionSelfEdges",function(){Ut(Fe)}),me("    removeBorderNodes",function(){Tt(Fe)}),me("    normalize.undo",function(){E.undo(Fe)}),me("    fixupEdgeLabelCoords",function(){Dt(Fe)}),me("    undoCoordinateSystem",function(){V.undo(Fe)}),me("    translateGraph",function(){At(Fe)}),me("    assignNodeIntersects",function(){mt(Fe)}),me("    reversePoints",function(){Ke(Fe)}),me("    acyclic.undo",function(){f.undo(Fe)})}function ae(Fe,me){g.forEach(Fe.nodes(),function(ze){var Be=Fe.node(ze),ut=me.node(ze);Be&&(Be.x=ut.x,Be.y=ut.y,me.children(ze).length&&(Be.width=ut.width,Be.height=ut.height))}),g.forEach(Fe.edges(),function(ze){var Be=Fe.edge(ze),ut=me.edge(ze);Be.points=ut.points,g.has(ut,"x")&&(Be.x=ut.x,Be.y=ut.y)}),Fe.graph().width=me.graph().width,Fe.graph().height=me.graph().height}var le=["nodesep","edgesep","ranksep","marginx","marginy"],re={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},se=["acyclicer","ranker","rankdir","align"],ye=["width","height"],Z={width:0,height:0},Ee=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Te=["labelpos"];function De(Fe){var me=new he({multigraph:!0,compound:!0}),ze=Rt(Fe.graph());return me.setGraph(g.merge({},re,Ht(ze,le),g.pick(ze,se))),g.forEach(Fe.nodes(),function(Be){var ut=Rt(Fe.node(Be));me.setNode(Be,g.defaults(Ht(ut,ye),Z)),me.setParent(Be,Fe.parent(Be))}),g.forEach(Fe.edges(),function(Be){var ut=Rt(Fe.edge(Be));me.setEdge(Be,g.merge({},k,Ht(ut,Ee),g.pick(ut,Te)))}),me}function Ue(Fe){var me=Fe.graph();me.ranksep/=2,g.forEach(Fe.edges(),function(ze){var Be=Fe.edge(ze);Be.minlen*=2,Be.labelpos.toLowerCase()!=="c"&&(me.rankdir==="TB"||me.rankdir==="BT"?Be.width+=Be.labeloffset:Be.height+=Be.labeloffset)})}function St(Fe){g.forEach(Fe.edges(),function(me){var ze=Fe.edge(me);if(ze.width&&ze.height){var Be=Fe.node(me.v),ut=Fe.node(me.w),xt={rank:(ut.rank-Be.rank)/2+Be.rank,e:me};J.addDummyNode(Fe,"edge-proxy",xt,"_ep")}})}function Ae(Fe){var me=0;g.forEach(Fe.nodes(),function(ze){var Be=Fe.node(ze);Be.borderTop&&(Be.minRank=Fe.node(Be.borderTop).rank,Be.maxRank=Fe.node(Be.borderBottom).rank,me=g.max(me,Be.maxRank))}),Fe.graph().maxRank=me}function Wt(Fe){g.forEach(Fe.nodes(),function(me){var ze=Fe.node(me);ze.dummy==="edge-proxy"&&(Fe.edge(ze.e).labelRank=ze.rank,Fe.removeNode(me))})}function At(Fe){var me=Number.POSITIVE_INFINITY,ze=0,Be=Number.POSITIVE_INFINITY,ut=0,xt=Fe.graph(),$t=xt.marginx||0,Qt=xt.marginy||0;function on(Mn){var Nn=Mn.x,qn=Mn.y,nr=Mn.width,xn=Mn.height;me=Math.min(me,Nn-nr/2),ze=Math.max(ze,Nn+nr/2),Be=Math.min(Be,qn-xn/2),ut=Math.max(ut,qn+xn/2)}g.forEach(Fe.nodes(),function(Mn){on(Fe.node(Mn))}),g.forEach(Fe.edges(),function(Mn){var Nn=Fe.edge(Mn);g.has(Nn,"x")&&on(Nn)}),me-=$t,Be-=Qt,g.forEach(Fe.nodes(),function(Mn){var Nn=Fe.node(Mn);Nn.x-=me,Nn.y-=Be}),g.forEach(Fe.edges(),function(Mn){var Nn=Fe.edge(Mn);g.forEach(Nn.points,function(qn){qn.x-=me,qn.y-=Be}),g.has(Nn,"x")&&(Nn.x-=me),g.has(Nn,"y")&&(Nn.y-=Be)}),xt.width=ze-me+$t,xt.height=ut-Be+Qt}function mt(Fe){g.forEach(Fe.edges(),function(me){var ze=Fe.edge(me),Be=Fe.node(me.v),ut=Fe.node(me.w),xt,$t;ze.points?(xt=ze.points[0],$t=ze.points[ze.points.length-1]):(ze.points=[],xt=ut,$t=Be),ze.points.unshift(J.intersectRect(Be,xt)),ze.points.push(J.intersectRect(ut,$t))})}function Dt(Fe){g.forEach(Fe.edges(),function(me){var ze=Fe.edge(me);if(g.has(ze,"x")){(ze.labelpos==="l"||ze.labelpos==="r")&&(ze.width-=ze.labeloffset);switch(ze.labelpos){case"l":ze.x-=ze.width/2+ze.labeloffset;break;case"r":ze.x+=ze.width/2+ze.labeloffset;break}}})}function Ke(Fe){g.forEach(Fe.edges(),function(me){var ze=Fe.edge(me);ze.reversed&&ze.points.reverse()})}function Tt(Fe){g.forEach(Fe.nodes(),function(me){if(Fe.children(me).length){var ze=Fe.node(me),Be=Fe.node(ze.borderTop),ut=Fe.node(ze.borderBottom),xt=Fe.node(g.last(ze.borderLeft)),$t=Fe.node(g.last(ze.borderRight));ze.width=Math.abs($t.x-xt.x),ze.height=Math.abs(ut.y-Be.y),ze.x=xt.x+ze.width/2,ze.y=Be.y+ze.height/2}}),g.forEach(Fe.nodes(),function(me){Fe.node(me).dummy==="border"&&Fe.removeNode(me)})}function Gt(Fe){g.forEach(Fe.edges(),function(me){if(me.v===me.w){var ze=Fe.node(me.v);ze.selfEdges||(ze.selfEdges=[]),ze.selfEdges.push({e:me,label:Fe.edge(me)}),Fe.removeEdge(me)}})}function gn(Fe){var me=J.buildLayerMatrix(Fe);g.forEach(me,function(ze){var Be=0;g.forEach(ze,function(ut,xt){var $t=Fe.node(ut);$t.order=xt+Be,g.forEach($t.selfEdges,function(Qt){J.addDummyNode(Fe,"selfedge",{width:Qt.label.width,height:Qt.label.height,rank:$t.rank,order:xt+ ++Be,e:Qt.e,label:Qt.label},"_se")}),delete $t.selfEdges})})}function Ut(Fe){g.forEach(Fe.nodes(),function(me){var ze=Fe.node(me);if(ze.dummy==="selfedge"){var Be=Fe.node(ze.e.v),ut=Be.x+Be.width/2,xt=Be.y,$t=ze.x-ut,Qt=Be.height/2;Fe.setEdge(ze.e,ze.label),Fe.removeNode(me),ze.label.points=[{x:ut+2*$t/3,y:xt-Qt},{x:ut+5*$t/6,y:xt-Qt},{x:ut+$t,y:xt},{x:ut+5*$t/6,y:xt+Qt},{x:ut+2*$t/3,y:xt+Qt}],ze.label.x=ze.x,ze.label.y=ze.y}})}function Ht(Fe,me){return g.mapValues(g.pick(Fe,me),Number)}function Rt(Fe){var me={};return g.forEach(Fe,function(ze,Be){me[Be.toLowerCase()]=ze}),me}},function(j,_,u){var g=u(175),f=1,E=4;function T(w){return g(w,f|E)}j.exports=T},function(j,_,u){var g=u(118),f=u(82),E=u(119),T=u(76),w=Object.prototype,D=w.hasOwnProperty,O=g(function(L,U){L=Object(L);var V=-1,z=U.length,K=z>2?U[2]:void 0;for(K&&E(U[0],U[1],K)&&(z=1);++V<z;)for(var J=U[V],he=T(J),ue=-1,de=he.length;++ue<de;){var ae=he[ue],le=L[ae];(le===void 0||f(le,w[ae])&&!D.call(L,ae))&&(L[ae]=J[ae])}return L});j.exports=O},function(j,_,u){var g=u(429),f=u(430),E=g(f);j.exports=E},function(j,_,u){var g=u(63),f=u(62),E=u(67);function T(w){return function(D,O,L){var U=Object(D);if(!f(D)){var V=g(O,3);D=E(D),O=function(J){return V(U[J],J,U)}}var z=w(D,O,L);return z>-1?U[V?D[z]:z]:void 0}}j.exports=T},function(j,_,u){var g=u(214),f=u(63),E=u(431),T=Math.max;function w(D,O,L){var U=D==null?0:D.length;if(!U)return-1;var V=L==null?0:E(L);return V<0&&(V=T(U+V,0)),g(D,f(O,3),V)}j.exports=w},function(j,_,u){var g=u(222);function f(E){var T=g(E),w=T%1;return T===T?w?T-w:T:0}j.exports=f},function(j,_,u){var g=u(433),f=u(48),E=u(86),T=0/0,w=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,O=/^0o[0-7]+$/i,L=parseInt;function U(V){if(typeof V=="number")return V;if(E(V))return T;if(f(V)){var z=typeof V.valueOf=="function"?V.valueOf():V;V=f(z)?z+"":z}if(typeof V!="string")return V===0?V:+V;V=g(V);var K=D.test(V);return K||O.test(V)?L(V.slice(2),K?2:8):w.test(V)?T:+V}j.exports=U},function(j,_,u){var g=u(434),f=/^\s+/;function E(T){return T&&T.slice(0,g(T)+1).replace(f,"")}j.exports=E},function(j,_){var u=/\s/;function g(f){for(var E=f.length;E--&&u.test(f.charAt(E)););return E}j.exports=g},function(j,_,u){var g=u(161),f=u(195),E=u(76);function T(w,D){return w==null?w:g(w,f(D),E)}j.exports=T},function(j,_){function u(g){var f=g==null?0:g.length;return f?g[f-1]:void 0}j.exports=u},function(j,_,u){var g=u(109),f=u(160),E=u(63);function T(w,D){var O={};return D=E(D,3),f(w,function(L,U,V){g(O,U,D(L,U,V))}),O}j.exports=T},function(j,_,u){var g=u(165),f=u(439),E=u(77);function T(w){return w&&w.length?g(w,E,f):void 0}j.exports=T},function(j,_){function u(g,f){return g>f}j.exports=u},function(j,_,u){var g=u(441),f=u(445),E=f(function(T,w,D){g(T,w,D)});j.exports=E},function(j,_,u){var g=u(103),f=u(224),E=u(161),T=u(442),w=u(48),D=u(76),O=u(225);function L(U,V,z,K,J){if(U===V)return;E(V,function(he,ue){if(J||(J=new g),w(he))T(U,V,ue,z,L,K,J);else{var de=K?K(O(U,ue),he,ue+"",U,V,J):void 0;de===void 0&&(de=he),f(U,ue,de)}},D)}j.exports=L},function(j,_,u){var g=u(224),f=u(181),E=u(190),T=u(182),w=u(191),D=u(96),O=u(37),L=u(215),U=u(84),V=u(94),z=u(48),K=u(443),J=u(97),he=u(225),ue=u(444);function de(ae,le,re,se,ye,Z,Ee){var k=he(ae,re),Te=he(le,re),De=Ee.get(Te);if(De){g(ae,re,De);return}var Ue=Z?Z(k,Te,re+"",ae,le,Ee):void 0,St=Ue===void 0;if(St){var Ae=O(Te),Wt=!Ae&&U(Te),At=!Ae&&!Wt&&J(Te);Ue=Te,Ae||Wt||At?O(k)?Ue=k:L(k)?Ue=T(k):Wt?(St=!1,Ue=f(Te,!0)):At?(St=!1,Ue=E(Te,!0)):Ue=[]:K(Te)||D(Te)?(Ue=k,D(k)?Ue=ue(k):(!z(k)||V(k))&&(Ue=w(Te))):St=!1}St&&(Ee.set(Te,Ue),ye(Ue,Te,se,Z,Ee),Ee.delete(Te)),g(ae,re,Ue)}j.exports=de},function(j,_,u){var g=u(75),f=u(113),E=u(56),T="[object Object]",w=Function.prototype,D=Object.prototype,O=w.toString,L=D.hasOwnProperty,U=O.call(Object);function V(z){if(!E(z)||g(z)!=T)return!1;var K=f(z);if(K===null)return!0;var J=L.call(K,"constructor")&&K.constructor;return typeof J=="function"&&J instanceof J&&O.call(J)==U}j.exports=V},function(j,_,u){var g=u(95),f=u(76);function E(T){return g(T,f(T))}j.exports=E},function(j,_,u){var g=u(118),f=u(119);function E(T){return g(function(w,D){var O=-1,L=D.length,U=L>1?D[L-1]:void 0,V=L>2?D[2]:void 0;for(U=T.length>3&&typeof U=="function"?(L--,U):void 0,V&&f(D[0],D[1],V)&&(U=L<3?void 0:U,L=1),w=Object(w);++O<L;){var z=D[O];z&&T(w,z,O,U)}return w})}j.exports=E},function(j,_,u){var g=u(165),f=u(226),E=u(77);function T(w){return w&&w.length?g(w,E,f):void 0}j.exports=T},function(j,_,u){var g=u(165),f=u(63),E=u(226);function T(w,D){return w&&w.length?g(w,f(D,2),E):void 0}j.exports=T},function(j,_,u){var g=u(51),f=function(){return g.Date.now()};j.exports=f},function(j,_,u){var g=u(450),f=u(453),E=f(function(T,w){return T==null?{}:g(T,w)});j.exports=E},function(j,_,u){var g=u(451),f=u(204);function E(T,w){return g(T,w,function(D,O){return f(T,O)})}j.exports=E},function(j,_,u){var g=u(115),f=u(452),E=u(116);function T(w,D,O){for(var L=-1,U=D.length,V={};++L<U;){var z=D[L],K=g(w,z);O(K,z)&&f(V,E(z,w),K)}return V}j.exports=T},function(j,_,u){var g=u(108),f=u(116),E=u(110),T=u(48),w=u(98);function D(O,L,U,V){if(!T(O))return O;L=f(L,O);for(var z=-1,K=L.length,J=K-1,he=O;he!=null&&++z<K;){var ue=w(L[z]),de=U;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return O;if(z!=J){var ae=he[ue];de=V?V(ae,ue,he):void 0,de===void 0&&(de=T(ae)?ae:E(L[z+1])?[]:{})}g(he,ue,de),he=he[ue]}return O}j.exports=D},function(j,_,u){var g=u(223),f=u(212),E=u(213);function T(w){return E(f(w,void 0,g),w+"")}j.exports=T},function(j,_,u){var g=u(455),f=g();j.exports=f},function(j,_,u){var g=u(456),f=u(119),E=u(222);function T(w){return function(D,O,L){return L&&typeof L!="number"&&f(D,O,L)&&(O=L=void 0),D=E(D),O===void 0?(O=D,D=0):O=E(O),L=L===void 0?D<O?1:-1:E(L),g(D,O,L,w)}}j.exports=T},function(j,_){var u=Math.ceil,g=Math.max;function f(E,T,w,D){for(var O=-1,L=g(u((T-E)/(w||1)),0),U=Array(L);L--;)U[D?L:++O]=E,E+=w;return U}j.exports=f},function(j,_,u){var g=u(164),f=u(458),E=u(118),T=u(119),w=E(function(D,O){if(D==null)return[];var L=O.length;return L>1&&T(D,O[0],O[1])?O=[]:L>2&&T(O[0],O[1],O[2])&&(O=[O[0]]),f(D,g(O,1),[])});j.exports=w},function(j,_,u){var g=u(117),f=u(115),E=u(63),T=u(210),w=u(459),D=u(111),O=u(460),L=u(77),U=u(37);function V(z,K,J){K.length?K=g(K,function(de){return U(de)?function(ae){return f(ae,de.length===1?de[0]:de)}:de}):K=[L];var he=-1;K=g(K,D(E));var ue=T(z,function(de,ae,le){var re=g(K,function(se){return se(de)});return{criteria:re,index:++he,value:de}});return w(ue,function(de,ae){return O(de,ae,J)})}j.exports=V},function(j,_){function u(g,f){var E=g.length;for(g.sort(f);E--;)g[E]=g[E].value;return g}j.exports=u},function(j,_,u){var g=u(461);function f(E,T,w){for(var D=-1,O=E.criteria,L=T.criteria,U=O.length,V=w.length;++D<U;){var z=g(O[D],L[D]);if(z){if(D>=V)return z;var K=w[D];return z*(K=="desc"?-1:1)}}return E.index-T.index}j.exports=f},function(j,_,u){var g=u(86);function f(E,T){if(E!==T){var w=E!==void 0,D=E===null,O=E===E,L=g(E),U=T!==void 0,V=T===null,z=T===T,K=g(T);if(!V&&!K&&!L&&E>T||L&&U&&z&&!V&&!K||D&&U&&z||!w&&z||!O)return 1;if(!D&&!L&&!K&&E<T||K&&w&&O&&!D&&!L||V&&w&&O||!U&&O||!z)return-1}return 0}j.exports=f},function(j,_,u){var g=u(203),f=0;function E(T){var w=++f;return g(T)+w}j.exports=E},function(j,_,u){var g=u(108),f=u(464);function E(T,w){return f(T||[],w||[],g)}j.exports=E},function(j,_){function u(g,f,E){for(var T=-1,w=g.length,D=f.length,O={};++T<w;){var L=T<D?f[T]:void 0;E(O,g[T],L)}return O}j.exports=u},function(j,_,u){"use strict";var g=u(34),f=u(466);j.exports={run:E,undo:w};function E(D){var O=D.graph().acyclicer==="greedy"?f(D,L(D)):T(D);g.forEach(O,function(U){var V=D.edge(U);D.removeEdge(U),V.forwardName=U.name,V.reversed=!0,D.setEdge(U.w,U.v,V,g.uniqueId("rev"))});function L(U){return function(V){return U.edge(V).weight}}}function T(D){var O=[],L={},U={};function V(z){if(g.has(U,z))return;U[z]=!0,L[z]=!0,g.forEach(D.outEdges(z),function(K){g.has(L,K.w)?O.push(K):V(K.w)}),delete L[z]}return g.forEach(D.nodes(),V),O}function w(D){g.forEach(D.edges(),function(O){var L=D.edge(O);if(L.reversed){D.removeEdge(O);var U=L.forwardName;delete L.reversed,delete L.forwardName,D.setEdge(O.w,O.v,L,U)}})}},function(j,_,u){var g=u(34),f=u(50).Graph,E=u(467);j.exports=w;var T=g.constant(1);function w(V,z){if(V.nodeCount()<=1)return[];var K=L(V,z||T),J=D(K.graph,K.buckets,K.zeroIdx);return g.flatten(g.map(J,function(he){return V.outEdges(he.v,he.w)}),!0)}function D(V,z,K){for(var J=[],he=z[z.length-1],ue=z[0],de;V.nodeCount();){for(;de=ue.dequeue();)O(V,z,K,de);for(;de=he.dequeue();)O(V,z,K,de);if(V.nodeCount()){for(var ae=z.length-2;ae>0;--ae)if(de=z[ae].dequeue(),de){J=J.concat(O(V,z,K,de,!0));break}}}return J}function O(V,z,K,J,he){var ue=he?[]:void 0;return g.forEach(V.inEdges(J.v),function(de){var ae=V.edge(de),le=V.node(de.v);he&&ue.push({v:de.v,w:de.w}),le.out-=ae,U(z,K,le)}),g.forEach(V.outEdges(J.v),function(de){var ae=V.edge(de),le=de.w,re=V.node(le);re.in-=ae,U(z,K,re)}),V.removeNode(J.v),ue}function L(V,z){var K=new f,J=0,he=0;g.forEach(V.nodes(),function(ae){K.setNode(ae,{v:ae,in:0,out:0})}),g.forEach(V.edges(),function(ae){var le=K.edge(ae.v,ae.w)||0,re=z(ae),se=le+re;K.setEdge(ae.v,ae.w,se),he=Math.max(he,K.node(ae.v).out+=re),J=Math.max(J,K.node(ae.w).in+=re)});var ue=g.range(he+J+3).map(function(){return new E}),de=J+1;return g.forEach(K.nodes(),function(ae){U(ue,de,K.node(ae))}),{graph:K,buckets:ue,zeroIdx:de}}function U(V,z,K){K.out?K.in?V[K.out-K.in+z].enqueue(K):V[V.length-1].enqueue(K):V[0].enqueue(K)}},function(j,_){j.exports=u;function u(){var E={};E._next=E._prev=E,this._sentinel=E}u.prototype.dequeue=function(){var E=this._sentinel,T=E._prev;if(T!==E)return g(T),T},u.prototype.enqueue=function(E){var T=this._sentinel;E._prev&&E._next&&g(E),E._next=T._next,T._next._prev=E,T._next=E,E._prev=T},u.prototype.toString=function(){for(var E=[],T=this._sentinel,w=T._prev;w!==T;)E.push(JSON.stringify(w,f)),w=w._prev;return"["+E.join(", ")+"]"};function g(E){E._prev._next=E._next,E._next._prev=E._prev,delete E._next,delete E._prev}function f(E,T){if(E!=="_next"&&E!=="_prev")return T}},function(j,_,u){"use strict";var g=u(34),f=u(44);j.exports={run:E,undo:w};function E(D){D.graph().dummyChains=[],g.forEach(D.edges(),function(O){T(D,O)})}function T(D,O){var L=O.v,U=D.node(L).rank,V=O.w,z=D.node(V).rank,K=O.name,J=D.edge(O),he=J.labelRank;if(z===U+1)return;D.removeEdge(O);var ue,de,ae;for(ae=0,++U;U<z;++ae,++U)J.points=[],de={width:0,height:0,edgeLabel:J,edgeObj:O,rank:U},ue=f.addDummyNode(D,"edge",de,"_d"),U===he&&(de.width=J.width,de.height=J.height,de.dummy="edge-label",de.labelpos=J.labelpos),D.setEdge(L,ue,{weight:J.weight},K),ae===0&&D.graph().dummyChains.push(ue),L=ue;D.setEdge(L,V,{weight:J.weight},K)}function w(D){g.forEach(D.graph().dummyChains,function(O){var L=D.node(O),U=L.edgeLabel,V;for(D.setEdge(L.edgeObj,U);L.dummy;)V=D.successors(O)[0],D.removeNode(O),U.points.push({x:L.x,y:L.y}),L.dummy==="edge-label"&&(U.x=L.x,U.y=L.y,U.width=L.width,U.height=L.height),O=V,L=D.node(O)})}},function(j,_,u){"use strict";var g=u(120),f=g.longestPath,E=u(227),T=u(470);j.exports=w;function w(U){switch(U.graph().ranker){case"network-simplex":L(U);break;case"tight-tree":O(U);break;case"longest-path":D(U);break;default:L(U)}}var D=f;function O(U){f(U),E(U)}function L(U){T(U)}},function(j,_,u){"use strict";var g=u(34),f=u(227),E=u(120).slack,T=u(120).longestPath,w=u(50).alg.preorder,D=u(50).alg.postorder,O=u(44).simplify;j.exports=L,L.initLowLimValues=K,L.initCutValues=U,L.calcCutValue=z,L.leaveEdge=he,L.enterEdge=ue,L.exchangeEdges=de;function L(se){se=O(se),T(se);var ye=f(se);K(ye),U(ye,se);for(var Z,Ee;Z=he(ye);)Ee=ue(ye,se,Z),de(ye,se,Z,Ee)}function U(se,ye){var Z=D(se,se.nodes());Z=Z.slice(0,Z.length-1),g.forEach(Z,function(Ee){V(se,ye,Ee)})}function V(se,ye,Z){var Ee=se.node(Z),k=Ee.parent;se.edge(Z,k).cutvalue=z(se,ye,Z)}function z(se,ye,Z){var Ee=se.node(Z),k=Ee.parent,Te=!0,De=ye.edge(Z,k),Ue=0;return De||(Te=!1,De=ye.edge(k,Z)),Ue=De.weight,g.forEach(ye.nodeEdges(Z),function(St){var Ae=St.v===Z,Wt=Ae?St.w:St.v;if(Wt!==k){var At=Ae===Te,mt=ye.edge(St).weight;if(Ue+=At?mt:-mt,le(se,Z,Wt)){var Dt=se.edge(Z,Wt).cutvalue;Ue+=At?-Dt:Dt}}}),Ue}function K(se,ye){arguments.length<2&&(ye=se.nodes()[0]),J(se,{},1,ye)}function J(se,ye,Z,Ee,k){var Te=Z,De=se.node(Ee);return ye[Ee]=!0,g.forEach(se.neighbors(Ee),function(Ue){g.has(ye,Ue)||(Z=J(se,ye,Z,Ue,Ee))}),De.low=Te,De.lim=Z++,k?De.parent=k:delete De.parent,Z}function he(se){return g.find(se.edges(),function(ye){return se.edge(ye).cutvalue<0})}function ue(se,ye,Z){var Ee=Z.v,k=Z.w;ye.hasEdge(Ee,k)||(Ee=Z.w,k=Z.v);var Te=se.node(Ee),De=se.node(k),Ue=Te,St=!1;Te.lim>De.lim&&(Ue=De,St=!0);var Ae=g.filter(ye.edges(),function(Wt){return St===re(se,se.node(Wt.v),Ue)&&St!==re(se,se.node(Wt.w),Ue)});return g.minBy(Ae,function(Wt){return E(ye,Wt)})}function de(se,ye,Z,Ee){var k=Z.v,Te=Z.w;se.removeEdge(k,Te),se.setEdge(Ee.v,Ee.w,{}),K(se),U(se,ye),ae(se,ye)}function ae(se,ye){var Z=g.find(se.nodes(),function(k){return!ye.node(k).parent}),Ee=w(se,Z);Ee=Ee.slice(1),g.forEach(Ee,function(k){var Te=se.node(k).parent,De=ye.edge(k,Te),Ue=!1;De||(De=ye.edge(Te,k),Ue=!0),ye.node(k).rank=ye.node(Te).rank+(Ue?De.minlen:-De.minlen)})}function le(se,ye,Z){return se.hasEdge(ye,Z)}function re(se,ye,Z){return Z.low<=ye.lim&&ye.lim<=Z.lim}},function(j,_,u){var g=u(34);j.exports=f;function f(w){var D=T(w);g.forEach(w.graph().dummyChains,function(O){for(var L=w.node(O),U=L.edgeObj,V=E(w,D,U.v,U.w),z=V.path,K=V.lca,J=0,he=z[J],ue=!0;O!==U.w;){if(L=w.node(O),ue){for(;(he=z[J])!==K&&w.node(he).maxRank<L.rank;)J++;he===K&&(ue=!1)}if(!ue){for(;J<z.length-1&&w.node(he=z[J+1]).minRank<=L.rank;)J++;he=z[J]}w.setParent(O,he),O=w.successors(O)[0]}})}function E(w,D,O,L){var U=[],V=[],z=Math.min(D[O].low,D[L].low),K=Math.max(D[O].lim,D[L].lim),J,he;J=O;do J=w.parent(J),U.push(J);while(J&&(D[J].low>z||K>D[J].lim));for(he=J,J=L;(J=w.parent(J))!==he;)V.push(J);return{path:U.concat(V.reverse()),lca:he}}function T(w){var D={},O=0;function L(U){var V=O;g.forEach(w.children(U),L),D[U]={low:V,lim:O++}}return g.forEach(w.children(),L),D}},function(j,_,u){var g=u(34),f=u(44);j.exports={run:E,cleanup:O};function E(L){var U=f.addDummyNode(L,"root",{},"_root"),V=w(L),z=g.max(g.values(V))-1,K=2*z+1;L.graph().nestingRoot=U,g.forEach(L.edges(),function(he){L.edge(he).minlen*=K});var J=D(L)+1;g.forEach(L.children(),function(he){T(L,U,K,J,z,V,he)}),L.graph().nodeRankFactor=K}function T(L,U,V,z,K,J,he){var ue=L.children(he);if(!ue.length){he!==U&&L.setEdge(U,he,{weight:0,minlen:V});return}var de=f.addBorderNode(L,"_bt"),ae=f.addBorderNode(L,"_bb"),le=L.node(he);L.setParent(de,he),le.borderTop=de,L.setParent(ae,he),le.borderBottom=ae,g.forEach(ue,function(re){T(L,U,V,z,K,J,re);var se=L.node(re),ye=se.borderTop?se.borderTop:re,Z=se.borderBottom?se.borderBottom:re,Ee=se.borderTop?z:2*z,k=ye!==Z?1:K-J[he]+1;L.setEdge(de,ye,{weight:Ee,minlen:k,nestingEdge:!0}),L.setEdge(Z,ae,{weight:Ee,minlen:k,nestingEdge:!0})}),L.parent(he)||L.setEdge(U,de,{weight:0,minlen:K+J[he]})}function w(L){var U={};function V(z,K){var J=L.children(z);J&&J.length&&g.forEach(J,function(he){V(he,K+1)}),U[z]=K}return g.forEach(L.children(),function(z){V(z,1)}),U}function D(L){return g.reduce(L.edges(),function(U,V){return U+L.edge(V).weight},0)}function O(L){var U=L.graph();L.removeNode(U.nestingRoot),delete U.nestingRoot,g.forEach(L.edges(),function(V){var z=L.edge(V);z.nestingEdge&&L.removeEdge(V)})}},function(j,_,u){var g=u(34),f=u(44);j.exports=E;function E(w){function D(O){var L=w.children(O),U=w.node(O);if(L.length&&g.forEach(L,D),g.has(U,"minRank")){U.borderLeft=[],U.borderRight=[];for(var V=U.minRank,z=U.maxRank+1;V<z;++V)T(w,"borderLeft","_bl",O,U,V),T(w,"borderRight","_br",O,U,V)}}g.forEach(w.children(),D)}function T(w,D,O,L,U,V){var z={width:0,height:0,rank:V,borderType:D},K=U[D][V-1],J=f.addDummyNode(w,"border",z,O);U[D][V]=J,w.setParent(J,L),K&&w.setEdge(K,J,{weight:1})}},function(j,_,u){"use strict";var g=u(34);j.exports={adjust:f,undo:E};function f(V){var z=V.graph().rankdir.toLowerCase();(z==="lr"||z==="rl")&&T(V)}function E(V){var z=V.graph().rankdir.toLowerCase();(z==="bt"||z==="rl")&&D(V),(z==="lr"||z==="rl")&&(L(V),T(V))}function T(V){g.forEach(V.nodes(),function(z){w(V.node(z))}),g.forEach(V.edges(),function(z){w(V.edge(z))})}function w(V){var z=V.width;V.width=V.height,V.height=z}function D(V){g.forEach(V.nodes(),function(z){O(V.node(z))}),g.forEach(V.edges(),function(z){var K=V.edge(z);g.forEach(K.points,O),g.has(K,"y")&&O(K)})}function O(V){V.y=-V.y}function L(V){g.forEach(V.nodes(),function(z){U(V.node(z))}),g.forEach(V.edges(),function(z){var K=V.edge(z);g.forEach(K.points,U),g.has(K,"x")&&U(K)})}function U(V){var z=V.x;V.x=V.y,V.y=z}},function(j,_,u){"use strict";var g=u(34),f=u(476),E=u(477),T=u(478),w=u(482),D=u(483),O=u(50).Graph,L=u(44);j.exports=U;function U(J){var he=L.maxRank(J),ue=V(J,g.range(1,he+1),"inEdges"),de=V(J,g.range(he-1,-1,-1),"outEdges"),ae=f(J);K(J,ae);for(var le=Number.POSITIVE_INFINITY,re,se=0,ye=0;ye<4;++se,++ye){z(se%2?ue:de,se%4>=2),ae=L.buildLayerMatrix(J);var Z=E(J,ae);Z<le&&(ye=0,re=g.cloneDeep(ae),le=Z)}K(J,re)}function V(J,he,ue){return g.map(he,function(de){return w(J,de,ue)})}function z(J,he){var ue=new O;g.forEach(J,function(de){var ae=de.graph().root,le=T(de,ae,ue,he);g.forEach(le.vs,function(re,se){de.node(re).order=se}),D(de,ue,le.vs)})}function K(J,he){g.forEach(he,function(ue){g.forEach(ue,function(de,ae){J.node(de).order=ae})})}},function(j,_,u){"use strict";var g=u(34);j.exports=f;function f(E){var T={},w=g.filter(E.nodes(),function(V){return!E.children(V).length}),D=g.max(g.map(w,function(V){return E.node(V).rank})),O=g.map(g.range(D+1),function(){return[]});function L(V){if(g.has(T,V))return;T[V]=!0;var z=E.node(V);O[z.rank].push(V),g.forEach(E.successors(V),L)}var U=g.sortBy(w,function(V){return E.node(V).rank});return g.forEach(U,L),O}},function(j,_,u){"use strict";var g=u(34);j.exports=f;function f(T,w){for(var D=0,O=1;O<w.length;++O)D+=E(T,w[O-1],w[O]);return D}function E(T,w,D){for(var O=g.zipObject(D,g.map(D,function(J,he){return he})),L=g.flatten(g.map(w,function(J){return g.sortBy(g.map(T.outEdges(J),function(he){return{pos:O[he.w],weight:T.edge(he).weight}}),"pos")}),!0),U=1;U<D.length;)U<<=1;var V=2*U-1;U-=1;var z=g.map(new Array(V),function(){return 0}),K=0;return g.forEach(L.forEach(function(J){var he=J.pos+U;z[he]+=J.weight;for(var ue=0;he>0;)he%2&&(ue+=z[he+1]),he=he-1>>1,z[he]+=J.weight;K+=J.weight*ue})),K}},function(j,_,u){var g=u(34),f=u(479),E=u(480),T=u(481);j.exports=w;function w(L,U,V,z){var K=L.children(U),J=L.node(U),he=J?J.borderLeft:void 0,ue=J?J.borderRight:void 0,de={};he&&(K=g.filter(K,function(Z){return Z!==he&&Z!==ue}));var ae=f(L,K);g.forEach(ae,function(Z){if(L.children(Z.v).length){var Ee=w(L,Z.v,V,z);de[Z.v]=Ee,g.has(Ee,"barycenter")&&O(Z,Ee)}});var le=E(ae,V);D(le,de);var re=T(le,z);if(he&&(re.vs=g.flatten([he,re.vs,ue],!0),L.predecessors(he).length)){var se=L.node(L.predecessors(he)[0]),ye=L.node(L.predecessors(ue)[0]);g.has(re,"barycenter")||(re.barycenter=0,re.weight=0),re.barycenter=(re.barycenter*re.weight+se.order+ye.order)/(re.weight+2),re.weight+=2}return re}function D(L,U){g.forEach(L,function(V){V.vs=g.flatten(V.vs.map(function(z){return U[z]?U[z].vs:z}),!0)})}function O(L,U){g.isUndefined(L.barycenter)?(L.barycenter=U.barycenter,L.weight=U.weight):(L.barycenter=(L.barycenter*L.weight+U.barycenter*U.weight)/(L.weight+U.weight),L.weight+=U.weight)}},function(j,_,u){var g=u(34);j.exports=f;function f(E,T){return g.map(T,function(w){var D=E.inEdges(w);if(D.length){var O=g.reduce(D,function(L,U){var V=E.edge(U),z=E.node(U.v);return{sum:L.sum+V.weight*z.order,weight:L.weight+V.weight}},{sum:0,weight:0});return{v:w,barycenter:O.sum/O.weight,weight:O.weight}}else return{v:w}})}},function(j,_,u){"use strict";var g=u(34);j.exports=f;function f(w,D){var O={};g.forEach(w,function(U,V){var z=O[U.v]={indegree:0,in:[],out:[],vs:[U.v],i:V};g.isUndefined(U.barycenter)||(z.barycenter=U.barycenter,z.weight=U.weight)}),g.forEach(D.edges(),function(U){var V=O[U.v],z=O[U.w];!g.isUndefined(V)&&!g.isUndefined(z)&&(z.indegree++,V.out.push(O[U.w]))});var L=g.filter(O,function(U){return!U.indegree});return E(L)}function E(w){var D=[];function O(V){return function(z){if(z.merged)return;(g.isUndefined(z.barycenter)||g.isUndefined(V.barycenter)||z.barycenter>=V.barycenter)&&T(V,z)}}function L(V){return function(z){z.in.push(V),--z.indegree===0&&w.push(z)}}for(;w.length;){var U=w.pop();D.push(U),g.forEach(U.in.reverse(),O(U)),g.forEach(U.out,L(U))}return g.map(g.filter(D,function(V){return!V.merged}),function(V){return g.pick(V,["vs","i","barycenter","weight"])})}function T(w,D){var O=0,L=0;w.weight&&(O+=w.barycenter*w.weight,L+=w.weight),D.weight&&(O+=D.barycenter*D.weight,L+=D.weight),w.vs=D.vs.concat(w.vs),w.barycenter=O/L,w.weight=L,w.i=Math.min(D.i,w.i),D.merged=!0}},function(j,_,u){var g=u(34),f=u(44);j.exports=E;function E(D,O){var L=f.partition(D,function(de){return g.has(de,"barycenter")}),U=L.lhs,V=g.sortBy(L.rhs,function(de){return-de.i}),z=[],K=0,J=0,he=0;U.sort(w(!!O)),he=T(z,V,he),g.forEach(U,function(de){he+=de.vs.length,z.push(de.vs),K+=de.barycenter*de.weight,J+=de.weight,he=T(z,V,he)});var ue={vs:g.flatten(z,!0)};return J&&(ue.barycenter=K/J,ue.weight=J),ue}function T(D,O,L){for(var U;O.length&&(U=g.last(O)).i<=L;)O.pop(),D.push(U.vs),L++;return L}function w(D){return function(O,L){return O.barycenter<L.barycenter?-1:O.barycenter>L.barycenter?1:D?L.i-O.i:O.i-L.i}}},function(j,_,u){var g=u(34),f=u(50).Graph;j.exports=E;function E(w,D,O){var L=T(w),U=new f({compound:!0}).setGraph({root:L}).setDefaultNodeLabel(function(V){return w.node(V)});return g.forEach(w.nodes(),function(V){var z=w.node(V),K=w.parent(V);(z.rank===D||z.minRank<=D&&D<=z.maxRank)&&(U.setNode(V),U.setParent(V,K||L),g.forEach(w[O](V),function(J){var he=J.v===V?J.w:J.v,ue=U.edge(he,V),de=g.isUndefined(ue)?0:ue.weight;U.setEdge(he,V,{weight:w.edge(J).weight+de})}),g.has(z,"minRank")&&U.setNode(V,{borderLeft:z.borderLeft[D],borderRight:z.borderRight[D]}))}),U}function T(w){for(var D;w.hasNode(D=g.uniqueId("_root")););return D}},function(j,_,u){var g=u(34);j.exports=f;function f(E,T,w){var D={},O;g.forEach(w,function(L){for(var U=E.parent(L),V,z;U;){if(V=E.parent(U),V?(z=D[V],D[V]=U):(z=O,O=U),z&&z!==U){T.setEdge(z,U);return}U=V}})}},function(j,_,u){"use strict";var g=u(34),f=u(44),E=u(485).positionX;j.exports=T;function T(D){D=f.asNonCompoundGraph(D),w(D),g.forEach(E(D),function(O,L){D.node(L).x=O})}function w(D){var O=f.buildLayerMatrix(D),L=D.graph().ranksep,U=0;g.forEach(O,function(V){var z=g.max(g.map(V,function(K){return D.node(K).height}));g.forEach(V,function(K){D.node(K).y=U+z/2}),U+=z+L})}},function(j,_,u){"use strict";var g=u(34),f=u(50).Graph,E=u(44);j.exports={positionX:ue,findType1Conflicts:T,findType2Conflicts:w,addConflict:O,hasConflict:L,verticalAlignment:U,horizontalCompaction:V,alignCoordinates:J,findSmallestWidthAlignment:K,balance:he};function T(le,re){var se={};function ye(Z,Ee){var k=0,Te=0,De=Z.length,Ue=g.last(Ee);return g.forEach(Ee,function(St,Ae){var Wt=D(le,St),At=Wt?le.node(Wt).order:De;(Wt||St===Ue)&&(g.forEach(Ee.slice(Te,Ae+1),function(mt){g.forEach(le.predecessors(mt),function(Dt){var Ke=le.node(Dt),Tt=Ke.order;(Tt<k||At<Tt)&&!(Ke.dummy&&le.node(mt).dummy)&&O(se,Dt,mt)})}),Te=Ae+1,k=At)}),Ee}return g.reduce(re,ye),se}function w(le,re){var se={};function ye(Ee,k,Te,De,Ue){var St;g.forEach(g.range(k,Te),function(Ae){St=Ee[Ae],le.node(St).dummy&&g.forEach(le.predecessors(St),function(Wt){var At=le.node(Wt);At.dummy&&(At.order<De||At.order>Ue)&&O(se,Wt,St)})})}function Z(Ee,k){var Te=-1,De,Ue=0;return g.forEach(k,function(St,Ae){if(le.node(St).dummy==="border"){var Wt=le.predecessors(St);Wt.length&&(De=le.node(Wt[0]).order,ye(k,Ue,Ae,Te,De),Ue=Ae,Te=De)}ye(k,Ue,k.length,De,Ee.length)}),k}return g.reduce(re,Z),se}function D(le,re){if(le.node(re).dummy)return g.find(le.predecessors(re),function(se){return le.node(se).dummy})}function O(le,re,se){if(re>se){var ye=re;re=se,se=ye}var Z=le[re];Z||(le[re]=Z={}),Z[se]=!0}function L(le,re,se){if(re>se){var ye=re;re=se,se=ye}return g.has(le[re],se)}function U(le,re,se,ye){var Z={},Ee={},k={};return g.forEach(re,function(Te){g.forEach(Te,function(De,Ue){Z[De]=De,Ee[De]=De,k[De]=Ue})}),g.forEach(re,function(Te){var De=-1;g.forEach(Te,function(Ue){var St=ye(Ue);if(St.length){St=g.sortBy(St,function(Dt){return k[Dt]});for(var Ae=(St.length-1)/2,Wt=Math.floor(Ae),At=Math.ceil(Ae);Wt<=At;++Wt){var mt=St[Wt];Ee[Ue]===Ue&&De<k[mt]&&!L(se,Ue,mt)&&(Ee[mt]=Ue,Ee[Ue]=Z[Ue]=Z[mt],De=k[mt])}}})}),{root:Z,align:Ee}}function V(le,re,se,ye,Z){var Ee={},k=z(le,re,se,Z),Te=Z?"borderLeft":"borderRight";function De(Ae,Wt){for(var At=k.nodes(),mt=At.pop(),Dt={};mt;)Dt[mt]?Ae(mt):(Dt[mt]=!0,At.push(mt),At=At.concat(Wt(mt))),mt=At.pop()}function Ue(Ae){Ee[Ae]=k.inEdges(Ae).reduce(function(Wt,At){return Math.max(Wt,Ee[At.v]+k.edge(At))},0)}function St(Ae){var Wt=k.outEdges(Ae).reduce(function(mt,Dt){return Math.min(mt,Ee[Dt.w]-k.edge(Dt))},Number.POSITIVE_INFINITY),At=le.node(Ae);Wt!==Number.POSITIVE_INFINITY&&At.borderType!==Te&&(Ee[Ae]=Math.max(Ee[Ae],Wt))}return De(Ue,k.predecessors.bind(k)),De(St,k.successors.bind(k)),g.forEach(ye,function(Ae){Ee[Ae]=Ee[se[Ae]]}),Ee}function z(le,re,se,ye){var Z=new f,Ee=le.graph(),k=de(Ee.nodesep,Ee.edgesep,ye);return g.forEach(re,function(Te){var De;g.forEach(Te,function(Ue){var St=se[Ue];if(Z.setNode(St),De){var Ae=se[De],Wt=Z.edge(Ae,St);Z.setEdge(Ae,St,Math.max(k(le,Ue,De),Wt||0))}De=Ue})}),Z}function K(le,re){return g.minBy(g.values(re),function(se){var ye=Number.NEGATIVE_INFINITY,Z=Number.POSITIVE_INFINITY;return g.forIn(se,function(Ee,k){var Te=ae(le,k)/2;ye=Math.max(Ee+Te,ye),Z=Math.min(Ee-Te,Z)}),ye-Z})}function J(le,re){var se=g.values(re),ye=g.min(se),Z=g.max(se);g.forEach(["u","d"],function(Ee){g.forEach(["l","r"],function(k){var Te=Ee+k,De=le[Te],Ue;if(De===re)return;var St=g.values(De);Ue=k==="l"?ye-g.min(St):Z-g.max(St),Ue&&(le[Te]=g.mapValues(De,function(Ae){return Ae+Ue}))})})}function he(le,re){return g.mapValues(le.ul,function(se,ye){if(re)return le[re.toLowerCase()][ye];var Z=g.sortBy(g.map(le,ye));return(Z[1]+Z[2])/2})}function ue(le){var re=E.buildLayerMatrix(le),se=g.merge(T(le,re),w(le,re)),ye={},Z;g.forEach(["u","d"],function(k){Z=k==="u"?re:g.values(re).reverse(),g.forEach(["l","r"],function(Te){Te==="r"&&(Z=g.map(Z,function(Ae){return g.values(Ae).reverse()}));var De=(k==="u"?le.predecessors:le.successors).bind(le),Ue=U(le,Z,se,De),St=V(le,Z,Ue.root,Ue.align,Te==="r");Te==="r"&&(St=g.mapValues(St,function(Ae){return-Ae})),ye[k+Te]=St})});var Ee=K(le,ye);return J(ye,Ee),he(ye,le.graph().align)}function de(le,re,se){return function(ye,Z,Ee){var k=ye.node(Z),Te=ye.node(Ee),De=0,Ue;if(De+=k.width/2,g.has(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":Ue=-k.width/2;break;case"r":Ue=k.width/2;break}if(Ue&&(De+=se?Ue:-Ue),Ue=0,De+=(k.dummy?re:le)/2,De+=(Te.dummy?re:le)/2,De+=Te.width/2,g.has(Te,"labelpos"))switch(Te.labelpos.toLowerCase()){case"l":Ue=Te.width/2;break;case"r":Ue=-Te.width/2;break}return Ue&&(De+=se?Ue:-Ue),Ue=0,De}}function ae(le,re){return le.node(re).width}},function(j,_,u){var g=u(34),f=u(44),E=u(50).Graph;j.exports={debugOrdering:T};function T(w){var D=f.buildLayerMatrix(w),O=new E({compound:!0,multigraph:!0}).setGraph({});return g.forEach(w.nodes(),function(L){O.setNode(L,{label:L}),O.setParent(L,"layer"+w.node(L).rank)}),g.forEach(w.edges(),function(L){O.setEdge(L.v,L.w,{},L.name)}),g.forEach(D,function(L,U){var V="layer"+U;O.setNode(V,{rank:"same"}),g.reduce(L,function(z,K){return O.setEdge(z,K,{style:"invis"}),K})}),O}},function(j,_){j.exports="0.8.5"},function(j,_){var u=j.exports={},g,f;function E(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?g=setTimeout:g=E}catch(ue){g=E}try{typeof clearTimeout=="function"?f=clearTimeout:f=T}catch(ue){f=T}})();function w(ue){if(g===setTimeout)return setTimeout(ue,0);if((g===E||!g)&&setTimeout)return g=setTimeout,setTimeout(ue,0);try{return g(ue,0)}catch(de){try{return g.call(null,ue,0)}catch(ae){return g.call(this,ue,0)}}}function D(ue){if(f===clearTimeout)return clearTimeout(ue);if((f===T||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(ue);try{return f(ue)}catch(de){try{return f.call(null,ue)}catch(ae){return f.call(this,ue)}}}var O=[],L=!1,U,V=-1;function z(){if(!L||!U)return;L=!1,U.length?O=U.concat(O):V=-1,O.length&&K()}function K(){if(L)return;var ue=w(z);L=!0;for(var de=O.length;de;){for(U=O,O=[];++V<de;)U&&U[V].run();V=-1,de=O.length}U=null,L=!1,D(ue)}u.nextTick=function(ue){var de=new Array(arguments.length-1);if(arguments.length>1)for(var ae=1;ae<arguments.length;ae++)de[ae-1]=arguments[ae];O.push(new J(ue,de)),O.length===1&&!L&&w(K)};function J(ue,de){this.fun=ue,this.array=de}J.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={};function he(){}u.on=he,u.addListener=he,u.once=he,u.off=he,u.removeListener=he,u.removeAllListeners=he,u.emit=he,u.prependListener=he,u.prependOnceListener=he,u.listeners=function(ue){return[]},u.binding=function(ue){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(ue){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(j,_){function u(g){if(Array.isArray(g))return g}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(g,f){var E=g==null?null:typeof Symbol!="undefined"&&g[Symbol.iterator]||g["@@iterator"];if(E==null)return;var T=[],w=!0,D=!1,O,L;try{for(E=E.call(g);!(w=(O=E.next()).done)&&!(T.push(O.value),f&&T.length===f);w=!0);}catch(U){D=!0,L=U}finally{try{!w&&E.return!=null&&E.return()}finally{if(D)throw L}}return T}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";var g=this&&this.__awaiter||function(ae,le,re,se){function ye(Z){return Z instanceof re?Z:new re(function(Ee){Ee(Z)})}return new(re||(re=Promise))(function(Z,Ee){function k(Ue){try{De(se.next(Ue))}catch(St){Ee(St)}}function Te(Ue){try{De(se.throw(Ue))}catch(St){Ee(St)}}function De(Ue){Ue.done?Z(Ue.value):ye(Ue.value).then(k,Te)}De((se=se.apply(ae,le||[])).next())})},f=this&&this.__generator||function(ae,le){var re={label:0,sent:function(){if(Z[0]&1)throw Z[1];return Z[1]},trys:[],ops:[]},se,ye,Z,Ee;return Ee={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(Ee[Symbol.iterator]=function(){return this}),Ee;function k(De){return function(Ue){return Te([De,Ue])}}function Te(De){if(se)throw new TypeError("Generator is already executing.");for(;re;)try{if(se=1,ye&&(Z=De[0]&2?ye.return:De[0]?ye.throw||((Z=ye.return)&&Z.call(ye),0):ye.next)&&!(Z=Z.call(ye,De[1])).done)return Z;(ye=0,Z)&&(De=[De[0]&2,Z.value]);switch(De[0]){case 0:case 1:Z=De;break;case 4:return re.label++,{value:De[1],done:!1};case 5:re.label++,ye=De[1],De=[0];continue;case 7:De=re.ops.pop(),re.trys.pop();continue;default:if(!(Z=re.trys,Z=Z.length>0&&Z[Z.length-1])&&(De[0]===6||De[0]===2)){re=0;continue}if(De[0]===3&&(!Z||De[1]>Z[0]&&De[1]<Z[3])){re.label=De[1];break}if(De[0]===6&&re.label<Z[1]){re.label=Z[1],Z=De;break}if(Z&&re.label<Z[2]){re.label=Z[2],re.ops.push(De);break}Z[2]&&re.ops.pop(),re.trys.pop();continue}De=le.call(ae,re)}catch(Ue){De=[6,Ue],ye=0}finally{se=Z=0}if(De[0]&5)throw De[1];return{value:De[0]?De[1]:void 0,done:!0}}},E=this&&this.__spreadArray||function(ae,le){for(var re=0,se=le.length,ye=ae.length;re<se;re++,ye++)ae[ye]=le[re];return ae};Object.defineProperty(_,"__esModule",{value:!0}),_.Container=void 0;var T=u(493),w=u(45),D=u(64),O=u(38),L=u(231),U=u(494),V=u(501),z=u(503),K=u(78),J=u(99),he=u(506),ue=u(507),de=function(){function ae(le){this._appliedMiddleware=[];var re=le||{};if(typeof re!="object")throw new Error(""+w.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(re.defaultScope===void 0)re.defaultScope=D.BindingScopeEnum.Transient;else if(re.defaultScope!==D.BindingScopeEnum.Singleton&&re.defaultScope!==D.BindingScopeEnum.Transient&&re.defaultScope!==D.BindingScopeEnum.Request)throw new Error(""+w.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(re.autoBindInjectable===void 0)re.autoBindInjectable=!1;else if(typeof re.autoBindInjectable!="boolean")throw new Error(""+w.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(re.skipBaseClassChecks===void 0)re.skipBaseClassChecks=!1;else if(typeof re.skipBaseClassChecks!="boolean")throw new Error(""+w.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:re.autoBindInjectable,defaultScope:re.defaultScope,skipBaseClassChecks:re.skipBaseClassChecks},this.id=K.id(),this._bindingDictionary=new ue.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new L.MetadataReader}return ae.merge=function(le,re){for(var se=[],ye=2;ye<arguments.length;ye++)se[ye-2]=arguments[ye];var Z=new ae,Ee=E([le,re],se).map(function(De){return U.getBindingDictionary(De)}),k=U.getBindingDictionary(Z);function Te(De,Ue){De.traverse(function(St,Ae){Ae.forEach(function(Wt){Ue.add(Wt.serviceIdentifier,Wt.clone())})})}return Ee.forEach(function(De){Te(De,k)}),Z},ae.prototype.load=function(){for(var le=[],re=0;re<arguments.length;re++)le[re]=arguments[re];for(var se=this._getContainerModuleHelpersFactory(),ye=0,Z=le;ye<Z.length;ye++){var Ee=Z[ye],k=se(Ee.id);Ee.registry(k.bindFunction,k.unbindFunction,k.isboundFunction,k.rebindFunction)}},ae.prototype.loadAsync=function(){for(var le=[],re=0;re<arguments.length;re++)le[re]=arguments[re];return g(this,void 0,void 0,function(){var se,ye,Z,Ee,k;return f(this,function(Te){switch(Te.label){case 0:se=this._getContainerModuleHelpersFactory(),ye=0,Z=le,Te.label=1;case 1:return ye<Z.length?(Ee=Z[ye],k=se(Ee.id),[4,Ee.registry(k.bindFunction,k.unbindFunction,k.isboundFunction,k.rebindFunction)]):[3,4];case 2:Te.sent(),Te.label=3;case 3:return ye++,[3,1];case 4:return[2]}})})},ae.prototype.unload=function(){for(var le=this,re=[],se=0;se<arguments.length;se++)re[se]=arguments[se];var ye=function(Ee){return function(k){return k.moduleId===Ee}};re.forEach(function(Z){var Ee=ye(Z.id);le._bindingDictionary.removeByCondition(Ee)})},ae.prototype.bind=function(le){var re=this.options.defaultScope||D.BindingScopeEnum.Transient,se=new T.Binding(le,re);return this._bindingDictionary.add(le,se),new z.BindingToSyntax(se)},ae.prototype.rebind=function(le){return this.unbind(le),this.bind(le)},ae.prototype.unbind=function(le){try{this._bindingDictionary.remove(le)}catch(re){throw new Error(w.CANNOT_UNBIND+" "+J.getServiceIdentifierAsString(le))}},ae.prototype.unbindAll=function(){this._bindingDictionary=new ue.Lookup},ae.prototype.isBound=function(le){var re=this._bindingDictionary.hasKey(le);return!re&&this.parent&&(re=this.parent.isBound(le)),re},ae.prototype.isBoundNamed=function(le,re){return this.isBoundTagged(le,O.NAMED_TAG,re)},ae.prototype.isBoundTagged=function(le,re,se){var ye=!1;if(this._bindingDictionary.hasKey(le)){var Z=this._bindingDictionary.get(le),Ee=U.createMockRequest(this,le,re,se);ye=Z.some(function(k){return k.constraint(Ee)})}return!ye&&this.parent&&(ye=this.parent.isBoundTagged(le,re,se)),ye},ae.prototype.snapshot=function(){this._snapshots.push(he.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},ae.prototype.restore=function(){var le=this._snapshots.pop();if(le===void 0)throw new Error(w.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=le.bindings,this._middleware=le.middleware},ae.prototype.createChild=function(le){var re=new ae(le||this.options);return re.parent=this,re},ae.prototype.applyMiddleware=function(){for(var le=[],re=0;re<arguments.length;re++)le[re]=arguments[re];this._appliedMiddleware=this._appliedMiddleware.concat(le);var se=this._middleware?this._middleware:this._planAndResolve();this._middleware=le.reduce(function(ye,Z){return Z(ye)},se)},ae.prototype.applyCustomMetadataReader=function(le){this._metadataReader=le},ae.prototype.get=function(le){return this._get(!1,!1,D.TargetTypeEnum.Variable,le)},ae.prototype.getTagged=function(le,re,se){return this._get(!1,!1,D.TargetTypeEnum.Variable,le,re,se)},ae.prototype.getNamed=function(le,re){return this.getTagged(le,O.NAMED_TAG,re)},ae.prototype.getAll=function(le){return this._get(!0,!0,D.TargetTypeEnum.Variable,le)},ae.prototype.getAllTagged=function(le,re,se){return this._get(!1,!0,D.TargetTypeEnum.Variable,le,re,se)},ae.prototype.getAllNamed=function(le,re){return this.getAllTagged(le,O.NAMED_TAG,re)},ae.prototype.resolve=function(le){var re=this.createChild();return re.bind(le).toSelf(),this._appliedMiddleware.forEach(function(se){re.applyMiddleware(se)}),re.get(le)},ae.prototype._getContainerModuleHelpersFactory=function(){var le=this,re=function(Te,De){Te._binding.moduleId=De},se=function(Te){return function(De){var Ue=le.bind.bind(le),St=Ue(De);return re(St,Te),St}},ye=function(Te){return function(De){var Ue=le.unbind.bind(le);Ue(De)}},Z=function(Te){return function(De){var Ue=le.isBound.bind(le);return Ue(De)}},Ee=function(Te){return function(De){var Ue=le.rebind.bind(le),St=Ue(De);return re(St,Te),St}};return function(k){return{bindFunction:se(k),isboundFunction:Z(k),rebindFunction:Ee(k),unbindFunction:ye(k)}}},ae.prototype._get=function(le,re,se,ye,Z,Ee){var k=null,Te={avoidConstraints:le,contextInterceptor:function(Ue){return Ue},isMultiInject:re,key:Z,serviceIdentifier:ye,targetType:se,value:Ee};if(this._middleware){if(k=this._middleware(Te),k==null)throw new Error(w.INVALID_MIDDLEWARE_RETURN)}else k=this._planAndResolve()(Te);return k},ae.prototype._planAndResolve=function(){var le=this;return function(re){var se=U.plan(le._metadataReader,le,re.isMultiInject,re.targetType,re.serviceIdentifier,re.key,re.value,re.avoidConstraints);se=re.contextInterceptor(se);var ye=V.resolve(se);return ye}},ae}();_.Container=de},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Binding=void 0;var g=u(64),f=u(78),E=function(){function T(w,D){this.id=f.id(),this.activated=!1,this.serviceIdentifier=w,this.scope=D,this.type=g.BindingTypeEnum.Invalid,this.constraint=function(O){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return T.prototype.clone=function(){var w=new T(this.serviceIdentifier,this.scope);return w.activated=w.scope===g.BindingScopeEnum.Singleton?this.activated:!1,w.implementationType=this.implementationType,w.dynamicValue=this.dynamicValue,w.scope=this.scope,w.type=this.type,w.factory=this.factory,w.provider=this.provider,w.constraint=this.constraint,w.onActivation=this.onActivation,w.cache=this.cache,w},T}();_.Binding=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getBindingDictionary=_.createMockRequest=_.plan=void 0;var g=u(495),f=u(45),E=u(64),T=u(38),w=u(232),D=u(99),O=u(496),L=u(52),U=u(497),V=u(498),z=u(500),K=u(234);function J(ye){return ye._bindingDictionary}_.getBindingDictionary=J;function he(ye,Z,Ee,k,Te,De){var Ue=ye?T.MULTI_INJECT_TAG:T.INJECT_TAG,St=new L.Metadata(Ue,Ee),Ae=new K.Target(Z,k,Ee,St);if(Te!==void 0){var Wt=new L.Metadata(Te,De);Ae.metadata.push(Wt)}return Ae}function ue(ye,Z,Ee,k,Te){var De=le(Ee.container,Te.serviceIdentifier),Ue=[];return De.length===g.BindingCount.NoBindingsAvailable&&Ee.container.options.autoBindInjectable&&typeof Te.serviceIdentifier=="function"&&ye.getConstructorMetadata(Te.serviceIdentifier).compilerGeneratedMetadata&&(Ee.container.bind(Te.serviceIdentifier).toSelf(),De=le(Ee.container,Te.serviceIdentifier)),Z?Ue=De:Ue=De.filter(function(St){var Ae=new z.Request(St.serviceIdentifier,Ee,k,St,Te);return St.constraint(Ae)}),de(Te.serviceIdentifier,Ue,Te,Ee.container),Ue}function de(ye,Z,Ee,k){switch(Z.length){case g.BindingCount.NoBindingsAvailable:if(Ee.isOptional())return Z;var Te=D.getServiceIdentifierAsString(ye),De=f.NOT_REGISTERED;throw De+=D.listMetadataForTarget(Te,Ee),De+=D.listRegisteredBindingsForServiceIdentifier(k,Te,le),new Error(De);case g.BindingCount.OnlyOneBindingAvailable:if(!Ee.isArray())return Z;case g.BindingCount.MultipleBindingsAvailable:default:if(Ee.isArray())return Z;var Te=D.getServiceIdentifierAsString(ye),De=f.AMBIGUOUS_MATCH+" "+Te;throw De+=D.listRegisteredBindingsForServiceIdentifier(k,Te,le),new Error(De)}}function ae(ye,Z,Ee,k,Te,De){var Ue,St;if(Te===null){Ue=ue(ye,Z,k,null,De),St=new z.Request(Ee,k,null,Ue,De);var Ae=new U.Plan(k,St);k.addPlan(Ae)}else Ue=ue(ye,Z,k,Te,De),St=Te.addChildRequest(De.serviceIdentifier,Ue,De);Ue.forEach(function(Wt){var At=null;if(De.isArray())At=St.addChildRequest(Wt.serviceIdentifier,Wt,De);else{if(Wt.cache)return;At=St}if(Wt.type===E.BindingTypeEnum.Instance&&Wt.implementationType!==null){var mt=V.getDependencies(ye,Wt.implementationType);if(!k.container.options.skipBaseClassChecks){var Dt=V.getBaseClassDependencyCount(ye,Wt.implementationType);if(mt.length<Dt){var Ke=f.ARGUMENTS_LENGTH_MISMATCH(V.getFunctionName(Wt.implementationType));throw new Error(Ke)}}mt.forEach(function(Tt){ae(ye,!1,Tt.serviceIdentifier,k,At,Tt)})}})}function le(ye,Z){var Ee=[],k=J(ye);return k.hasKey(Z)?Ee=k.get(Z):ye.parent!==null&&(Ee=le(ye.parent,Z)),Ee}function re(ye,Z,Ee,k,Te,De,Ue,St){St===void 0&&(St=!1);var Ae=new O.Context(Z),Wt=he(Ee,k,Te,"",De,Ue);try{return ae(ye,St,Te,Ae,null,Wt),Ae}catch(At){throw w.isStackOverflowExeption(At)&&(Ae.plan&&D.circularDependencyToException(Ae.plan.rootRequest)),At}}_.plan=re;function se(ye,Z,Ee,k){var Te=new K.Target(E.TargetTypeEnum.Variable,"",Z,new L.Metadata(Ee,k)),De=new O.Context(ye),Ue=new z.Request(Z,De,null,[],Te);return Ue}_.createMockRequest=se},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BindingCount=void 0;var g={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};_.BindingCount=g},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Context=void 0;var g=u(78),f=function(){function E(T){this.id=g.id(),this.container=T}return E.prototype.addPlan=function(T){this.plan=T},E.prototype.setCurrentRequest=function(T){this.currentRequest=T},E}();_.Context=f},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Plan=void 0;var g=function(){function f(E,T){this.parentContext=E,this.rootRequest=T}return f}();_.Plan=g},function(j,_,u){"use strict";var g=this&&this.__spreadArray||function(ue,de){for(var ae=0,le=de.length,re=ue.length;ae<le;ae++,re++)ue[re]=de[ae];return ue};Object.defineProperty(_,"__esModule",{value:!0}),_.getFunctionName=_.getBaseClassDependencyCount=_.getDependencies=void 0;var f=u(233),E=u(45),T=u(64),w=u(38),D=u(99);Object.defineProperty(_,"getFunctionName",{enumerable:!0,get:function(){return D.getFunctionName}});var O=u(234);function L(ue,de){var ae=D.getFunctionName(de),le=U(ue,ae,de,!1);return le}_.getDependencies=L;function U(ue,de,ae,le){var re=ue.getConstructorMetadata(ae),se=re.compilerGeneratedMetadata;if(se===void 0){var ye=E.MISSING_INJECTABLE_ANNOTATION+" "+de+".";throw new Error(ye)}var Z=re.userGeneratedMetadata,Ee=Object.keys(Z),k=ae.length===0&&Ee.length>0,Te=Ee.length>ae.length,De=k||Te?Ee.length:ae.length,Ue=z(le,de,se,Z,De),St=K(ue,ae),Ae=g(g([],Ue),St);return Ae}function V(ue,de,ae,le,re){var se=re[ue.toString()]||[],ye=he(se),Z=ye.unmanaged!==!0,Ee=le[ue],k=ye.inject||ye.multiInject;if(Ee=k||Ee,Ee instanceof f.LazyServiceIdentifer&&(Ee=Ee.unwrap()),Z){var Te=Ee===Object,De=Ee===Function,Ue=Ee===void 0,St=Te||De||Ue;if(!de&&St){var Ae=E.MISSING_INJECT_ANNOTATION+" argument "+ue+" in class "+ae+".";throw new Error(Ae)}var Wt=new O.Target(T.TargetTypeEnum.ConstructorArgument,ye.targetName,Ee);return Wt.metadata=se,Wt}return null}function z(ue,de,ae,le,re){for(var se=[],ye=0;ye<re;ye++){var Z=ye,Ee=V(Z,ue,de,ae,le);Ee!==null&&se.push(Ee)}return se}function K(ue,de){for(var ae=ue.getPropertiesMetadata(de),le=[],re=Object.keys(ae),se=0,ye=re;se<ye.length;se++){var Z=ye[se],Ee=ae[Z],k=he(ae[Z]),Te=k.targetName||Z,De=k.inject||k.multiInject,Ue=new O.Target(T.TargetTypeEnum.ClassProperty,Te,De);Ue.metadata=Ee,le.push(Ue)}var St=Object.getPrototypeOf(de.prototype).constructor;if(St!==Object){var Ae=K(ue,St);le=g(g([],le),Ae)}return le}function J(ue,de){var ae=Object.getPrototypeOf(de.prototype).constructor;if(ae!==Object){var le=D.getFunctionName(ae),re=U(ue,le,ae,!0),se=re.map(function(Ee){return Ee.metadata.filter(function(k){return k.key===w.UNMANAGED_TAG})}),ye=[].concat.apply([],se).length,Z=re.length-ye;return Z>0?Z:J(ue,ae)}else return 0}_.getBaseClassDependencyCount=J;function he(ue){var de={};return ue.forEach(function(ae){de[ae.key.toString()]=ae.value}),{inject:de[w.INJECT_TAG],multiInject:de[w.MULTI_INJECT_TAG],targetName:de[w.NAME_TAG],unmanaged:de[w.UNMANAGED_TAG]}}},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.QueryableString=void 0;var g=function(){function f(E){this.str=E}return f.prototype.startsWith=function(E){return this.str.indexOf(E)===0},f.prototype.endsWith=function(E){var T="",w=E.split("").reverse().join("");return T=this.str.split("").reverse().join(""),this.startsWith.call({str:T},w)},f.prototype.contains=function(E){return this.str.indexOf(E)!==-1},f.prototype.equals=function(E){return this.str===E},f.prototype.value=function(){return this.str},f}();_.QueryableString=g},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Request=void 0;var g=u(78),f=function(){function E(T,w,D,O,L){this.id=g.id(),this.serviceIdentifier=T,this.parentContext=w,this.parentRequest=D,this.target=L,this.childRequests=[],this.bindings=Array.isArray(O)?O:[O],this.requestScope=D===null?new Map:null}return E.prototype.addChildRequest=function(T,w,D){var O=new E(T,this.parentContext,this,w,D);return this.childRequests.push(O),O},E}();_.Request=f},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.resolve=void 0;var g=u(45),f=u(64),E=u(232),T=u(99),w=u(502),D=function(V,z,K){try{return K()}catch(J){throw E.isStackOverflowExeption(J)?new Error(g.CIRCULAR_DEPENDENCY_IN_FACTORY(V,z.toString())):J}},O=function U(V){return function(z){z.parentContext.setCurrentRequest(z);var K=z.bindings,J=z.childRequests,he=z.target&&z.target.isArray(),ue=!z.parentRequest||!z.parentRequest.target||!z.target||!z.parentRequest.target.matchesArray(z.target.serviceIdentifier);if(he&&ue)return J.map(function(ye){var Z=U(V);return Z(ye)});var de=null;if(z.target.isOptional()&&K.length===0)return;var ae=K[0],le=ae.scope===f.BindingScopeEnum.Singleton,re=ae.scope===f.BindingScopeEnum.Request;if(le&&ae.activated)return ae.cache;if(re&&V!==null&&V.has(ae.id))return V.get(ae.id);if(ae.type===f.BindingTypeEnum.ConstantValue)de=ae.cache,ae.activated=!0;else if(ae.type===f.BindingTypeEnum.Function)de=ae.cache,ae.activated=!0;else if(ae.type===f.BindingTypeEnum.Constructor)de=ae.implementationType;else if(ae.type===f.BindingTypeEnum.DynamicValue&&ae.dynamicValue!==null)de=D("toDynamicValue",ae.serviceIdentifier,function(){return ae.dynamicValue(z.parentContext)});else if(ae.type===f.BindingTypeEnum.Factory&&ae.factory!==null)de=D("toFactory",ae.serviceIdentifier,function(){return ae.factory(z.parentContext)});else if(ae.type===f.BindingTypeEnum.Provider&&ae.provider!==null)de=D("toProvider",ae.serviceIdentifier,function(){return ae.provider(z.parentContext)});else if(ae.type===f.BindingTypeEnum.Instance&&ae.implementationType!==null)de=w.resolveInstance(ae.implementationType,J,U(V));else{var se=T.getServiceIdentifierAsString(z.serviceIdentifier);throw new Error(g.INVALID_BINDING_TYPE+" "+se)}return typeof ae.onActivation=="function"&&(de=ae.onActivation(z.parentContext,de)),le&&(ae.cache=de,ae.activated=!0),re&&V!==null&&!V.has(ae.id)&&V.set(ae.id,de),de}};function L(U){var V=O(U.plan.rootRequest.requestScope);return V(U.plan.rootRequest)}_.resolve=L},function(j,_,u){"use strict";var g=this&&this.__spreadArray||function(U,V){for(var z=0,K=V.length,J=U.length;z<K;z++,J++)U[J]=V[z];return U};Object.defineProperty(_,"__esModule",{value:!0}),_.resolveInstance=void 0;var f=u(45),E=u(64),T=u(38);function w(U,V,z){var K=V.filter(function(he){return he.target!==null&&he.target.type===E.TargetTypeEnum.ClassProperty}),J=K.map(z);return K.forEach(function(he,ue){var de="";de=he.target.name.value();var ae=J[ue];U[de]=ae}),U}function D(U,V){return new(U.bind.apply(U,g([void 0],V)))}function O(U,V){if(Reflect.hasMetadata(T.POST_CONSTRUCT,U)){var z=Reflect.getMetadata(T.POST_CONSTRUCT,U);try{V[z.value]()}catch(K){throw new Error(f.POST_CONSTRUCT_ERROR(U.name,K.message))}}}function L(U,V,z){var K=null;if(V.length>0){var J=V.filter(function(ue){return ue.target!==null&&ue.target.type===E.TargetTypeEnum.ConstructorArgument}),he=J.map(z);K=D(U,he),K=w(K,V,z)}else K=new U;return O(U,K),K}_.resolveInstance=L},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BindingToSyntax=void 0;var g=u(45),f=u(64),E=u(504),T=u(235),w=function(){function D(O){this._binding=O}return D.prototype.to=function(O){return this._binding.type=f.BindingTypeEnum.Instance,this._binding.implementationType=O,new E.BindingInWhenOnSyntax(this._binding)},D.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+g.INVALID_TO_SELF_VALUE);var O=this._binding.serviceIdentifier;return this.to(O)},D.prototype.toConstantValue=function(O){return this._binding.type=f.BindingTypeEnum.ConstantValue,this._binding.cache=O,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=f.BindingScopeEnum.Singleton,new T.BindingWhenOnSyntax(this._binding)},D.prototype.toDynamicValue=function(O){return this._binding.type=f.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=O,this._binding.implementationType=null,new E.BindingInWhenOnSyntax(this._binding)},D.prototype.toConstructor=function(O){return this._binding.type=f.BindingTypeEnum.Constructor,this._binding.implementationType=O,this._binding.scope=f.BindingScopeEnum.Singleton,new T.BindingWhenOnSyntax(this._binding)},D.prototype.toFactory=function(O){return this._binding.type=f.BindingTypeEnum.Factory,this._binding.factory=O,this._binding.scope=f.BindingScopeEnum.Singleton,new T.BindingWhenOnSyntax(this._binding)},D.prototype.toFunction=function(O){if(typeof O!="function")throw new Error(g.INVALID_FUNCTION_BINDING);var L=this.toConstantValue(O);return this._binding.type=f.BindingTypeEnum.Function,this._binding.scope=f.BindingScopeEnum.Singleton,L},D.prototype.toAutoFactory=function(O){return this._binding.type=f.BindingTypeEnum.Factory,this._binding.factory=function(L){var U=function(){return L.container.get(O)};return U},this._binding.scope=f.BindingScopeEnum.Singleton,new T.BindingWhenOnSyntax(this._binding)},D.prototype.toProvider=function(O){return this._binding.type=f.BindingTypeEnum.Provider,this._binding.provider=O,this._binding.scope=f.BindingScopeEnum.Singleton,new T.BindingWhenOnSyntax(this._binding)},D.prototype.toService=function(O){this.toDynamicValue(function(L){return L.container.get(O)})},D}();_.BindingToSyntax=w},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BindingInWhenOnSyntax=void 0;var g=u(505),f=u(166),E=u(167),T=function(){function w(D){this._binding=D,this._bindingWhenSyntax=new E.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new f.BindingOnSyntax(this._binding),this._bindingInSyntax=new g.BindingInSyntax(D)}return w.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},w.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},w.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},w.prototype.when=function(D){return this._bindingWhenSyntax.when(D)},w.prototype.whenTargetNamed=function(D){return this._bindingWhenSyntax.whenTargetNamed(D)},w.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},w.prototype.whenTargetTagged=function(D,O){return this._bindingWhenSyntax.whenTargetTagged(D,O)},w.prototype.whenInjectedInto=function(D){return this._bindingWhenSyntax.whenInjectedInto(D)},w.prototype.whenParentNamed=function(D){return this._bindingWhenSyntax.whenParentNamed(D)},w.prototype.whenParentTagged=function(D,O){return this._bindingWhenSyntax.whenParentTagged(D,O)},w.prototype.whenAnyAncestorIs=function(D){return this._bindingWhenSyntax.whenAnyAncestorIs(D)},w.prototype.whenNoAncestorIs=function(D){return this._bindingWhenSyntax.whenNoAncestorIs(D)},w.prototype.whenAnyAncestorNamed=function(D){return this._bindingWhenSyntax.whenAnyAncestorNamed(D)},w.prototype.whenAnyAncestorTagged=function(D,O){return this._bindingWhenSyntax.whenAnyAncestorTagged(D,O)},w.prototype.whenNoAncestorNamed=function(D){return this._bindingWhenSyntax.whenNoAncestorNamed(D)},w.prototype.whenNoAncestorTagged=function(D,O){return this._bindingWhenSyntax.whenNoAncestorTagged(D,O)},w.prototype.whenAnyAncestorMatches=function(D){return this._bindingWhenSyntax.whenAnyAncestorMatches(D)},w.prototype.whenNoAncestorMatches=function(D){return this._bindingWhenSyntax.whenNoAncestorMatches(D)},w.prototype.onActivation=function(D){return this._bindingOnSyntax.onActivation(D)},w}();_.BindingInWhenOnSyntax=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BindingInSyntax=void 0;var g=u(64),f=u(235),E=function(){function T(w){this._binding=w}return T.prototype.inRequestScope=function(){return this._binding.scope=g.BindingScopeEnum.Request,new f.BindingWhenOnSyntax(this._binding)},T.prototype.inSingletonScope=function(){return this._binding.scope=g.BindingScopeEnum.Singleton,new f.BindingWhenOnSyntax(this._binding)},T.prototype.inTransientScope=function(){return this._binding.scope=g.BindingScopeEnum.Transient,new f.BindingWhenOnSyntax(this._binding)},T}();_.BindingInSyntax=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ContainerSnapshot=void 0;var g=function(){function f(){}return f.of=function(E,T){var w=new f;return w.bindings=E,w.middleware=T,w},f}();_.ContainerSnapshot=g},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Lookup=void 0;var g=u(45),f=function(){function E(){this._map=new Map}return E.prototype.getMap=function(){return this._map},E.prototype.add=function(T,w){if(T==null)throw new Error(g.NULL_ARGUMENT);if(w==null)throw new Error(g.NULL_ARGUMENT);var D=this._map.get(T);D!==void 0?(D.push(w),this._map.set(T,D)):this._map.set(T,[w])},E.prototype.get=function(T){if(T==null)throw new Error(g.NULL_ARGUMENT);var w=this._map.get(T);if(w!==void 0)return w;throw new Error(g.KEY_NOT_FOUND)},E.prototype.remove=function(T){if(T==null)throw new Error(g.NULL_ARGUMENT);if(!this._map.delete(T))throw new Error(g.KEY_NOT_FOUND)},E.prototype.removeByCondition=function(T){var w=this;this._map.forEach(function(D,O){var L=D.filter(function(U){return!T(U)});L.length>0?w._map.set(O,L):w._map.delete(O)})},E.prototype.hasKey=function(T){if(T==null)throw new Error(g.NULL_ARGUMENT);return this._map.has(T)},E.prototype.clone=function(){var T=new E;return this._map.forEach(function(w,D){w.forEach(function(O){return T.add(D,O.clone())})}),T},E.prototype.traverse=function(T){this._map.forEach(function(w,D){T(D,w)})},E}();_.Lookup=f},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.AsyncContainerModule=_.ContainerModule=void 0;var g=u(78),f=function(){function T(w){this.id=g.id(),this.registry=w}return T}();_.ContainerModule=f;var E=function(){function T(w){this.id=g.id(),this.registry=w}return T}();_.AsyncContainerModule=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.injectable=void 0;var g=u(45),f=u(38);function E(){return function(T){if(Reflect.hasOwnMetadata(f.PARAM_TYPES,T))throw new Error(g.DUPLICATED_INJECTABLE_DECORATOR);var w=Reflect.getMetadata(f.DESIGN_PARAM_TYPES,T)||[];return Reflect.defineMetadata(f.PARAM_TYPES,w,T),T}}_.injectable=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.tagged=void 0;var g=u(52),f=u(68);function E(T,w){return function(D,O,L){var U=new g.Metadata(T,w);typeof L=="number"?f.tagParameter(D,O,L,U):f.tagProperty(D,O,U)}}_.tagged=E},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.named=void 0;var g=u(38),f=u(52),E=u(68);function T(w){return function(D,O,L){var U=new f.Metadata(g.NAMED_TAG,w);typeof L=="number"?E.tagParameter(D,O,L,U):E.tagProperty(D,O,U)}}_.named=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.optional=void 0;var g=u(38),f=u(52),E=u(68);function T(){return function(w,D,O){var L=new f.Metadata(g.OPTIONAL_TAG,!0);typeof O=="number"?E.tagParameter(w,D,O,L):E.tagProperty(w,D,L)}}_.optional=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.unmanaged=void 0;var g=u(38),f=u(52),E=u(68);function T(){return function(w,D,O){var L=new f.Metadata(g.UNMANAGED_TAG,!0);E.tagParameter(w,D,O,L)}}_.unmanaged=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.multiInject=void 0;var g=u(38),f=u(52),E=u(68);function T(w){return function(D,O,L){var U=new f.Metadata(g.MULTI_INJECT_TAG,w);typeof L=="number"?E.tagParameter(D,O,L,U):E.tagProperty(D,O,U)}}_.multiInject=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.targetName=void 0;var g=u(38),f=u(52),E=u(68);function T(w){return function(D,O,L){var U=new f.Metadata(g.NAME_TAG,w);E.tagParameter(D,O,L,U)}}_.targetName=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.postConstruct=void 0;var g=u(45),f=u(38),E=u(52);function T(){return function(w,D,O){var L=new E.Metadata(f.POST_CONSTRUCT,D);if(Reflect.hasOwnMetadata(f.POST_CONSTRUCT,w.constructor))throw new Error(g.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(f.POST_CONSTRUCT,L,w.constructor)}}_.postConstruct=T},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.multiBindToService=void 0;var g=function(E){return function(T){return function(){for(var w=[],D=0;D<arguments.length;D++)w[D]=arguments[D];return w.forEach(function(O){return E.bind(O).toService(T)})}}};_.multiBindToService=g},function(j,_){function u(g,f){return j.exports=u=Object.setPrototypeOf||function(T,w){return T.__proto__=w,T},j.exports.default=j.exports,j.exports.__esModule=!0,u(g,f)}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_,u){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var g=Symbol.for("INJECTION");function f(O,L,U,V){function z(){return V&&!Reflect.hasMetadata(g,this,L)&&Reflect.defineMetadata(g,U(),this,L),Reflect.hasMetadata(g,this,L)?Reflect.getMetadata(g,this,L):U()}function K(J){Reflect.defineMetadata(g,J,this,L)}Object.defineProperty(O,L,{configurable:!0,enumerable:!0,get:z,set:K})}function E(O,L){return function(U){return function(V,z){var K=function(){return O.get(U)};f(V,z,K,L)}}}_.makePropertyInjectDecorator=E;function T(O,L){return function(U,V){return function(z,K){var J=function(){return O.getNamed(U,V)};f(z,K,J,L)}}}_.makePropertyInjectNamedDecorator=T;function w(O,L){return function(U,V,z){return function(K,J){var he=function(){return O.getTagged(U,V,z)};f(K,J,he,L)}}}_.makePropertyInjectTaggedDecorator=w;function D(O,L){return function(U){return function(V,z){var K=function(){return O.getAll(U)};f(V,z,K,L)}}}_.makePropertyMultiInjectDecorator=D},function(j,_,u){var g=u(230);function f(E){if(Array.isArray(E))return g(E)}j.exports=f,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(g){if(typeof Symbol!="undefined"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}j.exports=u,j.exports.default=j.exports,j.exports.__esModule=!0},function(j,_){j.exports=u;function u(g){var f=new Float32Array(2);return f[0]=g[0],f[1]=g[1],f}},function(j,_){j.exports=u;function u(g,f){var E=new Float32Array(2);return E[0]=g,E[1]=f,E}},function(j,_){j.exports=u;function u(g,f){return g[0]=f[0],g[1]=f[1],g}},function(j,_,u){j.exports=f;var g=u(252);function f(E,T){var w=E[0],D=E[1],O=T[0],L=T[1];return Math.abs(w-O)<=g*Math.max(1,Math.abs(w),Math.abs(O))&&Math.abs(D-L)<=g*Math.max(1,Math.abs(D),Math.abs(L))}},function(j,_){j.exports=u;function u(g,f){return g[0]===f[0]&&g[1]===f[1]}},function(j,_,u){j.exports=u(168)},function(j,_,u){j.exports=u(256)},function(j,_,u){j.exports=u(257)},function(j,_){j.exports=u;function u(g,f){return g[0]=1/f[0],g[1]=1/f[1],g}},function(j,_){j.exports=u;function u(g,f,E){return g[0]=Math.min(f[0],E[0]),g[1]=Math.min(f[1],E[1]),g}},function(j,_){j.exports=u;function u(g,f,E){return g[0]=Math.max(f[0],E[0]),g[1]=Math.max(f[1],E[1]),g}},function(j,_){j.exports=u;function u(g,f,E){var T=Math.cos(E),w=Math.sin(E),D=f[0],O=f[1];return g[0]=D*T-O*w,g[1]=D*w+O*T,g}},function(j,_){j.exports=u;function u(g,f){return g[0]=Math.floor(f[0]),g[1]=Math.floor(f[1]),g}},function(j,_){j.exports=u;function u(g,f){return g[0]=Math.ceil(f[0]),g[1]=Math.ceil(f[1]),g}},function(j,_){j.exports=u;function u(g,f){return g[0]=Math.round(f[0]),g[1]=Math.round(f[1]),g}},function(j,_){j.exports=u;function u(g,f,E){return g[0]=f[0]*E,g[1]=f[1]*E,g}},function(j,_){j.exports=u;function u(g,f,E,T){return g[0]=f[0]+E[0]*T,g[1]=f[1]+E[1]*T,g}},function(j,_,u){j.exports=u(258)},function(j,_,u){j.exports=u(259)},function(j,_,u){j.exports=u(260)},function(j,_,u){j.exports=u(261)},function(j,_){j.exports=u;function u(g,f){return g[0]=-f[0],g[1]=-f[1],g}},function(j,_){j.exports=u;function u(g,f,E){var T=f[0]*E[1]-f[1]*E[0];return g[0]=g[1]=0,g[2]=T,g}},function(j,_){j.exports=u;function u(g,f,E,T){var w=f[0],D=f[1];return g[0]=w+T*(E[0]-w),g[1]=D+T*(E[1]-D),g}},function(j,_){j.exports=u;function u(g,f){f=f||1;var E=Math.random()*2*Math.PI;return g[0]=Math.cos(E)*f,g[1]=Math.sin(E)*f,g}},function(j,_){j.exports=u;function u(g,f,E){var T=f[0],w=f[1];return g[0]=E[0]*T+E[2]*w,g[1]=E[1]*T+E[3]*w,g}},function(j,_){j.exports=u;function u(g,f,E){var T=f[0],w=f[1];return g[0]=E[0]*T+E[2]*w+E[4],g[1]=E[1]*T+E[3]*w+E[5],g}},function(j,_){j.exports=u;function u(g,f,E){var T=f[0],w=f[1];return g[0]=E[0]*T+E[3]*w+E[6],g[1]=E[1]*T+E[4]*w+E[7],g}},function(j,_){j.exports=u;function u(g,f,E){var T=f[0],w=f[1];return g[0]=E[0]*T+E[4]*w+E[12],g[1]=E[1]*T+E[5]*w+E[13],g}},function(j,_,u){j.exports=f;var g=u(253)();function f(E,T,w,D,O,L){var U,V;for(T||(T=2),w||(w=0),D?V=Math.min(D*T+w,E.length):V=E.length,U=w;U<V;U+=T)g[0]=E[U],g[1]=E[U+1],O(g,g,L),E[U]=g[0],E[U+1]=g[1];return E}},function(j,_){j.exports=u;function u(g,f,E){var T=f[0]*f[0]+f[1]*f[1];if(T>E*E){var w=Math.sqrt(T);g[0]=f[0]/w*E,g[1]=f[1]/w*E}else g[0]=f[0],g[1]=f[1];return g}},,,,,,,function(j,_,u){"use strict";var g=u(18),f=u(46),E=u(1),T=u.n(E),w=u(32),D=u.n(w),O=u(39),L=E.forwardRef(function(U,V){var z=U.className,K=U.component,J=U.viewBox,he=U.spin,ue=U.rotate,de=U.tabIndex,ae=U.onClick,le=U.children,re=Object(f.a)(U,["className","component","viewBox","spin","rotate","tabIndex","onClick","children"]);Object(O.g)(Boolean(K||le),"Should have `component` prop or `children`."),Object(O.f)();var se=D()("anticon",z),ye=D()({"anticon-spin":!!he}),Z=ue?{msTransform:"rotate(".concat(ue,"deg)"),transform:"rotate(".concat(ue,"deg)")}:void 0,Ee=Object(g.a)(Object(g.a)({},O.e),{},{className:ye,style:Z,viewBox:J});J||delete Ee.viewBox;var k=function(){return K?E.createElement(K,Object.assign({},Ee),le):le?(Object(O.g)(Boolean(J)||E.Children.count(le)===1&&E.isValidElement(le)&&E.Children.only(le).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),E.createElement("svg",Object.assign({},Ee,{viewBox:J}),le)):null},Te=de;return Te===void 0&&ae&&(Te=-1),E.createElement("span",Object.assign({role:"img"},re,{ref:V,tabIndex:Te,onClick:ae,className:se}),k())});L.displayName="AntdIcon",_.a=L},function(j,_,u){"use strict";var g=u(21),f=u(27),E=u(22),T=u(1),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},D=w,O=u(35),L=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:D}))};L.displayName="CloseOutlined";var U=T.forwardRef(L),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},z=V,K=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:z}))};K.displayName="CheckCircleOutlined";var J=T.forwardRef(K),he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},ue=he,de=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:ue}))};de.displayName="ExclamationCircleOutlined";var ae=T.forwardRef(de),le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},re=le,se=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:re}))};se.displayName="InfoCircleOutlined";var ye=T.forwardRef(se),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},Ee=Z,k=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:Ee}))};k.displayName="CloseCircleOutlined";var Te=T.forwardRef(k),De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},Ue=De,St=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:Ue}))};St.displayName="CheckCircleFilled";var Ae=T.forwardRef(St),Wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},At=Wt,mt=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:At}))};mt.displayName="ExclamationCircleFilled";var Dt=T.forwardRef(mt),Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Tt=Ke,Gt=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:Tt}))};Gt.displayName="InfoCircleFilled";var gn=T.forwardRef(Gt),Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},Ht=Ut,Rt=function(Jn,Ln){return T.createElement(O.a,Object.assign({},Jn,{ref:Ln,icon:Ht}))};Rt.displayName="CloseCircleFilled";var Fe=T.forwardRef(Rt),me=u(70),ze=u(32),Be=u.n(ze),ut=u(562);function xt(Ce){return Object.keys(Ce).reduce(function(Jn,Ln){return(Ln.substr(0,5)==="data-"||Ln.substr(0,5)==="aria-"||Ln==="role")&&Ln.substr(0,7)!=="data-__"&&(Jn[Ln]=Ce[Ln]),Jn},{})}var $t=u(57),Qt=u(58),on=u(59),Mn=u(60),Nn=function(Ce){Object(on.a)(Ln,Ce);var Jn=Object(Mn.a)(Ln);function Ln(){var yr;return Object($t.a)(this,Ln),yr=Jn.apply(this,arguments),yr.state={error:void 0,info:{componentStack:""}},yr}return Object(Qt.a)(Ln,[{key:"componentDidCatch",value:function(Un,$e){this.setState({error:Un,info:$e})}},{key:"render",value:function(){var Un=this.props,$e=Un.message,Re=Un.description,Ye=Un.children,tt=this.state,gt=tt.error,kt=tt.info,Pe=kt&&kt.componentStack?kt.componentStack:null,pt=typeof $e=="undefined"?(gt||"").toString():$e,st=typeof Re=="undefined"?Pe:Re;return gt?T.createElement(gr,{type:"error",message:pt,description:T.createElement("pre",null,st)}):Ye}}]),Ln}(T.Component),qn=u(90),nr=function(Ce,Jn){var Ln={};for(var yr in Ce)Object.prototype.hasOwnProperty.call(Ce,yr)&&Jn.indexOf(yr)<0&&(Ln[yr]=Ce[yr]);if(Ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Un=0,yr=Object.getOwnPropertySymbols(Ce);Un<yr.length;Un++)Jn.indexOf(yr[Un])<0&&Object.prototype.propertyIsEnumerable.call(Ce,yr[Un])&&(Ln[yr[Un]]=Ce[yr[Un]]);return Ln},xn={success:Ae,info:gn,error:Fe,warning:Dt},pn={success:J,info:ye,error:Te,warning:ae},pr=function(Jn){var Ln,yr=Jn.description,Un=Jn.prefixCls,$e=Jn.message,Re=Jn.banner,Ye=Jn.className,tt=Ye===void 0?"":Ye,gt=Jn.style,kt=Jn.onMouseEnter,Pe=Jn.onMouseLeave,pt=Jn.onClick,st=Jn.afterClose,Ft=Jn.showIcon,An=Jn.closable,Gn=Jn.closeText,Yn=Jn.action,vr=nr(Jn,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),zr=T.useState(!1),et=Object(E.a)(zr,2),wt=et[0],lt=et[1],Vt=T.useRef(),cn=T.useContext(ut.b),We=cn.getPrefixCls,Jt=cn.direction,vt=We("alert",Un),Kn=function(Da){var Ya;lt(!0),(Ya=vr.onClose)===null||Ya===void 0||Ya.call(vr,Da)},kr=function(){var Da=vr.type;return Da!==void 0?Da:Re?"warning":"info"},Ur=Gn?!0:An,fa=kr(),ea=function(){var Da=vr.icon,Ya=(yr?pn:xn)[fa]||null;return Da?Object(qn.c)(Da,T.createElement("span",{className:"".concat(vt,"-icon")},Da),function(){return{className:Be()("".concat(vt,"-icon"),Object(f.a)({},Da.props.className,Da.props.className))}}):T.createElement(Ya,{className:"".concat(vt,"-icon")})},ia=function(){return Ur?T.createElement("button",{type:"button",onClick:Kn,className:"".concat(vt,"-close-icon"),tabIndex:0},Gn?T.createElement("span",{className:"".concat(vt,"-close-text")},Gn):T.createElement(U,null)):null},Va=Re&&Ft===void 0?!0:Ft,da=Be()(vt,"".concat(vt,"-").concat(fa),(Ln={},Object(f.a)(Ln,"".concat(vt,"-with-description"),!!yr),Object(f.a)(Ln,"".concat(vt,"-no-icon"),!Va),Object(f.a)(Ln,"".concat(vt,"-banner"),!!Re),Object(f.a)(Ln,"".concat(vt,"-rtl"),Jt==="rtl"),Ln),tt),$a=xt(vr);return T.createElement(me.a,{visible:!wt,motionName:"".concat(vt,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(Da){return{maxHeight:Da.offsetHeight}},onLeaveEnd:st},function(di){var Da=di.className,Ya=di.style;return T.createElement("div",Object(g.a)({ref:Vt,"data-show":!wt,className:Be()(da,Da),style:Object(g.a)(Object(g.a)({},gt),Ya),onMouseEnter:kt,onMouseLeave:Pe,onClick:pt,role:"alert"},$a),Va?ea():null,T.createElement("div",{className:"".concat(vt,"-content")},T.createElement("div",{className:"".concat(vt,"-message")},$e),T.createElement("div",{className:"".concat(vt,"-description")},yr)),Yn?T.createElement("div",{className:"".concat(vt,"-action")},Yn):null,ia())})};pr.ErrorBoundary=Nn;var gr=_.a=pr},function(j,_,u){"use strict";u.d(_,"b",function(){return Ut}),u.d(_,"a",function(){return Ht});var g=u(21),f=u(1),E=u(27),T=u(32),w=u.n(T),D=u(57),O=u(58),L=u(59),U=u(60),V={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},z={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},K=z,J={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},he=J,ue={lang:Object(g.a)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},K),timePickerLocale:Object(g.a)({},he)},de=ue,ae=de,le="${label} is not a valid ${type}",re={locale:"en",Pagination:V,DatePicker:de,TimePicker:he,Calendar:ae,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:le,method:le,array:le,object:le,number:le,date:le,boolean:le,integer:le,float:le,regexp:le,email:le,url:le,hex:le},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},se=re,ye=se,Z=Object(f.createContext)(void 0),Ee=Z,k=function(Fe){Object(L.a)(ze,Fe);var me=Object(U.a)(ze);function ze(){return Object(D.a)(this,ze),me.apply(this,arguments)}return Object(O.a)(ze,[{key:"getLocale",value:function(){var ut=this.props,xt=ut.componentName,$t=ut.defaultLocale,Qt=$t||ye[xt??"global"],on=this.context,Mn=xt&&on?on[xt]:{};return Object(g.a)(Object(g.a)({},Qt instanceof Function?Qt():Qt),Mn||{})}},{key:"getLocaleCode",value:function(){var ut=this.context,xt=ut&&ut.locale;return ut&&ut.exist&&!xt?ye.locale:xt}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),ze}(f.Component);k.defaultProps={componentName:"global"},k.contextType=Ee;function Te(Fe,me){var ze=f.useContext(Ee),Be=f.useMemo(function(){var ut=me||ye[Fe||"global"],xt=Fe&&ze?ze[Fe]:{};return Object(g.a)(Object(g.a)({},typeof ut=="function"?ut():ut),xt||{})},[Fe,me,ze]);return[Be]}var De=function(){var me=f.useContext(Ut),ze=me.getPrefixCls,Be=ze("empty-img-default");return f.createElement("svg",{className:Be,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{fill:"none",fillRule:"evenodd"},f.createElement("g",{transform:"translate(24 31.67)"},f.createElement("ellipse",{className:"".concat(Be,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),f.createElement("path",{className:"".concat(Be,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),f.createElement("path",{className:"".concat(Be,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),f.createElement("path",{className:"".concat(Be,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),f.createElement("path",{className:"".concat(Be,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),f.createElement("path",{className:"".concat(Be,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),f.createElement("g",{className:"".concat(Be,"-g"),transform:"translate(149.65 15.383)"},f.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),f.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},Ue=De,St=function(){var me=f.useContext(Ut),ze=me.getPrefixCls,Be=ze("empty-img-simple");return f.createElement("svg",{className:Be,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},f.createElement("ellipse",{className:"".concat(Be,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),f.createElement("g",{className:"".concat(Be,"-g"),fillRule:"nonzero"},f.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),f.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(Be,"-path")}))))},Ae=St,Wt=function(Fe,me){var ze={};for(var Be in Fe)Object.prototype.hasOwnProperty.call(Fe,Be)&&me.indexOf(Be)<0&&(ze[Be]=Fe[Be]);if(Fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,Be=Object.getOwnPropertySymbols(Fe);ut<Be.length;ut++)me.indexOf(Be[ut])<0&&Object.prototype.propertyIsEnumerable.call(Fe,Be[ut])&&(ze[Be[ut]]=Fe[Be[ut]]);return ze},At=f.createElement(Ue,null),mt=f.createElement(Ae,null),Dt=function(me){var ze=me.className,Be=me.prefixCls,ut=me.image,xt=ut===void 0?At:ut,$t=me.description,Qt=me.children,on=me.imageStyle,Mn=Wt(me,["className","prefixCls","image","description","children","imageStyle"]),Nn=f.useContext(Ut),qn=Nn.getPrefixCls,nr=Nn.direction;return f.createElement(k,{componentName:"Empty"},function(xn){var pn,pr=qn("empty",Be),gr=typeof $t!="undefined"?$t:xn.description,Ce=typeof gr=="string"?gr:"empty",Jn=null;return typeof xt=="string"?Jn=f.createElement("img",{alt:Ce,src:xt}):Jn=xt,f.createElement("div",Object(g.a)({className:w()(pr,(pn={},Object(E.a)(pn,"".concat(pr,"-normal"),xt===mt),Object(E.a)(pn,"".concat(pr,"-rtl"),nr==="rtl"),pn),ze)},Mn),f.createElement("div",{className:"".concat(pr,"-image"),style:on},Jn),gr&&f.createElement("div",{className:"".concat(pr,"-description")},gr),Qt&&f.createElement("div",{className:"".concat(pr,"-footer")},Qt))})};Dt.PRESENTED_IMAGE_DEFAULT=At,Dt.PRESENTED_IMAGE_SIMPLE=mt;var Ke=Dt,Tt=function(me){return f.createElement(Ht,null,function(ze){var Be=ze.getPrefixCls,ut=Be("empty");switch(me){case"Table":case"List":return f.createElement(Ke,{image:Ke.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return f.createElement(Ke,{image:Ke.PRESENTED_IMAGE_SIMPLE,className:"".concat(ut,"-small")});default:return f.createElement(Ke,null)}})},Gt=Tt,gn=function(me,ze){return ze||(me?"ant-".concat(me):"ant")},Ut=f.createContext({getPrefixCls:gn,renderEmpty:Gt}),Ht=Ut.Consumer;function Rt(Fe){return function(ze){var Be=function(Qt){return f.createElement(Ht,null,function(on){var Mn=Fe.prefixCls,Nn=on.getPrefixCls,qn=Qt.prefixCls,nr=Nn(Mn,qn);return f.createElement(ze,Object(g.a)({},on,Qt,{prefixCls:nr}))})},ut=ze.constructor,xt=ut&&ut.displayName||ze.name||"Component";return Be.displayName="withConfigConsumer(".concat(xt,")"),Be}}},function(j,_,u){"use strict";var g=u(27),f=u(22),E=u(21),T=u(1),w=u(42),D=u(18),O=u(46),L=u(287),U={adjustX:1,adjustY:1},V=[0,0],z={left:{points:["cr","cl"],overflow:U,offset:[-4,0],targetOffset:V},right:{points:["cl","cr"],overflow:U,offset:[4,0],targetOffset:V},top:{points:["bc","tc"],overflow:U,offset:[0,-4],targetOffset:V},bottom:{points:["tc","bc"],overflow:U,offset:[0,4],targetOffset:V},topLeft:{points:["bl","tl"],overflow:U,offset:[0,-4],targetOffset:V},leftTop:{points:["tr","tl"],overflow:U,offset:[-4,0],targetOffset:V},topRight:{points:["br","tr"],overflow:U,offset:[0,-4],targetOffset:V},rightTop:{points:["tl","tr"],overflow:U,offset:[4,0],targetOffset:V},bottomRight:{points:["tr","br"],overflow:U,offset:[0,4],targetOffset:V},rightBottom:{points:["bl","br"],overflow:U,offset:[4,0],targetOffset:V},bottomLeft:{points:["tl","bl"],overflow:U,offset:[0,4],targetOffset:V},leftBottom:{points:["br","bl"],overflow:U,offset:[-4,0],targetOffset:V}},K=z,J=function(xt){var $t=xt.overlay,Qt=xt.prefixCls,on=xt.id,Mn=xt.overlayInnerStyle;return T.createElement("div",{className:"".concat(Qt,"-inner"),id:on,role:"tooltip",style:Mn},typeof $t=="function"?$t():$t)},he=J,ue=function(xt,$t){var Qt=xt.overlayClassName,on=xt.trigger,Mn=on===void 0?["hover"]:on,Nn=xt.mouseEnterDelay,qn=Nn===void 0?0:Nn,nr=xt.mouseLeaveDelay,xn=nr===void 0?.1:nr,pn=xt.overlayStyle,pr=xt.prefixCls,gr=pr===void 0?"rc-tooltip":pr,Ce=xt.children,Jn=xt.onVisibleChange,Ln=xt.afterVisibleChange,yr=xt.transitionName,Un=xt.animation,$e=xt.motion,Re=xt.placement,Ye=Re===void 0?"right":Re,tt=xt.align,gt=tt===void 0?{}:tt,kt=xt.destroyTooltipOnHide,Pe=kt===void 0?!1:kt,pt=xt.defaultVisible,st=xt.getTooltipContainer,Ft=xt.overlayInnerStyle,An=Object(O.a)(xt,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),Gn=Object(T.useRef)(null);Object(T.useImperativeHandle)($t,function(){return Gn.current});var Yn=Object(D.a)({},An);"visible"in xt&&(Yn.popupVisible=xt.visible);var vr=function(){var Vt=xt.arrowContent,cn=Vt===void 0?null:Vt,We=xt.overlay,Jt=xt.id;return[T.createElement("div",{className:"".concat(gr,"-arrow"),key:"arrow"},cn),T.createElement(he,{key:"content",prefixCls:gr,id:Jt,overlay:We,overlayInnerStyle:Ft})]},zr=!1,et=!1;if(typeof Pe=="boolean")zr=Pe;else if(Pe&&Object(w.a)(Pe)==="object"){var wt=Pe.keepParent;zr=wt===!0,et=wt===!1}return T.createElement(L.a,Object(E.a)({popupClassName:Qt,prefixCls:gr,popup:vr,action:Mn,builtinPlacements:z,popupPlacement:Ye,ref:Gn,popupAlign:gt,getPopupContainer:st,onPopupVisibleChange:Jn,afterPopupVisibleChange:Ln,popupTransitionName:yr,popupAnimation:Un,popupMotion:$e,defaultPopupVisible:pt,destroyPopupOnHide:zr,autoDestroy:et,mouseLeaveDelay:xn,popupStyle:pn,mouseEnterDelay:qn},Yn),Ce)},de=Object(T.forwardRef)(ue),ae=de,le=u(277),re=u(32),se=u.n(re),ye={adjustX:1,adjustY:1},Z={adjustX:0,adjustY:0},Ee=[0,0];function k(ut){return typeof ut=="boolean"?ut?ye:Z:Object(E.a)(Object(E.a)({},Z),ut)}function Te(ut){var xt=ut.arrowWidth,$t=xt===void 0?5:xt,Qt=ut.horizontalArrowShift,on=Qt===void 0?16:Qt,Mn=ut.verticalArrowShift,Nn=Mn===void 0?8:Mn,qn=ut.autoAdjustOverflow,nr={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(on+$t),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(Nn+$t)]},topRight:{points:["br","tc"],offset:[on+$t,-4]},rightTop:{points:["tl","cr"],offset:[4,-(Nn+$t)]},bottomRight:{points:["tr","bc"],offset:[on+$t,4]},rightBottom:{points:["bl","cr"],offset:[4,Nn+$t]},bottomLeft:{points:["tl","bc"],offset:[-(on+$t),4]},leftBottom:{points:["br","cl"],offset:[-4,Nn+$t]}};return Object.keys(nr).forEach(function(xn){nr[xn]=ut.arrowPointAtCenter?Object(E.a)(Object(E.a)({},nr[xn]),{overflow:k(qn),targetOffset:Ee}):Object(E.a)(Object(E.a)({},z[xn]),{overflow:k(qn)}),nr[xn].ignoreShake=!0}),nr}var De=u(90),Ue=u(562),St=function(){for(var xt=arguments.length,$t=new Array(xt),Qt=0;Qt<xt;Qt++)$t[Qt]=arguments[Qt];return $t},Ae=function(){for(var xt=arguments.length,$t=new Array(xt),Qt=0;Qt<xt;Qt++)$t[Qt]=arguments[Qt];return $t},Wt=St("success","processing","error","default","warning"),At=St("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),mt=function(){return{height:0,opacity:0}},Dt=function(xt){return{height:xt.scrollHeight,opacity:1}},Ke=function(xt){return{height:xt.offsetHeight}},Tt=function(xt,$t){return($t==null?void 0:$t.deadline)===!0||$t.propertyName==="height"},Gt={motionName:"ant-motion-collapse",onAppearStart:mt,onEnterStart:mt,onAppearActive:Dt,onEnterActive:Dt,onLeaveStart:Ke,onLeaveActive:mt,onAppearEnd:Tt,onEnterEnd:Tt,onLeaveEnd:Tt,motionDeadline:500},gn=function(xt,$t,Qt){return Qt!==void 0?Qt:"".concat(xt,"-").concat($t)},Ut=Gt,Ht=function(ut,xt){var $t={};for(var Qt in ut)Object.prototype.hasOwnProperty.call(ut,Qt)&&xt.indexOf(Qt)<0&&($t[Qt]=ut[Qt]);if(ut!=null&&typeof Object.getOwnPropertySymbols=="function")for(var on=0,Qt=Object.getOwnPropertySymbols(ut);on<Qt.length;on++)xt.indexOf(Qt[on])<0&&Object.prototype.propertyIsEnumerable.call(ut,Qt[on])&&($t[Qt[on]]=ut[Qt[on]]);return $t},Rt=function(xt,$t){var Qt={},on=Object(E.a)({},xt);return $t.forEach(function(Mn){xt&&Mn in xt&&(Qt[Mn]=xt[Mn],delete on[Mn])}),{picked:Qt,omitted:on}},Fe=new RegExp("^(".concat(At.join("|"),")(-inverse)?$"));function me(ut,xt){var $t=ut.type;if(($t.__ANT_BUTTON===!0||$t.__ANT_SWITCH===!0||$t.__ANT_CHECKBOX===!0||ut.type==="button")&&ut.props.disabled){var Qt=Rt(ut.props.style,["position","left","right","top","bottom","float","display","zIndex"]),on=Qt.picked,Mn=Qt.omitted,Nn=Object(E.a)(Object(E.a)({display:"inline-block"},on),{cursor:"not-allowed",width:ut.props.block?"100%":null}),qn=Object(E.a)(Object(E.a)({},Mn),{pointerEvents:"none"}),nr=Object(De.a)(ut,{style:qn,className:null});return T.createElement("span",{style:Nn,className:se()(ut.props.className,"".concat(xt,"-disabled-compatible-wrapper"))},nr)}return ut}var ze=T.forwardRef(function(ut,xt){var $t,Qt=T.useContext(Ue.b),on=Qt.getPopupContainer,Mn=Qt.getPrefixCls,Nn=Qt.direction,qn=Object(le.a)(!1,{value:ut.visible,defaultValue:ut.defaultVisible}),nr=Object(f.a)(qn,2),xn=nr[0],pn=nr[1],pr=function(){var lt=ut.title,Vt=ut.overlay;return!lt&&!Vt&&lt!==0},gr=function(lt){var Vt;pn(pr()?!1:lt),pr()||((Vt=ut.onVisibleChange)===null||Vt===void 0||Vt.call(ut,lt))},Ce=function(){var lt=ut.builtinPlacements,Vt=ut.arrowPointAtCenter,cn=ut.autoAdjustOverflow;return lt||Te({arrowPointAtCenter:Vt,autoAdjustOverflow:cn})},Jn=function(lt,Vt){var cn=Ce(),We=Object.keys(cn).filter(function(Kn){return cn[Kn].points[0]===Vt.points[0]&&cn[Kn].points[1]===Vt.points[1]})[0];if(!We)return;var Jt=lt.getBoundingClientRect(),vt={top:"50%",left:"50%"};We.indexOf("top")>=0||We.indexOf("Bottom")>=0?vt.top="".concat(Jt.height-Vt.offset[1],"px"):(We.indexOf("Top")>=0||We.indexOf("bottom")>=0)&&(vt.top="".concat(-Vt.offset[1],"px")),We.indexOf("left")>=0||We.indexOf("Right")>=0?vt.left="".concat(Jt.width-Vt.offset[0],"px"):(We.indexOf("right")>=0||We.indexOf("Left")>=0)&&(vt.left="".concat(-Vt.offset[0],"px")),lt.style.transformOrigin="".concat(vt.left," ").concat(vt.top)},Ln=function(){var lt=ut.title,Vt=ut.overlay;return lt===0?lt:Vt||lt||""},yr=ut.getPopupContainer,Un=Ht(ut,["getPopupContainer"]),$e=ut.prefixCls,Re=ut.openClassName,Ye=ut.getTooltipContainer,tt=ut.overlayClassName,gt=ut.color,kt=ut.overlayInnerStyle,Pe=ut.children,pt=Mn("tooltip",$e),st=Mn(),Ft=xn;!("visible"in ut)&&pr()&&(Ft=!1);var An=me(Object(De.b)(Pe)?Pe:T.createElement("span",null,Pe),pt),Gn=An.props,Yn=se()(Gn.className,Object(g.a)({},Re||"".concat(pt,"-open"),!0)),vr=se()(tt,($t={},Object(g.a)($t,"".concat(pt,"-rtl"),Nn==="rtl"),Object(g.a)($t,"".concat(pt,"-").concat(gt),gt&&Fe.test(gt)),$t)),zr=kt,et;return gt&&!Fe.test(gt)&&(zr=Object(E.a)(Object(E.a)({},kt),{background:gt}),et={background:gt}),T.createElement(ae,Object(E.a)({},Un,{prefixCls:pt,overlayClassName:vr,getTooltipContainer:yr||Ye||on,ref:xt,builtinPlacements:Ce(),overlay:Ln(),visible:Ft,onVisibleChange:gr,onPopupAlign:Jn,overlayInnerStyle:zr,arrowContent:T.createElement("span",{className:"".concat(pt,"-arrow-content"),style:et}),motion:{motionName:gn(st,"zoom-big-fast",ut.transitionName),motionDeadline:1e3}}),Ft?Object(De.a)(An,{className:Yn}):An)});ze.displayName="Tooltip",ze.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};var Be=_.a=ze},function(j,_,u){"use strict";var g=u(1),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},E=f,T=u(35),w=function(L,U){return g.createElement(T.a,Object.assign({},L,{ref:U,icon:E}))};w.displayName="ReloadOutlined";var D=_.a=g.forwardRef(w)},function(j,_,u){"use strict";var g=u(1),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"},E=f,T=u(35),w=function(L,U){return g.createElement(T.a,Object.assign({},L,{ref:U,icon:E}))};w.displayName="GithubOutlined";var D=_.a=g.forwardRef(w)},function(j,_,u){"use strict";var g=u(1),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M709.6 210l.4-.2h.2L512 96 313.9 209.8h-.2l.7.3L151.5 304v416L512 928l360.5-208V304l-162.9-94zM482.7 843.6L339.6 761V621.4L210 547.8V372.9l272.7 157.3v313.4zM238.2 321.5l134.7-77.8 138.9 79.7 139.1-79.9 135.2 78-273.9 158-274-158zM814 548.3l-128.8 73.1v139.1l-143.9 83V530.4L814 373.1v175.2z"}}]},name:"code-sandbox",theme:"outlined"},E=f,T=u(35),w=function(L,U){return g.createElement(T.a,Object.assign({},L,{ref:U,icon:E}))};w.displayName="CodeSandboxOutlined";var D=_.a=g.forwardRef(w)}]]);
