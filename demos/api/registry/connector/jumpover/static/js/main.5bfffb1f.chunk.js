(this["webpackJsonpapi.registry.connector.jumpover"]=this["webpackJsonpapi.registry.connector.jumpover"]||[]).push([[0],{207:function(Vt,_e,m){Vt.exports=m(260)},237:function(Vt,_e,m){},240:function(Vt,_e,m){"use strict";m.r(_e),m.d(_e,"host",function(){return pe}),m.d(_e,"getCodeSandboxParams",function(){return P}),m.d(_e,"getStackblitzPrefillConfig",function(){return J});const pe="https://github.com/antvis/X6/tree/master//home/runner/work/X6/X6/sites/x6-sites-demos/packages/api/registry/connector/jumpover";function P(){return{files:{"package.json":{isBinary:!1,content:'{"dependencies":{"@antv/x6":"latest","antd":"^4.4.2","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"^3.4.1"},"devDependencies":{"@types/react":"^16.9.19","@types/react-dom":"^16.9.5","typescript":"^4.1.2"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}'},".gitignore":{content:`# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
react-app-env.d.ts
/.pnp
.pnp.js

# testing
/coverage

# production
/build

# misc
.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

npm-debug.log*
yarn-debug.log*
yarn-error.log*
`,isBinary:!1},"public/index.html":{content:`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title></title>
  </head>
  <body>
    <noscript> You need to enable JavaScript to run this app. </noscript>
    <div id="root"></div>
  </body>
</html>
`,isBinary:!1},"src/app.css":{content:`.app {
  font-family: sans-serif;
  padding: 0;
  display: flex;
  padding: 16px 8px;
}

.app-left {
  width: 336px;
  bottom: 0;
  padding: 0 8px;
}

.app-content {
  height: 320px;
  flex: 1;
  margin-left: 8px;
  margin-right: 8px;
  box-shadow: 0 0 10px 1px #e9e9e9;
}

.ant-card {
  box-shadow: 0 0 10px 1px #e9e9e9;
}

.ant-card-head-title {
  text-align: center;
}

.ant-row {
  margin: 16px 0;
  text-align: left;
}

.slider-value {
  background: #eee;
  color: #333333;
  padding: 3px 7px;
  border-radius: 10px;
  display: inline-block;
  font-size: 12px;
  margin-left: 8px;
  line-height: 1.25;
}
`,isBinary:!1},"src/app.tsx":{content:`import React from 'react'
import { Graph, Edge } from '@antv/x6'
import { Settings, State } from './settings'
import './app.css'

export default class Example extends React.Component {
  private container: HTMLDivElement
  private edge: Edge

  componentDidMount() {
    const graph = new Graph({
      container: this.container,
      grid: true,
    })

    const source = graph.addNode({
      x: 24,
      y: 70,
      width: 100,
      height: 40,
    })

    const target = graph.addNode({
      x: 24,
      y: 160,
      width: 100,
      height: 40,
    })

    this.edge = graph.addEdge({
      source,
      target,
      attrs: {
        line: {
          stroke: '#fe8550',
        },
      },
      vertices: [
        { x: 760, y: 150 },
        { x: 760, y: 240 },
      ],
    })

    const rect = graph.addNode({
      x: 160,
      y: 24,
      width: 70,
      height: 30,
    })

    for (let i = 0; i < 6; i += 1) {
      const source = rect.clone().translate(i * 100, i * 10)
      graph.addNode(source)

      const target = source.clone().translate(0, 200)
      graph.addNode(target)

      if (i % 2 === 0) {
        graph.addEdge({
          source,
          target,
          attrs: {
            line: {
              stroke: '#fe8550',
            },
          },
          connector: {
            name: 'jumpover',
            args: {
              type: 'gap',
            },
          },
        })
      } else {
        graph.addEdge({ source, target })
      }
    }

    this.edge.setConnector('jumpover')
  }

  onAttrsChanged = (args: State) => {
    this.edge.setConnector('jumpover', args)
  }

  refContainer = (container: HTMLDivElement) => {
    this.container = container
  }

  render() {
    return (
      <div className="app">
        <div className="app-left">
          <Settings onChange={this.onAttrsChanged} />
        </div>
        <div className="app-content" ref={this.refContainer} />
      </div>
    )
  }
}
`,isBinary:!1},"src/index.css":{content:`body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}
`,isBinary:!1},"src/index.tsx":{content:`import React from 'react'
import ReactDOM from 'react-dom'
import App from './app'

ReactDOM.render(<App />, document.getElementById('root'))`,isBinary:!1},"src/settings.tsx":{content:`import React from 'react'
import { Slider, Radio, Card, Row, Col } from 'antd'
import 'antd/dist/antd.css'

export interface Props {
  onChange: (state: State) => void
}

export interface State {
  type: string
  size: number
  radius: number
}

export class Settings extends React.Component<Props, State> {
  state: State = {
    type: 'arc',
    size: 5,
    radius: 0,
  }

  notifyChange() {
    this.props.onChange(this.state)
  }

  onSizeChanged = (size: number) => {
    this.setState({ size }, () => {
      this.notifyChange()
    })
  }

  onRadiusChanged = (radius: number) => {
    this.setState({ radius }, () => {
      this.notifyChange()
    })
  }

  onTypeChange = (e: any) => {
    this.setState({ type: e.target.value }, () => {
      this.notifyChange()
    })
  }

  render() {
    return (
      <Card title="Args" size="small" bordered={false} style={{ width: 320 }}>
        <Row align="middle">
          <Col span={5}>type</Col>
          <Col span={18}>
            <Radio.Group onChange={this.onTypeChange} value={this.state.type}>
              <Radio value={'arc'}>arc</Radio>
              <Radio value={'cubic'}>cubic</Radio>
              <Radio value={'gap'}>gap</Radio>
            </Radio.Group>
          </Col>
        </Row>
        <Row align="middle">
          <Col span={5}>size</Col>
          <Col span={14}>
            <Slider
              min={1}
              max={30}
              step={1}
              value={this.state.size}
              onChange={this.onSizeChanged}
            />
          </Col>
          <Col span={1} offset={1}>
            <div className="slider-value">{this.state.size}</div>
          </Col>
        </Row>
        <Row align="middle">
          <Col span={5}>radius</Col>
          <Col span={14}>
            <Slider
              min={0}
              max={30}
              step={1}
              value={this.state.radius}
              onChange={this.onRadiusChanged}
            />
          </Col>
          <Col span={1} offset={1}>
            <div className="slider-value">{this.state.radius}</div>
          </Col>
        </Row>
      </Card>
    )
  }
}
`,isBinary:!1},"tsconfig.json":{content:`{
  "compilerOptions": {
    "allowJs": true,
    "strict": true,
    "isolatedModules": true,
    "allowSyntheticDefaultImports": true,
    "forceConsistentCasingInFileNames": true,
    "strictPropertyInitialization": false,
    "noEmit": true,
    "module": "esnext",
    "moduleResolution": "node",
    "sourceMap": true,
    "declaration": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "noImplicitAny": true,
    "noEmitOnError": true,
    "noUnusedLocals": true,
    "strictNullChecks": true,
    "resolveJsonModule": true,
    "experimentalDecorators": true,
    "jsx": "react",
    "target": "es5",
    "lib": [
      "dom",
      "es2015"
    ]
  },
  "include": [
    "src"
  ]
}
`,isBinary:!1}}}}function J(){return{title:"api/registry/connector/jumpover",description:"",template:"create-react-app",dependencies:{"@antv/x6":"latest",antd:"^4.4.2",react:"^16.13.1","react-dom":"^16.13.1","react-scripts":"^3.4.1"},files:{"package.json":'{"dependencies":{"@antv/x6":"latest","antd":"^4.4.2","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"^3.4.1"},"devDependencies":{"@types/react":"^16.9.19","@types/react-dom":"^16.9.5","typescript":"^4.1.2"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}',".gitignore":`# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
react-app-env.d.ts
/.pnp
.pnp.js

# testing
/coverage

# production
/build

# misc
.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

npm-debug.log*
yarn-debug.log*
yarn-error.log*
`,"public/index.html":`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title></title>
  </head>
  <body>
    <noscript> You need to enable JavaScript to run this app. </noscript>
    <div id="root"></div>
  </body>
</html>
`,"src/app.css":`.app {
  font-family: sans-serif;
  padding: 0;
  display: flex;
  padding: 16px 8px;
}

.app-left {
  width: 336px;
  bottom: 0;
  padding: 0 8px;
}

.app-content {
  height: 320px;
  flex: 1;
  margin-left: 8px;
  margin-right: 8px;
  box-shadow: 0 0 10px 1px #e9e9e9;
}

.ant-card {
  box-shadow: 0 0 10px 1px #e9e9e9;
}

.ant-card-head-title {
  text-align: center;
}

.ant-row {
  margin: 16px 0;
  text-align: left;
}

.slider-value {
  background: #eee;
  color: #333333;
  padding: 3px 7px;
  border-radius: 10px;
  display: inline-block;
  font-size: 12px;
  margin-left: 8px;
  line-height: 1.25;
}
`,"src/app.tsx":`import React from 'react'
import { Graph, Edge } from '@antv/x6'
import { Settings, State } from './settings'
import './app.css'

export default class Example extends React.Component {
  private container: HTMLDivElement
  private edge: Edge

  componentDidMount() {
    const graph = new Graph({
      container: this.container,
      grid: true,
    })

    const source = graph.addNode({
      x: 24,
      y: 70,
      width: 100,
      height: 40,
    })

    const target = graph.addNode({
      x: 24,
      y: 160,
      width: 100,
      height: 40,
    })

    this.edge = graph.addEdge({
      source,
      target,
      attrs: {
        line: {
          stroke: '#fe8550',
        },
      },
      vertices: [
        { x: 760, y: 150 },
        { x: 760, y: 240 },
      ],
    })

    const rect = graph.addNode({
      x: 160,
      y: 24,
      width: 70,
      height: 30,
    })

    for (let i = 0; i < 6; i += 1) {
      const source = rect.clone().translate(i * 100, i * 10)
      graph.addNode(source)

      const target = source.clone().translate(0, 200)
      graph.addNode(target)

      if (i % 2 === 0) {
        graph.addEdge({
          source,
          target,
          attrs: {
            line: {
              stroke: '#fe8550',
            },
          },
          connector: {
            name: 'jumpover',
            args: {
              type: 'gap',
            },
          },
        })
      } else {
        graph.addEdge({ source, target })
      }
    }

    this.edge.setConnector('jumpover')
  }

  onAttrsChanged = (args: State) => {
    this.edge.setConnector('jumpover', args)
  }

  refContainer = (container: HTMLDivElement) => {
    this.container = container
  }

  render() {
    return (
      <div className="app">
        <div className="app-left">
          <Settings onChange={this.onAttrsChanged} />
        </div>
        <div className="app-content" ref={this.refContainer} />
      </div>
    )
  }
}
`,"src/index.css":`body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}
`,"src/index.tsx":`import React from 'react'
import ReactDOM from 'react-dom'
import App from './app'

ReactDOM.render(<App />, document.getElementById('root'))`,"src/settings.tsx":`import React from 'react'
import { Slider, Radio, Card, Row, Col } from 'antd'
import 'antd/dist/antd.css'

export interface Props {
  onChange: (state: State) => void
}

export interface State {
  type: string
  size: number
  radius: number
}

export class Settings extends React.Component<Props, State> {
  state: State = {
    type: 'arc',
    size: 5,
    radius: 0,
  }

  notifyChange() {
    this.props.onChange(this.state)
  }

  onSizeChanged = (size: number) => {
    this.setState({ size }, () => {
      this.notifyChange()
    })
  }

  onRadiusChanged = (radius: number) => {
    this.setState({ radius }, () => {
      this.notifyChange()
    })
  }

  onTypeChange = (e: any) => {
    this.setState({ type: e.target.value }, () => {
      this.notifyChange()
    })
  }

  render() {
    return (
      <Card title="Args" size="small" bordered={false} style={{ width: 320 }}>
        <Row align="middle">
          <Col span={5}>type</Col>
          <Col span={18}>
            <Radio.Group onChange={this.onTypeChange} value={this.state.type}>
              <Radio value={'arc'}>arc</Radio>
              <Radio value={'cubic'}>cubic</Radio>
              <Radio value={'gap'}>gap</Radio>
            </Radio.Group>
          </Col>
        </Row>
        <Row align="middle">
          <Col span={5}>size</Col>
          <Col span={14}>
            <Slider
              min={1}
              max={30}
              step={1}
              value={this.state.size}
              onChange={this.onSizeChanged}
            />
          </Col>
          <Col span={1} offset={1}>
            <div className="slider-value">{this.state.size}</div>
          </Col>
        </Row>
        <Row align="middle">
          <Col span={5}>radius</Col>
          <Col span={14}>
            <Slider
              min={0}
              max={30}
              step={1}
              value={this.state.radius}
              onChange={this.onRadiusChanged}
            />
          </Col>
          <Col span={1} offset={1}>
            <div className="slider-value">{this.state.radius}</div>
          </Col>
        </Row>
      </Card>
    )
  }
}
`,"tsconfig.json":`{
  "compilerOptions": {
    "allowJs": true,
    "strict": true,
    "isolatedModules": true,
    "allowSyntheticDefaultImports": true,
    "forceConsistentCasingInFileNames": true,
    "strictPropertyInitialization": false,
    "noEmit": true,
    "module": "esnext",
    "moduleResolution": "node",
    "sourceMap": true,
    "declaration": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "noImplicitAny": true,
    "noEmitOnError": true,
    "noUnusedLocals": true,
    "strictNullChecks": true,
    "resolveJsonModule": true,
    "experimentalDecorators": true,
    "jsx": "react",
    "target": "es5",
    "lib": [
      "dom",
      "es2015"
    ]
  },
  "include": [
    "src"
  ]
}
`}}}},241:function(Vt,_e,m){},242:function(Vt,_e,m){},260:function(Vt,_e,m){"use strict";m.r(_e);var pe={};m.r(pe),m.d(pe,"isArray",function(){return vs.a}),m.d(pe,"isArrayLike",function(){return ps.a}),m.d(pe,"uniq",function(){return ms.a}),m.d(pe,"union",function(){return Cs.a}),m.d(pe,"sortedIndex",function(){return ys.a}),m.d(pe,"sortedIndexBy",function(){return bs.a}),m.d(pe,"sortBy",function(){return ws.a}),m.d(pe,"groupBy",function(){return xs.a}),m.d(pe,"difference",function(){return ks.a});var P={};m.r(P),m.d(P,"has",function(){return Es.a}),m.d(P,"pick",function(){return Os.a}),m.d(P,"forIn",function(){return As.a}),m.d(P,"merge",function(){return Ds.a}),m.d(P,"extend",function(){return Ms.a}),m.d(P,"isEqual",function(){return Ts.a}),m.d(P,"isEmpty",function(){return Ss.a}),m.d(P,"isObject",function(){return Ps.a}),m.d(P,"isPlainObject",function(){return Ns.a}),m.d(P,"clone",function(){return js.a}),m.d(P,"cloneDeep",function(){return Ls.a}),m.d(P,"defaults",function(){return Fs.a}),m.d(P,"defaultsDeep",function(){return Rs.a}),m.d(P,"applyMixins",function(){return Xs}),m.d(P,"inherit",function(){return Xi}),m.d(P,"createClass",function(){return Is}),m.d(P,"ensure",function(){return Bi}),m.d(P,"getValue",function(){return Vs}),m.d(P,"getNumber",function(){return Us}),m.d(P,"getBoolean",function(){return Gs}),m.d(P,"getByPath",function(){return Ii}),m.d(P,"setByPath",function(){return Hs}),m.d(P,"unsetByPath",function(){return Ws}),m.d(P,"flatten",function(){return Vi});var J={};m.r(J),m.d(J,"isString",function(){return $s.a}),m.d(J,"toString",function(){return Ys.a}),m.d(J,"escape",function(){return Js.a}),m.d(J,"unescape",function(){return Zs.a}),m.d(J,"startsWith",function(){return Ks.a}),m.d(J,"endsWith",function(){return Qs.a}),m.d(J,"split",function(){return qs.a}),m.d(J,"repeat",function(){return _s.a}),m.d(J,"pad",function(){return el.a}),m.d(J,"padEnd",function(){return tl.a}),m.d(J,"padStart",function(){return nl.a}),m.d(J,"truncate",function(){return rl.a}),m.d(J,"template",function(){return il.a}),m.d(J,"uniqueId",function(){return al.a}),m.d(J,"eval",function(){return ol}),m.d(J,"lowerFirst",function(){return sl.a}),m.d(J,"upperFirst",function(){return Ui.a}),m.d(J,"camelCase",function(){return Lr.a}),m.d(J,"pascalCase",function(){return ul}),m.d(J,"constantCase",function(){return cl}),m.d(J,"dotCase",function(){return hl}),m.d(J,"pathCase",function(){return dl}),m.d(J,"sentenceCase",function(){return gl}),m.d(J,"titleCase",function(){return fl}),m.d(J,"hashcode",function(){return vl}),m.d(J,"uuid",function(){return pl}),m.d(J,"sanitizeHTML",function(){return ml}),m.d(J,"getSpellingSuggestion",function(){return yl});var H={};m.r(H),m.d(H,"isNaN",function(){return wl.a}),m.d(H,"isNumber",function(){return xl.a}),m.d(H,"isFinite",function(){return kl.a}),m.d(H,"isInteger",function(){return El.a}),m.d(H,"isSafeInteger",function(){return Ol.a}),m.d(H,"clamp",function(){return Al.a}),m.d(H,"inRange",function(){return Dl.a}),m.d(H,"toFinite",function(){return Ml.a}),m.d(H,"toNumber",function(){return Tl.a}),m.d(H,"toInteger",function(){return Sl.a}),m.d(H,"toSafeInteger",function(){return Pl.a}),m.d(H,"parseInt",function(){return Nl.a}),m.d(H,"isNumeric",function(){return fs}),m.d(H,"mod",function(){return jl}),m.d(H,"random",function(){return Ll}),m.d(H,"isPercentage",function(){return Hi}),m.d(H,"normalizePercentage",function(){return Fl}),m.d(H,"parseCssNumeric",function(){return Rl}),m.d(H,"normalizeSides",function(){return Xl});var R={};m.r(R),m.d(R,"isFunction",function(){return zl.a}),m.d(R,"once",function(){return Bl.a}),m.d(R,"noop",function(){return Il.a}),m.d(R,"debounce",function(){return Vl.a}),m.d(R,"defer",function(){return Ul.a}),m.d(R,"apply",function(){return Rr}),m.d(R,"call",function(){return Gl}),m.d(R,"cacher",function(){return Wl}),m.d(R,"isAsyncLike",function(){return Wi}),m.d(R,"isAsync",function(){return Xr}),m.d(R,"toAsyncBoolean",function(){return $i}),m.d(R,"toDeferredBoolean",function(){return $l});var ft={};m.r(ft),m.d(ft,"annotate",function(){return Zl}),m.d(ft,"findAnnotationsAtIndex",function(){return Kl}),m.d(ft,"findAnnotationsBetweenIndexes",function(){return Ql}),m.d(ft,"shiftAnnotations",function(){return ql}),m.d(ft,"sanitize",function(){return _l});var E={};m.r(E),m.d(E,"requestAnimationFrame",function(){return tu}),m.d(E,"cancelAnimationFrame",function(){return nu}),m.d(E,"getAttribute",function(){return la}),m.d(E,"removeAttribute",function(){return Hr}),m.d(E,"setAttribute",function(){return Gn}),m.d(E,"setAttributes",function(){return Wr}),m.d(E,"attr",function(){return Te}),m.d(E,"qualifyAttr",function(){return $r}),m.d(E,"kebablizeAttrs",function(){return Jl}),m.d(E,"styleToObject",function(){return fn}),m.d(E,"mergeAttrs",function(){return Hn}),m.d(E,"uniqueId",function(){return Ji}),m.d(E,"ensureId",function(){return Zi}),m.d(E,"isSVGGraphicsElement",function(){return In}),m.d(E,"ns",function(){return tt}),m.d(E,"svgVersion",function(){return Vr}),m.d(E,"createElement",function(){return Yl}),m.d(E,"createElementNS",function(){return Ki}),m.d(E,"createSvgElement",function(){return nt}),m.d(E,"createSvgDocument",function(){return Vn}),m.d(E,"parseXML",function(){return Qi}),m.d(E,"tagName",function(){return qi}),m.d(E,"index",function(){return _i}),m.d(E,"find",function(){return ea}),m.d(E,"findOne",function(){return ta}),m.d(E,"findParentByClass",function(){return na}),m.d(E,"contains",function(){return ra}),m.d(E,"remove",function(){return ia}),m.d(E,"empty",function(){return Ur}),m.d(E,"append",function(){return Un}),m.d(E,"prepend",function(){return aa}),m.d(E,"before",function(){return Gr}),m.d(E,"appendTo",function(){return oa}),m.d(E,"isHTMLElement",function(){return sa}),m.d(E,"getClass",function(){return Nt}),m.d(E,"hasClass",function(){return Bn}),m.d(E,"addClass",function(){return dn}),m.d(E,"removeClass",function(){return gn}),m.d(E,"toggleClass",function(){return Ir}),m.d(E,"setPrefixedStyle",function(){return ou}),m.d(E,"getComputedStyle",function(){return Wn}),m.d(E,"hasScrollbars",function(){return su}),m.d(E,"getVendorPrefixedName",function(){return da}),m.d(E,"clearSelection",function(){return lu}),m.d(E,"text",function(){return ba}),m.d(E,"breakText",function(){return pu}),m.d(E,"KAPPA",function(){return qn}),m.d(E,"sample",function(){return Qr}),m.d(E,"lineToPathData",function(){return wa}),m.d(E,"polygonToPathData",function(){return xa}),m.d(E,"polylineToPathData",function(){return ka}),m.d(E,"getPointsFromSvgElement",function(){return vn}),m.d(E,"circleToPathData",function(){return Oa}),m.d(E,"ellipseToPathData",function(){return Aa}),m.d(E,"rectangleToPathData",function(){return Da}),m.d(E,"rectToPathData",function(){return Ma}),m.d(E,"toPath",function(){return qr}),m.d(E,"toPathData",function(){return _r}),m.d(E,"createSlicePathData",function(){return mu}),m.d(E,"bbox",function(){return Sa}),m.d(E,"getBBox",function(){return pt}),m.d(E,"getTransformToElement",function(){return mt}),m.d(E,"toLocalPoint",function(){return Pa}),m.d(E,"toGeometryShape",function(){return Na}),m.d(E,"getIntersection",function(){return Au}),m.d(E,"animate",function(){return ja}),m.d(E,"animateTransform",function(){return La}),m.d(E,"animateAlongPath",function(){return Xa}),m.d(E,"getBoundingOffsetRect",function(){return za}),m.d(E,"createSVGPoint",function(){return ei}),m.d(E,"createSVGMatrix",function(){return mn}),m.d(E,"createSVGTransform",function(){return Zt}),m.d(E,"transformStringToMatrix",function(){return ti}),m.d(E,"matrixToTransformString",function(){return ni}),m.d(E,"parseTransformString",function(){return _n}),m.d(E,"decomposeMatrix",function(){return ii}),m.d(E,"matrixToScale",function(){return bu}),m.d(E,"matrixToRotation",function(){return wu}),m.d(E,"matrixToTranslation",function(){return xu}),m.d(E,"transformPoint",function(){return er}),m.d(E,"transformLine",function(){return ku}),m.d(E,"transformPolyline",function(){return Eu}),m.d(E,"transformRectangle",function(){return tr}),m.d(E,"transform",function(){return ai}),m.d(E,"translate",function(){return oi}),m.d(E,"rotate",function(){return si}),m.d(E,"scale",function(){return nr}),m.d(E,"translateAndAutoOrient",function(){return Ba}),m.d(E,"isVector",function(){return Du}),m.d(E,"createVector",function(){return Mu}),m.d(E,"createVectors",function(){return Tu});var Ye={};m.r(Ye),m.d(Ye,"block",function(){return fc}),m.d(Ye,"classic",function(){return vc}),m.d(Ye,"diamond",function(){return mc}),m.d(Ye,"path",function(){return yc}),m.d(Ye,"cross",function(){return wc}),m.d(Ye,"async",function(){return kc}),m.d(Ye,"circle",function(){return io}),m.d(Ye,"circlePlus",function(){return Ec}),m.d(Ye,"ellipse",function(){return Ac});var Z={};m.r(Z),m.d(Z,"ref",function(){return Lu}),m.d(Z,"refX",function(){return Ga}),m.d(Z,"refY",function(){return Ha}),m.d(Z,"refDx",function(){return Fu}),m.d(Z,"refDy",function(){return Ru}),m.d(Z,"refWidth",function(){return Wa}),m.d(Z,"refHeight",function(){return $a}),m.d(Z,"refRx",function(){return Xu}),m.d(Z,"refRy",function(){return zu}),m.d(Z,"refRInscribed",function(){return Ya}),m.d(Z,"refRCircumscribed",function(){return Bu}),m.d(Z,"refCx",function(){return Iu}),m.d(Z,"refCy",function(){return Vu}),m.d(Z,"refDResetOffset",function(){return Ja}),m.d(Z,"refDKeepOffset",function(){return Uu}),m.d(Z,"refPointsResetOffset",function(){return Za}),m.d(Z,"refPointsKeepOffset",function(){return Gu}),m.d(Z,"refR",function(){return Hu}),m.d(Z,"refD",function(){return Wu}),m.d(Z,"refPoints",function(){return $u}),m.d(Z,"refX2",function(){return Yu}),m.d(Z,"refY2",function(){return Ju}),m.d(Z,"refWidth2",function(){return Zu}),m.d(Z,"refHeight2",function(){return Ku}),m.d(Z,"fill",function(){return Qu}),m.d(Z,"stroke",function(){return qu}),m.d(Z,"text",function(){return _a}),m.d(Z,"textWrap",function(){return _u}),m.d(Z,"lineHeight",function(){return ec}),m.d(Z,"textVerticalAnchor",function(){return tc}),m.d(Z,"textPath",function(){return nc}),m.d(Z,"annotations",function(){return rc}),m.d(Z,"eol",function(){return ic}),m.d(Z,"displayEmpty",function(){return ac}),m.d(Z,"title",function(){return oc}),m.d(Z,"xAlign",function(){return sc}),m.d(Z,"yAlign",function(){return lc}),m.d(Z,"resetOffset",function(){return uc}),m.d(Z,"style",function(){return cc}),m.d(Z,"html",function(){return hc}),m.d(Z,"filter",function(){return dc}),m.d(Z,"port",function(){return gc}),m.d(Z,"sourceMarker",function(){return Mc}),m.d(Z,"targetMarker",function(){return Tc}),m.d(Z,"vertexMarker",function(){return Sc}),m.d(Z,"connection",function(){return Nc}),m.d(Z,"atConnectionLengthKeepGradient",function(){return ao}),m.d(Z,"atConnectionLengthIgnoreGradient",function(){return jc}),m.d(Z,"atConnectionRatioKeepGradient",function(){return oo}),m.d(Z,"atConnectionRatioIgnoreGradient",function(){return Lc}),m.d(Z,"atConnectionLength",function(){return Fc}),m.d(Z,"atConnectionRatio",function(){return Rc});var Ut={};m.r(Ut),m.d(Ut,"dot",function(){return Xc}),m.d(Ut,"fixedDot",function(){return zc}),m.d(Ut,"mesh",function(){return Bc}),m.d(Ut,"doubleMesh",function(){return Ic});var Ve={};m.r(Ve),m.d(Ve,"outline",function(){return Vc}),m.d(Ve,"highlight",function(){return Uc}),m.d(Ve,"blur",function(){return Gc}),m.d(Ve,"dropShadow",function(){return Hc}),m.d(Ve,"grayScale",function(){return Wc}),m.d(Ve,"sepia",function(){return $c}),m.d(Ve,"saturate",function(){return Yc}),m.d(Ve,"hueRotate",function(){return Jc}),m.d(Ve,"invert",function(){return Zc}),m.d(Ve,"brightness",function(){return Kc}),m.d(Ve,"contrast",function(){return Qc});var Gt={};m.r(Gt),m.d(Gt,"flipX",function(){return so}),m.d(Gt,"flipY",function(){return lo}),m.d(Gt,"flipXY",function(){return uo}),m.d(Gt,"watermark",function(){return qc});var cn={};m.r(cn),m.d(cn,"className",function(){return eh}),m.d(cn,"opacity",function(){return th}),m.d(cn,"stroke",function(){return rh});var et={};m.r(et),m.d(et,"absolute",function(){return ih}),m.d(et,"ellipse",function(){return ah}),m.d(et,"ellipseSpread",function(){return oh}),m.d(et,"line",function(){return lh}),m.d(et,"left",function(){return uh}),m.d(et,"right",function(){return ch}),m.d(et,"top",function(){return hh}),m.d(et,"bottom",function(){return dh});var Ue={};m.r(Ue),m.d(Ue,"manual",function(){return fh}),m.d(Ue,"left",function(){return vh}),m.d(Ue,"right",function(){return ph}),m.d(Ue,"top",function(){return mh}),m.d(Ue,"bottom",function(){return Ch}),m.d(Ue,"outside",function(){return yh}),m.d(Ue,"outsideOriented",function(){return bh}),m.d(Ue,"inside",function(){return wh}),m.d(Ue,"insideOriented",function(){return xh}),m.d(Ue,"radial",function(){return kh}),m.d(Ue,"radialOriented",function(){return Eh});var hn={};m.r(hn),m.d(hn,"noop",function(){return Oh}),m.d(hn,"pinRelative",function(){return Mh}),m.d(hn,"pinAbsolute",function(){return Th});var Re={};m.r(Re),m.d(Re,"center",function(){return zh}),m.d(Re,"top",function(){return Bh}),m.d(Re,"bottom",function(){return Ih}),m.d(Re,"left",function(){return Vh}),m.d(Re,"right",function(){return Uh}),m.d(Re,"topLeft",function(){return Gh}),m.d(Re,"topRight",function(){return Hh}),m.d(Re,"bottomLeft",function(){return Wh}),m.d(Re,"bottomRight",function(){return $h}),m.d(Re,"orth",function(){return Jh}),m.d(Re,"nodeCenter",function(){return Zh}),m.d(Re,"midSide",function(){return Qh});var Ht={};m.r(Ht),m.d(Ht,"ratio",function(){return qh}),m.d(Ht,"length",function(){return _h}),m.d(Ht,"orth",function(){return nd}),m.d(Ht,"closest",function(){return ed});var Wt={};m.r(Wt),m.d(Wt,"bbox",function(){return Do}),m.d(Wt,"rect",function(){return id}),m.d(Wt,"boundary",function(){return ad}),m.d(Wt,"anchor",function(){return sd});var ct={};m.r(ct),m.d(ct,"normal",function(){return ld}),m.d(ct,"oneSide",function(){return ud}),m.d(ct,"orth",function(){return So}),m.d(ct,"metro",function(){return Od}),m.d(ct,"manhattan",function(){return Io}),m.d(ct,"er",function(){return Ad}),m.d(ct,"loop",function(){return Dd});var Pt={};m.r(Pt),m.d(Pt,"normal",function(){return Md}),m.d(Pt,"loop",function(){return Td}),m.d(Pt,"rounded",function(){return Sd}),m.d(Pt,"smooth",function(){return Pd}),m.d(Pt,"jumpover",function(){return Rd});var us=m(0),Q=m.n(us),cs=m(33),hs=m.n(cs),L=m(1),F=m(2),I=m(3),V=m(4),ds=m(26),ye=m.n(ds),ef=m(212),je=navigator.userAgent,we;if(function(o){o.IS_MAC=navigator.appVersion.indexOf("Mac")>0,o.IS_IOS=!!je.match(/(iPad|iPhone|iPod)/g),o.IS_WINDOWS=navigator.appVersion.indexOf("Win")>0,o.IS_IE=je.indexOf("MSIE")>=0,o.IS_IE11=!!je.match(/Trident\/7\./),o.IS_EDGE=!!je.match(/Edge\//),o.IS_NETSCAPE=je.indexOf("Mozilla/")>=0&&je.indexOf("MSIE")<0&&je.indexOf("Edge/")<0,o.IS_CHROME_APP=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,o.IS_CHROME=je.indexOf("Chrome/")>=0&&je.indexOf("Edge/")<0,o.IS_OPERA=je.indexOf("Opera/")>=0||je.indexOf("OPR/")>=0,o.IS_FIREFOX=je.indexOf("Firefox/")>=0,o.IS_SAFARI=je.indexOf("AppleWebKit/")>=0&&je.indexOf("Chrome/")<0&&je.indexOf("Edge/")<0,o.SUPPORT_TOUCH="ontouchstart"in document.documentElement,o.SUPPORT_POINTER=window.PointerEvent!=null&&!o.IS_MAC,o.SUPPORT_PASSIVE=!1;try{var s=Object.defineProperty({},"passive",{get:function(){o.SUPPORT_PASSIVE=!0}}),a=document.createElement("div");a.addEventListener&&a.addEventListener("click",function(){},s)}catch(n){}o.NO_FOREIGNOBJECT=!document.createElementNS||"".concat(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))!=="[object SVGForeignObjectElement]"||je.indexOf("Opera/")>=0,o.SUPPORT_FOREIGNOBJECT=!o.NO_FOREIGNOBJECT}(we||(we={})),function(o){function s(){var t=window.module;return t!=null&&t.hot!=null&&t.hot.status!=null?t.hot.status():"unkonwn"}o.getHMRStatus=s;function a(){return s()==="apply"}o.isApplyingHMR=a;var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function e(t){var r=document.createElement(n[t]||"div"),i="on".concat(t),l=i in r;return l||(r.setAttribute(i,"return;"),l=typeof r[i]=="function"),l}o.isEventSupported=e}(we||(we={})),we.SUPPORT_PASSIVE){ye.a.event.special.touchstart={setup:function(s,a,n){this.addEventListener("touchstart",n,{passive:!0})}};var jr=ye.a.event.special.mousewheel;if(jr){var gs=jr.setup;jr.setup=function(){var o=this,s=this.addEventListener;this.addEventListener=function(a,n){s.call(o,a,n,{passive:!0})},gs.call(this),this.addEventListener=s}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(o){o.forEach(function(s){if(s.hasOwnProperty("append"))return;Object.defineProperty(s,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var n=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();n.forEach(function(t){var r=t instanceof Node;e.appendChild(r?t:document.createTextNode(String(t)))}),this.appendChild(e)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var tf=function(s){return s&&s===s.window},fs=function(s){return!Array.isArray(s)&&s-parseFloat(s)+1>=0},vs=m(22),ps=m(42),ms=m(262),Cs=m(263),ys=m(307),bs=m(264),ws=m(298),xs=m(300),ks=m(308),Es=m(309),Os=m(299),As=m(310),Ds=m(265),Ms=m(266),Ts=m(267),Ss=m(268),Ps=m(21),Ns=m(143),js=m(269),Ls=m(270),Fs=m(271),Rs=m(302);function Xs(o){for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];a.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){t!=="constructor"&&Object.defineProperty(o.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})})}var zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a])};function Xi(o,s){zs(o,s);function a(){this.constructor=o}o.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}var Bs=function o(){Object(L.a)(this,o)},zi=/^\s*class\s+/.test("".concat(Bs))||/^\s*class\s*\{/.test("".concat(function(){function o(){Object(L.a)(this,o)}return o}()));function Is(o,s){var a=new Function("base",`
      return `.concat(zi,`
        ? class `).concat(o,` extends base { }
        : function `).concat(o,`() { return base.apply(this, arguments) }
    `))(s);return zi||Xi(a,s),a}function Bi(o,s){return o??s}function Vs(o,s,a){var n=o!=null?o[s]:null;return a!==void 0?Bi(n,a):n}function Us(o,s,a){var n=o!=null?o[s]:null;return n==null?a:(n=+n,isNaN(n)||!isFinite(n)?a:n)}function Gs(o,s,a){var n=o!=null?o[s]:null;return n==null?a:!!n}function Ii(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n,e=Array.isArray(s)?s:s.split(a);if(e.length)for(n=o;e.length;){var t=e.shift();if(Object(n)===n&&t&&t in n)n=n[t];else return}return n}function Hs(o,s,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",e=Array.isArray(s)?s:s.split(n),t=e.pop();if(t){var r=o;e.forEach(function(i){r[i]==null&&(r[i]={}),r=r[i]}),r[t]=a}return o}function Ws(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n=Array.isArray(s)?s.slice():s.split(a),e=n.pop();if(e)if(n.length>0){var t=Ii(o,n);t&&delete t[e]}else delete o[e];return o}function Vi(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",a=arguments.length>2?arguments[2]:void 0,n={};Object.keys(o).forEach(function(t){var r=o[t],i=typeof r=="object"||Array.isArray(r);if(i&&a&&a(r)&&(i=!1),i){var l=Vi(r,s,a);Object.keys(l).forEach(function(u){n[t+s+u]=l[u]})}else n[t]=r});for(var e in o)if(!o.hasOwnProperty(e))continue;return n}var $s=m(272),Ys=m(15),Js=m(205),Zs=m(311),Ks=m(273),Qs=m(274),qs=m(275),_s=m(276),el=m(277),tl=m(278),nl=m(279),rl=m(280),il=m(296),al=m(281);function ol(o){var s=null;try{s=window.eval(o)}catch(a){}return s}var sl=m(282),Ui=m(145),Lr=m(312),Gi=m(283),ll=m(284),Fr=m(285);function ul(o){return Object(Gi.a)(Object(Lr.a)(o)).replace(/ /g,"")}function cl(o){return Object(ll.a)(o).replace(/ /g,"_")}function hl(o){return Object(Fr.a)(o).replace(/ /g,".")}function dl(o){return Object(Fr.a)(o).replace(/ /g,"/")}function gl(o){return Object(Ui.a)(Object(Fr.a)(o))}function fl(o){return Object(Gi.a)(Object(Lr.a)(o))}function vl(o){for(var s=2166136261,a=!1,n=o,e=0,t=n.length;e<t;e+=1){var r=n.charCodeAt(e);r>127&&!a&&(n=unescape(encodeURIComponent(n)),r=n.charCodeAt(e),a=!0),s^=r,s+=(s<<1)+(s<<4)+(s<<7)+(s<<8)+(s<<24)}return s>>>0}function pl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var s=Math.random()*16|0,a=o==="x"?s:s&3|8;return a.toString(16)})}function ml(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=ye.a.parseHTML(o,null,!1);return a.forEach(function(n){var e=n;if(e){var t=e.attributes;if(t)for(var r=0,i=t.length;r<i;r+=1){var l=t.item(r);if(l){var u=l.value.toLowerCase(),c=l.name.toLowerCase();(c.startsWith("on")||u.startsWith("javascript:")||u.startsWith("data:")||u.startsWith("vbscript:"))&&e.removeAttribute(c)}}}}),s.raw?a:ye()("<div/>").append(a).html()}var Cl=m(182);function yl(o,s,a){var n=Math.min(2,Math.floor(o.length*.34)),e=Math.floor(o.length*.4)+1,t,r=!1,i=o.toLowerCase(),l=Object(Cl.a)(s),u;try{for(l.s();!(u=l.n()).done;){var c=u.value,h=a(c);if(h!==void 0&&Math.abs(h.length-i.length)<=n){var d=h.toLowerCase();if(d===i){if(h===o)continue;return c}if(r)continue;if(h.length<3)continue;var g=bl(i,d,e-1);if(g===void 0)continue;g<3?(r=!0,t=c):(e=g,t=c)}}}catch(f){l.e(f)}finally{l.f()}return t}function bl(o,s,a){for(var n=new Array(s.length+1),e=new Array(s.length+1),t=a+1,r=0;r<=s.length;r+=1)n[r]=r;for(var i=1;i<=o.length;i+=1){var l=o.charCodeAt(i-1),u=i>a?i-a:1,c=s.length>a+i?a+i:s.length;e[0]=i;for(var h=i,d=1;d<u;d+=1)e[d]=t;for(var g=u;g<=c;g+=1){var f=l===s.charCodeAt(g-1)?n[g-1]:Math.min(n[g]+1,e[g-1]+1,n[g-1]+2);e[g]=f,h=Math.min(h,f)}for(var v=c+1;v<=s.length;v+=1)e[v]=t;if(h>a)return;var p=n;n=e,e=p}var C=n[s.length];return C>a?void 0:C}var wl=m(286),xl=m(183),kl=m(287),El=m(184),Ol=m(288),Al=m(289),Dl=m(313),Ml=m(126),Tl=m(65),Sl=m(31),Pl=m(290),Nl=m(291);function jl(o,s){return(o%s+s)%s}function Ll(o,s){if(s==null)s=o??1,o=0;else if(s<o){var a=o;o=s,s=a}return Math.floor(Math.random()*(s-o+1)+o)}function Hi(o){return typeof o=="string"&&o.slice(-1)==="%"}function Fl(o,s){if(o==null)return 0;var a;if(typeof o=="string"){if(a=parseFloat(o),Hi(o)&&(a/=100,isFinite(a)))return a*s}else a=o;return isFinite(a)?a>0&&a<1?a*s:a:0}function Rl(o,s){function a(r){var i=new RegExp("(?:\\d+(?:\\.\\d+)*)(".concat(r,")$")).exec(o);return i?i[1]:null}var n=parseFloat(o);if(Number.isNaN(n))return null;var e;if(s==null)e="[A-Za-z]*";else if(Array.isArray(s)){if(s.length===0)return null;e=s.join("|")}else typeof s=="string"&&(e=s);var t=a(e);return t===null?null:{unit:t,value:n}}function Xl(o){if(typeof o=="object"){var s=0,a=0,n=0,e=0;return o.vertical!=null&&isFinite(o.vertical)&&(a=e=o.vertical),o.horizontal!=null&&isFinite(o.horizontal)&&(n=s=o.horizontal),o.left!=null&&isFinite(o.left)&&(s=o.left),o.top!=null&&isFinite(o.top)&&(a=o.top),o.right!=null&&isFinite(o.right)&&(n=o.right),o.bottom!=null&&isFinite(o.bottom)&&(e=o.bottom),{top:a,right:n,bottom:e,left:s}}var t=0;return o!=null&&isFinite(o)&&(t=o),{top:t,right:t,bottom:t,left:t}}var zl=m(94),Bl=m(314),Il=m(180),Vl=m(315),Ul=m(316);function Rr(o,s,a){if(a)switch(a.length){case 0:return o.call(s);case 1:return o.call(s,a[0]);case 2:return o.call(s,a[0],a[1]);case 3:return o.call(s,a[0],a[1],a[2]);case 4:return o.call(s,a[0],a[1],a[2],a[3]);case 5:return o.call(s,a[0],a[1],a[2],a[3],a[4]);case 6:return o.call(s,a[0],a[1],a[2],a[3],a[4],a[5]);default:return o.apply(s,a)}return o.call(s)}function Gl(o,s){for(var a=arguments.length,n=new Array(a>2?a-2:0),e=2;e<a;e++)n[e-2]=arguments[e];return Rr(o,s,n)}function Hl(o,s){for(var a=0,n=o.length;a<n;a+=1)if(o[a]===s)return o.push(o.splice(a,1)[0])}function Wl(o,s,a){var n=[],e={},t=function(){for(var i=!1,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var h=u.join("␀");return h in e?(i=!0,Hl(n,h)):(n.length>=1e3&&delete e[n.shift()],n.push(h),e[h]=Rr(o,s||null,u)),a?a(e[h],i):e[h]};return t}var W=m(7);function Wi(o){return typeof o=="object"&&o.then&&typeof o.then=="function"}function Xr(o){return o!=null&&(o instanceof Promise||Wi(o))}function $i(){for(var o=[],s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];a.forEach(function(r){Array.isArray(r)?o.push.apply(o,Object(W.a)(r)):o.push(r)});var e=o.some(function(r){return Xr(r)});if(e){var t=o.map(function(r){return Xr(r)?r:Promise.resolve(r!==!1)});return Promise.all(t).then(function(r){return r.reduce(function(i,l){return l!==!1&&i},!0)})}return o.every(function(r){return r!==!1})}function $l(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var n=$i(s);return typeof n=="boolean"?Promise.resolve(n):n}var zr=/[\t\r\n\f]/g,Br=/\S+/g,$t=function(s){return" ".concat(s," ")};function Nt(o){return o&&o.getAttribute&&o.getAttribute("class")||""}function Bn(o,s){if(o==null||s==null)return!1;var a=$t(Nt(o)),n=$t(s);return o.nodeType===1?a.replace(zr," ").includes(n):!1}function dn(o,s){if(o==null||s==null)return;if(typeof s=="function")return dn(o,s(Nt(o)));if(typeof s=="string"&&o.nodeType===1){var a=s.match(Br)||[],n=$t(Nt(o)).replace(zr," "),e=a.reduce(function(t,r){return t.indexOf($t(r))<0?"".concat(t).concat(r," "):t},n);e=e.trim(),n!==e&&o.setAttribute("class",e)}}function gn(o,s){if(o==null)return;if(typeof s=="function")return gn(o,s(Nt(o)));if((!s||typeof s=="string")&&o.nodeType===1){var a=(s||"").match(Br)||[],n=$t(Nt(o)).replace(zr," "),e=a.reduce(function(t,r){var i=$t(r);return t.indexOf(i)>-1?t.replace(i," "):t},n);e=s?e.trim():"",n!==e&&o.setAttribute("class",e)}}function Ir(o,s,a){if(o==null||s==null)return;if(a!=null&&typeof s=="string"){a?dn(o,s):gn(o,s);return}if(typeof s=="function")return Ir(o,s(Nt(o),a),a);if(typeof s=="string"){var n=s.match(Br)||[];n.forEach(function(e){Bn(o,e)?gn(o,e):dn(o,e)})}}var Yi=0;function Ji(){return Yi+=1,"v".concat(Yi)}function Zi(o){return(o.id==null||o.id==="")&&(o.id=Ji()),o.id}function In(o){return o==null?!1:typeof o.getScreenCTM=="function"&&o instanceof SVGElement}var tt={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Vr="1.1";function Yl(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return s.createElement(o)}function Ki(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.xhtml,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return a.createElementNS(s,o)}function nt(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return Ki(o,tt.svg,s)}function Vn(o){if(o){var s='<svg xmlns="'.concat(tt.svg,'" xmlns:xlink="').concat(tt.xlink,'" version="').concat(Vr,'">').concat(o,"</svg>"),a=Qi(s,{async:!1}),n=a.documentElement;return n}var e=document.createElementNS(tt.svg,"svg");return e.setAttributeNS(tt.xmlns,"xmlns:xlink",tt.xlink),e.setAttribute("version",Vr),e}function Qi(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a;try{var n=new DOMParser;if(s.async!=null){var e=n;e.async=s.async}a=n.parseFromString(o,s.mimeType||"text/xml")}catch(t){a=void 0}if(!a||a.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: ".concat(o));return a}function qi(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=o.nodeName;return s?a.toLowerCase():a.toUpperCase()}function _i(o){for(var s=0,a=o.previousSibling;a;)a.nodeType===1&&(s+=1),a=a.previousSibling;return s}function ea(o,s){return o.querySelectorAll(s)}function ta(o,s){return o.querySelector(s)}function na(o,s,a){for(var n=o.ownerSVGElement,e=o.parentNode;e&&e!==a&&e!==n;){if(Bn(e,s))return e;e=e.parentNode}return null}function ra(o,s){var a=s&&s.parentNode;return o===a||!!(a&&a.nodeType===1&&o.compareDocumentPosition(a)&16)}function ia(o){o.parentNode&&o.parentNode.removeChild(o)}function Ur(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Un(o,s){var a=Array.isArray(s)?s:[s];a.forEach(function(n){n!=null&&o.appendChild(n)})}function aa(o,s){var a=o.firstChild;return a?Gr(a,s):Un(o,s)}function Gr(o,s){var a=o.parentNode;if(a){var n=Array.isArray(s)?s:[s];n.forEach(function(e){e!=null&&a.insertBefore(e,o)})}}function oa(o,s){s!=null&&s.appendChild(o)}function sa(o){try{return o instanceof HTMLElement}catch(s){return typeof o=="object"&&o.nodeType===1&&typeof o.style=="object"&&typeof o.ownerDocument=="object"}}function la(o,s){return o.getAttribute(s)}function Hr(o,s){var a=$r(s);a.ns?o.hasAttributeNS(a.ns,a.local)&&o.removeAttributeNS(a.ns,a.local):o.hasAttribute(s)&&o.removeAttribute(s)}function Gn(o,s,a){if(a==null)return Hr(o,s);var n=$r(s);n.ns&&typeof a=="string"?o.setAttributeNS(n.ns,s,a):s==="id"?o.id="".concat(a):o.setAttribute(s,"".concat(a))}function Wr(o,s){Object.keys(s).forEach(function(a){Gn(o,a,s[a])})}function Te(o,s,a){if(s==null){for(var n=o.attributes,e={},t=0;t<n.length;t+=1)e[n[t].name]=n[t].value;return e}if(typeof s=="string"&&a===void 0)return o.getAttribute(s);typeof s=="object"?Wr(o,s):Gn(o,s,a)}function $r(o){if(o.indexOf(":")!==-1){var s=o.split(":");return{ns:tt[s[0]],local:s[1]}}return{ns:null,local:o}}function Jl(o){var s={};return Object.keys(o).forEach(function(a){var n=a.replace(/[A-Z]/g,"-$&").toLowerCase();s[n]=o[a]}),s}function fn(o){var s={},a=o.split(";");return a.forEach(function(n){var e=n.trim();if(e){var t=e.split("=");t.length&&(s[t[0].trim()]=t[1]?t[1].trim():"")}}),s}function Hn(o,s){return Object.keys(s).forEach(function(a){if(a==="class")o[a]=o[a]?"".concat(o[a]," ").concat(s[a]):s[a];else if(a==="style"){var n=typeof o[a]=="object",e=typeof s[a]=="object",t,r;n&&e?(t=o[a],r=s[a]):n?(t=o[a],r=fn(s[a])):e?(t=fn(o[a]),r=s[a]):(t=fn(o[a]),r=fn(s[a])),o[a]=Hn(t,r)}else o[a]=s[a]}),o}function Zl(o,s){for(var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=a.offset||0,e=[],t=[],r,i,l=null,u=0;u<o.length;u+=1){r=t[u]=o[u];for(var c=0,h=s.length;c<h;c+=1){var d=s[c],g=d.start+n,f=d.end+n;u>=g&&u<f&&(typeof r=="string"?r=t[u]={t:o[u],attrs:d.attrs}:r.attrs=Hn(Hn({},r.attrs),d.attrs),a.includeAnnotationIndices&&(r.annotations==null&&(r.annotations=[]),r.annotations.push(c)))}i=t[u-1],i?P.isObject(r)&&P.isObject(i)?(l=l,JSON.stringify(r.attrs)===JSON.stringify(i.attrs)?l.t+=r.t:(e.push(l),l=r)):P.isObject(r)||P.isObject(i)?(l=l,e.push(l),l=r):l=(l||"")+r:l=r}return l!=null&&e.push(l),e}function Kl(o,s){return o?o.filter(function(a){return a.start<s&&s<=a.end}):[]}function Ql(o,s,a){return o?o.filter(function(n){return s>=n.start&&s<n.end||a>n.start&&a<=n.end||n.start>=s&&n.end<a}):[]}function ql(o,s,a){return o&&o.forEach(function(n){n.start<s&&n.end>=s?n.end+=a:n.start>=s&&(n.start+=a,n.end+=a)}),o}function _l(o){return o.replace(/ /g," ")}var ua;(function(o){o.emptyObject=Object.freeze({}),o.emptyArray=Object.freeze([]);function s(c){return c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"}o.isPrimitive=s;function a(c){return Array.isArray(c)}o.isArray=a;function n(c){return!s(c)&&!a(c)}o.isObject=n;function e(c,h){if(c===h)return!0;if(s(c)||s(h))return!1;var d=a(c),g=a(h);return d!==g?!1:d&&g?r(c,h):i(c,h)}o.deepEqual=e;function t(c){return s(c)?c:a(c)?l(c):u(c)}o.deepCopy=t;function r(c,h){if(c===h)return!0;if(c.length!==h.length)return!1;for(var d=0,g=c.length;d<g;d+=1)if(!e(c[d],h[d]))return!1;return!0}function i(c,h){if(c===h)return!0;for(var d in c)if(!(d in h))return!1;for(var g in h)if(!(g in c))return!1;for(var f in c)if(!e(c[f],h[f]))return!1;return!0}function l(c){for(var h=new Array(c.length),d=0,g=c.length;d<g;d+=1)h[d]=t(c[d]);return h}function u(c){var h={};for(var d in c)h[d]=t(c[d]);return h}})(ua||(ua={}));var Yr;(function(o){function s(u){var c="data:";return u.substr(0,c.length)===c}o.isDataUrl=s;function a(u,c){if(!u||s(u)){setTimeout(function(){return c(null,u)});return}var h=function(){c(new Error("Failed to load image: ".concat(u)))},d=window.FileReader?function(f){if(f.status===200){var v=new FileReader;v.onload=function(p){var C=p.target.result;c(null,C)},v.onerror=h,v.readAsDataURL(f.response)}else h()}:function(f){var v=function(x){for(var k=32768,M=[],A=0;A<x.length;A+=k)M.push(String.fromCharCode.apply(null,x.subarray(A,A+k)));return M.join("")};if(f.status===200){var p=u.split(".").pop()||"png";p==="svg"&&(p="svg+xml");var C="data:image/".concat(p,";base64,"),b=new Uint8Array(f.response),y=C+btoa(v(b));c(null,y)}else h()},g=new XMLHttpRequest;g.responseType=window.FileReader?"blob":"arraybuffer",g.open("GET",u,!0),g.addEventListener("error",h),g.addEventListener("load",function(){return d(g)}),g.send()}o.imageToDataUri=a;function n(u){var c=u.replace(/\s/g,"");c=decodeURIComponent(c);var h=c.indexOf(","),d=c.slice(0,h),g=d.split(":")[1].split(";")[0],f=c.slice(h+1),v;d.indexOf("base64")>=0?v=atob(f):v=unescape(encodeURIComponent(f));for(var p=new Uint8Array(v.length),C=0;C<v.length;C+=1)p[C]=v.charCodeAt(C);return new Blob([p],{type:g})}o.dataUriToBlob=n;function e(u,c){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(u,c);else{var h=window.URL.createObjectURL(u),d=document.createElement("a");d.href=h,d.download=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(h)}}o.downloadBlob=e;function t(u,c){var h=n(u);e(h,c)}o.downloadDataUri=t;function r(u){var c=u.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return c&&c[2]?c[2].replace(/\s+/," ").split(" "):null}function i(u){var c=parseFloat(u);return isNaN(c)?null:c}function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=null,d=function(w){return h==null&&(h=r(u)),h!=null?i(h[w]):null},g=function(w){var x=u.match(w);return x&&x[2]?i(x[2]):null},f=c.width;if(f==null&&(f=g(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),f==null&&(f=d(2)),f==null)throw new Error("Can not parse width from svg string");var v=c.height;if(v==null&&(v=g(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),v==null&&(v=d(3)),v==null)throw new Error("Can not parse height from svg string");var p=encodeURIComponent(u).replace(/'/g,"%27").replace(/"/g,"%22"),C="data:image/svg+xml",b="".concat(C,",").concat(p);return b}o.svgToDataUrl=l})(Yr||(Yr={}));var jt,eu={px:function(s){return s},mm:function(s){return jt*s},cm:function(s){return jt*s*10},in:function(s){return jt*s*25.4},pt:function(s){return jt*(25.4*s/72)},pc:function(s){return jt*(25.4*s/6)}},Jr;(function(o){function s(n,e,t){var r=ye()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:n+(t||""),height:e+(t||"")}).appendTo(document.body),i={width:r.width()||0,height:r.height()||0};return r.remove(),i}o.measure=s;function a(n,e){jt==null&&(jt=s("1","1","mm").width);var t=e?eu[e]:null;return t?t(n):n}o.toPx=a})(Jr||(Jr={}));var tu=function(){var o,s=window;if(s!=null&&(o=s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame,o!=null&&(o=o.bind(s))),o==null){var a=0;o=function(e){var t=new Date().getTime(),r=Math.max(0,16-(t-a)),i=setTimeout(function(){e(t+r)},r);return a=t+r,i}}return o}(),nu=function(){var o,s=window;return s!=null&&(o=s.cancelAnimationFrame||s.webkitCancelAnimationFrame||s.webkitCancelRequestAnimationFrame||s.msCancelAnimationFrame||s.msCancelRequestAnimationFrame||s.oCancelAnimationFrame||s.oCancelRequestAnimationFrame||s.mozCancelAnimationFrame||s.mozCancelRequestAnimationFrame,o&&(o=o.bind(s))),o==null&&(o=clearTimeout),o}(),ru=/-(.)/g;function iu(o){return o.replace(ru,function(s,a){return a.toUpperCase()})}var Zr={},ca=["Webkit","ms","Moz","O"],ha=document?document.createElement("div").style:{};function au(o){for(var s=0;s<ca.length;s+=1){var a=ca[s]+o;if(a in ha)return a}return null}function da(o){var s=iu(o);if(Zr[s]==null){var a=s.charAt(0).toUpperCase()+s.slice(1);Zr[s]=s in ha?s:au(a)}return Zr[s]}function ou(o,s,a){var n=da(s);n!=null&&(o[n]=a),o[s]=a}function Wn(o,s){var a=o.ownerDocument&&o.ownerDocument.defaultView&&o.ownerDocument.defaultView.opener?o.ownerDocument.defaultView.getComputedStyle(o,null):window.getComputedStyle(o,null);return a&&s?a.getPropertyValue(s)||a[s]:a}function su(o){var s=Wn(o);return s!=null&&(s.overflow==="scroll"||s.overflow==="auto")}var lu=function(){var o=document;return o.selection?function(){o.selection.empty()}:window.getSelection?function(){var s=window.getSelection();s&&(s.empty?s.empty():s.removeAllRanges&&s.removeAllRanges())}:function(){}}(),re;(function(o){function s(n){return 180*n/Math.PI%360}o.toDeg=s,o.toRad=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e?n:n%360;return t*Math.PI/180};function a(n){return n%360+(n<0?360:0)}o.normalize=a})(re||(re={}));function Lt(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Number.isInteger(o)?o:+o.toFixed(s)}function ga(o,s){var a,n;if(s==null?(n=o??1,a=0):(n=s,a=o??0),n<a){var e=a;a=n,n=e}return Math.floor(Math.random()*(n-a+1)+a)}function Yt(o,s,a){return isNaN(o)?NaN:isNaN(s)||isNaN(a)?0:s<a?o<s?s:o>a?a:o:o<a?a:o>s?s:o}function Kr(o,s){return s*Math.round(o/s)}function fa(o,s){return s!=null&&o!=null&&s.x>=o.x&&s.x<=o.x+o.width&&s.y>=o.y&&s.y<=o.y+o.height}function va(o,s){var a=o.x-s.x,n=o.y-s.y;return a*a+n*n}var vt=function(){function o(){Object(L.a)(this,o)}return Object(F.a)(o,[{key:"valueOf",value:function(){return this.toJSON()}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),o}(),O=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e){var t;return Object(L.a)(this,a),t=s.call(this),t.x=n??0,t.y=e??0,t}return Object(F.a)(a,[{key:"round",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Lt(this.x,e),this.y=Lt(this.y,e),this}},{key:"add",value:function(e,t){var r=a.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"update",value:function(e,t){var r=a.create(e,t);return this.x=r.x,this.y=r.y,this}},{key:"translate",value:function(e,t){var r=a.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"rotate",value:function(e,t){var r=a.rotate(this,e,t);return this.x=r.x,this.y=r.y,this}},{key:"scale",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new a,i=a.create(r);return this.x=i.x+e*(this.x-i.x),this.y=i.y+t*(this.y-i.y),this}},{key:"closest",value:function(e){var t=this;if(e.length===1)return a.create(e[0]);var r=null,i=Infinity;return e.forEach(function(l){var u=t.squaredDistance(l);u<i&&(r=l,i=u)}),r?a.create(r):null}},{key:"distance",value:function(e){return Math.sqrt(this.squaredDistance(e))}},{key:"squaredDistance",value:function(e){var t=a.create(e),r=this.x-t.x,i=this.y-t.y;return r*r+i*i}},{key:"manhattanDistance",value:function(e){var t=a.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}},{key:"theta",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new a,t=a.create(e),r=-(t.y-this.y),i=t.x-this.x,l=Math.atan2(r,i);return l<0&&(l=2*Math.PI+l),180*l/Math.PI}},{key:"angleBetween",value:function(e,t){if(this.equals(e)||this.equals(t))return NaN;var r=this.theta(t)-this.theta(e);return r<0&&(r+=360),r}},{key:"vectorAngle",value:function(e){var t=new a(0,0);return t.angleBetween(this,e)}},{key:"toPolar",value:function(e){return this.update(a.toPolar(this,e)),this}},{key:"changeInAngle",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new a;return this.clone().translate(-e,-t).theta(r)-this.theta(r)}},{key:"adhereToRect",value:function(e){return fa(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}},{key:"bearing",value:function(e){var t=a.create(e),r=re.toRad(this.y),i=re.toRad(t.y),l=this.x,u=t.x,c=re.toRad(u-l),h=Math.sin(c)*Math.cos(i),d=Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(c),g=re.toDeg(Math.atan2(h,d)),f=["NE","E","SE","S","SW","W","NW","N"],v=g-22.5;return v<0&&(v+=360),v=parseInt(v/45,10),f[v]}},{key:"cross",value:function(e,t){if(e!=null&&t!=null){var r=a.create(e),i=a.create(t);return(i.x-this.x)*(r.y-this.y)-(i.y-this.y)*(r.x-this.x)}return NaN}},{key:"dot",value:function(e){var t=a.create(e);return this.x*t.x+this.y*t.y}},{key:"diff",value:function(e,t){if(typeof e=="number")return new a(this.x-e,this.y-t);var r=a.create(e);return new a(this.x-r.x,this.y-r.y)}},{key:"lerp",value:function(e,t){var r=a.create(e);return new a((1-t)*this.x+t*r.x,(1-t)*this.y+t*r.y)}},{key:"normalize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=e/this.magnitude();return this.scale(t,t)}},{key:"move",value:function(e,t){var r=a.create(e),i=re.toRad(r.theta(this));return this.translate(Math.cos(i)*t,-Math.sin(i)*t)}},{key:"reflection",value:function(e){return a.create(e).move(this,this.distance(e))}},{key:"snapToGrid",value:function(e,t){return this.x=Kr(this.x,e),this.y=Kr(this.y,t??e),this}},{key:"equals",value:function(e){var t=a.create(e);return t!=null&&t.x===this.x&&t.y===this.y}},{key:"clone",value:function(){return a.clone(this)}},{key:"toJSON",value:function(){return a.toJSON(this)}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y)}}]),a}(vt);(function(o){function s(n){return n!=null&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"}o.isPointLike=s;function a(n){return n!=null&&Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}o.isPointData=a})(O||(O={})),function(o){function s(h,d){return h==null||typeof h=="number"?new o(h,d):a(h)}o.create=s;function a(h){return h instanceof o?new o(h.x,h.y):Array.isArray(h)?new o(h[0],h[1]):new o(h.x,h.y)}o.clone=a;function n(h){return h instanceof o?{x:h.x,y:h.y}:Array.isArray(h)?{x:h[0],y:h[1]}:{x:h.x,y:h.y}}o.toJSON=n;function e(h,d){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new o,f=Math.abs(h*Math.cos(d)),v=Math.abs(h*Math.sin(d)),p=a(g),C=re.normalize(re.toDeg(d));return C<90?v=-v:C<180?(f=-f,v=-v):C<270&&(f=-f),new o(p.x+f,p.y+v)}o.fromPolar=e;function t(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new o,g=a(h),f=a(d),v=g.x-f.x,p=g.y-f.y;return new o(Math.sqrt(v*v+p*p),re.toRad(f.theta(g)))}o.toPolar=t;function r(h,d){return h===d?!0:h!=null&&d!=null?h.x===d.x&&h.y===d.y:!1}o.equals=r;function i(h,d){if(h==null&&d!=null||h!=null&&d==null||h!=null&&d!=null&&h.length!==d.length)return!1;if(h!=null&&d!=null){for(var g=0,f=h.length;g<f;g+=1)if(!r(h[g],d[g]))return!1}return!0}o.equalPoints=i;function l(h,d,g,f){return new o(ga(h,d),ga(g,f))}o.random=l;function u(h,d,g){var f=re.toRad(re.normalize(-d)),v=Math.sin(f),p=Math.cos(f);return c(h,p,v,g)}o.rotate=u;function c(h,d,g){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new o,v=a(h),p=a(f),C=v.x-p.x,b=v.y-p.y,y=C*d-b*g,w=b*d+C*g;return new o(y+p.x,w+p.y)}o.rotateEx=c}(O||(O={}));var U=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e,t,r){var i;return Object(L.a)(this,a),i=s.call(this),i.x=n??0,i.y=e??0,i.width=t??0,i.height=r??0,i}return Object(F.a)(a,[{key:"getOrigin",value:function(){return this.origin}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopCenter",value:function(){return this.topCenter}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getCenter",value:function(){return this.center}},{key:"getCenterX",value:function(){return this.x+this.width/2}},{key:"getCenterY",value:function(){return this.y+this.height/2}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomCenter",value:function(){return this.bottomCenter}},{key:"getBottomRight",value:function(){return this.bottomRight}},{key:"getCorner",value:function(){return this.corner}},{key:"getRightMiddle",value:function(){return this.rightMiddle}},{key:"getLeftMiddle",value:function(){return this.leftMiddle}},{key:"getTopLine",value:function(){return this.topLine}},{key:"getRightLine",value:function(){return this.rightLine}},{key:"getBottomLine",value:function(){return this.bottomLine}},{key:"getLeftLine",value:function(){return this.leftLine}},{key:"bbox",value:function(e){if(!e)return this.clone();var t=re.toRad(e),r=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t)),l=this.width*i+this.height*r,u=this.width*r+this.height*i;return new a(this.x+(this.width-l)/2,this.y+(this.height-u)/2,l,u)}},{key:"round",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Lt(this.x,e),this.y=Lt(this.y,e),this.width=Lt(this.width,e),this.height=Lt(this.height,e),this}},{key:"add",value:function(e,t,r,i){var l=a.create(e,t,r,i),u=Math.min(this.x,l.x),c=Math.min(this.y,l.y),h=Math.max(this.x+this.width,l.x+l.width),d=Math.max(this.y+this.height,l.y+l.height);return this.x=u,this.y=c,this.width=h-u,this.height=d-c,this}},{key:"update",value:function(e,t,r,i){var l=a.create(e,t,r,i);return this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height,this}},{key:"inflate",value:function(e,t){var r=e,i=t??e;return this.x-=r,this.y-=i,this.width+=2*r,this.height+=2*i,this}},{key:"snapToGrid",value:function(e,t){var r=this.origin.snapToGrid(e,t),i=this.corner.snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=i.x-r.x,this.height=i.y-r.y,this}},{key:"translate",value:function(e,t){var r=O.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"scale",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new O,i=this.origin.scale(e,t,r);return this.x=i.x,this.y=i.y,this.width*=e,this.height*=t,this}},{key:"rotate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCenter();if(e!==0){var r=re.toRad(e),i=Math.cos(r),l=Math.sin(r),u=this.getOrigin(),c=this.getTopRight(),h=this.getBottomRight(),d=this.getBottomLeft();u=O.rotateEx(u,i,l,t),c=O.rotateEx(c,i,l,t),h=O.rotateEx(h,i,l,t),d=O.rotateEx(d,i,l,t);var g=new a(u.x,u.y,0,0);g.add(c.x,c.y,0,0),g.add(h.x,h.y,0,0),g.add(d.x,d.y,0,0),this.update(g)}return this}},{key:"rotate90",value:function(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e;var t=this.width;return this.width=this.height,this.height=t,this}},{key:"moveAndExpand",value:function(e){var t=a.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}},{key:"getMaxScaleToFit",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,r=a.clone(e),i=t.x,l=t.y,u=Infinity,c=Infinity,h=Infinity,d=Infinity,g=Infinity,f=Infinity,v=Infinity,p=Infinity,C=r.topLeft;C.x<i&&(u=(this.x-i)/(C.x-i)),C.y<l&&(g=(this.y-l)/(C.y-l));var b=r.bottomRight;b.x>i&&(c=(this.x+this.width-i)/(b.x-i)),b.y>l&&(f=(this.y+this.height-l)/(b.y-l));var y=r.topRight;y.x>i&&(h=(this.x+this.width-i)/(y.x-i)),y.y<l&&(v=(this.y-l)/(y.y-l));var w=r.bottomLeft;return w.x<i&&(d=(this.x-i)/(w.x-i)),w.y>l&&(p=(this.y+this.height-l)/(w.y-l)),{sx:Math.min(u,c,h,d),sy:Math.min(g,f,v,p)}}},{key:"getMaxUniformScaleToFit",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,r=this.getMaxScaleToFit(e,t);return Math.min(r.sx,r.sy)}},{key:"containsPoint",value:function(e,t){return fa(this,O.create(e,t))}},{key:"containsRect",value:function(e,t,r,i){var l=a.create(e,t,r,i),u=this.x,c=this.y,h=this.width,d=this.height,g=l.x,f=l.y,v=l.width,p=l.height;return h===0||d===0||v===0||p===0?!1:g>=u&&f>=c&&g+v<=u+h&&f+p<=c+d}},{key:"intersectsWithLine",value:function(e){var t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],r=[],i=[];return t.forEach(function(l){var u=e.intersectsWithLine(l);u!==null&&i.indexOf(u.toString())<0&&(r.push(u),i.push(u.toString()))}),r.length>0?r:null}},{key:"intersectsWithLineFromCenterToPoint",value:function(e,t){var r=O.clone(e),i=this.center,l=null;t!=null&&t!==0&&r.rotate(t,i);for(var u=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],c=new $(i,r),h=u.length-1;h>=0;h-=1){var d=u[h].intersectsWithLine(c);if(d!==null){l=d;break}}return l&&t!=null&&t!==0&&l.rotate(-t,i),l}},{key:"intersectsWithRect",value:function(e,t,r,i){var l=a.create(e,t,r,i);if(!this.isIntersectWithRect(l))return null;var u=this.origin,c=this.corner,h=l.origin,d=l.corner,g=Math.max(u.x,h.x),f=Math.max(u.y,h.y);return new a(g,f,Math.min(c.x,d.x)-g,Math.min(c.y,d.y)-f)}},{key:"isIntersectWithRect",value:function(e,t,r,i){var l=a.create(e,t,r,i),u=this.origin,c=this.corner,h=l.origin,d=l.corner;return!(d.x<=u.x||d.y<=u.y||h.x>=c.x||h.y>=c.y)}},{key:"normalize",value:function(){var e=this.x,t=this.y,r=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=r,this.height=i,this}},{key:"union",value:function(e){var t=a.clone(e),r=this.origin,i=this.corner,l=t.origin,u=t.corner,c=Math.min(r.x,l.x),h=Math.min(r.y,l.y),d=Math.max(i.x,u.x),g=Math.max(i.y,u.y);return new a(c,h,d-c,g-h)}},{key:"getNearestSideToPoint",value:function(e){var t=O.clone(e),r=t.x-this.x,i=this.x+this.width-t.x,l=t.y-this.y,u=this.y+this.height-t.y,c=r,h="left";return i<c&&(c=i,h="right"),l<c&&(c=l,h="top"),u<c&&(h="bottom"),h}},{key:"getNearestPointToPoint",value:function(e){var t=O.clone(e);if(this.containsPoint(t)){var r=this.getNearestSideToPoint(t);switch(r){case"right":return new O(this.x+this.width,t.y);case"left":return new O(this.x,t.y);case"bottom":return new O(t.x,this.y+this.height);case"top":return new O(t.x,this.y)}}return t.adhereToRect(this)}},{key:"equals",value:function(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}},{key:"clone",value:function(){return new a(this.x,this.y,this.width,this.height)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.width," ").concat(this.height)}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"botom",get:function(){return this.y+this.height}},{key:"origin",get:function(){return new O(this.x,this.y)}},{key:"topLeft",get:function(){return new O(this.x,this.y)}},{key:"topCenter",get:function(){return new O(this.x+this.width/2,this.y)}},{key:"topRight",get:function(){return new O(this.x+this.width,this.y)}},{key:"center",get:function(){return new O(this.x+this.width/2,this.y+this.height/2)}},{key:"bottomLeft",get:function(){return new O(this.x,this.y+this.height)}},{key:"bottomCenter",get:function(){return new O(this.x+this.width/2,this.y+this.height)}},{key:"bottomRight",get:function(){return new O(this.x+this.width,this.y+this.height)}},{key:"corner",get:function(){return new O(this.x+this.width,this.y+this.height)}},{key:"rightMiddle",get:function(){return new O(this.x+this.width,this.y+this.height/2)}},{key:"leftMiddle",get:function(){return new O(this.x,this.y+this.height/2)}},{key:"topLine",get:function(){return new $(this.topLeft,this.topRight)}},{key:"rightLine",get:function(){return new $(this.topRight,this.bottomRight)}},{key:"bottomLine",get:function(){return new $(this.bottomLeft,this.bottomRight)}},{key:"leftLine",get:function(){return new $(this.topLeft,this.bottomLeft)}}]),a}(vt);(function(o){function s(a){return a!=null&&typeof a=="object"&&typeof a.x=="number"&&typeof a.y=="number"&&typeof a.width=="number"&&typeof a.height=="number"}o.isRectangleLike=s})(U||(U={})),function(o){function s(r,i,l,u){return r==null||typeof r=="number"?new o(r,i,l,u):a(r)}o.create=s;function a(r){return r instanceof o?r.clone():Array.isArray(r)?new o(r[0],r[1],r[2],r[3]):new o(r.x,r.y,r.width,r.height)}o.clone=a;function n(r){return new o(0,0,r.width,r.height)}o.fromSize=n;function e(r,i){return new o(r.x,r.y,i.width,i.height)}o.fromPositionAndSize=e;function t(r){return new o(r.x-r.a,r.y-r.b,2*r.a,2*r.b)}o.fromEllipse=t}(U||(U={}));var $=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e,t,r){var i;return Object(L.a)(this,a),i=s.call(this),typeof n=="number"&&typeof e=="number"?(i.start=new O(n,e),i.end=new O(t,r)):(i.start=O.create(n),i.end=O.create(e)),i}return Object(F.a)(a,[{key:"getCenter",value:function(){return this.center}},{key:"round",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.start.round(e),this.end.round(e),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}},{key:"rotate",value:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}},{key:"scale",value:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this}},{key:"length",value:function(){return Math.sqrt(this.squaredLength())}},{key:"squaredLength",value:function(){var e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}},{key:"setLength",value:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)}},{key:"parallel",value:function(e){var t=this.clone();if(!t.isDifferentiable())return t;var r=t.start,i=t.end,l=r.clone().rotate(270,i),u=i.clone().rotate(90,r);return r.move(u,e),i.move(l,e),t}},{key:"vector",value:function(){return new O(this.end.x-this.start.x,this.end.y-this.start.y)}},{key:"angle",value:function(){var e=new O(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}},{key:"bbox",value:function(){var e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),r=Math.max(this.start.x,this.end.x),i=Math.max(this.start.y,this.end.y);return new U(e,t,r-e,i-t)}},{key:"bearing",value:function(){return this.start.bearing(this.end)}},{key:"closestPoint",value:function(e){return this.pointAt(this.closestPointNormalizedLength(e))}},{key:"closestPointLength",value:function(e){return this.closestPointNormalizedLength(e)*this.length()}},{key:"closestPointTangent",value:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))}},{key:"closestPointNormalizedLength",value:function(e){var t=this.vector().dot(new a(this.start,e).vector()),r=Math.min(1,Math.max(0,t/this.squaredLength()));return r!==r?0:r}},{key:"pointAt",value:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)}},{key:"pointAtLength",value:function(e){var t=this.start,r=this.end,i=!0;e<0&&(i=!1,e=-e);var l=this.length();if(e>=l)return i?r.clone():t.clone();var u=(i?e:l-e)/l;return this.pointAt(u)}},{key:"divideAt",value:function(e){var t=this.pointAt(e);return[new a(this.start,t),new a(t,this.end)]}},{key:"divideAtLength",value:function(e){var t=this.pointAtLength(e);return[new a(this.start,t),new a(t,this.end)]}},{key:"containsPoint",value:function(e){var t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;var i=this.length();return new a(t,e).length()>i?!1:!(new a(e,r).length()>i)}},{key:"intersect",value:function(e,t){var r=e.intersectsWithLine(this,t);return r?Array.isArray(r)?r:[r]:null}},{key:"intersectsWithLine",value:function(e){var t=new O(this.end.x-this.start.x,this.end.y-this.start.y),r=new O(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*r.y-t.y*r.x,l=new O(e.start.x-this.start.x,e.start.y-this.start.y),u=l.x*r.y-l.y*r.x,c=l.x*t.y-l.y*t.x;if(i===0||u*i<0||c*i<0)return null;if(i>0){if(u>i||c>i)return null}else if(u<i||c<i)return null;return new O(this.start.x+u*t.x/i,this.start.y+u*t.y/i)}},{key:"isDifferentiable",value:function(){return!this.start.equals(this.end)}},{key:"pointOffset",value:function(e){var t=O.clone(e),r=this.start,i=this.end,l=(i.x-r.x)*(t.y-r.y)-(i.y-r.y)*(t.x-r.x);return l/this.length()}},{key:"pointSquaredDistance",value:function(e,t){var r=O.create(e,t);return this.closestPoint(r).squaredDistance(r)}},{key:"pointDistance",value:function(e,t){var r=O.create(e,t);return this.closestPoint(r).distance(r)}},{key:"tangentAt",value:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,i=this.pointAt(e),l=new a(t,r);return l.translate(i.x-t.x,i.y-t.y),l}},{key:"tangentAtLength",value:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,i=this.pointAtLength(e),l=new a(t,r);return l.translate(i.x-t.x,i.y-t.y),l}},{key:"relativeCcw",value:function(e,t){var r=O.create(e,t),i=r.x-this.start.x,l=r.y-this.start.y,u=this.end.x-this.start.x,c=this.end.y-this.start.y,h=i*c-l*u;return h===0&&(h=i*u+l*c,h>0&&(i-=u,l-=c,h=i*u+l*c,h<0&&(h=0))),h<0?-1:h>0?1:0}},{key:"equals",value:function(e){return e!=null&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}},{key:"clone",value:function(){return new a(this.start,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.end.serialize()].join(" ")}},{key:"center",get:function(){return new O((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}}]),a}(vt),Jt=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e,t,r){var i;return Object(L.a)(this,a),i=s.call(this),i.x=n??0,i.y=e??0,i.a=t??0,i.b=r??0,i}return Object(F.a)(a,[{key:"bbox",value:function(){return U.fromEllipse(this)}},{key:"getCenter",value:function(){return this.center}},{key:"inflate",value:function(e,t){var r=e,i=t??e;return this.a+=2*r,this.b+=2*i,this}},{key:"normalizedDistance",value:function(e,t){var r=O.create(e,t),i=r.x-this.x,l=r.y-this.y,u=this.a,c=this.b;return i*i/(u*u)+l*l/(c*c)}},{key:"containsPoint",value:function(e,t){return this.normalizedDistance(e,t)<=1}},{key:"intersectsWithLine",value:function(e){var t=[],r=this.a,i=this.b,l=e.start,u=e.end,c=e.vector(),h=l.diff(new O(this.x,this.y)),d=new O(c.x/(r*r),c.y/(i*i)),g=new O(h.x/(r*r),h.y/(i*i)),f=c.dot(d),v=c.dot(g),p=h.dot(g)-1,C=v*v-f*p;if(C<0)return null;if(C>0){var b=Math.sqrt(C),y=(-v-b)/f,w=(-v+b)/f;if((y<0||1<y)&&(w<0||1<w))return null;0<=y&&y<=1&&t.push(l.lerp(u,y)),0<=w&&w<=1&&t.push(l.lerp(u,w))}else{var x=-v/f;if(0<=x&&x<=1)t.push(l.lerp(u,x));else return null}return t}},{key:"intersectsWithLineFromCenterToPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=O.clone(e);t&&r.rotate(t,this.getCenter());var i=r.x-this.x,l=r.y-this.y,u;if(i===0)return u=this.bbox().getNearestPointToPoint(r),t?u.rotate(-t,this.getCenter()):u;var c=l/i,h=c*c,d=this.a*this.a,g=this.b*this.b,f=Math.sqrt(1/(1/d+h/g));f=i<0?-f:f;var v=c*f;return u=new O(this.x+f,this.y+v),t?u.rotate(-t,this.getCenter()):u}},{key:"tangentTheta",value:function(e){var t=O.clone(e),r=t.x,i=t.y,l=this.a,u=this.b,c=this.bbox().center,h=c.x,d=c.y,g=30,f=r>c.x+l/2,v=r<c.x-l/2,p,C;return f||v?(C=r>c.x?i-g:i+g,p=l*l/(r-h)-l*l*(i-d)*(C-d)/(u*u*(r-h))+h):(p=i>c.y?r+g:r-g,C=u*u/(i-d)-u*u*(r-h)*(p-h)/(l*l*(i-d))+d),new O(p,C).theta(t)}},{key:"scale",value:function(e,t){return this.a*=e,this.b*=t,this}},{key:"translate",value:function(e,t){var r=O.create(e,t);return this.x+=r.x,this.y+=r.y,this}},{key:"equals",value:function(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}},{key:"clone",value:function(){return new a(this.x,this.y,this.a,this.b)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,a:this.a,b:this.b}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.a," ").concat(this.b)}},{key:"center",get:function(){return new O(this.x,this.y)}}]),a}(vt);(function(o){function s(e,t,r,i){return e==null||typeof e=="number"?new o(e,t,r,i):a(e)}o.create=s;function a(e){return e instanceof o?e.clone():Array.isArray(e)?new o(e[0],e[1],e[2],e[3]):new o(e.x,e.y,e.a,e.b)}o.parse=a;function n(e){var t=e.center;return new o(t.x,t.y,e.width/2,e.height/2)}o.fromRect=n})(Jt||(Jt={}));var pa=m(115),Xe=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;if(Object(L.a)(this,a),e=s.call(this),n!=null){if(typeof n=="string")return Object(pa.a)(e,a.parse(n));e.points=n.map(function(t){return O.create(t)})}else e.points=[];return e}return Object(F.a)(a,[{key:"scale",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new O;return this.points.forEach(function(i){return i.scale(e,t,r)}),this}},{key:"translate",value:function(e,t){var r=O.create(e,t);return this.points.forEach(function(i){return i.translate(r.x,r.y)}),this}},{key:"bbox",value:function(){if(this.points.length===0)return new U;for(var e=Infinity,t=-Infinity,r=Infinity,i=-Infinity,l=this.points,u=0,c=l.length;u<c;u+=1){var h=l[u],d=h.x,g=h.y;d<e&&(e=d),d>t&&(t=d),g<r&&(r=g),g>i&&(i=g)}return new U(e,r,t-e,i-r)}},{key:"closestPoint",value:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)}},{key:"closestPointLength",value:function(e){var t=this.points,r=t.length;if(r===0||r===1)return 0;for(var i=0,l=0,u=Infinity,c=0,h=r-1;c<h;c+=1){var d=new $(t[c],t[c+1]),g=d.length(),f=d.closestPointNormalizedLength(e),v=d.pointAt(f),p=v.squaredDistance(e);p<u&&(u=p,l=i+f*g),i+=g}return l}},{key:"closestPointNormalizedLength",value:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var r=this.length();return r===0?0:t/r}},{key:"closestPointTangent",value:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)}},{key:"containsPoint",value:function(e){if(this.points.length===0)return!1;for(var t=O.clone(e),r=t.x,i=t.y,l=this.points,u=l.length,c=u-1,h=0,d=0;d<u;d+=1){var g=l[c],f=l[d];if(t.equals(g))return!0;var v=new $(g,f);if(v.containsPoint(e))return!0;if(i<=g.y&&i>f.y||i>g.y&&i<=f.y){var p=g.x-r>f.x-r?g.x-r:f.x-r;if(p>=0){var C=new O(r+p,i),b=new $(e,C);v.intersectsWithLine(b)&&(h+=1)}}c=d}return h%2===1}},{key:"intersectsWithLine",value:function(e){for(var t=[],r=0,i=this.points.length-1;r<i;r+=1){var l=this.points[r],u=this.points[r+1],c=e.intersectsWithLine(new $(l,u));c&&t.push(c)}return t.length>0?t:null}},{key:"isDifferentiable",value:function(){for(var e=0,t=this.points.length-1;e<t;e+=1){var r=this.points[e],i=this.points[e+1],l=new $(r,i);if(l.isDifferentiable())return!0}return!1}},{key:"length",value:function(){for(var e=0,t=0,r=this.points.length-1;t<r;t+=1){var i=this.points[t],l=this.points[t+1];e+=i.distance(l)}return e}},{key:"pointAt",value:function(e){var t=this.points,r=t.length;if(r===0)return null;if(r===1)return t[0].clone();if(e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var i=this.length(),l=i*e;return this.pointAtLength(l)}},{key:"pointAtLength",value:function(e){var t=this.points,r=t.length;if(r===0)return null;if(r===1)return t[0].clone();var i=!0;e<0&&(i=!1,e=-e);for(var l=0,u=0,c=r-1;u<c;u+=1){var h=i?u:c-1-u,d=t[h],g=t[h+1],f=new $(d,g),v=d.distance(g);if(e<=l+v)return f.pointAtLength((i?1:-1)*(e-l));l+=v}var p=i?t[r-1]:t[0];return p.clone()}},{key:"tangentAt",value:function(e){var t=this.points,r=t.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);var i=this.length(),l=i*e;return this.tangentAtLength(l)}},{key:"tangentAtLength",value:function(e){var t=this.points,r=t.length;if(r===0||r===1)return null;var i=!0;e<0&&(i=!1,e=-e);for(var l,u=0,c=0,h=r-1;c<h;c+=1){var d=i?c:h-1-c,g=t[d],f=t[d+1],v=new $(g,f),p=g.distance(f);if(v.isDifferentiable()){if(e<=u+p)return v.tangentAtLength((i?1:-1)*(e-u));l=v}u+=p}if(l){var C=i?1:0;return l.tangentAt(C)}return null}},{key:"simplify",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.points;if(t.length<3)return this;for(var r=e.threshold||0,i=0;t[i+2];){var l=i,u=i+1,c=i+2,h=t[l],d=t[u],g=t[c],f=new $(h,g),v=f.closestPoint(d),p=v.distance(d);p<=r?t.splice(u,1):i+=1}return this}},{key:"toHull",value:function(){var e=this.points,t=e.length;if(t===0)return new a;for(var r=e[0],i=1;i<t;i+=1)(e[i].y<r.y||e[i].y===r.y&&e[i].x>r.x)&&(r=e[i]);for(var l=[],u=0;u<t;u+=1){var c=r.theta(e[u]);c===0&&(c=360),l.push([e[u],u,c])}if(l.sort(function(ne,ve){var ge=ne[2]-ve[2];return ge===0&&(ge=ve[1]-ne[1]),ge}),l.length>2){var h=l[l.length-1];l.unshift(h)}for(var d={},g=[],f=function(ve){return"".concat(ve[0].toString(),"@").concat(ve[1])};l.length!==0;){var v=l.pop(),p=v[0];if(d[f(v)])continue;for(var C=!1;!C;)if(g.length<2)g.push(v),C=!0;else{var b=g.pop(),y=b[0],w=g.pop(),x=w[0],k=x.cross(y,p);if(k<0)g.push(w),g.push(b),g.push(v),C=!0;else if(k===0){var M=1e-10,A=y.angleBetween(x,p);Math.abs(A-180)<M||(y.equals(p)||x.equals(y))?(d[f(b)]=y,g.push(w)):Math.abs((A+1)%360-1)<M&&(g.push(w),l.push(b))}else d[f(b)]=y,g.push(w)}}g.length>2&&g.pop();for(var S,N=-1,j=0,B=g.length;j<B;j+=1){var X=g[j][1];(S===void 0||X<S)&&(S=X,N=j)}var z=[];if(N>0){var D=g.slice(N),T=g.slice(0,N);z=D.concat(T)}else z=g;for(var G=[],Y=0,K=z.length;Y<K;Y+=1)G.push(z[Y][0]);return new a(G)}},{key:"equals",value:function(e){var t=this;return e==null||e.points.length!==this.points.length?!1:e.points.every(function(r,i){return r.equals(t.points[i])})}},{key:"clone",value:function(){return new a(this.points.map(function(e){return e.clone()}))}},{key:"toJSON",value:function(){return this.points.map(function(e){return e.toJSON()})}},{key:"serialize",value:function(){return this.points.map(function(e){return"".concat(e.x,", ").concat(e.y)}).join(" ")}},{key:"start",get:function(){return this.points.length===0?null:this.points[0]}},{key:"end",get:function(){return this.points.length===0?null:this.points[this.points.length-1]}}]),a}(vt);(function(o){function s(a){var n=a.trim();if(n==="")return new o;for(var e=[],t=n.split(/\s*,\s*|\s+/),r=0,i=t.length;r<i;r+=2)e.push({x:+t[r],y:+t[r+1]});return new o(e)}o.parse=s})(Xe||(Xe={}));var Je=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e,t,r){var i;return Object(L.a)(this,a),i=s.call(this),i.PRECISION=3,i.start=O.create(n),i.controlPoint1=O.create(e),i.controlPoint2=O.create(t),i.end=O.create(r),i}return Object(F.a)(a,[{key:"bbox",value:function(){for(var e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end,l=e.x,u=e.y,c=t.x,h=t.y,d=r.x,g=r.y,f=i.x,v=i.y,p=[],C=[],b=[[],[]],y,w,x,k,M,A,S,N,j=0;j<2;j+=1){if(j===0?(w=6*l-12*c+6*d,y=-3*l+9*c-9*d+3*f,x=3*c-3*l):(w=6*u-12*h+6*g,y=-3*u+9*h-9*g+3*v,x=3*h-3*u),Math.abs(y)<1e-12){if(Math.abs(w)<1e-12)continue;k=-x/w,0<k&&k<1&&C.push(k);continue}if(S=w*w-4*x*y,N=Math.sqrt(S),S<0)continue;M=(-w+N)/(2*y),0<M&&M<1&&C.push(M),A=(-w-N)/(2*y),0<A&&A<1&&C.push(A)}for(var B,X,z,D=C.length,T=D;D;)D-=1,k=C[D],z=1-k,B=z*z*z*l+3*z*z*k*c+3*z*k*k*d+k*k*k*f,b[0][D]=B,X=z*z*z*u+3*z*z*k*h+3*z*k*k*g+k*k*k*v,b[1][D]=X,p[D]={X:B,Y:X};C[T]=0,C[T+1]=1,p[T]={X:l,Y:u},p[T+1]={X:f,Y:v},b[0][T]=l,b[1][T]=u,b[0][T+1]=f,b[1][T+1]=v,C.length=T+2,b[0].length=T+2,b[1].length=T+2,p.length=T+2;var G=Math.min.apply(null,b[0]),Y=Math.min.apply(null,b[1]),K=Math.max.apply(null,b[0]),ne=Math.max.apply(null,b[1]);return new U(G,Y,K-G,ne-Y)}},{key:"closestPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.pointAtT(this.closestPointT(e,t))}},{key:"closestPointLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,r),r)}},{key:"closestPointNormalizedLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t),i=this.closestPointLength(e,r);if(!i)return 0;var l=this.length(r);return l===0?0:i/l}},{key:"closestPointT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getPrecision(t),i=this.getDivisions(t),l=Math.pow(10,-r),u=null,c=0,h=0,d=0,g=0,f=0,v=null,p=i.length,C=p>0?1/p:0;for(i.forEach(function(D,T){var G=D.start.distance(e),Y=D.end.distance(e),K=G+Y;(v==null||K<v)&&(u=D,c=T*C,h=(T+1)*C,d=G,g=Y,v=K,f=D.endpointDistance())});;){var b=d?Math.abs(d-g)/d:0,y=g!=null?Math.abs(d-g)/g:0,w=b<l||y<l,x=d?d<f*l:!0,k=g?g<f*l:!0,M=x||k;if(w||M)return d<=g?c:h;var A=u.divide(.5);C/=2;var S=A[0].start.distance(e),N=A[0].end.distance(e),j=S+N,B=A[1].start.distance(e),X=A[1].end.distance(e),z=B+X;j<=z?(u=A[0],h-=C,d=S,g=N):(u=A[1],c+=C,d=B,g=X)}}},{key:"closestPointTangent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.tangentAtT(this.closestPointT(e,t))}},{key:"containsPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.toPolyline(t);return r.containsPoint(e)}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.tAtLength(e,t);return this.divideAtT(r)}},{key:"divide",value:function(e){return this.divideAtT(e)}},{key:"divideAtT",value:function(e){var t=this.start,r=this.controlPoint1,i=this.controlPoint2,l=this.end;if(e<=0)return[new a(t,t,t,t),new a(t,r,i,l)];if(e>=1)return[new a(t,r,i,l),new a(l,l,l,l)];var u=this.getSkeletonPoints(e),c=u.startControlPoint1,h=u.startControlPoint2,d=u.divider,g=u.dividerControlPoint1,f=u.dividerControlPoint2;return[new a(t,c,h,d),new a(d,g,f,l)]}},{key:"endpointDistance",value:function(){return this.start.distance(this.end)}},{key:"getSkeletonPoints",value:function(e){var t=this.start,r=this.controlPoint1,i=this.controlPoint2,l=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:i.clone(),divider:l.clone(),dividerControlPoint1:l.clone(),dividerControlPoint2:l.clone()};var u=new $(t,r).pointAt(e),c=new $(r,i).pointAt(e),h=new $(i,l).pointAt(e),d=new $(u,c).pointAt(e),g=new $(c,h).pointAt(e),f=new $(d,g).pointAt(e);return{startControlPoint1:u,startControlPoint2:d,divider:f,dividerControlPoint1:g,dividerControlPoint2:h}}},{key:"getSubdivisions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=[new a(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(t===0)return r;for(var i=this.endpointDistance(),l=Math.pow(10,-t),u=0,c=function(){u+=1;var g=[];r.forEach(function(p){var C=p.divide(.5);g.push(C[0],C[1])});var f=g.reduce(function(p,C){return p+C.endpointDistance()},0),v=f!==0?(f-i)/f:0;if(u>1&&v<l)return{v:g};r=g,i=f};;){var h=c();if(typeof h=="object")return h.v}}},{key:"length",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getDivisions(e);return t.reduce(function(r,i){return r+i.endpointDistance()},0)}},{key:"lengthAtT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return 0;var r=t.precision===void 0?this.PRECISION:t.precision,i=this.divide(e)[0];return i.length({precision:r})}},{key:"pointAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)}},{key:"pointAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.tAtLength(e,t);return this.pointAtT(r)}},{key:"pointAtT",value:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}},{key:"isDifferentiable",value:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(i))}},{key:"tangentAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)}},{key:"tangentAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)}},{key:"tangentAtT",value:function(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,i=t.dividerControlPoint1,l=t.divider,u=new $(r,i);return u.translate(l.x-r.x,l.y-r.y),u}},{key:"getPrecision",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.precision==null?this.PRECISION:e.precision}},{key:"getDivisions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.subdivisions!=null)return e.subdivisions;var t=this.getPrecision(e);return this.getSubdivisions({precision:t})}},{key:"getOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=this.getDivisions(e);return{precision:t,subdivisions:r}}},{key:"tAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e<=0)return 0;if(e>=1)return 1;var r=this.getOptions(t),i=this.length(r),l=i*e;return this.tAtLength(l,r)}},{key:"tAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=!0;e<0&&(r=!1,e=-e);for(var i=this.getPrecision(t),l=this.getDivisions(t),u={precision:i,subdivisions:l},c=null,h,d,g=0,f=0,v=0,p=l.length,C=p>0?1/p:0,b=0;b<p;b+=1){var y=r?b:p-1-b,w=l[b],x=w.endpointDistance();if(e<=v+x){c=w,h=y*C,d=(y+1)*C,g=r?e-v:x+v-e,f=r?x+v-e:e-v;break}v+=x}if(c==null)return r?1:0;for(var k=this.length(u),M=Math.pow(10,-i);;){var A=void 0;if(A=k!==0?g/k:0,A<M)return h;if(A=k!==0?f/k:0,A<M)return d;var S=void 0,N=void 0,j=c.divide(.5);C/=2;var B=j[0].endpointDistance(),X=j[1].endpointDistance();g<=B?(c=j[0],d-=C,S=g,N=B-S):(c=j[1],h+=C,S=g-B,N=X-S),g=S,f=N}}},{key:"toPoints",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getDivisions(e),r=[t[0].start.clone()];return t.forEach(function(i){return r.push(i.end.clone())}),r}},{key:"toPolyline",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Xe(this.toPoints(e))}},{key:"scale",value:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return e!=null&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new a(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}]),a}(vt);(function(o){function s(e){var t=e.length,r=[],i=[],l=2;r[0]=e[0]/l;for(var u=1;u<t;u+=1)i[u]=1/l,l=(u<t-1?4:3.5)-i[u],r[u]=(e[u]-r[u-1])/l;for(var c=1;c<t;c+=1)r[t-c-1]-=i[t-c]*r[t-c];return r}function a(e){var t=e.map(function(v){return O.clone(v)}),r=[],i=[],l=t.length-1;if(l===1)return r[0]=new O((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),i[0]=new O(2*r[0].x-t[0].x,2*r[0].y-t[0].y),[r,i];for(var u=[],c=1;c<l-1;c+=1)u[c]=4*t[c].x+2*t[c+1].x;u[0]=t[0].x+2*t[1].x,u[l-1]=(8*t[l-1].x+t[l].x)/2;for(var h=s(u),d=1;d<l-1;d+=1)u[d]=4*t[d].y+2*t[d+1].y;u[0]=t[0].y+2*t[1].y,u[l-1]=(8*t[l-1].y+t[l].y)/2;for(var g=s(u),f=0;f<l;f+=1)r.push(new O(h[f],g[f])),f<l-1?i.push(new O(2*t[f+1].x-h[f+1],2*t[f+1].y-g[f+1])):i.push(new O((t[l].x+h[l-1])/2,(t[l].y+g[l-1])/2));return[r,i]}function n(e){if(e==null||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var t=a(e),r=[],i=0,l=t[0].length;i<l;i+=1){var u=new O(t[0][i].x,t[0][i].y),c=new O(t[1][i].x,t[1][i].y);r.push(new o(e[i],u,c,e[i+1]))}return r}o.throughPoints=n})(Je||(Je={}));var $n=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.isVisible=!0,n.isSegment=!0,n.isSubpathStart=!1,n}return Object(F.a)(a,[{key:"closestPointT",value:function(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}},{key:"lengthAtT",value:function(e,t){if(e<=0)return 0;var r=this.length();return e>=1?r:r*e}},{key:"divideAtT",value:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}},{key:"pointAtT",value:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}},{key:"tangentAtT",value:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}},{key:"end",get:function(){return this.endPoint}},{key:"start",get:function(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}}]),a}(vt),rt=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e){var t;return Object(L.a)(this,a),t=s.call(this),n instanceof $?t.endPoint=n.end.clone().round(2):t.endPoint=O.create(n,e).round(2),t}return Object(F.a)(a,[{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[new a(t[0]),new a(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[new a(t[0]),new a(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return this.previousSegment==null?!1:!this.start.equals(this.end)}},{key:"clone",value:function(){return new a(this.end)}},{key:"scale",value:function(e,t,r){return this.end.scale(e,t,r),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}},{key:"type",get:function(){return"L"}},{key:"line",get:function(){return new $(this.start,this.end)}}]),a}($n);(function(o){function s(){for(var a=arguments.length,n=new Array(a),e=0;e<a;e++)n[e]=arguments[e];var t=n.length,r=n[0];if(r instanceof $)return new o(r);if(O.isPointLike(r))return t===1?new o(r):n.map(function(h){return new o(h)});if(t===2)return new o(+n[0],+n[1]);for(var i=[],l=0;l<t;l+=2){var u=+n[l],c=+n[l+1];i.push(new o(u,c))}return i}o.create=s})(rt||(rt={}));var Yn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[t[1].isDifferentiable()?new rt(t[0]):this.clone(),new rt(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new rt(t[0]):this.clone(),new rt(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}},{key:"scale",value:function(){return this}},{key:"translate",value:function(){return this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new a}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return this.type}},{key:"end",get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}},{key:"type",get:function(){return"Z"}},{key:"line",get:function(){return new $(this.start,this.end)}}]),a}($n);(function(o){function s(){return new o}o.create=s})(Yn||(Yn={}));var Jn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e){var t;return Object(L.a)(this,a),t=s.call(this),t.isVisible=!1,t.isSubpathStart=!0,n instanceof $||n instanceof Je?t.endPoint=n.end.clone().round(2):t.endPoint=O.create(n,e).round(2),t}return Object(F.a)(a,[{key:"bbox",value:function(){return null}},{key:"closestPoint",value:function(){return this.end.clone()}},{key:"closestPointLength",value:function(){return 0}},{key:"closestPointNormalizedLength",value:function(){return 0}},{key:"closestPointT",value:function(){return 1}},{key:"closestPointTangent",value:function(){return null}},{key:"length",value:function(){return 0}},{key:"lengthAtT",value:function(){return 0}},{key:"divideAt",value:function(){return[this.clone(),this.clone()]}},{key:"divideAtLength",value:function(){return[this.clone(),this.clone()]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(){return this.end.clone()}},{key:"pointAtLength",value:function(){return this.end.clone()}},{key:"pointAtT",value:function(){return this.end.clone()}},{key:"tangentAt",value:function(){return null}},{key:"tangentAtLength",value:function(){return null}},{key:"tangentAtT",value:function(){return null}},{key:"isDifferentiable",value:function(){return!1}},{key:"scale",value:function(e,t,r){return this.end.scale(e,t,r),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"clone",value:function(){return new a(this.end)}},{key:"equals",value:function(e){return this.type===e.type&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}},{key:"start",get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}},{key:"type",get:function(){return"M"}}]),a}($n);(function(o){function s(){var a=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(n instanceof $)return new o(n);if(n instanceof Je)return new o(n);if(O.isPointLike(n)){if(a===1)return new o(n);for(var e=[],t=0;t<a;t+=1)t===0?e.push(new o(t<0||arguments.length<=t?void 0:arguments[t])):e.push(new rt(t<0||arguments.length<=t?void 0:arguments[t]));return e}if(a===2)return new o(+(arguments.length<=0?void 0:arguments[0]),+(arguments.length<=1?void 0:arguments[1]));for(var r=[],i=0;i<a;i+=2){var l=+(i<0||arguments.length<=i?void 0:arguments[i]),u=+(i+1<0||arguments.length<=i+1?void 0:arguments[i+1]);i===0?r.push(new o(l,u)):r.push(new rt(l,u))}return r}o.create=s})(Jn||(Jn={}));var Zn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n,e,t,r,i,l){var u;return Object(L.a)(this,a),u=s.call(this),n instanceof Je?(u.controlPoint1=n.controlPoint1.clone().round(2),u.controlPoint2=n.controlPoint2.clone().round(2),u.endPoint=n.end.clone().round(2)):typeof n=="number"?(u.controlPoint1=new O(n,e).round(2),u.controlPoint2=new O(t,r).round(2),u.endPoint=new O(i,l).round(2)):(u.controlPoint1=O.create(n).round(2),u.controlPoint2=O.create(e).round(2),u.endPoint=O.create(t).round(2)),u}return Object(F.a)(a,[{key:"bbox",value:function(){return this.curve.bbox()}},{key:"closestPoint",value:function(e){return this.curve.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.curve.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.curve.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.curve.closestPointTangent(e)}},{key:"length",value:function(){return this.curve.length()}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.curve.divideAt(e,t);return[new a(r[0]),new a(r[1])]}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.curve.divideAtLength(e,t);return[new a(r[0]),new a(r[1])]}},{key:"divideAtT",value:function(e){var t=this.curve.divideAtT(e);return[new a(t[0]),new a(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.curve.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.curve.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.curve.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.curve.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(i))}},{key:"scale",value:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}},{key:"clone",value:function(){return new a(this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return[this.type,e.x,e.y,t.x,t.y,r.x,r.y].join(" ")}},{key:"type",get:function(){return"C"}},{key:"curve",get:function(){return new Je(this.start,this.controlPoint1,this.controlPoint2,this.end)}}]),a}($n);(function(o){function s(){var a=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(n instanceof Je)return new o(n);if(O.isPointLike(n)){if(a===3)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);for(var e=[],t=0;t<a;t+=3)e.push(new o(t<0||arguments.length<=t?void 0:arguments[t],t+1<0||arguments.length<=t+1?void 0:arguments[t+1],t+2<0||arguments.length<=t+2?void 0:arguments[t+2]));return e}if(a===6)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]);for(var r=[],i=0;i<a;i+=6)r.push(new o(i<0||arguments.length<=i?void 0:arguments[i],i+1<0||arguments.length<=i+1?void 0:arguments[i+1],i+2<0||arguments.length<=i+2?void 0:arguments[i+2],i+3<0||arguments.length<=i+3?void 0:arguments[i+3],i+4<0||arguments.length<=i+4?void 0:arguments[i+4],i+5<0||arguments.length<=i+5?void 0:arguments[i+5]));return r}o.create=s})(Zn||(Zn={}));function Kn(o,s,a){return{x:o*Math.cos(a)-s*Math.sin(a),y:o*Math.sin(a)+s*Math.cos(a)}}function ma(o,s,a,n,e,t){var r=1/3,i=2/3;return[r*o+i*a,r*s+i*n,r*e+i*a,r*t+i*n,e,t]}function Ca(o,s,a,n,e,t,r,i,l,u){var c=Math.PI*120/180,h=Math.PI/180*(+e||0),d=[],g,f,v,p,C;if(u)f=u[0],v=u[1],p=u[2],C=u[3];else{g=Kn(o,s,-h),o=g.x,s=g.y,g=Kn(i,l,-h),i=g.x,l=g.y;var b=(o-i)/2,y=(s-l)/2,w=b*b/(a*a)+y*y/(n*n);w>1&&(w=Math.sqrt(w),a=w*a,n=w*n);var x=a*a,k=n*n,M=(t===r?-1:1)*Math.sqrt(Math.abs((x*k-x*y*y-k*b*b)/(x*y*y+k*b*b)));p=M*a*y/n+(o+i)/2,C=M*-n*b/a+(s+l)/2,f=Math.asin((s-C)/n),v=Math.asin((l-C)/n),f=o<p?Math.PI-f:f,v=i<p?Math.PI-v:v,f<0&&(f=Math.PI*2+f),v<0&&(v=Math.PI*2+v),r&&f>v&&(f=f-Math.PI*2),!r&&v>f&&(v=v-Math.PI*2)}var A=v-f;if(Math.abs(A)>c){var S=v,N=i,j=l;v=f+c*(r&&v>f?1:-1),i=p+a*Math.cos(v),l=C+n*Math.sin(v),d=Ca(i,l,a,n,e,0,r,N,j,[v,S,p,C])}A=v-f;var B=Math.cos(f),X=Math.sin(f),z=Math.cos(v),D=Math.sin(v),T=Math.tan(A/4),G=4/3*(a*T),Y=4/3*(n*T),K=[o,s],ne=[o+G*X,s-Y*B],ve=[i+G*D,l-Y*z],ge=[i,l];if(ne[0]=2*K[0]-ne[0],ne[1]=2*K[1]-ne[1],u)return[ne,ve,ge].concat(d);{d=[ne,ve,ge].concat(d).join().split(",");for(var Ie=[],Ne=d.length,Ee=0;Ee<Ne;Ee+=1)Ie[Ee]=Ee%2?Kn(+d[Ee-1],+d[Ee],h).y:Kn(+d[Ee],+d[Ee+1],h).x;return Ie}}function uu(o){if(!o)return null;var s=`	
\v\f\r   ᠎             　\u2028\u2029`,a=new RegExp("([a-z])["+s+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+s+"]*,?["+s+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+s+"]*,?["+s+"]*","ig"),e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=[];return o.replace(a,function(r,i,l){var u=[],c=i.toLowerCase();l.replace(n,function(d,g){return g&&u.push(+g),d}),c==="m"&&u.length>2&&(t.push([i].concat(Object(W.a)(u.splice(0,2)))),c="l",i=i==="m"?"l":"L");for(var h=e[c];u.length>=h&&!(t.push([i].concat(Object(W.a)(u.splice(0,h)))),!h););return r}),t}function cu(o){var s=uu(o);if(!s||!s.length)return[["M",0,0]];for(var a=0,n=0,e=0,t=0,r=[],i=0,l=s.length;i<l;i+=1){var u=[];r.push(u);var c=s[i],h=c[0];if(h!==h.toUpperCase()){u[0]=h.toUpperCase();switch(u[0]){case"A":u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=+c[6]+a,u[7]=+c[7]+n;break;case"V":u[1]=+c[1]+n;break;case"H":u[1]=+c[1]+a;break;case"M":e=+c[1]+a,t=+c[2]+n;for(var d=1,g=c.length;d<g;d+=1)u[d]=+c[d]+(d%2?a:n);break;default:for(var f=1,v=c.length;f<v;f+=1)u[f]=+c[f]+(f%2?a:n);break}}else for(var p=0,C=c.length;p<C;p+=1)u[p]=c[p];switch(u[0]){case"Z":a=+e,n=+t;break;case"H":a=u[1];break;case"V":n=u[1];break;case"M":e=u[u.length-2],t=u[u.length-1],a=u[u.length-2],n=u[u.length-1];break;default:a=u[u.length-2],n=u[u.length-1];break}}return r}function hu(o){var s=cu(o),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(d,g,f){var v,p;if(!d)return["C",g.x,g.y,g.x,g.y,g.x,g.y];d[0]in{T:1,Q:1}||(g.qx=null,g.qy=null);switch(d[0]){case"M":g.X=d[1],g.Y=d[2];break;case"A":return parseFloat(d[1])===0||parseFloat(d[2])===0?["L",d[6],d[7]]:["C"].concat(Ca.apply(0,[g.x,g.y].concat(d.slice(1))));case"S":return f==="C"||f==="S"?(v=g.x*2-g.bx,p=g.y*2-g.by):(v=g.x,p=g.y),["C",v,p].concat(d.slice(1));case"T":return f==="Q"||f==="T"?(g.qx=g.x*2-g.qx,g.qy=g.y*2-g.qy):(g.qx=g.x,g.qy=g.y),["C"].concat(ma(g.x,g.y,g.qx,g.qy,d[1],d[2]));case"Q":return g.qx=d[1],g.qy=d[2],["C"].concat(ma(g.x,g.y,d[1],d[2],d[3],d[4]));case"H":return["L"].concat(d[1],g.y);case"V":return["L"].concat(g.x,d[1]);case"L":break;case"Z":break}return d}function e(d,g){if(d[g].length>7){d[g].shift();for(var f=d[g];f.length;)t[g]="A",g+=1,d.splice(g,0,["C"].concat(f.splice(0,6)));d.splice(g,1),i=s.length}}for(var t=[],r="",i=s.length,l=0;l<i;l+=1){var u="";s[l]&&(u=s[l][0]),u!=="C"&&(t[l]=u,l>0&&(r=t[l-1])),s[l]=n(s[l],a,r),t[l]!=="A"&&u==="C"&&(t[l]="C"),e(s,l);var c=s[l],h=c.length;a.x=c[h-2],a.y=c[h-1],a.bx=parseFloat(c[h-4])||a.x,a.by=parseFloat(c[h-3])||a.y}return(!s[0][0]||s[0][0]!=="M")&&s.unshift(["M",0,0]),s}function du(o){return hu(o).map(function(s){return s.map(function(a){return typeof a=="string"?a:Lt(a,2)})}).join(",").split(",").join(" ")}var se=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;if(Object(L.a)(this,a),e=s.call(this),e.PRECISION=3,e.segments=[],Array.isArray(n))if(n[0]instanceof $||n[0]instanceof Je){var t=null,r=n;r.forEach(function(l,u){u===0&&e.appendSegment(a.createSegment("M",l.start)),t!=null&&!t.end.equals(l.start)&&e.appendSegment(a.createSegment("M",l.start)),l instanceof $?e.appendSegment(a.createSegment("L",l.end)):l instanceof Je&&e.appendSegment(a.createSegment("C",l.controlPoint1,l.controlPoint2,l.end)),t=l})}else{var i=n;i.forEach(function(l){l.isSegment&&e.appendSegment(l)})}else n!=null&&(n instanceof $?(e.appendSegment(a.createSegment("M",n.start)),e.appendSegment(a.createSegment("L",n.end))):n instanceof Je?(e.appendSegment(a.createSegment("M",n.start)),e.appendSegment(a.createSegment("C",n.controlPoint1,n.controlPoint2,n.end))):n instanceof Xe?n.points&&n.points.length&&n.points.forEach(function(l,u){var c=u===0?a.createSegment("M",l):a.createSegment("L",l);e.appendSegment(c)}):n.isSegment&&e.appendSegment(n));return e}return Object(F.a)(a,[{key:"moveTo",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.appendSegment((e=Jn.create).call.apply(e,[null].concat(r)))}},{key:"lineTo",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.appendSegment((e=rt.create).call.apply(e,[null].concat(r)))}},{key:"curveTo",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.appendSegment((e=Zn.create).call.apply(e,[null].concat(r)))}},{key:"close",value:function(){return this.appendSegment(Yn.create())}},{key:"bbox",value:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r,i=0;i<t;i+=1){var l=e[i];if(l.isVisible){var u=l.bbox();u!=null&&(r=r?r.union(u):u)}}if(r!=null)return r;var c=e[t-1];return new U(c.end.x,c.end.y,0,0)}},{key:"appendSegment",value:function(e){var t=this.segments.length,r=t!==0?this.segments[t-1]:null,i,l=null;if(Array.isArray(e))for(var u=0,c=e.length;u<c;u+=1){var h=e[u];i=this.prepareSegment(h,r,l),this.segments.push(i),r=i}else e!=null&&e.isSegment&&(i=this.prepareSegment(e,r,l),this.segments.push(i));return this}},{key:"insertSegment",value:function(e,t){var r=this.segments.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var i,l=null,u=null;if(r!==0&&(e>=1?(l=this.segments[e-1],u=l.nextSegment):(l=null,u=this.segments[0])),!Array.isArray(t))i=this.prepareSegment(t,l,u),this.segments.splice(e,0,i);else for(var c=0,h=t.length;c<h;c+=1){var d=t[c];i=this.prepareSegment(d,l,u),this.segments.splice(e+c,0,i),l=i}return this}},{key:"removeSegment",value:function(e){var t=this.fixIndex(e),r=this.segments.splice(t,1)[0],i=r.previousSegment,l=r.nextSegment;return i&&(i.nextSegment=l),l&&(l.previousSegment=i),r.isSubpathStart&&l&&this.updateSubpathStartSegment(l),r}},{key:"replaceSegment",value:function(e,t){var r=this.fixIndex(e),i,l=this.segments[r],u=l.previousSegment,c=l.nextSegment,h=l.isSubpathStart;if(!Array.isArray(t))i=this.prepareSegment(t,u,c),this.segments.splice(r,1,i),h&&i.isSubpathStart&&(h=!1);else{this.segments.splice(e,1);for(var d=0,g=t.length;d<g;d+=1){var f=t[d];i=this.prepareSegment(f,u,c),this.segments.splice(e+d,0,i),u=i,h&&i.isSubpathStart&&(h=!1)}}h&&c&&this.updateSubpathStartSegment(c)}},{key:"getSegment",value:function(e){var t=this.fixIndex(e);return this.segments[t]}},{key:"fixIndex",value:function(e){var t=this.segments.length;if(t===0)throw new Error("Path has no segments.");for(var r=e;r<0;)r=t+r;if(r>=t||r<0)throw new Error("Index out of range.");return r}},{key:"segmentAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null}},{key:"segmentAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null}},{key:"segmentIndexAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=Yt(e,0,1),i=this.getOptions(t),l=this.length(i),u=l*r;return this.segmentIndexAtLength(u,i)}},{key:"segmentIndexAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segments.length;if(r===0)return null;var i=!0;e<0&&(i=!1,e=-e);for(var l=this.getPrecision(t),u=this.getSubdivisions(t),c=0,h=null,d=0;d<r;d+=1){var g=i?d:r-1-d,f=this.segments[g],v=u[g],p=f.length({precision:l,subdivisions:v});if(f.isVisible){if(e<=c+p)return g;h=g}c+=p}return h}},{key:"getSegmentSubdivisions",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=[],i=0,l=this.segments.length;i<l;i+=1){var u=this.segments[i],c=u.getSubdivisions({precision:t});r.push(c)}return r}},{key:"updateSubpathStartSegment",value:function(e){for(var t=e.previousSegment,r=e;r&&!r.isSubpathStart;)t!=null?r.subpathStartSegment=t.subpathStartSegment:r.subpathStartSegment=null,t=r,r=r.nextSegment}},{key:"prepareSegment",value:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t!=null&&(t.nextSegment=e),r!=null&&(r.previousSegment=e);var i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=r),i!=null&&this.updateSubpathStartSegment(i),e}},{key:"closestPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.closestPointT(e,t);return r?this.pointAtT(r):null}},{key:"closestPointLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t),i=this.closestPointT(e,r);return i?this.lengthAtT(i,r):0}},{key:"closestPointNormalizedLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getOptions(t),i=this.closestPointLength(e,r);if(i===0)return 0;var l=this.length(r);return l===0?0:i/l}},{key:"closestPointT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var r=this.getPrecision(t),i=this.getSubdivisions(t),l,u=Infinity,c=0,h=this.segments.length;c<h;c+=1){var d=this.segments[c],g=i[c];if(d.isVisible){var f=d.closestPointT(e,{precision:r,subdivisions:g}),v=d.pointAtT(f),p=va(v,e);p<u&&(l={segmentIndex:c,value:f},u=p)}}return l||{segmentIndex:this.segments.length-1,value:1}}},{key:"closestPointTangent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var r=this.getPrecision(t),i=this.getSubdivisions(t),l,u=Infinity,c=0,h=this.segments.length;c<h;c+=1){var d=this.segments[c],g=i[c];if(d.isDifferentiable()){var f=d.closestPointT(e,{precision:r,subdivisions:g}),v=d.pointAtT(f),p=va(v,e);p<u&&(l=d.tangentAtT(f),u=p)}}return l||null}},{key:"containsPoint",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.toPolylines(t);if(!r)return!1;for(var i=0,l=0,u=r.length;l<u;l+=1){var c=r[l];c.containsPoint(e)&&(i+=1)}return i%2===1}},{key:"pointAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.getOptions(t),i=this.length(r),l=i*e;return this.pointAtLength(l,r)}},{key:"pointAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(e===0)return this.start.clone();var r=!0;e<0&&(r=!1,e=-e);for(var i=this.getPrecision(t),l=this.getSubdivisions(t),u,c=0,h=0,d=this.segments.length;h<d;h+=1){var g=r?h:d-1-h,f=this.segments[g],v=l[g],p=f.length({precision:i,subdivisions:v});if(f.isVisible){if(e<=c+p)return f.pointAtLength((r?1:-1)*(e-c),{precision:i,subdivisions:v});u=f}c+=p}if(u)return r?u.end:u.start;var C=this.segments[this.segments.length-1];return C.end.clone()}},{key:"pointAtT",value:function(e){var t=this.segments,r=t.length;if(r===0)return null;var i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=r)return t[r-1].pointAtT(1);var l=Yt(e.value,0,1);return t[i].pointAtT(l)}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=Yt(e,0,1),i=this.getOptions(t),l=this.length(i),u=l*r;return this.divideAtLength(u,i)}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=!0;e<0&&(r=!1,e=-e);for(var i=this.getPrecision(t),l=this.getSubdivisions(t),u=0,c,h,d,g,f,v=0,p=this.segments.length;v<p;v+=1){var C=r?v:p-1-v,b=this.getSegment(C),y=l[C],w={precision:i,subdivisions:y},x=b.length(w);if(b.isDifferentiable()&&(d=b,g=C,e<=u+x)){h=C,c=b.divideAtLength((r?1:-1)*(e-u),w);break}u+=x}if(!d)return null;c||(h=g,f=r?1:0,c=d.divideAtT(f));var k=this.clone(),M=h;k.replaceSegment(M,c);var A=M,S=M+1,N=M+2;c[0].isDifferentiable()||(k.removeSegment(A),S-=1,N-=1);var j=k.getSegment(S).start;k.insertSegment(S,a.createSegment("M",j)),N+=1,c[1].isDifferentiable()||(k.removeSegment(N-1),N-=1);for(var B=N-A-1,X=N,z=k.segments.length;X<z;X+=1){var D=this.getSegment(X-B),T=k.getSegment(X);if(T.type==="Z"&&!D.subpathStartSegment.end.equals(T.subpathStartSegment.end)){var G=a.createSegment("L",D.end);k.replaceSegment(X,G)}}var Y=new a(k.segments.slice(0,S)),K=new a(k.segments.slice(S));return[Y,K]}},{key:"intersectsWithLine",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.toPolylines(t);if(r==null)return null;for(var i=null,l=0,u=r.length;l<u;l+=1){var c=r[l],h=e.intersect(c);if(h)if(i==null&&(i=[]),Array.isArray(h)){var d;(d=i).push.apply(d,Object(W.a)(h))}else i.push(h)}return i}},{key:"isDifferentiable",value:function(){for(var e=0,t=this.segments.length;e<t;e+=1){var r=this.segments[e];if(r.isDifferentiable())return!0}return!1}},{key:"isValid",value:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t}},{key:"length",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.segments.length===0)return 0;for(var t=this.getSubdivisions(e),r=0,i=0,l=this.segments.length;i<l;i+=1){var u=this.segments[i],c=t[i];r+=u.length({subdivisions:c})}return r}},{key:"lengthAtT",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.segments.length;if(r===0)return 0;var i=e.segmentIndex;if(i<0)return 0;var l=Yt(e.value,0,1);i>=r&&(i=r-1,l=1);for(var u=this.getPrecision(t),c=this.getSubdivisions(t),h=0,d=0;d<i;d+=1){var g=this.segments[d],f=c[d];h+=g.length({precision:u,subdivisions:f})}var v=this.segments[i],p=c[i];return h+=v.lengthAtT(l,{precision:u,subdivisions:p}),h}},{key:"tangentAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=Yt(e,0,1),i=this.getOptions(t),l=this.length(i),u=l*r;return this.tangentAtLength(u,i)}},{key:"tangentAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var r=!0;e<0&&(r=!1,e=-e);for(var i=this.getPrecision(t),l=this.getSubdivisions(t),u,c=0,h=0,d=this.segments.length;h<d;h+=1){var g=r?h:d-1-h,f=this.segments[g],v=l[g],p=f.length({precision:i,subdivisions:v});if(f.isDifferentiable()){if(e<=c+p)return f.tangentAtLength((r?1:-1)*(e-c),{precision:i,subdivisions:v});u=f}c+=p}if(u){var C=r?1:0;return u.tangentAtT(C)}return null}},{key:"tangentAtT",value:function(e){var t=this.segments.length;if(t===0)return null;var r=e.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=t)return this.segments[t-1].tangentAtT(1);var i=Yt(e.value,0,1);return this.segments[r].tangentAtT(i)}},{key:"getPrecision",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.precision==null?this.PRECISION:e.precision}},{key:"getSubdivisions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.segmentSubdivisions==null){var t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}},{key:"getOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getPrecision(e),r=this.getSubdivisions(e);return{precision:t,segmentSubdivisions:r}}},{key:"toPoints",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.segments,r=t.length;if(r===0)return null;for(var i=this.getSubdivisions(e),l=[],u=[],c=0;c<r;c+=1){var h=t[c];if(h.isVisible){var d=i[c];d.length>0?d.forEach(function(g){return u.push(g.start)}):u.push(h.start)}else u.length>0&&(u.push(t[c-1].end),l.push(u),u=[])}return u.length>0&&(u.push(this.end),l.push(u)),l}},{key:"toPolylines",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.toPoints(e);return t?t.map(function(r){return new Xe(r)}):null}},{key:"scale",value:function(e,t,r){return this.segments.forEach(function(i){return i.scale(e,t,r)}),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.segments.forEach(function(r){return r.translate(e,t)}):this.segments.forEach(function(r){return r.translate(e)}),this}},{key:"clone",value:function(){var e=new a;return this.segments.forEach(function(t){return e.appendSegment(t.clone())}),e}},{key:"equals",value:function(e){if(e==null)return!1;var t=this.segments,r=e.segments,i=t.length;if(r.length!==i)return!1;for(var l=0;l<i;l+=1){var u=t[l],c=r[l];if(u.type!==c.type||!u.equals(c))return!1}return!0}},{key:"toJSON",value:function(){return this.segments.map(function(e){return e.toJSON()})}},{key:"serialize",value:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(e){return e.serialize()}).join(" ")}},{key:"start",get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=0;r<t;r+=1){var i=e[r];if(i.isVisible)return i.start}return e[t-1].end}},{key:"end",get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=t-1;r>=0;r-=1){var i=e[r];if(i.isVisible)return i.end}return e[t-1].end}}]),a}(vt);(function(o){var s=new RegExp("^[\\s\\dLMCZz,.]*$");function a(t){return typeof t!="string"?!1:s.test(t)}o.isSupported=a,o.normalize=du;function n(t){if(!t)return new o;var r=new o,i=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,l=o.normalize(t).match(i);if(l!=null)for(var u=0,c=l.length;u<c;u+=1){var h=l[u],d=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,g=h.match(d);if(g!=null){var f=g[0],v=g.slice(1).map(function(C){return+C}),p=e.call.apply(e,[null,f].concat(Object(W.a)(v)));r.appendSegment(p)}}return r}o.parse=n;function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];if(t==="M"){var u;return(u=Jn.create).call.apply(u,[null].concat(i))}if(t==="L"){var c;return(c=rt.create).call.apply(c,[null].concat(i))}if(t==="C"){var h;return(h=Zn.create).call.apply(h,[null].concat(i))}if(t==="z"||t==="Z")return Yn.create();throw new Error('Invalid path segment type "'.concat(t,'"'))}o.createSegment=e})(se||(se={}));var te=function(){function o(s,a,n){if(Object(L.a)(this,o),!s)throw new TypeError("Invalid element to create vector");var e;if(o.isVector(s))e=s.node;else if(typeof s=="string")if(s.toLowerCase()==="svg")e=Vn();else if(s[0]==="<"){var t=Vn(s);e=document.importNode(t.firstChild,!0)}else e=document.createElementNS(tt.svg,s);else e=s;this.node=e,a&&this.setAttributes(a),n&&this.append(n)}return Object(F.a)(o,[{key:"transform",value:function(a,n){return a==null?ai(this.node):(ai(this.node,a,n),this)}},{key:"translate",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a==null?oi(this.node):(oi(this.node,a,n,e),this)}},{key:"rotate",value:function(a,n,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return a==null?si(this.node):(si(this.node,a,n,e,t),this)}},{key:"scale",value:function(a,n){return a==null?nr(this.node):(nr(this.node,a,n),this)}},{key:"getTransformToElement",value:function(a){var n=o.toNode(a);return mt(this.node,n)}},{key:"removeAttribute",value:function(a){return Hr(this.node,a),this}},{key:"getAttribute",value:function(a){return la(this.node,a)}},{key:"setAttribute",value:function(a,n){return Gn(this.node,a,n),this}},{key:"setAttributes",value:function(a){return Wr(this.node,a),this}},{key:"attr",value:function(a,n){return a==null?Te(this.node):typeof a=="string"&&n===void 0?Te(this.node,a):(typeof a=="object"?Te(this.node,a):Te(this.node,a,n),this)}},{key:"svg",value:function(){return this.node instanceof SVGSVGElement?this:o.create(this.node.ownerSVGElement)}},{key:"defs",value:function(){var a=this.svg()||this,n=a.node.getElementsByTagName("defs")[0];return n?o.create(n):o.create("defs").appendTo(a)}},{key:"text",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ba(this.node,a,n),this}},{key:"tagName",value:function(){return qi(this.node)}},{key:"clone",value:function(){return o.create(this.node.cloneNode(!0))}},{key:"remove",value:function(){return ia(this.node),this}},{key:"empty",value:function(){return Ur(this.node),this}},{key:"append",value:function(a){return Un(this.node,o.toNodes(a)),this}},{key:"appendTo",value:function(a){return oa(this.node,o.isVector(a)?a.node:a),this}},{key:"prepend",value:function(a){return aa(this.node,o.toNodes(a)),this}},{key:"before",value:function(a){return Gr(this.node,o.toNodes(a)),this}},{key:"replace",value:function(a){return this.node.parentNode&&this.node.parentNode.replaceChild(o.toNode(a),this.node),o.create(a)}},{key:"first",value:function(){return this.node.firstChild?o.create(this.node.firstChild):null}},{key:"last",value:function(){return this.node.lastChild?o.create(this.node.lastChild):null}},{key:"get",value:function(a){var n=this.node.childNodes[a];return n?o.create(n):null}},{key:"indexOf",value:function(a){var n=Array.prototype.slice.call(this.node.childNodes);return n.indexOf(o.toNode(a))}},{key:"find",value:function(a){var n=[],e=ea(this.node,a);if(e)for(var t=0,r=e.length;t<r;t+=1)n.push(o.create(e[t]));return n}},{key:"findOne",value:function(a){var n=ta(this.node,a);return n?o.create(n):null}},{key:"findParentByClass",value:function(a,n){var e=na(this.node,a,n);return e?o.create(e):null}},{key:"matches",value:function(a){var n=this.node,e=this.node.matches,t=n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector||null;return t&&t.call(n,a)}},{key:"contains",value:function(a){return ra(this.node,a instanceof o?a.node:a)}},{key:"wrap",value:function(a){var n=o.create(a),e=this.node.parentNode;return e!=null&&e.insertBefore(n.node,this.node),n.append(this)}},{key:"parent",value:function(a){var n=this;if(n.node.parentNode==null)return null;if(n=o.create(n.node.parentNode),a==null)return n;do if(typeof a=="string"?n.matches(a):n instanceof a)return n;while(n=o.create(n.node.parentNode));return n}},{key:"children",value:function(){for(var a=this.node.childNodes,n=[],e=0;e<a.length;e+=1){var t=a[e];t.nodeType===1&&n.push(o.create(a[e]))}return n}},{key:"eachChild",value:function(a,n){for(var e=this.children(),t=0,r=e.length;t<r;t+=1)a.call(e[t],e[t],t,e),n&&e[t].eachChild(a,n);return this}},{key:"index",value:function(){return _i(this.node)}},{key:"hasClass",value:function(a){return Bn(this.node,a)}},{key:"addClass",value:function(a){return dn(this.node,a),this}},{key:"removeClass",value:function(a){return gn(this.node,a),this}},{key:"toggleClass",value:function(a,n){return Ir(this.node,a,n),this}},{key:"toLocalPoint",value:function(a,n){return Pa(this.node,a,n)}},{key:"toGeometryShape",value:function(){return Na(this.node)}},{key:"translateCenterToPoint",value:function(a){var n=this.getBBox({target:this.svg()}),e=n.getCenter();return this.translate(a.x-e.x,a.y-e.y),this}},{key:"translateAndAutoOrient",value:function(a,n,e){return Ba(this.node,a,n,e),this}},{key:"animate",value:function(a){return ja(this.node,a)}},{key:"animateTransform",value:function(a){return La(this.node,a)}},{key:"animateAlongPath",value:function(a,n){return Xa(this.node,a,n)}},{key:"normalizePath",value:function(){var a=this.tagName();return a==="path"&&this.attr("d",se.normalize(this.attr("d"))),this}},{key:"bbox",value:function(a,n){return Sa(this.node,a,n)}},{key:"getBBox",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return pt(this.node,{recursive:a.recursive,target:a.target?o.toNode(a.target):null})}},{key:"sample",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.node instanceof SVGPathElement?Qr(this.node,a):[]}},{key:"convertToPath",value:function(){return o.create(qr(this.node))}},{key:"convertToPathData",value:function(){return _r(this.node)}},{key:"type",get:function(){return this.node.nodeName}},{key:"id",get:function(){return this.node.id},set:function(a){this.node.id=a}}]),o}();(function(o){function s(r){return r instanceof o}o.isVector=s;function a(r,i,l){return new o(r,i,l)}o.create=a;function n(r){if(r[0]==="<"){for(var i=Vn(r),l=[],u=0,c=i.childNodes.length;u<c;u+=1){var h=i.childNodes[u];l.push(a(document.importNode(h,!0)))}return l}return[a(r)]}o.createVectors=n;function e(r){return s(r)?r.node:r}o.toNode=e;function t(r){return Array.isArray(r)?r.map(function(i){return e(i)}):[e(r)]}o.toNodes=t})(te||(te={}));function gu(o,s){var a=te.create(s),n=te.create("textPath"),e=o.d;if(e&&o["xlink:href"]===void 0){var t=te.create("path").attr("d",e).appendTo(a.defs());n.attr("xlink:href","#".concat(t.id))}return typeof o=="object"&&n.attr(o),n.node}function fu(o,s,a){for(var n=a.eol,e=a.baseSize,t=a.lineHeight,r=0,i,l={},u=s.length-1,c=0;c<=u;c+=1){var h=s[c],d=null;if(typeof h=="object"){var g=h.attrs,f=te.create("tspan",g);i=f.node;var v=h.t;n&&c===u&&(v+=n),i.textContent=v;var p=g.class;p&&f.addClass(p),a.includeAnnotationIndices&&f.attr("annotations",h.annotations.join(",")),d=parseFloat(g["font-size"]),d===void 0&&(d=e),d&&d>r&&(r=d)}else n&&c===u&&(h+=n),i=document.createTextNode(h||" "),e&&e>r&&(r=e);o.appendChild(i)}return r&&(l.maxFontSize=r),t?l.lineHeight=t:r&&(l.lineHeight=r*1.2),l}var ya=/em$/;function Qn(o,s){var a=parseFloat(o);return ya.test(o)?a*s:a}function vu(o,s,a,n){if(!Array.isArray(s))return 0;var e=s.length;if(!e)return 0;for(var t=s[0],r=Qn(t.maxFontSize,a)||a,i=0,l=Qn(n,a),u=1;u<e;u+=1){t=s[u];var c=Qn(t.lineHeight,a)||l;i+=c}var h=Qn(t.maxFontSize,a)||a,d;switch(o){case"middle":d=r/2-.15*h-i/2;break;case"bottom":d=-(.25*h)-i;break;default:case"top":d=.8*r;break}return d}function ba(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s=ft.sanitize(s);var n=a.eol,e=a.textPath,t=a.textVerticalAnchor,r=t==="middle"||t==="bottom"||t==="top",i=a.x;i===void 0&&(i=o.getAttribute("x")||0);var l=a.includeAnnotationIndices,u=a.annotations;u&&!Array.isArray(u)&&(u=[u]);var c=a.lineHeight,h=c==="auto",d=h?"1.5em":c||"1em";Ur(o),Te(o,{"xml:space":"preserve",display:s||a.displayEmpty?null:"none"});var g=parseFloat(Te(o,"font-size"));g||(g=16,(r||u)&&Te(o,"font-size","".concat(g)));var f;e?(typeof e=="string"&&(e={d:e}),f=gu(e,o)):f=document.createDocumentFragment();for(var v,p=0,C,b=s.split(`
`),y=[],w=b.length-1,x=0;x<=w;x+=1){v=d;var k="v-line",M=nt("tspan"),A=void 0,S=b[x];if(S)if(u){var N=ft.annotate(S,u,{offset:-p,includeAnnotationIndices:l});A=fu(M,N,{eol:x!==w&&n,baseSize:g,lineHeight:h?null:d,includeAnnotationIndices:l});var j=A.lineHeight;j&&h&&x!==0&&(v=j),x===0&&(C=A.maxFontSize*.8)}else n&&x!==w&&(S+=n),M.textContent=S;else{M.textContent="-",k+=" v-empty-line";var B=M.style;B.fillOpacity=0,B.strokeOpacity=0,u&&(A={})}A&&y.push(A),x>0&&M.setAttribute("dy",v),(x>0||e)&&M.setAttribute("x",i),M.className.baseVal=k,f.appendChild(M),p+=S.length+1}if(r)if(u)v=vu(t,y,g,d);else if(t==="top")v="0.8em";else{var X;w>0?(X=parseFloat(d)||1,X*=w,ya.test(d)||(X/=g)):X=0;switch(t){case"middle":v="".concat(.3-X/2,"em");break;case"bottom":v="".concat(-X-.3,"em");break}}else t===0?v="0em":t?v=t:(v=0,o.getAttribute("y")==null&&o.setAttribute("y","".concat(C||"0.8em")));var z=f.firstChild;z.setAttribute("dy",v),o.appendChild(f)}function pu(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=s.width,t=s.height,r=n.svgDocument||nt("svg"),i=nt("tspan"),l=nt("text");Te(l,a),Un(l,i);var u=document.createTextNode("");l.style.opacity="0",l.style.display="block",i.style.display="block",i.appendChild(u),r.appendChild(l),n.svgDocument||document.body.appendChild(r);for(var c=n.eol||`
`,h=n.separator||" ",d=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,g=o.split(h),f=[],v=[],p,C,b,y=0,w=0,x=g.length;y<x;y+=1){var k=g[y];if(!k)continue;if(c&&k.indexOf(c)>=0){if(k.length>1){for(var M=k.split(c),A=0,S=M.length-1;A<S;A+=1)M.splice(2*A+1,0,c);g.splice.apply(g,[y,1].concat(Object(W.a)(M.filter(function(ne){return ne!==""})))),y-=1,x=g.length}else w+=1,v[w]="";continue}if(u.data=v[w]?"".concat(v[w]," ").concat(k):k,i.getComputedTextLength()<=e)v[w]=u.data,(p||C)&&(f[w]=!0,w+=1,p=0,C=0);else{if(!v[w]||p){var N=!!p;if(p=k.length-1,N||!p){if(!p){if(!v[w]){v=[];break}g.splice(y,2,k+g[y+1]),x-=1,f[w]=!0,w+=1,y-=1;continue}g[y]=k.substring(0,p),g[y+1]=k.substring(p)+g[y+1]}else{if(C)g.splice(y,2,g[y]+g[y+1]),C=0;else{var j=k.search(d);j>-1&&j!==k.length-1&&j!==0&&(C=j+1,p=0),g.splice(y,1,k.substring(0,C||p),k.substring(C||p)),x+=1}w&&!f[w-1]&&(w-=1)}y-=1;continue}w+=1,y-=1}if(t!==void 0){if(b===void 0){var B=void 0;a.lineHeight==="auto"?B={value:1.5,unit:"em"}:B=H.parseCssNumeric(a.lineHeight,["em"])||{value:1,unit:"em"},b=B.value,B.unit==="em"&&(b*=l.getBBox().height)}if(b*v.length>t){var X=Math.floor(t/b)-1;v.splice(X+1);var z=n.ellipsis;if(!z||X<0)break;typeof z!="string"&&(z="…");var D=v[X];if(!D)break;var T=D.length,G=void 0,Y=void 0,K=void 0;do{if(Y=D[T],G=D.substring(0,T),Y?Y.match(h)&&(G+=Y):(K=typeof h=="string"?h:" ",G+=K),G+=z,u.data=G,i.getComputedTextLength()<=e){v[X]=G;break}T-=1}while(T>=0);break}}}return n.svgDocument?r.removeChild(l):document.body.removeChild(r),v.join(c)}var qn=.551784;function Se(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,n=o.getAttribute(s);if(n==null)return a;var e=parseFloat(n);return isNaN(e)?a:e}function Qr(o){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=o.getTotalLength(),n=[],e=0,t;e<a;)t=o.getPointAtLength(e),n.push({distance:e,x:t.x,y:t.y}),e+=s;return n}function wa(o){return["M",Se(o,"x1"),Se(o,"y1"),"L",Se(o,"x2"),Se(o,"y2")].join(" ")}function xa(o){var s=vn(o);return s.length===0?null:"".concat(Ea(s)," Z")}function ka(o){var s=vn(o);return s.length===0?null:Ea(s)}function Ea(o){var s=o.map(function(a){return"".concat(a.x," ").concat(a.y)});return"M ".concat(s.join(" L"))}function vn(o){var s=[],a=o.points;if(a)for(var n=0,e=a.numberOfItems;n<e;n+=1)s.push(a.getItem(n));return s}function Oa(o){var s=Se(o,"cx",0),a=Se(o,"cy",0),n=Se(o,"r"),e=n*qn;return["M",s,a-n,"C",s+e,a-n,s+n,a-e,s+n,a,"C",s+n,a+e,s+e,a+n,s,a+n,"C",s-e,a+n,s-n,a+e,s-n,a,"C",s-n,a-e,s-e,a-n,s,a-n,"Z"].join(" ")}function Aa(o){var s=Se(o,"cx",0),a=Se(o,"cy",0),n=Se(o,"rx"),e=Se(o,"ry")||n,t=n*qn,r=e*qn,i=["M",s,a-e,"C",s+t,a-e,s+n,a-r,s+n,a,"C",s+n,a+r,s+t,a+e,s,a+e,"C",s-t,a+e,s-n,a+r,s-n,a,"C",s-n,a-r,s-t,a-e,s,a-e,"Z"].join(" ");return i}function Da(o){return Ma({x:Se(o,"x",0),y:Se(o,"y",0),width:Se(o,"width",0),height:Se(o,"height",0),rx:Se(o,"rx",0),ry:Se(o,"ry",0)})}function Ma(o){var s,a=o.x,n=o.y,e=o.width,t=o.height,r=Math.min(o.rx||o["top-rx"]||0,e/2),i=Math.min(o.rx||o["bottom-rx"]||0,e/2),l=Math.min(o.ry||o["top-ry"]||0,t/2),u=Math.min(o.ry||o["bottom-ry"]||0,t/2);return r||i||l||u?s=["M",a,n+l,"v",t-l-u,"a",i,u,0,0,0,i,u,"h",e-2*i,"a",i,u,0,0,0,i,-u,"v",-(t-u-l),"a",r,l,0,0,0,-r,-l,"h",-(e-2*r),"a",r,l,0,0,0,-r,l,"Z"]:s=["M",a,n,"H",a+e,"V",n+t,"H",a,"V",n,"Z"],s.join(" ")}function qr(o){var s=nt("path");Te(s,Te(o));var a=_r(o);return a&&s.setAttribute("d",a),s}function _r(o){var s=o.tagName.toLowerCase();switch(s){case"path":return o.getAttribute("d");case"line":return wa(o);case"polygon":return xa(o);case"polyline":return ka(o);case"ellipse":return Aa(o);case"circle":return Oa(o);case"rect":return Da(o)}throw new Error('"'.concat(s,'" cannot be converted to svg path element.'))}function mu(o,s,a,n){var e=2*Math.PI-1e-6,t=o,r=s,i=a,l=n;if(l<i){var u=i;i=l,l=u}var c=l-i,h=c<Math.PI?"0":"1",d=Math.cos(i),g=Math.sin(i),f=Math.cos(l),v=Math.sin(l);return c>=e?t?"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z":t?"M"+r*d+","+r*g+"A"+r+","+r+" 0 "+h+",1 "+r*f+","+r*v+"L"+t*f+","+t*v+"A"+t+","+t+" 0 "+h+",0 "+t*d+","+t*g+"Z":"M"+r*d+","+r*g+"A"+r+","+r+" 0 "+h+",1 "+r*f+","+r*v+"L0,0Z"}var pn=nt("svg"),Cu=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,Ta=/[ ,]+/,yu=/^(\w+)\((.*)\)/;function ei(o,s){var a=pn.createSVGPoint();return a.x=o,a.y=s,a}function mn(o){var s=pn.createSVGMatrix();if(o!=null){var a=o,n=s;for(var e in a)n[e]=a[e]}return s}function Zt(o){return o!=null?(o instanceof DOMMatrix||(o=mn(o)),pn.createSVGTransformFromMatrix(o)):pn.createSVGTransform()}function ti(o){var s=mn(),a=o!=null&&o.match(Cu);if(!a)return s;for(var n=0,e=a.length;n<e;n+=1){var t=a[n],r=t.match(yu);if(r){var i=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=mn(),g=r[2].split(Ta);switch(r[1].toLowerCase()){case"scale":i=parseFloat(g[0]),l=g[1]===void 0?i:parseFloat(g[1]),d=d.scaleNonUniform(i,l);break;case"translate":u=parseFloat(g[0]),c=parseFloat(g[1]),d=d.translate(u,c);break;case"rotate":h=parseFloat(g[0]),u=parseFloat(g[1])||0,c=parseFloat(g[2])||0,u!==0||c!==0?d=d.translate(u,c).rotate(h).translate(-u,-c):d=d.rotate(h);break;case"skewx":h=parseFloat(g[0]),d=d.skewX(h);break;case"skewy":h=parseFloat(g[0]),d=d.skewY(h);break;case"matrix":d.a=parseFloat(g[0]),d.b=parseFloat(g[1]),d.c=parseFloat(g[2]),d.d=parseFloat(g[3]),d.e=parseFloat(g[4]),d.f=parseFloat(g[5]);break;default:continue}s=s.multiply(d)}}return s}function ni(o){var s=o||{},a=s.a!=null?s.a:1,n=s.b!=null?s.b:0,e=s.c!=null?s.c:0,t=s.d!=null?s.d:1,r=s.e!=null?s.e:0,i=s.f!=null?s.f:0;return"matrix(".concat(a,",").concat(n,",").concat(e,",").concat(t,",").concat(r,",").concat(i,")")}function _n(o){var s,a,n;if(o){var e=Ta;if(o.trim().indexOf("matrix")>=0){var t=ti(o),r=ii(t);s=[r.translateX,r.translateY],a=[r.rotation],n=[r.scaleX,r.scaleY];var i=[];(s[0]!==0||s[1]!==0)&&i.push("translate(".concat(s.join(","),")")),(n[0]!==1||n[1]!==1)&&i.push("scale(".concat(n.join(","),")")),a[0]!==0&&i.push("rotate(".concat(a[0],")")),o=i.join(" ")}else{var l=o.match(/translate\((.*?)\)/);l&&(s=l[1].split(e));var u=o.match(/rotate\((.*?)\)/);u&&(a=u[1].split(e));var c=o.match(/scale\((.*?)\)/);c&&(n=c[1].split(e))}}var h=n&&n[0]?parseFloat(n[0]):1;return{raw:o||"",translation:{tx:s&&s[0]?parseInt(s[0],10):0,ty:s&&s[1]?parseInt(s[1],10):0},rotation:{angle:a&&a[0]?parseInt(a[0],10):0,cx:a&&a[1]?parseInt(a[1],10):void 0,cy:a&&a[2]?parseInt(a[2],10):void 0},scale:{sx:h,sy:n&&n[1]?parseFloat(n[1]):h}}}function ri(o,s){var a=s.x*o.a+s.y*o.c+0,n=s.x*o.b+s.y*o.d+0;return{x:a,y:n}}function ii(o){var s=ri(o,{x:0,y:1}),a=ri(o,{x:1,y:0}),n=180/Math.PI*Math.atan2(s.y,s.x)-90,e=180/Math.PI*Math.atan2(a.y,a.x);return{skewX:n,skewY:e,translateX:o.e,translateY:o.f,scaleX:Math.sqrt(o.a*o.a+o.b*o.b),scaleY:Math.sqrt(o.c*o.c+o.d*o.d),rotation:n}}function bu(o){var s,a,n,e;return o?(s=o.a==null?1:o.a,e=o.d==null?1:o.d,a=o.b,n=o.c):s=e=1,{sx:a?Math.sqrt(s*s+a*a):s,sy:n?Math.sqrt(n*n+e*e):e}}function wu(o){var s={x:0,y:1};return o&&(s=ri(o,s)),{angle:re.normalize(re.toDeg(Math.atan2(s.y,s.x))-90)}}function xu(o){return{tx:o&&o.e||0,ty:o&&o.f||0}}function er(o,s){var a=ei(o.x,o.y).matrixTransform(s);return new O(a.x,a.y)}function ku(o,s){return new $(er(o.start,s),er(o.end,s))}function Eu(o,s){var a=o instanceof Xe?o.points:o;return Array.isArray(a)||(a=[]),new Xe(a.map(function(n){return er(n,s)}))}function tr(o,s){var a=pn.createSVGPoint();a.x=o.x,a.y=o.y;var n=a.matrixTransform(s);a.x=o.x+o.width,a.y=o.y;var e=a.matrixTransform(s);a.x=o.x+o.width,a.y=o.y+o.height;var t=a.matrixTransform(s);a.x=o.x,a.y=o.y+o.height;var r=a.matrixTransform(s),i=Math.min(n.x,e.x,t.x,r.x),l=Math.max(n.x,e.x,t.x,r.x),u=Math.min(n.y,e.y,t.y,r.y),c=Math.max(n.y,e.y,t.y,r.y);return new U(i,u,l-i,c-u)}var Ou=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a};function Sa(o,s,a){var n,e=o.ownerSVGElement;if(!e)return new U(0,0,0,0);try{n=o.getBBox()}catch(r){n={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(s)return U.create(n);var t=mt(o,a||e);return tr(n,t)}function pt(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,n=o.ownerSVGElement;if(!n||!In(o)){if(sa(o)){var e=za(o),t=e.left,r=e.top,i=e.width,l=e.height;return new U(t,r,i,l)}return new U(0,0,0,0)}var u=s.target,c=s.recursive;if(!c){try{a=o.getBBox()}catch(C){a={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(!u)return U.create(a);var h=mt(o,u);return tr(a,h)}{var d=o.childNodes,g=d.length;if(g===0)return pt(o,{target:u});u||(u=o);for(var f=0;f<g;f+=1){var v=d[f],p=void 0;v.childNodes.length===0?p=pt(v,{target:u}):p=pt(v,{target:u,recursive:!0}),a?a=a.union(p):a=p}return a}}function mt(o,s){if(In(s)&&In(o)){var a=s.getScreenCTM(),n=o.getScreenCTM();if(a&&n)return a.inverse().multiply(n)}return mn()}function Pa(o,s,a){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement,e=n.createSVGPoint();e.x=s,e.y=a;try{var t=n.getScreenCTM(),r=e.matrixTransform(t.inverse()),i=mt(o,n).inverse();return r.matrixTransform(i)}catch(l){return e}}function Na(o){var s=function(r){var i=o.getAttribute(r),l=i?parseFloat(i):0;return isNaN(l)?0:l};switch(o instanceof SVGElement&&o.nodeName.toLowerCase()){case"rect":return new U(s("x"),s("y"),s("width"),s("height"));case"circle":return new Jt(s("cx"),s("cy"),s("r"),s("r"));case"ellipse":return new Jt(s("cx"),s("cy"),s("rx"),s("ry"));case"polyline":{var a=vn(o);return new Xe(a)}case"polygon":{var n=vn(o);return n.length>1&&n.push(n[0]),new Xe(n)}case"path":{var e=o.getAttribute("d");return se.isSupported(e)||(e=se.normalize(e)),se.parse(e)}case"line":return new $(s("x1"),s("y1"),s("x2"),s("y2"))}return pt(o)}function Au(o,s,a){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement;a=a||n;var e=pt(a),t=e.getCenter();if(!e.intersectsWithLineFromCenterToPoint(s))return null;var r=null,i=o.tagName.toLowerCase();if(i==="rect"){var l=new U(parseFloat(o.getAttribute("x")||"0"),parseFloat(o.getAttribute("y")||"0"),parseFloat(o.getAttribute("width")||"0"),parseFloat(o.getAttribute("height")||"0")),u=mt(o,a),c=ii(u),h=n.createSVGTransform();h.setRotate(-c.rotation,t.x,t.y);var d=tr(l,h.matrix.multiply(u));r=U.create(d).intersectsWithLineFromCenterToPoint(s,c.rotation)}else if(i==="path"||i==="polygon"||i==="polyline"||i==="circle"||i==="ellipse"){for(var g=i==="path"?o:qr(o),f=Qr(g),v=Infinity,p=[],C=0,b=f.length;C<b;C+=1){var y=f[C],w=ei(y.x,y.y);w=w.matrixTransform(mt(o,a));var x=O.create(w),k=x.distance(t),M=x.distance(s)*1.1,A=k+M;A<v?(v=A,p=[{sample:y,refDistance:M}]):A<v+1&&p.push({sample:y,refDistance:M})}p.sort(function(S,N){return S.refDistance-N.refDistance}),p[0]&&(r=O.create(p[0].sample))}return r}function ja(o,s){return Fa(o,s,"animate")}function La(o,s){return Fa(o,s,"animateTransform")}function Fa(o,s,a){var n=nt(a);o.appendChild(n);try{return Ra(n,s)}catch(e){}return function(){}}function Ra(o,s){var a=s.start,n=s.complete,e=s.repeat,t=Ou(s,["start","complete","repeat"]);Te(o,t),a&&o.addEventListener("beginEvent",a),n&&o.addEventListener("endEvent",n),e&&o.addEventListener("repeatEvent",e);var r=o;return r.beginElement(),function(){return r.endElement()}}function Xa(o,s,a){var n=Zi(a),e=nt("animateMotion"),t=nt("mpath");Te(t,{"xlink:href":"#".concat(n)}),e.appendChild(t),o.appendChild(e);try{return Ra(e,s)}catch(f){if(document.documentElement.getAttribute("smiling")==="fake"){var r=e;r.animators=[];var i=window,l=r.getAttribute("id");l&&(i.id2anim[l]=r);for(var u=i.getTargets(r),c=0,h=u.length;c<h;c+=1){var d=u[c],g=new i.Animator(r,d,c);i.animators.push(g),r.animators[c]=g,g.register()}}}return function(){}}function za(o){var s=0,a=0,n=0,e=0;if(o){for(var t=o;t;)s+=t.offsetLeft,a+=t.offsetTop,t=t.offsetParent,t&&(s+=parseInt(Wn(t,"borderLeft"),10),a+=parseInt(Wn(t,"borderTop"),10));n=o.offsetWidth,e=o.offsetHeight}return{left:s,top:a,width:n,height:e}}function ai(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(s==null)return ti(Te(o,"transform"));if(a.absolute){o.setAttribute("transform",ni(s));return}var n=o.transform,e=Zt(s);n.baseVal.appendItem(e)}function oi(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=Te(o,"transform"),t=_n(e);if(s==null)return t.translation;e=t.raw,e=e.replace(/translate\([^)]*\)/g,"").trim();var r=n.absolute?s:t.translation.tx+s,i=n.absolute?a:t.translation.ty+a,l="translate(".concat(r,",").concat(i,")");o.setAttribute("transform","".concat(l," ").concat(e).trim())}function si(o,s,a,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=Te(o,"transform"),r=_n(t);if(s==null)return r.rotation;t=r.raw,t=t.replace(/rotate\([^)]*\)/g,"").trim(),s%=360;var i=e.absolute?s:r.rotation.angle+s,l=a!=null&&n!=null?",".concat(a,",").concat(n):"",u="rotate(".concat(i).concat(l,")");o.setAttribute("transform","".concat(t," ").concat(u).trim())}function nr(o,s,a){var n=Te(o,"transform"),e=_n(n);if(s==null)return e.scale;a=a??s,n=e.raw,n=n.replace(/scale\([^)]*\)/g,"").trim();var t="scale(".concat(s,",").concat(a,")");o.setAttribute("transform","".concat(n," ").concat(t).trim())}function Ba(o,s,a,n){var e=O.create(s),t=O.create(a);if(!n){var r=o instanceof SVGSVGElement?o:o.ownerSVGElement;n=r}var i=nr(o);o.setAttribute("transform","");var l=pt(o,{target:n}).scale(i.sx,i.sy),u=Zt();u.setTranslate(-l.x-l.width/2,-l.y-l.height/2);var c=Zt(),h=e.angleBetween(t,e.clone().translate(1,0));h&&c.setRotate(h,0,0);var d=Zt(),g=e.clone().move(t,l.width/2);d.setTranslate(2*e.x-g.x,2*e.y-g.y);var f=mt(o,n),v=Zt();v.setMatrix(d.matrix.multiply(c.matrix.multiply(u.matrix.multiply(f.scale(i.sx,i.sy))))),o.setAttribute("transform",ni(v.matrix))}var Du=te.isVector,Mu=te.create,Tu=te.createVectors,Su=m(204),rr=function(){function o(s,a,n,e){if(Object(L.a)(this,o),s==null)return this.set(255,255,255,1);if(typeof s=="number")return this.set(s,a,n,e);if(typeof s=="string")return o.fromString(s)||this;if(Array.isArray(s))return this.set(s);this.set(s.r,s.g,s.b,s.a==null?1:s.a)}return Object(F.a)(o,[{key:"blend",value:function(a,n,e){this.set(a.r+(n.r-a.r)*e,a.g+(n.g-a.g)*e,a.b+(n.b-a.b)*e,a.a+(n.a-a.a)*e)}},{key:"lighten",value:function(a){var n=o.lighten(this.toArray(),a);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}},{key:"darken",value:function(a){this.lighten(-a)}},{key:"set",value:function(a,n,e,t){var r=Array.isArray(a)?a[0]:a,i=Array.isArray(a)?a[1]:n,l=Array.isArray(a)?a[2]:e,u=Array.isArray(a)?a[3]:t;return this.r=Math.round(H.clamp(r,0,255)),this.g=Math.round(H.clamp(i,0,255)),this.b=Math.round(H.clamp(l,0,255)),this.a=u==null?1:H.clamp(u,0,1),this}},{key:"toHex",value:function(){var a=this,n=["r","g","b"].map(function(e){var t=a[e].toString(16);return t.length<2?"0".concat(t):t});return"#".concat(n.join(""))}},{key:"toRGBA",value:function(){return this.toArray()}},{key:"toHSLA",value:function(){return o.rgba2hsla(this.r,this.g,this.b,this.a)}},{key:"toCSS",value:function(a){var n="".concat(this.r,",").concat(this.g,",").concat(this.b,",");return a?"rgb(".concat(n,")"):"rgba(".concat(n,",").concat(this.a,")")}},{key:"toGrey",value:function(){return o.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return this.toCSS()}}]),o}();(function(o){function s(y){return new o(y)}o.fromArray=s;function a(y){return new o([].concat(Object(W.a)(f(y)),[1]))}o.fromHex=a;function n(y){var w=y.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);if(w){var x=w[1].split(/\s*,\s*/).map(function(k){return parseInt(k,10)});return new o(x)}return null}o.fromRGBA=n;function e(y,w,x){x<0&&++x,x>1&&--x;var k=6*x;return k<1?y+(w-y)*k:2*x<1?w:3*x<2?y+(w-y)*(2/3-x)*6:y}function t(y){var w=y.toLowerCase().match(/^hsla?\(([\s\.,0-9]+)\)/);if(w){var x=w[2].split(/\s*,\s*/),k=(parseFloat(x[0])%360+360)%360/360,M=parseFloat(x[1])/100,A=parseFloat(x[2])/100,S=x[3]==null?1:parseInt(x[3],10);return new o(u(k,M,A,S))}return null}o.fromHSLA=t;function r(y){if(y.startsWith("#"))return a(y);if(y.startsWith("rgb"))return n(y);var w=o.named[y];return w?a(w):t(y)}o.fromString=r;function i(y,w){return o.fromArray([y,y,y,w])}o.makeGrey=i;function l(y,w,x,k){var M=Array.isArray(y)?y[0]:y,A=Array.isArray(y)?y[1]:w,S=Array.isArray(y)?y[2]:x,N=Array.isArray(y)?y[3]:k,j=Math.max(M,A,S),B=Math.min(M,A,S),X=(j+B)/2,z=0,D=0;if(B!==j){var T=j-B;D=X>.5?T/(2-j-B):T/(j+B);switch(j){case M:z=(A-S)/T+(A<S?6:0);break;case A:z=(S-M)/T+2;break;case S:z=(M-A)/T+4;break}z/=6}return[z,D,X,N??1]}o.rgba2hsla=l;function u(y,w,x,k){var M=Array.isArray(y)?y[0]:y,A=Array.isArray(y)?y[1]:w,S=Array.isArray(y)?y[2]:x,N=Array.isArray(y)?y[3]:k,j=S<=.5?S*(A+1):S+A-S*A,B=2*S-j;return[e(B,j,M+1/3)*256,e(B,j,M)*256,e(B,j,M-1/3)*256,N??1]}o.hsla2rgba=u;function c(y){return new o(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),y?void 0:parseFloat(Math.random().toFixed(2)))}o.random=c;function h(){for(var y="0123456789ABCDEF",w="#",x=0;x<6;x+=1)w+=y[Math.floor(Math.random()*16)];return w}o.randomHex=h;function d(y){return c(y).toString()}o.randomRGBA=d;function g(y,w){if(typeof y=="string"){var x=y[0]==="#",k=f(y),M=Object(Su.a)(k,3),A=M[0],S=M[1],N=M[2];return w?A*.299+S*.587+N*.114>186?"#000000":"#ffffff":"".concat(x?"#":"").concat(v(255-A,255-S,255-N))}var j=y[0],B=y[1],X=y[2],z=y[3];return w?j*.299+B*.587+X*.114>186?[0,0,0,z]:[255,255,255,z]:[255-j,255-B,255-X,z]}o.invert=g;function f(y){var w=y.indexOf("#")===0?y:"#".concat(y),x=Number("0x".concat(w.substr(1)));if(!(w.length===4||w.length===7)||isNaN(x))throw new Error("Invalid hex color.");var k=w.length===4?4:8,M=(1<<k)-1,A=["b","g","r"].map(function(){var S=x&M;return x>>=k,k===4?17*S:S});return[A[2],A[1],A[0]]}function v(y,w,x){var k=function(A){return A.length<2?"0".concat(A):A};return"".concat(k(y.toString(16))).concat(k(w.toString(16))).concat(k(x.toString(16)))}function p(y,w){return b(y,w)}o.lighten=p;function C(y,w){return b(y,-w)}o.darken=C;function b(y,w){if(typeof y=="string"){var x=y[0]==="#",k=parseInt(x?y.substr(1):y,16),M=H.clamp((k>>16)+w,0,255),A=H.clamp((k>>8&255)+w,0,255),S=H.clamp((k&255)+w,0,255);return"".concat(x?"#":"").concat((S|A<<8|M<<16).toString(16))}var N=v(y[0],y[1],y[2]),j=f(b(N,w));return[j[0],j[1],j[2],y[3]]}})(rr||(rr={})),function(o){o.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(rr||(rr={}));var Pu=function(){function o(){Object(L.a)(this,o),this.listeners={}}return Object(F.a)(o,[{key:"on",value:function(a,n,e){if(n==null)return this;this.listeners[a]||(this.listeners[a]=[]);var t=this.listeners[a];return t.push(n,e),this}},{key:"once",value:function(a,n,e){var t=this,r=function i(){t.off(a,i);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return Cn.call([n,e],u)};return this.on(a,r,this)}},{key:"off",value:function(a,n,e){if(!(a||n||e))return this.listeners={},this;var t=this.listeners,r=a?[a]:Object.keys(t);return r.forEach(function(i){var l=t[i];if(!l)return;if(!(n||e)){delete t[i];return}for(var u=l.length-2;u>=0;u-=2)n&&l[u]!==n||e&&l[u+1]!==e||l.splice(u,2)}),this}},{key:"trigger",value:function(a){for(var n=!0,e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];if(a!=="*"){var i=this.listeners[a];i!=null&&(n=Cn.call(i,t))}var l=this.listeners["*"];return l!=null?R.toAsyncBoolean([n,Cn.call(l,[a].concat(t))]):n}},{key:"emit",value:function(a){for(var n=arguments.length,e=new Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];return this.trigger.apply(this,[a].concat(e))}}]),o}(),Cn;(function(o){function s(a,n){for(var e=[],t=0;t<a.length;t+=2){var r=a[t],i=a[t+1],l=Array.isArray(n)?n:[n],u=R.apply(r,i,l);e.push(u)}return R.toAsyncBoolean(e)}o.call=s})(Cn||(Cn={}));var Ze=function(){function o(){Object(L.a)(this,o)}return Object(F.a)(o,[{key:"dispose",value:function(){this._disposed=!0}},{key:"disposed",get:function(){return this._disposed===!0}}]),o}();(function(o){function s(){return function(a,n,e){var t=e.value,r=a.__proto__;e.value=function(){if(this.disposed)return;t.call(this),r.dispose.call(this)}}}o.dispose=s})(Ze||(Ze={}));var nf=function(){function o(s){Object(L.a)(this,o),this.callback=s}return Object(F.a)(o,[{key:"dispose",value:function(){if(!this.callback)return;var a=this.callback;this.callback=null,a()}},{key:"disposed",get:function(){return!this.callback}}]),o}(),Ia=function(){function o(){Object(L.a)(this,o),this.isDisposed=!1,this.items=new Set}return Object(F.a)(o,[{key:"dispose",value:function(){if(this.isDisposed)return;this.isDisposed=!0,this.items.forEach(function(a){a.dispose()}),this.items.clear()}},{key:"contains",value:function(a){return this.items.has(a)}},{key:"add",value:function(a){this.items.add(a)}},{key:"remove",value:function(a){this.items.delete(a)}},{key:"clear",value:function(){this.items.clear()}},{key:"disposed",get:function(){return this.isDisposed}}]),o}();(function(o){function s(a){var n=new o;return a.forEach(function(e){n.add(e)}),n}o.from=s})(Ia||(Ia={}));var Pe=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return a}(Pu);(function(o){o.dispose=Ze.dispose})(Pe||(Pe={})),P.applyMixins(Pe,Ze);var Va=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"enable",value:function(){delete this._disabled}},{key:"disable",value:function(){this._disabled=!0}},{key:"disabled",get:function(){return this._disabled===!0}}]),a}(Pe),Nu=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},ir=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.call(this),n.clear(),n}return Object(F.a)(a,[{key:"clear",value:function(){this.map=new WeakMap,this.arr=[]}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t),this.arr.push(e)}},{key:"delete",value:function(e){var t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);var r=this.map.get(e);return this.map.delete(e),r}},{key:"each",value:function(e){var t=this;this.arr.forEach(function(r){var i=t.map.get(r);e(i,r)})}},{key:"dispose",value:function(){this.clear()}}]),a}(Ze);Nu([Ze.dispose()],ir.prototype,"dispose",null);var li=function(){function o(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(L.a)(this,o),this.comparator=s.comparator||o.defaultComparator,this.index={},this.data=s.data||[],this.heapify()}return Object(F.a)(o,[{key:"isEmpty",value:function(){return this.data.length===0}},{key:"insert",value:function(a,n,e){var t={priority:a,value:n},r=this.data.length-1;return e&&(t.id=e,this.index[e]=r),this.data.push(t),this.bubbleUp(r),this}},{key:"peek",value:function(){return this.data[0]?this.data[0].value:null}},{key:"peekPriority",value:function(){return this.data[0]?this.data[0].priority:null}},{key:"updatePriority",value:function(a,n){var e=this.index[a];if(typeof e=="undefined")throw new Error("Node with id '".concat(a,"' was not found in the heap."));var t=this.data,r=t[e].priority,i=this.comparator(n,r);i<0?(t[e].priority=n,this.bubbleUp(e)):i>0&&(t[e].priority=n,this.bubbleDown(e))}},{key:"remove",value:function(){var a=this.data,n=a[0],e=a.pop();return delete this.index[a.length],a.length>0&&(a[0]=e,e.id&&(this.index[e.id]=0),this.bubbleDown(0)),n?n.value:null}},{key:"heapify",value:function(){for(var a=0;a<this.data.length;a+=1)this.bubbleUp(a)}},{key:"bubbleUp",value:function(a){for(var n=this.data,e,t,r=a;r>0&&(t=r-1>>>1,this.comparator(n[r].priority,n[t].priority)<0);){e=n[t],n[t]=n[r];var i=n[r].id;i!=null&&(this.index[i]=t),n[r]=e,i=n[r].id,i!=null&&(this.index[i]=r),r=t}}},{key:"bubbleDown",value:function(a){for(var n=this.data,e=n.length-1,t=a;;){var r=(t<<1)+1,i=r+1,l=t;if(r<=e&&this.comparator(n[r].priority,n[l].priority)<0&&(l=r),i<=e&&this.comparator(n[i].priority,n[l].priority)<0&&(l=i),l!==t){var u=n[l];n[l]=n[t];var c=n[t].id;c!=null&&(this.index[c]=l),n[t]=u,c=n[t].id,c!=null&&(this.index[c]=t),t=l}else break}}}]),o}();(function(o){o.defaultComparator=function(s,a){return s-a}})(li||(li={}));var ui;(function(o){function s(a,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(v,p){return 1},t={},r={},i={},l=new li;t[n]=0;for(var u in a)u!==n&&(t[u]=Infinity),l.insert(t[u],u,u);for(;!l.isEmpty();){var c=l.remove();i[c]=!0;for(var h=a[c]||[],d=0;d<h.length;d+=1){var g=h[d];if(!i[g]){var f=t[c]+e(c,g);f<t[g]&&(t[g]=f,r[g]=c,l.updatePriority(g,f))}}}return r}o.run=s})(ui||(ui={}));var Ft;(function(o){o.linear=function(s){return s},o.quad=function(s){return s*s},o.cubic=function(s){return s*s*s},o.inout=function(s){if(s<=0)return 0;if(s>=1)return 1;var a=s*s,n=a*s;return 4*(s<.5?n:3*(s-a)+n-.75)},o.exponential=function(s){return Math.pow(2,10*(s-1))},o.bounce=function(s){for(var a=0,n=1;;a+=n,n/=2)if(s>=(7-4*a)/11){var e=(11-6*a-11*s)/4;return-e*e+n*n}}})(Ft||(Ft={})),function(o){o.decorators={reverse:function(a){return function(n){return 1-a(1-n)}},reflect:function(a){return function(n){return .5*(n<.5?a(2*n):2-a(2-2*n))}},clamp:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return function(t){var r=a(t);return r<n?n:r>e?e:r}},back:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.70158;return function(n){return n*n*((a+1)*n-a)}},elastic:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.5;return function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*a/3*n)}}}}(Ft||(Ft={})),function(o){function s(D){return-1*Math.cos(D*(Math.PI/2))+1}o.easeInSine=s;function a(D){return Math.sin(D*(Math.PI/2))}o.easeOutSine=a;function n(D){return-.5*(Math.cos(Math.PI*D)-1)}o.easeInOutSine=n;function e(D){return D*D}o.easeInQuad=e;function t(D){return D*(2-D)}o.easeOutQuad=t;function r(D){return D<.5?2*D*D:-1+(4-2*D)*D}o.easeInOutQuad=r;function i(D){return D*D*D}o.easeInCubic=i;function l(D){var T=D-1;return T*T*T+1}o.easeOutCubic=l;function u(D){return D<.5?4*D*D*D:(D-1)*(2*D-2)*(2*D-2)+1}o.easeInOutCubic=u;function c(D){return D*D*D*D}o.easeInQuart=c;function h(D){var T=D-1;return 1-T*T*T*T}o.easeOutQuart=h;function d(D){var T=D-1;return D<.5?8*D*D*D*D:1-8*T*T*T*T}o.easeInOutQuart=d;function g(D){return D*D*D*D*D}o.easeInQuint=g;function f(D){var T=D-1;return 1+T*T*T*T*T}o.easeOutQuint=f;function v(D){var T=D-1;return D<.5?16*D*D*D*D*D:1+16*T*T*T*T*T}o.easeInOutQuint=v;function p(D){return D===0?0:Math.pow(2,10*(D-1))}o.easeInExpo=p;function C(D){return D===1?1:-Math.pow(2,-10*D)+1}o.easeOutExpo=C;function b(D){if(D===0||D===1)return D;var T=D*2,G=T-1;return T<1?.5*Math.pow(2,10*G):.5*(-Math.pow(2,-10*G)+2)}o.easeInOutExpo=b;function y(D){var T=D/1;return-1*(Math.sqrt(1-T*D)-1)}o.easeInCirc=y;function w(D){var T=D-1;return Math.sqrt(1-T*T)}o.easeOutCirc=w;function x(D){var T=D*2,G=T-2;return T<1?-.5*(Math.sqrt(1-T*T)-1):.5*(Math.sqrt(1-G*G)+1)}o.easeInOutCirc=x;function k(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158;return D*D*((T+1)*D-T)}o.easeInBack=k;function M(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,G=D/1-1;return G*G*((T+1)*G+T)+1}o.easeOutBack=M;function A(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,G=D*2,Y=G-2,K=T*1.525;return G<1?.5*G*G*((K+1)*G-K):.5*(Y*Y*((K+1)*Y+K)+2)}o.easeInOutBack=A;function S(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7;if(D===0||D===1)return D;var G=D/1,Y=G-1,K=1-T,ne=K/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Y)*Math.sin((Y-ne)*(2*Math.PI)/K))}o.easeInElastic=S;function N(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7,G=1-T,Y=D*2;if(D===0||D===1)return D;var K=G/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Y)*Math.sin((Y-K)*(2*Math.PI)/G)+1}o.easeOutElastic=N;function j(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.65,G=1-T;if(D===0||D===1)return D;var Y=D*2,K=Y-1,ne=G/(2*Math.PI)*Math.asin(1);return Y<1?-.5*(Math.pow(2,10*K)*Math.sin((K-ne)*(2*Math.PI)/G)):Math.pow(2,-10*K)*Math.sin((K-ne)*(2*Math.PI)/G)*.5+1}o.easeInOutElastic=j;function B(D){var T=D/1;if(T<1/2.75)return 7.5625*T*T;if(T<2/2.75){var G=T-1.5/2.75;return 7.5625*G*G+.75}if(T<2.5/2.75){var Y=T-2.25/2.75;return 7.5625*Y*Y+.9375}{var K=T-2.625/2.75;return 7.5625*K*K+.984375}}o.easeOutBounce=B;function X(D){return 1-B(1-D)}o.easeInBounce=X;function z(D){return D<.5?X(D*2)*.5:B(D*2-1)*.5+.5}o.easeInOutBounce=z}(Ft||(Ft={}));var Rt;(function(o){o.number=function(s,a){var n=a-s;return function(e){return s+n*e}},o.object=function(s,a){var n=Object.keys(s);return function(e){for(var t={},r=n.length-1;r!==-1;r-=1){var i=n[r];t[i]=s[i]+(a[i]-s[i])*e}return t}},o.unit=function(s,a){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,e=n.exec(s),t=n.exec(a),r=t?t[1]:"",i=e?+e[1]:0,l=t?+t[1]:0,u=r.indexOf("."),c=u>0?r[1].length-u-1:0,h=l-i,d=e?e[2]:"";return function(g){return(i+h*g).toFixed(c)+d}},o.color=function(s,a){var n=parseInt(s.slice(1),16),e=parseInt(a.slice(1),16),t=n&255,r=(e&255)-t,i=n&65280,l=(e&65280)-i,u=n&16711680,c=(e&16711680)-u;return function(h){var d=t+r*h&255,g=i+l*h&65280,f=u+c*h&16711680;return"#".concat((1<<24|d|g|f).toString(16).slice(1))}}})(Rt||(Rt={}));var Le={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!0,trackInfo:{},track:function(s){Le.trackable=s}},Ua;(function(o){var s="".concat(Le.prefixCls,".storage");function a(h,d,g){var f=d.id||J.uniqueId("doc-"),v=l(h);v.keys.push(f),r(u(h,f),d),r(c(h),v),t(g,null,Object.assign(Object.assign({},d),{id:f}))}o.insert=a;function n(h,d,g){var f=l(h),v=[];if(d==null)f.keys.forEach(function(C){var b=i(u(h,C));b?v.push(b):t(g,new Error("No document found for an ID '".concat(C,"' from index.")))}),t(g,null,v);else if(d.id){var p=i(u(h,d.id));t(g,null,p?[p]:[])}else t(g,null,[])}o.find=n;function e(h,d,g){var f=l(h);if(d==null)f.keys.forEach(function(p){localStorage.removeItem(u(h,p))}),localStorage.removeItem(c(h)),t(g,null);else if(d.id){var v=f.keys.indexOf(d.id);v>=0&&f.keys.splice(v,1),localStorage.removeItem(u(h,d.id)),r(c(h),f),t(g,null)}}o.remove=e;function t(h,d,g){h&&R.defer(function(){h(d,g)})}function r(h,d){localStorage.setItem(h,JSON.stringify(d))}function i(h){var d=localStorage.getItem(h);return d?JSON.parse(d):null}function l(h){var d=i(c(h));return d?(d.keys==null&&(d.keys=[]),d):{keys:[]}}function u(h,d){return"".concat(s,".").concat(h,".docs.").concat(d)}function c(h){return"".concat(s,".").concat(h,".index")}})(Ua||(Ua={}));var Ae=m(16),me=function(){function o(s){Object(L.a)(this,o),this.options=Object.assign({},s),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object(F.a)(o,[{key:"register",value:function(a,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof a=="object"){Object.keys(a).forEach(function(l){e.register(l,a[l],n)});return}this.exist(a)&&!t&&!we.isApplyingHMR()&&this.onDuplicated(a);var r=this.options.process,i=r?R.call(r,this,a,n):n;return this.data[a]=i,i}},{key:"unregister",value:function(a){var n=a?this.data[a]:null;return delete this.data[a],n}},{key:"get",value:function(a){return a?this.data[a]:null}},{key:"exist",value:function(a){return a?this.data[a]!=null:!1}},{key:"onDuplicated",value:function(a){try{throw this.options.onConflict&&R.call(this.options.onConflict,this,a),new Error("".concat(J.upperFirst(this.options.type)," with name '").concat(a,"' already registered."))}catch(n){throw n}}},{key:"onNotFound",value:function(a,n){throw new Error(this.getSpellingSuggestion(a,n))}},{key:"getSpellingSuggestion",value:function(a,n){var e=this.getSpellingSuggestionForName(a),t=n?"".concat(n," ").concat(J.lowerFirst(this.options.type)):this.options.type;return"".concat(J.upperFirst(t)," with name '").concat(a,"' does not exist.")+(e?" Did you mean '".concat(e,"'?"):"")}},{key:"getSpellingSuggestionForName",value:function(a){return J.getSpellingSuggestion(a,Object.keys(this.data),function(n){return n})}},{key:"names",get:function(){return Object.keys(this.data)}}]),o}();(function(o){function s(a){return new o(a)}o.create=s})(me||(me={}));var ju={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},Lu={},Ga={position:ar("x","width","origin")},Ha={position:ar("y","height","origin")},Fu={position:ar("x","width","corner")},Ru={position:ar("y","height","corner")},Wa={set:Ct("width","width")},$a={set:Ct("height","height")},Xu={set:Ct("rx","width")},zu={set:Ct("ry","height")},Ya={set:function(o){var s=Ct(o,"width"),a=Ct(o,"height");return function(n,e){var t=e.refBBox,r=t.height>t.width?s:a;return R.call(r,this,n,e)}}("r")},Bu={set:function(s,a){var n=a.refBBox,e=parseFloat(s),t=H.isPercentage(s);t&&(e/=100);var r=Math.sqrt(n.height*n.height+n.width*n.width),i;return isFinite(e)&&(t||e>=0&&e<=1?i=e*r:i=Math.max(e+r,0)),{r:i}}},Iu={set:Ct("cx","width")},Vu={set:Ct("cy","height")},Ja={set:Qa({resetOffset:!0})},Uu={set:Qa({resetOffset:!1})},Za={set:qa({resetOffset:!0})},Gu={set:qa({resetOffset:!1})},Hu=Ya,Wu=Ja,$u=Za,Yu=Ga,Ju=Ha,Zu=Wa,Ku=$a;function ar(o,s,a){return function(n,e){var t=e.refBBox;if(n==null)return null;var r=parseFloat(n),i=H.isPercentage(n);i&&(r/=100);var l;if(isFinite(r)){var u=t[a];i||r>0&&r<1?l=u[o]+t[s]*r:l=u[o]+r}var c=new O;return c[o]=l||0,c}}function Ct(o,s){return function(a,n){var e=n.refBBox,t=parseFloat(a),r=H.isPercentage(a);r&&(t/=100);var i={};if(isFinite(t)){var l=r||t>=0&&t<=1?t*e[s]:Math.max(t+e[s],0);i[o]=l}return i}}function Ka(o,s){var a="x6-shape",n=s&&s.resetOffset;return function(e,t){var r=t.view,i=t.elem,l=t.refBBox,u=r.$(i),c=u.data(a);if(!c||c.value!==e){var h=o(e);c={value:e,shape:h,shapeBBox:h.bbox()},u.data(a,c)}var d=c.shape.clone(),g=c.shapeBBox.clone(),f=g.getOrigin(),v=l.getOrigin();g.x=v.x,g.y=v.y;var p=l.getMaxScaleToFit(g,v),C=g.width===0||l.width===0?1:p.sx,b=g.height===0||l.height===0?1:p.sy;return d.scale(C,b,f),n&&d.translate(-f.x,-f.y),d}}function Qa(o){function s(n){return se.parse(n)}var a=Ka(s,o);return function(n,e){var t=a(n,e);return{d:t.serialize()}}}function qa(o){var s=Ka(function(a){return new Xe(a)},o);return function(a,n){var e=s(a,n);return{points:e.serialize()}}}var Qu={qualify:P.isPlainObject,set:function(s,a){var n=a.view;return"url(#".concat(n.graph.defineGradient(s),")")}},qu={qualify:P.isPlainObject,set:function(s,a){var n=a.view;return"url(#".concat(n.graph.defineGradient(s),")")}},_a={qualify:function(s,a){var n=a.attrs;return n.textWrap==null||!P.isPlainObject(n.textWrap)},set:function(s,a){var n=a.view,e=a.elem,t=a.attrs,r="x6-text",i=n.$(e),l=i.data(r),u=function(C){try{return JSON.parse(C)}catch(b){return C}},c={x:t.x,eol:t.eol,annotations:u(t.annotations),textPath:u(t["text-path"]||t.textPath),textVerticalAnchor:t["text-vertical-anchor"]||t.textVerticalAnchor,displayEmpty:(t["display-empty"]||t.displayEmpty)==="true",lineHeight:t["line-height"]||t.lineHeight},h=t["font-size"]||t.fontSize,d=JSON.stringify([s,c]);if(l==null||l!==d){h&&e.setAttribute("font-size",h);var g=c.textPath;if(g!=null&&typeof g=="object"){var f=g.selector;if(typeof f=="string"){var v=n.find(f)[0];v instanceof SVGPathElement&&(E.ensureId(v),c.textPath=Object.assign({"xlink:href":"#".concat(v.id)},g))}}E.text(e,"".concat(s),c),i.data(r,d)}}},_u={qualify:P.isPlainObject,set:function(s,a){var n=a.view,e=a.elem,t=a.attrs,r=a.refBBox,i=s,l=i.width||0;H.isPercentage(l)?r.width*=parseFloat(l)/100:l<=0?r.width+=l:r.width=l;var u=i.height||0;H.isPercentage(u)?r.height*=parseFloat(u)/100:u<=0?r.height+=u:r.height=u;var c,h=i.text;h==null&&(h=t.text),h!=null?c=E.breakText("".concat(h),r,{"font-weight":t["font-weight"]||t.fontWeight,"font-size":t["font-size"]||t.fontSize,"font-family":t["font-family"]||t.fontFamily,lineHeight:t.lineHeight},{svgDocument:n.graph.view.svg,ellipsis:i.ellipsis,hyphen:i.hyphen}):c="",R.call(_a.set,this,c,{view:n,elem:e,attrs:t,refBBox:r,cell:n.cell})}},Kt=function(s,a){var n=a.attrs;return n.text!==void 0},ec={qualify:Kt},tc={qualify:Kt},nc={qualify:Kt},rc={qualify:Kt},ic={qualify:Kt},ac={qualify:Kt},oc={qualify:function(s,a){var n=a.elem;return n instanceof SVGElement},set:function(s,a){var n=a.view,e=a.elem,t="x6-title",r="".concat(s),i=n.$(e),l=i.data(t);if(l==null||l!==r){i.data(t,r);var u=e.firstChild;if(u&&u.tagName.toUpperCase()==="TITLE"){var c=u;c.textContent=r}else{var h=document.createElementNS(e.namespaceURI,"title");h.textContent=r,e.insertBefore(h,u)}}}},sc={offset:eo("x","width","right")},lc={offset:eo("y","height","bottom")},uc={offset:function(s,a){var n=a.refBBox;return s?{x:-n.x,y:-n.y}:{x:0,y:0}}};function eo(o,s,a){return function(n,e){var t=e.refBBox,r=new O,i;return n==="middle"?i=t[s]/2:n===a?i=t[s]:typeof n=="number"&&isFinite(n)?i=n>-1&&n<1?-t[s]*n:-n:H.isPercentage(n)?i=t[s]*parseFloat(n)/100:i=0,r[o]=-(t[o]+i),r}}var cc={qualify:P.isPlainObject,set:function(s,a){var n=a.view,e=a.elem;n.$(e).css(s)}},hc={set:function(s,a){var n=a.view,e=a.elem;n.$(e).html("".concat(s))}},dc={qualify:P.isPlainObject,set:function(s,a){var n=a.view;return"url(#".concat(n.graph.defineFilter(s),")")}},gc={set:function(s){return s!=null&&typeof s=="object"&&s.id?s.id:s}},q=m(11);function yt(o,s,a){var n,e;typeof s=="object"?(n=s.x,e=s.y):(n=s,e=a);var t=se.parse(o),r=t.bbox();if(r){var i=-r.height/2-r.y,l=-r.width/2-r.x;typeof n=="number"&&(l-=n),typeof e=="number"&&(i-=e),t.translate(l,i)}return t.serialize()}var to=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},fc=function(s){var a=s.size,n=s.width,e=s.height,t=s.offset,r=s.open,i=to(s,["size","width","height","offset","open"]);return no({size:a,width:n,height:e,offset:t},r===!0,!0,void 0,i)},vc=function(s){var a=s.size,n=s.width,e=s.height,t=s.offset,r=s.factor,i=to(s,["size","width","height","offset","factor"]);return no({size:a,width:n,height:e,offset:t},!1,!1,r,i)};function no(o,s,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3/4,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=o.size||10,r=o.width||t,i=o.height||t,l=new se,u={};if(s)l.moveTo(r,0).lineTo(0,i/2).lineTo(r,i),u.fill="none";else{if(l.moveTo(0,i/2),l.lineTo(r,0),!a){var c=H.clamp(n,0,1);l.lineTo(r*c,i/2)}l.lineTo(r,i),l.close()}return Object.assign(Object.assign(Object.assign({},u),e),{tagName:"path",d:yt(l.serialize(),{x:o.offset!=null?o.offset:-r/2})})}var pc=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},mc=function(s){var a=s.size,n=s.width,e=s.height,t=s.offset,r=pc(s,["size","width","height","offset"]),i=a||10,l=n||i,u=e||i,c=new se;return c.moveTo(0,u/2).lineTo(l/2,0).lineTo(l,u/2).lineTo(l/2,u).close(),Object.assign(Object.assign({},r),{tagName:"path",d:yt(c.serialize(),t??-l/2)})},Cc=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},yc=function(s){var a=s.d,n=s.offsetX,e=s.offsetY,t=Cc(s,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},t),{tagName:"path",d:yt(a,n,e)})},bc=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},wc=function(s){var a=s.size,n=s.width,e=s.height,t=s.offset,r=bc(s,["size","width","height","offset"]),i=a||10,l=n||i,u=e||i,c=new se;return c.moveTo(0,0).lineTo(l,u).moveTo(0,u).lineTo(l,0),Object.assign(Object.assign({},r),{tagName:"path",fill:"none",d:yt(c.serialize(),t||-l/2)})},xc=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},kc=function(s){var a=s.width,n=s.height,e=s.offset,t=s.open,r=s.flip,i=xc(s,["width","height","offset","open","flip"]),l=n||6,u=a||10,c=t===!0,h=r===!0,d=Object.assign(Object.assign({},i),{tagName:"path"});h&&(l=-l);var g=new se;return g.moveTo(0,l).lineTo(u,0),c?d.fill="none":(g.lineTo(u,l),g.close()),d.d=yt(g.serialize(),{x:e||-u/2,y:l/2}),d},ro=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},io=function(s){var a=s.r,n=ro(s,["r"]),e=a||5;return Object.assign(Object.assign({cx:e},n),{tagName:"circle",r:e})},Ec=function(s){var a=s.r,n=ro(s,["r"]),e=a||5,t=new se;return t.moveTo(e,0).lineTo(e,e*2),t.moveTo(0,e).lineTo(e*2,e),{children:[Object.assign(Object.assign({},io({r:e})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:yt(t.serialize(),-e)})]}},Oc=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Ac=function(s){var a=s.rx,n=s.ry,e=Oc(s,["rx","ry"]),t=a||5,r=n||5;return Object.assign(Object.assign({cx:t},e),{tagName:"ellipse",rx:t,ry:r})},bt;(function(o){o.presets=Ye,o.registry=me.create({type:"marker"}),o.registry.register(o.presets,!0)})(bt||(bt={})),function(o){o.normalize=yt}(bt||(bt={}));var Dc=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a};function ci(o){return typeof o=="string"||P.isPlainObject(o)}var Mc={qualify:ci,set:function(s,a){var n=a.view,e=a.attrs;return hi("marker-start",s,n,e)}},Tc={qualify:ci,set:function(s,a){var n=a.view,e=a.attrs;return hi("marker-end",s,n,e,{transform:"rotate(180)"})}},Sc={qualify:ci,set:function(s,a){var n=a.view,e=a.attrs;return hi("marker-mid",s,n,e)}};function hi(o,s,a,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=typeof s=="string"?{name:s}:s,r=t.name,i=t.args,l=Dc(t,["name","args"]),u=l;if(r&&typeof r=="string"){var c=bt.registry.get(r);if(c)u=c(Object.assign(Object.assign({},l),i));else return bt.registry.onNotFound(r)}var h=Object.assign(Object.assign(Object.assign({},Pc(n,o)),e),u);return Object(q.a)({},o,"url(#".concat(a.graph.defineMarker(h),")"))}function Pc(o,s){var a={},n=o.stroke;typeof n=="string"&&(a.stroke=n,a.fill=n);var e=o.strokeOpacity;if(e==null&&(e=o["stroke-opacity"]),e==null&&(e=o.opacity),e!=null&&(a["stroke-opacity"]=e,a["fill-opacity"]=e),s!=="marker-mid"){var t=parseFloat(o.strokeWidth||o["stroke-width"]);if(isFinite(t)&&t>1){var r=Math.ceil(t/2);a.refX=s==="marker-start"?r:-r}}return a}var yn=function(s,a){var n=a.view;return n.cell.isEdge()},Nc={qualify:yn,set:function(s,a){var n=a.view,e=s.stubs||0,t;if(isFinite(e)&&e!==0){var r;if(e<0){var i=n.getConnectionLength()||0;r=(i+e)/2}else r=e;var l=n.getConnection();if(l){var u=l.divideAtLength(r),c=l.divideAtLength(-r);u&&c&&(t="".concat(u[0].serialize()," ").concat(c[1].serialize()))}}return{d:t||n.getConnectionPathData()}}},ao={qualify:yn,set:or("getTangentAtLength",{rotate:!0})},jc={qualify:yn,set:or("getTangentAtLength",{rotate:!1})},oo={qualify:yn,set:or("getTangentAtRatio",{rotate:!0})},Lc={qualify:yn,set:or("getTangentAtRatio",{rotate:!1})},Fc=ao,Rc=oo;function or(o,s){var a={x:1,y:0};return function(n,e){var t,r,i=e.view,l=i[o](Number(n));return l?(r=s.rotate?l.vector().vectorAngle(a):0,t=l.start):(t=i.path.start,r=0),r===0?{transform:"translate(".concat(t.x,",").concat(t.y,"')")}:{transform:"translate(".concat(t.x,",").concat(t.y,"') rotate(").concat(r,")")}}}var it;(function(o){function s(a,n,e){if(a!=null){if(typeof a=="string")return!0;if(typeof a.qualify!="function"||R.call(a.qualify,this,n,e))return!0}return!1}o.isValidDefinition=s})(it||(it={})),function(o){o.presets=Object.assign(Object.assign({},ju),Z),o.registry=me.create({type:"attribute definition"}),o.registry.register(o.presets,!0)}(it||(it={}));var Xc={color:"#aaaaaa",thickness:1,markup:"rect",update:function(s,a){var n=a.thickness*a.sx,e=a.thickness*a.sy;E.attr(s,{width:n,height:e,rx:n,ry:e,fill:a.color})}},zc={color:"#aaaaaa",thickness:1,markup:"rect",update:function(s,a){var n=a.sx<=1?a.thickness*a.sx:a.thickness;E.attr(s,{width:n,height:n,rx:n,ry:n,fill:a.color})}},Bc={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(s,a){var n,e=a.width,t=a.height,r=a.thickness;e-r>=0&&t-r>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",E.attr(s,{d:n,stroke:a.color,"stroke-width":a.thickness})}},Ic=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(s,a){var n,e=a.width,t=a.height,r=a.thickness;e-r>=0&&t-r>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",E.attr(s,{d:n,stroke:a.color,"stroke-width":a.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(s,a){var n,e=a.factor||1,t=a.width*e,r=a.height*e,i=a.thickness;t-i>=0&&r-i>=0?n=["M",t,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",a.width=t,a.height=r,E.attr(s,{d:n,stroke:a.color,"stroke-width":a.thickness})}}],wt=function(){function o(){Object(L.a)(this,o),this.patterns={},this.root=te.create(E.createSvgDocument(),{width:"100%",height:"100%"},[E.createSvgElement("defs")]).node}return Object(F.a)(o,[{key:"add",value:function(a,n){var e=this.root.childNodes[0];e&&e.appendChild(n),this.patterns[a]=n,te.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(a,")")}).appendTo(this.root)}},{key:"get",value:function(a){return this.patterns[a]}},{key:"has",value:function(a){return this.patterns[a]!=null}}]),o}();(function(o){o.presets=Ut,o.registry=me.create({type:"grid"}),o.registry.register(o.presets,!0)})(wt||(wt={}));function di(o,s){return o??s}function Me(o,s){return o!=null&&isFinite(o)?o:s}function Vc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=di(o.color,"blue"),a=Me(o.width,1),n=Me(o.margin,2),e=Me(o.opacity,1),t=n,r=n+a;return`
    <filter>
      <feFlood flood-color="`.concat(s,'" flood-opacity="').concat(e,`" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="`).concat(r,`" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="`).concat(t,`" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `).trim()}function Uc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=di(o.color,"red"),a=Me(o.blur,0),n=Me(o.width,1),e=Me(o.opacity,1);return`
      <filter>
        <feFlood flood-color="`.concat(s,'" flood-opacity="').concat(e,`" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="`).concat(n,`"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="`).concat(a,`"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `).trim()}function Gc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.x,2),a=o.y!=null&&isFinite(o.y)?[s,o.y]:s;return`
    <filter>
      <feGaussianBlur stdDeviation="`.concat(a,`"/>
    </filter>
  `).trim()}function Hc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.dx,0),a=Me(o.dy,0),n=di(o.color,"black"),e=Me(o.blur,4),t=Me(o.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="`.concat(e,'" dx="').concat(s,'" dy="').concat(a,'" flood-color="').concat(n,'" flood-opacity="').concat(t,`" />
       </filter>`).trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="`.concat(e,`" />
         <feOffset dx="`).concat(s,'" dy="').concat(a,`" result="offsetblur" />
         <feFlood flood-color="`).concat(n,`" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="`).concat(t,`" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`).trim()}function Wc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.amount,1),a=.2126+.7874*(1-s),n=.7152-.7152*(1-s),e=.0722-.0722*(1-s),t=.2126-.2126*(1-s),r=.7152+.2848*(1-s),i=.0722-.0722*(1-s),l=.2126-.2126*(1-s),u=.0722+.9278*(1-s);return`
    <filter>
      <feColorMatrix type="matrix" values="`.concat(a," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(r," ").concat(i," 0 0 ").concat(l," ").concat(n," ").concat(u,` 0 0 0 0 0 1 0"/>
    </filter>
  `).trim()}function $c(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.amount,1),a=.393+.607*(1-s),n=.769-.769*(1-s),e=.189-.189*(1-s),t=.349-.349*(1-s),r=.686+.314*(1-s),i=.168-.168*(1-s),l=.272-.272*(1-s),u=.534-.534*(1-s),c=.131+.869*(1-s);return`
      <filter>
        <feColorMatrix type="matrix" values="`.concat(a," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(r," ").concat(i," 0 0 ").concat(l," ").concat(u," ").concat(c,` 0 0 0 0 0 1 0"/>
      </filter>
    `).trim()}function Yc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.amount,1);return`
      <filter>
        <feColorMatrix type="saturate" values="`.concat(1-s,`"/>
      </filter>
    `).trim()}function Jc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.angle,0);return`
      <filter>
        <feColorMatrix type="hueRotate" values="`.concat(s,`"/>
      </filter>
    `).trim()}function Zc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.amount,1),a=1-s;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="`.concat(s," ").concat(a,`"/>
          <feFuncG type="table" tableValues="`).concat(s," ").concat(a,`"/>
          <feFuncB type="table" tableValues="`).concat(s," ").concat(a,`"/>
        </feComponentTransfer>
      </filter>
    `).trim()}function Kc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(s,`"/>
        <feFuncG type="linear" slope="`).concat(s,`"/>
        <feFuncB type="linear" slope="`).concat(s,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}function Qc(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Me(o.amount,1),a=.5-s/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(s,'" intercept="').concat(a,`"/>
        <feFuncG type="linear" slope="`).concat(s,'" intercept="').concat(a,`"/>
        <feFuncB type="linear" slope="`).concat(s,'" intercept="').concat(a,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}var Qt;(function(o){o.presets=Ve,o.registry=me.create({type:"filter"}),o.registry.register(o.presets,!0)})(Qt||(Qt={}));var so=function(s){var a=document.createElement("canvas"),n=s.width,e=s.height;a.width=n*2,a.height=e;var t=a.getContext("2d");return t.drawImage(s,0,0,n,e),t.translate(2*n,0),t.scale(-1,1),t.drawImage(s,0,0,n,e),a},lo=function(s){var a=document.createElement("canvas"),n=s.width,e=s.height;a.width=n,a.height=e*2;var t=a.getContext("2d");return t.drawImage(s,0,0,n,e),t.translate(0,2*e),t.scale(1,-1),t.drawImage(s,0,0,n,e),a},uo=function(s){var a=document.createElement("canvas"),n=s.width,e=s.height;a.width=2*n,a.height=2*e;var t=a.getContext("2d");return t.drawImage(s,0,0,n,e),t.setTransform(-1,0,0,-1,a.width,a.height),t.drawImage(s,0,0,n,e),t.setTransform(-1,0,0,1,a.width,0),t.drawImage(s,0,0,n,e),t.setTransform(1,0,0,-1,0,a.height),t.drawImage(s,0,0,n,e),a},qc=function(s,a){var n=s.width,e=s.height,t=document.createElement("canvas");t.width=n*3,t.height=e*3;for(var r=t.getContext("2d"),i=a.angle!=null?-a.angle:-20,l=re.toRad(i),u=t.width/4,c=t.height/4,h=0;h<4;h+=1)for(var d=0;d<4;d+=1)(h+d)%2>0&&(r.setTransform(1,0,0,1,(2*h-1)*u,(2*d-1)*c),r.rotate(l),r.drawImage(s,-n/2,-e/2,n,e));return t},bn;(function(o){o.presets=Object.assign({},Gt),o.presets["flip-x"]=so,o.presets["flip-y"]=lo,o.presets["flip-xy"]=uo,o.registry=me.create({type:"background pattern"}),o.registry.register(o.presets,!0)})(bn||(bn={}));var be;(function(o){o.snapToGrid=Kr,o.normalizeMarker=yt;function s(a){return"".concat(Le.prefixCls,"-").concat(a)}o.prefix=s})(be||(be={})),function(o){function s(a,n,e){var t=this,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],i=typeof n.children=="function"?n.children(a):a[n.children||"children"];return e||(e=n.createNode(a),r.push(e)),Array.isArray(i)&&i.forEach(function(l){var u=n.createNode(l),c=n.createEdge(e,u);r.push(u,c),t.makeTree(l,n,u,r)}),r}o.makeTree=s}(be||(be={}));var _c="1.7.1",co=be.prefix("highlighted"),eh={highlight:function(s,a,n){var e=n&&n.className||co;E.addClass(a,e)},unhighlight:function(s,a,n){var e=n&&n.className||co;E.removeClass(a,e)}},ho=be.prefix("highlight-opacity"),th={highlight:function(s,a){E.addClass(a,ho)},unhighlight:function(s,a){E.removeClass(a,ho)}},nh={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},rh={highlight:function(s,a,n){var e=xt.getHighlighterId(a,n);if(xt.hasCache(e))return;n=P.defaultsDeep({},n,nh);var t=te.create(a),r,i;try{r=t.convertToPathData()}catch(w){i=t.bbox(!0),r=E.rectToPathData(Object.assign(Object.assign({},n),i))}var l=E.createSvgElement("path");if(E.attr(l,Object.assign({d:r,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?E.kebablizeAttrs(n.attrs):null)),s.isEdgeElement(a))E.attr(l,"d",s.getConnectionPathData());else{var u=t.getTransformToElement(s.container),c=n.padding;if(c){i==null&&(i=t.bbox(!0));var h=i.x+i.width/2,d=i.y+i.height/2;i=E.transformRectangle(i,u);var g=Math.max(i.width,1),f=Math.max(i.height,1),v=(g+c)/g,p=(f+c)/f,C=E.createSVGMatrix({a:v,b:0,c:0,d:p,e:h-v*h,f:d-p*d});u=u.multiply(C)}E.transform(l,u)}E.addClass(l,be.prefix("highlight-stroke"));var b=s.cell,y=function(){return xt.removeHighlighter(e)};b.on("removed",y),b.model&&b.model.on("reseted",y),s.container.appendChild(l),xt.setCache(e,l)},unhighlight:function(s,a,n){xt.removeHighlighter(xt.getHighlighterId(a,n))}},xt;(function(o){function s(r,i){return E.ensureId(r),r.id+JSON.stringify(i)}o.getHighlighterId=s;var a={};function n(r,i){a[r]=i}o.setCache=n;function e(r){return a[r]!=null}o.hasCache=e;function t(r){var i=a[r];i&&(E.remove(i),delete a[r])}o.removeHighlighter=t})(xt||(xt={}));var ht;(function(o){function s(a,n){if(typeof n.highlight!="function")throw new Error("Highlighter '".concat(a,"' is missing required `highlight()` method"));if(typeof n.unhighlight!="function")throw new Error("Highlighter '".concat(a,"' is missing required `unhighlight()` method"))}o.check=s})(ht||(ht={})),function(o){o.presets=cn,o.registry=me.create({type:"highlighter"}),o.registry.register(o.presets,!0)}(ht||(ht={}));function gi(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new O(H.normalizePercentage(s.x,o.width),H.normalizePercentage(s.y,o.height))}function fi(o,s,a){return Object.assign({angle:s,position:o.toJSON()},a)}var ih=function(s,a){return s.map(function(n){var e=n.x,t=n.y,r=n.angle;return fi(gi(a,{x:e,y:t}),r||0)})},ah=function(s,a,n){var e=n.start||0,t=n.step||20;return go(s,a,e,function(r,i){return(r+.5-i/2)*t})},oh=function(s,a,n){var e=n.start||0,t=n.step||360/s.length;return go(s,a,e,function(r){return r*t})};function go(o,s,a,n){var e=s.getCenter(),t=s.getTopCenter(),r=s.width/s.height,i=Jt.fromRect(s),l=o.length;return o.map(function(u,c){var h=a+n(c,l),d=t.clone().rotate(-h,e).scale(r,1,e),g=u.compensateRotate?-i.tangentTheta(d):0;return(u.dx||u.dy)&&d.translate(u.dx||0,u.dy||0),u.dr&&d.move(e,u.dr),fi(d.round(),g,u)})}var sh=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},lh=function(s,a,n){var e=gi(a,n.start||a.getOrigin()),t=gi(a,n.end||a.getCorner());return wn(s,e,t,n)},uh=function(s,a,n){return wn(s,a.getTopLeft(),a.getBottomLeft(),n)},ch=function(s,a,n){return wn(s,a.getTopRight(),a.getBottomRight(),n)},hh=function(s,a,n){return wn(s,a.getTopLeft(),a.getTopRight(),n)},dh=function(s,a,n){return wn(s,a.getBottomLeft(),a.getBottomRight(),n)};function wn(o,s,a,n){var e=new $(s,a),t=o.length;return o.map(function(r,i){var l=r.strict,u=sh(r,["strict"]),c=l||n.strict?(i+1)/(t+1):(i+.5)/t,h=e.pointAt(c);return(u.dx||u.dy)&&h.translate(u.dx||0,u.dy||0),fi(h.round(),0,u)})}var Xt;(function(o){o.presets=et,o.registry=me.create({type:"port layout"}),o.registry.register(o.presets,!0)})(Xt||(Xt={}));var gh={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function kt(o,s){var a=s||{},n=a.x,e=a.y,t=a.angle,r=a.attrs;return P.defaultsDeep({},{angle:t,attrs:r,position:{x:n,y:e}},o,gh)}var fh=function(s,a,n){return kt({position:a.getTopLeft()},n)},vh=function(s,a,n){return kt({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},ph=function(s,a,n){return kt({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},mh=function(s,a,n){return kt({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},Ch=function(s,a,n){return kt({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},yh=function(s,a,n){return fo(s,a,!1,n)},bh=function(s,a,n){return fo(s,a,!0,n)},wh=function(s,a,n){return vo(s,a,!1,n)},xh=function(s,a,n){return vo(s,a,!0,n)};function fo(o,s,a,n){var e=n.offset!=null?n.offset:15,t=s.getCenter().theta(o),r=po(s),i,l,u,c,h=0;return t<r[1]||t>r[2]?(i=".3em",l=e,u=0,c="start"):t<r[0]?(i="0",l=0,u=-e,a?(h=-90,c="start"):c="middle"):t<r[3]?(i=".3em",l=-e,u=0,c="end"):(i=".6em",l=0,u=e,a?(h=90,c="start"):c="middle"),kt({position:{x:Math.round(l),y:Math.round(u)},angle:h,attrs:{".":{y:i,"text-anchor":c}}},n)}function vo(o,s,a,n){var e=n.offset!=null?n.offset:15,t=s.getCenter().theta(o),r=po(s),i,l,u,c,h=0;return t<r[1]||t>r[2]?(i=".3em",l=-e,u=0,c="end"):t<r[0]?(i=".6em",l=0,u=e,a?(h=90,c="start"):c="middle"):t<r[3]?(i=".3em",l=e,u=0,c="start"):(i="0em",l=0,u=-e,a?(h=-90,c="start"):c="middle"),kt({position:{x:Math.round(l),y:Math.round(u)},angle:h,attrs:{".":{y:i,"text-anchor":c}}},n)}function po(o){var s=o.getCenter(),a=s.theta(o.getTopLeft()),n=s.theta(o.getBottomLeft()),e=s.theta(o.getBottomRight()),t=s.theta(o.getTopRight());return[a,t,e,n]}var kh=function(s,a,n){return mo(s.diff(a.getCenter()),!1,n)},Eh=function(s,a,n){return mo(s.diff(a.getCenter()),!0,n)};function mo(o,s,a){var n=a.offset!=null?a.offset:20,e=new O(0,0),t=-o.theta(e),r=o.clone().move(e,n).diff(o).round(),i=".3em",l,u=t;return(t+90)%180===0?(l=s?"end":"middle",!s&&t===-270&&(i="0em")):t>-270&&t<-90?(l="start",u=t-180):l="end",kt({position:r.round().toJSON(),angle:s?u:0,attrs:{".":{y:i,"text-anchor":l}}},a)}var qt;(function(o){o.presets=Ue,o.registry=me.create({type:"port label layout"}),o.registry.register(o.presets,!0)})(qt||(qt={}));var _=m(13),ee=m(10),ue=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.call(this),n.cid=vi.uniqueId(),a.views[n.cid]=Object(Ae.a)(n),n}return Object(F.a)(a,[{key:"confirmUpdate",value:function(e,t){return 0}},{key:"$",value:function(e){return a.$(e)}},{key:"empty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).empty(),this}},{key:"unmount",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).remove(),this}},{key:"remove",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete a.views[this.cid]),this.unmount(e),this}},{key:"onRemove",value:function(){}},{key:"addClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}},{key:"removeClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}},{key:"setStyle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).css(e),this}},{key:"setAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return e!=null&&t!=null&&(t instanceof SVGElement?E.attr(t,e):this.$(t).attr(e)),this}},{key:"findAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=t;r&&r.nodeType===1;){var i=r.getAttribute(e);if(i!=null)return i;if(r===this.container)return null;r=r.parentNode}return null}},{key:"find",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors;return a.find(e,t,r).elems}},{key:"findOne",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors,i=this.find(e,t,r);return i.length>0?i[0]:null}},{key:"findByAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,r=t;r&&r.getAttribute;){var i=r.getAttribute(e);if((i!=null||r===this.container)&&i!=="false")return r;r=r.parentNode}return null}},{key:"getSelector",value:function(e,t){var r;if(e===this.container)return typeof t=="string"&&(r="> ".concat(t)),r;if(e){var i=E.index(e)+1;r="".concat(e.tagName.toLowerCase(),":nth-child(").concat(i,")"),t&&(r+=" > ".concat(t)),r=this.getSelector(e.parentNode,r)}return r}},{key:"prefixClassName",value:function(e){return be.prefix(e)}},{key:"delegateEvents",value:function(e,t){var r=this;if(e==null)return this;t||this.undelegateEvents();var i=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(function(l){var u=l.match(i);if(u==null)return;var c=r.getEventHandler(e[l]);typeof c=="function"&&r.delegateEvent(u[1],u[2],c)}),this}},{key:"undelegateEvents",value:function(){return this.$(this.container).off(this.getEventNamespace()),this}},{key:"delegateDocumentEvents",value:function(e,t){return this.addEventListeners(document,e,t),this}},{key:"undelegateDocumentEvents",value:function(){return this.removeEventListeners(document),this}},{key:"delegateEvent",value:function(e,t,r){return this.$(this.container).on(e+this.getEventNamespace(),t,r),this}},{key:"undelegateEvent",value:function(e,t,r){var i=e+this.getEventNamespace();return t==null?this.$(this.container).off(i):typeof t=="string"?this.$(this.container).off(i,t,r):this.$(this.container).off(i,t),this}},{key:"addEventListeners",value:function(e,t,r){var i=this;if(t==null)return this;var l=this.getEventNamespace(),u=this.$(e);return Object.keys(t).forEach(function(c){var h=i.getEventHandler(t[c]);typeof h=="function"&&u.on(c+l,r,h)}),this}},{key:"removeEventListeners",value:function(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}},{key:"getEventNamespace",value:function(){return".".concat(Le.prefixCls,"-event-").concat(this.cid)}},{key:"getEventHandler",value:function(e){var t=this,r;if(typeof e=="string"){var i=this[e];typeof i=="function"&&(r=function(){for(var u=arguments.length,c=new Array(u),h=0;h<u;h++)c[h]=arguments[h];return i.call.apply(i,[t].concat(c))})}else r=function(){for(var u=arguments.length,c=new Array(u),h=0;h<u;h++)c[h]=arguments[h];return e.call.apply(e,[t].concat(c))};return r}},{key:"getEventTarget",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.target,i=e.type,l=e.clientX,u=l===void 0?0:l,c=e.clientY,h=c===void 0?0:c;return t.fromPoint||i==="touchmove"||i==="touchend"?document.elementFromPoint(u,h):r}},{key:"stopPropagation",value:function(e){return this.setEventData(e,{propagationStopped:!0}),this}},{key:"isPropagationStopped",value:function(e){return this.getEventData(e).propagationStopped===!0}},{key:"getEventData",value:function(e){return this.eventData(e)}},{key:"setEventData",value:function(e,t){return this.eventData(e,t)}},{key:"eventData",value:function(e,t){if(e==null)throw new TypeError("Event object required");var r=e.data,i="__".concat(this.cid,"__");return t==null?r==null?{}:r[i]||{}:(r==null&&(r=e.data={}),r[i]==null?r[i]=Object.assign({},t):r[i]=Object.assign(Object.assign({},r[i]),t),r[i])}},{key:"normalizeEvent",value:function(e){return a.normalizeEvent(e)}},{key:"priority",get:function(){return 2}}]),a}(Pe);(function(o){function s(t){return ye()(t)}o.$=s;function a(t,r){return r?E.createSvgElement(t||"g"):E.createElementNS(t||"div")}o.createElement=a;function n(t,r,i){if(!t||t===".")return{elems:[r]};if(i){var l=i[t];if(l)return{elems:Array.isArray(l)?l:[l]}}return Le.useCSSSelector?{isCSSSelector:!0,elems:s(r).find(t).toArray()}:{elems:[]}}o.find=n;function e(t){var r=t,i=t.originalEvent,l=i&&i.changedTouches&&i.changedTouches[0];if(l){for(var u in t)l[u]===void 0&&(l[u]=t[u]);r=l}var c=r.target;if(c){var h=c.correspondingUseElement;h&&(r.target=h)}return r}o.normalizeEvent=e})(ue||(ue={})),function(o){o.views={};function s(a){return o.views[a]||null}o.getView=s}(ue||(ue={}));var vi;(function(o){var s=0;function a(){var n="v".concat(s);return s+=1,n}o.uniqueId=a})(vi||(vi={}));var Oh=function(s){return s};function Co(o,s){return s===0?"0%":"".concat(Math.round(o/s*100),"%")}function yo(o){var s=function(n,e,t,r){return e.isEdgeElement(t)?Dh(o,n,e,t,r):Ah(o,n,e,t,r)};return s}function Ah(o,s,a,n,e){var t=a.cell,r=t.getAngle(),i=a.getUnrotatedBBoxOfElement(n),l=t.getBBox().getCenter(),u=O.create(e).rotate(r,l),c=u.x-i.x,h=u.y-i.y;return o&&(c=Co(c,i.width),h=Co(h,i.height)),s.anchor={name:"topLeft",args:{dx:c,dy:h,rotate:!0}},s}function Dh(o,s,a,n,e){var t=a.getConnection();if(!t)return s;var r=t.closestPointLength(e);if(o){var i=t.length();s.anchor={name:"ratio",args:{ratio:r/i}}}else s.anchor={name:"length",args:{length:r}};return s}var Mh=yo(!0),Th=yo(!1),_t;(function(o){o.presets=hn,o.registry=me.create({type:"connection strategy"}),o.registry.register(o.presets,!0)})(_t||(_t={}));var Sh=function(){function o(s){Object(L.a)(this,o),this.view=s,this.clean()}return Object(F.a)(o,[{key:"clean",value:function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new ir,this.pathCache={}}},{key:"get",value:function(a){var n=this.elemCache;return n.has(a)||this.elemCache.set(a,{}),this.elemCache.get(a)}},{key:"getData",value:function(a){var n=this.get(a);return n.data||(n.data={}),n.data}},{key:"getMatrix",value:function(a){var n=this.get(a);if(n.matrix==null){var e=this.view.rotatableNode||this.view.container;n.matrix=E.getTransformToElement(a,e)}return E.createSVGMatrix(n.matrix)}},{key:"getShape",value:function(a){var n=this.get(a);return n.shape==null&&(n.shape=E.toGeometryShape(a)),n.shape.clone()}},{key:"getBoundingRect",value:function(a){var n=this.get(a);return n.boundingRect==null&&(n.boundingRect=E.getBBox(a)),n.boundingRect.clone()}}]),o}(),ie;(function(o){function s(c){return c!=null&&!a(c)}o.isJSONMarkup=s;function a(c){return c!=null&&typeof c=="string"}o.isStringMarkup=a;function n(c){return c==null||a(c)?c:P.cloneDeep(c)}o.clone=n;function e(c){return"".concat(c).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}o.sanitize=e;function t(c){var h=document.createDocumentFragment(),d={},g={},f=e(c),v=J.sanitizeHTML(f,{raw:!0});return v.forEach(function(p){h.appendChild(p)}),{fragment:h,selectors:g,groups:d}}o.parseStringMarkup=t;function r(c){for(var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:E.ns.svg},d=document.createDocumentFragment(),g={},f={},v=[{markup:Array.isArray(c)?c:[c],parent:d,ns:h.ns}],p=function(){var b=v.pop(),y=b.ns||E.ns.svg,w=b.markup,x=b.parent;w.forEach(function(k){var M=k.tagName;if(!M)throw new TypeError("Invalid tagName");k.ns&&(y=k.ns);var A=y===E.ns.svg,S=y?E.createElementNS(M,y):E.createElement(M),N=k.attrs;N&&(A?E.attr(S,E.kebablizeAttrs(N)):ye()(S).attr(N));var j=k.style;j&&ye()(S).css(j);var B=k.className;B!=null&&S.setAttribute("class",Array.isArray(B)?B.join(" "):B),k.textContent&&(S.textContent=k.textContent);var X=k.selector;if(X!=null){if(f[X])throw new TypeError("Selector must be unique");f[X]=S}if(k.groupSelector){var z=k.groupSelector;Array.isArray(z)||(z=[z]),z.forEach(function(T){g[T]||(g[T]=[]),g[T].push(S)})}x.appendChild(S);var D=k.children;Array.isArray(D)&&v.push({ns:y,markup:D,parent:S})})};v.length>0;)p();return Object.keys(g).forEach(function(C){if(f[C])throw new Error("Ambiguous group selector");f[C]=g[C]}),{fragment:d,selectors:f,groups:g}}o.parseJSONMarkup=r;function i(c){return c instanceof SVGElement?E.createSvgElement("g"):E.createElement("div")}function l(c){if(a(c)){var h=te.createVectors(c),d=h.length;if(d===1)return{elem:h[0].node};if(d>1){var g=i(h[0].node);return h.forEach(function(C){g.appendChild(C.node)}),{elem:g}}return{}}var f=r(c),v=f.fragment,p=null;return v.childNodes.length>1?(p=i(v.firstChild),p.appendChild(v)):p=v.firstChild,{elem:p,selectors:f.selectors}}o.renderMarkup=l;function u(c){for(var h=te.createVectors(c),d=document.createDocumentFragment(),g=0,f=h.length;g<f;g+=1){var v=h[g].node;d.appendChild(v)}return{fragment:d,selectors:{}}}o.parseLabelStringMarkup=u})(ie||(ie={})),function(o){function s(e,t,r){if(e!=null){var i,l=e.tagName.toLowerCase();if(e===t)return typeof r=="string"?i="> ".concat(l," > ").concat(r):i="> ".concat(l),i;var u=e.parentNode;if(u&&u.childNodes.length>1){var c=E.index(e)+1;i="".concat(l,":nth-child(").concat(c,")")}else i=l;return r&&(i+=" > ".concat(r)),s(e.parentNode,t,i)}return r}o.getSelector=s;function a(e,t,r){if(e.nodeName==="#text")return null;var i=null,l=null,u=null,c=!1,h={tagName:e.tagName};if(e.attributes){u={};for(var d=0,g=e.attributes.length;d<g;d+=1){var f=e.attributes[d],v=f.nodeName,p=f.nodeValue;v==="selector"?i=p:v==="groupSelector"?l=p:v==="class"?h.attrs={class:p}:u[v]=p}}return i==null&&(c=!0,i=s(e,t)),e.namespaceURI&&(h.ns=e.namespaceURI),h.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?h.ns=E.ns.xhtml:r&&(h.ns=r)),i&&(h.selector=i),l!=null&&(h.groupSelector=l),{markup:h,attrs:u,isCSSSelector:c}}function n(e){var t=o.sanitize(e),r=E.parseXML(t,{mimeType:"image/svg+xml"}),i=Array.prototype.slice.call(r.childNodes),l={},u=new WeakMap,c=function d(g,f,v){var p=a(g,f,v);if(p==null){var C=u.get(g.parentNode);C&&g.textContent&&(C.textContent=g.textContent)}else{var b=p.markup,y=p.attrs,w=p.isCSSSelector;if(u.set(g,b),b.selector&&y!=null&&(Object.keys(y).length&&(l[b.selector]=y),w&&delete b.selector),g.childNodes&&g.childNodes.length>0)for(var x=0,k=g.childNodes.length;x<k;x+=1){var M=g.childNodes[x],A=d(M,f,b.ns);A&&(b.children==null&&(b.children=[]),b.children.push(A))}return b}},h=i.map(function(d){return c(d,d)}).filter(function(d){return d!=null});return{markup:h,attrs:l}}o.xml2json=n}(ie||(ie={})),function(o){function s(){return"g"}o.getPortContainerMarkup=s;function a(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}o.getPortMarkup=a;function n(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}o.getPortLabelMarkup=n}(ie||(ie={})),function(o){function s(){return o.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}o.getEdgeMarkup=s;function a(){return o.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}o.getEdgeToolMarkup=a;function n(){return o.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}o.getEdgeVertexMarkup=n;function e(){return o.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}o.getEdgeArrowheadMarkup=e}(ie||(ie={})),function(o){function s(){return{tagName:"foreignObject",selector:"fo",children:[{ns:E.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:E.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}o.getForeignObjectMarkup=s}(ie||(ie={}));var bo=function(){function o(s){Object(L.a)(this,o),this.view=s}return Object(F.a)(o,[{key:"getDefinition",value:function(a){return this.cell.getAttrDefinition(a)}},{key:"processAttrs",value:function(a,n){var e=this,t,r,i,l,u=[],c=function(d){return d.replace(/[A-Z]/g,"-$&").toLowerCase()};return Object.keys(n).forEach(function(h){var d=n[h],g=e.getDefinition(h),f=R.call(it.isValidDefinition,e.view,g,d,{elem:a,attrs:n,cell:e.cell,view:e.view});g&&f?typeof g=="string"?(t==null&&(t={}),t[g]=d):d!==null&&u.push({name:h,definition:g}):(t==null&&(t={}),t[c(h)]=d)}),u.forEach(function(h){var d=h.name,g=h.definition,f=n[d],v=g;typeof v.set=="function"&&(r==null&&(r={}),r[d]=f);var p=g;typeof p.offset=="function"&&(i==null&&(i={}),i[d]=f);var C=g;typeof C.position=="function"&&(l==null&&(l={}),l[d]=f)}),{raw:n,normal:t,set:r,offset:i,position:l}}},{key:"mergeProcessedAttrs",value:function(a,n){a.set=Object.assign(Object.assign({},a.set),n.set),a.position=Object.assign(Object.assign({},a.position),n.position),a.offset=Object.assign(Object.assign({},a.offset),n.offset);var e=a.normal&&a.normal.transform;e!=null&&n.normal&&(n.normal.transform=e),a.normal=n.normal}},{key:"findAttrs",value:function(a,n,e,t){var r=[],i=new ir;return Object.keys(a).forEach(function(l){var u=a[l];if(!P.isPlainObject(u))return;var c=ue.find(l,n,t),h=c.isCSSSelector,d=c.elems;e[l]=d;for(var g=0,f=d.length;g<f;g+=1){var v=d[g],p=t&&t[l]===v,C=i.get(v);if(C){C.array||(r.push(v),C.array=!0,C.attrs=[C.attrs],C.priority=[C.priority]);var b=C.attrs,y=C.priority;if(p)b.unshift(u),y.unshift(-1);else{var w=pe.sortedIndex(y,h?-1:f);b.splice(w,0,u),y.splice(w,0,f)}}else i.set(v,{elem:v,attrs:u,priority:p?-1:f,array:!1})}}),r.forEach(function(l){var u=i.get(l),c=u.attrs;u.attrs=c.reduceRight(function(h,d){return P.merge(h,d)},{})}),i}},{key:"updateRelativeAttrs",value:function(a,n,e,t){var r=this,i=n.raw||{},l=n.normal||{},u=n.set,c=n.position,h=n.offset,d=function(){return{elem:a,cell:r.cell,view:r.view,attrs:i,refBBox:e.clone()}};if(u!=null&&Object.keys(u).forEach(function(A){var S=u[A],N=r.getDefinition(A);if(N!=null){var j=R.call(N.set,r.view,S,d());typeof j=="object"?l=Object.assign(Object.assign({},l),j):j!=null&&(l[A]=j)}}),a instanceof HTMLElement){this.view.setAttrs(l,a);return}var g=l.transform,f=g?"".concat(g):null,v=E.transformStringToMatrix(f),p=new O(v.e,v.f);g&&(delete l.transform,v.e=0,v.f=0);var C=1,b=1;if(c||h){var y=this.view.getScaleOfElement(a,t.scalableNode);C=y.sx,b=y.sy}var w=!1;c!=null&&Object.keys(c).forEach(function(A){var S=c[A],N=r.getDefinition(A);if(N!=null){var j=R.call(N.position,r.view,S,d());j!=null&&(w=!0,p.translate(O.create(j).scale(C,b)))}}),this.view.setAttrs(l,a);var x=!1;if(h!=null){var k=this.view.getBoundingRectOfElement(a);if(k.width>0&&k.height>0){var M=E.transformRectangle(k,v).scale(1/C,1/b);Object.keys(h).forEach(function(A){var S=h[A],N=r.getDefinition(A);if(N!=null){var j=R.call(N.offset,r.view,S,{elem:a,cell:r.cell,view:r.view,attrs:i,refBBox:M});j!=null&&(x=!0,p.translate(O.create(j).scale(C,b)))}})}}(g!=null||w||x)&&(p.round(1),v.e=p.x,v.f=p.y,a.setAttribute("transform",E.matrixToTransformString(v)))}},{key:"update",value:function(a,n,e){var t=this,r={},i=this.findAttrs(e.attrs||n,a,r,e.selectors),l=e.attrs?this.findAttrs(n,a,r,e.selectors):i,u=[];i.each(function(d){var g=d.elem,f=d.attrs,v=t.processAttrs(g,f);if(v.set==null&&v.position==null&&v.offset==null)t.view.setAttrs(v.normal,g);else{var p=l.get(g),C=p?p.attrs:null,b=C&&f.ref==null?C.ref:f.ref,y;if(b){if(y=(r[b]||t.view.find(b,a,e.selectors))[0],!y)throw new Error('"'.concat(b,'" reference does not exist.'))}else y=null;var w={node:g,refNode:y,attributes:C,processedAttributes:v},x=u.findIndex(function(k){return k.refNode===g});x>-1?u.splice(x,0,w):u.push(w)}});var c=new ir,h;u.forEach(function(d){var g=d.node,f=d.refNode,v,p=f!=null&&e.rotatableNode!=null&&E.contains(e.rotatableNode,f);if(f&&(v=c.get(f)),!v){var C=p?e.rotatableNode:a;v=f?E.getBBox(f,{target:C}):e.rootBBox,f&&c.set(f,v)}var b;e.attrs&&d.attributes?(b=t.processAttrs(g,d.attributes),t.mergeProcessedAttrs(b,d.processedAttributes)):b=d.processedAttributes;var y=v;p&&e.rotatableNode!=null&&!e.rotatableNode.contains(g)&&(h||(h=E.transformStringToMatrix(E.attr(e.rotatableNode,"transform"))),y=E.transformRectangle(v,h)),t.updateRelativeAttrs(g,b,y,e)})}},{key:"cell",get:function(){return this.view.cell}}]),o}(),wo=function(){function o(s,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Object(L.a)(this,o),this.view=s;var e={},t={},r=0;Object.keys(a).forEach(function(l){var u=a[l];Array.isArray(u)||(u=[u]),u.forEach(function(c){var h=e[c];h||(r+=1,h=e[c]=1<<r),t[l]|=h})});var i=n;if(Array.isArray(i)||(i=[i]),i.forEach(function(l){e[l]||(r+=1,e[l]=1<<r)}),r>25)throw new Error("Maximum number of flags exceeded.");this.flags=e,this.attrs=t,this.bootstrap=n}return Object(F.a)(o,[{key:"getFlag",value:function(a){var n=this.flags;return n==null?0:Array.isArray(a)?a.reduce(function(e,t){return e|n[t]},0):n[a]|0}},{key:"hasAction",value:function(a,n){return a&this.getFlag(n)}},{key:"removeAction",value:function(a,n){return a^a&this.getFlag(n)}},{key:"getBootstrapFlag",value:function(){return this.getFlag(this.bootstrap)}},{key:"getChangedFlag",value:function(){var a=this,n=0;return this.attrs&&Object.keys(this.attrs).forEach(function(e){a.cell.hasChanged(e)&&(n|=a.attrs[e])}),n}},{key:"cell",get:function(){return this.view.cell}}]),o}(),Ph=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},xe=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(L.a)(this,a),e=s.call(this),e.cell=n,e.options=e.ensureOptions(t),e.attr=new bo(Object(Ae.a)(e)),e.flag=new wo(Object(Ae.a)(e),e.options.actions,e.options.bootstrap),e.cache=new Sh(Object(Ae.a)(e)),e.setContainer(e.ensureContainer()),e.setup(),e.$(e.container).data("view",Object(Ae.a)(e)),e.init(),e}return Object(F.a)(a,[{key:"init",value:function(){}},{key:"onRemove",value:function(){this.removeTools()}},{key:"getConstructor",value:function(){return this.constructor}},{key:"ensureOptions",value:function(e){return this.getConstructor().getOptions(e)}},{key:"getContainerTagName",value:function(){return this.options.isSvgElement?"g":"div"}},{key:"getContainerStyle",value:function(){}},{key:"getContainerAttrs",value:function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}},{key:"getContainerClassName",value:function(){return this.prefixClassName("cell")}},{key:"ensureContainer",value:function(){return ue.createElement(this.getContainerTagName(),this.options.isSvgElement)}},{key:"setContainer",value:function(e){if(this.container!==e){this.undelegateEvents(),this.container=e,this.options.events!=null&&this.delegateEvents(this.options.events);var t=this.getContainerAttrs();t!=null&&this.setAttrs(t,e);var r=this.getContainerStyle();r!=null&&this.setStyle(r,e);var i=this.getContainerClassName();i!=null&&this.addClass(i,e)}return this}},{key:"isNodeView",value:function(){return!1}},{key:"isEdgeView",value:function(){return!1}},{key:"render",value:function(){return this}},{key:"confirmUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return 0}},{key:"getBootstrapFlag",value:function(){return this.flag.getBootstrapFlag()}},{key:"getFlag",value:function(e){return this.flag.getFlag(e)}},{key:"hasAction",value:function(e,t){return this.flag.hasAction(e,t)}},{key:"removeAction",value:function(e,t){return this.flag.removeAction(e,t)}},{key:"handleAction",value:function(e,t,r,i){if(this.hasAction(e,t)){r();var l=[t];return i&&(typeof i=="string"?l.push(i):l.push.apply(l,Object(W.a)(i))),this.removeAction(e,l)}return e}},{key:"setup",value:function(){var e=this;this.cell.on("changed",function(t){var r=t.options;return e.onAttrsChange(r)})}},{key:"onAttrsChange",value:function(e){var t=this.flag.getChangedFlag();if(e.updated||!t)return;e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,t,this.priority,e)}},{key:"parseJSONMarkup",value:function(e,t){var r=ie.parseJSONMarkup(e),i=r.selectors,l=this.rootSelector;if(t&&l){if(i[l])throw new Error("Invalid root selector");i[l]=t}return r}},{key:"can",value:function(e){var t=this.options.interacting;return t=typeof t=="function"?R.call(t,this.graph,this):t,typeof t=="object"?t[e]!==!1:typeof t=="boolean"?t:!1}},{key:"setInteracting",value:function(e){return this.options.interacting=e,this}},{key:"cleanCache",value:function(){return this.cache.clean(),this}},{key:"getCache",value:function(e){return this.cache.get(e)}},{key:"getDataOfElement",value:function(e){return this.cache.getData(e)}},{key:"getMatrixOfElement",value:function(e){return this.cache.getMatrix(e)}},{key:"getShapeOfElement",value:function(e){return this.cache.getShape(e)}},{key:"getScaleOfElement",value:function(e,t){var r,i;if(t&&t.contains(e)){var l=E.scale(t);r=1/l.sx,i=1/l.sy}else r=1,i=1;return{sx:r,sy:i}}},{key:"getBoundingRectOfElement",value:function(e){return this.cache.getBoundingRect(e)}},{key:"getBBoxOfElement",value:function(e){var t=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),i=this.getRootRotatedMatrix(),l=this.getRootTranslatedMatrix();return E.transformRectangle(t,l.multiply(i).multiply(r))}},{key:"getUnrotatedBBoxOfElement",value:function(e){var t=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),i=this.getRootTranslatedMatrix();return E.transformRectangle(t,i.multiply(r))}},{key:"getBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t;if(e.useCellGeometry){var r=this.cell,i=r.isNode()?r.getAngle():0;t=r.getBBox().bbox(i)}else t=this.getBBoxOfElement(this.container);return this.graph.localToGraph(t)}},{key:"getRootTranslatedMatrix",value:function(){var e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return E.createSVGMatrix().translate(t.x,t.y)}},{key:"getRootRotatedMatrix",value:function(){var e=E.createSVGMatrix(),t=this.cell,r=t.isNode()?t.getAngle():0;if(r){var i=t.getBBox(),l=i.width/2,u=i.height/2;e=e.translate(l,u).rotate(r).translate(-l,-u)}return e}},{key:"findMagnet",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.findByAttr("magnet",e)}},{key:"updateAttrs",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.rootBBox==null&&(r.rootBBox=new U),r.selectors==null&&(r.selectors=this.selectors),this.attr.update(e,t,r)}},{key:"isEdgeElement",value:function(e){return this.cell.isEdge()&&(e==null||e===this.container)}},{key:"prepareHighlight",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e&&this.$(e)[0]||this.container;return t.partial=r===this.container,r}},{key:"highlight",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:r,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:r,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:r,options:t,view:this,node:this.cell,cell:this.cell}),this}},{key:"unhighlight",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:r,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:r,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:r,options:t,view:this,edge:this.cell,cell:this.cell}),this}},{key:"notifyUnhighlight",value:function(e,t){}},{key:"getEdgeTerminal",value:function(e,t,r,i,l){var u=this.cell,c=this.findAttr("port",e),h=e.getAttribute("data-selector"),d={cell:u.id};return h!=null&&(d.magnet=h),c!=null?(d.port=c,u.isNode()&&(!u.hasPort(c)&&h==null&&(d.selector=this.getSelector(e)))):h==null&&this.container!==e&&(d.selector=this.getSelector(e)),this.customizeEdgeTerminal(d,e,t,r,i,l)}},{key:"customizeEdgeTerminal",value:function(e,t,r,i,l,u){var c=l.getStrategy()||this.graph.options.connecting.strategy;if(c){var h=typeof c=="string"?c:c.name,d=typeof c=="string"?{}:c.args||{},g=_t.registry;if(h){var f=g.get(h);if(f==null)return g.onNotFound(h);var v=R.call(f,this.graph,e,this,t,new O(r,i),l,u,d);if(v)return v}}return e}},{key:"getMagnetFromEdgeTerminal",value:function(e){var t=this.cell,r=this.container,i=e.port,l=e.magnet,u;return i!=null&&t.isNode()&&t.hasPort(i)?u=this.findPortElem(i,l)||r:(l||(l=e.selector),!l&&i!=null&&(l='[port="'.concat(i,'"]')),u=this.findOne(l,r,this.selectors)),u}},{key:"animate",value:function(e,t){var r=typeof e=="string"?this.findOne(e):e;if(r==null)throw new Error("Invalid animation element.");var i=r.parentNode,l=function(){i||E.remove(r)},u=te.create(r);i||u.appendTo(this.graph.view.stage);var c=t.complete;return t.complete=function(h){l(),c&&c(h)},u.animate(t)}},{key:"animateTransform",value:function(e,t){var r=typeof e=="string"?this.findOne(e):e;if(r==null)throw new Error("Invalid animation element.");var i=r.parentNode,l=function(){i||E.remove(r)},u=te.create(r);i||u.appendTo(this.graph.view.stage);var c=t.complete;return t.complete=function(h){l(),c&&c(h)},u.animateTransform(t)}},{key:"hasTools",value:function(e){var t=this.tools;return t==null?!1:e==null?!0:t.name===e}},{key:"addTools",value:function(e){if(this.removeTools(),e){var t=e instanceof Ge?e:new Ge(e);this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()}return this}},{key:"updateTools",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tools&&this.tools.update(e),this}},{key:"removeTools",value:function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}},{key:"hideTools",value:function(){return this.tools&&this.tools.hide(),this}},{key:"showTools",value:function(){return this.tools&&this.tools.show(),this}},{key:"renderTools",value:function(){var e=this.cell.getTools();return this.addTools(e),this}},{key:"notify",value:function(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}},{key:"getEventArgs",value:function(e,t,r){var i=this,l=i.cell;return t==null||r==null?{e,view:i,cell:l}:{e,x:t,y:r,view:i,cell:l}}},{key:"onClick",value:function(e,t,r){this.notify("cell:click",this.getEventArgs(e,t,r))}},{key:"onDblClick",value:function(e,t,r){this.notify("cell:dblclick",this.getEventArgs(e,t,r))}},{key:"onContextMenu",value:function(e,t,r){this.notify("cell:contextmenu",this.getEventArgs(e,t,r))}},{key:"onMouseDown",value:function(e,t,r){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,r))}},{key:"onMouseUp",value:function(e,t,r){this.notify("cell:mouseup",this.getEventArgs(e,t,r)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}},{key:"onMouseMove",value:function(e,t,r){this.notify("cell:mousemove",this.getEventArgs(e,t,r))}},{key:"onMouseOver",value:function(e){this.notify("cell:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){this.notify("cell:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){this.notify("cell:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){this.notify("cell:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,t,r,i){this.notify("cell:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}},{key:"onCustomEvent",value:function(e,t,r,i){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),this.notify(t,Object.assign({},this.getEventArgs(e,r,i)))}},{key:"onMagnetMouseDown",value:function(e,t,r,i){}},{key:"onMagnetDblClick",value:function(e,t,r,i){}},{key:"onMagnetContextMenu",value:function(e,t,r,i){}},{key:"onLabelMouseDown",value:function(e,t,r){}},{key:"checkMouseleave",value:function(e){var t=this.graph;t.renderer.isAsync()&&t.renderer.dumpView(this);var r=this.getEventTarget(e,{fromPoint:!0}),i=t.renderer.findViewByElem(r);if(i===this)return;if(this.onMouseLeave(e),!i)return;i.onMouseEnter(e)}},{key:"priority",get:function(){return this.options.priority}},{key:"rootSelector",get:function(){return this.options.rootSelector}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(e){this.defaults=this.getOptions(e)}},{key:"getOptions",value:function(e){var t=function(g,f){return f!=null?pe.uniq([].concat(Object(W.a)(Array.isArray(g)?g:[g]),Object(W.a)(Array.isArray(f)?f:[f]))):Array.isArray(g)?Object(W.a)(g):[g]},r=P.cloneDeep(this.getDefaults()),i=e.bootstrap,l=e.actions,u=e.events,c=e.documentEvents,h=Ph(e,["bootstrap","actions","events","documentEvents"]);return i&&(r.bootstrap=t(r.bootstrap,i)),l&&Object.keys(l).forEach(function(d){var g=l[d],f=r.actions[d];g&&f?r.actions[d]=t(f,g):g&&(r.actions[d]=t(g))}),u&&(r.events=Object.assign(Object.assign({},r.events),u)),e.documentEvents&&(r.documentEvents=Object.assign(Object.assign({},r.documentEvents),c)),P.merge(r,h)}}]),a}(ue);xe.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(o){o.Flag=wo,o.Attr=bo}(xe||(xe={})),function(o){function s(n){return function(e){e.config({priority:n})}}o.priority=s;function a(n){return function(e){e.config({bootstrap:n})}}o.bootstrap=a}(xe||(xe={})),function(o){o.registry=me.create({type:"view"})}(xe||(xe={}));var Ge=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.a)(this,a),n=s.call(this),n.container=ue.createElement(e.tagName||"g",e.isSVGElement!==!1),E.addClass(n.container,n.prefixClassName("cell-tools")),e.className&&E.addClass(n.container,e.className),n.config(e),n}return Object(F.a)(a,[{key:"config",value:function(e){if(this.options=Object.assign(Object.assign({},this.options),e),!(e.view instanceof xe)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?E.addClass(this.container,this.prefixClassName("edge-tools")):this.cell.isNode()&&E.addClass(this.container,this.prefixClassName("node-tools")),this.container.setAttribute("data-cell-id",this.cell.id),this.name&&this.container.setAttribute("data-tools-name",this.name);var t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];for(var r=0;r<t.length;r+=1){var i=t[r],l=void 0;if(i instanceof a.ToolItem)l=i;else{var u=typeof i=="object"?i.name:i,c=typeof i=="object"?i.args||{}:{};if(u){if(this.cell.isNode()){var h=en.registry.get(u);if(h)l=new h(c);else return en.registry.onNotFound(u)}else if(this.cell.isEdge()){var d=tn.registry.get(u);if(d)l=new d(c);else return tn.registry.onNotFound(u)}}}l&&(l.config(this.cellView,this),l.render(),l.options.isSVGElement!==!1&&this.container.appendChild(l.container),this.tools.push(l))}return this}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.tools;return t&&t.forEach(function(r){e.toolId!==r.cid&&r.isVisible()&&r.update()}),this}},{key:"focus",value:function(e){var t=this.tools;return t&&t.forEach(function(r){e===r?r.show():r.hide()}),this}},{key:"blur",value:function(e){var t=this.tools;return t&&t.forEach(function(r){r!==e&&!r.isVisible()&&(r.show(),r.update())}),this}},{key:"hide",value:function(){return this.focus(null)}},{key:"show",value:function(){return this.blur(null)}},{key:"remove",value:function(){var e=this.tools;return e&&(e.forEach(function(t){return t.remove()}),this.tools=null),Object(_.a)(Object(ee.a)(a.prototype),"remove",this).call(this)}},{key:"mount",value:function(){var e=this.cellView;if(e){var t=this.local?e.container:e.graph.view.decorator;t.appendChild(this.container)}return this}},{key:"name",get:function(){return this.options.name}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"local",get:function(){return this.options.local}}]),a}(ue);(function(o){var s=function(a){Object(I.a)(e,a);var n=Object(V.a)(e);function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.a)(this,e),t=n.call(this),t.options=t.getOptions(r),t.container=ue.createElement(t.options.tagName||"g",t.options.isSVGElement!==!1),E.addClass(t.container,t.prefixClassName("cell-tool")),typeof t.options.className=="string"&&E.addClass(t.container,t.options.className),t.init(),t}return Object(F.a)(e,[{key:"getOptions",value:function(r){var i=this.constructor;return i.getOptions(r)}},{key:"init",value:function(){}},{key:"delegateEvents",value:function(){return this.options.events&&Object(_.a)(Object(ee.a)(e.prototype),"delegateEvents",this).call(this,this.options.events),this}},{key:"config",value:function(r,i){return this.cellView=r,this.parent=i,this.stamp(this.container),this.cell.isEdge()?E.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&E.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}},{key:"render",value:function(){this.empty();var r=this.options.markup;if(r){var i=ie.isStringMarkup(r)?ie.parseStringMarkup(r):ie.parseJSONMarkup(r);this.container.appendChild(i.fragment),this.childNodes=i.selectors}return this.onRender(),this}},{key:"onRender",value:function(){}},{key:"update",value:function(){return this}},{key:"stamp",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;r&&r.setAttribute("data-cell-id",this.cellView.cell.id)}},{key:"show",value:function(){return this.container.style.display="",this.visible=!0,this}},{key:"hide",value:function(){return this.container.style.display="none",this.visible=!1,this}},{key:"isVisible",value:function(){return this.visible}},{key:"focus",value:function(){var r=this.options.focusOpacity;return r!=null&&isFinite(r)&&(this.container.style.opacity="".concat(r)),this.parent.focus(this),this}},{key:"blur",value:function(){return this.container.style.opacity="",this.parent.blur(this),this}},{key:"guard",value:function(r){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(r,this.cellView)}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"name",get:function(){return this.options.name}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(r){this.defaults=this.getOptions(r)}},{key:"getOptions",value:function(r){return P.merge(P.cloneDeep(this.getDefaults()),r)}}]),e}(ue);s.defaults={isSVGElement:!0,tagName:"g"},o.ToolItem=s,function(a){var n=0;function e(r){return r?J.pascalCase(r):(n+=1,"CustomTool".concat(n))}function t(r){var i=P.createClass(e(r.name),this);return i.config(r),i}a.define=t}(s=o.ToolItem||(o.ToolItem={}))})(Ge||(Ge={}));function xo(o,s,a,n){var e=R.call(_t.presets.pinRelative,this.graph,{},s,a,o,this.cell,n,{});return e.anchor}function ko(o,s){return s?o.cell.getBBox():o.cell.isEdge()?o.getConnection().bbox():o.getUnrotatedBBoxOfElement(o.container)}var Et=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"onRender",value:function(){E.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}},{key:"update",value:function(){return this.updatePosition(),this}},{key:"updatePosition",value:function(){var e=this.cellView,t=e.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();E.transform(this.container,t,{absolute:!0})}},{key:"getNodeMatrix",value:function(){var e=this.cellView,t=this.options,r=t.x,i=r===void 0?0:r,l=t.y,u=l===void 0?0:l,c=t.offset,h=t.useCellGeometry,d=t.rotate,g=ko(e,h),f=e.cell.getAngle();d||(g=g.bbox(f));var v=0,p=0;typeof c=="number"?(v=c,p=c):typeof c=="object"&&(v=c.x,p=c.y),i=H.normalizePercentage(i,g.width),u=H.normalizePercentage(u,g.height);var C=E.createSVGMatrix().translate(g.x+g.width/2,g.y+g.height/2);return d&&(C=C.rotate(f)),C=C.translate(i+v-g.width/2,u+p-g.height/2),C}},{key:"getEdgeMatrix",value:function(){var e=this.cellView,t=this.options,r=t.offset,i=r===void 0?0:r,l=t.distance,u=l===void 0?0:l,c=t.rotate,h,d,g;H.isPercentage(u)?h=e.getTangentAtRatio(parseFloat(u)/100):h=e.getTangentAtLength(u),h?(d=h.start,g=h.vector().vectorAngle(new O(1,0))||0):(d=e.getConnection().start,g=0);var f=E.createSVGMatrix().translate(d.x,d.y).rotate(g);return typeof i=="object"?f=f.translate(i.x||0,i.y||0):f=f.translate(0,i),c||(f=f.rotate(-g)),f}},{key:"onMouseDown",value:function(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();var t=this.options.onClick;typeof t=="function"&&R.call(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}]),a}(Ge.ToolItem);(function(o){o.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Et||(Et={})),function(o){o.Remove=o.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(a){var n=a.view,e=a.btn;e.parent.remove(),n.cell.remove({ui:!0,toolId:e.cid})}})}(Et||(Et={}));var Nh=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},sr=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"onRender",value:function(){if(E.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var e=this.options.attrs,t=e.class,r=Nh(e,["class"]);E.attr(this.container,E.kebablizeAttrs(r)),t&&E.addClass(this.container,t)}this.update()}},{key:"update",value:function(){var e=this.cellView,t=this.options,r=t.useCellGeometry,i=t.rotate,l=H.normalizeSides(t.padding),u=ko(e,r).moveAndExpand({x:-l.left,y:-l.top,width:l.left+l.right,height:l.top+l.bottom}),c=e.cell;if(c.isNode()){var h=c.getAngle();if(h)if(i){var d=c.getBBox().getCenter();E.rotate(this.container,h,d.x,d.y,{absolute:!0})}else u=u.bbox(h)}return E.attr(this.container,u.toJSON()),this}}]),a}(Ge.ToolItem);(function(o){o.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(sr||(sr={}));var xn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.handles=[],n}return Object(F.a)(a,[{key:"onRender",value:function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}},{key:"update",value:function(){var e=this.vertices;return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(r){e.stopHandleListening(r),r.remove()})}},{key:"renderHandles",value:function(){for(var e=this,t=this.vertices,r=0,i=t.length;r<i;r+=1){var l=t[r],u=this.options.createHandle,c=this.options.processHandle,h=u({index:r,graph:this.graph,guard:function(g){return e.guard(g)},attrs:this.options.attrs||{}});c&&c(h),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:h}),h.updatePosition(l.x,l.y),this.stamp(h.container),this.container.appendChild(h.container),this.handles.push(h),this.startHandleListening(h)}}},{key:"updateHandles",value:function(){for(var e=this.vertices,t=0,r=e.length;t<r;t+=1){var i=e[t],l=this.handles[t];l&&l.updatePosition(i.x,i.y)}}},{key:"updatePath",value:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}},{key:"startHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}},{key:"stopHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}},{key:"getNeighborPoints",value:function(e){var t=this.cellView,r=this.vertices,i=e>0?r[e-1]:t.sourceAnchor,l=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:O.create(i),next:O.create(l)}}},{key:"getMouseEventArgs",value:function(e){var t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY),i=r.x,l=r.y;return{e:t,x:i,y:l}}},{key:"onHandleChange",value:function(e){var t=e.e;this.focus();var r=this.cellView;if(r.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var i=this.getMouseEventArgs(t),l=i.e,u=i.x,c=i.y;r.notifyMouseDown(l,u,c)}}},{key:"onHandleChanging",value:function(e){var t=e.handle,r=e.e,i=this.cellView,l=t.options.index,u=this.getMouseEventArgs(r),c=u.e,h=u.x,d=u.y,g={x:h,y:d};this.snapVertex(g,l),i.cell.setVertexAt(l,g,{ui:!0,toolId:this.cid}),t.updatePosition(g.x,g.y),this.options.stopPropagation||i.notifyMouseMove(c,h,d)}},{key:"onHandleChanged",value:function(e){var t=e.e,r=this.options,i=this.cellView;if(r.addable&&this.updatePath(),!r.removeRedundancies)return;var l=i.removeRedundantLinearVertices({ui:!0,toolId:this.cid});l&&this.render(),this.blur(),i.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&i.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var u=this.getMouseEventArgs(t),c=u.e,h=u.x,d=u.y;this.options.stopPropagation||i.notifyMouseUp(c,h,d),i.checkMouseleave(c)}},{key:"snapVertex",value:function(e,t){var r=this.options.snapRadius||0;if(r>0){var i=this.getNeighborPoints(t),l=i.prev,u=i.next;Math.abs(e.x-l.x)<r?e.x=l.x:Math.abs(e.x-u.x)<r&&(e.x=u.x),Math.abs(e.y-l.y)<r?e.y=i.prev.y:Math.abs(e.y-u.y)<r&&(e.y=u.y)}}},{key:"onHandleRemove",value:function(e){var t=e.handle,r=e.e;if(this.options.removable){var i=t.options.index,l=this.cellView;l.cell.removeVertexAt(i,{ui:!0}),this.options.addable&&this.updatePath(),l.checkMouseleave(this.normalizeEvent(r))}}},{key:"onPathMouseDown",value:function(e){if(this.guard(e)||!this.options.addable)return;e.stopPropagation(),e.preventDefault();var t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY).toJSON(),i=this.cellView;i.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var l=i.getVertexIndex(r.x,r.y);this.snapVertex(r,l),i.cell.setVertexAt(l,r,{ui:!0,toolId:this.cid}),this.render();var u=this.handles[l];this.eventData(t,{vertexAdded:!0}),u.onMouseDown(t)}},{key:"onRemove",value:function(){this.resetHandles()}},{key:"vertices",get:function(){return this.cellView.cell.getVertices()}}]),a}(Ge.ToolItem);(function(o){var s=function(a){Object(I.a)(e,a);var n=Object(V.a)(e);function e(t){var r;return Object(L.a)(this,e),r=n.call(this),r.options=t,r.render(),r.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),r}return Object(F.a)(e,[{key:"render",value:function(){this.container=ue.createElement("circle",!0);var r=this.options.attrs;if(typeof r=="function"){var i=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-vertex"))}},{key:"updatePosition",value:function(r,i){this.setAttrs({cx:r,cy:i})}},{key:"onMouseDown",value:function(r){if(this.options.guard(r))return;r.stopPropagation(),r.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data),this.emit("change",{e:r,handle:this})}},{key:"onMouseMove",value:function(r){this.emit("changing",{e:r,handle:this})}},{key:"onMouseUp",value:function(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}},{key:"onDoubleClick",value:function(r){this.emit("remove",{e:r,handle:this})}},{key:"graph",get:function(){return this.options.graph}}]),e}(ue);o.Handle=s})(xn||(xn={})),function(o){var s,a=be.prefix("edge-tool-vertex-path");o.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new o.Handle(e)},markup:[{tagName:"path",selector:"connection",className:a,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(s={},Object(q.a)(s,"mousedown .".concat(a),"onPathMouseDown"),Object(q.a)(s,"touchstart .".concat(a),"onPathMouseDown"),s)})}(xn||(xn={}));var kn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.handles=[],n}return Object(F.a)(a,[{key:"update",value:function(){return this.render(),this}},{key:"onRender",value:function(){E.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var e=this.cellView,t=Object(W.a)(this.vertices);t.unshift(e.sourcePoint),t.push(e.targetPoint);for(var r=0,i=t.length;r<i-1;r+=1){var l=t[r],u=t[r+1],c=this.renderHandle(l,u,r);this.stamp(c.container),this.handles.push(c)}return this}},{key:"renderHandle",value:function(e,t,r){var i=this,l=this.options.createHandle({index:r,graph:this.graph,guard:function(c){return i.guard(c)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(l),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:l}),this.updateHandle(l,e,t),this.container.appendChild(l.container),this.startHandleListening(l),l}},{key:"startHandleListening",value:function(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}},{key:"stopHandleListening",value:function(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(r){e.stopHandleListening(r),r.remove()})}},{key:"shiftHandleIndexes",value:function(e){for(var t=this.handles,r=0,i=t.length;r<i;r+=1)t[r].options.index+=e}},{key:"resetAnchor",value:function(e,t){var r=this.cellView.cell,i={ui:!0,toolId:this.cid};t?r.prop([e,"anchor"],t,i):r.removeProp([e,"anchor"],i)}},{key:"snapHandle",value:function(e,t,r){var i=e.options.axis,l=e.options.index,u=this.cellView,c=u.cell,h=c.getVertices(),d=h[l-2]||r.sourceAnchor,g=h[l+1]||r.targetAnchor,f=this.options.snapRadius;return Math.abs(t[i]-d[i])<f?t[i]=d[i]:Math.abs(t[i]-g[i])<f&&(t[i]=g[i]),t}},{key:"onHandleChanging",value:function(e){var t=e.handle,r=e.e,i=this.graph,l=this.options,u=this.cellView,c=l.anchor,h=t.options.axis,d=t.options.index-1,g=this.getEventData(r),f=this.normalizeEvent(r),v=i.snapToGrid(f.clientX,f.clientY),p=this.snapHandle(t,v.clone(),g),C=P.cloneDeep(this.vertices),b=C[d],y=C[d+1],w=u.sourceView,x=u.sourceBBox,k=!1,M=!1;if(b?d===0?x.containsPoint(b)?(C.shift(),this.shiftHandleIndexes(-1),k=!0):(b[h]=p[h],M=!0):b[h]=p[h]:(b=u.sourceAnchor.toJSON(),b[h]=p[h],x.containsPoint(b)?k=!0:(C.unshift(b),this.shiftHandleIndexes(1),M=!0)),typeof c=="function"&&w){if(k){var A=g.sourceAnchor.clone();A[h]=p[h];var S=R.call(c,u,A,w,u.sourceMagnet||w.container,"source",u,this);this.resetAnchor("source",S)}M&&this.resetAnchor("source",g.sourceAnchorDef)}var N=u.targetView,j=u.targetBBox,B=!1,X=!1;if(y?d===C.length-2?j.containsPoint(y)?(C.pop(),B=!0):(y[h]=p[h],X=!0):y[h]=p[h]:(y=u.targetAnchor.toJSON(),y[h]=p[h],j.containsPoint(y)?B=!0:(C.push(y),X=!0)),typeof c=="function"&&N){if(B){var z=g.targetAnchor.clone();z[h]=p[h];var D=R.call(c,u,z,N,u.targetMagnet||N.container,"target",u,this);this.resetAnchor("target",D)}X&&this.resetAnchor("target",g.targetAnchorDef)}O.equalPoints(C,this.vertices)||this.cellView.cell.setVertices(C,{ui:!0,toolId:this.cid}),this.updateHandle(t,b,y,0),l.stopPropagation||u.notifyMouseMove(f,v.x,v.y)}},{key:"onHandleChange",value:function(e){var t=e.handle,r=e.e,i=this.options,l=this.handles,u=this.cellView,c=t.options.index;if(!Array.isArray(l))return;for(var h=0,d=l.length;h<d;h+=1)h!==c&&l[h].hide();if(this.focus(),this.setEventData(r,{sourceAnchor:u.sourceAnchor.clone(),targetAnchor:u.targetAnchor.clone(),sourceAnchorDef:P.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:P.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!i.stopPropagation){var g=this.normalizeEvent(r),f=this.graph.snapToGrid(g.clientX,g.clientY);u.notifyMouseDown(g,f.x,f.y)}}},{key:"onHandleChanged",value:function(e){var t=e.e,r=this.options,i=this.cellView;r.removeRedundancies&&i.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var l=this.normalizeEvent(t),u=this.graph.snapToGrid(l.clientX,l.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),r.stopPropagation||i.notifyMouseUp(l,u.x,u.y),i.checkMouseleave(l)}},{key:"updateHandle",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=this.options.precision||0,u=Math.abs(t.x-r.x)<l,c=Math.abs(t.y-r.y)<l;if(u||c){var h=new $(t,r),d=h.length();if(d<this.options.threshold)e.hide();else{var g=h.getCenter(),f=u?"x":"y";g[f]+=i||0;var v=h.vector().vectorAngle(new O(1,0));e.updatePosition(g.x,g.y,v,this.cellView),e.show(),e.options.axis=f}}else e.hide()}},{key:"onRemove",value:function(){this.resetHandles()}},{key:"vertices",get:function(){return this.cellView.cell.getVertices()}}]),a}(Ge.ToolItem);(function(o){var s=function(a){Object(I.a)(e,a);var n=Object(V.a)(e);function e(t){var r;return Object(L.a)(this,e),r=n.call(this),r.options=t,r.render(),r.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),r}return Object(F.a)(e,[{key:"render",value:function(){this.container=ue.createElement("rect",!0);var r=this.options.attrs;if(typeof r=="function"){var i=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),r(this)))}else this.setAttrs(r);this.addClass(this.prefixClassName("edge-tool-segment"))}},{key:"updatePosition",value:function(r,i,l,u){var c=u.getClosestPoint(new O(r,i))||new O(r,i),h=E.createSVGMatrix().translate(c.x,c.y);if(c.equals({x:r,y:i}))h=h.rotate(l);else{var d=new $(r,i,c.x,c.y),g=d.vector().vectorAngle(new O(1,0));g!==0&&(g+=90),h=h.rotate(g)}this.setAttrs({transform:E.matrixToTransformString(h),cursor:l%180===0?"row-resize":"col-resize"})}},{key:"onMouseDown",value:function(r){if(this.options.guard(r))return;this.trigger("change",{e:r,handle:this}),r.stopPropagation(),r.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.data)}},{key:"onMouseMove",value:function(r){this.emit("changing",{e:r,handle:this})}},{key:"onMouseUp",value:function(r){this.emit("changed",{e:r,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}}]),e}(ue);o.Handle=s})(kn||(kn={})),function(o){o.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(a){return new o.Handle(a)},anchor:xo})}(kn||(kn={}));var lr=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"onRender",value:function(){E.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()}},{key:"update",value:function(){var e=this.type,t=this.cellView,r=t.getTerminalView(e);return r?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}},{key:"updateAnchor",value:function(){var e=this.childNodes;if(!e)return;var t=e.anchor;if(!t)return;var r=this.type,i=this.cellView,l=this.options,u=i.getTerminalAnchor(r),c=i.cell.prop([r,"anchor"]);t.setAttribute("transform","translate(".concat(u.x,", ").concat(u.y,")"));var h=c?l.customAnchorAttrs:l.defaultAnchorAttrs;if(h)for(var d in h)t.setAttribute(d,h[d])}},{key:"updateArea",value:function(){var e=this.childNodes;if(!e)return;var t=e.area;if(!t)return;var r=this.type,i=this.cellView,l=i.getTerminalView(r);if(l){var u=l.cell,c=i.getTerminalMagnet(r),h=this.options.areaPadding||0;isFinite(h)||(h=0);var d,g,f;l.isEdgeElement(c)?(d=l.getBBox(),g=0,f=d.getCenter()):(d=l.getUnrotatedBBoxOfElement(c),g=u.getAngle(),f=d.getCenter(),g&&f.rotate(-g,u.getBBox().getCenter())),d.inflate(h),E.attr(t,{x:-d.width/2,y:-d.height/2,width:d.width,height:d.height,transform:"translate(".concat(f.x,", ").concat(f.y,") rotate(").concat(g,")")})}}},{key:"toggleArea",value:function(e){if(this.childNodes){var t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}},{key:"onMouseDown",value:function(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"resetAnchor",value:function(e){var t=this.type,r=this.cell;e?r.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):r.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}},{key:"onMouseMove",value:function(e){var t=this.type,r=this.cellView,i=r.getTerminalView(t);if(i==null)return;var l=this.normalizeEvent(e),u=i.cell,c=r.getTerminalMagnet(t),h=this.graph.clientToLocal(l.clientX,l.clientY),d=this.options.snap;if(typeof d=="function"){var g=R.call(d,r,h,i,c,t,r,this);h=O.create(g)}if(this.options.restrictArea)if(i.isEdgeElement(c)){var f=i.getClosestPoint(h);f&&(h=f)}else{var v=i.getUnrotatedBBoxOfElement(c),p=u.getAngle(),C=u.getBBox().getCenter(),b=h.clone().rotate(p,C);v.containsPoint(b)||(h=v.getNearestPointToPoint(b).rotate(-p,C))}var y,w=this.options.anchor;typeof w=="function"&&(y=R.call(w,r,h,i,c,t,r,this)),this.resetAnchor(y),this.update()}},{key:"onMouseUp",value:function(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"onDblClick",value:function(){var e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}},{key:"type",get:function(){return this.options.type}}]),a}(Ge.ToolItem);(function(o){o.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:xo,snap:function(a,n,e,t,r,i){var l=i.options.snapRadius||0,u=t==="source",c=u?0:-1,h=this.cell.getVertexAt(c)||this.getTerminalAnchor(u?"target":"source");return h&&(Math.abs(h.x-a.x)<l&&(a.x=h.x),Math.abs(h.y-a.y)<l&&(a.y=h.y)),a}})})(lr||(lr={}));var jh=lr.define({name:"source-anchor",type:"source"}),Lh=lr.define({name:"target-anchor",type:"target"}),Fh=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},ur=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){if(this.options.attrs){var e=this.options.attrs,t=e.class,r=Fh(e,["class"]);this.setAttrs(r,this.container),t&&E.addClass(this.container,t)}}},{key:"onRender",value:function(){E.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()}},{key:"update",value:function(){var e=this.ratio,t=this.cellView,r=t.getTangentAtRatio(e),i=r?r.start:t.getPointAtRatio(e),l=r&&r.vector().vectorAngle(new O(1,0))||0;if(!i)return this;var u=E.createSVGMatrix().translate(i.x,i.y).rotate(l);return E.transform(this.container,u,{absolute:!0}),this}},{key:"onMouseDown",value:function(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();var t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var r=this.graph.snapToGrid(e.clientX,e.clientY),i=t.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:{toolId:this.cid}});this.cellView.setEventData(e,i),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}},{key:"onMouseMove",value:function(e){var t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,r.x,r.y),this.update()}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),r=this.cellView,i=this.graph.snapToGrid(t.clientX,t.clientY);r.onMouseUp(t,i.x,i.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}},{key:"type",get:function(){return this.options.type}},{key:"ratio",get:function(){return this.options.ratio}}]),a}(Ge.ToolItem);(function(o){o.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(ur||(ur={}));var Rh=ur.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Xh=ur.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Eo=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},en;(function(o){o.presets={boundary:sr,button:Et,"button-remove":Et.Remove},o.registry=me.create({type:"node tool",process:function(a,n){if(typeof n=="function")return n;var e=Ge.ToolItem,t=n.inherit,r=Eo(n,["inherit"]);if(t){var i=this.get(t);i==null?this.onNotFound(t,"inherited"):e=i}return r.name==null&&(r.name=a),e.define.call(e,r)}}),o.registry.register(o.presets,!0)})(en||(en={}));var tn;(function(o){o.presets={boundary:sr,vertices:xn,segments:kn,button:Et,"button-remove":Et.Remove,"source-anchor":jh,"target-anchor":Lh,"source-arrowhead":Rh,"target-arrowhead":Xh},o.registry=me.create({type:"edge tool",process:function(a,n){if(typeof n=="function")return n;var e=Ge.ToolItem,t=n.inherit,r=Eo(n,["inherit"]);if(t){var i=this.get(t);i==null?this.onNotFound(t,"inherited"):e=i}return r.name==null&&(r.name=a),e.define.call(e,r)}}),o.registry.register(o.presets,!0)})(tn||(tn={}));var zh=dt("center"),Bh=dt("topCenter"),Ih=dt("bottomCenter"),Vh=dt("leftMiddle"),Uh=dt("rightMiddle"),Gh=dt("topLeft"),Hh=dt("topRight"),Wh=dt("bottomLeft"),$h=dt("bottomRight");function dt(o){return function(s,a,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=e.rotate?s.getUnrotatedBBoxOfElement(a):s.getBBoxOfElement(a),r=t[o];r.x+=H.normalizePercentage(e.dx,t.width),r.y+=H.normalizePercentage(e.dy,t.height);var i=s.cell;return e.rotate?r.rotate(-i.getAngle(),i.getBBox().getCenter()):r}}function cr(o){return function(s,a,n,e){if(n instanceof Element){var t=this.graph.renderer.findViewByElem(n),r;if(t)if(t.isEdgeElement(n)){var i=e.fixedAt!=null?e.fixedAt:"50%";r=Oo(t,i)}else r=t.getBBoxOfElement(n).getCenter();else r=new O;return o.call(this,s,a,r,e)}return o.apply(this,arguments)}}function Oo(o,s){var a=H.isPercentage(s),n=typeof s=="string"?parseFloat(s):s;return a?o.getPointAtRatio(n/100):o.getPointAtLength(n)}var Yh=function(s,a,n,e){var t=s.cell.getAngle(),r=s.getBBoxOfElement(a),i=r.getCenter(),l=r.getTopLeft(),u=r.getBottomRight(),c=e.padding;if(isFinite(c)||(c=0),l.y+c<=n.y&&n.y<=u.y-c){var h=n.y-i.y;i.x+=t===0||t===180?0:h*1/Math.tan(re.toRad(t)),i.y+=h}else if(l.x+c<=n.x&&n.x<=u.x-c){var d=n.x-i.x;i.y+=t===90||t===270?0:d*Math.tan(re.toRad(t)),i.x+=d}return i},Jh=cr(Yh),Zh=function(s,a,n,e,t){var r=s.cell.getConnectionPoint(this.cell,t);return(e.dx||e.dy)&&r.translate(e.dx||0,e.dy||0),r},Kh=function(s,a,n,e){var t,r=0,i,l=s.cell;e.rotate?(t=s.getUnrotatedBBoxOfElement(a),i=l.getBBox().getCenter(),r=l.getAngle()):t=s.getBBoxOfElement(a);var u=e.padding;u!=null&&isFinite(u)&&t.inflate(u),e.rotate&&n.rotate(r,i);var c=t.getNearestSideToPoint(n),h;switch(c){case"left":h=t.getLeftMiddle();break;case"right":h=t.getRightMiddle();break;case"top":h=t.getTopCenter();break;case"bottom":h=t.getBottomCenter();break}return e.rotate?h.rotate(-r,i):h},Qh=cr(Kh),nn;(function(o){o.presets=Re,o.registry=me.create({type:"node endpoint"}),o.registry.register(o.presets,!0)})(nn||(nn={}));var qh=function(s,a,n,e){var t=e.ratio!=null?e.ratio:.5;return t>1&&(t=t/100),s.getPointAtRatio(t)},_h=function(s,a,n,e){var t=e.length!=null?e.length:20;return s.getPointAtLength(t)},Ao=function(s,a,n,e){var t=s.getClosestPoint(n);return t??new O},ed=cr(Ao),td=function(s,a,n,e){var t=1e6,r=s.getConnection(),i=s.getConnectionSubdivisions(),l=new $(n.clone().translate(0,t),n.clone().translate(0,-t)),u=new $(n.clone().translate(t,0),n.clone().translate(-t,0)),c=l.intersect(r,{segmentSubdivisions:i}),h=u.intersect(r,{segmentSubdivisions:i}),d=[];return c&&d.push.apply(d,Object(W.a)(c)),h&&d.push.apply(d,Object(W.a)(h)),d.length>0?n.closest(d):e.fallbackAt!=null?Oo(s,e.fallbackAt):R.call(Ao,this,s,a,n,e)},nd=cr(td),rn;(function(o){o.presets=Ht,o.registry=me.create({type:"edge endpoint"}),o.registry.register(o.presets,!0)})(rn||(rn={}));function hr(o,s,a){var n;if(typeof a=="object"){if(isFinite(a.y)){var e=new $(s,o),t=e.parallel(a.y),r=t.start,i=t.end;s=r,o=i}n=a.x}else n=a;if(n==null||!isFinite(n))return o;var l=o.distance(s);return n===0&&l>0?o:o.move(s,-Math.min(n,l-1))}function dr(o){var s=o.getAttribute("stroke-width");return s===null?0:parseFloat(s)||0}function rd(o){if(o==null)return null;var s=o;do{var a=s.tagName;if(typeof a!="string")return null;if(a=a.toUpperCase(),a==="G")s=s.firstElementChild;else if(a==="TITLE")s=s.nextElementSibling;else break}while(s);return s}var Do=function(s,a,n,e){var t=a.getBBoxOfElement(n);e.stroked&&t.inflate(dr(n)/2);var r=s.intersect(t),i=r&&r.length?s.start.closest(r):s.end;return hr(i,s.start,e.offset)},id=function(s,a,n,e,t){var r=a.cell,i=r.isNode()?r.getAngle():0;if(i===0)return R.call(Do,this,s,a,n,e,t);var l=a.getUnrotatedBBoxOfElement(n);e.stroked&&l.inflate(dr(n)/2);var u=l.getCenter(),c=s.clone().rotate(i,u),h=c.setLength(1e6).intersect(l),d=h&&h.length?c.start.closest(h).rotate(-i,u):s.end;return hr(d,s.start,e.offset)},ad=function(s,a,n,e){var t,r,i=s.end,l=e.selector;if(typeof l=="string"?t=a.findOne(l):Array.isArray(l)?t=P.getByPath(n,l):t=rd(n),!E.isSVGGraphicsElement(t)){if(t===n||!E.isSVGGraphicsElement(n))return i;t=n}var u=a.getShapeOfElement(t),c=a.getMatrixOfElement(t),h=a.getRootTranslatedMatrix(),d=a.getRootRotatedMatrix(),g=h.multiply(d).multiply(c),f=g.inverse(),v=E.transformLine(s,f),p=v.start.clone(),C=a.getDataOfElement(t);if(e.insideout===!1){C.shapeBBox==null&&(C.shapeBBox=u.bbox());var b=C.shapeBBox;if(b!=null&&b.containsPoint(p))return i}e.extrapolate===!0&&v.setLength(1e6);var y;if(u instanceof se){var w=e.precision||2;C.segmentSubdivisions==null&&(C.segmentSubdivisions=u.getSegmentSubdivisions({precision:w})),y={precision:w,segmentSubdivisions:C.segmentSubdivisions},r=v.intersect(u,y)}else r=v.intersect(u);r?Array.isArray(r)&&(r=p.closest(r)):e.sticky===!0&&(u instanceof U?r=u.getNearestPointToPoint(p):u instanceof Jt?r=u.intersectsWithLineFromCenterToPoint(p):r=u.closestPoint(p,y));var x=r?E.transformPoint(r,g):i,k=e.offset||0;return e.stroked!==!1&&(typeof k=="object"?(k=Object.assign({},k),k.x==null&&(k.x=0),k.x+=dr(t)/2):k+=dr(t)/2),hr(x,s.start,k)};function od(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=o.start,e=o.end,t,r,i,l;switch(s){case"left":l="x",t=e,r=n,i=-1;break;case"right":l="x",t=n,r=e,i=1;break;case"top":l="y",t=e,r=n,i=-1;break;case"bottom":l="y",t=n,r=e,i=1;break;default:return}n[l]<e[l]?t[l]=r[l]:r[l]=t[l],isFinite(a)&&(t[l]+=i*a,r[l]+=i*a)}var sd=function(s,a,n,e){var t=e.alignOffset,r=e.align;return r&&od(s,r,t),hr(s.end,s.start,e.offset)},an;(function(o){o.presets=Wt,o.registry=me.create({type:"connection point"}),o.registry.register(o.presets,!0)})(an||(an={}));var ld=function(s){return Object(W.a)(s)},ud=function(s,a,n){var e=a.side||"bottom",t=H.normalizeSides(a.padding||40),r=n.sourceBBox,i=n.targetBBox,l=r.getCenter(),u=i.getCenter(),c,h,d;switch(e){case"top":d=-1,c="y",h="height";break;case"left":d=-1,c="x",h="width";break;case"right":d=1,c="x",h="width";break;case"bottom":default:d=1,c="y",h="height";break}return l[c]+=d*(r[h]/2+t[e]),u[c]+=d*(i[h]/2+t[e]),d*(l[c]-u[c])>0?u[c]=l[c]:l[c]=u[c],[l.toJSON()].concat(Object(W.a)(s),[u.toJSON()])};function gr(o){return new U(o.x,o.y,0,0)}function fr(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=H.normalizeSides(o.padding||20);return{x:-s.left,y:-s.top,width:s.left+s.right,height:s.top+s.bottom}}function Mo(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.sourceBBox.clone().moveAndExpand(fr(s))}function To(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.targetBBox.clone().moveAndExpand(fr(s))}function cd(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.sourceAnchor)return o.sourceAnchor;var a=Mo(o,s);return a.getCenter()}function hd(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.targetAnchor)return o.targetAnchor;var a=To(o,s);return a.getCenter()}var So=function(s,a,n){var e=Mo(n,a),t=To(n,a),r=cd(n,a),i=hd(n,a);e=e.union(gr(r)),t=t.union(gr(i));var l=s.map(function(b){return O.create(b)});l.unshift(r),l.push(i);for(var u=null,c=[],h=0,d=l.length-1;h<d;h+=1){var g=null,f=l[h],v=l[h+1],p=He.getBearing(f,v)!=null;if(h===0)h+1===d?e.intersectsWithRect(t.clone().inflate(1))?g=He.insideNode(f,v,e,t):p||(g=He.nodeToNode(f,v,e,t)):e.containsPoint(v)?g=He.insideNode(f,v,e,gr(v).moveAndExpand(fr(a))):p||(g=He.nodeToVertex(f,v,e));else if(h+1===d){var C=p&&He.getBearing(v,f)===u;t.containsPoint(f)||C?g=He.insideNode(f,v,gr(f).moveAndExpand(fr(a)),t,u):p||(g=He.vertexToNode(f,v,t,u))}else p||(g=He.vertexToVertex(f,v,u));g?(c.push.apply(c,Object(W.a)(g.points)),u=g.direction):u=He.getBearing(f,v),h+1<d&&c.push(v)}return c},He;(function(o){var s={N:"S",S:"N",E:"W",W:"E"},a={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(h,d,g){var f=new O(h.x,d.y);return g.containsPoint(f)&&(f=new O(d.x,h.y)),f}function e(h,d){return h[d==="W"||d==="E"?"width":"height"]}o.getBBoxSize=e;function t(h,d){return h.x===d.x?h.y>d.y?"N":"S":h.y===d.y?h.x>d.x?"W":"E":null}o.getBearing=t;function r(h,d,g){var f=new O(h.x,d.y),v=new O(d.x,h.y),p=t(h,f),C=t(h,v),b=g?s[g]:null,y=p===g||p!==b&&(C===b||C!==g)?f:v;return{points:[y],direction:t(y,d)}}o.vertexToVertex=r;function i(h,d,g){var f=n(h,d,g);return{points:[f],direction:t(f,d)}}o.nodeToVertex=i;function l(h,d,g,f){var v=[new O(h.x,d.y),new O(d.x,h.y)],p=v.filter(function(x){return!g.containsPoint(x)}),C=p.filter(function(x){return t(x,h)!==f}),b;if(C.length>0)return b=C.filter(function(x){return t(h,x)===f}).pop(),b=b||C[0],{points:[b],direction:t(b,d)};{b=pe.difference(v,p)[0];var y=O.create(d).move(b,-e(g,f)/2),w=n(y,h,g);return{points:[w,y],direction:t(y,d)}}}o.vertexToNode=l;function u(h,d,g,f){var v=i(d,h,f),p=v.points[0];if(g.containsPoint(p)){v=i(h,d,g);var C=v.points[0];if(f.containsPoint(C)){var b=O.create(h).move(C,-e(g,t(h,C))/2),y=O.create(d).move(p,-e(f,t(d,p))/2),w=new $(b,y).getCenter(),x=i(h,w,g),k=r(w,d,x.direction);v.points=[x.points[0],k.points[0]],v.direction=k.direction}}return v}o.nodeToNode=u;function c(h,d,g,f,v){var p=g.union(f).inflate(1),C=p.getCenter(),b=C.distance(d)>C.distance(h),y=b?d:h,w=b?h:d,x,k,M;v?(x=O.fromPolar(p.width+p.height,a[v],y),x=p.getNearestPointToPoint(x).move(x,-1)):x=p.getNearestPointToPoint(y).move(y,1),k=n(x,w,p);var A;x.round().equals(k.round())?(k=O.fromPolar(p.width+p.height,re.toRad(x.theta(y))+Math.PI/2,w),k=p.getNearestPointToPoint(k).move(w,1).round(),M=n(x,k,p),A=b?[k,M,x]:[x,M,k]):A=b?[k,x]:[x,k];var S=t(b?x:k,d);return{points:A,direction:S}}o.insideNode=c})(He||(He={}));var dd={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){var s=Ot(this.step,this);return s},directions:function(){var s=Ot(this.step,this),a=Ot(this.cost,this);return[{cost:a,offsetX:s,offsetY:0},{cost:a,offsetX:0,offsetY:s},{cost:a,offsetX:-s,offsetY:0},{cost:a,offsetX:0,offsetY:-s}]},penalties:function(){var s=Ot(this.step,this);return{0:0,45:s/2,90:s/2}},paddingBox:function(){var s=Ot(this.step,this);return{x:-s,y:-s,width:2*s,height:2*s}},fallbackRouter:So,draggingRouter:null};function Ot(o,s){return typeof o=="function"?o.call(s):o}function gd(o){var s=Object.keys(o).reduce(function(n,e){var t=n;return e==="fallbackRouter"||e==="draggingRouter"||e==="fallbackRoute"?t[e]=o[e]:t[e]=Ot(o[e],o),n},{});if(s.padding){var a=H.normalizeSides(s.padding);o.paddingBox={x:-a.left,y:-a.top,width:a.left+a.right,height:a.top+a.bottom}}return s.directions.forEach(function(n){var e=new O(0,0),t=new O(n.offsetX,n.offsetY);n.angle=re.normalize(e.theta(t))}),s}var Po=1,No=2,fd=function(){function o(){Object(L.a)(this,o),this.items=[],this.hash={},this.values={}}return Object(F.a)(o,[{key:"add",value:function(a,n){var e=this;this.hash[a]?this.items.splice(this.items.indexOf(a),1):this.hash[a]=Po,this.values[a]=n;var t=pe.sortedIndexBy(this.items,a,function(r){return e.values[r]});this.items.splice(t,0,a)}},{key:"pop",value:function(){var a=this.items.shift();return a&&(this.hash[a]=No),a}},{key:"isOpen",value:function(a){return this.hash[a]===Po}},{key:"isClose",value:function(a){return this.hash[a]===No}},{key:"isEmpty",value:function(){return this.items.length===0}}]),o}(),vd=function(){function o(s){Object(L.a)(this,o),this.options=s,this.mapGridSize=100,this.map={}}return Object(F.a)(o,[{key:"build",value:function(a,n){var e=this.options,t=e.excludeTerminals.reduce(function(c,h){var d=n[h];if(d){var g=a.getCell(d.cell);g&&c.push(g)}return c},[]),r=[],i=a.getCell(n.getSourceCellId());i&&(r=pe.union(r,i.getAncestors().map(function(c){return c.id})));var l=a.getCell(n.getTargetCellId());l&&(r=pe.union(r,l.getAncestors().map(function(c){return c.id})));var u=this.mapGridSize;return a.getNodes().reduce(function(c,h){var d=h.shape,g=e.excludeShapes,f=d?g.includes(d):!1,v=t.some(function(A){return A.id===h.id}),p=r.includes(h.id),C=f||v||p;if(!C)for(var b=h.getBBox().moveAndExpand(e.paddingBox),y=b.getOrigin().snapToGrid(u),w=b.getCorner().snapToGrid(u),x=y.x;x<=w.x;x+=u)for(var k=y.y;k<=w.y;k+=u){var M=new O(x,k).toString();c[M]==null&&(c[M]=[]),c[M].push(b)}return c},this.map),this}},{key:"isAccessible",value:function(a){var n=a.clone().snapToGrid(this.mapGridSize).toString(),e=this.map[n];return e?e.every(function(t){return!t.containsPoint(a)}):!0}}]),o}();function jo(o,s){var a=o.sourceBBox.clone();return s&&s.paddingBox?a.moveAndExpand(s.paddingBox):a}function Lo(o,s){var a=o.targetBBox.clone();return s&&s.paddingBox?a.moveAndExpand(s.paddingBox):a}function Fo(o,s){if(o.sourceAnchor)return o.sourceAnchor;var a=jo(o,s);return a.getCenter()}function pd(o,s){if(o.targetAnchor)return o.targetAnchor;var a=Lo(o,s);return a.getCenter()}function pi(o,s,a,n,e){var t=360/a,r=o.theta(md(o,s,n,e)),i=re.normalize(r+t/2);return t*Math.floor(i/t)}function md(o,s,a,n){var e=n.step,t=s.x-o.x,r=s.y-o.y,i=t/a.x,l=r/a.y,u=i*e,c=l*e;return new O(o.x+u,o.y+c)}function Ro(o,s){var a=Math.abs(o-s);return a>180?360-a:a}function Cd(o,s){var a=s.step;return s.directions.forEach(function(n){n.gridOffsetX=n.offsetX/a*o.x,n.gridOffsetY=n.offsetY/a*o.y}),s.directions}function yd(o,s,a){return{source:s.clone(),x:Xo(a.x-s.x,o),y:Xo(a.y-s.y,o)}}function Xo(o,s){if(!o)return s;var a=Math.abs(o),n=Math.round(a/s);if(!n)return a;var e=n*s,t=a-e,r=t/n;return s+r}function bd(o,s){var a=s.source,n=be.snapToGrid(o.x-a.x,s.x)+a.x,e=be.snapToGrid(o.y-a.y,s.y)+a.y;return new O(n,e)}function En(o,s){return o.round(s)}function vr(o,s,a){return En(bd(o.clone(),s),a)}function On(o){return o.toString()}function mi(o){return new O(o.x===0?0:Math.abs(o.x)/o.x,o.y===0?0:Math.abs(o.y)/o.y)}function zo(o,s){for(var a=Infinity,n=0,e=s.length;n<e;n+=1){var t=o.manhattanDistance(s[n]);t<a&&(a=t)}return a}function Bo(o,s,a,n,e){var t=e.precision,r=e.directionMap,i=o.diff(s.getCenter()),l=Object.keys(r).reduce(function(u,c){if(a.includes(c)){for(var h=r[c],d=new O(o.x+h.x*(Math.abs(i.x)+s.width),o.y+h.y*(Math.abs(i.y)+s.height)),g=new $(o,d),f=g.intersect(s)||[],v,p=null,C=0;C<f.length;C+=1){var b=f[C],y=o.squaredDistance(b);(v==null||y>v)&&(v=y,p=b)}if(p){var w=vr(p,n,t);s.containsPoint(w)&&(w=vr(w.translate(h.x*n.x,h.y*n.y),n,t)),u.push(w)}}return u},[]);return s.containsPoint(o)||l.push(vr(o,n,t)),l}function wd(o,s,a,n,e){for(var t=[],r=mi(e.diff(a)),i=On(a),l=o[i],u;l;){u=s[i];var c=mi(u.diff(l));c.equals(r)||(t.unshift(u),r=c),i=On(l),l=o[i]}var h=s[i],d=mi(h.diff(n));return d.equals(r)||t.unshift(h),t}function xd(o,s,a,n,e){var t=e.precision,r,i;s instanceof U?r=En(Fo(o,e).clone(),t):r=En(s.clone(),t),a instanceof U?i=En(pd(o,e).clone(),t):i=En(a.clone(),t);var l=yd(e.step,r,i),u=r,c=i,h,d;if(s instanceof U?h=Bo(u,s,e.startDirections,l,e):h=[u],a instanceof U?d=Bo(i,a,e.endDirections,l,e):d=[c],h=h.filter(function(un){return n.isAccessible(un)}),d=d.filter(function(un){return n.isAccessible(un)}),h.length>0&&d.length>0){for(var g=new fd,f={},v={},p={},C=0,b=h.length;C<b;C+=1){var y=h[C],w=On(y);g.add(w,zo(y,d)),f[w]=y,p[w]=0}for(var x=e.previousDirectionAngle,k=x===void 0,M,A,S=Cd(l,e),N=S.length,j=d.reduce(function(un,qg){var _g=On(qg);return un.push(_g),un},[]),B=O.equalPoints(h,d),X=e.maxLoopCount;!g.isEmpty()&&X>0;){var z=g.pop(),D=f[z],T=v[z],G=p[z],Y=D.equals(u),K=T==null,ne=void 0;K?k?Y?ne=null:ne=pi(u,D,N,l,e):ne=x:ne=pi(T,D,N,l,e);var ve=K&&B;if(!ve&&j.indexOf(z)>=0)return e.previousDirectionAngle=ne,wd(v,f,D,u,c);for(var ge=0;ge<N;ge+=1){M=S[ge];var Ie=M.angle;if(A=Ro(ne,Ie),!(k&&Y)&&A>e.maxDirectionChange)continue;var Ne=vr(D.clone().translate(M.gridOffsetX||0,M.gridOffsetY||0),l,t),Ee=On(Ne);if(g.isClose(Ee)||!n.isAccessible(Ne))continue;if(j.indexOf(Ee)>=0){var It=Ne.equals(c);if(!It){var Fi=pi(Ne,c,N,l,e),St=Ro(Ie,Fi);if(St>e.maxDirectionChange)continue}}var Kg=M.cost,Qg=Y?0:e.penalties[A],Ri=G+Kg+Qg;(!g.isOpen(Ee)||Ri<p[Ee])&&(f[Ee]=Ne,v[Ee]=D,p[Ee]=Ri,g.add(Ee,Ri+zo(Ne,d)))}X-=1}}return e.fallbackRoute?R.call(e.fallbackRoute,this,u,c,e):null}var kd=function(s,a,n){for(var e=gd(a),t=jo(n,e),r=Lo(n,e),i=Fo(n,e),l=new vd(e).build(n.graph.model,n.cell),u=s.map(function(k){return O.create(k)}),c=[],h=i,d,g,f=0,v=u.length;f<=v;f+=1){var p=null;if(d=g||t,g=u[f],g==null){g=r;var C=n.cell,b=C.getSourceCellId()==null||C.getTargetCellId()==null;if(b&&typeof e.draggingRouter=="function"){var y=d===t?i:d,w=g.getOrigin();p=R.call(e.draggingRouter,n,y,w,e)}}if(p==null&&(p=xd(n,d,g,l,e)),p===null)return R.call(e.fallbackRouter,this,s,e,n);var x=p[0];x&&x.equals(h)&&p.shift(),h=p[p.length-1]||h,c.push.apply(c,Object(W.a)(p))}return c},Io=function(s,a,n){return R.call(kd,this,s,Object.assign(Object.assign({},dd),a),n)},Ed={maxDirectionChange:45,directions:function(){var s=Ot(this.step,this),a=Ot(this.cost,this),n=Math.ceil(Math.sqrt(s*s<<1));return[{cost:a,offsetX:s,offsetY:0},{cost:n,offsetX:s,offsetY:s},{cost:a,offsetX:0,offsetY:s},{cost:n,offsetX:-s,offsetY:s},{cost:a,offsetX:-s,offsetY:0},{cost:n,offsetX:-s,offsetY:-s},{cost:a,offsetX:0,offsetY:-s},{cost:n,offsetX:s,offsetY:-s}]},fallbackRoute:function(s,a,n){var e=s.theta(a),t=[],r={x:a.x,y:s.y},i={x:s.x,y:a.y};if(e%180>90){var l=r;r=i,i=l}var u=e%90<45?r:i,c=new $(s,u),h=90*Math.ceil(e/90),d=O.fromPolar(c.squaredLength(),re.toRad(h+135),u),g=new $(a,d),f=c.intersectsWithLine(g),v=f||a,p=f?v:s,C=360/n.directions.length,b=p.theta(a),y=re.normalize(b+C/2),w=C*Math.floor(y/C);return n.previousDirectionAngle=w,v&&t.push(v.round()),t.push(a),t}},Od=function(s,a,n){return R.call(Io,this,s,Object.assign(Object.assign({},Ed),a),n)},Ad=function(s,a,n){var e=a.offset||32,t=a.direction,r=n.sourceBBox,i=n.targetBBox,l=r.getCenter(),u=i.getCenter();if(t==null){var c=l.x-u.x,h=l.y-u.y;Math.abs(c)>Math.abs(h)?t=c>0?"R":"L":t=h>0?"B":"T"}var d,g,f,v=t==="L"||t==="R"||t==="H";if(v){if(u.y===l.y)return Object(W.a)(s);f=t==="L"||t==="H"&&u.x>l.x?1:-1,d="x",g="width"}else{if(u.x===l.x)return Object(W.a)(s);f=t==="T"||t==="V"&&u.y>l.y?1:-1,d="y",g="height"}var p=l.clone(),C=u.clone();p[d]+=f*(r[g]/2+e),C[d]-=f*(i[g]/2+e);var b=16;if(v){var y=p.x,w=C.x,x=r.width/2+b,k=i.width/2+b;u.x>l.x?w<=y&&(p.x=Math.max(w,l.x+x),C.x=Math.min(y,u.x-k)):w>=y&&(p.x=Math.min(w,l.x-x),C.x=Math.max(y,u.x+k))}else{var M=p.y,A=C.y,S=r.height/2+b,N=i.height/2+b;u.y>l.y?A<=M&&(p.y=Math.max(A,l.y+S),C.y=Math.min(M,u.y-N)):A>=M&&(p.y=Math.min(A,l.y-S),C.y=Math.max(M,u.y+N))}return[p.toJSON()].concat(Object(W.a)(s),[C.toJSON()])};function on(o,s){if(s!=null&&s!==!1){var a=typeof s=="boolean"?0:s;if(a>0){var n=O.create(o[1]).move(o[2],a),e=O.create(o[1]).move(o[0],a);return[n.toJSON()].concat(Object(W.a)(o),[e.toJSON()])}{var t=o[1];return[Object.assign({},t)].concat(Object(W.a)(o),[Object.assign({},t)])}}return o}var Dd=function(s,a,n){var e=a.width||50,t=a.height||80,r=t/2,i=a.angle||"auto",l=n.sourceAnchor,u=n.targetAnchor,c=n.sourceBBox,h=n.targetBBox;if(l.equals(u)){var d=function(K){var ne=re.toRad(K),ve=Math.sin(ne),ge=Math.cos(ne),Ie=new O(l.x+ge*e,l.y+ve*e),Ne=new O(Ie.x-ge*r,Ie.y-ve*r),Ee=Ne.clone().rotate(-90,Ie),It=Ne.clone().rotate(90,Ie);return[Ee.toJSON(),Ie.toJSON(),It.toJSON()]},g=function(K){var ne=l.clone().move(K,-1),ve=new $(ne,K);return!c.containsPoint(K)&&!c.intersectsWithLine(ve)},f=[0,90,180,270,45,135,225,315];if(typeof i=="number")return on(d(i),a.merge);var v=c.getCenter();if(v.equals(l))return on(d(0),a.merge);var p=v.angleBetween(l,v.clone().translate(1,0)),C=d(p);if(g(C[1]))return on(C,a.merge);for(var b=1,y=f.length;b<y;b+=1)if(C=d(p+f[b]),g(C[1]))return on(C,a.merge);return on(C,a.merge)}{var w=new $(l,u),x=w.parallel(-e),k=x.getCenter(),M=x.start.clone().move(x.end,r),A=x.end.clone().move(x.start,r),S=w.parallel(-1),N=new $(S.start,k),j=new $(S.end,k);if((c.containsPoint(k)||h.containsPoint(k)||c.intersectsWithLine(N)||c.intersectsWithLine(j)||h.intersectsWithLine(N)||h.intersectsWithLine(j))&&(x=w.parallel(e),k=x.getCenter(),M=x.start.clone().move(x.end,r),A=x.end.clone().move(x.start,r)),a.merge){var B=new $(l,u),X=new $(k,B.center).setLength(Number.MAX_SAFE_INTEGER),z=c.intersectsWithLine(X),D=h.intersectsWithLine(X),T=z?Array.isArray(z)?z:[z]:[];D&&(Array.isArray(D)?T.push.apply(T,Object(W.a)(D)):T.push(D));var G=B.center.closest(T);G?(n.sourceAnchor=G.clone(),n.targetAnchor=G.clone()):(n.sourceAnchor=B.center.clone(),n.targetAnchor=B.center.clone())}return on([M.toJSON(),k.toJSON(),A.toJSON()],a.merge)}},At;(function(o){o.presets=ct,o.registry=me.create({type:"router"}),o.registry.register(o.presets,!0)})(At||(At={}));var Md=function(s,a,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=[s].concat(Object(W.a)(n),[a]),r=new Xe(t),i=new se(r);return e.raw?i:i.serialize()},Td=function(s,a,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=n.length===3?0:1,r=O.create(n[0+t]),i=O.create(n[2+t]),l=O.create(n[1+t]);if(!O.equals(s,a)){var u=new O((s.x+a.x)/2,(s.y+a.y)/2),c=u.angleBetween(O.create(s).rotate(90,u),l);c>1&&(r.rotate(180-c,u),i.rotate(180-c,u),l.rotate(180-c,u))}var h=`
     M `.concat(s.x," ").concat(s.y,`
     Q `).concat(r.x," ").concat(r.y," ").concat(l.x," ").concat(l.y,`
     Q `).concat(i.x," ").concat(i.y," ").concat(a.x," ").concat(a.y,`
  `);return e.raw?se.parse(h):h},Sd=function(s,a,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=new se;t.appendSegment(se.createSegment("M",s));for(var r=1/3,i=2/3,l=e.radius||10,u,c,h=0,d=n.length;h<d;h+=1){var g=O.create(n[h]),f=n[h-1]||s,v=n[h+1]||a;u=c||g.distance(f)/2,c=g.distance(v)/2;var p=-Math.min(l,u),C=-Math.min(l,c),b=g.clone().move(f,p).round(),y=g.clone().move(v,C).round(),w=new O(r*b.x+i*g.x,i*g.y+r*b.y),x=new O(r*y.x+i*g.x,i*g.y+r*y.y);t.appendSegment(se.createSegment("L",b)),t.appendSegment(se.createSegment("C",w,x,y))}return t.appendSegment(se.createSegment("L",a)),e.raw?t:t.serialize()},Pd=function(s,a,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t;if(n&&n.length!==0){var r=[s].concat(Object(W.a)(n),[a]),i=Je.throughPoints(r);t=new se(i)}else if(t=new se,t.appendSegment(se.createSegment("M",s)),Math.abs(s.x-a.x)>=Math.abs(s.y-a.y)){var l=(s.x+a.x)/2;t.appendSegment(se.createSegment("C",l,s.y,l,a.y,a.x,a.y))}else{var u=(s.y+a.y)/2;t.appendSegment(se.createSegment("C",s.x,u,a.x,u,a.x,a.y))}return e.raw?t:t.serialize()},Vo=1,pr=1/3,mr=2/3;function Nd(o){var s=o.graph._jumpOverUpdateList;if(s==null&&(s=o.graph._jumpOverUpdateList=[],o.graph.on("cell:mouseup",function(){for(var n=o.graph._jumpOverUpdateList,e=0;e<n.length;e+=1)n[e].update()}),o.graph.on("model:reseted",function(){s=o.graph._jumpOverUpdateList=[]})),s.indexOf(o)<0){s.push(o);var a=function(){return s.splice(s.indexOf(o),1)};o.cell.once("change:connector",a),o.cell.once("removed",a)}}function Ci(o,s,a){var n=[o].concat(Object(W.a)(a),[s]),e=[];return n.forEach(function(t,r){var i=n[r+1];i!=null&&e.push(new $(t,i))}),e}function jd(o,s){var a=[];return s.forEach(function(n){var e=o.intersectsWithLine(n);e&&a.push(e)}),a}function Uo(o,s){return new $(o,s).squaredLength()}function Ld(o,s,a){return s.reduce(function(n,e,t){if(Cr.includes(e))return n;var r=n.pop()||o,i=O.create(e).move(r.start,-a),l=O.create(e).move(r.start,+a),u=s[t+1];if(u!=null){var c=l.distance(u);c<=a&&(l=u.move(r.start,c),Cr.push(u))}else{var h=i.distance(r.end);if(h<a*2+Vo)return n.push(r),n}var d=l.distance(r.start);if(d<a*2+Vo)return n.push(r),n;var g=new $(i,l);return An.push(g),n.push(new $(r.start,i),g,new $(l,r.end)),n},[])}function Go(o,s,a,n){var e=new se,t;return t=se.createSegment("M",o[0].start),e.appendSegment(t),o.forEach(function(r,i){if(An.includes(r)){var l,u,c,h;if(a==="arc"){l=-90,u=r.start.diff(r.end);var d=u.x<0||u.x===0&&u.y<0;d&&(l+=180);var g=r.getCenter(),f=new $(g,r.end).rotate(l,g),v;v=new $(r.start,g),c=v.pointAt(2/3).rotate(l,r.start),h=f.pointAt(1/3).rotate(-l,f.end),t=se.createSegment("C",c,h,f.end),e.appendSegment(t),v=new $(g,r.end),c=f.pointAt(1/3).rotate(l,f.end),h=v.pointAt(1/3).rotate(-l,r.end),t=se.createSegment("C",c,h,r.end),e.appendSegment(t)}else if(a==="gap")t=se.createSegment("M",r.end),e.appendSegment(t);else if(a==="cubic"){l=r.start.theta(r.end);var p=s*.6,C=s*1.35;u=r.start.diff(r.end);var b=u.x<0||u.x===0&&u.y<0;b&&(C*=-1),c=new O(r.start.x+p,r.start.y+C).rotate(l,r.start),h=new O(r.end.x-p,r.end.y+C).rotate(l,r.end),t=se.createSegment("C",c,h,r.end),e.appendSegment(t)}}else{var y=o[i+1];n===0||!y||An.includes(y)?(t=se.createSegment("L",r.end),e.appendSegment(t)):Fd(n,e,r.end,r.start,y.end)}}),e}function Fd(o,s,a,n,e){var t=a.distance(n)/2,r=a.distance(e)/2,i=-Math.min(o,t),l=-Math.min(o,r),u=a.clone().move(n,i).round(),c=a.clone().move(e,l).round(),h=new O(pr*u.x+mr*a.x,mr*a.y+pr*u.y),d=new O(pr*c.x+mr*a.x,mr*a.y+pr*c.y),g;g=se.createSegment("L",u),s.appendSegment(g),g=se.createSegment("C",h,d,c),s.appendSegment(g)}var An,Cr,Rd=function(s,a,n){var e=this,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};An=[],Cr=[],Nd(this);var r=t.size||5,i=t.type||"arc",l=t.radius||0,u=t.ignoreConnectors||["smooth"],c=this.graph,h=c.model,d=h.getEdges();if(d.length===1)return Go(Ci(s,a,n),r,i,l);var g=this.cell,f=d.indexOf(g),v=c.options.connecting.connector||{},p=d.filter(function(k,M){var A=k.getConnector()||v;return u.includes(A.name)?!1:M>f?A.name!=="jumpover":!0}),C=p.map(function(k){return c.renderer.findViewByCell(k)}),b=Ci(s,a,n),y=C.map(function(k){return k==null?[]:k===e?b:Ci(k.sourcePoint,k.targetPoint,k.routePoints)}),w=[];b.forEach(function(k){var M=p.reduce(function(A,S,N){if(S!==g){var j=jd(k,y[N]);A.push.apply(A,Object(W.a)(j))}return A},[]).sort(function(A,S){return Uo(k.start,A)-Uo(k.start,S)});M.length>0?w.push.apply(w,Object(W.a)(Ld(k,M,r))):w.push(k)});var x=Go(w,r,i,l);return An=[],Cr=[],t.raw?x:x.serialize()},zt;(function(o){o.presets=Pt,o.registry=me.create({type:"connector"}),o.registry.register(o.presets,!0)})(zt||(zt={}));var rf=me.create,yi=function(){function o(s){Object(L.a)(this,o),this.cell=s,this.ids={},this.cache={}}return Object(F.a)(o,[{key:"get",value:function(){return Object.keys(this.ids)}},{key:"start",value:function(a,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",i=this.cell.getPropByPath(a),l=P.defaults(t,o.defaultOptions),u=this.getTiming(l.timing),c=this.getInterp(l.interp,i,n),h=0,d=Array.isArray(a)?a.join(r):a,g=Array.isArray(a)?a:a.split(r),f=function v(){var p=new Date().getTime();h===0&&(h=p);var C=p-h,b=C/l.duration;b<1?e.ids[d]=E.requestAnimationFrame(v):b=1;var y=c(u(b));e.cell.setPropByPath(g,y),t.progress&&t.progress(Object.assign({progress:b,currentValue:y},e.getArgs(d))),b===1&&(e.cell.notify("transition:end",e.getArgs(d)),e.cell.notify("transition:complete",e.getArgs(d)),t.complete&&t.complete(e.getArgs(d)),e.cell.notify("transition:finish",e.getArgs(d)),t.finish&&t.finish(e.getArgs(d)),e.clean(d))};return setTimeout(function(){e.stop(a,void 0,r),e.cache[d]={startValue:i,targetValue:n,options:l},e.ids[d]=E.requestAnimationFrame(f),e.cell.notify("transition:begin",e.getArgs(d)),e.cell.notify("transition:start",e.getArgs(d)),t.start&&t.start(e.getArgs(d))},t.delay),this.stop.bind(this,a,r,t)}},{key:"stop",value:function(a){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",r=Array.isArray(a)?a:a.split(t);return Object.keys(this.ids).filter(function(i){return P.isEqual(r,i.split(t).slice(0,r.length))}).forEach(function(i){E.cancelAnimationFrame(n.ids[i]);var l=n.cache[i],u=n.getArgs(i),c=Object.assign(Object.assign({},l.options),e),h=c.jumpedToEnd;h&&l.targetValue!=null&&(n.cell.setPropByPath(i,l.targetValue),n.cell.notify("transition:end",Object.assign({},u)),n.cell.notify("transition:complete",Object.assign({},u)),c.complete&&c.complete(Object.assign({},u)));var d=Object.assign({jumpedToEnd:h},u);n.cell.notify("transition:stop",Object.assign({},d)),c.stop&&c.stop(Object.assign({},d)),n.cell.notify("transition:finish",Object.assign({},u)),c.finish&&c.finish(Object.assign({},u)),n.clean(i)}),this}},{key:"clean",value:function(a){delete this.ids[a],delete this.cache[a]}},{key:"getTiming",value:function(a){return typeof a=="string"?Ft[a]:a}},{key:"getInterp",value:function(a,n,e){return a?a(n,e):typeof e=="number"?Rt.number(n,e):typeof e=="string"?e[0]==="#"?Rt.color(n,e):Rt.unit(n,e):Rt.object(n,e)}},{key:"getArgs",value:function(a){var n=this.cache[a];return{path:a,startValue:n.startValue,targetValue:n.targetValue,cell:this.cell}}}]),o}();(function(o){o.defaultOptions={delay:10,duration:100,timing:"linear"}})(yi||(yi={}));var Xd=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Ho=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.a)(this,a),n=s.call(this),n.pending=!1,n.changing=!1,n.data={},n.mutate(P.cloneDeep(e)),n.changed={},n}return Object(F.a)(a,[{key:"mutate",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.unset===!0,l=r.silent===!0,u=[],c=this.changing;this.changing=!0,c||(this.previous=P.cloneDeep(this.data),this.changed={});var h=this.data,d=this.previous,g=this.changed;if(Object.keys(e).forEach(function(f){var v=f,p=e[v];P.isEqual(h[v],p)||u.push(v),P.isEqual(d[v],p)?delete g[v]:g[v]=p,i?delete h[v]:h[v]=p}),!l&&u.length>0&&(this.pending=!0,this.pendingOptions=r,u.forEach(function(f){t.emit("change:*",{key:f,options:r,store:t,current:h[f],previous:d[f]})})),c)return this;if(!l)for(;this.pending;)this.pending=!1,this.emit("changed",{current:h,previous:d,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}},{key:"get",value:function(e,t){if(e==null)return this.data;var r=this.data[e];return r??t}},{key:"getPrevious",value:function(e){if(this.previous){var t=this.previous[e];return t??void 0}return}},{key:"set",value:function(e,t,r){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate(Object(q.a)({},e,t),r)),this}},{key:"remove",value:function(e,t){var r=void 0,i={},l;if(typeof e=="string")i[e]=r,l=t;else if(Array.isArray(e))e.forEach(function(c){return i[c]=r}),l=t;else{for(var u in this.data)i[u]=r;l=e}return this.mutate(i,Object.assign(Object.assign({},l),{unset:!0})),this}},{key:"getByPath",value:function(e){return P.getByPath(this.data,e,"/")}},{key:"setByPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i="/",l=Array.isArray(e)?Object(W.a)(e):e.split(i),u=Array.isArray(e)?e.join(i):e,c=l[0],h=l.length;if(r.propertyPath=u,r.propertyValue=t,r.propertyPathArray=l,h===1)this.set(c,t,r);else{for(var d={},g=d,f=c,v=1;v<h;v+=1){var p=l[v],C=Number.isFinite(Number(p));g=g[f]=C?[]:{},f=p}P.setByPath(d,l,t,i);var b=P.cloneDeep(this.data);r.rewrite&&P.unsetByPath(b,e,i);var y=P.merge(b,d);this.set(c,y[c],r)}return this}},{key:"removeByPath",value:function(e,t){var r=Array.isArray(e)?e:e.split("/"),i=r[0];if(r.length===1)this.remove(i,t);else{var l=r.slice(1),u=P.cloneDeep(this.get(i));u&&P.unsetByPath(u,l),this.set(i,u,t)}return this}},{key:"hasChanged",value:function(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}},{key:"getChanges",value:function(e){if(e==null)return this.hasChanged()?P.cloneDeep(this.changed):null;var t=this.changing?this.previous:this.data,r={},i;for(var l in e){var u=e[l];P.isEqual(t[l],u)||(r[l]=u,i=!0)}return i?P.cloneDeep(r):null}},{key:"toJSON",value:function(){return P.cloneDeep(this.data)}},{key:"clone",value:function(){var e=this.constructor;return new e(this.data)}},{key:"dispose",value:function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}]),a}(Pe);Xd([Pe.dispose()],Ho.prototype,"dispose",null);var zd=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Wo=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},ce=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(L.a)(this,a),n=s.call(this);var t=n.constructor,r=t.getDefaults(!0),i=P.merge({},n.preprocess(r),n.preprocess(e));return n.id=i.id||J.uuid(),n.store=new Ho(i),n.animation=new yi(Object(Ae.a)(n)),n.setup(),n.init(),n.postprocess(e),n}return Object(F.a)(a,[{key:"init",value:function(){}},{key:"preprocess",value:function(e,t){var r=e.id,i=this.constructor,l=i.applyPropHooks(this,e);return r==null&&t!==!0&&(l.id=J.uuid()),l}},{key:"postprocess",value:function(e){}},{key:"setup",value:function(){var e=this;this.store.on("change:*",function(t){var r=t.key,i=t.current,l=t.previous,u=t.options;e.notify("change:*",{key:r,options:u,current:i,previous:l,cell:e}),e.notify("change:".concat(r),{options:u,current:i,previous:l,cell:e});var c=r;(c==="source"||c==="target")&&e.notify("change:terminal",{type:c,current:i,previous:l,options:u,cell:e})}),this.store.on("changed",function(t){var r=t.options;return e.notify("changed",{options:r,cell:e})})}},{key:"notify",value:function(e,t){this.trigger(e,t);var r=this.model;return r&&(r.notify("cell:".concat(e),t),this.isNode()?r.notify("node:".concat(e),Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&r.notify("edge:".concat(e),Object.assign(Object.assign({},t),{edge:this}))),this}},{key:"isNode",value:function(){return!1}},{key:"isEdge",value:function(){return!1}},{key:"isSameStore",value:function(e){return this.store===e.store}},{key:"getProp",value:function(e,t){return e==null?this.store.get():this.store.get(e,t)}},{key:"setProp",value:function(e,t,r){return typeof e=="string"?this.store.set(e,t,r):this.store.set(P.merge({},this.getProp(),e),t),this}},{key:"removeProp",value:function(e,t){return typeof e=="string"||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}},{key:"hasChanged",value:function(e){return e==null?this.store.hasChanged():this.store.hasChanged(e)}},{key:"getPropByPath",value:function(e){return this.store.getByPath(e)}},{key:"setPropByPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.store.setByPath(e,t,r),this}},{key:"removePropByPath",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Array.isArray(e)?e:e.split("/");return r[0]==="attrs"&&(t.dirty=!0),this.store.removeByPath(r,t),this}},{key:"prop",value:function(e,t,r){return e==null?this.getProp():typeof e=="string"||Array.isArray(e)?arguments.length===1?Array.isArray(e)?this.getPropByPath(e):this.getPropByPath(e):t==null?Array.isArray(e)?this.removePropByPath(e):this.removeAttrByPath(e,r||{}):this.setPropByPath(e,t,r||{}):this.setProp(e,t||{})}},{key:"previous",value:function(e){return this.store.getPrevious(e)}},{key:"getZIndex",value:function(){return this.store.get("zIndex")}},{key:"setZIndex",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("zIndex",e,t),this}},{key:"removeZIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("zIndex",e),this}},{key:"toFront",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.model;if(t){var r=t.getMaxZIndex(),i;e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this],r=r-i.length+1;var l=t.total(),u=t.indexOf(this)!==l-i.length;u||(u=i.some(function(c,h){return c.getZIndex()!==r+h})),u&&this.batchUpdate("to-front",function(){r=r+i.length,i.forEach(function(c,h){c.setZIndex(r+h,e)})})}return this}},{key:"toBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.model;if(t){var r=t.getMinZIndex(),i;e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this];var l=t.indexOf(this)!==0;l||(l=i.some(function(u,c){return u.getZIndex()!==r+c})),l&&this.batchUpdate("to-back",function(){r-=i.length,i.forEach(function(u,c){u.setZIndex(r+c,e)})})}return this}},{key:"getMarkup",value:function(){var e=this.store.get("markup");if(e==null){var t=this.constructor;e=t.getMarkup()}return e}},{key:"setMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("markup",e,t),this}},{key:"removeMarkup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("markup",e),this}},{key:"getAttrs",value:function(){var e=this.store.get("attrs");return e?Object.assign({},e):{}}},{key:"setAttrs",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)this.removeAttrs(r);else{var i=function(c){return t.store.set("attrs",c,r)};if(r.overwrite===!0)i(e);else{var l=this.getAttrs();r.deep===!1?i(Object.assign(Object.assign({},l),e)):i(P.merge({},l,e))}}return this}},{key:"replaceAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}},{key:"updateAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}},{key:"removeAttrs",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("attrs",e),this}},{key:"getAttrDefinition",value:function(e){if(!e)return null;var t=this.constructor,r=t.getAttrHooks()||{},i=r[e]||it.registry.get(e);if(!i){var l=J.camelCase(e);i=r[l]||it.registry.get(l)}return i||null}},{key:"getAttrByPath",value:function(e){return e==null||e===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}},{key:"setAttrByPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setPropByPath(this.prefixAttrPath(e),t,r),this}},{key:"removeAttrByPath",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePropByPath(this.prefixAttrPath(e),t),this}},{key:"prefixAttrPath",value:function(e){return Array.isArray(e)?["attrs"].concat(e):"attrs/".concat(e)}},{key:"attr",value:function(e,t,r){return e==null?this.getAttrByPath():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getAttrByPath(e):t==null?this.removeAttrByPath(e,r||{}):this.setAttrByPath(e,t,r||{}):this.setAttrs(e,t||{})}},{key:"setVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("visible",e,t),this}},{key:"isVisible",value:function(){return this.store.get("visible")!==!1}},{key:"show",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()||this.setVisible(!0,e),this}},{key:"hide",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()&&this.setVisible(!1,e),this}},{key:"toggleVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=typeof e=="boolean"?e:!this.isVisible(),i=typeof e=="boolean"?t:e;return r?this.show(i):this.hide(i),this}},{key:"getData",value:function(){return this.store.get("data")}},{key:"setData",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)this.removeData(r);else{var i=function(c){return t.store.set("data",c,r)};if(r.overwrite===!0)i(e);else{var l=this.getData();r.deep===!1?i(typeof e=="object"?Object.assign(Object.assign({},l),e):e):i(P.merge({},l,e))}}return this}},{key:"replaceData",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}},{key:"updateData",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}},{key:"removeData",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("data",e),this}},{key:"getParent",value:function(){var e=this._parent;if(e==null&&this.store){var t=this.getParentId();t!=null&&this.model&&(e=this.model.getCell(t),this._parent=e)}return e}},{key:"getParentId",value:function(){return this.store.get("parent")}},{key:"getChildren",value:function(){var e=this,t=this._children;if(t==null){var r=this.store.get("children");r&&r.length&&this.model&&(t=r.map(function(i){var l;return(l=e.model)===null||l===void 0?void 0:l.getCell(i)}).filter(function(i){return i!=null}),this._children=t)}return t?Object(W.a)(t):null}},{key:"hasParent",value:function(){return this.parent!=null}},{key:"isParentOf",value:function(e){return e!=null&&e.getParent()===this}},{key:"isChildOf",value:function(e){return e!=null&&this.getParent()===e}},{key:"eachChild",value:function(e,t){return this.children&&this.children.forEach(e,t),this}},{key:"filterChild",value:function(e,t){return this.children?this.children.filter(e,t):[]}},{key:"getChildCount",value:function(){return this.children==null?0:this.children.length}},{key:"getChildIndex",value:function(e){return this.children==null?-1:this.children.indexOf(e)}},{key:"getChildAt",value:function(e){return this.children!=null&&e>=0?this.children[e]:null}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=[],r=this.getParent();r;)t.push(r),r=e.deep!==!1?r.getParent():null;return t}},{key:"getDescendants",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.deep!==!1){if(e.breadthFirst){for(var t=[],r=this.getChildren()||[];r.length>0;){var i=r.shift(),l=i.getChildren();t.push(i),l&&r.push.apply(r,Object(W.a)(l))}return t}{var u=this.getChildren()||[];return u.forEach(function(c){u.push.apply(u,Object(W.a)(c.getDescendants(e)))}),u}}return this.getChildren()||[]}},{key:"isDescendantOf",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return!1;if(t.deep!==!1){for(var r=this.getParent();r;){if(r===e)return!0;r=r.getParent()}return!1}return this.isChildOf(e)}},{key:"isAncestorOf",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?!1:e.isDescendantOf(this,t)}},{key:"contains",value:function(e){return this.isAncestorOf(e)}},{key:"getCommonAncestor",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.getCommonAncestor.apply(a,[this].concat(t))}},{key:"setParent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}},{key:"setChildren",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._children=e,e!=null?this.store.set("children",e.map(function(r){return r.id}),t):this.store.remove("children",t),this}},{key:"unembed",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.children;if(r!=null&&e!=null){var i=this.getChildIndex(e);r.splice(i,1),e.setParent(null,t),this.setChildren(r,t)}return this}},{key:"embed",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.addTo(this,t),this}},{key:"addTo",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e instanceof a?e.addChild(this,t):e.addCell(this,t),this}},{key:"insertTo",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.insertChild(this,t,r),this}},{key:"addChild",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertChild(e,void 0,t)}},{key:"insertChild",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null&&e!==this){var i=e.getParent(),l=this!==i,u=t;if(u==null&&(u=this.getChildCount(),l||(u-=1)),i){var c=i.getChildren();if(c){var h=c.indexOf(e);h>=0&&(e.setParent(null,r),c.splice(h,1),i.setChildren(c,r))}}var d=this.children;if(d==null?(d=[],d.push(e)):d.splice(u,0,e),e.setParent(this,r),this.setChildren(d,r),l&&this.model){var g=this.model.getIncomingEdges(this),f=this.model.getOutgoingEdges(this);g&&g.forEach(function(v){return v.updateParent(r)}),f&&f.forEach(function(v){return v.updateParent(r)})}this.model&&this.model.addCell(e,r)}return this}},{key:"removeFromParent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getParent();if(t!=null){var r=t.getChildIndex(this);t.removeChildAt(r,e)}return this}},{key:"removeChild",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getChildIndex(e);return this.removeChildAt(r,t)}},{key:"removeChildAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getChildAt(e),i=this.children;return i!=null&&r!=null&&(this.unembed(r,t),r.remove(t)),r}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.getParent();return r?r.removeChild(this,t):this.batchUpdate("remove",function(){t.deep!==!1&&e.eachChild(function(i){return i.remove(t)}),e.model&&e.model.removeCell(e,t)}),this}},{key:"transition",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/";return this.animation.start(e,t,r,i)}},{key:"stopTransition",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/";return this.animation.stop(e,t,r),this}},{key:"getTransitions",value:function(){return this.animation.get()}},{key:"translate",value:function(e,t,r){return this}},{key:"scale",value:function(e,t,r,i){return this}},{key:"addTools",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Array.isArray(e)?e:[e];if(r.reset)this.setTools({name:t,items:i},r);else{var l=this.getTools();if(l==null||t==null||l.name===t)return l==null&&(l={}),l.items||(l.items=[]),l.name=t,l.items=[].concat(Object(W.a)(l.items),Object(W.a)(i)),this.setTools(Object.assign({},l),r)}}},{key:"setTools",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeTools():this.store.set("tools",a.normalizeTools(e),t),this}},{key:"getTools",value:function(){return this.store.get("tools")}},{key:"removeTools",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("tools",e),this}},{key:"hasTools",value:function(e){var t=this.getTools();return t==null?!1:e==null?!0:t.name===e}},{key:"getBBox",value:function(e){return new U}},{key:"getConnectionPoint",value:function(e,t){return new O}},{key:"toJSON",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Object.assign({},this.store.get()),i=Object.prototype.toString,l=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!r.shape){var u=this.constructor;throw new Error("Unable to serialize ".concat(l,' missing "shape" prop, check the ').concat(l,' "').concat(u.name||i.call(u),'"'))}var c=this.constructor,h=t.diff===!0,d=r.attrs||{},g=c.getDefaults(!0),f=h?this.preprocess(g,!0):g,v=f.attrs||{},p={};Object.keys(r).forEach(function(y){var w=r[y];if(!Array.isArray(w)&&typeof w=="object"&&!P.isPlainObject(w))throw new Error("Can only serialize ".concat(l,' with plain-object props, but got a "').concat(i.call(w),'" type of key "').concat(y,'" on ').concat(l,' "').concat(e.id,'"'));if(y!=="attrs"&&y!=="shape"&&h){var x=f[y];P.isEqual(w,x)&&delete r[y]}}),Object.keys(d).forEach(function(y){var w=d[y],x=v[y];Object.keys(w).forEach(function(k){var M=w[k],A=x?x[k]:null;M!=null&&typeof M=="object"&&!Array.isArray(M)?Object.keys(M).forEach(function(S){var N=M[S];if(x==null||A==null||!P.isObject(A)||!P.isEqual(A[S],N)){p[y]==null&&(p[y]={}),p[y][k]==null&&(p[y][k]={});var j=p[y][k];j[S]=N}}):(x==null||!P.isEqual(A,M))&&(p[y]==null&&(p[y]={}),p[y][k]=M)})});var C=Object.assign(Object.assign({},r),{attrs:P.isEmpty(p)?void 0:p});C.attrs==null&&delete C.attrs;var b=C;return b.angle===0&&delete b.angle,P.cloneDeep(b)}},{key:"clone",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e.deep){var t=Object.assign({},this.store.get());delete t.id,delete t.parent,delete t.children;var r=this.constructor;return new r(t)}var i=a.deepClone(this);return i[this.id]}},{key:"findView",value:function(e){return e.renderer.findViewByCell(this)}},{key:"startBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return r&&r.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return r&&r.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}},{key:"batchUpdate",value:function(e,t,r){var i=this.model;this.startBatch(e,r,i);var l=t();return this.stopBatch(e,r,i),l}},{key:"dispose",value:function(){this.removeFromParent(),this.store.dispose()}},{key:"model",get:function(){return this._model},set:function(e){this._model!==e&&(this._model=e)}},{key:"view",get:function(){return this.store.get("view")}},{key:"shape",get:function(){return this.store.get("shape","")}},{key:"zIndex",get:function(){return this.getZIndex()},set:function(e){e==null?this.removeZIndex():this.setZIndex(e)}},{key:"markup",get:function(){return this.getMarkup()},set:function(e){e==null?this.removeMarkup():this.setMarkup(e)}},{key:"attrs",get:function(){return this.getAttrs()},set:function(e){e==null?this.removeAttrs():this.setAttrs(e)}},{key:"visible",get:function(){return this.isVisible()},set:function(e){this.setVisible(e)}},{key:"data",get:function(){return this.getData()},set:function(e){this.setData(e)}},{key:"parent",get:function(){return this.getParent()}},{key:"children",get:function(){return this.getChildren()}}],[{key:"config",value:function(e){var t=this,r=e.markup,i=e.propHooks,l=e.attrHooks,u=Wo(e,["markup","propHooks","attrHooks"]);if(r!=null&&(this.markup=r),i)if(this.propHooks=this.propHooks.slice(),Array.isArray(i)){var c;(c=this.propHooks).push.apply(c,Object(W.a)(i))}else typeof i=="function"?this.propHooks.push(i):Object.keys(i).forEach(function(h){var d=i[h];typeof d=="function"&&t.propHooks.push(d)});l&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),l)),this.defaults=P.merge({},this.defaults,u)}},{key:"getMarkup",value:function(){return this.markup}},{key:"getDefaults",value:function(e){return e?this.defaults:P.cloneDeep(this.defaults)}},{key:"getAttrHooks",value:function(){return this.attrHooks}},{key:"applyPropHooks",value:function(e,t){return this.propHooks.reduce(function(r,i){return i?R.call(i,e,r):r},t)}}]),a}(Pe);ce.defaults={},ce.attrHooks={},ce.propHooks=[],zd([Pe.dispose()],ce.prototype,"dispose",null),function(o){function s(a){return typeof a=="string"?{items:[a]}:Array.isArray(a)?{items:a}:a.items?a:{items:[a]}}o.normalizeTools=s}(ce||(ce={})),function(o){function s(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var l=r.filter(function(c){return c!=null}).map(function(c){return c.getAncestors()}).sort(function(c,h){return c.length-h.length}),u=l.shift();return u.find(function(c){return l.every(function(h){return h.includes(c)})})||null}o.getCommonAncestor=s;function a(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=null,l=0,u=t.length;l<u;l+=1){var c=t[l],h=c.getBBox(r);if(h){if(c.isNode()){var d=c.getAngle();d!=null&&d!==0&&(h=h.bbox(d))}i=i==null?h:i.union(h)}}return i}o.getCellsBBox=a;function n(t){var r=[t].concat(Object(W.a)(t.getDescendants({deep:!0})));return o.cloneCells(r)}o.deepClone=n;function e(t){var r=pe.uniq(t),i=r.reduce(function(l,u){return l[u.id]=u.clone(),l},{});return r.forEach(function(l){var u=i[l.id];if(u.isEdge()){var c=u.getSourceCellId(),h=u.getTargetCellId();c&&i[c]&&u.setSource(Object.assign(Object.assign({},u.getSource()),{cell:i[c].id})),h&&i[h]&&u.setTarget(Object.assign(Object.assign({},u.getTarget()),{cell:i[h].id}))}var d=l.getParent();d&&i[d.id]&&u.setParent(i[d.id]);var g=l.getChildren();if(g&&g.length){var f=g.reduce(function(v,p){return i[p.id]&&v.push(i[p.id]),v},[]);f.length>0&&u.setChildren(f)}}),i}o.cloneCells=e}(ce||(ce={})),function(o){o.config({propHooks:function(a){var n=a.tools,e=Wo(a,["tools"]);return n&&(e.tools=o.normalizeTools(n)),e}})}(ce||(ce={}));var sn;(function(o){var s,a;function n(r,i){return i?s!=null&&s.exist(r):a!=null&&a.exist(r)}o.exist=n;function e(r){s=r}o.setEdgeRegistry=e;function t(r){a=r}o.setNodeRegistry=t})(sn||(sn={}));var Bd=function(){function o(s){Object(L.a)(this,o),this.ports=[],this.groups={},this.init(P.cloneDeep(s))}return Object(F.a)(o,[{key:"getPorts",value:function(){return this.ports}},{key:"getGroup",value:function(a){return a!=null?this.groups[a]:null}},{key:"getPortsByGroup",value:function(a){return this.ports.filter(function(n){return n.group===a||n.group==null&&a==null})}},{key:"getPortsLayoutByGroup",value:function(a,n){var e=this,t=this.getPortsByGroup(a),r=a?this.getGroup(a):null,i=r?r.position:null,l=i?i.name:null,u;if(l!=null){var c=Xt.registry.get(l);if(c==null)return Xt.registry.onNotFound(l);u=c}else u=Xt.presets.left;var h=t.map(function(f){return f&&f.position&&f.position.args||{}}),d=i&&i.args||{},g=u(h,n,d);return g.map(function(f,v){var p=t[v];return{portLayout:f,portId:p.id,portSize:p.size,portAttrs:p.attrs,labelSize:p.label.size,labelLayout:e.getPortLabelLayout(p,O.create(f.position),n)}})}},{key:"init",value:function(a){var n=this,e=a.groups,t=a.items;e!=null&&Object.keys(e).forEach(function(r){n.groups[r]=n.parseGroup(e[r])}),Array.isArray(t)&&t.forEach(function(r){n.ports.push(n.parsePort(r))})}},{key:"parseGroup",value:function(a){return Object.assign(Object.assign({},a),{label:this.getLabel(a,!0),position:this.getPortPosition(a.position,!0)})}},{key:"parsePort",value:function(a){var n=Object.assign({},a),e=this.getGroup(a.group)||{};return n.markup=n.markup||e.markup,n.attrs=P.merge({},e.attrs,n.attrs),n.position=this.createPosition(e,n),n.label=P.merge({},e.label,this.getLabel(n)),n.zIndex=this.getZIndex(e,n),n.size=Object.assign({},e.size,n.size),n}},{key:"getZIndex",value:function(a,n){return typeof n.zIndex=="number"?n.zIndex:typeof a.zIndex=="number"||a.zIndex==="auto"?a.zIndex:"auto"}},{key:"createPosition",value:function(a,n){return P.merge({name:"left",args:{}},a.position,{args:n.args})}},{key:"getPortPosition",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a==null){if(n)return{name:"left",args:{}}}else{if(typeof a=="string")return{name:a,args:{}};if(Array.isArray(a))return{name:"absolute",args:{x:a[0],y:a[1]}};if(typeof a=="object")return a}return{args:{}}}},{key:"getPortLabelPosition",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a==null){if(n)return{name:"left",args:{}}}else{if(typeof a=="string")return{name:a,args:{}};if(typeof a=="object")return a}return{args:{}}}},{key:"getLabel",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=a.label||{};return e.position=this.getPortLabelPosition(e.position,n),e}},{key:"getPortLabelLayout",value:function(a,n,e){var t=a.label.position.name||"left",r=a.label.position.args||{},i=qt.registry.get(t)||qt.presets.left;return i?i(n,e,r):null}}]),o}(),yr=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Oe=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.a)(this,a),n=s.call(this,e),n.initPorts(),n}return Object(F.a)(a,[{key:"preprocess",value:function(e,t){var r=e.x,i=e.y,l=e.width,u=e.height,c=yr(e,["x","y","width","height"]);if(r!=null||i!=null){var h=c.position;c.position=Object.assign(Object.assign({},h),{x:r??(h?h.x:0),y:i??(h?h.y:0)})}if(l!=null||u!=null){var d=c.size;c.size=Object.assign(Object.assign({},d),{width:l??(d?d.width:0),height:u??(d?d.height:0)})}return Object(_.a)(Object(ee.a)(a.prototype),"preprocess",this).call(this,c,t)}},{key:"isNode",value:function(){return!0}},{key:"size",value:function(e,t,r){return e===void 0?this.getSize():typeof e=="number"?this.setSize(e,t,r):this.setSize(e,t)}},{key:"getSize",value:function(){var e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}},{key:"setSize",value:function(e,t,r){return typeof e=="object"?this.resize(e.width,e.height,t):this.resize(e,t,r),this}},{key:"resize",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch("resize",r);var i=r.direction;if(i){var l=this.getSize();switch(i){case"left":case"right":t=l.height;break;case"top":case"bottom":e=l.width;break}var u={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3},c=u[i],h=re.normalize(this.getAngle()||0);r.absolute&&(c+=Math.floor((h+45)/90),c%=4);var d=this.getBBox(),g;c===0?g=d.getBottomLeft():c===1?g=d.getCorner():c===2?g=d.getTopRight():g=d.getOrigin();var f=g.clone().rotate(-h,d.getCenter()),v=Math.sqrt(e*e+t*t)/2,p=c*Math.PI/2;p+=Math.atan(c%2===0?t/e:e/t),p-=re.toRad(h);var C=O.fromPolar(v,p,f),b=C.clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},r),this.setPosition(b.x,b.y,r)}else this.store.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this}},{key:"scale",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getBBox().scale(e,t,r??void 0);return this.startBatch("scale",i),this.setPosition(l.x,l.y,i),this.resize(l.width,l.height,i),this.stopBatch("scale"),this}},{key:"position",value:function(e,t,r){return typeof e=="number"?this.setPosition(e,t,r):this.getPosition(e)}},{key:"getPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.relative){var t=this.getParent();if(t!=null&&t.isNode()){var r=this.getPosition(),i=t.getPosition();return{x:r.x-i.x,y:r.y-i.y}}}var l=this.store.get("position");return l?Object.assign({},l):{x:0,y:0}}},{key:"setPosition",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,l,u;if(typeof e=="object"?(i=e.x,l=e.y,u=t||{}):(i=e,l=t,u=r||{}),u.relative){var c=this.getParent();if(c!=null&&c.isNode()){var h=c.getPosition();i+=h.x,l+=h.y}}if(u.deep){var d=this.getPosition();this.translate(i-d.x,l-d.y,u)}else this.store.set("position",{x:i,y:l},u);return this}},{key:"translate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===0&&t===0)return this;r.translateBy=r.translateBy||this.id;var i=this.getPosition();if(r.restrict!=null&&r.translateBy===this.id){var l=this.getBBox({deep:!0}),u=r.restrict,c=i.x-l.x,h=i.y-l.y,d=Math.max(u.x+c,Math.min(u.x+u.width+c-l.width,i.x+e)),g=Math.max(u.y+h,Math.min(u.y+u.height+h-l.height,i.y+t));e=d-i.x,t=g-i.y}var f={x:i.x+e,y:i.y+t};return r.tx=e,r.ty=t,r.transition?(typeof r.transition!="object"&&(r.transition={}),this.transition("position",f,Object.assign(Object.assign({},r.transition),{interp:Rt.object})),this.eachChild(function(v){return v.translate(e,t,r)})):(this.startBatch("translate",r),this.store.set("position",f,r),this.eachChild(function(v){return v.translate(e,t,r)}),this.stopBatch("translate",r)),this}},{key:"angle",value:function(e,t){return e==null?this.getAngle():this.rotate(e)}},{key:"getAngle",value:function(){return this.store.get("angle",0)}},{key:"rotate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getAngle();if(t.center){var i=this.getSize(),l=this.getPosition(),u=this.getBBox().getCenter();u.rotate(r-e,t.center);var c=u.x-i.width/2-l.x,h=u.y-i.height/2-l.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(l.x+c,l.y+h,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(r+e)%360,t);return this}},{key:"getBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e.deep){var t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),ce.getCellsBBox(t)}return U.fromPositionAndSize(this.getPosition(),this.getSize())}},{key:"getConnectionPoint",value:function(e,t){var r=this.getBBox(),i=r.getCenter(),l=e.getTerminal(t);if(l==null)return i;var u=l.port;if(!u||!this.hasPort(u))return i;var c=this.getPort(u);if(!c||!c.group)return i;var h=this.getPortsPosition(c.group),d=h[u].position,g=O.create(d).translate(r.getOrigin()),f=this.getAngle();return f&&g.rotate(-f,i),g}},{key:"fit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getChildren()||[],r=t.filter(function(g){return g.isNode()});if(r.length===0)return this;this.startBatch("fit-embeds",e),e.deep&&r.forEach(function(g){return g.fit(e)});var i=ce.getCellsBBox(r),l=i.x,u=i.y,c=i.width,h=i.height,d=H.normalizeSides(e.padding);return l-=d.left,u-=d.top,c+=d.left+d.right,h+=d.bottom+d.top,this.store.set({position:{x:l,y:u},size:{width:c,height:h}},e),this.stopBatch("fit-embeds"),this}},{key:"getDefaultPortContainerMarkup",value:function(){return this.store.get("defaultPortContainerMarkup")||ie.getPortContainerMarkup()}},{key:"getPortContainerMarkup",value:function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}},{key:"setPortContainerMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portContainerMarkup",ie.clone(e),t),this}},{key:"getDefaultPortMarkup",value:function(){return this.store.get("defaultPortMarkup")||ie.getPortMarkup()}},{key:"getPortMarkup",value:function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}},{key:"setPortMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portMarkup",ie.clone(e),t),this}},{key:"getDefaultPortLabelMarkup",value:function(){return this.store.get("defaultPortLabelMarkup")||ie.getPortLabelMarkup()}},{key:"getPortLabelMarkup",value:function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}},{key:"setPortLabelMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portLabelMarkup",ie.clone(e),t),this}},{key:"getPorts",value:function(){return P.cloneDeep(this.ports.items)}},{key:"getPortsByGroup",value:function(e){return this.getPorts().filter(function(t){return t.group===e})}},{key:"getPort",value:function(e){return P.cloneDeep(this.ports.items.find(function(t){return t.id&&t.id===e}))}},{key:"getPortAt",value:function(e){return this.ports.items[e]||null}},{key:"hasPorts",value:function(){return this.ports.items.length>0}},{key:"hasPort",value:function(e){return this.getPortIndex(e)!==-1}},{key:"getPortIndex",value:function(e){var t=typeof e=="string"?e:e.id;return t!=null?this.ports.items.findIndex(function(r){return r.id===t}):-1}},{key:"getPortsPosition",value:function(e){var t=this.getSize(),r=this.port.getPortsLayoutByGroup(e,new U(0,0,t.width,t.height));return r.reduce(function(i,l){var u=l.portLayout;return i[l.portId]={position:Object.assign({},u.position),angle:u.angle||0},i},{})}},{key:"getPortProp",value:function(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}},{key:"setPortProp",value:function(e,t,r,i){if(typeof t=="string"||Array.isArray(t)){var l=this.prefixPortPath(e,t),u=r;return this.setPropByPath(l,u,i)}var c=this.prefixPortPath(e),h=t;return this.setPropByPath(c,h,r)}},{key:"removePortProp",value:function(e,t,r){return typeof t=="string"||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),r):this.removePropByPath(this.prefixPortPath(e),t)}},{key:"portProp",value:function(e,t,r,i){return t==null?this.getPortProp(e):typeof t=="string"||Array.isArray(t)?arguments.length===2?this.getPortProp(e,t):r==null?this.removePortProp(e,t,i):this.setPortProp(e,t,r,i):this.setPortProp(e,t,r)}},{key:"prefixPortPath",value:function(e,t){var r=this.getPortIndex(e);if(r===-1)throw new Error('Unable to find port with id: "'.concat(e,'"'));return t==null||t===""?["ports","items","".concat(r)]:Array.isArray(t)?["ports","items","".concat(r)].concat(Object(W.a)(t)):"ports/items/".concat(r,"/").concat(t)}},{key:"addPort",value:function(e,t){var r=Object(W.a)(this.ports.items);return r.push(e),this.setPropByPath("ports/items",r,t),this}},{key:"addPorts",value:function(e,t){return this.setPropByPath("ports/items",[].concat(Object(W.a)(this.ports.items),Object(W.a)(e)),t),this}},{key:"removePort",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePortAt(this.getPortIndex(e),t)}},{key:"removePortAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e>=0){var r=Object(W.a)(this.ports.items);r.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",r,t)}return this}},{key:"removePorts",value:function(e,t){var r;if(Array.isArray(e)){if(r=t||{},e.length){r.rewrite=!0;var i=Object(W.a)(this.ports.items),l=i.filter(function(u){return!e.some(function(c){var h=typeof c=="string"?c:c.id;return u.id===h})});this.setPropByPath("ports/items",l,r)}}else r=e||{},r.rewrite=!0,this.setPropByPath("ports/items",[],r);return this}},{key:"getParsedPorts",value:function(){return this.port.getPorts()}},{key:"getParsedGroups",value:function(){return this.port.groups}},{key:"getPortsLayoutByGroup",value:function(e,t){return this.port.getPortsLayoutByGroup(e,t)}},{key:"initPorts",value:function(){var e=this;this.updatePortData(),this.on("change:ports",function(){e.processRemovedPort(),e.updatePortData()})}},{key:"processRemovedPort",value:function(){var e=this.ports,t={};e.items.forEach(function(h){h.id&&(t[h.id]=!0)});var r={},i=this.store.getPrevious("ports")||{items:[]};i.items.forEach(function(h){h.id&&!t[h.id]&&(r[h.id]=!0)});var l=this.model;if(l&&!P.isEmpty(r)){var u=l.getConnectedEdges(this,{incoming:!0});u.forEach(function(h){var d=h.getTargetPortId();d&&r[d]&&h.remove()});var c=l.getConnectedEdges(this,{outgoing:!0});c.forEach(function(h){var d=h.getSourcePortId();d&&r[d]&&h.remove()})}}},{key:"validatePorts",value:function(){var e=this,t={},r=[];return this.ports.items.forEach(function(i){typeof i!="object"&&r.push("Invalid port ".concat(i,".")),i.id==null&&(i.id=e.generatePortId()),t[i.id]&&r.push("Duplicitied port id."),t[i.id]=!0}),r}},{key:"generatePortId",value:function(){return J.uuid()}},{key:"updatePortData",value:function(){var e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));var t=this.port?this.port.getPorts():null;this.port=new Bd(this.ports);var r=this.port.getPorts(),i=t?r.filter(function(u){if(!t.find(function(c){return c.id===u.id}))return u}):Object(W.a)(r),l=t?t.filter(function(u){if(!r.find(function(c){return c.id===u.id}))return u}):[];i.length>0&&this.notify("ports:added",{added:i,cell:this,node:this}),l.length>0&&this.notify("ports:removed",{removed:l,cell:this,node:this})}},{key:"portContainerMarkup",get:function(){return this.getPortContainerMarkup()},set:function(e){this.setPortContainerMarkup(e)}},{key:"portMarkup",get:function(){return this.getPortMarkup()},set:function(e){this.setPortMarkup(e)}},{key:"portLabelMarkup",get:function(){return this.getPortLabelMarkup()},set:function(e){this.setPortLabelMarkup(e)}},{key:"ports",get:function(){var e=this.store.get("ports",{items:[]});return e.items==null&&(e.items=[]),e}}]),a}(ce);Oe.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(o){o.registry=me.create({type:"node",process:function(a,n){if(sn.exist(a,!0))throw new Error("Node with name '".concat(a,"' was registered by anthor Edge"));if(typeof n=="function")return n.config({shape:a}),n;var e=o,t=n.inherit,r=yr(n,["inherit"]);if(t)if(typeof t=="string"){var i=this.get(t);i==null?this.onNotFound(t,"inherited"):e=i}else e=t;r.constructorName==null&&(r.constructorName=a);var l=e.define.call(e,r);return l.config({shape:a}),l}}),sn.setNodeRegistry(o.registry)}(Oe||(Oe={})),function(o){o.config({propHooks:function(a){var n=a.ports,e=yr(a,["ports"]);return n&&(e.ports=Array.isArray(n)?{items:n}:n),e}})}(Oe||(Oe={})),function(o){var s=0;function a(t){return t?J.pascalCase(t):(s+=1,"CustomNode".concat(s))}function n(t){var r=t.constructorName,i=yr(t,["constructorName"]),l=P.createClass(a(r||i.shape),this);return l.config(i),i.shape&&o.registry.register(i.shape,l),l}o.define=n;function e(t){var r=t.shape||"rect",i=o.registry.get(r);return i?new i(t):o.registry.onNotFound(r)}o.create=e}(Oe||(Oe={}));var br=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},ke=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.a)(this,a),s.call(this,n)}return Object(F.a)(a,[{key:"preprocess",value:function(e,t){var r=e.source,i=e.sourceCell,l=e.sourcePort,u=e.sourcePoint,c=e.target,h=e.targetCell,d=e.targetPort,g=e.targetPoint,f=br(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),v=f,p=function(A){return typeof A=="string"||typeof A=="number"};if(r!=null)if(r instanceof ce)v.source={cell:r.id};else if(p(r))v.source={cell:r};else if(r instanceof O)v.source=r.toJSON();else if(Array.isArray(r))v.source={x:r[0],y:r[1]};else{var C=r.cell;C instanceof ce?v.source=Object.assign(Object.assign({},r),{cell:C.id}):v.source=r}if(i!=null||l!=null){var b=v.source;if(i!=null){var y=p(i)?i:i.id;b?b.cell=y:b=v.source={cell:y}}l!=null&&b&&(b.port=l)}else u!=null&&(v.source=O.create(u).toJSON());if(c!=null)if(c instanceof ce)v.target={cell:c.id};else if(p(c))v.target={cell:c};else if(c instanceof O)v.target=c.toJSON();else if(Array.isArray(c))v.target={x:c[0],y:c[1]};else{var w=c.cell;w instanceof ce?v.target=Object.assign(Object.assign({},c),{cell:w.id}):v.target=c}if(h!=null||d!=null){var x=v.target;if(h!=null){var k=p(h)?h:h.id;x?x.cell=k:x=v.target={cell:k}}d!=null&&x&&(x.port=d)}else g!=null&&(v.target=O.create(g).toJSON());return Object(_.a)(Object(ee.a)(a.prototype),"preprocess",this).call(this,v,t)}},{key:"setup",value:function(){var e=this;Object(_.a)(Object(ee.a)(a.prototype),"setup",this).call(this),this.on("change:labels",function(t){return e.onLabelsChanged(t)}),this.on("change:vertices",function(t){return e.onVertexsChanged(t)})}},{key:"isEdge",value:function(){return!0}},{key:"disconnect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}},{key:"getSource",value:function(){return this.getTerminal("source")}},{key:"getSourceCellId",value:function(){return this.source.cell}},{key:"getSourcePortId",value:function(){return this.source.port}},{key:"setSource",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("source",e,t,r)}},{key:"getTarget",value:function(){return this.getTerminal("target")}},{key:"getTargetCellId",value:function(){return this.target.cell}},{key:"getTargetPortId",value:function(){return this.target.port}},{key:"setTarget",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("target",e,t,r)}},{key:"getTerminal",value:function(e){return Object.assign({},this.store.get(e))}},{key:"setTerminal",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t instanceof ce)return this.store.set(e,P.merge({},r,{cell:t.id}),i),this;var l=t;return t instanceof O||l.x!=null&&l.y!=null?(this.store.set(e,P.merge({},r,{x:l.x,y:l.y}),i),this):(this.store.set(e,P.cloneDeep(t),i),this)}},{key:"getSourcePoint",value:function(){return this.getTerminalPoint("source")}},{key:"getTargetPoint",value:function(){return this.getTerminalPoint("target")}},{key:"getTerminalPoint",value:function(e){var t=this[e];if(O.isPointLike(t))return O.create(t);var r=this.getTerminalCell(e);return r?r.getConnectionPoint(this,e):new O}},{key:"getSourceCell",value:function(){return this.getTerminalCell("source")}},{key:"getTargetCell",value:function(){return this.getTerminalCell("target")}},{key:"getTerminalCell",value:function(e){if(this.model){var t=e==="source"?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}},{key:"getSourceNode",value:function(){return this.getTerminalNode("source")}},{key:"getTargetNode",value:function(){return this.getTerminalNode("target")}},{key:"getTerminalNode",value:function(e){for(var t=this,r={};t&&t.isEdge();){if(r[t.id])return null;r[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}},{key:"getRouter",value:function(){return this.store.get("router")}},{key:"setRouter",value:function(e,t,r){return typeof e=="object"?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},r),this}},{key:"removeRouter",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("router",e),this}},{key:"getConnector",value:function(){return this.store.get("connector")}},{key:"setConnector",value:function(e,t,r){return typeof e=="object"?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},r),this}},{key:"removeConnector",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("connector",e)}},{key:"getStrategy",value:function(){return this.store.get("strategy")}},{key:"setStrategy",value:function(e,t,r){return typeof e=="object"?this.store.set("strategy",e,t):this.store.set("strategy",{name:e,args:t},r),this}},{key:"removeStrategy",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("strategy",e)}},{key:"getDefaultLabel",value:function(){var e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return P.cloneDeep(t)}},{key:"getLabels",value:function(){var e=this;return Object(W.a)(this.store.get("labels",[])).map(function(t){return e.parseLabel(t)})}},{key:"setLabels",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("labels",Array.isArray(e)?e:[e],t),this}},{key:"insertLabel",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getLabels(),l=i.length,u=t!=null&&isFinite(t)?t:l;return u<0&&(u=l+u+1),i.splice(u,0,this.parseLabel(e)),this.setLabels(i,r)}},{key:"appendLabel",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertLabel(e,-1,t)}},{key:"getLabelAt",value:function(e){var t=this.getLabels();return e!=null&&isFinite(e)?this.parseLabel(t[e]):null}},{key:"setLabelAt",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null&&isFinite(e)){var i=this.getLabels();i[e]=this.parseLabel(t),this.setLabels(i,r)}return this}},{key:"removeLabelAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getLabels(),i=e!=null&&isFinite(e)?e:-1,l=r.splice(i,1);return this.setLabels(r,t),l.length?l[0]:null}},{key:"parseLabel",value:function(e){if(typeof e=="string"){var t=this.constructor;return t.parseStringLabel(e)}return e}},{key:"onLabelsChanged",value:function(e){var t=e.previous,r=e.current,i=t&&r?r.filter(function(u){if(!t.find(function(c){return u===c||P.isEqual(u,c)}))return u}):r?Object(W.a)(r):[],l=t&&r?t.filter(function(u){if(!r.find(function(c){return u===c||P.isEqual(u,c)}))return u}):t?Object(W.a)(t):[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),l.length>0&&this.notify("labels:removed",{removed:l,cell:this,edge:this})}},{key:"getDefaultVertexMarkup",value:function(){return this.store.get("defaultVertexMarkup")||ie.getEdgeVertexMarkup()}},{key:"getVertexMarkup",value:function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}},{key:"setVertexMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("vertexMarkup",ie.clone(e),t),this}},{key:"getVertices",value:function(){return Object(W.a)(this.store.get("vertices",[]))}},{key:"setVertices",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Array.isArray(e)?e:[e];return this.store.set("vertices",r.map(function(i){return O.toJSON(i)}),t),this}},{key:"insertVertex",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getVertices(),l=i.length,u=t!=null&&isFinite(t)?t:l;return u<0&&(u=l+u+1),i.splice(u,0,O.toJSON(e)),this.setVertices(i,r)}},{key:"appendVertex",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertVertex(e,-1,t)}},{key:"getVertexAt",value:function(e){if(e!=null&&isFinite(e)){var t=this.getVertices();return t[e]}return null}},{key:"setVertexAt",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null&&isFinite(e)){var i=this.getVertices();i[e]=t,this.setVertices(i,r)}return this}},{key:"removeVertexAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getVertices(),i=e!=null&&isFinite(e)?e:-1;return r.splice(i,1),this.setVertices(r,t)}},{key:"onVertexsChanged",value:function(e){var t=e.previous,r=e.current,i=t&&r?r.filter(function(u){if(!t.find(function(c){return O.equals(u,c)}))return u}):r?Object(W.a)(r):[],l=t&&r?t.filter(function(u){if(!r.find(function(c){return O.equals(u,c)}))return u}):t?Object(W.a)(t):[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),l.length>0&&this.notify("vertexs:removed",{removed:l,cell:this,edge:this})}},{key:"getDefaultMarkup",value:function(){return this.store.get("defaultMarkup")||ie.getEdgeMarkup()}},{key:"getMarkup",value:function(){return Object(_.a)(Object(ee.a)(a.prototype),"getMarkup",this).call(this)||this.getDefaultMarkup()}},{key:"getDefaultToolMarkup",value:function(){return this.store.get("defaultToolMarkup")||ie.getEdgeToolMarkup()}},{key:"getToolMarkup",value:function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}},{key:"setToolMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("toolMarkup",e,t),this}},{key:"getDefaultDoubleToolMarkup",value:function(){return this.store.get("defaultDoubleToolMarkup")}},{key:"getDoubleToolMarkup",value:function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}},{key:"setDoubleToolMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("doubleToolMarkup",e,t),this}},{key:"getDefaultArrowheadMarkup",value:function(){return this.store.get("defaultArrowheadMarkup")||ie.getEdgeArrowheadMarkup()}},{key:"getArrowheadMarkup",value:function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}},{key:"setArrowheadMarkup",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("arrowheadMarkup",e,t),this}},{key:"translate",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(function(i){return{x:(i.x||0)+e,y:(i.y||0)+t}},r)}},{key:"scale",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.applyToPoints(function(l){return O.create(l).scale(e,t,r).toJSON()},i)}},{key:"applyToPoints",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={},i=this.getSource(),l=this.getTarget();O.isPointLike(i)&&(r.source=e(i)),O.isPointLike(l)&&(r.target=e(l));var u=this.getVertices();return u.length>0&&(r.vertices=u.map(e)),this.store.set(r,t),this}},{key:"getBBox",value:function(){return this.getPolyline().bbox()}},{key:"getConnectionPoint",value:function(){return this.getPolyline().pointAt(.5)}},{key:"getPolyline",value:function(){var e=[this.getSourcePoint(),this.getTargetPoint()],t=this.getVertices();return t.forEach(function(r){return e.push(O.create(r))}),new Xe(e)}},{key:"updateParent",value:function(e){var t=null,r=this.getSourceCell(),i=this.getTargetCell(),l=this.getParent();return r&&i&&(r===i||r.isDescendantOf(i)?t=i:i.isDescendantOf(r)?t=r:t=ce.getCommonAncestor(r,i)),l&&(!t||t.id!==l.id)&&l.unembed(this,e),t&&t.embed(this,e),t}},{key:"hasLoop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getSource(),r=this.getTarget(),i=t.cell,l=r.cell;if(!i||!l)return!1;var u=i===l;if(!u&&e.deep&&this._model){var c=this.getSourceCell(),h=this.getTargetCell();c&&h&&(u=c.isAncestorOf(h,e)||h.isAncestorOf(c,e))}return u}},{key:"getFragmentAncestor",value:function(){var e=[this,this.getSourceNode(),this.getTargetNode()].filter(function(t){return t!=null});return this.getCommonAncestor.apply(this,Object(W.a)(e))}},{key:"isFragmentDescendantOf",value:function(e){var t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}},{key:"source",get:function(){return this.getSource()},set:function(e){this.setSource(e)}},{key:"target",get:function(){return this.getTarget()},set:function(e){this.setTarget(e)}},{key:"router",get:function(){return this.getRouter()},set:function(e){e==null?this.removeRouter():this.setRouter(e)}},{key:"connector",get:function(){return this.getConnector()},set:function(e){e==null?this.removeConnector():this.setConnector(e)}},{key:"strategy",get:function(){return this.getStrategy()},set:function(e){e==null?this.removeStrategy():this.setStrategy(e)}},{key:"labels",get:function(){return this.getLabels()},set:function(e){this.setLabels(e)}},{key:"vertexMarkup",get:function(){return this.getVertexMarkup()},set:function(e){this.setVertexMarkup(e)}},{key:"vertices",get:function(){return this.getVertices()},set:function(e){this.setVertices(e)}},{key:"toolMarkup",get:function(){return this.getToolMarkup()},set:function(e){this.setToolMarkup(e)}},{key:"doubleToolMarkup",get:function(){return this.getDoubleToolMarkup()},set:function(e){this.setDoubleToolMarkup(e)}},{key:"arrowheadMarkup",get:function(){return this.getArrowheadMarkup()},set:function(e){this.setArrowheadMarkup(e)}}]),a}(ce);ke.defaults={},function(o){function s(a,n){var e=a,t=n;return e.cell===t.cell?e.port===t.port||e.port==null&&t.port==null:!1}o.equalTerminals=s}(ke||(ke={})),function(o){o.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function s(a){return{attrs:{label:{text:a}}}}o.parseStringLabel=s}(ke||(ke={})),function(o){o.registry=me.create({type:"edge",process:function(a,n){if(sn.exist(a,!1))throw new Error("Edge with name '".concat(a,"' was registered by anthor Node"));if(typeof n=="function")return n.config({shape:a}),n;var e=o,t=n.inherit,r=br(n,["inherit"]),i=this.get(t||"edge");i==null&&t?this.onNotFound(t,"inherited"):e=i,r.constructorName==null&&(r.constructorName=a);var l=e.define.call(e,r);return l.config({shape:a}),l}}),sn.setEdgeRegistry(o.registry)}(ke||(ke={})),function(o){var s="basic.edge";o.config({shape:s,propHooks:function(n){var e=n.label,t=br(n,["label"]);if(e){t.labels==null&&(t.labels=[]);var r=typeof e=="string"?o.parseStringLabel(e):e;t.labels.push(r)}return t}}),o.registry.register(s,o)}(ke||(ke={})),function(o){var s=0;function a(t){return t?J.pascalCase(t):(s+=1,"CustomEdge".concat(s))}function n(t){var r=t.constructorName,i=br(t,["constructorName"]),l=P.createClass(a(r||i.shape),this);return l.config(i),i.shape&&o.registry.register(i.shape,l),l}o.define=n;function e(t){var r=t.shape||"edge",i=o.registry.get(r);return i?new i(t):o.registry.onNotFound(r)}o.create=e}(ke||(ke={}));var $o=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(L.a)(this,a),e=s.call(this),e.length=0,e.comparator=t.comparator||"zIndex",e.clean(),n&&e.reset(n,{silent:!0}),e}return Object(F.a)(a,[{key:"toJSON",value:function(){return this.cells.map(function(e){return e.toJSON()})}},{key:"add",value:function(e,t,r){var i=this,l,u;typeof t=="number"?(l=t,u=Object.assign({merge:!1},r)):(l=this.length,u=Object.assign({merge:!1},t)),l>this.length&&(l=this.length),l<0&&(l+=this.length+1);var c=Array.isArray(e)?e:[e],h=this.comparator&&typeof t!="number"&&u.sort!==!1,d=this.comparator||null,g=!1,f=[],v=[];if(c.forEach(function(C){var b=i.get(C);b?u.merge&&!C.isSameStore(b)&&(b.setProp(C.getProp(),r),v.push(b),h&&!g&&(d==null||typeof d=="function"?g=b.hasChanged():typeof d=="string"?g=b.hasChanged(d):g=d.some(function(y){return b.hasChanged(y)}))):(f.push(C),i.reference(C))}),f.length){var p;h&&(g=!0),(p=this.cells).splice.apply(p,[l,0].concat(f)),this.length=this.cells.length}return g&&this.sort({silent:!0}),u.silent||(f.forEach(function(C,b){var y={cell:C,index:l+b,options:u};i.trigger("added",y),u.dryrun||C.notify("added",Object.assign({},y))}),g&&this.trigger("sorted"),(f.length||v.length)&&this.trigger("updated",{added:f,merged:v,removed:[],options:u})),this}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Array.isArray(e)?e:[e],i=this.removeCells(r,t);return!t.silent&&i.length>0&&this.trigger("updated",{options:t,removed:i,added:[],merged:[]}),Array.isArray(e)?i:i[0]}},{key:"removeCells",value:function(e,t){for(var r=[],i=0;i<e.length;i+=1){var l=this.get(e[i]);if(l==null)continue;var u=this.cells.indexOf(l);this.cells.splice(u,1),this.length-=1,delete this.map[l.id],r.push(l),this.unreference(l),t.dryrun||l.remove(),t.silent||(this.trigger("removed",{cell:l,index:u,options:t}),t.dryrun||l.notify("removed",{cell:l,index:u,options:t}))}return r}},{key:"reset",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.cells.slice();if(i.forEach(function(h){return t.unreference(h)}),this.clean(),this.add(e,Object.assign({silent:!0},r)),!r.silent){var l=this.cells.slice();this.trigger("reseted",{options:r,previous:i,current:l});var u=[],c=[];l.forEach(function(h){var d=i.some(function(g){return g.id===h.id});d||u.push(h)}),i.forEach(function(h){var d=l.some(function(g){return g.id===h.id});d||c.push(h)}),this.trigger("updated",{options:r,added:u,removed:c,merged:[]})}return this}},{key:"push",value:function(e,t){return this.add(e,this.length,t)}},{key:"pop",value:function(e){var t=this.at(this.length-1);return this.remove(t,e)}},{key:"unshift",value:function(e,t){return this.add(e,0,t)}},{key:"shift",value:function(e){var t=this.at(0);return this.remove(t,e)}},{key:"get",value:function(e){if(e==null)return null;var t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}},{key:"has",value:function(e){return this.get(e)!=null}},{key:"at",value:function(e){return e<0&&(e+=this.length),this.cells[e]||null}},{key:"first",value:function(){return this.at(0)}},{key:"last",value:function(){return this.at(-1)}},{key:"indexOf",value:function(e){return this.cells.indexOf(e)}},{key:"toArray",value:function(){return this.cells.slice()}},{key:"sort",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.comparator!=null&&(this.cells=pe.sortBy(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}},{key:"clone",value:function(){var e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}},{key:"reference",value:function(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this),e.on("change:zIndex",this.onCellZIndexChanged,this)}},{key:"unreference",value:function(e){e.off("*",this.notifyCellEvent,this),e.off("change:zIndex",this.onCellZIndexChanged,this),delete this.map[e.id]}},{key:"notifyCellEvent",value:function(e,t){var r=t.cell;this.trigger("cell:".concat(e),t),r&&(r.isNode()?this.trigger("node:".concat(e),Object.assign(Object.assign({},t),{node:r})):r.isEdge()&&this.trigger("edge:".concat(e),Object.assign(Object.assign({},t),{edge:r})))}},{key:"onCellZIndexChanged",value:function(e){this.sort(e.options)}},{key:"clean",value:function(){this.length=0,this.cells=[],this.map={}}}]),a}(Pe),Ke=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Object(L.a)(this,a),n=s.call(this),n.batches={},n.addings=new WeakMap,n.nodes={},n.edges={},n.outgoings={},n.incomings={},n.collection=new $o(e),n.setup(),n}return Object(F.a)(a,[{key:"notify",value:function(e,t){this.trigger(e,t);var r=this.graph;return r&&(e==="sorted"||e==="reseted"||e==="updated"?r.trigger("model:".concat(e),t):r.trigger(e,t)),this}},{key:"setup",value:function(){var e=this,t=this.collection;t.on("sorted",function(){return e.notify("sorted",null)}),t.on("updated",function(r){return e.notify("updated",r)}),t.on("cell:change:zIndex",function(){return e.sortOnChangeZ()}),t.on("added",function(r){var i=r.cell;e.onCellAdded(i)}),t.on("removed",function(r){var i=r.cell;e.onCellRemoved(i,r.options),e.notify("cell:removed",r),i.isNode()?e.notify("node:removed",Object.assign(Object.assign({},r),{node:i})):i.isEdge()&&e.notify("edge:removed",Object.assign(Object.assign({},r),{edge:i}))}),t.on("reseted",function(r){e.onReset(r.current),e.notify("reseted",r)}),t.on("edge:change:source",function(r){var i=r.edge;return e.onEdgeTerminalChanged(i,"source")}),t.on("edge:change:target",function(r){var i=r.edge;e.onEdgeTerminalChanged(i,"target")})}},{key:"sortOnChangeZ",value:function(){this.collection.sort()}},{key:"onCellAdded",value:function(e){var t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}},{key:"onCellRemoved",value:function(e,t){var r=e.id;if(e.isEdge()){delete this.edges[r];var i=e.getSource(),l=e.getTarget();if(i&&i.cell){var u=this.outgoings[i.cell],c=u?u.indexOf(r):-1;c>=0&&(u.splice(c,1),u.length===0&&delete this.outgoings[i.cell])}if(l&&l.cell){var h=this.incomings[l.cell],d=h?h.indexOf(r):-1;d>=0&&(h.splice(d,1),h.length===0&&delete this.incomings[l.cell])}}else delete this.nodes[r];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}},{key:"onReset",value:function(e){var t=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(function(r){return t.onCellAdded(r)})}},{key:"onEdgeTerminalChanged",value:function(e,t){var r=t==="source"?this.outgoings:this.incomings,i=e.previous(t);if(i&&i.cell){var l=r[i.cell],u=l?l.indexOf(e.id):-1;u>=0&&(l.splice(u,1),l.length===0&&delete r[i.cell])}var c=e.getTerminal(t);if(c&&c.cell){var h=r[c.cell]||[],d=h.indexOf(e.id);d===-1&&h.push(e.id),r[c.cell]=h}}},{key:"prepareCell",value:function(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),e.zIndex==null&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}},{key:"resetCells",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.map(function(i){return t.prepareCell(i,Object.assign(Object.assign({},r),{dryrun:!0}))}),this.collection.reset(e,r),e.map(function(i){return t.prepareCell(i,{options:r})}),this}},{key:"clear",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.getCells();if(t.length===0)return this;var r=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",function(){for(var i=t.sort(function(u,c){var h=u.isEdge()?1:2,d=c.isEdge()?1:2;return h-d});i.length>0;){var l=i.shift();l&&l.remove(r)}},r),this}},{key:"addNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e instanceof Oe?e:this.createNode(e);return this.addCell(r,t),r}},{key:"createNode",value:function(e){return Oe.create(e)}},{key:"addEdge",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e instanceof ke?e:this.createEdge(e);return this.addCell(r,t),r}},{key:"createEdge",value:function(e){return ke.create(e)}},{key:"addCell",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)?this.addCells(e,r):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,r),r),e.eachChild(function(i){return t.addCell(i,r)}),this.addings.delete(e)),this)}},{key:"addCells",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.length;if(i===0)return this;var l=Object.assign(Object.assign({},r),{position:i-1,maxPosition:i-1});return this.startBatch("add",l),e.forEach(function(u){t.addCell(u,l),l.position-=1}),this.stopBatch("add",l),this}},{key:"removeCell",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=typeof e=="string"?this.getCell(e):e;return r&&this.has(r)?this.collection.remove(r,t):null}},{key:"removeCells",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.length?this.batchUpdate("remove",function(){return e.map(function(i){return t.removeCell(i,r)})}):[]}},{key:"removeConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getConnectedEdges(e);return r.forEach(function(i){i.remove(t)}),r}},{key:"disconnectConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=typeof e=="string"?e:e.id;this.getConnectedEdges(e).forEach(function(i){var l=i.getSourceCell(),u=i.getTargetCell();l&&l.id===r&&i.setSource({x:0,y:0},t),u&&u.id===r&&i.setTarget({x:0,y:0},t)})}},{key:"has",value:function(e){return this.collection.has(e)}},{key:"total",value:function(){return this.collection.length}},{key:"indexOf",value:function(e){return this.collection.indexOf(e)}},{key:"getCell",value:function(e){return this.collection.get(e)}},{key:"getCells",value:function(){return this.collection.toArray()}},{key:"getFirstCell",value:function(){return this.collection.first()}},{key:"getLastCell",value:function(){return this.collection.last()}},{key:"getMinZIndex",value:function(){var e=this.collection.first();return e&&e.getZIndex()||0}},{key:"getMaxZIndex",value:function(){var e=this.collection.last();return e&&e.getZIndex()||0}},{key:"getCellsFromCache",value:function(e){var t=this;return e?Object.keys(e).map(function(r){return t.getCell(r)}).filter(function(r){return r!=null}):[]}},{key:"getNodes",value:function(){return this.getCellsFromCache(this.nodes)}},{key:"getEdges",value:function(){return this.getCellsFromCache(this.edges)}},{key:"getOutgoingEdges",value:function(e){var t=this,r=typeof e=="string"?e:e.id,i=this.outgoings[r];return i?i.map(function(l){return t.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getIncomingEdges",value:function(e){var t=this,r=typeof e=="string"?e:e.id,i=this.incomings[r];return i?i.map(function(l){return t.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getConnectedEdges",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[],l=typeof e=="string"?this.getCell(e):e;if(l==null)return i;var u={},c=r.indirect,h=r.incoming,d=r.outgoing;h==null&&d==null&&(h=d=!0);var g=function C(b,y){var w=y?t.getOutgoingEdges(b):t.getIncomingEdges(b);if(w!=null&&w.forEach(function(k){if(u[k.id])return;i.push(k),u[k.id]=!0,c&&(h&&C(k,!1),d&&C(k,!0))}),c&&b.isEdge()){var x=y?b.getTargetCell():b.getSourceCell();x&&x.isEdge()&&(u[x.id]||(i.push(x),C(x,y)))}};if(d&&g(l,!0),h&&g(l,!1),r.deep){var f=l.getDescendants({deep:!0}),v={};f.forEach(function(C){C.isNode()&&(v[C.id]=!0)});var p=function(b,y){var w=y?t.getOutgoingEdges(b.id):t.getIncomingEdges(b.id);w!=null&&w.forEach(function(x){if(!u[x.id]){var k=x.getSourceCell(),M=x.getTargetCell();if(!r.enclosed&&k&&v[k.id]&&M&&v[M.id])return;i.push(x),u[x.id]=!0}})};f.forEach(function(C){if(C.isEdge())return;d&&p(C,!0),h&&p(C,!1)})}return i}},{key:"isBoundary",value:function(e,t){var r=typeof e=="string"?this.getCell(e):e,i=t?this.getIncomingEdges(r):this.getOutgoingEdges(r);return i==null||i.length===0}},{key:"getBoundaryNodes",value:function(e){var t=this,r=[];return Object.keys(this.nodes).forEach(function(i){if(t.isBoundary(i,e)){var l=t.getCell(i);l&&r.push(l)}}),r}},{key:"getRoots",value:function(){return this.getBoundaryNodes(!0)}},{key:"getLeafs",value:function(){return this.getBoundaryNodes(!1)}},{key:"isRoot",value:function(e){return this.isBoundary(e,!0)}},{key:"isLeaf",value:function(e){return this.isBoundary(e,!1)}},{key:"getNeighbors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.incoming,i=t.outgoing;r==null&&i==null&&(r=i=!0);var l=this.getConnectedEdges(e,t),u=l.reduce(function(d,g){var f=g.hasLoop(t),v=g.getSourceCell(),p=g.getTargetCell();return r&&v&&v.isNode()&&!d[v.id]&&((f||v!==e&&(!t.deep||!v.isDescendantOf(e)))&&(d[v.id]=v)),i&&p&&p.isNode()&&!d[p.id]&&((f||p!==e&&(!t.deep||!p.isDescendantOf(e)))&&(d[p.id]=p)),d},{});if(e.isEdge()){if(r){var c=e.getSourceCell();c&&c.isNode()&&!u[c.id]&&(u[c.id]=c)}if(i){var h=e.getTargetCell();h&&h.isNode()&&!u[h.id]&&(u[h.id]=h)}}return Object.keys(u).map(function(d){return u[d]})}},{key:"isNeighbor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.incoming,l=r.outgoing;return i==null&&l==null&&(i=l=!0),this.getConnectedEdges(e,r).some(function(u){var c=u.getSourceCell(),h=u.getTargetCell();if(i&&c&&c.id===t.id)return!0;if(l&&h&&h.id===t.id)return!0})}},{key:"getSuccessors",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return this.search(e,function(l,u){l!==e&&t.matchDistance(u,r.distance)&&i.push(l)},Object.assign(Object.assign({},r),{outgoing:!0})),i}},{key:"isSuccessor",value:function(e,t){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(e,function(u,c){if(u===t&&u!==e&&r.matchDistance(c,i.distance))return l=!0,!1},Object.assign(Object.assign({},i),{outgoing:!0})),l}},{key:"getPredecessors",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return this.search(e,function(l,u){l!==e&&t.matchDistance(u,r.distance)&&i.push(l)},Object.assign(Object.assign({},r),{incoming:!0})),i}},{key:"isPredecessor",value:function(e,t){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(e,function(u,c){if(u===t&&u!==e&&r.matchDistance(c,i.distance))return l=!0,!1},Object.assign(Object.assign({},i),{incoming:!0})),l}},{key:"matchDistance",value:function(e,t){return t==null?!0:typeof t=="function"?t(e):Array.isArray(t)&&t.includes(e)?!0:e===t}},{key:"getCommonAncestor",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.forEach(function(l){l&&(Array.isArray(l)?e.push.apply(e,Object(W.a)(l)):e.push(l))}),ce.getCommonAncestor.apply(ce,e)}},{key:"getSubGraph",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[],l={},u=[],c=[],h=function(g){l[g.id]||(i.push(g),l[g.id]=g,g.isEdge()&&c.push(g),g.isNode()&&u.push(g))};return e.forEach(function(d){if(h(d),r.deep){var g=d.getDescendants({deep:!0});g.forEach(function(f){return h(f)})}}),c.forEach(function(d){var g=d.getSourceCell(),f=d.getTargetCell();g&&!l[g.id]&&(i.push(g),l[g.id]=g,g.isNode()&&u.push(g)),f&&!l[f.id]&&(i.push(f),l[f.id]=f,f.isNode()&&u.push(f))}),u.forEach(function(d){var g=t.getConnectedEdges(d,r);g.forEach(function(f){var v=f.getSourceCell(),p=f.getTargetCell();!l[f.id]&&v&&l[v.id]&&p&&l[p.id]&&(i.push(f),l[f.id]=f)})}),i}},{key:"cloneSubGraph",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getSubGraph(e,t);return this.cloneCells(r)}},{key:"cloneCells",value:function(e){return ce.cloneCells(e)}},{key:"getNodesFromPoint",value:function(e,t){var r=typeof e=="number"?{x:e,y:t||0}:e;return this.getNodes().filter(function(i){return i.getBBox().containsPoint(r)})}},{key:"getNodesInArea",value:function(e,t,r,i,l){var u=typeof e=="number"?new U(e,t,r,i):U.create(e),c=typeof e=="number"?l:t,h=c&&c.strict;return this.getNodes().filter(function(d){var g=d.getBBox();return h?u.containsRect(g):u.isIntersectWithRect(g)})}},{key:"getNodesUnderNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.getBBox(),i=t.by==null||t.by==="bbox"?this.getNodesInArea(r):this.getNodesFromPoint(r[t.by]);return i.filter(function(l){return e.id!==l.id&&!l.isDescendantOf(e)})}},{key:"getAllCellsBBox",value:function(){return this.getCellsBBox(this.getCells())}},{key:"getCellsBBox",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ce.getCellsBBox(e,t)}},{key:"search",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.breadthFirst?this.breadthFirstSearch(e,t,r):this.depthFirstSearch(e,t,r)}},{key:"breadthFirstSearch",value:function(e,t){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],u={},c={};l.push(e),c[e.id]=0;for(var h=function(){var f=l.shift();if(f==null||u[f.id])return"continue";if(u[f.id]=!0,R.call(t,r,f,c[f.id])===!1)return"continue";var v=r.getNeighbors(f,i);v.forEach(function(p){c[p.id]=c[f.id]+1,l.push(p)})};l.length>0;){var d=h();if(d==="continue")continue}}},{key:"depthFirstSearch",value:function(e,t){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],u={},c={};l.push(e),c[e.id]=0;for(var h=function(){var f=l.pop();if(f==null||u[f.id])return"continue";if(u[f.id]=!0,R.call(t,r,f,c[f.id])===!1)return"continue";var v=r.getNeighbors(f,i),p=l.length;v.forEach(function(C){c[C.id]=c[f.id]+1,l.splice(p,0,C)})};l.length>0;){var d=h();if(d==="continue")continue}}},{key:"getShortestPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i={};this.getEdges().forEach(function(d){var g=d.getSourceCellId(),f=d.getTargetCellId();g&&f&&(i[g]||(i[g]=[]),i[f]||(i[f]=[]),i[g].push(f),r.directed||i[f].push(g))});var l=typeof e=="string"?e:e.id,u=ui.run(i,l,r.weight),c=[],h=typeof t=="string"?t:t.id;for(u[h]&&c.push(h);h=u[h];)c.unshift(h);return c}},{key:"translate",value:function(e,t,r){return this.getCells().filter(function(i){return!i.hasParent()}).forEach(function(i){return i.translate(e,t,r)}),this}},{key:"resize",value:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)}},{key:"resizeCells",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getCellsBBox(r);if(l){var u=Math.max(e/l.width,0),c=Math.max(t/l.height,0),h=l.getOrigin();r.forEach(function(d){return d.scale(u,c,h,i)})}return this}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a.toJSON(this.getCells(),e)}},{key:"parseJSON",value:function(e){return a.fromJSON(e)}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.parseJSON(e);return this.resetCells(r,t),this}},{key:"startBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}},{key:"batchUpdate",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch(e,r);var i=t();return this.stopBatch(e,r),i}},{key:"hasActiveBatch",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(this.batches),r=Array.isArray(t)?t:[t];return r.some(function(i){return e.batches[i]>0})}}]),a}(Pe);(function(o){function s(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{cells:n.map(function(t){return t.toJSON(e)})}}o.toJSON=s;function a(n){var e=[];return Array.isArray(n)?e.push.apply(e,Object(W.a)(n)):(n.cells&&e.push.apply(e,Object(W.a)(n.cells)),n.nodes&&n.nodes.forEach(function(t){t.shape==null&&(t.shape="rect"),e.push(t)}),n.edges&&n.edges.forEach(function(t){t.shape==null&&(t.shape="edge"),e.push(t)})),e.map(function(t){var r=t.shape;if(r){if(Oe.registry.exist(r))return Oe.create(t);if(ke.registry.exist(r))return ke.create(t)}throw new Error("The `shape` should be specipied when creating a node/edge instance")})}o.fromJSON=a})(Ke||(Ke={}));var Id=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Dn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.POINT_ROUNDING=2,n.markerCache={},n}return Object(F.a)(a,[{key:"getContainerClassName",value:function(){return[Object(_.a)(Object(ee.a)(a.prototype),"getContainerClassName",this).call(this),this.prefixClassName("edge")].join(" ")}},{key:"isEdgeView",value:function(){return!0}},{key:"confirmUpdate",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e;if(this.hasAction(i,"source")){if(!this.updateTerminalProperties("source"))return i;i=this.removeAction(i,"source")}if(this.hasAction(i,"target")){if(!this.updateTerminalProperties("target"))return i;i=this.removeAction(i,"target")}var l=this.graph,u=this.sourceView,c=this.targetView;return l&&(u&&!l.renderer.isViewMounted(u)||c&&!l.renderer.isViewMounted(c))?i:this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","vertices","labels","tools","widget"]),i):(i=this.handleAction(i,"vertices",function(){return t.renderVertexMarkers()}),i=this.handleAction(i,"update",function(){return t.update(null,r)}),i=this.handleAction(i,"labels",function(){return t.onLabelsChange(r)}),i=this.handleAction(i,"tools",function(){t.renderTools(),t.updateToolsPosition()}),i=this.handleAction(i,"widget",function(){return t.renderExternalTools()}),i)}},{key:"onLabelsChange",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}},{key:"shouldRerenderLabels",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell.previous("labels");if(t==null)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],i=r.length;if(i>1){var l=r[1];if(t[l]){if(i===2)return typeof e.propertyValue=="object"&&P.has(e.propertyValue,"markup");if(r[2]!=="markup")return!1}}}return!0}},{key:"render",value:function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this}},{key:"renderMarkup",value:function(){var e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}},{key:"renderJSONMarkup",value:function(e){var t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}},{key:"renderStringMarkup",value:function(e){var t=this.containers,r=te.createVectors(e);r.forEach(function(i){var l=i.attr("class");l&&(t[J.camelCase(l)]=i.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),E.append(this.container,r.map(function(i){return i.node}))}},{key:"renderLabels",value:function(){var e=this.cell,t=e.getLabels(),r=t.length,i=this.containers.labels;if(this.labelCache={},this.labelSelectors={},r<=0)return i&&i.parentNode&&i.parentNode.removeChild(i),this;i?this.empty(i):(i=E.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),i),this.containers.labels=i);for(var l=0,u=t.length;l<u;l+=1){var c=t[l],h=this.normalizeLabelMarkup(this.parseLabelMarkup(c.markup)),d=void 0,g=void 0;if(h)d=h.node,g=h.selectors;else{var f=e.getDefaultLabel(),v=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup));d=v.node,g=v.selectors}d.setAttribute("data-index","".concat(l)),i.appendChild(d);var p=this.rootSelector;if(g[p])throw new Error("Ambiguous label root selector.");g[p]=d,this.labelCache[l]=d,this.labelSelectors[l]=g}return i.parentNode==null&&this.container.appendChild(i),this.updateLabels(),this.customizeLabels(),this}},{key:"parseLabelMarkup",value:function(e){return e?typeof e=="string"?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}},{key:"parseLabelStringMarkup",value:function(e){for(var t=te.createVectors(e),r=document.createDocumentFragment(),i=0,l=t.length;i<l;i+=1){var u=t[i].node;r.appendChild(u)}return{fragment:r,selectors:{}}}},{key:"normalizeLabelMarkup",value:function(e){if(e==null)return;var t=e.fragment;if(!(t instanceof DocumentFragment)||!t.hasChildNodes())throw new Error("Invalid label markup.");var r,i=t.childNodes;return i.length>1||i[0].nodeName.toUpperCase()!=="G"?r=te.create("g").append(t):r=te.create(i[0]),r.addClass(this.prefixClassName("edge-label")),{node:r.node,selectors:e.selectors}}},{key:"updateLabels",value:function(){if(this.containers.labels)for(var e=this.cell,t=e.labels,r=this.can("edgeLabelMovable"),i=e.getDefaultLabel(),l=0,u=t.length;l<u;l+=1){var c=this.labelCache[l],h=this.labelSelectors[l];c.setAttribute("cursor",r?"move":"default");var d=t[l],g=P.merge({},i.attrs,d.attrs);this.updateAttrs(c,g,{selectors:h,rootBBox:d.size?U.fromSize(d.size):void 0})}}},{key:"mergeLabelAttrs",value:function(e,t,r){if(t===null)return null;if(t===void 0)return r===null?null:r===void 0?void 0:e?r:P.merge({},r);if(e)return P.merge({},r,t)}},{key:"customizeLabels",value:function(){if(this.containers.labels)for(var e=this.cell,t=e.labels,r=0,i=t.length;r<i;r+=1){var l=t[r],u=this.labelCache[r],c=this.labelSelectors[r];this.graph.hook.onEdgeLabelRendered({edge:e,label:l,container:u,selectors:c})}}},{key:"renderTools",value:function(){var e=this.containers.tools;if(e==null)return this;var t=this.cell.toolMarkup,r=this.$(e).empty();if(ie.isStringMarkup(t)){var i=J.template(t),l=te.create(i());if(r.append(l.node),this.toolCache=l.node,this.options.doubleTools){var u,c=this.cell.doubleToolMarkup;ie.isStringMarkup(c)?(i=J.template(c),u=te.create(i())):u=l.clone(),r.append(u.node),this.tool2Cache=u.node}}return this}},{key:"renderExternalTools",value:function(){var e=this.cell.getTools();return this.addTools(e),this}},{key:"renderVertexMarkers",value:function(){var e=this.containers.vertices;if(e==null)return this;var t=this.cell.vertexMarkup,r=this.$(e).empty();if(ie.isStringMarkup(t)){var i=J.template(t);this.cell.getVertices().forEach(function(l,u){r.append(te.create(i(Object.assign({index:u},l))).node)})}return this}},{key:"renderArrowheadMarkers",value:function(){var e=this.containers.arrowheads;if(e==null)return this;var t=this.cell.arrowheadMarkup,r=this.$(e).empty();if(ie.isStringMarkup(t)){var i=J.template(t),l=te.create(i({end:"source"})).node,u=te.create(i({end:"target"})).node;this.containers.sourceArrowhead=l,this.containers.targetArrowhead=u,r.append(l,u)}return this}},{key:"update",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.cleanCache(),this.updateConnection(t);var r=this.cell.getAttrs();return r!=null&&this.updateAttrs(this.container,r,{attrs:e===r?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),t.toolId==null?this.renderExternalTools():this.updateTools(t),this}},{key:"removeRedundantLinearVertices",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell,r=t.getVertices(),i=[this.sourceAnchor].concat(Object(W.a)(r),[this.targetAnchor]),l=i.length,u=new Xe(i);u.simplify({threshold:.01});var c=u.points.map(function(d){return d.toJSON()}),h=c.length;return l===h?0:(t.setVertices(c.slice(1,h-1),e),l-h)}},{key:"updateConnectionPath",value:function(){var e=this.containers;if(e.connection){var t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){var r=this.getConnectionPathData();e.connectionWrap.setAttribute("d",r)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}},{key:"getTerminalView",value:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalAnchor",value:function(e){switch(e){case"source":return O.create(this.sourceAnchor);case"target":return O.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalConnectionPoint",value:function(e){switch(e){case"source":return O.create(this.sourcePoint);case"target":return O.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"getTerminalMagnet",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case"source":if(t.raw)return this.sourceMagnet;var r=this.sourceView;return r?this.sourceMagnet||r.container:null;case"target":if(t.raw)return this.targetMagnet;var i=this.targetView;return i?this.targetMagnet||i.container:null;default:throw new Error("Unknown terminal type '".concat(e,"'"))}}},{key:"updateConnection",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){var r=e.tx||0,i=e.ty||0;this.routePoints=new Xe(this.routePoints).translate(r,i).points,this.translateConnectionPoints(r,i),this.path.translate(r,i)}else{var l=t.getVertices(),u=this.findAnchors(l);this.sourceAnchor=u.source,this.targetAnchor=u.target,this.routePoints=this.findRoutePoints(l);var c=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=c.source,this.targetPoint=c.target;var h=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,h.source||this.sourcePoint,h.target||this.targetPoint)}this.cleanCache()}},{key:"findAnchors",value:function(e){var t=this.cell,r=t.source,i=t.target,l=e[0],u=e[e.length-1];return i.priority&&!r.priority?this.findAnchorsOrdered("target",u,"source",l):this.findAnchorsOrdered("source",l,"target",u)}},{key:"findAnchorsOrdered",value:function(e,t,r,i){var l,u,c,h=this.cell,d=h[e],g=h[r],f=this.getTerminalView(e),v=this.getTerminalView(r),p=this.getTerminalMagnet(e),C=this.getTerminalMagnet(r);if(f){var b;t?b=O.create(t):v?b=C:b=O.create(g),u=this.getAnchor(d.anchor,f,p,b,e)}else u=O.create(d);if(v){var y=O.create(i||u);c=this.getAnchor(g.anchor,v,C,y,r)}else c=O.isPointLike(g)?O.create(g):new O;return l={},Object(q.a)(l,e,u),Object(q.a)(l,r,c),l}},{key:"getAnchor",value:function(e,t,r,i,l){var u=t.isEdgeElement(r),c=this.graph.options.connecting,h=typeof e=="string"?{name:e}:e;if(!h){var d=u?(l==="source"?c.sourceEdgeAnchor:c.targetEdgeAnchor)||c.edgeAnchor:(l==="source"?c.sourceAnchor:c.targetAnchor)||c.anchor;h=typeof d=="string"?{name:d}:d}if(!h)throw new Error("Anchor should be specified.");var g,f=h.name;if(u){var v=rn.registry.get(f);if(typeof v!="function")return rn.registry.onNotFound(f);g=R.call(v,this,t,r,i,h.args||{},l)}else{var p=nn.registry.get(f);if(typeof p!="function")return nn.registry.onNotFound(f);g=R.call(p,this,t,r,i,h.args||{},l)}return g?g.round(this.POINT_ROUNDING):new O}},{key:"findRoutePoints",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.graph.options.connecting.router||At.presets.normal,r=this.cell.getRouter()||t,i;if(typeof r=="function")i=R.call(r,this,e,{},this);else{var l=typeof r=="string"?r:r.name,u=typeof r=="string"?{}:r.args||{},c=l?At.registry.get(l):At.presets.normal;if(typeof c!="function")return At.registry.onNotFound(l);i=R.call(c,this,e,u,this)}return i==null?e.map(function(h){return O.create(h)}):i.map(function(h){return O.create(h)})}},{key:"findConnectionPoints",value:function(e,t,r){var i=this.cell,l=this.graph.options.connecting,u=i.getSource(),c=i.getTarget(),h=this.sourceView,d=this.targetView,g=e[0],f=e[e.length-1],v;if(h&&!h.isEdgeElement(this.sourceMagnet)){var p=this.sourceMagnet||h.container,C=g||r,b=new $(C,t),y=u.connectionPoint||l.sourceConnectionPoint||l.connectionPoint;v=this.getConnectionPoint(y,h,p,b,"source")}else v=t;var w;if(d&&!d.isEdgeElement(this.targetMagnet)){var x=this.targetMagnet||d.container,k=c.connectionPoint||l.targetConnectionPoint||l.connectionPoint,M=f||t,A=new $(M,r);w=this.getConnectionPoint(k,d,x,A,"target")}else w=r;return{source:v,target:w}}},{key:"getConnectionPoint",value:function(e,t,r,i,l){var u=i.end;if(e==null)return u;var c=typeof e=="string"?e:e.name,h=typeof e=="string"?{}:e.args,d=an.registry.get(c);if(typeof d!="function")return an.registry.onNotFound(c);var g=R.call(d,this,i,t,r,h||{},l);return g?g.round(this.POINT_ROUNDING):u}},{key:"updateMarkerAttr",value:function(e){var t=this.cell.getAttrs(),r=".".concat(e,"-marker"),i=t&&t[r];i&&this.updateAttrs(this.container,{},{attrs:Object(q.a)({},r,i),selectors:this.selectors})}},{key:"findMarkerPoints",value:function(e,t,r){var i=this,l=function(x){for(var k=i.cell.getAttrs(),M=Object.keys(k),A=0,S=M.length;A<S;A+=1){var N=k[M[A]];if(N["".concat(x,"Marker")]||N["".concat(x,"-marker")]){var j=N.strokeWidth||N["stroke-width"];if(j)return parseFloat(j);break}}return null},u=e[0],c=e[e.length-1],h=this.containers.sourceMarker,d=this.containers.targetMarker,g=this.markerCache,f,v;if(h){if(this.updateMarkerAttr("source"),g.sourceBBox=g.sourceBBox||E.getBBox(h),g.sourceBBox.width>0){var p=E.scale(h);f=t.clone().move(u||r,g.sourceBBox.width*p.sx*-1)}}else{var C=l("source");C&&(f=t.clone().move(u||r,-C))}if(d){if(this.updateMarkerAttr("target"),g.targetBBox=g.targetBBox||E.getBBox(d),g.targetBBox.width>0){var b=E.scale(d);v=r.clone().move(c||t,g.targetBBox.width*b.sx*-1)}}else{var y=l("target");y&&(v=r.clone().move(c||t,-y))}return g.sourcePoint=f||t.clone(),g.targetPoint=v||r.clone(),{source:f,target:v}}},{key:"findPath",value:function(e,t,r){var i=this.cell.getConnector()||this.graph.options.connecting.connector,l,u,c;if(typeof i=="string"?l=i:(l=i.name,u=i.args),l){var h=zt.registry.get(l);if(typeof h!="function")return zt.registry.onNotFound(l);c=h}else c=zt.presets.normal;var d=R.call(c,this,t,r,e,Object.assign(Object.assign({},u),{raw:!0}),this);return typeof d=="string"?se.parse(d):d}},{key:"translateConnectionPoints",value:function(e,t){var r=this.markerCache;r.sourcePoint&&r.sourcePoint.translate(e,t),r.targetPoint&&r.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}},{key:"updateLabelPositions",value:function(){if(this.containers.labels==null)return this;var e=this.path;if(!e)return this;var t=this.cell,r=t.getLabels();if(r.length===0)return this;for(var i=t.getDefaultLabel(),l=this.normalizeLabelPosition(i.position),u=0,c=r.length;u<c;u+=1){var h=r[u],d=this.normalizeLabelPosition(h.position),g=P.merge({},l,d),f=this.getLabelTransformationMatrix(g);this.labelCache[u].setAttribute("transform",E.matrixToTransformString(f))}return this}},{key:"updateToolsPosition",value:function(){if(this.containers.tools==null)return this;var e="",t=this.options.toolsOffset,r=this.getConnectionLength();if(r!=null){r<this.options.shortLength&&(e="scale(.5)",t/=2);var i=this.getPointAtLength(t);if(i!=null&&E.attr(this.toolCache,"transform","translate(".concat(i.x,",").concat(i.y,") ").concat(e)),this.options.doubleTools&&r>=this.options.longLength){var l=this.options.doubleToolsOffset||t;i=this.getPointAtLength(r-l),i!=null&&E.attr(this.tool2Cache,"transform","translate(".concat(i.x,",").concat(i.y,") ").concat(e)),E.attr(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&E.attr(this.tool2Cache,"visibility","hidden")}return this}},{key:"updateArrowheadMarkers",value:function(){var e=this.containers.arrowheads;if(e==null)return this;if(e.style.display==="none")return this;var t=this.containers.sourceArrowhead,r=this.containers.targetArrowhead;if(t&&r){var i=this.getConnectionLength()||0,l=i<this.options.shortLength?.5:1;E.scale(t,l),E.scale(r,l),this.translateAndAutoOrientArrows(t,r)}return this}},{key:"updateTerminalProperties",value:function(e){var t=this.cell,r=this.graph,i=t[e],l=i&&i.cell,u="".concat(e,"View");if(!l)return this[u]=null,this.updateTerminalMagnet(e),!0;var c=r.getCellById(l);if(!c)throw new Error("Edge's ".concat(e,' node with id "').concat(l,'" not exists'));var h=c.findView(r);return h?(this[u]=h,this.updateTerminalMagnet(e),!0):!1}},{key:"updateTerminalMagnet",value:function(e){var t="".concat(e,"Magnet"),r=this.getTerminalView(e);if(r){var i=r.getMagnetFromEdgeTerminal(this.cell[e]);i===r.container&&(i=null),this[t]=i}else this[t]=null}},{key:"translateAndAutoOrientArrows",value:function(e,t){var r=this.routePoints;e&&E.translateAndAutoOrient(e,this.sourcePoint,r[0]||this.targetPoint,this.graph.view.stage),t&&E.translateAndAutoOrient(t,this.targetPoint,r[r.length-1]||this.sourcePoint,this.graph.view.stage)}},{key:"getLabelPositionAngle",value:function(e){var t=this.cell.getLabelAt(e);return t&&t.position&&typeof t.position=="object"&&t.position.angle||0}},{key:"getLabelPositionArgs",value:function(e){var t=this.cell.getLabelAt(e);if(t&&t.position&&typeof t.position=="object")return t.position.options}},{key:"getDefaultLabelPositionArgs",value:function(){var e=this.cell.getDefaultLabel();if(e&&e.position&&typeof e.position=="object")return e.position.options}},{key:"mergeLabelPositionArgs",value:function(e,t){return e===null?null:e===void 0?t===null?null:t:P.merge({},t,e)}},{key:"addLabel",value:function(e,t,r,i){var l,u,c=0,h;typeof e!="number"?(l=e.x,u=e.y,typeof t=="number"?(c=t,h=r):h=t):(l=e,u=t,typeof r=="number"?(c=r,h=i):h=r);var d=this.getDefaultLabelPositionArgs(),g=h,f=this.mergeLabelPositionArgs(g,d),v={position:this.getLabelPosition(l,u,c,f)},p=-1;return this.cell.insertLabel(v,p,h),p}},{key:"addVertex",value:function(e,t,r){var i=typeof e!="number",l=i?e.x:e,u=i?e.y:t,c=i?t:r,h={x:l,y:u},d=this.getVertexIndex(l,u);return this.cell.insertVertex(h,d,c),d}},{key:"sendToken",value:function(e,t,r){var i,l,u,c,h="linear";typeof t=="object"?(i=t.duration,l=t.reversed===!0,u=t.selector,t.rotate===!1?c="":t.rotate===!0?c="auto":t.rotate!=null&&(c="".concat(t.rotate)),t.timing&&(h=t.timing)):(i=t,l=!1,u=null),i=i||1e3;var d={dur:"".concat(i,"ms"),repeatCount:"1",calcMode:h,fill:"freeze"};if(c&&(d.rotate=c),l&&(d.keyPoints="1;0",d.keyTimes="0;1"),typeof t=="object"){var g=t.duration,f=t.reversed,v=t.selector,p=t.rotate,C=t.timing,b=Id(t,["duration","reversed","selector","rotate","timing"]);Object.keys(b).forEach(function(N){return d[N]=b[N]})}var y;if(typeof u=="string"?y=this.findOne(u,this.container,this.selectors):y=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(y instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var w=typeof e=="string"?this.findOne(e):e;if(w==null)throw new Error("Token animation requires a valid token element.");var x=w.parentNode,k=function(){x||E.remove(w)},M=te.create(w);x||M.appendTo(this.graph.view.stage);var A=d.complete;d.complete=function(N){k(),r&&r(),A&&A(N)};var S=M.animateAlongPath(d,y);return function(){k(),S()}}},{key:"getConnection",value:function(){return this.path!=null?this.path.clone():null}},{key:"getConnectionPathData",value:function(){if(this.path==null)return"";var e=this.cache.pathCache;return P.has(e,"data")||(e.data=this.path.serialize()),e.data||""}},{key:"getConnectionSubdivisions",value:function(){if(this.path==null)return null;var e=this.cache.pathCache;return P.has(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}},{key:"getConnectionLength",value:function(){if(this.path==null)return 0;var e=this.cache.pathCache;return P.has(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}},{key:"getPointAtLength",value:function(e){return this.path==null?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getPointAtRatio",value:function(e){return this.path==null?null:(H.isPercentage(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}},{key:"getTangentAtLength",value:function(e){return this.path==null?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getTangentAtRatio",value:function(e){return this.path==null?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPoint",value:function(e){return this.path==null?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointLength",value:function(e){return this.path==null?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointRatio",value:function(e){return this.path==null?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getLabelPosition",value:function(e,t,r,i){var l={distance:0},u=0,c;typeof r=="number"?(u=r,c=i):c=r,c!=null&&(l.options=c);var h=c&&c.absoluteOffset,d=!(c&&c.absoluteDistance),g=c&&c.absoluteDistance&&c.reverseDistance,f=this.path,v={segmentSubdivisions:this.getConnectionSubdivisions()},p=new O(e,t),C=f.closestPointT(p,v),b=this.getConnectionLength()||0,y=f.lengthAtT(C,v);d&&(y=b>0?y/b:0),g&&(y=-1*(b-y)||1),l.distance=y;var w;h||(w=f.tangentAtT(C));var x;if(w)x=w.pointOffset(p);else{var k=f.pointAtT(C),M=p.diff(k);x={x:M.x,y:M.y}}return l.offset=x,l.angle=u,l}},{key:"normalizeLabelPosition",value:function(e){return typeof e=="number"?{distance:e}:e}},{key:"getLabelTransformationMatrix",value:function(e){var t=this.normalizeLabelPosition(e),r=t.options||{},i=t.angle||0,l=t.distance,u=l>0&&l<=1,c=0,h={x:0,y:0},d=t.offset;d&&(typeof d=="number"?c=d:(d.x!=null&&(h.x=d.x),d.y!=null&&(h.y=d.y)));var g=h.x!==0||h.y!==0||c===0,f=r.keepGradient,v=r.ensureLegibility,p=this.path,C={segmentSubdivisions:this.getConnectionSubdivisions()},b=u?l*this.getConnectionLength():l,y=p.tangentAtLength(b,C),w,x=i;if(y){if(g)w=y.start,w.translate(h);else{var k=y.clone();k.rotate(-90,y.start),k.setLength(c),w=k.end}f&&(x=y.angle()+i,v&&(x=re.normalize((x+90)%180-90)))}else w=p.start,g&&w.translate(h);return E.createSVGMatrix().translate(w.x,w.y).rotate(x)}},{key:"getLabelCoordinates",value:function(e){var t=this.getLabelTransformationMatrix(e);return new O(t.e,t.f)}},{key:"getVertexIndex",value:function(e,t){var r=this.cell,i=r.getVertices(),l=this.getClosestPointLength(new O(e,t)),u=0;if(l!=null)for(var c=i.length;u<c;u+=1){var h=i[u],d=this.getClosestPointLength(h);if(d!=null&&l<d)break}return u}},{key:"getEventArgs",value:function(e,t,r){var i=this,l=i.cell,u=l;return t==null||r==null?{e,view:i,edge:l,cell:u}:{e,x:t,y:r,view:i,edge:l,cell:u}}},{key:"notifyUnhandledMouseDown",value:function(e,t,r){this.notify("edge:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}},{key:"notifyMouseDown",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onMouseDown",this).call(this,e,t,r),this.notify("edge:mousedown",this.getEventArgs(e,t,r))}},{key:"notifyMouseMove",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onMouseMove",this).call(this,e,t,r),this.notify("edge:mousemove",this.getEventArgs(e,t,r))}},{key:"notifyMouseUp",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onMouseUp",this).call(this,e,t,r),this.notify("edge:mouseup",this.getEventArgs(e,t,r))}},{key:"onClick",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onClick",this).call(this,e,t,r),this.notify("edge:click",this.getEventArgs(e,t,r))}},{key:"onDblClick",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onDblClick",this).call(this,e,t,r),this.notify("edge:dblclick",this.getEventArgs(e,t,r))}},{key:"onContextMenu",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onContextMenu",this).call(this,e,t,r),this.notify("edge:contextmenu",this.getEventArgs(e,t,r))}},{key:"onMouseDown",value:function(e,t,r){this.notifyMouseDown(e,t,r);var i=e.target.getAttribute("class");switch(i){case"vertex":this.startVertexDragging(e,t,r);return;case"vertex-remove":case"vertex-remove-area":this.handleVertexRemoving(e,t,r);return;case"connection":case"connection-wrap":this.handleVertexAdding(e,t,r);return;case"arrowhead":this.startArrowheadDragging(e,t,r);return;case"source-marker":case"target-marker":this.notifyUnhandledMouseDown(e,t,r);return}this.startEdgeDragging(e,t,r)}},{key:"onMouseMove",value:function(e,t,r){var i=this.getEventData(e);switch(i.action){case"drag-vertex":this.dragVertex(e,t,r);break;case"drag-label":this.dragLabel(e,t,r);break;case"drag-arrowhead":this.dragArrowhead(e,t,r);break;case"drag-edge":this.dragEdge(e,t,r);break}return this.notifyMouseMove(e,t,r),i}},{key:"onMouseUp",value:function(e,t,r){var i=this.getEventData(e);switch(i.action){case"drag-vertex":this.stopVertexDragging(e,t,r);break;case"drag-label":this.stopLabelDragging(e,t,r);break;case"drag-arrowhead":this.stopArrowheadDragging(e,t,r);break;case"drag-edge":this.stopEdgeDragging(e,t,r)}return this.notifyMouseUp(e,t,r),this.checkMouseleave(e),i}},{key:"onMouseOver",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseOver",this).call(this,e),this.notify("edge:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseOut",this).call(this,e),this.notify("edge:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseEnter",this).call(this,e),this.notify("edge:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseLeave",this).call(this,e),this.notify("edge:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,t,r,i){Object(_.a)(Object(ee.a)(a.prototype),"onMouseWheel",this).call(this,e,t,r,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}},{key:"onCustomEvent",value:function(e,t,r,i){var l=E.findParentByClass(e.target,"edge-tool",this.container);if(l){if(e.stopPropagation(),this.can("useEdgeTools")){if(t==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i)))}this.notifyMouseDown(e,r,i)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),Object(_.a)(Object(ee.a)(a.prototype),"onCustomEvent",this).call(this,e,t,r,i)}},{key:"onLabelMouseDown",value:function(e,t,r){this.notifyMouseDown(e,t,r),this.startLabelDragging(e,t,r);var i=this.getEventData(e).stopPropagation;i&&e.stopPropagation()}},{key:"startEdgeDragging",value:function(e,t,r){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(e,t,r);return}this.setEventData(e,{x:t,y:r,moving:!1,action:"drag-edge"})}},{key:"dragEdge",value:function(e,t,r){var i=this.getEventData(e);i.moving||(i.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-i.x,r-i.y,{ui:!0}),this.setEventData(e,{x:t,y:r}),this.notify("edge:moving",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})}},{key:"stopEdgeDragging",value:function(e,t,r){var i=this.getEventData(e);i.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:r,view:this,cell:this.cell,edge:this.cell})),i.moving=!1}},{key:"prepareArrowheadDragging",value:function(e,t){var r=this.getTerminalMagnet(e),i={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:t.isNewEdge===!0,terminalType:e,initialMagnet:r,initialTerminal:P.clone(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(i),i}},{key:"createValidateConnectionArgs",value:function(e){var t=[];t[4]=e,t[5]=this;var r,i=0,l=0;e==="source"?(i=2,r="target"):(l=2,r="source");var u=this.cell[r],c=u.cell;if(c){var h,d=t[i]=this.graph.renderer.findViewByCell(c);d&&(h=d.getMagnetFromEdgeTerminal(u),h===d.container&&(h=void 0)),t[i+1]=h}return function(g,f){return t[l]=g,t[l+1]=g.container===f?void 0:f,t}}},{key:"beforeArrowheadDragging",value:function(e){e.zIndex=this.cell.zIndex,this.cell.toFront();var t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}},{key:"afterArrowheadDragging",value:function(e){e.zIndex!=null&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);var t=this.container;t.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}},{key:"arrowheadDragging",value:function(e,t,r,i){if(i.x=t,i.y=r,i.currentTarget!==e)if(i.currentMagnet&&i.currentView&&i.currentView.unhighlight(i.currentMagnet,{type:"magnetAdsorbed"}),i.currentView=this.graph.renderer.findViewByElem(e),i.currentView){var l;i.currentMagnet=i.currentView.findMagnet(e),i.currentMagnet&&(l=this.graph.hook).validateConnection.apply(l,Object(W.a)(i.getValidateConnectionArgs(i.currentView,i.currentMagnet)).concat([i.currentView.getEdgeTerminal(i.currentMagnet,t,r,this.cell,i.terminalType)]))?i.currentView.highlight(i.currentMagnet,{type:"magnetAdsorbed"}):i.currentMagnet=null}else i.currentMagnet=null;i.currentTarget=e,this.cell.prop(i.terminalType,{x:t,y:r},Object.assign(Object.assign({},i.options),{ui:!0}))}},{key:"arrowheadDragged",value:function(e,t,r){var i=e.currentView,l=e.currentMagnet;if(!l||!i)return;i.unhighlight(l,{type:"magnetAdsorbed"});var u=e.terminalType,c=i.getEdgeTerminal(l,t,r,this.cell,u);this.cell.setTerminal(u,c,{ui:!0})}},{key:"snapArrowhead",value:function(e,t,r){var i=this,l=this.graph,u=l.options.connecting.snap,c=typeof u=="object"&&u.radius||50,h=l.renderer.findViewsInArea({x:e-c,y:t-c,width:2*c,height:2*c}),d=r.closestView||null,g=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;var f,v=Number.MAX_SAFE_INTEGER,p=new O(e,t);h.forEach(function(k){if(k.container.getAttribute("magnet")!=="false"&&(f=k.cell.getBBox().getCenter().distance(p),f<c&&f<v)){var M;(g===k.container||(M=l.hook).validateConnection.apply(M,Object(W.a)(r.getValidateConnectionArgs(k,null)).concat([k.getEdgeTerminal(k.container,e,t,i.cell,r.terminalType)])))&&(v=f,r.closestView=k,r.closestMagnet=k.container)}k.container.querySelectorAll("[magnet]").forEach(function(A){if(A.getAttribute("magnet")!=="false"){var S=k.getBBoxOfElement(A);if(f=p.distance(S.getCenter()),f<c&&f<v){var N;(g===A||(N=l.hook).validateConnection.apply(N,Object(W.a)(r.getValidateConnectionArgs(k,A)).concat([k.getEdgeTerminal(A,e,t,i.cell,r.terminalType)])))&&(v=f,r.closestView=k,r.closestMagnet=A)}}})});var C,b=r.terminalType,y=r.closestView,w=r.closestMagnet,x=g!==w;if(d&&x&&d.unhighlight(g,{type:"magnetAdsorbed"}),y){if(!x)return;y.highlight(w,{type:"magnetAdsorbed"}),C=y.getEdgeTerminal(w,e,t,this.cell,b)}else C={x:e,y:t};this.cell.setTerminal(b,C,{},Object.assign(Object.assign({},r.options),{ui:!0}))}},{key:"snapArrowheadEnd",value:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(r,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(r)),e.closestView=null,e.closestMagnet=null}},{key:"finishEmbedding",value:function(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}},{key:"fallbackConnection",value:function(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0});break}}},{key:"notifyConnectionEvent",value:function(e,t){var r=e.terminalType,i=e.initialTerminal,l=this.cell[r],u=l&&!ke.equalTerminals(i,l);if(u){var c=this.graph,h=i,d=h.cell?c.getCellById(h.cell):null,g=h.port,f=d?c.findViewByCell(d):null,v=d||e.isNewEdge?null:O.create(i).toJSON(),p=l,C=p.cell?c.getCellById(p.cell):null,b=p.port,y=C?c.findViewByCell(C):null,w=C?null:O.create(l).toJSON();this.notify("edge:connected",{e:t,previousCell:d,previousPort:g,previousView:f,previousPoint:v,currentCell:C,currentView:y,currentPort:b,currentPoint:w,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:r,isNew:e.isNewEdge})}}},{key:"highlightAvailableMagnets",value:function(e){var t=this,r=this.graph,i=r.model.getCells();e.marked={};for(var l=function(g,f){var v=r.renderer.findViewByCell(i[g]);if(!v)return"continue";var p=Array.prototype.slice.call(v.container.querySelectorAll("[magnet]"));v.container.getAttribute("magnet")!=="false"&&p.push(v.container);var C=p.filter(function(w){var x;return(x=r.hook).validateConnection.apply(x,Object(W.a)(e.getValidateConnectionArgs(v,w)).concat([v.getEdgeTerminal(w,e.x,e.y,t.cell,e.terminalType)]))});if(C.length>0){for(var b=0,y=C.length;b<y;b+=1)v.highlight(C[b],{type:"magnetAvailable"});v.highlight(null,{type:"nodeAvailable"}),e.marked[v.cell.id]=C}},u=0,c=i.length;u<c;u+=1){var h=l(u,c);if(h==="continue")continue}}},{key:"unhighlightAvailableMagnets",value:function(e){var t=this,r=e.marked||{};Object.keys(r).forEach(function(i){var l=t.graph.renderer.findViewByCell(i);if(l){var u=r[i];u.forEach(function(c){l.unhighlight(c,{type:"magnetAvailable"})}),l.unhighlight(null,{type:"nodeAvailable"})}}),e.marked=null}},{key:"startArrowheadDragging",value:function(e,t,r){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(e,t,r);return}var i=e.target,l=i.getAttribute("data-terminal"),u=this.prepareArrowheadDragging(l,{x:t,y:r});this.setEventData(e,u)}},{key:"dragArrowhead",value:function(e,t,r){var i=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,r,i):this.arrowheadDragging(this.getEventTarget(e),t,r,i)}},{key:"stopArrowheadDragging",value:function(e,t,r){var i=this,l=this.graph,u=this.getEventData(e);l.options.connecting.snap?this.snapArrowheadEnd(u):this.arrowheadDragged(u,t,r),R.toDeferredBoolean(l.hook.validateEdge(this.cell,u.terminalType,u.initialTerminal)).then(function(c){c?(i.finishEmbedding(u),i.notifyConnectionEvent(u,e)):i.fallbackConnection(u),i.afterArrowheadDragging(u)})}},{key:"startLabelDragging",value:function(e,t,r){if(this.can("edgeLabelMovable")){var i=e.currentTarget,l=parseInt(i.getAttribute("data-index"),10),u=this.getLabelPositionAngle(l),c=this.getLabelPositionArgs(l),h=this.getDefaultLabelPositionArgs(),d=this.mergeLabelPositionArgs(c,h);this.setEventData(e,{index:l,positionAngle:u,positionArgs:d,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}},{key:"dragLabel",value:function(e,t,r){var i=this.getEventData(e),l={position:this.getLabelPosition(t,r,i.positionAngle,i.positionArgs)};this.cell.setLabelAt(i.index,l)}},{key:"stopLabelDragging",value:function(e,t,r){}},{key:"handleVertexAdding",value:function(e,t,r){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(e,t,r);return}var i=this.addVertex({x:t,y:r},{ui:!0});this.setEventData(e,{index:i,action:"drag-vertex"})}},{key:"handleVertexRemoving",value:function(e,t,r){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(e,t,r);return}var i=e.target,l=parseInt(i.getAttribute("idx"),10);this.cell.removeVertexAt(l)}},{key:"startVertexDragging",value:function(e,t,r){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(e,t,r);return}var i=e.target,l=parseInt(i.getAttribute("idx"),10);this.setEventData(e,{index:l,action:"drag-vertex"})}},{key:"dragVertex",value:function(e,t,r){var i=this.getEventData(e);this.cell.setVertexAt(i.index,{x:t,y:r},{ui:!0})}},{key:"stopVertexDragging",value:function(e,t,r){}},{key:"sourceBBox",get:function(){var e=this.sourceView;if(!e){var t=this.cell.getSource();return new U(t.x,t.y)}var r=this.sourceMagnet;return e.isEdgeElement(r)?new U(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(r||e.container)}},{key:"targetBBox",get:function(){var e=this.targetView;if(!e){var t=this.cell.getTarget();return new U(t.x,t.y)}var r=this.targetMagnet;return e.isEdgeElement(r)?new U(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(r||e.container)}}]),a}(xe);Dn.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),Dn.registry.register("edge",Dn,!0);var Qe=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.scalableNode=null,n.rotatableNode=null,n.scalableSelector="scalable",n.rotatableSelector="rotatable",n.defaultPortMarkup=ie.getPortMarkup(),n.defaultPortLabelMarkup=ie.getPortLabelMarkup(),n.defaultPortContainerMarkup=ie.getPortContainerMarkup(),n.portsCache={},n}return Object(F.a)(a,[{key:"getContainerClassName",value:function(){return[Object(_.a)(Object(ee.a)(a.prototype),"getContainerClassName",this).call(this),this.prefixClassName("node")].join(" ")}},{key:"isNodeView",value:function(){return!0}},{key:"confirmUpdate",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e;return this.hasAction(i,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","resize","translate","rotate","ports","tools"])):(i=this.handleAction(i,"resize",function(){return t.resize(r)},"update"),i=this.handleAction(i,"update",function(){return t.update()},Le.useCSSSelector?"ports":null),i=this.handleAction(i,"translate",function(){return t.translate()}),i=this.handleAction(i,"rotate",function(){return t.rotate()}),i=this.handleAction(i,"ports",function(){return t.renderPorts()}),i=this.handleAction(i,"tools",function(){return t.renderTools()})),i}},{key:"update",value:function(e){this.cleanCache(),Le.useCSSSelector&&this.removePorts();var t=this.cell,r=t.getSize(),i=t.getAttrs();this.updateAttrs(this.container,i,{attrs:e===i?null:e,rootBBox:new U(0,0,r.width,r.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),Le.useCSSSelector&&this.renderPorts()}},{key:"renderMarkup",value:function(){var e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}},{key:"renderJSONMarkup",value:function(e){var t=this.parseJSONMarkup(e,this.container),r=function(l){return Array.isArray(l)?l[0]:l};this.selectors=t.selectors,this.rotatableNode=r(this.selectors[this.rotatableSelector]),this.scalableNode=r(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}},{key:"renderStringMarkup",value:function(e){E.append(this.container,te.toNodes(te.createVectors(e))),this.rotatableNode=E.findOne(this.container,".".concat(this.rotatableSelector)),this.scalableNode=E.findOne(this.container,".".concat(this.scalableSelector)),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),Le.useCSSSelector||this.renderPorts(),this.renderTools(),this}},{key:"resize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}},{key:"translate",value:function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}},{key:"rotate",value:function(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}},{key:"getTranslationString",value:function(){var e=this.cell.getPosition();return"translate(".concat(e.x,",").concat(e.y,")")}},{key:"getRotationString",value:function(){var e=this.cell.getAngle();if(e){var t=this.cell.getSize();return"rotate(".concat(e,",").concat(t.width/2,",").concat(t.height/2,")")}}},{key:"updateTransform",value:function(){var e=this.getTranslationString(),t=this.getRotationString();t&&(e+=" ".concat(t)),this.container.setAttribute("transform",e)}},{key:"updateRotation",value:function(){if(this.rotatableNode!=null){var e=this.getRotationString();e!=null?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}},{key:"updateTranslation",value:function(){this.container.setAttribute("transform",this.getTranslationString())}},{key:"updateSize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.cell,r=t.getSize(),i=t.getAngle(),l=this.scalableNode,u=!1;l.getElementsByTagName("path").length>0&&(u=!0);var c=E.getBBox(l,{recursive:u}),h=r.width/(c.width||1),d=r.height/(c.height||1);l.setAttribute("transform","scale(".concat(h,",").concat(d,")"));var g=this.rotatableNode;if(g!=null){var f=g.getAttribute("transform");if(f){g.setAttribute("transform","".concat(f," rotate(").concat(-i,",").concat(r.width/2,",").concat(r.height/2,")"));var v=E.getBBox(l,{target:this.graph.view.stage});t.prop("position",{x:v.x,y:v.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}},{key:"findPortElem",value:function(e,t){var r=e?this.portsCache[e]:null;if(!r)return null;var i=r.portContentElement,l=r.portContentSelectors||{};return this.findOne(t,i,l)}},{key:"initializePorts",value:function(){this.cleanPortsCache()}},{key:"refreshPorts",value:function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}},{key:"cleanPortsCache",value:function(){this.portsCache={}}},{key:"removePorts",value:function(){var e=this;Object.keys(this.portsCache).forEach(function(t){var r=e.portsCache[t];E.remove(r.portElement)})}},{key:"renderPorts",value:function(){var e=this,t=this.getPortsContainer(),r=[];t.childNodes.forEach(function(u){r.push(u)});var i=pe.groupBy(this.cell.getParsedPorts(),"zIndex"),l="auto";i[l]&&i[l].forEach(function(u){var c=e.getPortElement(u);t.append(c),r.push(c)}),Object.keys(i).forEach(function(u){if(u!==l){var c=parseInt(u,10);e.appendPorts(i[u],c,r)}}),this.updatePorts()}},{key:"getPortsContainer",value:function(){return this.rotatableNode||this.container}},{key:"appendPorts",value:function(e,t,r){var i=this,l=e.map(function(u){return i.getPortElement(u)});r[t]||t<0?E.before(r[Math.max(t,0)],l):E.append(this.getPortsContainer(),l)}},{key:"getPortElement",value:function(e){var t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}},{key:"createPortElement",value:function(e){var t=ie.renderMarkup(this.getPortContainerMarkup()),r=t.elem;if(r==null)throw new Error("Invalid port container markup.");t=ie.renderMarkup(this.getPortMarkup(e));var i=t.elem,l=t.selectors;if(i==null)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},i),t=ie.renderMarkup(this.getPortLabelMarkup(e.label));var u=t.elem,c=t.selectors;if(u==null)throw new Error("Invalid port label markup.");var h;if(l&&c){for(var d in c)if(l[d]&&d!==this.rootSelector)throw new Error("Selectors within port must be unique.");h=Object.assign(Object.assign({},l),c)}else h=l||c;return E.addClass(r,"x6-port"),E.addClass(i,"x6-port-body"),E.addClass(u,"x6-port-label"),r.appendChild(i),r.appendChild(u),this.portsCache[e.id]={portElement:r,portSelectors:h,portLabelElement:u,portLabelSelectors:c,portContentElement:i,portContentSelectors:l},this.graph.hook.onPortRendered({port:e,node:this.cell,container:r,selectors:h,labelContainer:u,labelSelectors:c,contentContainer:i,contentSelectors:l}),r}},{key:"updatePorts",value:function(){var e=this;this.updatePortGroup();var t=this.cell.getParsedGroups();Object.keys(t).forEach(function(r){return e.updatePortGroup(r)})}},{key:"updatePortGroup",value:function(e){for(var t=U.fromSize(this.cell.getSize()),r=this.cell.getPortsLayoutByGroup(e,t),i=0,l=r.length;i<l;i+=1){var u=r[i],c=u.portId,h=this.portsCache[c]||{},d=u.portLayout;if(this.applyPortTransform(h.portElement,d),u.portAttrs!=null){var g={selectors:h.portSelectors||{}};u.portSize&&(g.rootBBox=U.fromSize(u.portSize)),this.updateAttrs(h.portElement,u.portAttrs,g)}var f=u.labelLayout;if(f&&(this.applyPortTransform(h.portLabelElement,f,-(d.angle||0)),f.attrs)){var v={selectors:h.portLabelSelectors||{}};u.labelSize&&(v.rootBBox=U.fromSize(u.labelSize)),this.updateAttrs(h.portLabelElement,f.attrs,v)}}}},{key:"applyPortTransform",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=t.angle,l=t.position,u=E.createSVGMatrix().rotate(r).translate(l.x||0,l.y||0).rotate(i||0);E.transform(e,u,{absolute:!0})}},{key:"getPortContainerMarkup",value:function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}},{key:"getPortMarkup",value:function(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}},{key:"getPortLabelMarkup",value:function(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}},{key:"getEventArgs",value:function(e,t,r){var i=this,l=i.cell,u=l;return t==null||r==null?{e,view:i,node:l,cell:u}:{e,x:t,y:r,view:i,node:l,cell:u}}},{key:"notifyMouseDown",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onMouseDown",this).call(this,e,t,r),this.notify("node:mousedown",this.getEventArgs(e,t,r))}},{key:"notifyMouseMove",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onMouseMove",this).call(this,e,t,r),this.notify("node:mousemove",this.getEventArgs(e,t,r))}},{key:"notifyMouseUp",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onMouseUp",this).call(this,e,t,r),this.notify("node:mouseup",this.getEventArgs(e,t,r))}},{key:"onClick",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onClick",this).call(this,e,t,r),this.notify("node:click",this.getEventArgs(e,t,r))}},{key:"onDblClick",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onDblClick",this).call(this,e,t,r),this.notify("node:dblclick",this.getEventArgs(e,t,r))}},{key:"onContextMenu",value:function(e,t,r){Object(_.a)(Object(ee.a)(a.prototype),"onContextMenu",this).call(this,e,t,r),this.notify("node:contextmenu",this.getEventArgs(e,t,r))}},{key:"onMouseDown",value:function(e,t,r){if(this.isPropagationStopped(e))return;this.notifyMouseDown(e,t,r),this.startNodeDragging(e,t,r)}},{key:"onMouseMove",value:function(e,t,r){var i=this.getEventData(e),l=i.action;if(l==="magnet")this.dragMagnet(e,t,r);else{if(l==="move"){var u=i,c=u.targetView||this;c.dragNode(e,t,r),c.notify("node:moving",{e,x:t,y:r,view:c,cell:c.cell,node:c.cell})}this.notifyMouseMove(e,t,r)}this.setEventData(e,i)}},{key:"onMouseUp",value:function(e,t,r){var i=this.getEventData(e),l=i.action;if(l==="magnet")this.stopMagnetDragging(e,t,r);else if(this.notifyMouseUp(e,t,r),l==="move"){var u=i,c=u.targetView||this;c.stopNodeDragging(e,t,r)}var h=i.targetMagnet;h&&this.onMagnetClick(e,h,t,r),this.checkMouseleave(e)}},{key:"onMouseOver",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseOver",this).call(this,e),this.notify("node:mouseover",this.getEventArgs(e))}},{key:"onMouseOut",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseOut",this).call(this,e),this.notify("node:mouseout",this.getEventArgs(e))}},{key:"onMouseEnter",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseEnter",this).call(this,e),this.notify("node:mouseenter",this.getEventArgs(e))}},{key:"onMouseLeave",value:function(e){Object(_.a)(Object(ee.a)(a.prototype),"onMouseLeave",this).call(this,e),this.notify("node:mouseleave",this.getEventArgs(e))}},{key:"onMouseWheel",value:function(e,t,r,i){Object(_.a)(Object(ee.a)(a.prototype),"onMouseWheel",this).call(this,e,t,r,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,r)))}},{key:"onMagnetClick",value:function(e,t,r,i){var l=this.graph.view.getMouseMovedCount(e);if(l>this.graph.options.clickThreshold)return;this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}},{key:"onMagnetDblClick",value:function(e,t,r,i){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}},{key:"onMagnetContextMenu",value:function(e,t,r,i){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,r,i)))}},{key:"onMagnetMouseDown",value:function(e,t,r,i){this.startMagnetDragging(e,r,i)}},{key:"onCustomEvent",value:function(e,t,r,i){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,r,i))),Object(_.a)(Object(ee.a)(a.prototype),"onCustomEvent",this).call(this,e,t,r,i)}},{key:"prepareEmbedding",value:function(e){var t=this.getEventData(e),r=t.cell||this.cell,i=this.graph.findViewByCell(r),l=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:r,view:i,cell:r,x:l.x,y:l.y,currentParent:r.getParent()})}},{key:"processEmbedding",value:function(e,t){var r=this,i=t.cell||this.cell,l=t.graph||this.graph,u=l.options.embedding,c=u.findParent,h=typeof c=="function"?R.call(c,l,{view:this,node:this.cell}).filter(function(y){return y instanceof ce&&r.cell.id!==y.id&&!y.isDescendantOf(r.cell)}):l.model.getNodesUnderNode(i,{by:c});u.frontOnly&&(h=h.slice(-1));for(var d=null,g=t.candidateEmbedView,f=u.validate,v=h.length-1;v>=0;v-=1){var p=h[v];if(g&&g.cell.id===p.id){d=g;break}else{var C=p.findView(l);if(R.call(f,l,{child:this.cell,parent:C.cell,childView:this,parentView:C})){d=C;break}}}this.clearEmbedding(t),d&&d.highlight(null,{type:"embedding"}),t.candidateEmbedView=d;var b=l.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:i,node:i,view:l.findViewByCell(i),x:b.x,y:b.y,currentParent:i.getParent(),candidateParent:d?d.cell:null})}},{key:"clearEmbedding",value:function(e){var t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}},{key:"finalizeEmbedding",value:function(e,t){var r=t.cell||this.cell,i=t.graph||this.graph,l=r.getParent(),u=t.candidateEmbedView;u?(u.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(l==null||l.id!==u.cell.id)&&u.cell.insertChild(r,void 0,{ui:!0})):l&&l.unembed(r,{ui:!0}),i.model.getConnectedEdges(r,{deep:!0}).forEach(function(h){h.updateParent({ui:!0})});var c=i.snapToGrid(e.clientX,e.clientY);this.notify("node:embedded",{e,cell:r,x:c.x,y:c.y,node:r,view:i.findViewByCell(r),previousParent:l,currentParent:r.getParent()})}},{key:"getDelegatedView",value:function(){for(var e=this.cell,t=this;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}},{key:"startMagnetDragging",value:function(e,t,r){if(!this.can("magnetConnectable"))return;e.stopPropagation();var i=e.currentTarget,l=this.graph;this.setEventData(e,{targetMagnet:i}),l.hook.validateMagnet(this,i,e)?(l.options.magnetThreshold<=0&&this.startConnectting(e,i,t,r),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):this.onMouseDown(e,t,r),l.view.delegateDragEvents(e,this)}},{key:"startConnectting",value:function(e,t,r,i){this.graph.model.startBatch("add-edge");var l=this.createEdgeFromMagnet(t,r,i);l.notifyMouseDown(e,r,i),l.setEventData(e,l.prepareArrowheadDragging("target",{x:r,y:i,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:l})}},{key:"createEdgeFromMagnet",value:function(e,t,r){var i=this.graph,l=i.model,u=i.hook.getDefaultEdge(this,e);return u.setSource(Object.assign(Object.assign({},u.getSource()),this.getEdgeTerminal(e,t,r,u,"source"))),u.setTarget(Object.assign(Object.assign({},u.getTarget()),{x:t,y:r})),u.addTo(l,{async:!1,ui:!0}),u.findView(i)}},{key:"dragMagnet",value:function(e,t,r){var i=this.getEventData(e),l=i.edgeView;if(l)l.onMouseMove(e,t,r);else{var u=this.graph,c=u.options.magnetThreshold,h=this.getEventTarget(e),d=i.targetMagnet;if(c==="onleave"){if(d===h||d.contains(h))return}else if(u.view.getMouseMovedCount(e)<=c)return;this.startConnectting(e,d,t,r)}}},{key:"stopMagnetDragging",value:function(e,t,r){var i=this.eventData(e),l=i.edgeView;l&&(l.onMouseUp(e,t,r),this.graph.model.stopBatch("add-edge"))}},{key:"notifyUnhandledMouseDown",value:function(e,t,r){this.notify("node:unhandled:mousedown",{e,x:t,y:r,view:this,cell:this.cell,node:this.cell})}},{key:"notifyNodeMove",value:function(e,t,r,i,l){var u=this,c=[l],h=this.graph.selection.widget;if(h){var d=this.graph.getSelectedCells();c.push.apply(c,Object(W.a)(d.filter(function(g){return g.id!==l.id})))}c.forEach(function(g){u.notify(e,{e:t,x:r,y:i,cell:g,node:g,view:g.findView(u.graph)})})}},{key:"startNodeDragging",value:function(e,t,r){var i=this.getDelegatedView();if(i==null||!i.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,r);this.setEventData(e,{targetView:i,action:"move"});var l=O.create(i.cell.getPosition());i.setEventData(e,{moving:!1,offset:l.diff(t,r),restrict:this.graph.hook.getRestrictArea(i)})}},{key:"dragNode",value:function(e,t,r){var i=this.cell,l=this.graph,u=l.getGridSize(),c=this.getEventData(e),h=c.offset,d=c.restrict;if(!c.moving){c.moving=!0;var g=this.getEventData(e),f=g.targetView;f.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,r,f.cell)}var v=this.graph.scroller.widget;v&&v.autoScroll(e.clientX,e.clientY);var p=be.snapToGrid(t+h.x,u),C=be.snapToGrid(r+h.y,u);i.setPosition(p,C,{restrict:d,deep:!0,ui:!0}),l.options.embedding.enabled&&(c.embedding||(this.prepareEmbedding(e),c.embedding=!0),this.processEmbedding(e,c))}},{key:"stopNodeDragging",value:function(e,t,r){var i=this.getEventData(e);if(i.embedding&&this.finalizeEmbedding(e,i),i.moving){var l=this.getEventData(e),u=l.targetView;u.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,r,u.cell)}i.moving=!1,i.embedding=!1}}]),a}(xe);Qe.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Qe.registry.register("node",Qe,!0);var Vd=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Dt=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"getLabel",value:function(){return this.getAttrByPath("text/text")}},{key:"setLabel",value:function(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}},{key:"removeLabel",value:function(){return this.removeAttrByPath("text/text"),this}},{key:"label",get:function(){return this.getLabel()},set:function(e){this.setLabel(e)}}]),a}(Oe);(function(o){o.config({attrs:{text:{fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"}},propHooks:function(a){var n=a.label,e=Vd(a,["label"]);return n&&P.setByPath(e,"attrs/text/text",n),e}})})(Dt||(Dt={}));var gt=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"getHTML",value:function(){return this.store.get("html")}},{key:"setHTML",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeHTML(t):this.store.set("html",e,t),this}},{key:"removeHTML",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("html",e)}},{key:"html",get:function(){return this.getHTML()},set:function(e){this.setHTML(e)}}]),a}(Dt);(function(o){var s=function(a){Object(I.a)(e,a);var n=Object(V.a)(e);function e(){return Object(L.a)(this,e),n.apply(this,arguments)}return Object(F.a)(e,[{key:"render",value:function(){return Object(_.a)(Object(ee.a)(e.prototype),"render",this).call(this),this.renderHTMLComponent(),this}},{key:"confirmUpdate",value:function(r){var i=this,l=Object(_.a)(Object(ee.a)(e.prototype),"confirmUpdate",this).call(this,r);return this.handleAction(l,e.action,function(){return i.renderHTMLComponent()})}},{key:"renderHTMLComponent",value:function(){var r=this.selectors.foContent;if(r){var i=this.$(r).empty(),l=this.graph.hook.getHTMLComponent(this.cell);l&&(typeof l=="string"?i.html(l):i.append(l))}}}]),e}(Qe);o.View=s,function(a){a.action="html",a.config({bootstrap:[a.action],actions:{html:a.action}}),Qe.registry.register("html-view",a)}(s=o.View||(o.View={}))})(gt||(gt={})),function(o){o.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},ie.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Oe.registry.register("html",o)}(gt||(gt={})),function(o){o.componentRegistry=me.create({type:"html componnet"})}(gt||(gt={}));var fe=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this),e.graph=n,e.init(),e}return Object(F.a)(a,[{key:"init",value:function(){}},{key:"options",get:function(){return this.graph.options}},{key:"model",get:function(){return this.graph.model}},{key:"view",get:function(){return this.graph.view}}]),a}(Ze),Ud=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Mt=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;Object(L.a)(this,a),e=s.call(this),e.graph=n;var t=ie.parseJSONMarkup(a.markup),r=t.selectors,i=t.fragment;return e.background=r.background,e.grid=r.grid,e.svg=r.svg,e.defs=r.defs,e.viewport=r.viewport,e.primer=r.primer,e.stage=r.stage,e.decorator=r.decorator,e.overlay=r.overlay,e.container=e.options.container,e.restore=a.snapshoot(e.container),e.$(e.container).addClass(e.prefixClassName("graph")).append(i),e.delegateEvents(),e}return Object(F.a)(a,[{key:"delegateEvents",value:function(){var e=this.constructor;return Object(_.a)(Object(ee.a)(a.prototype),"delegateEvents",this).call(this,e.events),this}},{key:"guard",value:function(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:t&&t.cell&&t.cell instanceof ce?!1:!(this.svg===e.target||this.container===e.target||ye.a.contains(this.svg,e.target))}},{key:"findView",value:function(e){return this.graph.renderer.findViewByElem(e)}},{key:"onDblClick",value:function(e){e.preventDefault();var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onDblClick(t,i.x,i.y):this.graph.trigger("blank:dblclick",{e:t,x:i.x,y:i.y})}},{key:"onClick",value:function(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onClick(t,i.x,i.y):this.graph.trigger("blank:click",{e:t,x:i.x,y:i.y})}}},{key:"onContextMenu",value:function(e){this.options.preventDefaultContextMenu&&e.preventDefault();var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var i=this.graph.snapToGrid(t.clientX,t.clientY);r?r.onContextMenu(t,i.x,i.y):this.graph.trigger("blank:contextmenu",{e:t,x:i.x,y:i.y})}},{key:"delegateDragEvents",value:function(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0});var r=this.constructor;this.delegateDocumentEvents(r.documentEvents,e.data),this.undelegateEvents()}},{key:"getMouseMovedCount",value:function(e){var t=this.getEventData(e);return t.mouseMovedCount||0}},{key:"onMouseDown",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var i=this.graph.snapToGrid(t.clientX,t.clientY);r?(t.preventDefault(),r.onMouseDown(t,i.x,i.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:i.x,y:i.y})),this.delegateDragEvents(t,r)}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e);t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1;var r=t.mouseMovedCount;if(r<=this.options.moveThreshold)return;var i=this.normalizeEvent(e),l=this.graph.snapToGrid(i.clientX,i.clientY),u=t.currentView;u?u.onMouseMove(i,l.x,l.y):this.graph.trigger("blank:mousemove",{e:i,x:l.x,y:l.y}),this.setEventData(i,t)}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),r=this.graph.snapToGrid(t.clientX,t.clientY),i=this.getEventData(e),l=i.currentView;l?l.onMouseUp(t,r.x,r.y):this.graph.trigger("blank:mouseup",{e:t,x:r.x,y:r.y}),e.isPropagationStopped()||this.onClick(ye.a.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}},{key:"onMouseOver",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;if(r)r.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}},{key:"onMouseOut",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;if(r)r.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}},{key:"onMouseEnter",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var i=this.graph.renderer.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseEnter(t)}else{if(i)return;this.graph.trigger("graph:mouseenter",{e:t})}}},{key:"onMouseLeave",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var i=this.graph.renderer.findViewByElem(t.relatedTarget);if(r){if(i===r)return;r.onMouseLeave(t)}else{if(i)return;this.graph.trigger("graph:mouseleave",{e:t})}}},{key:"onMouseWheel",value:function(e){var t=this.normalizeEvent(e),r=this.findView(t.target);if(this.guard(t,r))return;var i=t.originalEvent,l=this.graph.snapToGrid(i.clientX,i.clientY),u=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));r?r.onMouseWheel(t,l.x,l.y,u):this.graph.trigger("blank:mousewheel",{e:t,delta:u,x:l.x,y:l.y})}},{key:"onCustomEvent",value:function(e){var t=e.currentTarget,r=t.getAttribute("event")||t.getAttribute("data-event");if(r){var i=this.findView(t);if(i){var l=this.normalizeEvent(e);if(this.guard(l,i))return;var u=this.graph.snapToGrid(l.clientX,l.clientY);i.onCustomEvent(l,r,u.x,u.y)}}}},{key:"handleMagnetEvent",value:function(e,t){var r=e.currentTarget,i=r.getAttribute("magnet");if(i&&i.toLowerCase()!=="false"){var l=this.findView(r);if(l){var u=this.normalizeEvent(e);if(this.guard(u,l))return;var c=this.graph.snapToGrid(u.clientX,u.clientY);R.call(t,this.graph,l,u,r,c.x,c.y)}}}},{key:"onMagnetMouseDown",value:function(e){this.handleMagnetEvent(e,function(t,r,i,l,u){t.onMagnetMouseDown(r,i,l,u)})}},{key:"onMagnetDblClick",value:function(e){this.handleMagnetEvent(e,function(t,r,i,l,u){t.onMagnetDblClick(r,i,l,u)})}},{key:"onMagnetContextMenu",value:function(e){this.options.preventDefaultContextMenu&&e.preventDefault(),this.handleMagnetEvent(e,function(t,r,i,l,u){t.onMagnetContextMenu(r,i,l,u)})}},{key:"onLabelMouseDown",value:function(e){var t=e.currentTarget,r=this.findView(t);if(r){var i=this.normalizeEvent(e);if(this.guard(i,r))return;var l=this.graph.snapToGrid(i.clientX,i.clientY);r.onLabelMouseDown(i,l.x,l.y)}}},{key:"onImageDragStart",value:function(){return!1}},{key:"dispose",value:function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}}},{key:"model",get:function(){return this.graph.model}},{key:"options",get:function(){return this.graph.options}}]),a}(ue);Ud([ue.dispose()],Mt.prototype,"dispose",null),function(o){var s="".concat(Le.prefixCls,"-graph");o.markup=[{ns:E.ns.xhtml,tagName:"div",selector:"background",className:"".concat(s,"-background")},{ns:E.ns.xhtml,tagName:"div",selector:"grid",className:"".concat(s,"-grid")},{ns:E.ns.svg,tagName:"svg",selector:"svg",className:"".concat(s,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":E.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(s,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(s,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(s,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(s,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(s,"-svg-overlay")}]}]}];function a(n){var e=n.cloneNode();return n.childNodes.forEach(function(t){return e.appendChild(t)}),function(){for(E.empty(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(var t=0,r=e.attributes.length;t<r;t+=1){var i=e.attributes[t];n.setAttribute(i.name,i.value)}e.childNodes.forEach(function(l){return n.appendChild(l)})}}o.snapshoot=a}(Mt||(Mt={})),function(o){var s,a=Le.prefixCls;o.events=(s={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"},Object(q.a)(s,"mouseenter  .".concat(a,"-cell"),"onMouseEnter"),Object(q.a)(s,"mouseleave  .".concat(a,"-cell"),"onMouseLeave"),Object(q.a)(s,"mouseenter  .".concat(a,"-cell-tools"),"onMouseEnter"),Object(q.a)(s,"mouseleave  .".concat(a,"-cell-tools"),"onMouseLeave"),Object(q.a)(s,"mousedown   .".concat(a,"-cell [event]"),"onCustomEvent"),Object(q.a)(s,"touchstart  .".concat(a,"-cell [event]"),"onCustomEvent"),Object(q.a)(s,"mousedown   .".concat(a,"-cell [data-event]"),"onCustomEvent"),Object(q.a)(s,"touchstart  .".concat(a,"-cell [data-event]"),"onCustomEvent"),Object(q.a)(s,"dblclick    .".concat(a,"-cell [magnet]"),"onMagnetDblClick"),Object(q.a)(s,"contextmenu .".concat(a,"-cell [magnet]"),"onMagnetContextMenu"),Object(q.a)(s,"mousedown   .".concat(a,"-cell [magnet]"),"onMagnetMouseDown"),Object(q.a)(s,"touchstart  .".concat(a,"-cell [magnet]"),"onMagnetMouseDown"),Object(q.a)(s,"dblclick    .".concat(a,"-cell [data-magnet]"),"onMagnetDblClick"),Object(q.a)(s,"contextmenu .".concat(a,"-cell [data-magnet]"),"onMagnetContextMenu"),Object(q.a)(s,"mousedown   .".concat(a,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(q.a)(s,"touchstart  .".concat(a,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(q.a)(s,"dragstart   .".concat(a,"-cell image"),"onImageDragStart"),Object(q.a)(s,"mousedown   .".concat(a,"-edge .label"),"onLabelMouseDown"),Object(q.a)(s,"touchstart  .".concat(a,"-edge .label"),"onLabelMouseDown"),s),o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Mt||(Mt={}));var We;(function(o){function s(a,n){return function(e,t,r){var i=r.value;r.value=function(){var l=this.scroller.widget;if(l==null){var u="Shoule enable scroller to use method '".concat(t,"'");if(a!==!1)throw console.error(u),new Error(u);return n!==!1&&console.warn(u),this}for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return i.call.apply(i,[this].concat(h))}}}o.checkScroller=s})(We||(We={}));var Gd=`.x6-graph {
  position: relative;
  outline: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignobject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignobject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 100;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box !important;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-path-drawer {
  cursor: crosshair;
}
.x6-path-drawer .start-point {
  fill: #fff;
  stroke: #000;
  stroke-width: 2px;
}
.x6-path-drawer .start-point:hover {
  fill: #000;
}
.x6-path-drawer .control-path {
  pointer-events: none;
  fill: none;
  stroke: #000;
  stroke-width: 1px;
  stroke-linecap: round;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  position: absolute;
  opacity: 1;
  pointer-events: none;
}
.x6-widget-snapline-horizontal {
  border-bottom: 1px solid #2ecc71;
}
.x6-widget-snapline-vertical {
  border-right: 1px solid #2ecc71;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: 'No matches found';
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
`,Hd=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Mn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){Le.autoInsertCSS&&a.ensure()}},{key:"dispose",value:function(){a.clean()}}]),a}(fe);Hd([Mn.dispose()],Mn.prototype,"dispose",null),function(o){var s;function a(){if(s==null&&!we.isApplyingHMR()){s=document.createElement("style"),s.setAttribute("type","text/css"),s.textContent=Gd;var e=document.querySelector("head");e&&e.insertBefore(s,e.firstChild)}}o.ensure=a;function n(){s&&s.parentNode&&s.parentNode.removeChild(s),s=null}o.clean=n}(Mn||(Mn={}));var Wd=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Tn;(function(o){o.root="widget-minimap",o.viewport="".concat(o.root,"-viewport"),o.zoom="".concat(o.viewport,"-zoom")})(Tn||(Tn={}));var Yo=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;Object(L.a)(this,a),e=s.call(this),e.options=Object.assign(Object.assign({},wr.defaultOptions),n),e.updateViewport=R.debounce(e.updateViewport.bind(Object(Ae.a)(e)),0),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Tn.root));var t=document.createElement("div");e.container.appendChild(t),e.$viewport=e.$("<div>").addClass(e.prefixClassName(Tn.viewport)),e.options.scalable&&(e.zoomHandle=e.$("<div>").addClass(e.prefixClassName(Tn.zoom)).appendTo(e.$viewport).get(0)),e.$container.append(e.$viewport).css({width:e.options.width,height:e.options.height,padding:e.options.padding}),e.options.container&&e.options.container.appendChild(e.container),e.sourceGraph=e.scroller.graph;var r=Object.assign(Object.assign({},e.options.graphOptions),{container:t,model:e.sourceGraph.model,frozen:!0,interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return e.targetGraph=e.options.createGraph?e.options.createGraph(r):new de(r),e.targetGraph.renderer.unfreeze(),e.updatePaper(e.sourceGraph.options.width,e.sourceGraph.options.height),e.startListening(),e}return Object(F.a)(a,[{key:"startListening",value:function(){var e;this.scroller.$container.on("scroll".concat(this.getEventNamespace()),this.updateViewport),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents((e={mousedown:"startAction",touchstart:"startAction"},Object(q.a)(e,"mousedown .".concat(this.prefixClassName("graph")),"scrollTo"),Object(q.a)(e,"touchstart .".concat(this.prefixClassName("graph")),"scrollTo"),e))}},{key:"stopListening",value:function(){this.scroller.$container.off(this.getEventNamespace()),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}},{key:"onRemove",value:function(){this.targetGraph.view.remove(),this.stopListening()}},{key:"updatePaper",value:function(e,t){var r,i;typeof e=="object"?(r=e.width,i=e.height):(r=e,i=t);var l=this.sourceGraph.options,u=this.sourceGraph.scale(),c=this.options.width-2*this.options.padding,h=this.options.height-2*this.options.padding;r=r/u.sx,i=i/u.sy,this.ratio=Math.min(c/r,h/i);var d=this.ratio,g=l.x*d/u.sx,f=l.y*d/u.sy;return r=r*d,i=i*d,this.targetGraph.resizeGraph(r,i),this.targetGraph.translate(g,f),this.targetGraph.scale(d,d),this.updateViewport(),this}},{key:"updateViewport",value:function(){var e=this.ratio,t=this.sourceGraph.scale(),r=this.scroller,i=r.clientToLocalPoint(0,0),l=this.$(this.targetGraph.container).position(),u=this.targetGraph.translate();u.ty=u.ty||0,this.geometry={top:l.top+i.y*e+u.ty,left:l.left+i.x*e+u.tx,width:r.$container.innerWidth()*e/t.sx,height:r.$container.innerHeight()*e/t.sy},this.$viewport.css(this.geometry)}},{key:"startAction",value:function(e){var t=this.normalizeEvent(e),r=t.target===this.zoomHandle?"zooming":"panning",i={action:r,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.scroller.container.scrollLeft,scrollTop:this.scroller.container.scrollTop,zoom:this.scroller.zoom(),scale:this.sourceGraph.scale(),geometry:this.geometry};this.delegateDocumentEvents(wr.documentEvents,i)}},{key:"doAction",value:function(e){var t=this,r=this.normalizeEvent(e),i=r.clientX,l=r.clientY,u=r.data;switch(u.action){case"panning":{var c=this.sourceGraph.scale(),h=(i-u.clientX)*c.sx,d=(l-u.clientY)*c.sy;this.scroller.container.scrollLeft=u.scrollLeft+h/this.ratio,this.scroller.container.scrollTop=u.scrollTop+d/this.ratio;break}case"zooming":{var g=u.scale,f=u.geometry,v=1+(u.clientX-i)/f.width/g.sx;u.frameId&&cancelAnimationFrame(u.frameId),u.frameId=requestAnimationFrame(function(){t.scroller.zoom(v*u.zoom,{absolute:!0,minScale:t.options.minScale,maxScale:t.options.maxScale})});break}}}},{key:"stopAction",value:function(){this.undelegateDocumentEvents()}},{key:"scrollTo",value:function(e){var t=this.normalizeEvent(e),r,i,l=this.targetGraph.translate();if(l.ty=l.ty||0,t.offsetX==null){var u=this.$(this.targetGraph.container).offset();r=t.pageX-u.left,i=t.pageY-u.top}else r=t.offsetX,i=t.offsetY;var c=(r-l.tx)/this.ratio,h=(i-l.ty)/this.ratio;this.scroller.centerPoint(c,h)}},{key:"dispose",value:function(){this.remove()}},{key:"scroller",get:function(){return this.options.scroller}}]),a}(ue);Wd([ue.dispose()],Yo.prototype,"dispose",null);var wr;(function(o){o.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(a){return new de(a)}},o.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(wr||(wr={}));var $d=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Yd=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Jo=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;Object(L.a)(this,a),e=s.call(this);var t=n.graph,r=Yd(n,["graph"]);return e.graph=t,e.options=Object.assign({tolerance:10},r),e.render(),e.parseFilter(),e.disabled||e.startListening(),e}return Object(F.a)(a,[{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}},{key:"setFilter",value:function(e){this.options.filter=e,this.parseFilter()}},{key:"render",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$horizontal=this.$(document.createElement("div")).addClass(this.horizontalClassName),this.$vertical=this.$(document.createElement("div")).addClass(this.verticalClassName),this.$container.hide().addClass(this.containerClassName).append([this.$horizontal,this.$vertical]),this.options.className&&this.$container.addClass(this.options.className)}},{key:"startListening",value:function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}},{key:"stopListening",value:function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}},{key:"parseFilter",value:function(){var e=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var t=this.options.filter;Array.isArray(t)?t.forEach(function(r){typeof r=="string"?e.filterShapes[r]=!0:e.filterCells[r.id]=!0}):typeof t=="function"&&(this.filterFunction=t)}},{key:"onBatchStop",value:function(e){var t=e.name,r=e.data;t==="resize"&&this.snapOnResizing(r.cell,r)}},{key:"captureCursorOffset",value:function(e){var t=e.view,r=e.x,i=e.y,l=t.getDelegatedView();if(l&&this.isNodeMovable(l)){var u=t.cell.getPosition();this.offset={x:r-u.x,y:i-u.y}}}},{key:"isNodeMovable",value:function(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}},{key:"snapOnResizing",value:function(e,t){var r=this;if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){var i=this.graph.renderer.findViewByCell(e);if(i&&i.cell.isNode()){var l=e.getBBox(),u=l.bbox(e.getAngle()),c=u.getTopLeft(),h=u.getBottomRight(),d=re.normalize(e.getAngle()),g=this.options.tolerance||0,f,v,p,C,b,y,w={vertical:0,horizontal:0},x=t.direction,k=t.trueDirection,M=t.relativeDirection;k.indexOf("right")!==-1?w.vertical=h.x:w.vertical=c.x,k.indexOf("bottom")!==-1?w.horizontal=h.y:w.horizontal=c.y,this.model.getNodes().some(function(K){if(r.isIgnored(e,K))return!1;var ne=K.getBBox().bbox(K.getAngle()),ve=ne.getTopLeft(),ge=ne.getBottomRight(),Ie={vertical:[ve.x,ge.x],horizontal:[ve.y,ge.y]},Ne={};return Object.keys(Ie).forEach(function(Ee){var It=Ee,Fi=Ie[It].map(function(St){return{position:St,distance:Math.abs(St-w[It])}}).filter(function(St){return St.distance<=g});Ne[It]=pe.sortBy(Fi,function(St){return St.distance})}),f==null&&Ne.vertical.length>0&&(f=Ne.vertical[0].position,v=Math.min(u.y,ne.y),p=Math.max(h.y,ge.y)-v),C==null&&Ne.horizontal.length>0&&(C=Ne.horizontal[0].position,b=Math.min(u.x,ne.x),y=Math.max(h.x,ge.x)-b),f!=null&&C!=null}),this.hide();var A=0,S=0;(C!=null||f!=null)&&(f!=null&&(A=k.indexOf("right")!==-1?f-h.x:c.x-f),C!=null&&(S=k.indexOf("bottom")!==-1?C-h.y:c.y-C));var N=0,j=0;if(d%90===0)d===90||d===270?(N=S,j=A):(N=A,j=S);else{var B=0<=d&&d<90?1:90<=d&&d<180?4:180<=d&&d<270?3:2;C!=null&&f!=null&&(A<S?(S=0,C=void 0):(A=0,f=void 0));var X=re.toRad(d%90);A&&(N=B===3?A/Math.cos(X):A/Math.sin(X)),S&&(j=B===3?S/Math.cos(X):S/Math.sin(X));var z=B===1||B===3;switch(M){case"top":case"bottom":j=S?S/(z?Math.cos(X):Math.sin(X)):A/(z?Math.sin(X):Math.cos(X));break;case"left":case"right":N=A?A/(z?Math.cos(X):Math.sin(X)):S/(z?Math.sin(X):Math.cos(X))}}switch(M){case"top":case"bottom":N=0;break;case"left":case"right":j=0}var D=this.graph.getGridSize(),T=Math.max(l.width+N,D),G=Math.max(l.height+j,D);t.minWidth&&t.minWidth>D&&(T=Math.max(T,t.minWidth)),t.minHeight&&t.minHeight>D&&(G=Math.max(G,t.minHeight)),t.maxWidth&&(T=Math.min(T,t.maxWidth)),t.maxHeight&&(G=Math.min(G,t.maxHeight)),t.preserveAspectRatio&&(j<N?G=T*(l.height/l.width):T=G*(l.width/l.height)),(T!==l.width||G!==l.height)&&(e.resize(T,G,{direction:x,relativeDirection:M,trueDirection:k,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(i)}),p&&(p+=G-l.height),y&&(y+=T-l.width));var Y=e.getBBox().bbox(d);f&&Math.abs(Y.x-f)>1&&Math.abs(Y.width+Y.x-f)>1&&(f=void 0),C&&Math.abs(Y.y-C)>1&&Math.abs(Y.height+Y.y-C)>1&&(C=void 0),this.update({verticalLeft:f,verticalTop:v,verticalHeight:p,horizontalTop:C,horizontalLeft:b,horizontalWidth:y})}}}},{key:"snapOnMoving",value:function(e){var t=this,r=e.view,i=e.e,l=e.x,u=e.y,c=r.getEventData(i).delegatedView||r;if(!this.isNodeMovable(c))return;var h=c.cell,d=h.getSize(),g=h.getPosition(),f=new U(l-this.offset.x,u-this.offset.y,d.width,d.height),v=h.getAngle(),p=f.getCenter(),C=f.bbox(v),b=C.getTopLeft(),y=C.getBottomRight(),w=this.options.tolerance||0,x,k,M,A,S,N,j=0,B=0;if(this.model.getNodes().some(function(Y){if(t.isIgnored(h,Y))return!1;var K=Y.getBBox().bbox(Y.getAngle()),ne=K.getCenter(),ve=K.getTopLeft(),ge=K.getBottomRight();return x==null&&(Math.abs(ne.x-p.x)<w?(x=ne.x,j=.5):Math.abs(ve.x-b.x)<w?(x=ve.x,j=0):Math.abs(ve.x-y.x)<w?(x=ve.x,j=1):Math.abs(ge.x-y.x)<w?(x=ge.x,j=1):Math.abs(ge.x-b.x)<w&&(x=ge.x),x!=null&&(k=Math.min(C.y,K.y),M=Math.max(y.y,ge.y)-k)),A==null&&(Math.abs(ne.y-p.y)<w?(A=ne.y,B=.5):Math.abs(ve.y-b.y)<w?A=ve.y:Math.abs(ve.y-y.y)<w?(A=ve.y,B=1):Math.abs(ge.y-y.y)<w?(A=ge.y,B=1):Math.abs(ge.y-b.y)<w&&(A=ge.y),A!=null&&(S=Math.min(C.x,K.x),N=Math.max(y.x,ge.x)-S)),x!=null&&A!=null}),this.hide(),A!=null||x!=null){A!=null&&(C.y=A-B*C.height),x!=null&&(C.x=x-j*C.width);var X=C.getCenter(),z=X.x-f.width/2,D=X.y-f.height/2,T=z-g.x,G=D-g.y;(T!==0||G!==0)&&(h.translate(T,G,{snapped:!0,restrict:this.graph.hook.getRestrictArea(c)}),N&&(N+=T),M&&(M+=G)),this.update({verticalLeft:x,verticalTop:k,verticalHeight:M,horizontalTop:A,horizontalLeft:S,horizontalWidth:N})}}},{key:"isIgnored",value:function(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&R.call(this.filterFunction,this.graph,t)}},{key:"update",value:function(e){var t=this.graph.matrix(),r=t.a,i=t.d,l=t.e,u=t.f,c=this.options.sharp,h=this.graph.scroller.widget!=null;e.horizontalTop?this.$horizontal.css({top:e.horizontalTop*i+u,left:c?e.horizontalLeft*r+l:h?"-300%":0,width:c?e.horizontalWidth*r:h?"700%":"100%"}).show():this.$horizontal.hide(),e.verticalLeft?this.$vertical.css({left:e.verticalLeft*r+l,top:c?e.verticalTop*i+u:h?"-300%":0,height:c?e.verticalHeight*i:h?"700%":"100%"}).show():this.$vertical.hide(),this.show()}},{key:"resetTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"show",value:function(){return this.$container.show(),this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}},{key:"hide",value:function(){var e=this;this.$container.hide(),this.resetTimer();var t=this.options.clean,r=typeof t=="number"?t:t!==!1?3e3:0;return r>0&&(this.timer=window.setTimeout(function(){e.unmount()},r)),this}},{key:"onRemove",value:function(){this.stopListening(),this.hide()}},{key:"dispose",value:function(){this.remove()}},{key:"model",get:function(){return this.graph.model}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-snapline")}},{key:"verticalClassName",get:function(){return"".concat(this.containerClassName,"-vertical")}},{key:"horizontalClassName",get:function(){return"".concat(this.containerClassName,"-horizontal")}},{key:"disabled",get:function(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}}]),a}(ue);$d([ue.dispose()],Jo.prototype,"dispose",null);var Jd=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Bt=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}},{key:"startListening",value:function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"stopListening",value:function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"resetUpdates",value:function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}},{key:"onSortModel",value:function(){if(this.model.hasActiveBatch(a.SORT_DELAYING_BATCHES))return;this.sortViews()}},{key:"onModelReseted",value:function(e){var t=e.options;this.removeZPivots(),this.resetViews(this.model.getCells(),t)}},{key:"onBatchStop",value:function(e){var t=e.name,r=e.data;if(this.isFrozen())return;var i=this.model;if(!this.isAsync()){var l=a.UPDATE_DELAYING_BATCHES;l.includes(t)&&!i.hasActiveBatch(l)&&this.updateViews(r)}var u=a.SORT_DELAYING_BATCHES;u.includes(t)&&!i.hasActiveBatch(u)&&this.sortViews()}},{key:"onCellAdded",value:function(e){var t=e.cell,r=e.options,i=r.position;this.isAsync()||typeof i!="number"?this.renderView(t,r):(r.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(t,r),i===0&&this.unfreeze({key:"addCells"}))}},{key:"onCellRemoved",value:function(e){var t=e.cell,r=e.options,i=this.findViewByCell(t);i&&this.requestViewUpdate(i,a.FLAG_REMOVE,i.priority,r)}},{key:"onCellZIndexChanged",value:function(e){var t=e.cell,r=e.options;if(this.options.sorting==="approx"){var i=this.findViewByCell(t);i&&this.requestViewUpdate(i,a.FLAG_INSERT,i.priority,r)}}},{key:"onCellVisibleChanged",value:function(e){var t=e.cell,r=e.current,i=e.options;r||this.processEdgeOnTerminalVisibleChanged(t,!1);var l=this.findViewByCell(t);!r&&l?this.removeView(t):r&&l==null&&this.renderView(t,i),r&&this.processEdgeOnTerminalVisibleChanged(t,!0)}},{key:"processEdgeOnTerminalVisibleChanged",value:function(e,t){var r=function(l,u){var c=l.getSourceCellId();if(c!==u.id)return l.getSourceCell();var h=l.getTargetCellId();return h!==u.id?l.getTargetCell():null};this.model.getConnectedEdges(e).forEach(function(i){var l=r(i,e);(l==null||l.isVisible())&&(t?i.show():i.hide())})}},{key:"isEdgeTerminalVisible",value:function(e,t){var r=t==="source"?e.getSourceCellId():e.getTargetCellId(),i=r?this.model.getCell(r):null;return!(i&&!i.isVisible())}},{key:"requestConnectedEdgesUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e instanceof xe)for(var r=e.cell,i=this.model.getConnectedEdges(r),l=0,u=i.length;l<u;l+=1){var c=i[l],h=this.findViewByCell(c);if(!h)continue;var d=["update"];c.getTargetCell()===r&&d.push("target"),c.getSourceCell()===r&&d.push("source"),this.scheduleViewUpdate(h,h.getFlag(d),h.priority,t)}}},{key:"forcePostponedViewUpdate",value:function(e,t){if(!e||!(e instanceof xe))return!1;var r=e.cell;if(r.isNode())return!1;var i=e;if(r.isEdge()&&(t&e.getFlag(["source","target"]))===0){var l=0,u=this.findViewByCell(r.getSourceCell());u&&!this.isViewMounted(u)&&(l=this.dumpView(u),i.updateTerminalMagnet("source"));var c=0,h=this.findViewByCell(r.getTargetCell());if(h&&!this.isViewMounted(h)&&(c=this.dumpView(h),i.updateTerminalMagnet("target")),l===0&&c===0)return!this.dumpView(i)}return!1}},{key:"scheduleViewUpdate",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=e.cid,u=this.updates,c=u.priorities[r];c||(c=u.priorities[r]={});var h=c[l]||0;if((h&t)===t)return;h||(u.count+=1),t&a.FLAG_REMOVE&&h&a.FLAG_INSERT?c[l]^=a.FLAG_INSERT:t&a.FLAG_INSERT&&h&a.FLAG_REMOVE&&(c[l]^=a.FLAG_REMOVE),c[l]|=t,this.graph.hook.onViewUpdated(e,t,i)}},{key:"requestViewUpdate",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.scheduleViewUpdate(e,t,r,i);var l=this.isAsync();if(this.isFrozen()||l&&i.async!==!1||this.model.hasActiveBatch(a.UPDATE_DELAYING_BATCHES))return;var u=this.updateViews(i);l&&this.graph.trigger("render:done",{stats:u,options:i})}},{key:"dumpView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return 0;var r=e.cid,i=this.updates,l=i.priorities[e.priority],u=this.registerMountedView(e)|l[r];return delete l[r],u?this.updateView(e,u,t):0}},{key:"dumpViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.checkView(e),this.updateViews(e)}},{key:"requireView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.findViewByCell(e);return r==null?null:(this.dumpView(r,t),r)}},{key:"updateView",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e==null)return 0;if(e instanceof xe){if(t&a.FLAG_REMOVE)return this.removeView(e.cell),0;t&a.FLAG_INSERT&&(this.insertView(e),t^=a.FLAG_INSERT)}return t?e.confirmUpdate(t,r):0}},{key:"updateViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t,r=0,i=0,l=a.MIN_PRIORITY;do t=this.updateViewsBatch(e),r+=1,i+=t.updatedCount,l=Math.min(t.priority,l);while(!t.empty);return{priority:l,batchCount:r,updatedCount:i}}},{key:"updateViewsBatch",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.updates,r=t.priorities,i=e.batchSize||a.UPDATE_BATCH_SIZE,l=!0,u=a.MIN_PRIORITY,c=0,h=0,d=0,g=0,f=e.checkView||this.options.checkView;typeof f!="function"&&(f=null);e:for(var v=0,p=r.length;v<p;v+=1){var C=r[v];for(var b in C){if(d>=i){l=!1;break e}var y=ue.views[b];if(!y){delete C[b];continue}var w=C[b];if((w&a.FLAG_REMOVE)===0){var x=b in t.unmounted;if(f&&!R.call(f,this.graph,{view:y,unmounted:x})){x||(this.registerUnmountedView(y),y.unmount()),t.unmounted[b]|=w,delete C[b],h+=1;continue}x&&(w|=a.FLAG_INSERT,c+=1),w|=this.registerMountedView(y)}var k=y,M=this.updateView(y,w,e);if(M>0){var A=k.cell;A&&A.isEdge()&&(k.hasAction(M,"source")&&!this.isEdgeTerminalVisible(A,"source")&&(M=k.removeAction(M,"source"),M|=a.FLAG_REMOVE),k.hasAction(M,"target")&&!this.isEdgeTerminalVisible(A,"target")&&(M=k.removeAction(M,"target"),M|=a.FLAG_REMOVE))}if(M>0&&(C[b]=M,!this.graph.hook.onViewPostponed(k,M,e)||C[b])){g+=1,l=!1;continue}u>v&&(u=v),d+=1,delete C[b]}}return{empty:l,priority:u,mountedCount:c,unmountedCount:h,updatedCount:d,postponedCount:g}}},{key:"updateViewsAsync",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{processed:0,priority:a.MIN_PRIORITY},i=this.updates,l=i.animationId;if(l){if(E.cancelAnimationFrame(l),r.processed===0){var u=t.before;typeof u=="function"&&R.call(u,this.graph,this.graph)}var c=this.updateViewsBatch(t),h=this.checkViewImpl({checkView:t.checkView,mountedBatchSize:a.MOUNT_BATCH_SIZE-c.mountedCount,unmountedBatchSize:a.MOUNT_BATCH_SIZE-c.unmountedCount}),d=r.processed,g=i.count,f=h.mountedCount,v=h.unmountedCount;c.updatedCount>0&&(d+=c.updatedCount+c.unmountedCount,r.priority=Math.min(c.priority,r.priority),c.empty&&f===0?(c.priority=r.priority,c.mountedCount+=f,c.unmountedCount+=v,this.graph.trigger("render:done",{stats:c,options:t}),r.processed=0,i.count=0):r.processed=d);var p=t.progress;if(g&&typeof p=="function"&&R.call(p,this.graph,{total:g,done:c.empty,current:d}),i.animationId!==l)return}i.animationId=E.requestAnimationFrame(function(){e.updateViewsAsync(t,r)})}},{key:"registerMountedView",value:function(e){var t=e.cid,r=this.updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var i=r.unmounted[t]||0;return delete r.unmounted[t],i}},{key:"registerUnmountedView",value:function(e){var t=e.cid,r=this.updates;if(t in r.unmounted)return 0;r.unmounted[t]|=a.FLAG_INSERT;var i=r.unmounted[t];return r.unmountedCids.push(t),delete r.mounted[t],i}},{key:"isViewMounted",value:function(e){if(e==null)return!1;var t=e.cid;return t in this.updates.mounted}},{key:"getMountedViews",value:function(){return Object.keys(this.updates.mounted).map(function(e){return xe.views[e]})}},{key:"getUnmountedViews",value:function(){return Object.keys(this.updates.unmounted).map(function(e){return xe.views[e]})}},{key:"checkMountedViews",value:function(e,t){var r=0;if(typeof e!="function")return r;for(var i=this.updates,l=i.mounted,u=i.mountedCids,c=t==null?u.length:Math.min(u.length,t),h=0;h<c;h+=1){var d=u[h];if(!(d in l))continue;var g=xe.views[d];if(g==null)continue;var f=R.call(e,this.graph,{view:g,unmounted:!0});if(f){u.push(d);continue}r+=1;var v=this.registerUnmountedView(g);v&&g.unmount()}return u.splice(0,c),r}},{key:"checkUnmountedViews",value:function(e,t){var r=0;typeof e!="function"&&(e=null);for(var i=this.updates,l=i.unmounted,u=i.unmountedCids,c=t==null?u.length:Math.min(u.length,t),h=0;h<c;h+=1){var d=u[h];if(!(d in l))continue;var g=xe.views[d];if(g==null)continue;if(e&&!R.call(e,this.graph,{view:g,unmounted:!1})){u.push(d);continue}r+=1;var f=this.registerMountedView(g);f&&this.scheduleViewUpdate(g,f,g.priority,{mounting:!0})}return u.splice(0,c),r}},{key:"checkViewImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER},t=e.checkView||this.options.checkView,r=this.checkMountedViews(t,e.unmountedBatchSize),i=this.checkUnmountedViews(t,r>0?Math.min(this.updates.unmountedCids.length-r,e.mountedBatchSize):e.mountedBatchSize);return{mountedCount:i,unmountedCount:r}}},{key:"checkView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.checkViewImpl(e)}},{key:"isFrozen",value:function(){return!!this.options.frozen}},{key:"freeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.key,r=this.updates,i=this.options.frozen,l=r.freezeKey;if(t&&t!==l){if(i&&l)return;r.frozen=i,r.freezeKey=t}this.options.frozen=!0;var u=r.animationId;r.animationId=null,this.isAsync()&&u!=null&&E.cancelAnimationFrame(u),this.graph.trigger("freeze",{key:t})}},{key:"unfreeze",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.key,i=this.updates,l=i.freezeKey;if(r&&l&&r!==l)return;if(i.freezeKey=null,r&&r===l&&i.frozen)return;var u=function(){e.options.frozen=i.frozen=!1,i.sort&&(e.sortViews(),i.sort=!1);var d=t.after;d&&R.call(d,e.graph,e.graph),e.graph.trigger("unfreeze",{key:r})};if(this.isAsync()){this.freeze();var c=t.progress;this.updateViewsAsync(Object.assign(Object.assign({},t),{progress:function(d){var g=d.done,f=d.current,v=d.total;c&&R.call(c,e.graph,{done:g,current:f,total:v}),g&&u()}}))}else this.updateViews(t),u()}},{key:"isAsync",value:function(){return!!this.options.async}},{key:"setAsync",value:function(e){this.options.async=e}},{key:"onRemove",value:function(){this.freeze(),this.removeViews()}},{key:"resetViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var r=0,i=e.length;r<i;r+=1)this.renderView(e[r],t);this.unfreeze({key:"reset"}),this.sortViews()}},{key:"removeView",value:function(e){var t=this.views[e.id];if(t){var r=t.cid,i=this.updates,l=i.mounted,u=i.unmounted;t.remove(),delete this.views[e.id],delete l[r],delete u[r]}return t}},{key:"removeViews",value:function(){var e=this;this.views&&Object.keys(this.views).forEach(function(t){var r=e.views[t];r&&e.removeView(r.cell)}),this.views={}}},{key:"renderView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.id,i=this.views,l=0,u=i[r];if(!e.isVisible())return;if(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))return;if(u)l=a.FLAG_INSERT;else{var c=this.graph.hook.createCellView(e);c&&(u=i[e.id]=c,u.graph=this.graph,l=this.registerUnmountedView(u)|u.getBootstrapFlag())}u&&this.requestViewUpdate(u,l,u.priority,t)}},{key:"isExactSorting",value:function(){return this.options.sorting==="exact"}},{key:"sortViews",value:function(){if(!this.isExactSorting())return;if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}},{key:"sortElements",value:function(e,t){var r=e.map(function(i){var l=i.parentNode,u=l.insertBefore(document.createTextNode(""),i.nextSibling);return function(c){if(l===c)throw new Error("You can't sort elements if any one is a descendant of another.");l.insertBefore(c,u),l.removeChild(u)}});e.sort(t).forEach(function(i,l){return r[l](i)})}},{key:"sortViewsExact",value:function(){var e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,function(r,i){var l=t.getCell(r.getAttribute("data-cell-id")||""),u=t.getCell(i.getAttribute("data-cell-id")||""),c=l.getZIndex()||0,h=u.getZIndex()||0;return c===h?0:c<h?-1:1})}},{key:"addZPivot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zPivots==null&&(this.zPivots={});var t=this.zPivots,r=t[e];if(r)return r;r=t[e]=document.createComment("z-index:".concat(e+1));var i=-Infinity;for(var l in t){var u=+l;if(u<e&&u>i&&(i=u,i===e-1))continue}var c=this.view.stage;if(i!==-Infinity){var h=t[i];c.insertBefore(r,h.nextSibling)}else c.insertBefore(r,c.firstChild);return r}},{key:"removeZPivots",value:function(){var e=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(t){var r=e.zPivots[t];r&&r.parentNode&&r.parentNode.removeChild(r)}),this.zPivots={}}},{key:"insertView",value:function(e){var t=this.view.stage;switch(this.options.sorting){case"approx":var r=e.cell.getZIndex(),i=this.addZPivot(r);t.insertBefore(e.container,i);break;case"exact":default:t.appendChild(e.container);break}}},{key:"findViewByCell",value:function(e){if(e==null)return null;var t=e instanceof ce?e.id:e;return this.views[t]}},{key:"findViewByElem",value:function(e){if(e==null)return null;var t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){var r=this.view.findAttr("data-cell-id",t);if(r)return this.views[r]}return null}},{key:"findViewsFromPoint",value:function(e){var t=this,r={x:e.x,y:e.y};return this.model.getCells().map(function(i){return t.findViewByCell(i)}).filter(function(i){if(i!=null)return E.getBBox(i.container,{target:t.view.stage}).containsPoint(r)})}},{key:"findViewsInArea",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=U.create(e);return this.model.getNodes().map(function(l){return t.findViewByCell(l)}).filter(function(l){if(l){var u=E.getBBox(l.container,{target:t.view.stage});return r.strict?i.containsRect(u):i.isIntersectWithRect(u)}})}},{key:"dispose",value:function(){this.resetUpdates(),this.stopListening()}}]),a}(fe);Jd([fe.dispose()],Bt.prototype,"dispose",null),function(o){o.FLAG_INSERT=1<<30,o.FLAG_REMOVE=1<<29,o.MOUNT_BATCH_SIZE=1e3,o.UPDATE_BATCH_SIZE=1e3,o.MIN_PRIORITY=2,o.SORT_DELAYING_BATCHES=["add","to-front","to-back"],o.UPDATE_DELAYING_BATCHES=["translate"]}(Bt||(Bt={}));var Zd=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},xr=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){this.startListening(),this.options.background&&this.draw(this.options.background)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"updateBackgroundImage",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.size||"auto auto",r=e.position||"center",i=this.graph.scale(),l=this.graph.translate();if(typeof r=="object"){var u=l.tx+i.sx*(r.x||0),c=l.ty+i.sy*(r.y||0);r="".concat(u,"px ").concat(c,"px")}typeof t=="object"&&(t=U.fromSize(t).scale(i.sx,i.sy),t="".concat(t.width,"px ").concat(t.height,"px")),this.view.$(this.elem).css({backgroundSize:t,backgroundPosition:r})}},{key:"drawBackgroundImage",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}var r,i=t.opacity||1,l=t.size,u=t.repeat||"no-repeat",c=bn.registry.get(u);if(typeof c=="function"){var h=t.quality||1;e.width*=h,e.height*=h;var d=c(e,t);if(!(d instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");r=d.toDataURL("image/png"),t.repeat&&u!==t.repeat?u=t.repeat:u="repeat",typeof l=="object"?(l.width*=d.width/e.width,l.height*=d.height/e.height):l===void 0&&(t.size={width:d.width/h,height:d.height/h})}else r=e.src,l===void 0&&(t.size={width:e.width,height:e.height});this.view.$(this.elem).css({opacity:i,backgroundRepeat:u,backgroundImage:"url(".concat(r,")")}),this.updateBackgroundImage(t)}},{key:"updateBackgroundColor",value:function(e){this.container.style.backgroundColor=e||""}},{key:"update",value:function(){this.optionCache&&this.updateBackgroundImage(this.optionCache)}},{key:"draw",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.updateBackgroundColor(t.color),t.image){var r=document.createElement("img");r.onload=function(){return e.drawBackgroundImage(r,t)},r.setAttribute("crossorigin","anonymous"),r.src=t.image,this.optionCache=P.clone(t)}else this.drawBackgroundImage(null),this.optionCache=null}},{key:"clear",value:function(){this.draw()}},{key:"dispose",value:function(){this.clear(),this.stopListening()}},{key:"container",get:function(){return this.view.container}},{key:"elem",get:function(){return this.view.background}}]),a}(fe);Zd([fe.dispose()],xr.prototype,"dispose",null);var Kd=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Qd=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},kr=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;Object(L.a)(this,a),e=s.call(this),e.padding={left:0,top:0,right:0,bottom:0},e.options=$e.getOptions(n);var t=e.graph.scale();e.sx=t.sx,e.sy=t.sy;var r=e.options.width||e.graph.options.width,i=e.options.height||e.graph.options.height;e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName($e.containerClass)).css({width:r,height:i}),e.options.pageVisible&&e.$container.addClass(e.prefixClassName($e.pagedClass)),e.options.className&&e.$container.addClass(e.options.className);var l=e.graph,u=l.container;return u.parentNode&&e.$container.insertBefore(u),e.content=document.createElement("div"),e.$content=e.$(e.content).addClass(e.prefixClassName($e.contentClass)).css({width:l.options.width,height:l.options.height}),e.options.background&&(e.background=document.createElement("div"),e.$background=e.$(e.background).addClass(e.prefixClassName($e.backgroundClass)),e.$content.append(e.background)),e.options.pageVisible||(e.$content.append(e.graph.view.background),e.$content.append(e.graph.view.grid)),e.$content.append(u),e.$content.appendTo(e.container),e.startListening(),e.options.pageVisible||(e.graph.grid.update(),e.graph.background.update()),e.backgroundManager=new a.Background(Object(Ae.a)(e)),e}return Object(F.a)(a,[{key:"startListening",value:function(){var e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),this.options.autoResize&&(e.renderer.isAsync()?e.on("render:done",this.onRenderDone,this):(e.on("unfreeze",this.update,this),t.on("reseted",this.update,this),t.on("cell:added",this.update,this),t.on("cell:removed",this.update,this),t.on("cell:changed",this.update,this),t.on("batch:stop",this.onBatchStop,this))),this.delegateBackgroundEvents()}},{key:"stopListening",value:function(){var e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.update,this),t.off("reseted",this.update,this),t.off("cell:added",this.update,this),t.off("cell:removed",this.update,this),t.off("cell:changed",this.update,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}},{key:"delegateBackgroundEvents",value:function(e){var t=this,r=e||Mt.events;this.delegatedHandlers=Object.keys(r).reduce(function(i,l){var u=r[l];if(l.indexOf(" ")===-1)if(typeof u=="function")i[l]=u;else{var c=t.graph.view[u];typeof c=="function"&&(c=c.bind(t.graph.view),i[l]=c)}return i},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(i){t.delegateEvent(i,{guarded:!1},t.onBackgroundEvent)})}},{key:"undelegateBackgroundEvents",value:function(){var e=this;Object.keys(this.delegatedHandlers).forEach(function(t){e.undelegateEvent(t,e.onBackgroundEvent)})}},{key:"onBackgroundEvent",value:function(e){var t=!1,r=e.target;if(this.options.pageVisible?this.options.background?t=this.background===r:t=this.content===r:t=this.graph.view.background===r||this.graph.view.grid===r,t){var i=this.delegatedHandlers[e.type];typeof i=="function"&&i.apply(this.graph,arguments)}}},{key:"onRenderDone",value:function(e){var t=e.stats;t.priority<2&&this.update()}},{key:"onResize",value:function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}},{key:"onScale",value:function(e){var t=e.sx,r=e.sy,i=e.ox,l=e.oy;this.updateScale(t,r),(i||l)&&(this.centerPoint(i,l),this.updatePageBreak()),typeof this.options.fitTocontentOptions=="function"&&this.update()}},{key:"storeScrollPosition",value:function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}},{key:"restoreScrollPosition",value:function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}},{key:"beforeManipulation",value:function(){(we.IS_IE||we.IS_EDGE)&&this.$container.css("visibility","hidden")}},{key:"afterManipulation",value:function(){(we.IS_IE||we.IS_EDGE)&&this.$container.css("visibility","visible")}},{key:"updatePageBreak",value:function(){this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak);var e=this.options;if(e.pageVisible&&e.pageBreak){var t=Math.round(this.graph.options.width/this.sx),r=Math.round(this.graph.options.height/this.sy),i=e.pageWidth||t,l=e.pageHeight||r;if(t>i||r>l){this.pageBreak=document.createElement("div"),E.addClass(this.pageBreak,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(this.pageBreak);for(var u=1,c=Math.floor(t/i);u<c;u+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:u*i}).appendTo(this.pageBreak);for(var h=1,d=Math.floor(r/l);h<d;h+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:h*l}).appendTo(this.pageBreak)}}}},{key:"onBatchStop",value:function(e){Bt.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}},{key:"update",value:function(){var e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);var t=this.options.fitTocontentOptions;typeof t=="function"&&(t=R.call(t,this,this));var r=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},t);this.graph.fitToContent(this.getFitToContentOptions(r))}},{key:"getFitToContentOptions",value:function(e){var t=this.sx,r=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=r),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=r),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*r,bottom:(e.padding.bottom||0)*r}:typeof e.padding=="number"&&(e.padding=e.padding*t),e}},{key:"updateScale",value:function(e,t){var r=this.graph.options,i=e/this.sx,l=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(r.x*i,r.y*l),this.graph.resizeGraph(r.width*i,r.height*l)}},{key:"scrollbarPosition",value:function(e,t,r){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};var i={};return typeof e=="number"&&(i.scrollLeft=e),typeof t=="number"&&(i.scrollTop=t),r&&r.animation?this.$container.animate(i,r.animation):this.$container.prop(i),this}},{key:"scrollToPoint",value:function(e,t,r){var i=this.getClientSize(),l=this.graph.matrix(),u={};return typeof e=="number"&&(u.scrollLeft=e-i.width/2+l.e+(this.padding.left||0)),typeof t=="number"&&(u.scrollTop=t-i.height/2+l.f+(this.padding.top||0)),r&&r.animation?this.$container.animate(u,r.animation):this.$container.prop(u),this}},{key:"scrollToContent",value:function(e){var t=this.sx,r=this.sy,i=this.graph.getContentArea().getCenter();return this.scrollToPoint(i.x*t,i.y*r,e)}},{key:"scrollToCell",value:function(e,t){var r=this.sx,i=this.sy,l=e.getBBox().getCenter();return this.scrollToPoint(l.x*r,l.y*i,t)}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,r){var i=this.graph.matrix(),l=i.a,u=i.d,c=-i.e,h=-i.f,d=c+this.graph.options.width,g=h+this.graph.options.height,f;if(typeof e=="number"||typeof t=="number"){f=r;var v=this.getVisibleArea().getCenter();typeof e=="number"?e=e*l:e=v.x,typeof t=="number"?t=t*u:t=v.y}else f=e,e=(c+d)/2,t=(h+g)/2;if(f&&f.padding)return this.positionPoint({x:e,y:t},"50%","50%",f);var p=this.getPadding(),C=this.getClientSize(),b=C.width/2,y=C.height/2,w=b-p.left-e+c,x=b-p.right+e-d,k=y-p.top-t+h,M=y-p.bottom+t-g;return this.addPadding(Math.max(w,0),Math.max(x,0),Math.max(k,0),Math.max(M,0)),this.scrollToPoint(e,t,f||void 0)}},{key:"centerContent",value:function(e){return this.positionContent("center",e)}},{key:"centerCell",value:function(e,t){return this.positionCell(e,"center",t)}},{key:"positionContent",value:function(e,t){var r=this.graph.getContentArea(t);return this.positionRect(r,e,t)}},{key:"positionCell",value:function(e,t,r){var i=e.getBBox();return this.positionRect(i,t,r)}},{key:"positionRect",value:function(e,t,r){var i=U.create(e);switch(t){case"center":return this.positionPoint(i.getCenter(),"50%","50%",r);case"top":return this.positionPoint(i.getTopCenter(),"50%",0,r);case"top-right":return this.positionPoint(i.getTopRight(),"100%",0,r);case"right":return this.positionPoint(i.getRightMiddle(),"100%","50%",r);case"bottom-right":return this.positionPoint(i.getBottomRight(),"100%","100%",r);case"bottom":return this.positionPoint(i.getBottomCenter(),"50%","100%",r);case"bottom-left":return this.positionPoint(i.getBottomLeft(),0,"100%",r);case"left":return this.positionPoint(i.getLeftMiddle(),0,"50%",r);case"top-left":return this.positionPoint(i.getTopLeft(),0,0,r);default:return this}}},{key:"positionPoint",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i.padding,u=Qd(i,["padding"]),c=H.normalizeSides(l),h=U.fromSize(this.getClientSize()),d=h.clone().moveAndExpand({x:c.left,y:c.top,width:-c.right-c.left,height:-c.top-c.bottom});t=H.normalizePercentage(t,Math.max(0,d.width)),t<0&&(t=d.width+t),r=H.normalizePercentage(r,Math.max(0,d.height)),r<0&&(r=d.height+r);var g=d.getTopLeft().translate(t,r),f=h.getCenter().diff(g),v=this.zoom(),p=f.scale(1/v,1/v),C=O.create(e).translate(p);return this.centerPoint(C.x,C.y,u)}},{key:"zoom",value:function(e,t){if(e==null)return this.sx;t=t||{};var r,i,l=this.getClientSize(),u=this.clientToLocalPoint(l.width/2,l.height/2),c=e,h=e;if(t.absolute||(c=c+this.sx,h=h+this.sy),t.scaleGrid&&(c=Math.round(c/t.scaleGrid)*t.scaleGrid,h=Math.round(h/t.scaleGrid)*t.scaleGrid),t.maxScale&&(c=Math.min(t.maxScale,c),h=Math.min(t.maxScale,h)),t.minScale&&(c=Math.max(t.minScale,c),h=Math.max(t.minScale,h)),c=this.graph.transform.clampScale(c),h=this.graph.transform.clampScale(h),t.center){var d=c/this.sx,g=h/this.sy;r=t.center.x-(t.center.x-u.x)/d,i=t.center.y-(t.center.y-u.y)/g}else r=u.x,i=u.y;return this.beforeManipulation(),this.graph.transform.scale(c,h),this.centerPoint(r,i),this.afterManipulation(),this}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=U.create(e),i=this.graph;t.contentArea=r,t.viewportArea==null&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),i.transform.scaleContentToFitImpl(t,!1);var l=r.getCenter();return this.centerPoint(l.x,l.y),this.afterManipulation(),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.graph.getContentArea(e),e)}},{key:"transitionToPoint",value:function(e,t,r){var i=this;typeof e=="object"?(r=t,t=e.y,e=e.x):t=t,r==null&&(r={});var l,u,c=this.sx,h=Math.max(r.scale||c,1e-6),d=this.getClientSize(),g=new O(e,t),f=this.clientToLocalPoint(d.width/2,d.height/2);if(c===h){var v=f.diff(g).scale(c,c).round();l="translate(".concat(v.x,"px,").concat(v.y,"px)")}else{var p=h/(c-h)*g.distance(f),C=f.clone().move(g,p),b=this.localToBackgroundPoint(C).round();l="scale(".concat(h/c,")"),u="".concat(b.x,"px ").concat(b.y,"px")}var y=r.onTransitionEnd;return this.$container.addClass($e.transitionClassName),this.$content.off($e.transitionEventName).on($e.transitionEventName,function(w){i.syncTransition(h,{x:e,y:t}),typeof y=="function"&&R.call(y,i,w.originalEvent)}).css({transform:l,transformOrigin:u,transition:"transform",transitionDuration:r.duration||"1s",transitionDelay:r.delay,transitionTimingFunction:r.timing}),this}},{key:"syncTransition",value:function(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}},{key:"removeTransition",value:function(){return this.$container.removeClass($e.transitionClassName),this.$content.off($e.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=U.create(e),i=t.maxScale||Infinity,l=t.minScale||Number.MIN_VALUE,u=t.scaleGrid||null,c=t.visibility||1,h=t.center?O.create(t.center):r.getCenter(),d=this.getClientSize(),g=d.width*c,f=d.height*c,v=new U(h.x-g/2,h.y-f/2,g,f).getMaxUniformScaleToFit(r,h);return v=Math.min(v,i),u&&(v=Math.floor(v/u)*u),v=Math.max(l,v),this.transitionToPoint(h,Object.assign({scale:v},t))}},{key:"startPanning",value:function(e){var t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.normalizeEvent(e),r=t.clientX-this.clientX,i=t.clientY-this.clientY;this.container.scrollTop-=i,this.container.scrollLeft-=r,this.clientX=t.clientX,this.clientY=t.clientY}},{key:"stopPanning",value:function(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}},{key:"clientToLocalPoint",value:function(e,t){var r=typeof e=="object"?e.x:e,i=typeof e=="object"?e.y:t,l=this.graph.matrix();return r+=this.container.scrollLeft-this.padding.left-l.e,i+=this.container.scrollTop-this.padding.top-l.f,new O(r/l.a,i/l.d)}},{key:"localToBackgroundPoint",value:function(e,t){var r=typeof e=="object"?O.create(e):new O(e,t),i=this.graph.matrix(),l=this.padding;return E.transformPoint(r,i).translate(l.left,l.top)}},{key:"resize",value:function(e,t){var r=e??this.container.clientWidth,i=t??this.container.clientHeight;typeof r=="number"&&(r=Math.round(r)),typeof i=="number"&&(i=Math.round(i)),this.options.width=r,this.options.height=i,this.$container.css({width:r,height:i}),this.update()}},{key:"getClientSize",value:function(){return{width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"autoScroll",value:function(e,t){var r=10,i=this.container,l=i.getBoundingClientRect(),u=0,c=0;e<=l.left+r&&(u=-r),t<=l.top+r&&(c=-r),e>=l.right-r&&(u=r),t>=l.bottom-r&&(c=r),u!==0&&(i.scrollLeft+=u),c!==0&&(i.scrollTop+=c)}},{key:"addPadding",value:function(e,t,r,i){var l=this.getPadding();this.padding={left:Math.round(l.left+(e||0)),top:Math.round(l.top+(r||0)),bottom:Math.round(l.bottom+(i||0)),right:Math.round(l.right+(t||0))},l=this.padding,this.$content.css({width:l.left+this.graph.options.width+l.right,height:l.top+this.graph.options.height+l.bottom});var u=this.graph.container;return u.style.left="".concat(this.padding.left,"px"),u.style.top="".concat(this.padding.top,"px"),this}},{key:"getPadding",value:function(){var e=this.options.padding;return typeof e=="function"?H.normalizeSides(R.call(e,this)):H.normalizeSides(e)}},{key:"getVisibleArea",value:function(){var e=this.graph.matrix(),t=this.getClientSize(),r={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},i=E.transformRectangle(r,e.inverse());return i.x-=(this.padding.left||0)/this.sx,i.y-=(this.padding.top||0)/this.sy,i}},{key:"isCellVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.getBBox(),i=this.getVisibleArea();return t.strict?i.containsRect(r):i.isIntersectWithRect(r)}},{key:"isPointVisible",value:function(e){return this.getVisibleArea().containsPoint(e)}},{key:"lock",value:function(){return this.$container.css("overflow","hidden"),this}},{key:"unlock",value:function(){return this.$container.css("overflow","scroll"),this}},{key:"onRemove",value:function(){this.stopListening()}},{key:"dispose",value:function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}},{key:"graph",get:function(){return this.options.graph}},{key:"model",get:function(){return this.graph.model}}]),a}(ue);Kd([ue.dispose()],kr.prototype,"dispose",null),function(o){var s=function(a){Object(I.a)(e,a);var n=Object(V.a)(e);function e(t){var r;return Object(L.a)(this,e),r=n.call(this,t.graph),r.scroller=t,t.options.background&&r.draw(t.options.background),r}return Object(F.a)(e,[{key:"init",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"elem",get:function(){return this.scroller.background}},{key:"container",get:function(){return this.scroller.content}}]),e}(xr);o.Background=s}(kr||(kr={}));var $e;(function(o){o.containerClass="graph-scroller",o.panningClass="".concat(o.containerClass,"-panning"),o.pannableClass="".concat(o.containerClass,"-pannable"),o.pagedClass="".concat(o.containerClass,"-paged"),o.contentClass="".concat(o.containerClass,"-content"),o.backgroundClass="".concat(o.containerClass,"-background"),o.transitionClassName="transition-in-progress",o.transitionEventName="transitionend.graph-scroller-transition",o.defaultOptions={padding:function(){var n=this.getClientSize(),e=Math.max(this.options.minVisibleWidth||0,1)||1,t=Math.max(this.options.minVisibleHeight||0,1)||1,r=Math.max(n.width-e,0),i=Math.max(n.height-t,0);return{left:r,top:i,right:r,bottom:i}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function s(a){var n=P.merge({},o.defaultOptions,a),e=a.graph;return n.pageWidth==null&&(n.pageWidth=e.options.width),n.pageHeight==null&&(n.pageHeight=e.options.height),n}o.getOptions=s})($e||($e={}));function ze(o,s,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(a){var e=a.graph,t=e.view.normalizeEvent(s),r=e.snapToGrid(t.clientX,t.clientY);a.notify(o,Object.assign({e:t,view:a,node:a.cell,cell:a.cell,x:r.x,y:r.y},n))}}var qd=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Sn=function(){function o(){Object(L.a)(this,o)}return Object(F.a)(o,[{key:"initHandles",value:function(){var a=this,n;if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(r){return a.addHandle(r)}),this.handleOptions.type==="pie"){if(this.pie.toggles){var e=he.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(function(r){var i=a.$("<div/>");a.applyAttrs(i,r.attrs),i.addClass(e).addClass("".concat(e,"-pos-").concat(r.position||"e")).attr("data-name",r.name).appendTo(a.container),a.$pieToggles[r.name]=i})}this.setPieIcons()}if(this.$handleContainer){var t=this.handleOptions.type||"surround";this.$handleContainer.addClass(he.wrap).addClass(he.animate).addClass("".concat(he.handle,"-").concat(t))}this.delegateEvents((n={},Object(q.a)(n,"mousedown .".concat(he.handle),"onHandleMouseDown"),Object(q.a)(n,"touchstart .".concat(he.handle),"onHandleMouseDown"),Object(q.a)(n,"mousedown .".concat(he.pieToggle),"onPieToggleMouseDown"),Object(q.a)(n,"touchstart .".concat(he.pieToggle),"onPieToggleMouseDown"),n))}},{key:"onHandleMouseDown",value:function(a){var n=this.$(a.currentTarget).closest(".".concat(he.handle)).attr("data-action");n&&(a.preventDefault(),a.stopPropagation(),this.setEventData(a,{action:n,clientX:a.clientX,clientY:a.clientY,startX:a.clientX,startY:a.clientY}),a.type==="mousedown"&&a.button===2?this.triggerHandleAction(n,"contextmenu",a):(this.triggerHandleAction(n,"mousedown",a),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},a.data)))}},{key:"onHandleMouseMove",value:function(a){var n=this.getEventData(a),e=n.action;e&&this.triggerHandleAction(e,"mousemove",a)}},{key:"onHandleMouseUp",value:function(a){var n=this.getEventData(a),e=n.action;e&&(this.triggerHandleAction(e,"mouseup",a),this.undelegateDocumentEvents())}},{key:"triggerHandleAction",value:function(a,n,e,t){e.preventDefault(),e.stopPropagation();var r=this.normalizeEvent(e),i=this.getEventData(r),l=this.graph.snapToGrid(r.clientX,r.clientY),u=this.graph.snapToGrid(i.clientX,i.clientY),c=l.x-u.x,h=l.y-u.y;this.trigger("action:".concat(a,":").concat(n),Object.assign({e:r,dx:c,dy:h,x:l.x,y:l.y,offsetX:e.clientX-i.startX,offsetY:e.clientY-i.startY},t)),i.clientX=e.clientX,i.clientY=e.clientY}},{key:"onPieToggleMouseDown",value:function(a){a.stopPropagation();var n=this.$(a.target).closest(".".concat(he.pieToggle)).attr("data-name");this.isOpen(n)||this.isOpen()&&this.toggleState(),this.toggleState(n)}},{key:"setPieIcons",value:function(){var a=this;this.handleOptions.type==="pie"&&this.$handleContainer.find(".".concat(he.handle)).each(function(n,e){var t=a.$(e),r=t.attr("data-action"),i=he.pieSlice,l=a.getHandle(r);if(!l||!l.icon){var u=window.getComputedStyle(e,":before").getPropertyValue("content");if(u&&u!=="none"){var c=t.find(".".concat(i,"-txt"));c.length&&te.create(c[0]).text(u.replace(/['"]/g,""))}var h=t.css("background-image");if(h){var d=h.match(/url\(['"]?([^'"]+)['"]?\)/);if(d){var g=d[1],f=t.find(".".concat(i,"-img"));f.length>0&&te.create(f[0]).attr("xlink:href",g)}}}})}},{key:"getHandleIdx",value:function(a){return this.handles.findIndex(function(n){return n.name===a})}},{key:"hasHandle",value:function(a){return this.getHandleIdx(a)>=0}},{key:"getHandle",value:function(a){return this.handles.find(function(n){return n.name===a})}},{key:"renderHandle",value:function(a){var n=this.$("<div/>").addClass("".concat(he.handle," ").concat(he.handle,"-").concat(a.name)).attr("data-action",a.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){var e=this.getHandleIdx(a.name),t=this.pie,r=t.outerRadius,i=t.innerRadius,l=(r+i)/2,u=new O(r,r),c=re.toRad(t.sliceAngle),h=e*c+re.toRad(t.startAngle),d=h+c,g=E.createSlicePathData(i,r,h,d),f=te.create("svg").addClass("".concat(he.pieSlice,"-svg")),v=te.create("path").addClass(he.pieSlice).attr("d",g).translate(r,r),p=O.fromPolar(l,-h-c/2,u).toJSON(),C=t.iconSize,b=te.create("image").attr(p).addClass("".concat(he.pieSlice,"-img"));p.y=p.y+C-2;var y=te.create("text",{"font-size":C}).attr(p).addClass("".concat(he.pieSlice,"-txt"));b.attr({width:C,height:C}),b.translate(-C/2,-C/2),y.translate(-C/2,-C/2),f.append([v,b,y]),n.append(f.node)}else n.addClass("".concat(he.handle,"-pos-").concat(a.position)),a.content&&(typeof a.content=="string"?n.html(a.content):n.append(a.content));return this.updateHandleIcon(n,a.icon),this.applyAttrs(n,a.attrs),n}},{key:"addHandle",value:function(a){var n=this;if(!this.hasHandle(a.name)){this.handles.push(a);var e=a.events;e&&Object.keys(e).forEach(function(t){var r=e[t],i="action:".concat(a.name,":").concat(t);typeof r=="string"?n.on(i,n[r],n):n.on(i,r)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(a))}return this}},{key:"addHandles",value:function(a){var n=this;return a.forEach(function(e){return n.addHandle(e)}),this}},{key:"removeHandles",value:function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}},{key:"removeHandle",value:function(a){var n=this,e=this.getHandleIdx(a),t=this.handles[e];return t&&(t.events&&Object.keys(t.events).forEach(function(r){n.off("action:".concat(a,":").concat(r))}),this.getHandleElem(a).remove(),this.handles.splice(e,1)),this}},{key:"changeHandle",value:function(a,n){var e=this.getHandle(a);return e&&(this.removeHandle(a),this.addHandle(Object.assign(Object.assign({},e),n))),this}},{key:"toggleHandle",value:function(a,n){var e=this.getHandle(a);if(e){var t=this.getHandleElem(a),r="".concat(he.handle,"-selected");n===void 0&&(n=!t.hasClass(r)),t.toggleClass(r,n);var i=n?e.iconSelected:e.icon;i&&this.updateHandleIcon(t,i)}return this}},{key:"selectHandle",value:function(a){return this.toggleHandle(a,!0)}},{key:"deselectHandle",value:function(a){return this.toggleHandle(a,!1)}},{key:"deselectAllHandles",value:function(){var a=this;return this.handles.forEach(function(n){return a.deselectHandle(n.name)}),this}},{key:"getHandleElem",value:function(a){return this.$handleContainer.find(".".concat(he.handle,"-").concat(a))}},{key:"updateHandleIcon",value:function(a,n){if(this.handleOptions.type==="pie"){var e=a.find(".".concat(he.pieSliceImg));this.$(e[0]).attr("xlink:href",n||"")}else a.css("background-image",n?"url(".concat(n,")"):"")}},{key:"isRendered",value:function(){return this.$handleContainer!=null}},{key:"isOpen",value:function(a){return this.isRendered()?a?this.$pieToggles[a].hasClass(he.pieToggleOpened):this.$handleContainer.hasClass("".concat(he.pieOpended)):!1}},{key:"toggleState",value:function(a){var n=this;if(this.isRendered()){var e=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(function(i){var l=n.$pieToggles[i];l.removeClass(he.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:a}),e.removeClass(he.pieOpended);else{if(this.trigger("pie:open",{name:a}),a){var t=this.pie.toggles,r=t&&t.find(function(i){return i.name===a});r&&e.attr({"data-pie-toggle-name":r.name,"data-pie-toggle-position":r.position}),this.$pieToggles[a].addClass(he.pieToggleOpened)}e.addClass(he.pieOpended)}}}},{key:"applyAttrs",value:function(a,n){if(n){var e=ue.$(a);Object.keys(n).forEach(function(t){var r=e.find(t).addBack().filter(t),i=n[t],l=i.class,u=qd(i,["class"]);l&&r.addClass(l),r.attr(u)})}}},{key:"handleClassName",get:function(){return he.handle}},{key:"pie",get:function(){return Object.assign(Object.assign({},o.defaultPieOptions),this.handleOptions.pie)}}]),o}();(function(o){o.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(Sn||(Sn={}));var he;(function(o){o.handle=ue.prototype.prefixClassName("widget-handle"),o.wrap="".concat(o.handle,"-wrap"),o.animate="".concat(o.handle,"-animate"),o.pieOpended="".concat(o.handle,"-pie-opened"),o.pieToggle="".concat(o.handle,"-pie-toggle"),o.pieToggleOpened="".concat(o.handle,"-pie-toggle-opened"),o.pieSlice="".concat(o.handle,"-pie-slice"),o.pieSliceImg="".concat(o.handle,"-pie-slice-img")})(he||(he={}));var _d=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},eg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Er=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;Object(L.a)(this,a),e=s.call(this);var t=n,r=t.view,i=t.cell,l=t.node,u=t.edge,c=t.graph,h=eg(t,["view","cell","node","edge","graph"]);r?(e.view=r,e.cell=r.cell,e.graph=r.graph,e.model=e.graph.model):(i||u||l)&&c&&(e.cell=l||u||i,e.view=c.renderer.findViewByCell(e.cell),e.graph=c,e.model=e.graph.model);var d=e.constructor;return n.clearAll!==!1&&d.removeInstances(e.graph),d.register(Object(Ae.a)(e)),e.init(h),e}return Object(F.a)(a,[{key:"init",value:function(e){}},{key:"render",value:function(){return this}},{key:"startListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}},{key:"stopListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}},{key:"remove",value:function(){this.stopListening();var e=this.constructor;return e.unregister(this),Object(_.a)(Object(ee.a)(a.prototype),"remove",this).call(this)}},{key:"dispose",value:function(){this.remove()}}],[{key:"ensureCache",value:function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}},{key:"register",value:function(e,t){t==null&&(t=e.graph);var r=this.ensureCache(),i=r[t.view.cid];i==null&&(i=r[t.view.cid]={}),i[e.cid]=e}},{key:"unregister",value:function(e,t){t==null&&(t=e.graph);var r=this.ensureCache();r[t.view.cid]&&delete r[t.view.cid][e.cid]}},{key:"removeInstances",value:function(e){var t=this.ensureCache(),r=t[e.view.cid];r&&Object.keys(r).forEach(function(i){var l=r[i];l&&l.remove()})}},{key:"getInstances",value:function(e){var t=this.ensureCache();return t[e.view.cid]||{}}}]),a}(ue);Er.instanceCache=new WeakMap,_d([ue.dispose()],Er.prototype,"dispose",null);var tg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},bi=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this),e.options=P.merge({},Fe.defaultOptions,n),e.options.model&&(e.options.collection=e.options.model.collection),e.options.collection?e.collection=e.options.collection:(e.collection=new $o([],{comparator:Fe.depthComparator}),e.options.collection=e.collection),e.boxCount=0,e.createContainer(),e.initHandles(),e.startListening(),e}return Object(F.a)(a,[{key:"startListening",value:function(){var e,t=this.graph,r=this.collection;this.delegateEvents((e={},Object(q.a)(e,"mousedown .".concat(this.boxClassName),"onSelectionBoxMouseDown"),Object(q.a)(e,"touchstart .".concat(this.boxClassName),"onSelectionBoxMouseDown"),e),!0),t.on("scale",this.onTransformed,this),t.on("translate",this.onTransformed,this),t.model.on("updated",this.onModelUpdated,this),r.on("added",this.onCellAdded,this),r.on("removed",this.onCellRemoved,this),r.on("reseted",this.onReseted,this),r.on("updated",this.onCollectionUpdated,this),r.on("node:change:position",this.onNodePositionChanged,this),r.on("cell:change:*",this.onCellChanged,this)}},{key:"stopListening",value:function(){var e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onTransformed,this),e.off("translate",this.onTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:change:*",this.onCellChanged,this)}},{key:"onRemove",value:function(){this.stopListening()}},{key:"onTransformed",value:function(){this.updateSelectionBoxes({async:!1})}},{key:"onCellChanged",value:function(){this.updateSelectionBoxes()}},{key:"onNodePositionChanged",value:function(e){var t=e.node,r=e.options;if(this.options.showNodeSelectionBox!==!0&&!this.translating){this.translating=!0;var i=t.position(),l=t.previous("position"),u=i.x-l.x,c=i.y-l.y;(u!==0||c!==0)&&this.translateSelectedNodes(u,c,t,r),this.translating=!1}}},{key:"onModelUpdated",value:function(e){var t=e.removed;t&&t.length&&this.unselect(t)}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.collection.has(e)}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.dryrun=!0;var r=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(r,t),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e){var r=this.cells,i=this.filter(Array.isArray(e)?e:[e]),l={},u={};r.forEach(function(d){return l[d.id]=d}),i.forEach(function(d){return u[d.id]=d});var c=[],h=[];return i.forEach(function(d){l[d.id]||c.push(d)}),r.forEach(function(d){u[d.id]||h.push(d)}),h.length&&this.unselect(h,Object.assign(Object.assign({},t),{ui:!0})),c.length&&this.select(c,Object.assign(Object.assign({},t),{ui:!0})),h.length===0&&c.length===0&&this.updateContainer(),this}return this.clean(t)}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.length&&this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0})),this}},{key:"setFilter",value:function(e){this.options.filter=e}},{key:"setContent",value:function(e){this.options.content=e}},{key:"startSelecting",value:function(e){e=this.normalizeEvent(e),this.clean();var t,r,i=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&i.contains(e.target))t=e.offsetX,r=e.offsetY;else{var l=this.$(i).offset(),u=i.scrollLeft,c=i.scrollTop;t=e.clientX-l.left+window.pageXOffset+u,r=e.clientY-l.top+window.pageYOffset+c}this.$container.css({top:r,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:r}),this.delegateDocumentEvents(Fe.documentEvents,e.data)}},{key:"filter",value:function(e){var t=this,r=this.options.filter;return Array.isArray(r)?e.filter(function(i){return!r.includes(i)&&!r.includes(i.shape)}):typeof r=="function"?e.filter(function(i){return R.call(r,t.graph,i)}):e}},{key:"stopSelecting",value:function(e){var t=this.graph,r=this.getEventData(e).action;switch(r){case"selecting":{var i=this.$container.width(),l=this.$container.height(),u=this.$container.offset(),c=t.pageToLocal(u.left,u.top),h=t.transform.getScale();i=i/h.sx,l=l/h.sy;var d=new U(c.x,c.y,i,l),g=this.getNodesInArea(d).map(function(v){return v.cell});this.reset(g),this.hideRubberband();break}case"translating":{this.graph.model.stopBatch("move-selection");var f=t.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mouseup",e,f.x,f.y);break}default:{this.clean();break}}}},{key:"onMouseUp",value:function(e){var t=this.getEventData(e).action;t&&(this.stopSelecting(e),this.undelegateDocumentEvents())}},{key:"onSelectionBoxMouseDown",value:function(e){var t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);var r=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:r});var i=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,i.x,i.y),this.delegateDocumentEvents(Fe.documentEvents,t.data)}},{key:"startTranslating",value:function(e){this.graph.model.startBatch("move-selection");var t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y})}},{key:"adjustSelection",value:function(e){var t=this.normalizeEvent(e),r=this.getEventData(t),i=r.action;switch(i){case"selecting":{var l=r;l.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),l.moving=!0);var u=t.clientX-l.clientX,c=t.clientY-l.clientY,h=parseInt(this.$container.css("left"),10),d=parseInt(this.$container.css("top"),10);this.$container.css({left:u<0?l.offsetX+u:h,top:c<0?l.offsetY+c:d,width:Math.abs(u),height:Math.abs(c)});break}case"translating":{var g=r,f=this.graph.snapToGrid(t.clientX,t.clientY),v=f.x-g.clientX,p=f.y-g.clientY,C=this.graph.hook.getRestrictArea();if(C){var b=this.collection.toArray(),y=ce.getCellsBBox(b),w=C.x-y.x,x=C.y-y.y,k=C.x+C.width-(y.x+y.width),M=C.y+C.height-(y.y+y.height);v<w&&(v=w),p<x&&(p=x),k<v&&(v=k),M<p&&(p=M)}if(v||p){if(this.translateSelectedNodes(v,p),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{var A=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+=".concat(v*A.sx),top:"+=".concat(p*A.sy)})}g.clientX=f.x,g.clientY=f.y}this.notifyBoxEvent("box:mousemove",e,f.x,f.y);break}}this.boxesUpdated=!1}},{key:"translateSelectedNodes",value:function(e,t,r,i){var l=this,u={};this.collection.toArray().forEach(function(c){if(!u[c.id]&&c!==r){var h=Object.assign(Object.assign({},i),{selection:l.cid});c.translate(e,t,h),c.getDescendants({deep:!0}).forEach(function(d){u[d.id]=!0}),l.graph.model.getConnectedEdges(c).forEach(function(d){u[d.id]||(d.translate(e,t,h),u[d.id]=!0)})}})}},{key:"getNodesInArea",value:function(e){var t=this.graph,r={strict:this.options.strict};return this.options.useCellGeometry?t.model.getNodesInArea(e,r).map(function(i){return t.renderer.findViewByCell(i)}).filter(function(i){return i!=null}):t.renderer.findViewsInArea(e,r)}},{key:"notifyBoxEvent",value:function(e,t,r,i){var l=this.getEventData(t),u=l.activeView;this.trigger(e,{e:t,view:u,x:r,y:i,cell:u.cell})}},{key:"getSelectedClassName",value:function(e){return this.prefixClassName("".concat(e.isNode()?"node":"edge","-selected"))}},{key:"addCellSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}},{key:"removeCellUnSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}},{key:"destroySelectionBox",value:function(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find('[data-cell-id="'.concat(e.id,'"]')).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}},{key:"destroyAllSelectionBoxes",value:function(e){var t=this;e.forEach(function(r){return t.removeCellUnSelectedClassName(r)}),this.hide(),this.$boxes.remove(),this.boxCount=0}},{key:"hide",value:function(){this.$container.removeClass(this.prefixClassName(Fe.classNames.rubberband)).removeClass(this.prefixClassName(Fe.classNames.selected))}},{key:"showRubberband",value:function(){this.$container.addClass(this.prefixClassName(Fe.classNames.rubberband))}},{key:"hideRubberband",value:function(){this.$container.removeClass(this.prefixClassName(Fe.classNames.rubberband))}},{key:"showSelected",value:function(){this.$container.removeAttr("style").addClass(this.prefixClassName(Fe.classNames.selected))}},{key:"createContainer",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Fe.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Fe.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Fe.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}},{key:"updateContainer",value:function(){var e=this,t={x:Infinity,y:Infinity},r={x:0,y:0},i=this.collection.toArray().filter(function(c){return e.canShowSelectionBox(c)});i.forEach(function(c){var h=e.graph.renderer.findViewByCell(c);if(h){var d=h.getBBox({useCellGeometry:e.options.useCellGeometry});t.x=Math.min(t.x,d.x),t.y=Math.min(t.y,d.y),r.x=Math.max(r.x,d.x+d.width),r.y=Math.max(r.y,d.y+d.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:r.x-t.x,height:r.y-t.y}).attr("data-selection-length",this.collection.length);var l=this.options.content;if(l)if(typeof l=="function"){var u=R.call(l,this.graph,this,this.$selectionContent[0]);u&&this.$selectionContent.html(u)}else this.$selectionContent.html(l);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"canShowSelectionBox",value:function(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}},{key:"createSelectionBox",value:function(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){var t=this.graph.renderer.findViewByCell(e);if(t){var r=t.getBBox({useCellGeometry:this.options.useCellGeometry}),i=this.boxClassName;this.$("<div/>").addClass(i).addClass("".concat(i,"-").concat(e.isNode()?"node":"edge")).attr("data-cell-id",e.id).css({position:"absolute",left:r.x,top:r.y,width:r.width,height:r.height}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}},{key:"updateSelectionBoxes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}},{key:"confirmUpdate",value:function(){var e=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(t,r){var i=e.$(r).remove().attr("data-cell-id"),l=e.collection.get(i);l&&e.createSelectionBox(l)}),this.updateContainer()),0}},{key:"getCellViewFromElem",value:function(e){var t=e.getAttribute("data-cell-id");if(t){var r=this.collection.get(t);if(r)return this.graph.renderer.findViewByCell(r)}return null}},{key:"onCellRemoved",value:function(e){var t=e.cell;this.destroySelectionBox(t),this.updateContainer()}},{key:"onReseted",value:function(e){var t=this,r=e.previous,i=e.current;this.destroyAllSelectionBoxes(r),i.forEach(function(l){t.listenCellRemoveEvent(l),t.createSelectionBox(l)}),this.updateContainer()}},{key:"onCellAdded",value:function(e){var t=e.cell;this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}},{key:"listenCellRemoveEvent",value:function(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}},{key:"onCollectionUpdated",value:function(e){var t=this,r=e.added,i=e.removed,l=e.options;r.forEach(function(c){t.trigger("cell:selected",{cell:c,options:l}),t.graph.trigger("cell:selected",{cell:c,options:l}),c.isNode()?(t.trigger("node:selected",{cell:c,options:l,node:c}),t.graph.trigger("node:selected",{cell:c,options:l,node:c})):c.isEdge()&&(t.trigger("edge:selected",{cell:c,options:l,edge:c}),t.graph.trigger("edge:selected",{cell:c,options:l,edge:c}))}),i.forEach(function(c){t.trigger("cell:unselected",{cell:c,options:l}),t.graph.trigger("cell:unselected",{cell:c,options:l}),c.isNode()?(t.trigger("node:unselected",{cell:c,options:l,node:c}),t.graph.trigger("node:unselected",{cell:c,options:l,node:c})):c.isEdge()&&(t.trigger("edge:unselected",{cell:c,options:l,edge:c}),t.graph.trigger("edge:unselected",{cell:c,options:l,edge:c}))});var u={added:r,removed:i,options:l,selected:this.cells};this.trigger("selection:changed",u),this.graph.trigger("selection:changed",u)}},{key:"deleteSelectedCells",value:function(){var e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}},{key:"startRotate",value:function(e){var t=e.e,r=this.collection.toArray(),i=ce.getCellsBBox(r).getCenter(),l=this.graph.snapToGrid(t.clientX,t.clientY),u=r.reduce(function(c,h){return c[h.id]=re.normalize(h.getAngle()),c},{});this.setEventData(t,{center:i,angles:u,start:l.theta(i)})}},{key:"doRotate",value:function(e){var t=this,r=e.e,i=this.getEventData(r),l=this.graph.options.rotating.grid,u=typeof l=="function"?R.call(l,this.graph,null):l,c=this.graph.snapToGrid(r.clientX,r.clientY),h=i.start-c.theta(i.center);i.rotated||(i.rotated=!0),Math.abs(h)>.001&&(this.collection.toArray().forEach(function(d){var g=be.snapToGrid(i.angles[d.id]+h,u||15);d.rotate(g,{absolute:!0,center:i.center,selection:t.cid})}),this.updateSelectionBoxes())}},{key:"stopRotate",value:function(e){var t=this,r=e.e,i=this.getEventData(r);i.rotated&&(i.rotated=!1,this.collection.toArray().forEach(function(l){ze("node:rotated",r,t.graph.findViewByCell(l))}))}},{key:"startResize",value:function(e){var t=e.e,r=this.graph.getGridSize(),i=this.collection.toArray(),l=ce.getCellsBBox(i),u=i.map(function(d){return d.getBBox()}),c=u.reduce(function(d,g){return g.width<d?g.width:d},Infinity),h=u.reduce(function(d,g){return g.height<d?g.height:d},Infinity);this.setEventData(t,{bbox:l,cells:this.graph.model.getSubGraph(i),minWidth:r*l.width/c,minHeight:r*l.height/h})}},{key:"doResize",value:function(e){var t=e.e,r=e.dx,i=e.dy,l=this.eventData(t),u=l.bbox,c=u.width,h=u.height,d=Math.max(c+r,l.minWidth),g=Math.max(h+i,l.minHeight);l.resized||(l.resized=!0),(.001<Math.abs(c-d)||.001<Math.abs(h-g))&&(this.graph.model.resizeCells(d,g,l.cells,{selection:this.cid}),u.width=d,u.height=g,this.updateSelectionBoxes())}},{key:"stopResize",value:function(e){var t=this,r=e.e,i=this.eventData(r);i.resized&&(i.resized=!1,this.collection.toArray().forEach(function(l){ze("node:resized",r,t.graph.findViewByCell(l))}))}},{key:"dispose",value:function(){this.clean(),this.remove()}},{key:"graph",get:function(){return this.options.graph}},{key:"boxClassName",get:function(){return this.prefixClassName(Fe.classNames.box)}},{key:"$boxes",get:function(){return this.$container.children(".".concat(this.boxClassName))}},{key:"handleOptions",get:function(){return this.options}},{key:"length",get:function(){return this.collection.length}},{key:"cells",get:function(){return this.collection.toArray()}}]),a}(ue);tg([ue.dispose()],bi.prototype,"dispose",null),P.applyMixins(bi,Sn);var Fe;(function(o){var s="widget-selection";o.classNames={root:s,inner:"".concat(s,"-inner"),box:"".concat(s,"-box"),content:"".concat(s,"-content"),rubberband:"".concat(s,"-rubberband"),selected:"".concat(s,"-selected")},o.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.defaultOptions={movable:!0,strict:!1,useCellGeometry:!1,content:function(e){return J.template('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:e.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function a(n){return n.getAncestors().length}o.depthComparator=a})(Fe||(Fe={}));var ng=function(){function o(){Object(L.a)(this,o),this.cells=[]}return Object(F.a)(o,[{key:"copy",value:function(a,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.options=Object.assign({},e);var t=n instanceof Ke?n:n.model,r=t.cloneSubGraph(a,e);this.cells=pe.sortBy(Object.keys(r).map(function(i){return r[i]}),function(i){return i.isEdge()?2:1}),this.serialize(e)}},{key:"cut",value:function(a,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.copy(a,n,e);var t=n instanceof de?n.model:n;t.batchUpdate("cut",function(){a.forEach(function(r){return r.remove()})})}},{key:"paste",value:function(a){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Object.assign(Object.assign({},e),this.options),r=t.offset,i=t.edgeProps,l=t.nodeProps,u=20,c=20;r&&(u=typeof r=="number"?r:r.dx,c=typeof r=="number"?r:r.dy),this.deserialize(t);var h=this.cells;h.map(function(g){g.model=null,g.removeProp("zIndex"),(u||c)&&g.translate(u,c),l&&g.isNode()&&g.prop(l),i&&g.isEdge()&&g.prop(i)});var d=a instanceof de?a.model:a;return d.batchUpdate("paste",function(){d.addCells(n.cells)}),this.copy(h,a,e),h}},{key:"serialize",value:function(a){a.useLocalStorage!==!1&&Pn.save(this.cells)}},{key:"deserialize",value:function(a){if(a.useLocalStorage){var n=Pn.fetch();n&&(this.cells=n)}}},{key:"isEmpty",value:function(){return this.cells.length<=0}},{key:"clean",value:function(){this.options={},this.cells=[],Pn.clean()}}]),o}(),Pn;(function(o){var s="".concat(Le.prefixCls,".clipboard.cells");function a(t){if(window.localStorage){var r=t.map(function(i){return i.toJSON()});localStorage.setItem(s,JSON.stringify(r))}}o.save=a;function n(){if(window.localStorage){var t=localStorage.getItem(s),r=t?JSON.parse(t):[];if(r)return Ke.fromJSON(r)}}o.fetch=n;function e(){window.localStorage&&localStorage.removeItem(s)}o.clean=e})(Pn||(Pn={}));var rg=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(e){this.options=Object.assign(Object.assign({},De.defaultOptions),e),this.render(),this.startListening()}},{key:"startListening",value:function(){var e;this.delegateEvents((e={},Object(q.a)(e,"mousedown .".concat(this.resizeClassName),"startResizing"),Object(q.a)(e,"touchstart .".concat(this.resizeClassName),"startResizing"),Object(q.a)(e,"mousedown .".concat(this.rotateClassName),"startRotating"),Object(q.a)(e,"touchstart .".concat(this.rotateClassName),"startRotating"),e)),this.model.on("*",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),Object(_.a)(Object(ee.a)(a.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),Object(_.a)(Object(ee.a)(a.prototype),"stopListening",this).call(this)}},{key:"onRemove",value:function(){this.stopListening()}},{key:"renderHandles",value:function(){var e=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var t=this.$("<div/>").prop("draggable",!1),r=t.clone().addClass(this.rotateClassName),i=De.POSITIONS.map(function(l){return t.clone().addClass(e.resizeClassName).attr("data-position",l)});this.empty(),this.$container.append(i,r)}},{key:"render",value:function(){return this.renderHandles(),this.view.addClass(De.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}},{key:"update",value:function(){var e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;var r=re.normalize(this.node.getAngle()),i=r!==0?"rotate(".concat(r,"deg)"):"";return this.$container.css({transform:i,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}},{key:"remove",value:function(){return this.view.removeClass(De.NODE_CLS),Object(_.a)(Object(ee.a)(a.prototype),"remove",this).call(this)}},{key:"updateResizerDirections",value:function(){var e=this,t=re.normalize(this.node.getAngle()),r=Math.floor(t*(De.DIRECTIONS.length/360));if(r!==this.prevShift){var i=De.DIRECTIONS.slice(r).concat(De.DIRECTIONS.slice(0,r)),l=function(c){return"".concat(e.containerClassName,"-cursor-").concat(c)};this.$container.find(".".concat(this.resizeClassName)).removeClass(De.DIRECTIONS.map(function(u){return l(u)}).join(" ")).each(function(u,c){e.$(c).addClass(l(i[u]))}),this.prevShift=r}}},{key:"getTrueDirection",value:function(e){var t=re.normalize(this.node.getAngle()),r=De.POSITIONS.indexOf(e);return r=r+Math.floor(t*(De.POSITIONS.length/360)),r=r%De.POSITIONS.length,De.POSITIONS[r]}},{key:"toValidResizeDirection",value:function(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}},{key:"startResizing",value:function(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var t=this.$(e.target).attr("data-position");this.prepareResizing(e,t),this.startAction(e)}},{key:"prepareResizing",value:function(e,t){var r=this.getTrueDirection(t),i=0,l=0;t.split("-").forEach(function(d){i={left:-1,right:1}[d]||i,l={top:-1,bottom:1}[d]||l});var u=this.toValidResizeDirection(t),c={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[u],h=re.normalize(this.node.getAngle());this.setEventData(e,{selector:c,direction:u,trueDirection:r,relativeDirection:t,angle:h,resizeX:i,resizeY:l,action:"resizing"})}},{key:"startRotating",value:function(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var t=this.node.getBBox().getCenter(),r=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{center:t,action:"rotating",angle:re.normalize(this.node.getAngle()),start:O.create(r).theta(t)}),this.startAction(e)}},{key:"onMouseMove",value:function(e){var t=this.graph.findViewByCell(this.node),r=this.getEventData(e);if(r.action){var i=this.normalizeEvent(e),l=i.clientX,u=i.clientY,c=this.graph.scroller.widget;if(this.options.restrictedResizing){var h=c?8:0,d=this.graph.container.getBoundingClientRect();l=H.clamp(l,d.left+h,d.right-h),u=H.clamp(u,d.top+h,d.bottom-h)}else this.options.autoScrollOnResizing&&c&&c.autoScroll(l,u);var g=this.graph.snapToGrid(l,u),f=this.graph.getGridSize(),v=this.node,p=this.options;if(r.action==="resizing"){r=r,r.resized||(r.resized=!0);var C=v.getBBox(),b=O.create(g).rotate(r.angle,C.getCenter()).diff(C[r.selector]),y=r.resizeX?b.x*r.resizeX:C.width,w=r.resizeY?b.y*r.resizeY:C.height,x=y,k=w;if(y=be.snapToGrid(y,f),w=be.snapToGrid(w,f),y=Math.max(y,p.minWidth||f),w=Math.max(w,p.minHeight||f),y=Math.min(y,p.maxWidth||Infinity),w=Math.min(w,p.maxHeight||Infinity),p.preserveAspectRatio){var M=C.width*w/C.height,A=C.height*y/C.width;y<M?w=A:y=M}var S=r.relativeDirection;if(x<=-y||k<=-w){var N;S==="left"?x<=-y&&(N="right"):S==="right"?x<=-y&&(N="left"):S==="top"?k<=-w&&(N="bottom"):S==="bottom"?k<=-w&&(N="top"):S==="top-left"?x<=-y&&k<=-w?N="bottom-right":x<=-y?N="top-right":k<=-w&&(N="bottom-left"):S==="top-right"?x<=-y&&k<=-w?N="bottom-left":x<=-y?N="top-left":k<=-w&&(N="bottom-right"):S==="bottom-left"?x<=-y&&k<=-w?N="top-right":x<=-y?N="bottom-right":k<=-w&&(N="top-left"):S==="bottom-right"&&(x<=-y&&k<=-w?N="top-left":x<=-y?N="bottom-left":k<=-w&&(N="top-right"));var j=N;this.stopHandle();var B=this.$container.find(".".concat(this.resizeClassName,'[data-position="').concat(j,'"]'));this.startHandle(B[0]),this.prepareResizing(e,j),this.onMouseMove(e)}if(C.width!==y||C.height!==w){var X={ui:!0,direction:r.direction,relativeDirection:r.relativeDirection,trueDirection:r.trueDirection,minWidth:p.minWidth,minHeight:p.minHeight,maxWidth:p.maxWidth,maxHeight:p.maxHeight,preserveAspectRatio:p.preserveAspectRatio===!0};v.resize(y,w,X),ze("node:resizing",e,t)}}else if(r.action==="rotating"){r=r,r.rotated||(r.rotated=!0);var z=r.start-O.create(g).theta(r.center),D=r.angle+z;p.rotateGrid&&(D=be.snapToGrid(D,p.rotateGrid)),v.rotate(D,{absolute:!0}),ze("node:rotating",e,t)}}}},{key:"onMouseUp",value:function(e){var t=this.getEventData(e);t.action&&(this.stopAction(e),this.model.stopBatch(t.action==="resizing"?"resize":"rotate",{cid:this.cid}))}},{key:"startHandle",value:function(e){this.handle=e,this.$(e).addClass("".concat(this.containerClassName,"-active-handle")),this.$container.addClass("".concat(this.containerClassName,"-active"));var t=e.getAttribute("data-position");if(t){var r=De.DIRECTIONS[De.POSITIONS.indexOf(t)];this.$container.addClass("".concat(this.containerClassName,"-cursor-").concat(r))}}},{key:"stopHandle",value:function(){if(this.handle){this.$(this.handle).removeClass("".concat(this.containerClassName,"-active-handle")),this.$container.removeClass("".concat(this.containerClassName,"-active"));var e=this.handle.getAttribute("data-position");if(e){var t=De.DIRECTIONS[De.POSITIONS.indexOf(e)];this.$container.removeClass("".concat(this.containerClassName,"-cursor-").concat(t))}this.handle=null}}},{key:"startAction",value:function(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(De.documentEvents,e.data);var t=this.graph.findViewByCell(this.node),r=this.getEventData(e);t&&(t.addClass("node-".concat(r.action)),r.action==="resizing"?ze("node:resize",e,t):r.action==="rotating"&&ze("node:rotate",e,t))}},{key:"stopAction",value:function(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.graph.findViewByCell(this.node),r=this.getEventData(e);t&&(t.removeClass("node-".concat(r.action)),r.action==="resizing"?ze("node:resized",e,t):r.action==="rotating"&&ze("node:rotated",e,t))}},{key:"node",get:function(){return this.cell}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-transform")}},{key:"resizeClassName",get:function(){return"".concat(this.containerClassName,"-resize")}},{key:"rotateClassName",get:function(){return"".concat(this.containerClassName,"-rotate")}}]),a}(Er),De;(function(o){o.NODE_CLS="has-widget-transform",o.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],o.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},o.defaultOptions={minWidth:0,minHeight:0,maxWidth:Infinity,maxHeight:Infinity,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0}})(De||(De={}));var Zo=ke.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),ig=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},at;(function(o){function s(a,n,e){var t={};return Object.keys(e||{}).forEach(function(r){var i=e[r];t[r]=typeof i=="function"?i.call(a,n):i}),t}o.parseOptionGroup=s})(at||(at={})),function(o){function s(a){var n=a.grid,e=a.panning,t=a.selecting,r=a.embedding,i=a.snapline,l=a.resizing,u=a.rotating,c=a.clipboard,h=a.history,d=a.scroller,g=a.minimap,f=a.keyboard,v=a.mousewheel,p=ig(a,["grid","panning","selecting","embedding","snapline","resizing","rotating","clipboard","history","scroller","minimap","keyboard","mousewheel"]),C=a.container;if(C!=null)p.width==null&&(p.width=C.clientWidth),p.height==null&&(p.height=C.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");var b=P.merge({},o.defaults,p),y={size:10,visible:!1};typeof n=="number"?b.grid={size:n,visible:!1}:typeof n=="boolean"?b.grid=Object.assign(Object.assign({},y),{visible:n}):b.grid=Object.assign(Object.assign({},y),n);var w=["panning","selecting","embedding","snapline","resizing","rotating","clipboard","history","scroller","minimap","keyboard","mousewheel"];return w.forEach(function(x){var k=a[x];typeof k=="boolean"?b[x].enabled=k:b[x]=Object.assign(Object.assign({},b[x]),k)}),b.background&&b.scroller.enabled&&b.scroller.background==null&&(b.scroller.background=b.background,delete b.background),b}o.get=s}(at||(at={})),function(o){o.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:be.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:be.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(a){var n=a.type,e=a.sourceView,t=a.targetView,r=n==="target"?t:e;return r!=null},createEdge:function(){return new Zo}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1},rotating:{enabled:!1,grid:15},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,multiple:!0,movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}}}(at||(at={}));var Ko=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Qo=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"isDefined",value:function(e){return this.svg.getElementById(e)!=null}},{key:"filter",value:function(e){var t=e.id,r=e.name;if(t||(t="filter-".concat(r,"-").concat(this.cid,"-").concat(J.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var i=Qt.registry.get(r);if(i==null)return Qt.registry.onNotFound(r);var l=i(e.args||{}),u=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});te.create(ie.sanitize(l),u).appendTo(this.defs)}return t}},{key:"gradient",value:function(e){var t=e.id,r=e.type;if(t||(t="gradient-".concat(r,"-").concat(this.cid,"-").concat(J.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var i=e.stops,l=i.map(function(h){var d=h.opacity!=null&&Number.isFinite(h.opacity)?h.opacity:1;return'<stop offset="'.concat(h.offset,'" stop-color="').concat(h.color,'" stop-opacity="').concat(d,'"/>')}),u="<".concat(r,">").concat(l.join(""),"</").concat(r,">"),c=Object.assign({id:t},e.attrs);te.create(u,c).appendTo(this.defs)}return t}},{key:"marker",value:function(e){var t=e.id,r=e.refX,i=e.refY,l=e.markerUnits,u=e.markerOrient,c=e.tagName,h=e.children,d=Ko(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),g=t;if(g||(g="marker-".concat(this.cid,"-").concat(J.hashcode(JSON.stringify(e)))),!this.isDefined(g)){c!=="path"&&delete d.d;var f=te.create("marker",{refX:r,refY:i,id:g,overflow:"visible",orient:u??"auto",markerUnits:l||"userSpaceOnUse"},h?h.map(function(v){var p=v.tagName,C=Ko(v,["tagName"]);return te.create("".concat(p)||"path",E.kebablizeAttrs(Object.assign(Object.assign({},d),C)))}):[te.create(c||"path",E.kebablizeAttrs(d))]);this.defs.appendChild(f.node)}return g}},{key:"cid",get:function(){return this.graph.view.cid}},{key:"svg",get:function(){return this.view.svg}},{key:"defs",get:function(){return this.view.defs}}]),a}(fe),ag=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},og=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},wi=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){this.startListening(),this.draw(this.grid)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"setVisible",value:function(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}},{key:"getGridSize",value:function(){return this.grid.size}},{key:"setGridSize",value:function(e){this.grid.size=Math.max(e,1),this.update()}},{key:"show",value:function(){this.setVisible(!0),this.update()}},{key:"hide",value:function(){this.setVisible(!1),this.update()}},{key:"clear",value:function(){this.elem.style.backgroundImage=""}},{key:"draw",value:function(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();var r=this.graph.matrix(),i=this.getInstance(),l=Array.isArray(e)?e:[e];this.patterns.forEach(function(h,d){var g="pattern_".concat(d),f=r.a||1,v=r.d||1,p=h.update,C=h.markup,b=og(h,["update","markup"]),y=Object.assign(Object.assign(Object.assign({},b),l[d]),{sx:f,sy:v,ox:r.e||0,oy:r.f||0,width:t*f,height:t*v});i.has(g)||i.add(g,te.create("pattern",{id:g,patternUnits:"userSpaceOnUse"},te.createVectors(C)).node);var w=i.get(g);typeof p=="function"&&p(w.childNodes[0],y);var x=y.ox%y.width;x<0&&(x+=y.width);var k=y.oy%y.height;k<0&&(k+=y.height),E.attr(w,{x,y:k,width:y.width,height:y.height})});var u=new XMLSerializer().serializeToString(i.root),c="url(data:image/svg+xml;base64,".concat(btoa(u),")");this.elem.style.backgroundImage=c}},{key:"getInstance",value:function(){return this.instance||(this.instance=new wt),this.instance}},{key:"resolveGrid",value:function(e){if(!e)return[];var t=e.type;if(t==null)return[Object.assign(Object.assign({},wt.presets.dot),e.args)];var r=wt.registry.get(t);if(r){var i=e.args||[];return Array.isArray(i)||(i=[i]),Array.isArray(r)?r.map(function(l,u){return Object.assign(Object.assign({},l),i[u])}):[Object.assign(Object.assign({},r),i[0])]}return wt.registry.onNotFound(t)}},{key:"dispose",value:function(){this.stopListening(),this.clear()}},{key:"elem",get:function(){return this.view.grid}},{key:"grid",get:function(){return this.options.grid}}]),a}(fe);ag([fe.dispose()],wi.prototype,"dispose",null);var qo=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"getClientMatrix",value:function(){return E.createSVGMatrix(this.view.stage.getScreenCTM())}},{key:"getClientOffset",value:function(){var e=this.view.svg.getBoundingClientRect();return new O(e.left,e.top)}},{key:"getPageOffset",value:function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}},{key:"snapToGrid",value:function(e,t){var r=typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y);return r.snapToGrid(this.graph.getGridSize())}},{key:"localToGraphPoint",value:function(e,t){var r=O.create(e,t);return E.transformPoint(r,this.graph.matrix())}},{key:"localToClientPoint",value:function(e,t){var r=O.create(e,t);return E.transformPoint(r,this.getClientMatrix())}},{key:"localToPagePoint",value:function(e,t){var r=typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e);return r.translate(this.getPageOffset())}},{key:"localToGraphRect",value:function(e,t,r,i){var l=U.create(e,t,r,i);return E.transformRectangle(l,this.graph.matrix())}},{key:"localToClientRect",value:function(e,t,r,i){var l=U.create(e,t,r,i);return E.transformRectangle(l,this.getClientMatrix())}},{key:"localToPageRect",value:function(e,t,r,i){var l=typeof e=="number"?this.localToGraphRect(e,t,r,i):this.localToGraphRect(e);return l.translate(this.getPageOffset())}},{key:"graphToLocalPoint",value:function(e,t){var r=O.create(e,t);return E.transformPoint(r,this.graph.matrix().inverse())}},{key:"clientToLocalPoint",value:function(e,t){var r=O.create(e,t);return E.transformPoint(r,this.getClientMatrix().inverse())}},{key:"pageToLocalPoint",value:function(e,t){var r=O.create(e,t),i=r.diff(this.getPageOffset());return this.graphToLocalPoint(i)}},{key:"graphToLocalRect",value:function(e,t,r,i){var l=U.create(e,t,r,i);return E.transformRectangle(l,this.graph.matrix().inverse())}},{key:"clientToLocalRect",value:function(e,t,r,i){var l=U.create(e,t,r,i);return E.transformRectangle(l,this.getClientMatrix().inverse())}},{key:"pageToLocalRect",value:function(e,t,r,i){var l=U.create(e,t,r,i),u=this.getPageOffset();return l.x-=u.x,l.y-=u.y,this.graphToLocalRect(l)}}]),a}(fe),sg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},xi=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.widget=n.graph.hook.createSnapline(),n}return Object(F.a)(a,[{key:"dispose",value:function(){this.widget.dispose()}}]),a}(fe);sg([fe.dispose()],xi.prototype,"dispose",null);var ln;(function(o){function s(e){var t=[],r=[];return Array.isArray(e)?t.push.apply(t,Object(W.a)(e)):e.split("|").forEach(function(i){i.indexOf("&")===-1?t.push(i):r.push.apply(r,Object(W.a)(i.split("&")))}),{or:t,and:r}}o.parse=s;function a(e,t){if(e!=null&&t!=null){var r=s(e),i=s(t),l=r.or.sort(),u=i.or.sort(),c=r.and.sort(),h=i.and.sort(),d=function(f,v){return f.length===v.length&&(f.length===0||f.every(function(p,C){return p===v[C]}))};return d(l,u)&&d(c,h)}return e==null&&t==null}o.equals=a;function n(e,t,r){if(t==null||Array.isArray(t)&&t.length===0)return r?e.altKey!==!0&&e.ctrlKey!==!0&&e.metaKey!==!0&&e.shiftKey!==!0:!0;var i=s(t),l=i.or,u=i.and,c=function(d){var g="".concat(d.toLowerCase(),"Key");return e[g]===!0};return l.some(function(h){return c(h)})&&u.every(function(h){return c(h)})}o.isMatch=n})(ln||(ln={}));var lg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},ki=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)}},{key:"preparePanning",value:function(e){var t=this,r=e.e;this.widget&&((this.allowPanning(r,!0)||this.allowPanning(r)&&!this.graph.selection.allowRubberband(r,!0))&&(this.updateClassName(!0),this.widget.startPanning(r),this.widget.once("pan:stop",function(){return t.updateClassName(!1)})))}},{key:"allowPanning",value:function(e,t){return this.widget&&this.pannable&&ln.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"updateClassName",value:function(e){if(this.widget==null)return;var t=this.widget.container,r=this.view.prefixClassName("graph-scroller-panning"),i=this.view.prefixClassName("graph-scroller-pannable");this.pannable?e?(E.addClass(t,r),E.removeClass(t,i)):(E.removeClass(t,r),E.addClass(t,i)):(E.removeClass(t,r),E.removeClass(t,i))}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}},{key:"lock",value:function(){this.widget&&this.widget.lock()}},{key:"unlock",value:function(){this.widget&&this.widget.unlock()}},{key:"update",value:function(){this.widget&&this.widget.update()}},{key:"resize",value:function(e,t){this.widget&&this.widget.resize(e,t)}},{key:"dispose",value:function(){this.widget&&this.widget.dispose(),this.stopListening()}},{key:"widgetOptions",get:function(){return this.options.scroller}},{key:"pannable",get:function(){return this.widgetOptions&&this.widgetOptions.pannable===!0}}]),a}(fe);lg([fe.dispose()],ki.prototype,"dispose",null);var ug=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},cg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Ei=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}},{key:"enable",value:function(){this.disabled&&(this.instanceOptions.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.instanceOptions.enabled=!1)}},{key:"copy",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t))}},{key:"cut",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t))}},{key:"paste",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.graph;return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}},{key:"clean",value:function(e){(!this.disabled||e)&&this.widget.clean()}},{key:"isEmpty",value:function(){return this.widget.isEmpty()}},{key:"dispose",value:function(){this.clean(!0)}},{key:"commonOptions",get:function(){var e=this.instanceOptions,t=e.enabled,r=cg(e,["enabled"]);return r}},{key:"instanceOptions",get:function(){return this.options.clipboard}},{key:"cells",get:function(){return this.widget.cells}},{key:"disabled",get:function(){return this.instanceOptions.enabled!==!0}}]),a}(fe);ug([fe.dispose()],Ei.prototype,"dispose",null);var hg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Or=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.highlights={},n}return Object(F.a)(a,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"stopListening",value:function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"onCellHighlight",value:function(e){var t=e.view,r=e.magnet,i=e.options,l=i===void 0?{}:i,u=this.resolveHighlighter(l);if(!u)return;var c=this.getHighlighterId(r,u);if(!this.highlights[c]){var h=u.highlighter;h.highlight(t,r,Object.assign({},u.args)),this.highlights[c]={cellView:t,magnet:r,highlighter:h,args:u.args}}}},{key:"onCellUnhighlight",value:function(e){var t=e.magnet,r=e.options,i=r===void 0?{}:r,l=this.resolveHighlighter(i);if(!l)return;var u=this.getHighlighterId(t,l);this.unhighlight(u)}},{key:"resolveHighlighter",value:function(e){var t=this.options,r=e.highlighter;if(r==null){var i=e.type;r=i&&t.highlighting[i]||t.highlighting.default}if(r==null)return null;var l=typeof r=="string"?{name:r}:r,u=l.name,c=ht.registry.get(u);return c==null?ht.registry.onNotFound(u):(ht.check(u,c),{name:u,highlighter:c,args:l.args||{}})}},{key:"getHighlighterId",value:function(e,t){return E.ensureId(e),t.name+e.id+JSON.stringify(t.args)}},{key:"unhighlight",value:function(e){var t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}},{key:"dispose",value:function(){var e=this;Object.keys(this.highlights).forEach(function(t){return e.unhighlight(t)}),this.stopListening()}}]),a}(fe);hg([Or.dispose()],Or.prototype,"dispose",null);var dg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Ar=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.widgets=new Map,n}return Object(F.a)(a,[{key:"init",value:function(){this.startListening(),this.resize()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var r=this.graph.hook.createTransform(t,{clearAll:!0});r&&this.widgets.set(t,r)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var r=this.graph.hook.createTransform(t,{clearAll:!1});r&&this.widgets.set(t,r)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var r=this.widgets.get(t);r&&r.dispose(),this.widgets.delete(t)}}},{key:"getMatrix",value:function(){var e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),E.createSVGMatrix(this.viewportMatrix)}},{key:"setMatrix",value:function(e){var t=E.createSVGMatrix(e),r=E.matrixToTransformString(t);this.viewport.setAttribute("transform",r),this.viewportMatrix=t,this.viewportTransformString=r}},{key:"resize",value:function(e,t){var r=this.options,i=e===void 0?r.width:e,l=t===void 0?r.height:t;r.width=i,r.height=l,typeof i=="number"&&(i=Math.round(i)),typeof l=="number"&&(l=Math.round(l)),this.container.style.width=i==null?"":"".concat(i,"px"),this.container.style.height=l==null?"":"".concat(l,"px");var u=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},u)),this}},{key:"getComputedSize",value:function(){var e=this.options,t=e.width,r=e.height;return H.isNumber(t)||(t=this.container.clientWidth),H.isNumber(r)||(r=this.container.clientHeight),{width:t,height:r}}},{key:"getScale",value:function(){return E.matrixToScale(this.getMatrix())}},{key:"scale",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(e=this.clampScale(e),t=this.clampScale(t),r||i){var l=this.getTranslation(),u=l.tx-r*(e-1),c=l.ty-i*(t-1);(u!==l.tx||c!==l.ty)&&this.translate(u,c)}var h=this.getMatrix();return h.a=e,h.d=t,this.setMatrix(h),this.graph.trigger("scale",{sx:e,sy:t,ox:r,oy:i}),this}},{key:"clampScale",value:function(e){var t=this.graph.options.scaling;return H.clamp(e,t.min||.01,t.max||16)}},{key:"getZoom",value:function(){return this.getScale().sx}},{key:"zoom",value:function(e,t){t=t||{};var r=e,i=e,l=this.getScale(),u=this.getComputedSize(),c=u.width/2,h=u.height/2;if(t.absolute||(r=r+l.sx,i=i+l.sy),t.scaleGrid&&(r=Math.round(r/t.scaleGrid)*t.scaleGrid,i=Math.round(i/t.scaleGrid)*t.scaleGrid),t.maxScale&&(r=Math.min(t.maxScale,r),i=Math.min(t.maxScale,i)),t.minScale&&(r=Math.max(t.minScale,r),i=Math.max(t.minScale,i)),t.center&&(c=t.center.x,h=t.center.y),r=this.clampScale(r),i=this.clampScale(i),c||h){var d=this.getTranslation(),g=c-(c-d.tx)*(r/l.sx),f=h-(h-d.ty)*(i/l.sy);(g!==d.tx||f!==d.ty)&&this.translate(g,f)}return this.scale(r,i),this}},{key:"getRotation",value:function(){return E.matrixToRotation(this.getMatrix())}},{key:"rotate",value:function(e,t,r){if(t==null||r==null){var i=E.getBBox(this.graph.view.stage);t=i.width/2,r=i.height/2}var l=this.getMatrix().translate(t,r).rotate(e).translate(-t,-r);return this.setMatrix(l),this}},{key:"getTranslation",value:function(){return E.matrixToTranslation(this.getMatrix())}},{key:"translate",value:function(e,t){var r=this.getMatrix();r.e=e||0,r.f=t||0,this.setMatrix(r);var i=this.getTranslation();return this.options.x=i.tx,this.options.y=i.ty,this.graph.trigger("translate",Object.assign({},i)),this}},{key:"setOrigin",value:function(e,t){return this.translate(e||0,t||0)}},{key:"fitToContent",value:function(e,t,r,i){if(typeof e=="object"){var l=e;e=l.gridWidth||1,t=l.gridHeight||1,r=l.padding||0,i=l}else e=e||1,t=t||1,r=r||0,i==null&&(i={});var u=H.normalizeSides(r),c=i.contentArea?U.create(i.contentArea):this.getContentArea(i),h=this.getScale(),d=this.getTranslation(),g=h.sx,f=h.sy;c.x*=g,c.y*=f,c.width*=g,c.height*=f;var v=Math.max(Math.ceil((c.width+c.x)/e),1)*e,p=Math.max(Math.ceil((c.height+c.y)/t),1)*t,C=0,b=0;(i.allowNewOrigin==="negative"&&c.x<0||i.allowNewOrigin==="positive"&&c.x>=0||i.allowNewOrigin==="any")&&(C=Math.ceil(-c.x/e)*e,C+=u.left,v+=C),(i.allowNewOrigin==="negative"&&c.y<0||i.allowNewOrigin==="positive"&&c.y>=0||i.allowNewOrigin==="any")&&(b=Math.ceil(-c.y/t)*t,b+=u.top,p+=b),v+=u.right,p+=u.bottom,v=Math.max(v,i.minWidth||0),p=Math.max(p,i.minHeight||0),v=Math.min(v,i.maxWidth||Number.MAX_SAFE_INTEGER),p=Math.min(p,i.maxHeight||Number.MAX_SAFE_INTEGER);var y=this.getComputedSize(),w=v!==y.width||p!==y.height,x=C!==d.tx||b!==d.ty;return x&&this.translate(C,b),w&&this.resize(v,p),new U(-C/g,-b/f,v/g,p/f)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.scaleContentToFitImpl(e)}},{key:"scaleContentToFitImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,i;if(e.contentArea){var l=e.contentArea;r=this.graph.localToGraph(l),i=O.create(l)}else r=this.getContentBBox(e),i=this.graph.graphToLocal(r);if(!r.width||!r.height)return;var u=e.padding||0,c=e.minScale||0,h=e.maxScale||Number.MAX_SAFE_INTEGER,d=e.minScaleX||c,g=e.maxScaleX||h,f=e.minScaleY||c,v=e.maxScaleY||h,p;if(e.viewportArea)p=e.viewportArea;else{var C=this.getComputedSize(),b=this.getTranslation();p={x:b.tx,y:b.ty,width:C.width,height:C.height}}p=U.create(p).inflate(-u);var y=this.getScale(),w=p.width/r.width*y.sx,x=p.height/r.height*y.sy;e.preserveAspectRatio!==!1&&(w=x=Math.min(w,x));var k=e.scaleGrid;if(k&&(w=k*Math.floor(w/k),x=k*Math.floor(x/k)),w=H.clamp(w,d,g),x=H.clamp(x,f,v),this.scale(w,x),t){var M=this.options,A=p.x-i.x*w-M.x,S=p.y-i.y*x-M.y;this.translate(A,S)}}},{key:"getContentArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.useCellGeometry?this.model.getAllCellsBBox()||new U:E.getBBox(this.graph.view.stage)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.graph.localToGraph(this.getContentArea(e))}},{key:"getGraphArea",value:function(){var e=U.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=U.create(e),i=this.graph;t.contentArea=r,t.viewportArea==null&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);var l=r.getCenter();return this.centerPoint(l.x,l.y),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.getContentArea(e),e)}},{key:"centerPoint",value:function(e,t){var r=this.getComputedSize(),i=this.getScale(),l=this.getTranslation(),u=r.width/2,c=r.height/2;e=typeof e=="number"?e:u,t=typeof t=="number"?t:c,e=u-e*i.sx,t=c-t*i.sy,(l.tx!==e||l.ty!==t)&&this.translate(e,t)}},{key:"centerContent",value:function(e){var t=this.graph.getContentArea(e),r=t.getCenter();this.centerPoint(r.x,r.y)}},{key:"centerCell",value:function(e){return this.positionCell(e,"center")}},{key:"positionPoint",value:function(e,t,r){var i=this.getComputedSize();t=H.normalizePercentage(t,Math.max(0,i.width)),t<0&&(t=i.width+t),r=H.normalizePercentage(r,Math.max(0,i.height)),r<0&&(r=i.height+r);var l=this.getTranslation(),u=this.getScale(),c=t-e.x*u.sx,h=r-e.y*u.sy;(l.tx!==c||l.ty!==h)&&this.translate(c,h)}},{key:"positionRect",value:function(e,t){var r=U.create(e);switch(t){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}}},{key:"positionCell",value:function(e,t){var r=e.getBBox();return this.positionRect(r,t)}},{key:"positionContent",value:function(e,t){var r=this.graph.getContentArea(t);return this.positionRect(r,e)}},{key:"dispose",value:function(){this.widgets.forEach(function(e){return e.dispose()}),this.widgets.clear(),this.stopListening()}},{key:"container",get:function(){return this.graph.view.container}},{key:"viewport",get:function(){return this.graph.view.viewport}},{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}}]),a}(fe);dg([Ar.dispose()],Ar.prototype,"dispose",null);var gg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Oi=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;return Object(L.a)(this,a),n=s.apply(this,arguments),n.movedMap=new WeakMap,n.unselectMap=new WeakMap,n}return Object(F.a)(a,[{key:"init",value:function(){this.widget=this.graph.hook.createSelection(),this.startListening()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}},{key:"onBlankMouseDown",value:function(e){var t=e.e;this.allowRubberband(t,!0)||this.allowRubberband(t)&&!this.graph.scroller.allowPanning(t,!0)&&!this.graph.panning.allowPanning(t,!0)?this.startRubberband(t):this.clean()}},{key:"allowRubberband",value:function(e,t){return!this.rubberbandDisabled&&ln.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}},{key:"onCellMouseMove",value:function(e){var t=e.cell;this.movedMap.set(t,!0)}},{key:"onCellMouseUp",value:function(e){var t=e.e,r=e.cell,i=this.widgetOptions,l=this.disabled;!l&&this.movedMap.has(r)&&(l=i.selectCellOnMoved===!1,l||(l=i.selectNodeOnMoved===!1&&r.isNode()),l||(l=i.selectEdgeOnMoved===!1&&r.isEdge())),l||(i.multiple===!1||!t.ctrlKey&&!t.metaKey?this.reset(r):this.unselectMap.has(r)?this.unselectMap.delete(r):this.isSelected(r)?this.unselect(r):this.select(r)),this.movedMap.delete(r)}},{key:"onBoxMouseDown",value:function(e){var t=e.e,r=e.cell;this.disabled||this.widgetOptions.multiple!==!1&&(t.ctrlKey||t.metaKey)&&(this.unselect(r),this.unselectMap.set(r,!0))}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.widget.isSelected(e)}},{key:"getCells",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(r){return typeof r=="string"?t.graph.getCellById(r):r}).filter(function(r){return r!=null})}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getCells(e);return r.length&&(this.isMultiple()?this.widget.select(r,t):this.reset(r.slice(0,1),t)),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.unselect(this.getCells(e),t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.reset(e?this.getCells(e):[],t),this}},{key:"clean",value:function(){return this.widget.clean(),this}},{key:"enable",value:function(){return this.disabled&&(this.widgetOptions.enabled=!0),this}},{key:"disable",value:function(){return this.disabled||(this.widgetOptions.enabled=!1),this}},{key:"startRubberband",value:function(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}},{key:"enableRubberband",value:function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}},{key:"disableRubberband",value:function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}},{key:"isMultiple",value:function(){return this.widgetOptions.multiple!==!1}},{key:"enableMultiple",value:function(){return this.widgetOptions.multiple=!0,this}},{key:"disableMultiple",value:function(){return this.widgetOptions.multiple=!1,this}},{key:"setModifiers",value:function(e){return this.widgetOptions.modifiers=e,this}},{key:"setContent",value:function(e){return this.widget.setContent(e),this}},{key:"setFilter",value:function(e){return this.widget.setFilter(e),this}},{key:"dispose",value:function(){this.stopListening(),this.widget.dispose()}},{key:"widgetOptions",get:function(){return this.options.selecting}},{key:"rubberbandDisabled",get:function(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}},{key:"disabled",get:function(){return this.widgetOptions.enabled!==!0}},{key:"length",get:function(){return this.widget.length}},{key:"cells",get:function(){return this.widget.cells}}]),a}(fe);gg([fe.dispose()],Oi.prototype,"dispose",null);var _o=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},fg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Nn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this),e.batchCommands=null,e.batchLevel=0,e.lastBatchIndex=-1,e.freezed=!1,e.handlers=[],e.model=n.graph.model,e.options=Ce.getOptions(n),e.validator=new a.Validator({history:Object(Ae.a)(e),cancelInvalid:e.options.cancelInvalid}),e.clean(),e.startListening(),e}return Object(F.a)(a,[{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1)}},{key:"undo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}},{key:"redo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}},{key:"canUndo",value:function(){return!this.disabled&&this.undoStack.length>0}},{key:"canRedo",value:function(){return!this.disabled&&this.redoStack.length>0}},{key:"validate",value:function(e){for(var t,r=arguments.length,i=new Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];return(t=this.validator).validate.apply(t,[e].concat(i)),this}},{key:"dispose",value:function(){this.validator.dispose(),this.clean(),this.stopListening()}},{key:"startListening",value:function(){var e=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(t,r){e.handlers[r]=e.addCommand.bind(e,t),e.model.on(t,e.handlers[r])}),this.validator.on("invalid",function(t){return e.trigger("invalid",t)})}},{key:"stopListening",value:function(){var e=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(t,r){e.model.off(t,e.handlers[r])}),this.handlers.length=0),this.validator.off("invalid")}},{key:"createCommand",value:function(e){return{batch:e?e.batch:!1,data:{}}}},{key:"revertCommand",value:function(e,t){this.freezed=!0;for(var r=Array.isArray(e)?Ce.sortBatchCommands(e):[e],i=r.length-1;i>=0;i-=1){var l=r[i],u=Object.assign(Object.assign({},t),P.pick(l.options,this.options.revertOptionsList||[]));this.executeCommand(l,!0,u)}this.freezed=!1}},{key:"applyCommand",value:function(e,t){this.freezed=!0;for(var r=Array.isArray(e)?Ce.sortBatchCommands(e):[e],i=0;i<r.length;i+=1){var l=r[i],u=Object.assign(Object.assign({},t),P.pick(l.options,this.options.applyOptionsList||[]));this.executeCommand(l,!1,u)}this.freezed=!1}},{key:"executeCommand",value:function(e,t,r){var i=this.model,l=i.getCell(e.data.id),u=e.event;if(Ce.isAddEvent(u)&&t||Ce.isRemoveEvent(u)&&!t)l.remove(r);else if(Ce.isAddEvent(u)&&!t||Ce.isRemoveEvent(u)&&t){var c=e.data;c.node?i.addNode(c.props,r):c.edge&&i.addEdge(c.props,r)}else if(Ce.isChangeEvent(u)){var h=e.data,d=h.key;if(d){var g=t?h.prev[d]:h.next[d];l.prop(d,g,r)}}else{var f=this.options.executeCommand;f&&R.call(f,this,e,t,r)}}},{key:"addCommand",value:function(e,t){if(this.freezed||this.disabled)return;var r=t,i=r.options||{};if(i.dryrun)return;if(Ce.isAddEvent(e)&&this.options.ignoreAdd||Ce.isRemoveEvent(e)&&this.options.ignoreRemove||Ce.isChangeEvent(e)&&this.options.ignoreChange)return;var l=this.options.beforeAddCommand;if(l!=null&&R.call(l,this,e,t)===!1)return;e==="cell:change:*"&&(e="cell:change:".concat(r.key));var u=r.cell,c=u instanceof Ke,h;if(this.batchCommands){h=this.batchCommands[Math.max(this.lastBatchIndex,0)];var d=c&&!h.modelChange||h.data.id!==u.id,g=h.event!==e;if(this.lastBatchIndex>=0&&(d||g)){var f=this.batchCommands.findIndex(function(y){return(c&&y.modelChange||y.data.id===u.id)&&y.event===e});f<0||Ce.isAddEvent(e)||Ce.isRemoveEvent(e)?h=this.createCommand({batch:!0}):(h=this.batchCommands[f],this.batchCommands.splice(f,1)),this.batchCommands.push(h),this.lastBatchIndex=this.batchCommands.length-1}}else h=this.createCommand({batch:!1});if(Ce.isAddEvent(e)||Ce.isRemoveEvent(e)){var v=h.data;return h.event=e,h.options=i,v.id=u.id,v.props=P.cloneDeep(u.toJSON()),u.isEdge()?v.edge=!0:u.isNode()&&(v.node=!0),this.push(h,i)}if(Ce.isChangeEvent(e)){var p=t.key,C=h.data;return(!h.batch||!h.event)&&(h.event=e,h.options=i,C.key=p,C.prev==null&&(C.prev={}),C.prev[p]=P.clone(u.previous(p)),c?h.modelChange=!0:C.id=u.id),C.next==null&&(C.next={}),C.next[p]=P.clone(u.prop(p)),this.push(h,i)}var b=this.options.afterAddCommand;b&&R.call(b,this,e,t,h),this.push(h,i)}},{key:"initBatchCommand",value:function(e){this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1)}},{key:"storeBatchCommand",value:function(e){if(this.batchCommands&&this.batchLevel<=0){var t=this.filterBatchCommand(this.batchCommands);0<t.length&&(this.redoStack=[],this.undoStack.push(t),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}},{key:"filterBatchCommand",value:function(e){for(var t=e.slice(),r=[],i=function(){var c=t.shift(),h=c.event,d=c.data.id;if(h!=null&&(d!=null||c.modelChange)){if(Ce.isAddEvent(h)){var g=t.findIndex(function(p){return Ce.isRemoveEvent(p.event)&&p.data.id===d});if(g>=0)return t=t.filter(function(p,C){return g<C||p.data.id!==d}),"continue"}else if(Ce.isRemoveEvent(h)){var f=t.findIndex(function(p){return Ce.isAddEvent(p.event)&&p.data.id===d});if(f>=0)return t.splice(f,1),"continue"}else if(Ce.isChangeEvent(h)){var v=c.data;if(P.isEqual(v.prev,v.next))return"continue"}r.push(c)}};0<t.length;){var l=i();if(l==="continue")continue}return r}},{key:"notify",value:function(e,t,r){var i=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:i,options:r}),this.emit("change",{cmds:i,options:r})}},{key:"push",value:function(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.notify("add",e,t))}},{key:"disabled",get:function(){return this.options.enabled!==!0}}]),a}(Pe);_o([Pe.dispose()],Nn.prototype,"dispose",null),function(o){var s=function(a){Object(I.a)(e,a);var n=Object(V.a)(e);function e(t){var r;return Object(L.a)(this,e),r=n.call(this),r.map={},r.command=t.history,r.cancelInvalid=t.cancelInvalid!==!1,r.command.on("add",r.onCommandAdded,Object(Ae.a)(r)),r}return Object(F.a)(e,[{key:"onCommandAdded",value:function(r){var i=this,l=r.cmds;return Array.isArray(l)?l.every(function(u){return i.isValidCommand(u)}):this.isValidCommand(l)}},{key:"isValidCommand",value:function(r){if(r.options&&r.options.validation===!1)return!0;var i=r.event&&this.map[r.event]||[],l=null;return i.forEach(function(u){var c=0,h=function d(g){var f=u[c];c+=1;try{if(f)f(g,r,d);else{l=g;return}}catch(v){d(v)}};h(l)}),l?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:l}),!1):!0}},{key:"validate",value:function(r){for(var i=this,l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];var h=Array.isArray(r)?r:r.split(/\s+/);return u.forEach(function(d){if(typeof d!="function")throw new Error("".concat(h.join(" ")," requires callback functions."))}),h.forEach(function(d){i.map[d]==null&&(i.map[d]=[]),i.map[d].push(u)}),this}},{key:"dispose",value:function(){this.command.off("add",this.onCommandAdded,this)}}]),e}(Pe);_o([Pe.dispose()],s.prototype,"dispose",null),o.Validator=s}(Nn||(Nn={}));var Ce;(function(o){function s(r){return r==="cell:added"}o.isAddEvent=s;function a(r){return r==="cell:removed"}o.isRemoveEvent=a;function n(r){return r!=null&&r.startsWith("cell:change:")}o.isChangeEvent=n;function e(r){var i=r.graph,l=fg(r,["graph"]),u=["cell:added","cell:removed","cell:change:*"],c=["batch:start","batch:stop"],h=r.eventNames?r.eventNames.filter(function(d){return!(o.isChangeEvent(d)||u.includes(d)||c.includes(d))}):u;return Object.assign(Object.assign({},l),{eventNames:h,applyOptionsList:r.applyOptionsList||["propertyPath"],revertOptionsList:r.revertOptionsList||["propertyPath"]})}o.getOptions=e;function t(r){for(var i=[],l=0,u=r.length;l<u;l+=1){var c=r[l],h=null;if(o.isAddEvent(c.event)){for(var d=c.data.id,g=0;g<l;g+=1)if(r[g].data.id===d){h=g;break}}h!==null?i.splice(h,0,c):i.push(c)}return i}o.sortBatchCommands=t})(Ce||(Ce={}));var vg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Ai=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){this.widget=this.graph.hook.createMiniMap()}},{key:"dispose",value:function(){this.widget&&this.widget.dispose()}},{key:"widgetOptions",get:function(){return this.options.minimap}}]),a}(fe);vg([fe.dispose()],Ai.prototype,"dispose",null);var pg=m(185),mg=m.n(pg),Cg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},jn=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;Object(L.a)(this,a),e=s.call(this),e.options=n;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,n.global?e.target=document:(e.target=e.container,e.disabled||e.target.setAttribute("tabindex","-1"),e.graph.on("cell:mousedown",e.focus,Object(Ae.a)(e)),e.graph.on("blank:mousedown",e.focus,Object(Ae.a)(e))),e.mousetrap=a.createMousetrap(Object(Ae.a)(e)),e}return Object(F.a)(a,[{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"on",value:function(e,t,r){this.mousetrap.bind(this.getKeys(e),t,r)}},{key:"off",value:function(e,t){this.mousetrap.unbind(this.getKeys(e),t)}},{key:"focus",value:function(){var e=this.target;e.focus()}},{key:"getKeys",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(r){return t.formatkey(r)})}},{key:"formatkey",value:function(e){var t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),r=this.options.format;return r?R.call(r,this.graph,t):t}},{key:"isGraphEvent",value:function(e){var t=e.srcElement||e.target;return t?t===this.target||t.parentElement===this.target?!0:E.contains(this.container,t):!1}},{key:"isEnabledForEvent",value:function(e){var t=!this.disabled&&this.isGraphEvent(e);return t&&this.options.guard?R.call(this.options.guard,this.graph,e):t}},{key:"dispose",value:function(){this.mousetrap.reset()}},{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}}]),a}(Ze);Cg([Ze.dispose()],jn.prototype,"dispose",null),function(o){function s(a){var n=new mg.a(a.target),e=n.stopCallback;return n.stopCallback=function(t,r,i){return a.isEnabledForEvent(t)&&e?e.call(n,t,r,i):!1},n}o.createMousetrap=s}(jn||(jn={}));var yg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Di=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;Object(L.a)(this,a),e=s.call(this),e.options=n,e.cumulatedFactor=1;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,e.target=e.options.global?document:e.container,e.eventName=we.isEventSupported("wheel")?"wheel":"mousewheel",e.handler=e.onMouseWheel.bind(Object(Ae.a)(e)),e.options.enabled&&e.enable(!0),e}return Object(F.a)(a,[{key:"enable",value:function(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,we.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.handler,{passive:!1}):ye()(this.target).on("mousewheel",this.handler))}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,we.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.handler):ye()(this.target).off("mousewheel"))}},{key:"onMouseWheel",value:function(e){var t=this,r=e.originalEvent||e,i=this.options.guard;if((i==null||i.call(this.graph,r))&&ln.isMatch(r,this.options.modifiers)){e.preventDefault(),e.stopPropagation(),this.frameId&&(E.cancelAnimationFrame(this.frameId),this.frameId=null);var l=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx);var u=e.deltaY;u<0?this.currentScale*this.cumulatedFactor<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor*=l:this.currentScale*this.cumulatedFactor<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor/=l,this.cumulatedFactor=Math.round(this.currentScale*this.cumulatedFactor*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale),this.frameId=E.requestAnimationFrame(function(){var c=t.graph.scroller.widget,h=t.currentScale,d=t.graph.transform.clampScale(h*t.cumulatedFactor),g=t.options.minScale||Number.MIN_SAFE_INTEGER,f=t.options.maxScale||Number.MAX_SAFE_INTEGER;if(d=H.clamp(d,g,f),d!==h)if(c)if(t.options.zoomAtMousePosition){var v=t.graph.coord.clientToLocalPoint(t.startPos);c.zoom(d,{absolute:!0,center:v.clone()})}else c.zoom(d,{absolute:!0});else{if(t.options.zoomAtMousePosition){var p=t.graph.coord.clientToLocalPoint(t.startPos);t.graph.translate(p.x*(1-d),p.y*(1-d))}t.graph.scale(d,d)}t.frameId=null,t.currentScale=null,t.cumulatedFactor=1})}}},{key:"dispose",value:function(){this.disable()}},{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}}]),a}(Ze);yg([Ze.dispose()],Di.prototype,"dispose",null);var bg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Ln=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"show",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Object.assign(Object.assign({},a.defaultOptions),t),i=this.createPrintPages(r);r.ready(i,function(l){return e.showPrintWindow(l,r)},{sheetSize:this.getSheetSize(r)})}},{key:"showPrintWindow",value:function(e,t){var r=this;if(e){var i=ye()(document.body),l=ye()(this.view.container),u=this.view.prefixClassName("graph-printing");i.addClass(u);var c=l.children().detach();e.forEach(function(g){g.removeClass("".concat(r.className,"-preview")).addClass("".concat(r.className,"-ready")).appendTo(i)});var h=!1,d=function g(){h||(h=!0,i.removeClass(u),e.forEach(function(f){return f.remove()}),l.append(c),ye()("#".concat(r.styleSheetId)).remove(),r.graph.trigger("after:print",t),ye()(window).off("afterprint",g))};ye()(window).one("afterprint",d),setTimeout(d,200),window.print()}}},{key:"createPrintPage",value:function(e,t){this.graph.trigger("before:print",t);var r=ye()("<div/>").addClass(this.className),i=ye()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&r.addClass("".concat(this.className,"-size-").concat(t.size));var l=te.create(this.view.svg).clone(),u=l.findOne(".".concat(this.view.prefixClassName("graph-svg-stage")));i.append(l.node);var c=this.getSheetSize(t),h=this.graph.transform.getGraphArea(),d=this.graph.transform.getScale(),g=this.graph.translate(),f=E.createSVGMatrix().translate(g.tx/d.sx,g.ty/d.sy),v=this.getPageInfo(h,e,c),p=v.scale,C=v.bbox;return i.css({left:0,top:0}),l.attr({width:C.width*p,height:C.height*p,style:"position:relative",viewBox:[C.x,C.y,C.width,C.height].join(" ")}),u.attr("transform",E.matrixToTransformString(f)),r.append(i),r.addClass("".concat(this.className,"-preview")),{$page:r,sheetSize:c}}},{key:"createPrintPages",value:function(e){var t=this,r,i=this.getPrintArea(e),l=[];if(e.page){var u=this.getPageSize(i,e.page),c=this.getPageAreas(i,u);c.forEach(function(d){r=t.createPrintPage(d,e),l.push(r.$page)})}else r=this.createPrintPage(i,e),l.push(r.$page);if(r){var h={width:r.sheetSize.cssWidth,height:r.sheetSize.cssHeight};this.updatePrintStyle(h,e)}return l}},{key:"updatePrintStyle",value:function(e,t){var r=Object.keys(e).reduce(function(g,f){return"".concat(g," ").concat(f,":").concat(e[f],";")},""),i=H.normalizeSides(t.margin),l=t.marginUnit||"",u=t.sheetUnit||"",c=`
      @media print {
        .`.concat(this.className,".").concat(this.className,`-ready {
          `).concat(r,`
        }

        @page {
          margin:
          `).concat([i.top+l,i.right+l,i.bottom+l,i.left+l].join(" "),`;
          size: `).concat(t.sheet.width+u," ").concat(t.sheet.height+u,`;

        .`).concat(this.className,".").concat(this.className,`-preview {
          `).concat(r,`
        }
      }`),h=this.styleSheetId,d=ye()("#".concat(h));d.length?d.html(c):ye()("head").append(`'<style type="text/css" id="`.concat(h,'">').concat(c,"</style>'"))}},{key:"getPrintArea",value:function(e){var t=e.area;if(!t){var r=H.normalizeSides(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom})}return t}},{key:"getPageSize",value:function(e,t){if(typeof t=="object"){var r=t,i={width:r.width,height:r.height};return i.width==null&&(i.width=Math.ceil(e.width/(r.columns||1))),i.height==null&&(i.height=Math.ceil(e.height/(r.rows||1))),i}return{width:e.width,height:e.height}}},{key:"getPageAreas",value:function(e,t){for(var r=[],i=t.width,l=t.height,u=0,c=0;u<e.height&&c<200;u+=l,c+=1)for(var h=0,d=0;h<e.width&&d<200;h+=i,d+=1)r.push(new U(e.x+h,e.y+u,i,l));return r}},{key:"getSheetSize",value:function(e){var t=e.sheet,r=H.normalizeSides(e.margin),i=e.marginUnit||"",l=e.sheetUnit||"",u="calc("+t.width+l+" - "+(r.left+r.right)+i+")",c="calc("+t.height+l+" - "+(r.top+r.bottom)+i+")",h=Jr.measure(u,c);return{cssWidth:u,cssHeight:c,width:h.width,height:h.height}}},{key:"getPageInfo",value:function(e,t,r){var i=new U(t.x-e.x,t.y-e.y,t.width,t.height),l=i.width/i.height,u=r.width/r.height;return{bbox:i,scale:u<l?r.width/i.width:r.height/i.height,fitHorizontal:u<l}}},{key:"dispose",value:function(){}},{key:"className",get:function(){return this.view.prefixClassName("graph-print")}},{key:"styleSheetId",get:function(){return this.view.prefixClassName("graph-print-style")}}]),a}(fe);bg([fe.dispose()],Ln.prototype,"dispose",null),function(o){o.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(a,n){return n(a)}}}(Ln||(Ln={}));var es=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"toSVG",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.graph.trigger("before:export",r);var i=this.view.svg,l=te.create(i).clone(),u=l.node,c=l.findOne(".".concat(this.view.prefixClassName("graph-svg-stage"))),h=r.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),d=r.preserveDimensions;if(d){var g=typeof d=="boolean"?h:d;l.attr({width:g.width,height:g.height})}if(l.removeAttribute("style").attr("viewBox",[h.x,h.y,h.width,h.height].join(" ")),c.removeAttribute("transform"),r.copyStyles!==!1){for(var f=i.ownerDocument,v=Array.from(i.querySelectorAll("*")),p=Array.from(u.querySelectorAll("*")),C=f.styleSheets.length,b=[],y=C-1;0<=y;y-=1)b[y]=f.styleSheets[y],f.styleSheets[y].disabled=!0;var w={};v.forEach(function(j,B){var X=window.getComputedStyle(j,null),z={};Object.keys(X).forEach(function(D){z[D]=X.getPropertyValue(D)}),w[B]=z}),C!==f.styleSheets.length&&b.forEach(function(j,B){f.styleSheets[B]=j});for(var x=0;x<C;x+=1)f.styleSheets[x].disabled=!1;var k={};v.forEach(function(j,B){var X=window.getComputedStyle(j,null),z=w[B],D={};Object.keys(X).forEach(function(T){X.getPropertyValue(T)!==z[T]&&(D[T]=X.getPropertyValue(T))}),k[B]=D}),p.forEach(function(j,B){ye()(j).css(k[B])})}var M=r.stylesheet;if(typeof M=="string"){var A=i.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(M);l.prepend(te.create("style",{type:"text/css"},[A]))}var S=function(){var B=r.beforeSerialize;if(typeof B=="function"){var X=R.call(B,t.graph,u);X instanceof SVGSVGElement&&(u=X)}var z=new XMLSerializer().serializeToString(u).replace(/&nbsp;/g," ");t.graph.trigger("after:export",r),e(z)};if(r.serializeImages){var N=l.find("image").map(function(j){return new Promise(function(B){var X=j.attr("xlink:href")||j.attr("href");Yr.imageToDataUri(X,function(z,D){!z&&D&&j.attr("xlink:href",D),B()})})});Promise.all(N).then(S)}else S()}},{key:"toDataURL",value:function(e,t){var r=t.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),i=H.normalizeSides(t.padding);t.width&&t.height&&(i.left+i.right>=t.width&&(i.left=i.right=0),i.top+i.bottom>=t.height&&(i.top=i.bottom=0));var l=new U(-i.left,-i.top,i.left+i.right,i.top+i.bottom);if(t.width&&t.height){var u=r.width+i.left+i.right,c=r.height+i.top+i.bottom;l.scale(u/t.width,c/t.height)}r=U.create(r).moveAndExpand(l);var h=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:r,d=t.ratio?parseFloat(t.ratio):1;(!isFinite(d)||d===0)&&(d=1);var g={width:Math.max(Math.round(h.width*d),1),height:Math.max(Math.round(h.height*d),1)};{var f=document.createElement("canvas"),v=f.getContext("2d");f.width=g.width,f.height=g.height;var p=g.width-1,C=g.height-1;v.fillStyle="rgb(1,1,1)",v.fillRect(p,C,1,1);var b=v.getImageData(p,C,1,1).data;if(b[0]!==1||b[1]!==1||b[2]!==1)throw new Error("size exceeded")}var y=new Image;y.onload=function(){var w=document.createElement("canvas");w.width=g.width,w.height=g.height;var x=w.getContext("2d");x.fillStyle=t.backgroundColor||"white",x.fillRect(0,0,g.width,g.height);try{x.drawImage(y,0,0,g.width,g.height);var k=w.toDataURL(t.type,t.quality);e(k)}catch(M){}},this.toSVG(function(w){y.src="data:image/svg+xml,".concat(encodeURIComponent(w))},Object.assign(Object.assign({},t),{viewBox:r,serializeImages:!0,preserveDimensions:Object.assign({},g)}))}},{key:"toPNG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}]),a}(fe),wg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},ts=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(){this.startListening(),this.updateClassName()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)}},{key:"preparePanning",value:function(e){var t=e.e;(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&this.startPanning(t)}},{key:"allowPanning",value:function(e,t){return this.pannable&&ln.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"startPanning",value:function(e){var t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.view.normalizeEvent(e),r=t.clientX-this.clientX,i=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY,this.graph.translateBy(r,i)}},{key:"stopPanning",value:function(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}},{key:"updateClassName",value:function(){var e=this.view.container,t=this.view.prefixClassName("graph-panning"),r=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(E.addClass(e,t),E.removeClass(e,r)):(E.removeClass(e,t),E.addClass(e,r)):(E.removeClass(e,t),E.removeClass(e,r))}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}},{key:"dispose",value:function(){this.stopListening()}},{key:"widgetOptions",get:function(){return this.options.panning}},{key:"pannable",get:function(){return this.widgetOptions&&this.widgetOptions.enabled===!0}}]),a}(fe);wg([fe.dispose()],ts.prototype,"dispose",null);var le=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},xg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},ae;(function(o){function s(n,e){return function(t,r,i){var l=i.value,u=e||r;i.value=function(){for(var c=this.options[u],h=arguments.length,d=new Array(h),g=0;g<h;g++)d[g]=arguments[g];if(c!=null){this.getNativeValue=l.bind.apply(l,[this].concat(d));var f=R.call.apply(R,[c,this.graph].concat(d));if(this.getNativeValue=null,f!=null||n===!0&&f===null)return f}return l.call.apply(l,[this].concat(d))}}}o.hook=s;function a(n){return function(e,t,r){var i=r.value,l=n||t;r.value=function(){for(var u=arguments.length,c=new Array(u),h=0;h<u;h++)c[h]=arguments[h];var d=i.call.apply(i,[this].concat(c)),g=this.options[l];return g!=null&&(d=R.call.apply(R,[g,this.graph].concat(c))&&d),d}}}o.after=a})(ae||(ae={}));var oe=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"createModel",value:function(){if(this.options.model)return this.options.model;var e=new Ke;return e.graph=this.graph,e}},{key:"createView",value:function(){return new Mt(this.graph)}},{key:"createRenderer",value:function(){return new Bt(this.graph)}},{key:"createDefsManager",value:function(){return new Qo(this.graph)}},{key:"createGridManager",value:function(){return new wi(this.graph)}},{key:"createCoordManager",value:function(){return new qo(this.graph)}},{key:"createTransform",value:function(e,t){var r=this.getTransformOptions(e);return r.resizable||r.rotatable?new rg(Object.assign(Object.assign({node:e,graph:this.graph},r),t)):null}},{key:"getTransformOptions",value:function(e){var t=at.parseOptionGroup(this.graph,e,this.options.resizing),r=at.parseOptionGroup(this.graph,e,this.options.rotating),i=at.parseOptionGroup(this.graph,e,this.options.transforming),l=Object.assign(Object.assign({},i),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,rotatable:r.enabled,rotateGrid:r.grid});return l}},{key:"createTransformManager",value:function(){return new Ar(this.graph)}},{key:"createHighlightManager",value:function(){return new Or(this.graph)}},{key:"createBackgroundManager",value:function(){return new xr(this.graph)}},{key:"createClipboard",value:function(){return new ng}},{key:"createClipboardManager",value:function(){return new Ei(this.graph)}},{key:"createSnapline",value:function(){return new Jo(Object.assign({graph:this.graph},this.options.snapline))}},{key:"createSnaplineManager",value:function(){return new xi(this.graph)}},{key:"createSelection",value:function(){return new bi(Object.assign({graph:this.graph},this.options.selecting))}},{key:"createSelectionManager",value:function(){return new Oi(this.graph)}},{key:"allowRubberband",value:function(e){return!0}},{key:"createHistoryManager",value:function(){return new Nn(Object.assign({graph:this.graph},this.options.history))}},{key:"createScroller",value:function(){return this.options.scroller.enabled?new kr(Object.assign({graph:this.graph},this.options.scroller)):null}},{key:"createScrollerManager",value:function(){return new ki(this.graph)}},{key:"allowPanning",value:function(e){return!0}},{key:"createMiniMap",value:function(){var e=this.options.minimap,t=e.enabled,r=xg(e,["enabled"]);if(t){var i=this.graph.scroller.widget;if(i==null)throw new Error("Minimap requires scroller be enabled.");return new Yo(Object.assign({scroller:i},r))}return null}},{key:"createMiniMapManager",value:function(){return new Ai(this.graph)}},{key:"createKeyboard",value:function(){return new jn(Object.assign({graph:this.graph},this.options.keyboard))}},{key:"createMouseWheel",value:function(){return new Di(Object.assign({graph:this.graph},this.options.mousewheel))}},{key:"createPrintManager",value:function(){return new Ln(this.graph)}},{key:"createFormatManager",value:function(){return new es(this.graph)}},{key:"createPanningManager",value:function(){return new ts(this.graph)}},{key:"allowConnectToBlank",value:function(e){var t=this.options.connecting,r=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof r!="function")return!!r;var i=this.graph.findViewByCell(e),l=e.getSourceCell(),u=e.getTargetCell(),c=this.graph.findViewByCell(l),h=this.graph.findViewByCell(u);return R.call(r,this.graph,{edge:e,edgeView:i,sourceCell:l,targetCell:u,sourceView:c,targetView:h,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:i.sourceMagnet,targetMagnet:i.targetMagnet})}},{key:"validateEdge",value:function(e,t,r){if(!this.allowConnectToBlank(e)){var i=e.getSourceCellId(),l=e.getTargetCellId();if(!(i&&l))return!1}var u=this.options.connecting.validateEdge;return u?R.call(u,this.graph,{edge:e,type:t,previous:r}):!0}},{key:"validateMagnet",value:function(e,t,r){if(t.getAttribute("magnet")!=="passive"){var i=this.options.connecting.validateMagnet;return i?R.call(i,this.graph,{e:r,magnet:t,view:e,cell:e.cell}):!0}return!1}},{key:"getDefaultEdge",value:function(e,t){var r,i=this.options.connecting.createEdge;return i&&(r=R.call(i,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),r==null&&(r=new Zo),r}},{key:"validateConnection",value:function(e,t,r,i,l,u,c){var h=this,d=this.options.connecting,g=d.allowLoop,f=d.allowNode,v=d.allowEdge,p=d.allowPort,C=d.allowMulti!=null?d.allowMulti:d.multi,b=d.validateConnection,y=u?u.cell:null,w=l==="target"?r:e,x=!0,k=function(D){var T=l==="source"?c?c.port:null:y?y.getSourcePortId():null,G=l==="target"?c?c.port:null:y?y.getTargetPortId():null;return R.call(D,h.graph,{edge:y,edgeView:u,sourceView:e,targetView:r,sourcePort:T,targetPort:G,sourceMagnet:t,targetMagnet:i,sourceCell:e?e.cell:null,targetCell:r?r.cell:null,type:l})};if(g!=null&&(typeof g=="boolean"?!g&&e===r&&(x=!1):x=k(g)),x&&p!=null&&(typeof p=="boolean"?!p&&i&&(x=!1):x=k(p)),x&&v!=null&&(typeof v=="boolean"?!v&&w instanceof Dn&&(x=!1):x=k(v)),x&&f!=null&&(typeof f=="boolean"?!f&&w!=null&&(w instanceof Qe&&i==null&&(x=!1)):x=k(f)),x&&C!=null&&u){var M=u.cell,A=l==="source"?c:M.getSource(),S=l==="target"?c:M.getTarget(),N=c?this.graph.getCellById(c.cell):null;if(A&&S&&A.cell&&S.cell&&N)if(typeof C=="function")x=k(C);else{var j=this.model.getConnectedEdges(N,{outgoing:l==="source",incoming:l==="target"});if(j.length){if(C==="withPort"){var B=j.some(function(z){var D=z.getSource(),T=z.getTarget();return D&&T&&D.cell===A.cell&&T.cell===S.cell&&D.port!=null&&D.port===A.port&&T.port!=null&&T.port===S.port});B&&(x=!1)}else if(!C){var X=j.some(function(z){var D=z.getSource(),T=z.getTarget();return D&&T&&D.cell===A.cell&&T.cell===S.cell});X&&(x=!1)}}}}return x&&b!=null&&(x=k(b)),x}},{key:"getRestrictArea",value:function(e){var t=this.options.translating.restrict;return typeof t=="function"?R.call(t,this.graph,e):t===!0?this.graph.transform.getGraphArea():t||null}},{key:"onViewUpdated",value:function(e,t,r){if(t&Bt.FLAG_INSERT||r.mounting)return;this.graph.renderer.requestConnectedEdgesUpdate(e,r)}},{key:"onViewPostponed",value:function(e,t,r){return this.graph.renderer.forcePostponedViewUpdate(e,t)}},{key:"getCellView",value:function(e){return null}},{key:"createCellView",value:function(e){var t={interacting:this.options.interacting},r=this.getCellView(e);if(r)return new r(e,t);var i=e.view;if(i!=null&&typeof i=="string"){var l=xe.registry.get(i);return l?new l(e,t):xe.registry.onNotFound(i)}return e.isNode()?new Qe(e,t):e.isEdge()?new Dn(e,t):null}},{key:"getHTMLComponent",value:function(e){var t=e.getHTML();return typeof t=="string"&&(t=gt.componentRegistry.get(t)||t),typeof t=="function"?R.call(t,this.graph,e):t}},{key:"onEdgeLabelRendered",value:function(e){}},{key:"onPortRendered",value:function(e){}},{key:"onToolItemCreated",value:function(e){}}]),a}(fe);le([ae.hook()],oe.prototype,"createModel",null),le([ae.hook()],oe.prototype,"createView",null),le([ae.hook()],oe.prototype,"createRenderer",null),le([ae.hook()],oe.prototype,"createDefsManager",null),le([ae.hook()],oe.prototype,"createGridManager",null),le([ae.hook()],oe.prototype,"createCoordManager",null),le([ae.hook()],oe.prototype,"createTransform",null),le([ae.hook()],oe.prototype,"createTransformManager",null),le([ae.hook()],oe.prototype,"createHighlightManager",null),le([ae.hook()],oe.prototype,"createBackgroundManager",null),le([ae.hook()],oe.prototype,"createClipboard",null),le([ae.hook()],oe.prototype,"createClipboardManager",null),le([ae.hook()],oe.prototype,"createSnapline",null),le([ae.hook()],oe.prototype,"createSnaplineManager",null),le([ae.hook()],oe.prototype,"createSelection",null),le([ae.hook()],oe.prototype,"createSelectionManager",null),le([ae.hook()],oe.prototype,"allowRubberband",null),le([ae.hook()],oe.prototype,"createHistoryManager",null),le([ae.hook()],oe.prototype,"createScroller",null),le([ae.hook()],oe.prototype,"createScrollerManager",null),le([ae.hook()],oe.prototype,"allowPanning",null),le([ae.hook()],oe.prototype,"createMiniMap",null),le([ae.hook()],oe.prototype,"createMiniMapManager",null),le([ae.hook()],oe.prototype,"createKeyboard",null),le([ae.hook()],oe.prototype,"createMouseWheel",null),le([ae.hook()],oe.prototype,"createPrintManager",null),le([ae.hook()],oe.prototype,"createFormatManager",null),le([ae.hook()],oe.prototype,"createPanningManager",null),le([ae.after()],oe.prototype,"onViewUpdated",null),le([ae.after()],oe.prototype,"onViewPostponed",null),le([ae.hook()],oe.prototype,"getCellView",null),le([ae.hook(!0)],oe.prototype,"createCellView",null),le([ae.hook()],oe.prototype,"getHTMLComponent",null),le([ae.hook()],oe.prototype,"onEdgeLabelRendered",null),le([ae.hook()],oe.prototype,"onPortRendered",null),le([ae.hook()],oe.prototype,"onToolItemCreated",null);var qe=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},de=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this),e.options=at.get(n),e.css=new Mn(Object(Ae.a)(e)),e.hook=new oe(Object(Ae.a)(e)),e.view=e.hook.createView(),e.defs=e.hook.createDefsManager(),e.coord=e.hook.createCoordManager(),e.transform=e.hook.createTransformManager(),e.highlight=e.hook.createHighlightManager(),e.grid=e.hook.createGridManager(),e.background=e.hook.createBackgroundManager(),e.model=e.hook.createModel(),e.renderer=e.hook.createRenderer(),e.clipboard=e.hook.createClipboardManager(),e.snapline=e.hook.createSnaplineManager(),e.selection=e.hook.createSelectionManager(),e.history=e.hook.createHistoryManager(),e.scroller=e.hook.createScrollerManager(),e.minimap=e.hook.createMiniMapManager(),e.keyboard=e.hook.createKeyboard(),e.mousewheel=e.hook.createMouseWheel(),e.print=e.hook.createPrintManager(),e.format=e.hook.createFormatManager(),e.panning=e.hook.createPanningManager(),e.setup(),e}return Object(F.a)(a,[{key:"setup",value:function(){var e=this;this.model.on("sorted",function(){return e.trigger("model:sorted")}),this.model.on("reseted",function(t){return e.trigger("model:reseted",t)}),this.model.on("updated",function(t){return e.trigger("model:updated",t)})}},{key:"isNode",value:function(e){return e.isNode()}},{key:"isEdge",value:function(e){return e.isEdge()}},{key:"resetCells",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.resetCells(e,t),this}},{key:"clearCells",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.clear(e),this}},{key:"toJSON",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.toJSON(e)}},{key:"parseJSON",value:function(e){return this.model.parseJSON(e)}},{key:"fromJSON",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.fromJSON(e,t),this}},{key:"getCellById",value:function(e){return this.model.getCell(e)}},{key:"addNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addNode(e,t)}},{key:"createNode",value:function(e){return this.model.createNode(e)}},{key:"removeNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"addEdge",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addEdge(e,t)}},{key:"removeEdge",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"createEdge",value:function(e){return this.model.createEdge(e)}},{key:"addCell",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addCell(e,t),this}},{key:"removeCell",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(e,t)}},{key:"removeCells",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCells(e,t)}},{key:"removeConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeConnectedEdges(e,t)}},{key:"disconnectConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.disconnectConnectedEdges(e,t),this}},{key:"hasCell",value:function(e){return this.model.has(e)}},{key:"getCell",value:function(e){return this.model.getCell(e)}},{key:"getCells",value:function(){return this.model.getCells()}},{key:"getCellCount",value:function(){return this.model.total()}},{key:"getNodes",value:function(){return this.model.getNodes()}},{key:"getEdges",value:function(){return this.model.getEdges()}},{key:"getOutgoingEdges",value:function(e){return this.model.getOutgoingEdges(e)}},{key:"getIncomingEdges",value:function(e){return this.model.getIncomingEdges(e)}},{key:"getConnectedEdges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getConnectedEdges(e,t)}},{key:"getRootNodes",value:function(){return this.model.getRoots()}},{key:"getLeafNodes",value:function(){return this.model.getLeafs()}},{key:"isRootNode",value:function(e){return this.model.isRoot(e)}},{key:"isLeafNode",value:function(e){return this.model.isLeaf(e)}},{key:"getNeighbors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNeighbors(e,t)}},{key:"isNeighbor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isNeighbor(e,t,r)}},{key:"getSuccessors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSuccessors(e,t)}},{key:"isSuccessor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isSuccessor(e,t,r)}},{key:"getPredecessors",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getPredecessors(e,t)}},{key:"isPredecessor",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isPredecessor(e,t,r)}},{key:"getCommonAncestor",value:function(){var e;return(e=this.model).getCommonAncestor.apply(e,arguments)}},{key:"getSubGraph",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSubGraph(e,t)}},{key:"cloneSubGraph",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.cloneSubGraph(e,t)}},{key:"cloneCells",value:function(e){return this.model.cloneCells(e)}},{key:"getNodesFromPoint",value:function(e,t){return this.model.getNodesFromPoint(e,t)}},{key:"getNodesInArea",value:function(e,t,r,i,l){return this.model.getNodesInArea(e,t,r,i,l)}},{key:"getNodesUnderNode",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNodesUnderNode(e,t)}},{key:"searchCell",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.search(e,t,r),this}},{key:"getShortestPath",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.getShortestPath(e,t,r)}},{key:"getAllCellsBBox",value:function(){return this.model.getAllCellsBBox()}},{key:"getCellsBBox",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getCellsBBox(e,t)}},{key:"startBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.startBatch(e,t)}},{key:"stopBatch",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.stopBatch(e,t)}},{key:"batchUpdate",value:function(e,t,r){this.startBatch(e,r);var i=t();return this.stopBatch(e,r),i}},{key:"isFrozen",value:function(){return this.renderer.isFrozen()}},{key:"freeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.freeze(e),this}},{key:"unfreeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.unfreeze(e),this}},{key:"isAsync",value:function(){return this.renderer.isAsync()}},{key:"setAsync",value:function(e){return this.renderer.setAsync(e),this}},{key:"findView",value:function(e){return e instanceof ce?this.findViewByCell(e):this.findViewByElem(e)}},{key:"findViews",value:function(e){return U.isRectangleLike(e)?this.findViewsInArea(e):O.isPointLike(e)?this.findViewsFromPoint(e):[]}},{key:"findViewByCell",value:function(e){return this.renderer.findViewByCell(e)}},{key:"findViewByElem",value:function(e){return this.renderer.findViewByElem(e)}},{key:"findViewsFromPoint",value:function(e,t){var r=typeof e=="number"?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(r)}},{key:"findViewsInArea",value:function(e,t,r,i,l){var u=typeof e=="number"?{x:e,y:t,width:r,height:i}:e,c=typeof e=="number"?l:t;return this.renderer.findViewsInArea(u,c)}},{key:"isViewMounted",value:function(e){return this.renderer.isViewMounted(e)}},{key:"getMountedViews",value:function(){return this.renderer.getMountedViews()}},{key:"getUnmountedViews",value:function(){return this.renderer.getUnmountedViews()}},{key:"matrix",value:function(e){return typeof e=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}},{key:"resize",value:function(e,t){return this.scroller.widget?this.scroller.resize(e,t):this.transform.resize(e,t),this}},{key:"resizeGraph",value:function(e,t){return this.transform.resize(e,t),this}},{key:"resizeScroller",value:function(e,t){return this.scroller.resize(e,t),this}},{key:"scale",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return typeof e=="undefined"?this.transform.getScale():(this.transform.scale(e,t,r,i),this)}},{key:"zoom",value:function(e,t){var r=this.scroller.widget;if(r){if(typeof e=="undefined")return r.zoom();r.zoom(e,t)}else{if(typeof e=="undefined")return this.transform.getZoom();this.transform.zoom(e,t)}return this}},{key:"zoomTo",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.scroller.widget;r?r.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0}))}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.scroller.widget;return r?r.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}},{key:"rotate",value:function(e,t,r){return typeof e=="undefined"?this.transform.getRotation():(this.transform.rotate(e,t,r),this)}},{key:"translate",value:function(e,t){return typeof e=="undefined"?this.transform.getTranslation():(this.transform.translate(e,t),this)}},{key:"translateBy",value:function(e,t){var r=this.translate(),i=r.tx+e,l=r.ty+t;return this.translate(i,l)}},{key:"getArea",value:function(){return this.transform.getGraphArea()}},{key:"getGraphArea",value:function(){return this.transform.getGraphArea()}},{key:"getContentArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentArea(e)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentBBox(e)}},{key:"fitToContent",value:function(e,t,r,i){return this.transform.fitToContent(e,t,r,i)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.scaleContentToFit(e),this}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,r){var i=this.scroller.widget;return i?i.centerPoint(e,t,r):this.transform.centerPoint(e,t),this}},{key:"centerContent",value:function(e){var t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}},{key:"centerCell",value:function(e,t){var r=this.scroller.widget;return r?r.centerCell(e,t):this.transform.centerCell(e),this}},{key:"positionPoint",value:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.scroller.widget;return l?l.positionPoint(e,t,r,i):this.transform.positionPoint(e,t,r),this}},{key:"positionRect",value:function(e,t,r){var i=this.scroller.widget;return i?i.positionRect(e,t,r):this.transform.positionRect(e,t),this}},{key:"positionCell",value:function(e,t,r){var i=this.scroller.widget;return i?i.positionCell(e,t,r):this.transform.positionCell(e,t),this}},{key:"positionContent",value:function(e,t){var r=this.scroller.widget;return r?r.positionContent(e,t):this.transform.positionContent(e,t),this}},{key:"getClientMatrix",value:function(){return this.coord.getClientMatrix()}},{key:"getClientOffset",value:function(){return this.coord.getClientOffset()}},{key:"getPageOffset",value:function(){return this.coord.getPageOffset()}},{key:"snapToGrid",value:function(e,t){return this.coord.snapToGrid(e,t)}},{key:"pageToLocal",value:function(e,t,r,i){return U.isRectangleLike(e)?this.coord.pageToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.pageToLocalRect(e,t,r,i):this.coord.pageToLocalPoint(e,t)}},{key:"localToPage",value:function(e,t,r,i){return U.isRectangleLike(e)?this.coord.localToPageRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.localToPageRect(e,t,r,i):this.coord.localToPagePoint(e,t)}},{key:"clientToLocal",value:function(e,t,r,i){return U.isRectangleLike(e)?this.coord.clientToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.clientToLocalRect(e,t,r,i):this.coord.clientToLocalPoint(e,t)}},{key:"localToClient",value:function(e,t,r,i){return U.isRectangleLike(e)?this.coord.localToClientRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.localToClientRect(e,t,r,i):this.coord.localToClientPoint(e,t)}},{key:"localToGraph",value:function(e,t,r,i){return U.isRectangleLike(e)?this.coord.localToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.localToGraphRect(e,t,r,i):this.coord.localToGraphPoint(e,t)}},{key:"graphToLocal",value:function(e,t,r,i){return U.isRectangleLike(e)?this.coord.graphToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof r=="number"&&typeof i=="number"?this.coord.graphToLocalRect(e,t,r,i):this.coord.graphToLocalPoint(e,t)}},{key:"defineFilter",value:function(e){return this.defs.filter(e)}},{key:"defineGradient",value:function(e){return this.defs.gradient(e)}},{key:"defineMarker",value:function(e){return this.defs.marker(e)}},{key:"getGridSize",value:function(){return this.grid.getGridSize()}},{key:"setGridSize",value:function(e){return this.grid.setGridSize(e),this}},{key:"showGrid",value:function(){return this.grid.show(),this}},{key:"hideGrid",value:function(){return this.grid.hide(),this}},{key:"clearGrid",value:function(){return this.grid.clear(),this}},{key:"drawGrid",value:function(e){return this.grid.draw(e),this}},{key:"updateBackground",value:function(){return this.background.update(),this}},{key:"drawBackground",value:function(e){return this.background.draw(e),this}},{key:"clearBackground",value:function(){return this.background.clear(),this}},{key:"isClipboardEnabled",value:function(){return!this.clipboard.disabled}},{key:"enableClipboard",value:function(){return this.clipboard.enable(),this}},{key:"disableClipboard",value:function(){return this.clipboard.disable(),this}},{key:"toggleClipboard",value:function(e){return e!=null?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}},{key:"isClipboardEmpty",value:function(){return this.clipboard.isEmpty()}},{key:"getCellsInClipboard",value:function(){return this.clipboard.cells}},{key:"cleanClipboard",value:function(){return this.clipboard.clean(),this}},{key:"copy",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.copy(e,t),this}},{key:"cut",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.cut(e,t),this}},{key:"paste",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;return this.clipboard.paste(e,t)}},{key:"isHistoryEnabled",value:function(){return!this.history.disabled}},{key:"enableHistory",value:function(){return this.history.enable(),this}},{key:"disableHistory",value:function(){return this.history.disable(),this}},{key:"toggleHistory",value:function(e){return e!=null?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}},{key:"undo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.undo(e),this}},{key:"undoAndCancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.cancel(e),this}},{key:"redo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.redo(e),this}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"cleanHistory",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.history.clean(e)}},{key:"isKeyboardEnabled",value:function(){return!this.keyboard.disabled}},{key:"enableKeyboard",value:function(){return this.keyboard.enable(),this}},{key:"disableKeyboard",value:function(){return this.keyboard.disable(),this}},{key:"toggleKeyboard",value:function(e){return e!=null?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}},{key:"bindKey",value:function(e,t,r){return this.keyboard.on(e,t,r),this}},{key:"unbindKey",value:function(e,t){return this.keyboard.off(e,t),this}},{key:"isMouseWheelEnabled",value:function(){return!this.mousewheel.disabled}},{key:"enableMouseWheel",value:function(){return this.mousewheel.enable(),this}},{key:"disableMouseWheel",value:function(){return this.mousewheel.disable(),this}},{key:"toggleMouseWheel",value:function(e){return e==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}},{key:"lockScroller",value:function(){var e;(e=this.scroller.widget)===null||e===void 0||e.lock()}},{key:"unlockScroller",value:function(){var e;(e=this.scroller.widget)===null||e===void 0||e.unlock()}},{key:"updateScroller",value:function(){var e;(e=this.scroller.widget)===null||e===void 0||e.update()}},{key:"getScrollbarPosition",value:function(){var e=this.scroller.widget;return e.scrollbarPosition()}},{key:"setScrollbarPosition",value:function(e,t,r){var i=this.scroller.widget;return i.scrollbarPosition(e,t,r),this}},{key:"scrollToPoint",value:function(e,t,r){var i=this.scroller.widget;return i.scrollToPoint(e,t,r),this}},{key:"scrollToContent",value:function(e){var t=this.scroller.widget;return t.scrollToContent(e),this}},{key:"scrollToCell",value:function(e,t){var r=this.scroller.widget;return r.scrollToCell(e,t),this}},{key:"transitionToPoint",value:function(e,t,r){var i=this.scroller.widget;return i.transitionToPoint(e,t,r),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.scroller.widget;return r.transitionToRect(e,t),this}},{key:"isPannable",value:function(){return this.scroller.pannable}},{key:"enablePanning",value:function(){return this.scroller.enablePanning(),this}},{key:"disablePanning",value:function(){return this.scroller.disablePanning(),this}},{key:"togglePanning",value:function(e){return e==null?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}},{key:"isSelectionEnabled",value:function(){return!this.selection.disabled}},{key:"enableSelection",value:function(){return this.selection.enable(),this}},{key:"disableSelection",value:function(){return this.selection.disable(),this}},{key:"toggleSelection",value:function(e){return e!=null?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}},{key:"isMultipleSelection",value:function(){return this.selection.isMultiple()}},{key:"enableMultipleSelection",value:function(){return this.selection.enableMultiple(),this}},{key:"disableMultipleSelection",value:function(){return this.selection.disableMultiple(),this}},{key:"toggleMultipleSelection",value:function(e){return e!=null?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}},{key:"isSelectionMovable",value:function(){return this.selection.widget.options.movable!==!1}},{key:"enableSelectionMovable",value:function(){return this.selection.widget.options.movable=!0,this}},{key:"disableSelectionMovable",value:function(){return this.selection.widget.options.movable=!1,this}},{key:"toggleSelectionMovable",value:function(e){return e!=null?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}},{key:"isRubberbandEnabled",value:function(){return!this.selection.rubberbandDisabled}},{key:"enableRubberband",value:function(){return this.selection.enableRubberband(),this}},{key:"disableRubberband",value:function(){return this.selection.disableRubberband(),this}},{key:"toggleRubberband",value:function(e){return e!=null?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}},{key:"isStrictRubberband",value:function(){return this.selection.widget.options.strict===!0}},{key:"enableStrictRubberband",value:function(){return this.selection.widget.options.strict=!0,this}},{key:"disableStrictRubberband",value:function(){return this.selection.widget.options.strict=!1,this}},{key:"toggleStrictRubberband",value:function(e){return e!=null?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}},{key:"setRubberbandModifiers",value:function(e){this.selection.setModifiers(e)}},{key:"setSelectionFilter",value:function(e){return this.selection.setFilter(e),this}},{key:"setSelectionDisplayContent",value:function(e){return this.selection.setContent(e),this}},{key:"isSelectionEmpty",value:function(){return this.selection.isEmpty()}},{key:"cleanSelection",value:function(){return this.selection.clean(),this}},{key:"resetSelection",value:function(e){return this.selection.reset(e),this}},{key:"getSelectedCells",value:function(){return this.selection.cells}},{key:"getSelectedCellCount",value:function(){return this.selection.length}},{key:"isSelected",value:function(e){return this.selection.isSelected(e)}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.selection.select(e,t),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.selection.unselect(e,t),this}},{key:"isSnaplineEnabled",value:function(){return!this.snapline.widget.disabled}},{key:"enableSnapline",value:function(){return this.snapline.widget.enable(),this}},{key:"disableSnapline",value:function(){return this.snapline.widget.disable(),this}},{key:"toggleSnapline",value:function(e){if(e!=null)e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}},{key:"hideSnapline",value:function(){return this.snapline.widget.hide(),this}},{key:"setSnaplineFilter",value:function(e){return this.snapline.widget.setFilter(e),this}},{key:"isSnaplineOnResizingEnabled",value:function(){return this.snapline.widget.options.resizing===!0}},{key:"enableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!0,this}},{key:"disableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!1,this}},{key:"toggleSnaplineOnResizing",value:function(e){return e!=null?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}},{key:"isSharpSnapline",value:function(){return this.snapline.widget.options.sharp===!0}},{key:"enableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!0,this}},{key:"disableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!1,this}},{key:"toggleSharpSnapline",value:function(e){return e!=null?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}},{key:"getSnaplineTolerance",value:function(){return this.snapline.widget.options.tolerance}},{key:"setSnaplineTolerance",value:function(e){return this.snapline.widget.options.tolerance=e,this}},{key:"removeTools",value:function(){return this.emit("tools:remove"),this}},{key:"hideTools",value:function(){return this.emit("tools:hide"),this}},{key:"showTools",value:function(){return this.emit("tools:show"),this}},{key:"toSVG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toSVG(e,t)}},{key:"toDataURL",value:function(e,t){this.format.toDataURL(e,t)}},{key:"toPNG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toPNG(e,t)}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toJPEG(e,t)}},{key:"printPreview",value:function(e){this.print.show(e)}},{key:"dispose",value:function(){this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose()}},{key:"container",get:function(){return this.view.container}}]),a}(Pe);qe([We.checkScroller()],de.prototype,"lockScroller",null),qe([We.checkScroller()],de.prototype,"unlockScroller",null),qe([We.checkScroller()],de.prototype,"updateScroller",null),qe([We.checkScroller()],de.prototype,"getScrollbarPosition",null),qe([We.checkScroller()],de.prototype,"setScrollbarPosition",null),qe([We.checkScroller()],de.prototype,"scrollToPoint",null),qe([We.checkScroller()],de.prototype,"scrollToContent",null),qe([We.checkScroller()],de.prototype,"scrollToCell",null),qe([We.checkScroller()],de.prototype,"transitionToPoint",null),qe([We.checkScroller()],de.prototype,"transitionToRect",null),qe([Pe.dispose()],de.prototype,"dispose",null),function(o){o.View=Mt,o.Hook=oe,o.Renderer=Bt,o.Keyboard=jn,o.MouseWheel=Di,o.BaseManager=fe,o.DefsManager=Qo,o.GridManager=wi,o.CoordManager=qo,o.PrintManager=Ln,o.FormatManager=es,o.MiniMapManager=Ai,o.HistoryManager=Nn,o.SnaplineManager=xi,o.ScrollerManager=ki,o.ClipboardManager=Ei,o.TransformManager=Ar,o.HighlightManager=Or,o.BackgroundManager=xr,o.SelectionManager=Oi}(de||(de={})),function(o){function s(a,n){var e=a instanceof HTMLElement?new o({container:a}):new o(a);return n!=null&&e.fromJSON(n),e}o.render=s}(de||(de={})),function(o){o.registerNode=Oe.registry.register,o.registerEdge=ke.registry.register,o.registerView=xe.registry.register,o.registerAttr=it.registry.register,o.registerGrid=wt.registry.register,o.registerFilter=Qt.registry.register,o.registerNodeTool=en.registry.register,o.registerEdgeTool=tn.registry.register,o.registerBackground=bn.registry.register,o.registerHighlighter=ht.registry.register,o.registerPortLayout=Xt.registry.register,o.registerPortLabelLayout=qt.registry.register,o.registerMarker=bt.registry.register,o.registerRouter=At.registry.register,o.registerConnector=zt.registry.register,o.registerAnchor=nn.registry.register,o.registerEdgeAnchor=rn.registry.register,o.registerConnectionPoint=an.registry.register,o.registerConnectionStrategy=_t.registry.register,o.registerHTMLComponent=gt.componentRegistry.register}(de||(de={})),function(o){o.unregisterNode=Oe.registry.unregister,o.unregisterEdge=ke.registry.unregister,o.unregisterView=xe.registry.unregister,o.unregisterAttr=it.registry.unregister,o.unregisterGrid=wt.registry.unregister,o.unregisterFilter=Qt.registry.unregister,o.unregisterNodeTool=en.registry.unregister,o.unregisterEdgeTool=tn.registry.unregister,o.unregisterBackground=bn.registry.unregister,o.unregisterHighlighter=ht.registry.unregister,o.unregisterPortLayout=Xt.registry.unregister,o.unregisterPortLabelLayout=qt.registry.unregister,o.unregisterMarker=bt.registry.unregister,o.unregisterRouter=At.registry.unregister,o.unregisterConnector=zt.registry.unregister,o.unregisterAnchor=nn.registry.unregister,o.unregisterEdgeAnchor=rn.registry.unregister,o.unregisterConnectionPoint=an.registry.unregister,o.unregisterConnectionStrategy=_t.registry.unregister,o.unregisterHTMLComponent=gt.componentRegistry.unregister}(de||(de={}));var kg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a};function Eg(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return'<g class="rotatable"><g class="scalable"><'.concat(o,"/></g>").concat(s?"":"<text/>","</g>")}function Mi(o){return"basic.".concat(o)}function Fn(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"xlink:href",s=function(n){var e=n.imageUrl,t=n.imageWidth,r=n.imageHeight,i=kg(n,["imageUrl","imageWidth","imageHeight"]);if(e!=null||t!=null||r!=null){var l=function(){if(i.attrs){var c=i.attrs.image;e!=null&&(c[o]=e),t!=null&&(c.width=t),r!=null&&(c.height=r),i.attrs.image=c}};i.attrs?(i.attrs.image==null&&(i.attrs.image={}),l()):(i.attrs={image:{}},l())}return i};return s}function ot(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=Mi(o),e={constructorName:n,attrs:Object(q.a)({".":{fill:"#ffffff",stroke:"none"}},o,{fill:"#ffffff",stroke:"#000000"})};a.ignoreMarkup||(e.markup=Eg(o,a.noText===!0));var t=a.parent||Dt;return t.define(P.merge(e,s,{shape:n}))}var af=ot("rect",{attrs:{rect:{width:100,height:60}}}),of=ot("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),sf=ot("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),lf=ot("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),uf=ot("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),cf=ot("image",{attrs:{text:{refY:null,refDy:16}},propHooks:Fn()}),Og=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},ns=ot("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(s){var a=s.d,n=Og(s,["d"]);return a!=null&&P.setByPath(n,"attrs/path/d",a),n}}),hf=ot("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:ns,ignoreMarkup:!0}),df=ot("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:ns,ignoreMarkup:!0}),rs=Mi("text"),is=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return a}(ot("text",{view:rs,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}));(function(o){var s=function(a){Object(I.a)(e,a);var n=Object(V.a)(e);function e(){return Object(L.a)(this,e),n.apply(this,arguments)}return Object(F.a)(e,[{key:"confirmUpdate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object(_.a)(Object(ee.a)(e.prototype),"confirmUpdate",this).call(this,r,i);return this.hasAction(l,"scale")&&(this.resize(),l=this.removeAction(l,"scale")),l}}]),e}(Qe);o.View=s,s.config({actions:{attrs:["scale"]}}),Qe.registry.register(rs,s)})(is||(is={}));var st=".text-block-content",Dr=Mi("text-block"),Mr=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"getContent",value:function(){return this.store.get("content","")}},{key:"setContent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.store.set("content",e,t)}},{key:"setup",value:function(){var e=this;Object(_.a)(Object(ee.a)(a.prototype),"setup",this).call(this),this.store.on("change:*",function(t){var r=t.key;r==="content"?e.updateContent(e.getContent()):r==="size"&&e.updateSize(e.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}},{key:"updateSize",value:function(e){we.SUPPORT_FOREIGNOBJECT&&this.setAttrs(Object(q.a)({foreignObject:Object.assign({},e)},st,{style:Object.assign({},e)}))}},{key:"updateContent",value:function(e){we.SUPPORT_FOREIGNOBJECT?this.setAttrs(Object(q.a)({},st,{html:e?J.sanitizeHTML(e):""})):this.setAttrs(Object(q.a)({},st,{text:e}))}},{key:"content",get:function(){return this.getContent()},set:function(e){this.setContent(e)}}]),a}(Oe);(function(o){o.config({type:Dr,view:Dr,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',we.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'.concat(st.substr(1),'" />'),"</body>","</foreignObject>"].join(""):'<text class="'.concat(st.substr(1),'"/>'),"</g>"].join(""),attrs:Object(q.a)({".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}},st,{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}})}),Oe.registry.register(Dr,o)})(Mr||(Mr={})),function(o){var s="content",a=function(n){Object(I.a)(t,n);var e=Object(V.a)(t);function t(){return Object(L.a)(this,t),e.apply(this,arguments)}return Object(F.a)(t,[{key:"confirmUpdate",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=Object(_.a)(Object(ee.a)(t.prototype),"confirmUpdate",this).call(this,i,l);return this.hasAction(u,s)&&(this.updateContent(),u=this.removeAction(u,s)),u}},{key:"update",value:function(i){if(we.SUPPORT_FOREIGNOBJECT)Object(_.a)(Object(ee.a)(t.prototype),"update",this).call(this,i);else{var l=this.cell,u=Object.assign({},i||l.getAttrs());delete u[st],Object(_.a)(Object(ee.a)(t.prototype),"update",this).call(this,u),(!i||P.has(i,st))&&this.updateContent(i)}}},{key:"updateContent",value:function(i){if(we.SUPPORT_FOREIGNOBJECT)Object(_.a)(Object(ee.a)(t.prototype),"update",this).call(this,i);else{var l=this.cell,u=(i||l.getAttrs())[st],c=E.breakText(l.getContent(),l.getSize(),u,{svgDocument:this.graph.view.svg}),h=Object(q.a)({},st,P.merge({},u,{text:c}));Object(_.a)(Object(ee.a)(t.prototype),"update",this).call(this,h)}}}]),t}(Qe);o.View=a,function(n){n.config({bootstrap:["render",s],actions:we.SUPPORT_FOREIGNOBJECT?{}:{size:s,content:s}}),Qe.registry.register(Dr,n)}(a=o.View||(o.View={}))}(Mr||(Mr={}));function Ag(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body";return[{tagName:o,selector:s},{tagName:"text",selector:"label"}]}var Rn={fill:"#ffffff",stroke:"#333333",strokeWidth:2},as={fontSize:14,fill:"#333333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"};function lt(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n={constructorName:o,markup:Ag(o,a.selector),attrs:Object(q.a)({},o,{fill:"#ffffff",stroke:"#333333",strokeWidth:2})},e=a.parent||Dt;return e.define(P.merge(n,s,{shape:o}))}var gf=lt("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),ff=Oe.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},Rn),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},Rn),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},as),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},as),{refY2:15})}}),vf=lt("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),Ti=10,pf=Dt.define({shape:"cylinder",markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},Rn),{lateralArea:Ti}),top:Object.assign(Object.assign({},Rn),{refCx:"50%",refRx:"50%",cy:Ti,ry:Ti})},attrHooks:{lateralArea:{set:function(s,a){var n=a.refBBox,e=H.isPercentage(s);e&&(s=parseFloat(s)/100);var t=n.x,r=n.y,i=n.width,l=n.height,u=i/2,c=e?l*s:s,h=.551784,d=h*u,g=h*c,f=t,v=t+i/2,p=t+i,C=r+c,b=C-c,y=r+l-c,w=r+l,x=["M",f,C,"L",f,y,"C",t,y+g,v-d,w,v,w,"C",v+d,w,p,y+g,p,y,"L",p,C,"C",p,C-g,v+d,b,v,b,"C",v-d,b,f,C-g,f,C,"Z"];return{d:x.join(" ")}}}}}),mf=lt("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),Dg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Tr=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"getPoints",value:function(){return this.getAttrByPath("body/refPoints")}},{key:"setPoints",value:function(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",a.pointsToString(e),t),this}},{key:"removePoints",value:function(){return this.removeAttrByPath("body/refPoints"),this}},{key:"points",get:function(){return this.getPoints()},set:function(e){this.setPoints(e)}}]),a}(Dt);(function(o){function s(a){return typeof a=="string"?a:a.map(function(n){return Array.isArray(n)?n.join(","):O.isPointLike(n)?"".concat(n.x,", ").concat(n.y):""}).join(" ")}o.pointsToString=s,o.config({propHooks:function(n){var e=n.points,t=Dg(n,["points"]);if(e){var r=s(e);r&&P.setByPath(t,"attrs/body/refPoints",r)}return t}})})(Tr||(Tr={}));var Cf=lt("polygon",{},{parent:Tr}),yf=lt("polyline",{},{parent:Tr}),Mg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},Tg=lt("path",{});Tg.config({propHooks:function(s){var a=s.path,n=Mg(s,["path"]);return a&&P.setByPath(n,"attrs/body/refD",a),n}});var Sg=function(o,s){var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&s.indexOf(n)<0&&(a[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)s.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(a[n[e]]=o[n[e]]);return a},bf=Dt.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},we.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:E.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},Rn),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(s){var a=s.text,n=Sg(s,["text"]);return a&&P.setByPath(n,"attrs/label/text",a),n},attrHooks:{text:{set:function(s,a){var n=a.cell,e=a.view,t=a.refBBox,r=a.elem,i=a.attrs;if(r instanceof HTMLElement)r.textContent=s;else{var l=i.style||{},u={text:s,width:-5,height:"100%"},c=Object.assign({textVerticalAnchor:"middle"},l),h=it.presets.textWrap;return R.call(h.set,this,u,{cell:n,view:e,elem:r,refBBox:t,attrs:c}),{fill:l.color||null}}},position:function(s,a){var n=a.refBBox,e=a.elem;if(e instanceof SVGElement)return n.getCenter()}}}}),wf=lt("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Fn()},{selector:"image"}),xf=lt("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:Fn()}),kf=lt("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:Fn()}),Ef=lt("image-inscribed",{propHooks:Fn(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),Of=ke.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),Af=ke.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),Pg=function(o,s,a,n){var e=arguments.length,t=e<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,s,a,n);else for(var i=o.length-1;i>=0;i--)(r=o[i])&&(t=(e<3?r(t):e>3?r(s,a,t):r(s,a))||t);return e>3&&t&&Object.defineProperty(s,a,t),t},Si=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this),e.delay=10,e.throttle=2,e.threshold=5,e.changeCount=0,e.timestamp=0,e.options=Object.assign(Object.assign({},a.defaultOptions),n),e.graph.model.on("cell:change:*",e.onModelChanged,Object(Ae.a)(e)),e}return Object(F.a)(a,[{key:"onModelChanged",value:function(){if(this.disabled)return;var e=new Date().getTime(),t=(e-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}},{key:"save",value:function(){this.trigger("save")}},{key:"reset",value:function(){this.changeCount=0,this.timestamp=new Date().getTime()}},{key:"dispose",value:function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}},{key:"graph",get:function(){return this.options.graph}}]),a}(Va);Pg([Va.dispose()],Si.prototype,"dispose",null),function(o){o.defaultOptions={delay:10,throttle:2,threshold:5}}(Si||(Si={}));function Df(o){}var Ng=function(){function o(s){Object(L.a)(this,o),this.halo=s}return Object(F.a)(o,[{key:"getPresets",value:function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(n){if(this.options.useCellGeometry){var e=n.cell;return e.getBBox()}return n.getBBox()},content:function(n){var e=J.template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),t=n.cell,r=t.getBBox();return e({x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height),angle:Math.floor(t.getAngle())})},magnet:function(n){return n.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}},{key:"removeCell",value:function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}},{key:"startLink",value:function(a){var n=a.x,e=a.y;this.halo.startBatch();var t=this.graph,r=this.createEdgeConnectedToSource();r.setTarget({x:n,y:e}),this.model.addEdge(r,{validation:!1,halo:this.halo.cid,async:!1}),t.view.undelegateEvents(),this.edgeView=t.renderer.findViewByCell(r),this.edgeView.prepareArrowheadDragging("target",{x:n,y:e,fallbackAction:"remove"})}},{key:"createEdgeConnectedToSource",value:function(){var a=this.getMagnet(this.view,"source"),n=this.getEdgeTerminal(this.view,a),e=this.graph.hook.getDefaultEdge(this.view,a);return e.setSource(n),e}},{key:"getMagnet",value:function(a,n){var e=this.options.magnet;if(typeof e=="function"){var t=R.call(e,this.halo,a,n);if(t instanceof SVGElement)return t}throw new Error("`magnet()` has to return an SVGElement")}},{key:"getEdgeTerminal",value:function(a,n){var e={cell:a.cell.id};if(n!==a.container){var t=n.getAttribute("port");t?e.port=t:e.selector=a.getSelector(n)}return e}},{key:"doLink",value:function(a){var n=a.e,e=a.x,t=a.y;this.edgeView&&this.edgeView.onMouseMove(n,e,t)}},{key:"stopLink",value:function(a){var n=a.e,e=a.x,t=a.y,r=this.edgeView;if(r){r.onMouseUp(n,e,t);var i=r.cell;i.hasLoop()&&this.makeLoopEdge(i),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:i}),this.edgeView=null}this.graph.view.delegateEvents()}},{key:"makeLoopEdge",value:function(a){var n=null,e=null,t=this.options.loopEdgeWidth,r=this.graph.options,i=new U(0,0,r.width,r.height),l=this.graph.graphToLocal(this.view.getBBox()),u=[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(c){var h=null,d=0,g=0;switch(c){case"top":h=new O(l.x+l.width/2,l.y-t),d=t/2;break;case"bottom":h=new O(l.x+l.width/2,l.y+l.height+t),d=t/2;break;case"left":h=new O(l.x-t,l.y+l.height/2),g=t/2;break;case"right":h=new O(l.x+l.width+t,l.y+l.height/2),g=t/2}if(h)return n=h.translate(-d,-g),e=h.translate(d,g),i.containsPoint(n)&&i.containsPoint(e)});u&&n&&e&&a.setVertices([n,e])}},{key:"startResize",value:function(a){var n=a.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(re.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),ze("node:resize",n,this.view)}},{key:"doResize",value:function(a){var n=a.e,e=a.dx,t=a.dy,r=this.node.getSize(),i=Math.max(r.width+(this.flip?e:t),1),l=Math.max(r.height+(this.flip?t:e),1);this.node.resize(i,l,{absolute:!0}),ze("node:resizing",n,this.view)}},{key:"stopResize",value:function(a){var n=a.e;this.view.removeClass("node-resizing"),ze("node:resized",n,this.view),this.halo.stopBatch()}},{key:"startClone",value:function(a){var n=a.e,e=a.x,t=a.y;this.halo.startBatch();var r=this.options,i=r.clone(this.cell,{clone:!0});if(!(i instanceof ce))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(i,e,t),this.model.addCell(i,{halo:this.halo.cid,async:!1});var l=this.graph.renderer.findViewByCell(i);l.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:l})}},{key:"centerNodeAtCursor",value:function(a,n,e){var t=a.getBBox().getCenter(),r=n-t.x,i=e-t.y;a.translate(r,i)}},{key:"doClone",value:function(a){var n=a.e,e=a.x,t=a.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseMove(n,e,t)}},{key:"stopClone",value:function(a){var n=a.e,e=a.x,t=a.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startFork",value:function(a){var n=a.e,e=a.x,t=a.y;this.halo.startBatch();var r=this.options.clone(this.cell,{fork:!0});if(!(r instanceof ce))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(r,e,t),this.model.addCell(r,{halo:this.halo.cid,async:!1});var i=this.createEdgeConnectedToSource(),l=this.graph.renderer.findViewByCell(r),u=this.getMagnet(l,"target"),c=this.getEdgeTerminal(l,u);i.setTarget(c),this.model.addEdge(i,{halo:this.halo.cid,async:!1}),l.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:l})}},{key:"doFork",value:function(a){var n=a.e,e=a.x,t=a.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseMove(n,e,t)}},{key:"stopFork",value:function(a){var n=a.e,e=a.x,t=a.y,r=this.halo.getEventData(n).cloneView;r&&r.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startRotate",value:function(a){var n=this,e=a.e,t=a.x,r=a.y;this.halo.startBatch();var i=this.node.getBBox().getCenter(),l=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(u,c){return c.isNode()&&u.push(c),u},l),this.halo.setEventData(e,{center:i,nodes:l,rotateStartAngles:l.map(function(u){return u.getAngle()}),clientStartAngle:new O(t,r).theta(i)}),l.forEach(function(u){var c=n.graph.findViewByCell(u);c&&(c.addClass("node-rotating"),ze("node:rotate",e,c))})}},{key:"doRotate",value:function(a){var n=this,e=a.e,t=a.x,r=a.y,i=this.halo.getEventData(e),l=i.clientStartAngle-new O(t,r).theta(i.center);i.nodes.forEach(function(u,c){var h=i.rotateStartAngles[c],d=be.snapToGrid(h+l,n.options.rotateGrid);u.rotate(d,{absolute:!0,center:i.center,halo:n.halo.cid}),ze("node:rotating",e,n.graph.findViewByCell(u))})}},{key:"stopRotate",value:function(a){var n=this,e=a.e,t=this.halo.getEventData(e);t.nodes.forEach(function(r){var i=n.graph.findViewByCell(r);i.removeClass("node-rotating"),ze("node:rotated",e,i)}),this.halo.stopBatch()}},{key:"unlink",value:function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}},{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"node",get:function(){return this.cell}}]),o}(),jg=function(){function o(s){Object(L.a)(this,o),this.halo=s}return Object(F.a)(o,[{key:"getPresets",value:function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(n){return n.graph.localToGraph(n.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}},{key:"removeEdge",value:function(){this.cell.remove()}},{key:"directionSwap",value:function(){var a=this.edge.getSource(),n=this.edge.getTarget();this.edge.prop({source:n,target:a})}},{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"edge",get:function(){return this.cell}}]),o}(),Pi=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"init",value:function(e){this.options=P.merge(a.defaultOptions,this.cell.isNode()?new Ng(this).getPresets():this.cell.isEdge()?new jg(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}},{key:"startListening",value:function(){var e=this.model,t=this.graph,r=this.view.cell;r.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),Object(_.a)(Object(ee.a)(a.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){var e=this.model,t=this.graph,r=this.view.cell;this.undelegateEvents(),r.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),Object(_.a)(Object(ee.a)(a.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){var e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(Sr.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass("".concat(t,"-handles")).appendTo(this.container),this.$content=this.$("<div/>").addClass("".concat(t,"-content")).appendTo(this.container),this.$container.appendTo(this.graph.container),this}},{key:"remove",value:function(){return this.stopBatch(),this.view.removeClass(Sr.NODE_CLS),Object(_.a)(Object(ee.a)(a.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.isRendered()){this.updateContent();var e=this.getBBox(),t=this.options.tinyThreshold||0,r=this.options.smallThreshold||0;this.$handleContainer.toggleClass("".concat(this.handleClassName,"-tiny"),e.width<t&&e.height<t);var i="".concat(this.handleClassName,"-small");this.$handleContainer.toggleClass(i,!this.$handleContainer.hasClass(i)&&e.width<r&&e.height<r),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&(this.hasHandle("fork")&&this.toggleFork())}}},{key:"updateContent",value:function(){var e=this.options.content;if(typeof e=="function"){var t=R.call(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}},{key:"getBBox",value:function(){var e=this.view,t=this.options.bbox,r=typeof t=="function"?R.call(t,this,e):t;return U.create(Object.assign({x:0,y:0,width:1,height:1},r))}},{key:"removeCell",value:function(){this.cell.remove()}},{key:"toggleFork",value:function(){var e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),r=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!r),t.remove()}},{key:"toggleUnlink",value:function(){var e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}},{key:"startBatch",value:function(){this.model.startBatch("halo",{halo:this.cid})}},{key:"stopBatch",value:function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}},{key:"type",get:function(){return this.options.type||"surround"}},{key:"handleOptions",get:function(){return this.options}}]),a}(Er);(function(o){o.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(a){return a.clone().removeZIndex()}}})(Pi||(Pi={})),Object.getOwnPropertyNames(Sn.prototype).forEach(function(o){o!=="constructor"&&Object.defineProperty(Pi.prototype,o,Object.getOwnPropertyDescriptor(Sn.prototype,o))});var Sr;(function(o){o.NODE_CLS="has-widget-halo"})(Sr||(Sr={}));var os=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this),e.MOVEMENT_DETECTION_THRESHOLD=150,e.options=P.merge({},a.defaultOptions,n),e.action="awaiting-input",e.render(),e.startListening(),e}return Object(F.a)(a,[{key:"render",value:function(){var e=this.options;return this.container=E.createSvgElement("g"),E.addClass(this.container,this.prefixClassName("path-drawer")),this.pathTemplate=E.createSvgElement("path"),E.attr(this.pathTemplate,e.pathAttributes),this.startPointElement=te.create(e.startPointMarkup).addClass("start-point").node,this.controlElement=E.createSvgElement("path"),E.addClass(this.controlElement,"control-path"),te.create("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent",stroke:"none"}).appendTo(this.container),this.options.target.appendChild(this.container),this}},{key:"onRemove",value:function(){this.remove(this.pathElement),this.clear(),this.stopListening()}},{key:"startListening",value:function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick",contextmenu:"onContextMenu","mousedown .start-point":"onStartPointMouseDown","touchstart .start-point":"onStartPointMouseDown"})}},{key:"stopListening",value:function(){this.undelegateEvents()}},{key:"clear",value:function(){var e=this.pathElement;e&&e.pathSegList.numberOfItems<=1&&this.remove(e),this.startPointElement.remove(),this.controlElement.remove(),this.undelegateDocumentEvents(),this.action="awaiting-input",this.emit("clear")}},{key:"createPath",value:function(e,t){this.pathElement=this.pathTemplate.cloneNode(!0),this.addMoveSegment(e,t),E.translate(this.startPointElement,e,t,{absolute:!0}),this.vel.before(this.pathElement),this.vel.append(this.startPointElement),this.emit("path:create",{path:this.pathElement})}},{key:"closePath",value:function(){var e=this.pathElement,t=this.getPathSeg(e,0),r=this.getPathSeg(e,-1);r.pathSegType===SVGPathSeg.PATHSEG_LINETO_ABS?e.pathSegList.replaceItem(e.createSVGPathSegClosePath(),e.pathSegList.numberOfItems-1):(r.x=t.x,r.y=t.y,e.pathSegList.appendItem(e.createSVGPathSegClosePath())),this.finishPath("path:close")}},{key:"finishPath",value:function(e){var t=this.pathElement;t&&0<this.numberOfVisibleSegments()?(this.emit("path:finish",{path:t}),this.trigger(e,{path:t})):this.emit("path:abort",{path:t}),this.clear()}},{key:"numberOfVisibleSegments",value:function(){var e=this.pathElement,t=e.pathSegList.numberOfItems;t=t-1;var r=this.getPathSeg(e,-1);return r.pathSegType===SVGPathSeg.PATHSEG_CLOSEPATH&&(t=t-1),t}},{key:"addMoveSegment",value:function(e,t){var r=this.pathElement,i=r.createSVGPathSegMovetoAbs(e,t);r.pathSegList.appendItem(i),this.emit("path:segment:add",{path:r}),this.emit("path:move-segment:add",{path:r})}},{key:"addLineSegment",value:function(e,t){var r=this.pathElement,i=r.createSVGPathSegLinetoAbs(e,t);r.pathSegList.appendItem(i),this.emit("path:segment:add",{path:r}),this.emit("path:line-segment:add",{path:r})}},{key:"addCurveSegment",value:function(e,t,r,i,l,u){var c=this.pathElement,h=c.createSVGPathSegCurvetoCubicAbs(e,t,r,i,l||e,u||t);c.pathSegList.appendItem(h),this.emit("path:segment:add",{path:c}),this.emit("path:curve-segment:add",{path:c})}},{key:"adjustLastSegment",value:function(e,t,r,i,l,u){var c=this.pathElement,h=this.options.snapRadius;if(h&&e!=null&&t!=null){var d=this.snapLastSegmentCoordinates(e,t,h);e=d.x,t=d.y}var g=this.getPathSeg(c,-1);e!=null&&(g.x=e),t!=null&&(g.y=t),r!=null&&(g.x1=r),i!=null&&(g.y1=i),l!=null&&(g.x2=l),u!=null&&(g.y2=u),this.emit("path:edit",{path:c}),this.emit("path:last-segment:adjust",{path:c})}},{key:"snapLastSegmentCoordinates",value:function(e,t,r){for(var i=this.pathElement,l=!1,u=!1,c=e,h=t,d=i.pathSegList.numberOfItems-2;0<=d&&(!l||!u);d-=1){var g=this.getPathSeg(i,d);!l&&Math.abs(g.x-e)<r&&(c=g.x,l=!0),!u&&Math.abs(g.y-t)<r&&(h=g.y,u=!0)}return new O(c,h)}},{key:"removeLastSegment",value:function(){var e=this.pathElement;e.pathSegList.removeItem(e.pathSegList.numberOfItems-1),this.emit("path:edit",{path:e}),this.emit("path:last-segment:remove",{path:e})}},{key:"findControlPoint",value:function(e,t){var r=this.pathElement,i=this.getPathSeg(r,-1);return new O(e,t).reflection(i)}},{key:"replaceLastSegmentWithCurve",value:function(){var e=this.pathElement,t=this.getPathSeg(e,-1),r=this.getPathSeg(e,-2),i=e.createSVGPathSegCurvetoCubicAbs(t.x,t.y,r.x,r.y,t.x,t.y);e.pathSegList.replaceItem(i,e.pathSegList.numberOfItems-1),this.emit("path:edit",{path:e}),this.emit("path:last-segment:replace-with-curve",{path:e})}},{key:"adjustControlPath",value:function(e,t,r,i){var l=this.controlElement;l.pathSegList.initialize(l.createSVGPathSegMovetoAbs(e,t)),l.pathSegList.appendItem(l.createSVGPathSegLinetoAbs(r,i)),this.vel.append(l);var u=this.pathElement;this.emit("path:interact",{path:u}),this.emit("path:control:adjust",{path:u})}},{key:"removeControlPath",value:function(){var e=this.pathElement,t=this.controlElement;t.pathSegList.clear(),this.vel.append(t),this.emit("path:interact",{path:e}),this.emit("path:control:remove",{path:e})}},{key:"getPathSeg",value:function(e,t){var r=t<0?e.pathSegList.numberOfItems+t:t;return e.pathSegList.getItem(r)}},{key:"onMouseDown",value:function(e){var t=this.normalizeEvent(e);if(t.stopPropagation(),this.isLeftMouseDown(t)&&this.isSamePositionEvent(t)&&this.container.parentNode){var r=this.vel.toLocalPoint(t.clientX,t.clientY);switch(this.action){case"awaiting-input":this.createPath(r.x,r.y),this.action="path-created",this.delegateDocumentEvents(a.documentEvents);break;case"adjusting-line-end":this.action="awaiting-line-end";break;case"adjusting-curve-end":this.action="awaiting-curve-control-2"}this.timeStamp=t.timeStamp}}},{key:"onMouseMove",value:function(e){var t=this.normalizeEvent(e);if(t.stopPropagation(),this.action!=="awaiting-input"){var r=this.vel.toLocalPoint(t.clientX,t.clientY),i=this.timeStamp;if(i)if(t.timeStamp-i<this.MOVEMENT_DETECTION_THRESHOLD)switch(this.action){case"path-created":{var l=E.translate(this.startPointElement);this.adjustControlPath(l.tx,l.ty,r.x,r.y);break}case"awaiting-line-end":case"adjusting-curve-control-1":{this.adjustLastSegment(r.x,r.y);break}case"awaiting-curve-control-2":this.adjustLastSegment(r.x,r.y,null,null,r.x,r.y)}else switch(this.action){case"path-created":this.action="adjusting-curve-control-1";break;case"awaiting-line-end":this.replaceLastSegmentWithCurve(),this.action="adjusting-curve-control-2";break;case"awaiting-curve-control-2":this.action="adjusting-curve-control-2";break;case"adjusting-curve-control-1":{var u=E.translate(this.startPointElement);this.adjustControlPath(u.tx,u.ty,r.x,r.y);break}case"adjusting-curve-control-2":{var c=this.findControlPoint(r.x,r.y);this.adjustLastSegment(null,null,null,null,c.x,c.y),this.adjustControlPath(c.x,c.y,r.x,r.y)}}else switch(this.action){case"adjusting-line-end":this.adjustLastSegment(r.x,r.y);break;case"adjusting-curve-end":this.adjustLastSegment(r.x,r.y,null,null,r.x,r.y)}}}},{key:"onPointerUp",value:function(e){this.timeStamp=null;var t=this.normalizeEvent(e);if(t.stopPropagation(),this.isLeftMouseDown(t)&&this.isSamePositionEvent(t)){var r=this.vel.toLocalPoint(t.clientX,t.clientY);switch(this.action){case"path-created":case"awaiting-line-end":this.addLineSegment(r.x,r.y),this.action="adjusting-line-end";break;case"awaiting-curve-control-2":this.removeControlPath(),this.addLineSegment(r.x,r.y),this.action="adjusting-line-end";break;case"adjusting-curve-control-1":case"adjusting-curve-control-2":this.addCurveSegment(r.x,r.y,r.x,r.y),this.action="adjusting-curve-end"}}}},{key:"onStartPointMouseDown",value:function(e){var t=this.normalizeEvent(e);t.stopPropagation(),this.isLeftMouseDown(t)&&this.isSamePositionEvent(t)&&this.closePath()}},{key:"onDoubleClick",value:function(e){var t=this.normalizeEvent(e);t.preventDefault(),t.stopPropagation(),this.isLeftMouseDown(t)&&(this.pathElement&&0<this.numberOfVisibleSegments()&&(this.removeLastSegment(),this.finishPath("path:stop")))}},{key:"onContextMenu",value:function(e){var t=this.normalizeEvent(e);t.preventDefault(),t.stopPropagation(),this.isSamePositionEvent(t)&&(this.pathElement&&0<this.numberOfVisibleSegments()&&(this.removeLastSegment(),this.finishPath("path:stop")))}},{key:"isLeftMouseDown",value:function(e){return(e.which||0)<=1}},{key:"isSamePositionEvent",value:function(e){var t=e.originalEvent;return t==null||t.detail<=1}},{key:"vel",get:function(){return te.create(this.container)}}]),a}(ue);(function(o){o.defaultOptions={pathAttributes:{class:null,fill:"#ffffff",stroke:"#000000","stroke-width":1,"pointer-events":"none"},startPointMarkup:'<circle r="5"/>',snapRadius:0},o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})(os||(os={}));var Pr=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this),e.options=Object.assign(Object.assign({},a.defaults),n),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName("widget-dnd")),e.draggingGraph=new de(Object.assign(Object.assign({},e.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),e.$container.append(e.draggingGraph.container),e}return Object(F.a)(a,[{key:"start",value:function(e,t){var r=t;r.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(document.body),this.sourceNode=e,this.prepareDragging(e,r.clientX,r.clientY);var i=this.updateNodePosition(r.clientX,r.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:r,node:e,cell:e,view:this.draggingView,x:i.x,y:i.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(a.documentEvents,r.data)}},{key:"isSnaplineEnabled",value:function(){return this.snapline&&!this.snapline.disabled}},{key:"prepareDragging",value:function(e,t,r){var i=this.draggingGraph,l=i.model,u=this.options.getDragNode(e,{sourceNode:e,draggingGraph:i,targetGraph:this.targetGraph});u.position(0,0);var c=5;if(this.isSnaplineEnabled()&&(c+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){var h=this.targetGraph.transform.getScale();i.scale(h.sx,h.sy),c*=Math.max(h.sx,h.sy)}else i.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),l.resetCells([u]);var d=i.findViewByCell(u);d.undelegateEvents(),d.cell.off("changed"),i.fitToContent({padding:c,allowNewOrigin:"any"});var g=d.getBBox();this.geometryBBox=d.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(g.getTopLeft()),this.draggingNode=u,this.draggingView=d,this.draggingBBox=u.getBBox(),this.padding=c,this.originOffset=this.updateGraphPosition(t,r)}},{key:"updateGraphPosition",value:function(e,t){var r=document.body.scrollTop||document.documentElement.scrollTop,i=this.delta,l=this.geometryBBox,u=this.padding||5,c={left:e-i.x-l.width/2-u,top:t-i.y-l.height/2-u+r};return this.draggingGraph&&this.$container.offset(c),c}},{key:"updateNodePosition",value:function(e,t){var r=this.targetGraph.clientToLocal(e,t),i=this.draggingBBox;return r.x-=i.width/2,r.y-=i.height/2,this.draggingNode.position(r.x,r.y),r}},{key:"snap",value:function(e){var t=e.cell,r=e.current,i=e.options,l=t;if(i.snapped){var u=this.draggingBBox;l.position(u.x+i.tx,u.y+i.ty,{silent:!0}),this.draggingView.translate(),l.position(r.x,r.y,{silent:!0}),this.snapOffset={x:i.tx,y:i.ty}}else this.snapOffset=null}},{key:"onDragging",value:function(e){var t=this.draggingView;if(t){e.preventDefault();var r=this.normalizeEvent(e),i=r.clientX,l=r.clientY;this.updateGraphPosition(i,l);var u=this.updateNodePosition(i,l),c=this.targetGraph.options.embedding.enabled,h=(c||this.isSnaplineEnabled())&&this.isInsideValidArea({x:i,y:l});if(c){t.setEventData(r,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});var d=t.getEventData(r);h?t.processEmbedding(r,d):t.clearEmbedding(d),this.candidateEmbedView=d.candidateEmbedView}this.isSnaplineEnabled()&&(h?this.snapline.snapOnMoving({e:r,view:t,x:u.x,y:u.y}):this.snapline.hide())}}},{key:"onDragEnd",value:function(e){var t=this,r=this.draggingNode;if(r){var i=this.normalizeEvent(e),l=this.draggingView,u=this.draggingBBox,c=this.snapOffset,h=u.x,d=u.y;c&&(h=h+c.x,d=d+c.y),r.position(h,d,{silent:!0});var g=this.drop(r,{x:i.clientX,y:i.clientY}),f=function(p){p?(t.onDropped(r),t.targetGraph.options.embedding.enabled&&l&&(l.setEventData(i,{cell:p,graph:t.targetGraph,candidateEmbedView:t.candidateEmbedView}),l.finalizeEmbedding(i,l.getEventData(i)))):t.onDropInvalid(),t.candidateEmbedView=null,t.targetModel.stopBatch("dnd")};R.isAsync(g)?(this.undelegateDocumentEvents(),g.then(f)):f(g)}}},{key:"clearDragging",value:function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}},{key:"onDropped",value:function(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}},{key:"onDropInvalid",value:function(){var e=this,t=this.draggingNode;if(t){var r=this.options.animation;if(r){var i=typeof r=="object"&&r.duration||150,l=typeof r=="object"&&r.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,i,l,function(){return e.onDropped(t)})}else this.onDropped(t)}}},{key:"isInsideValidArea",value:function(e){var t,r=this.targetGraph,i=this.targetScroller;if(i)if(i.options.autoResize)t=this.getDropArea(i.container);else{var l=this.getDropArea(i.container);t=this.getDropArea(r.container).intersectsWithRect(l)}else t=this.getDropArea(r.container);return t&&t.containsPoint(e)}},{key:"getDropArea",value:function(e){var t=this.$(e),r=t.offset(),i=document.body.scrollTop||document.documentElement.scrollTop,l=document.body.scrollLeft||document.documentElement.scrollLeft;return U.create({x:r.left+parseInt(t.css("border-left-width"),10)-l,y:r.top+parseInt(t.css("border-top-width"),10)-i,width:t.innerWidth(),height:t.innerHeight()})}},{key:"drop",value:function(e,t){var r=this;if(this.isInsideValidArea(t)){var i=this.targetGraph,l=i.model,u=i.clientToLocal(t),c=this.sourceNode,h=this.options.getDropNode(e,{sourceNode:c,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),d=h.getBBox();u.x+=d.x-d.width/2,u.y+=d.y-d.height/2;var g=this.snapOffset?1:i.getGridSize();h.position(be.snapToGrid(u.x,g),be.snapToGrid(u.y,g)),h.removeZIndex();var f=this.options.validateNode,v=f?f(h,{sourceNode:c,draggingNode:e,droppingNode:h,targetGraph:i,draggingGraph:this.draggingGraph}):!0;return typeof v=="boolean"?v?(l.addCell(h,{stencil:this.cid}),h):null:R.toDeferredBoolean(v).then(function(p){return p?(l.addCell(h,{stencil:r.cid}),h):null})}return null}},{key:"onRemove",value:function(){this.draggingGraph&&this.draggingGraph.view.remove()}},{key:"targetScroller",get:function(){var e=this.options.target;return e instanceof de?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return e instanceof de?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"snapline",get:function(){return this.targetGraph.snapline.widget}}]),a}(ue);(function(o){o.defaults={animation:!1,getDragNode:function(a){return a.clone()},getDropNode:function(a){return a.clone()}},o.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}})(Pr||(Pr={}));function Lg(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o instanceof Ke?o:new Ke().resetCells(o,{sort:!1,dryrun:!0}),n=a.getNodes(),e=s.columns||1,t=Math.ceil(n.length/e),r=s.dx||0,i=s.dy||0,l=s.center!==!1,u=s.resizeToFit===!0,c=s.marginX||0,h=s.marginY||0,d=[],g=s.columnWidth;if(g==="compact")for(var f=0;f<e;f+=1){var v=ut.getNodesInColumn(n,f,e);d.push(ut.getMaxDim(v,"width")+r)}else{(g==null||g==="auto")&&(g=ut.getMaxDim(n,"width")+r);for(var p=0;p<e;p+=1)d.push(g)}var C=ut.accumulate(d,c),b=[],y=s.rowHeight;if(y==="compact")for(var w=0;w<t;w+=1){var x=ut.getNodesInRow(n,w,e);b.push(ut.getMaxDim(x,"height")+i)}else{(y==null||y==="auto")&&(y=ut.getMaxDim(n,"height")+i);for(var k=0;k<t;k+=1)b.push(y)}var M=ut.accumulate(b,h);a.startBatch("layout"),n.forEach(function(A,S){var N=S%e,j=Math.floor(S/e),B=d[N],X=b[j],z=0,D=0,T=A.getSize();if(u){var G=B-2*r,Y=X-2*i,K=T.height*(T.width?G/T.width:1),ne=T.width*(T.height?Y/T.height:1);X<K?G=ne:Y=K,T={width:G,height:Y},A.setSize(T,s)}l&&(z=(B-T.width)/2,D=(X-T.height)/2),A.position(C[N]+r+z,M[j]+i+D,s)}),a.stopBatch("layout")}var ut;(function(o){function s(t,r){return t.reduce(function(i,l){return Math.max(l.getSize()[r],i)},0)}o.getMaxDim=s;function a(t,r,i){for(var l=[],u=i*r,c=u+i;u<c;u+=1)l.push(t[u]);return l}o.getNodesInRow=a;function n(t,r,i){for(var l=[],u=r,c=t.length;u<c;u=u+i)l.push(t[u]);return l}o.getNodesInColumn=n;function e(t,r){return t.reduce(function(i,l,u){return i.push(i[u]+l),i},[r||0])}o.accumulate=e})(ut||(ut={}));var ss=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;if(Object(L.a)(this,a),e=s.call(this),e.graphs={},e.$groups={},e.options=Object.assign(Object.assign({},a.defaultOptions),n),e.dnd=new Pr(e.options),e.onSearch=R.debounce(e.onSearch,200),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Be.base)),e.options.collapsable=n.collapsable&&n.groups&&n.groups.some(function(l){return l.collapsable!==!1}),e.options.collapsable){e.$container.addClass("collapsable");var t=n.groups&&n.groups.every(function(l){return l.collapsed||l.collapsable===!1});t&&e.$container.addClass("collapsed")}e.$("<div/>").addClass(e.prefixClassName(Be.title)).html(e.options.title).appendTo(e.$container),n.search&&e.$container.addClass("searchable").append(e.renderSearch()),e.$content=e.$("<div/>").addClass(e.prefixClassName(Be.content)).appendTo(e.$container);var r=n.stencilGraphOptions||{};if(n.groups&&n.groups.length)n.groups.forEach(function(l){var u=e.$("<div/>").addClass(e.prefixClassName(Be.group)).attr("data-name",l.name);(l.collapsable==null&&n.collapsable||l.collapsable!==!1)&&u.addClass("collapsable"),u.toggleClass("collapsed",l.collapsed===!0);var c=e.$("<h3/>").addClass(e.prefixClassName(Be.groupTitle)).html(l.title||l.name),h=e.$("<div/>").addClass(e.prefixClassName(Be.groupContent)),d=l.graphOptions,g=new de(Object.assign(Object.assign(Object.assign({},r),d),{container:document.createElement("div"),model:r.model||new Ke,width:l.graphWidth||n.stencilGraphWidth,height:l.graphHeight||n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));h.append(g.container),u.append(c,h).appendTo(e.$content),e.$groups[l.name]=u,e.graphs[l.name]=g});else{var i=new de(Object.assign(Object.assign({},r),{container:document.createElement("div"),model:r.model||new Ke,width:n.stencilGraphWidth,height:n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));e.$content.append(i.container),e.graphs[Xn.defaultGroupName]=i}return e.startListening(),Object(pa.a)(e,Object(Ae.a)(e))}return Object(F.a)(a,[{key:"renderSearch",value:function(){return this.$("<div/>").addClass(this.prefixClassName(Be.search)).append(this.$("<input/>").attr({type:"search",placeholder:"Search"}).addClass(this.prefixClassName(Be.searchText)))}},{key:"startListening",value:function(){var e,t=this,r=this.prefixClassName(Be.title),i=this.prefixClassName(Be.searchText),l=this.prefixClassName(Be.groupTitle);this.delegateEvents((e={},Object(q.a)(e,"click .".concat(r),"onTitleClick"),Object(q.a)(e,"touchstart .".concat(r),"onTitleClick"),Object(q.a)(e,"click .".concat(l),"onGroupTitleClick"),Object(q.a)(e,"touchstart .".concat(l),"onGroupTitleClick"),Object(q.a)(e,"input .".concat(i),"onSearch"),Object(q.a)(e,"focusin .".concat(i),"onSearchFocusIn"),Object(q.a)(e,"focusout .".concat(i),"onSearchFocusOut"),e)),Object.keys(this.graphs).forEach(function(u){var c=t.graphs[u];c.on("cell:mousedown",t.onDragStart,t)})}},{key:"stopListening",value:function(){var e=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(t){var r=e.graphs[t];r.off("cell:mousedown",e.onDragStart,e)})}},{key:"load",value:function(e,t){var r=this;return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(function(i){e[i]&&r.loadGroup(e[i],i)}),this}},{key:"loadGroup",value:function(e,t){var r=this.getModel(t);if(r){var i=e.map(function(d){return d instanceof Oe?d:Oe.create(d)});r.resetCells(i)}var l=this.getGroup(t),u=this.options.stencilGraphHeight;l&&l.graphHeight!=null&&(u=l.graphHeight);var c=l&&l.layout||this.options.layout;if(c&&r&&R.call(c,this,r,l),!u){var h=this.getGraph(t);h.fitToContent({minWidth:h.options.width,gridHeight:1,padding:l&&l.graphPadding||this.options.stencilGraphPadding||10})}return this}},{key:"onDragStart",value:function(e){var t=e.e,r=e.node;this.dnd.start(r,t)}},{key:"filter",value:function(e,t){var r=this,i=Object.keys(this.graphs).reduce(function(l,u){var c=r.graphs[u],h=u===Xn.defaultGroupName?null:u,d=c.model.getNodes().filter(function(p){var C=!1;typeof t=="function"?C=R.call(t,r,p,e,h,r):typeof t=="boolean"?C=t:C=r.isCellMatched(p,e,t,e.toLowerCase()!==e);var b=c.renderer.findViewByCell(p);return b&&b.$(b.container).toggleClass("unmatched",!C),C}),g=d.length>0,f=r.options,v=new Ke;return v.resetCells(d),f.layout&&R.call(f.layout,r,v,r.getGroup(u)),r.$groups[u]&&r.$groups[u].toggleClass("unmatched",!g),c.fitToContent({gridWidth:1,gridHeight:1,padding:f.stencilGraphPadding||10}),l||g},!1);this.$container.toggleClass("not-found",!i)}},{key:"isCellMatched",value:function(e,t,r,i){return t&&r?Object.keys(r).some(function(l){if(l==="*"||e.shape===l){var u=r[l];if(typeof u=="boolean")return u;var c=Array.isArray(u)?u:[u];return c.some(function(h){var d=e.getPropByPath(h);if(d!=null)return d="".concat(d),i&&(d=d.toLowerCase()),d.indexOf(t)>=0})}return!1}):!0}},{key:"onSearch",value:function(e){this.filter(e.target.value,this.options.search)}},{key:"onSearchFocusIn",value:function(){this.$container.addClass("is-focused")}},{key:"onSearchFocusOut",value:function(){this.$container.removeClass("is-focused")}},{key:"onTitleClick",value:function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}},{key:"onGroupTitleClick",value:function(e){var t=this,r=this.$(e.target).closest(".".concat(this.prefixClassName(Be.group)));this.toggleGroup(r.attr("data-name")||"");var i=Object.keys(this.$groups).every(function(l){var u=t.getGroup(l),c=t.$groups[l];return u&&u.collapsable===!1||c.hasClass("collapsed")});this.$container.toggleClass("collapsed",i)}},{key:"getModel",value:function(e){var t=this.getGraph(e);return t?t.model:null}},{key:"getGraph",value:function(e){return this.graphs[e||Xn.defaultGroupName]}},{key:"getGroup",value:function(e){var t=this.options.groups;return e!=null&&t&&t.length?t.find(function(r){return r.name===e}):null}},{key:"toggleGroup",value:function(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}},{key:"collapseGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}},{key:"expandGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}},{key:"isGroupCollapsable",value:function(e){var t=this.$groups[e];return t.hasClass("collapsable")}},{key:"isGroupCollapsed",value:function(e){var t=this.$groups[e];return t&&t.hasClass("collapsed")}},{key:"collapseGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.collapseGroup(t)}),this}},{key:"expandGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.expandGroup(t)}),this}},{key:"onRemove",value:function(){var e=this;Object.keys(this.graphs).forEach(function(t){var r=e.graphs[t];r.view.remove(),delete e.graphs[t]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}},{key:"targetScroller",get:function(){var e=this.options.target;return e instanceof de?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return e instanceof de?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}}]),a}(ue);(function(o){o.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,layout:function(a,n){var e={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};Lg(a,Object.assign(Object.assign(Object.assign({},e),this.options.layoutOptions),n?n.layoutOptions:{}))}},Pr.defaults)})(ss||(ss={}));var Be;(function(o){o.base="widget-stencil",o.title="".concat(o.base,"-title"),o.search="".concat(o.base,"-search"),o.searchText="".concat(o.search,"-text"),o.content="".concat(o.base,"-content"),o.group="".concat(o.base,"-group"),o.groupTitle="".concat(o.group,"-title"),o.groupContent="".concat(o.group,"-content")})(Be||(Be={}));var Xn;(function(o){o.defaultGroupName="__default__"})(Xn||(Xn={}));function Fg(){if(Le.trackable){var o="https://kcart.alipay.com/web/bi.do",s=new Image,a=Object.assign(Object.assign({},Le.trackInfo),{version:_c,pg:document.URL,r:new Date().getTime(),x6:!0,page_type:"syslog"}),n=encodeURIComponent(JSON.stringify([a]));s.src="".concat(o,"?BIProfile=merge&d=").concat(n)}}Le.trackable&&setTimeout(Fg,3e3);var Rg=m(293),Ni=m(123),Tt=m(66),Nr=m(297),ls=m(295),Mf=m(176),Xg=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;Object(L.a)(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=s.call.apply(s,[this].concat(t)),n.state={type:"arc",size:5,radius:0},n.onSizeChanged=function(i){n.setState({size:i},function(){n.notifyChange()})},n.onRadiusChanged=function(i){n.setState({radius:i},function(){n.notifyChange()})},n.onTypeChange=function(i){n.setState({type:i.target.value},function(){n.notifyChange()})},n}return Object(F.a)(a,[{key:"notifyChange",value:function(){this.props.onChange(this.state)}},{key:"render",value:function(){return Q.a.createElement(Rg.a,{title:"Args",size:"small",bordered:!1,style:{width:320}},Q.a.createElement(Ni.a,{align:"middle"},Q.a.createElement(Tt.a,{span:5},"type"),Q.a.createElement(Tt.a,{span:18},Q.a.createElement(Nr.a.Group,{onChange:this.onTypeChange,value:this.state.type},Q.a.createElement(Nr.a,{value:"arc"},"arc"),Q.a.createElement(Nr.a,{value:"cubic"},"cubic"),Q.a.createElement(Nr.a,{value:"gap"},"gap")))),Q.a.createElement(Ni.a,{align:"middle"},Q.a.createElement(Tt.a,{span:5},"size"),Q.a.createElement(Tt.a,{span:14},Q.a.createElement(ls.a,{min:1,max:30,step:1,value:this.state.size,onChange:this.onSizeChanged})),Q.a.createElement(Tt.a,{span:1,offset:1},Q.a.createElement("div",{className:"slider-value"},this.state.size))),Q.a.createElement(Ni.a,{align:"middle"},Q.a.createElement(Tt.a,{span:5},"radius"),Q.a.createElement(Tt.a,{span:14},Q.a.createElement(ls.a,{min:0,max:30,step:1,value:this.state.radius,onChange:this.onRadiusChanged})),Q.a.createElement(Tt.a,{span:1,offset:1},Q.a.createElement("div",{className:"slider-value"},this.state.radius))))}}]),a}(Q.a.Component),Tf=m(237),zg=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){var n;Object(L.a)(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=s.call.apply(s,[this].concat(t)),n.container=void 0,n.edge=void 0,n.onAttrsChanged=function(i){n.edge.setConnector("jumpover",i)},n.refContainer=function(i){n.container=i},n}return Object(F.a)(a,[{key:"componentDidMount",value:function(){var e=new de({container:this.container,grid:!0}),t=e.addNode({x:24,y:70,width:100,height:40}),r=e.addNode({x:24,y:160,width:100,height:40});this.edge=e.addEdge({source:t,target:r,attrs:{line:{stroke:"#fe8550"}},vertices:[{x:760,y:150},{x:760,y:240}]});for(var i=e.addNode({x:160,y:24,width:70,height:30}),l=0;l<6;l+=1){var u=i.clone().translate(l*100,l*10);e.addNode(u);var c=u.clone().translate(0,200);e.addNode(c),l%2===0?e.addEdge({source:u,target:c,attrs:{line:{stroke:"#fe8550"}},connector:{name:"jumpover",args:{type:"gap"}}}):e.addEdge({source:u,target:c})}this.edge.setConnector("jumpover")}},{key:"render",value:function(){return Q.a.createElement("div",{className:"app"},Q.a.createElement("div",{className:"app-left"},Q.a.createElement(Xg,{onChange:this.onAttrsChanged})),Q.a.createElement("div",{className:"app-content",ref:this.refContainer}))}}]),a}(Q.a.Component),Bg=m(303),Ig=m(292),Vg=m(304),Ug=m(305),Gg=m(306),zn=m(203),Hg=m(193),Wg=m(194),Sf=m(241),ji=m(240),$g=function(){return Q.a.createElement("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.a.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.4545 0H10.5C10.1988 0 10 0.198754 10 0.5C10 0.801246 10.1988 1 10.5 1H13L9.5 4.5L10.5 5.5L14 2V4.5C14 4.80125 14.1988 5 14.5 5C14.8012 5 15 4.80125 15 4.5V0.545455C15 0.244208 14.7558 0 14.4545 0ZM1.73333 1H8.00001V1.86667H1.73333C1.25469 1.86667 0.866667 2.25469 0.866667 2.73333V9.32003C0.866667 9.79868 1.25469 10.1867 1.73333 10.1867H12.1333C12.612 10.1867 13 9.79868 13 9.32004V7.00003H13.8667V9.32004C13.8667 10.2773 13.0906 11.0534 12.1333 11.0534H1.73333C0.776041 11.0534 0 10.2773 0 9.32003V2.73333C0 1.77604 0.77604 1 1.73333 1Z",fill:"currentcolor"}))},Yg=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(){return Object(L.a)(this,a),s.apply(this,arguments)}return Object(F.a)(a,[{key:"render",value:function(){return Q.a.createElement("div",{className:"demo-toolbar"},Q.a.createElement(zn.a,{placement:"bottomLeft",arrowPointAtCenter:!0,title:"重新加载",mouseEnterDelay:.5},Q.a.createElement(Bg.a,{onClick:function(){window.location.reload()}})),window.frameElement&&Q.a.createElement(zn.a,{placement:"bottomLeft",arrowPointAtCenter:!0,title:"在新窗口打开",mouseEnterDelay:.5},Q.a.createElement("a",{href:"".concat(window.location.href),rel:"noopener noreferrer",target:"_blank"},Q.a.createElement(Ig.a,{component:$g}))),Q.a.createElement(zn.a,{placement:"bottomLeft",arrowPointAtCenter:!0,title:"在 Github 中查看",mouseEnterDelay:.5},Q.a.createElement("a",{href:"".concat(ji.host),rel:"noopener noreferrer",target:"_blank"},Q.a.createElement(Vg.a,null))),Q.a.createElement(zn.a,{arrowPointAtCenter:!0,placement:"bottomLeft",title:"在 CodeSandbox 中打开",mouseEnterDelay:.5},Q.a.createElement("form",{action:"https://codesandbox.io/api/v1/sandboxes/define",method:"POST",target:"_blank"},Q.a.createElement("input",{type:"hidden",name:"parameters",value:Object(Wg.getParameters)(ji.getCodeSandboxParams())}),Q.a.createElement("button",{type:"submit"},Q.a.createElement(Ug.a,null)))),Q.a.createElement(zn.a,{placement:"bottomLeft",arrowPointAtCenter:!0,title:"在 StackBlitz 中打开",mouseEnterDelay:.5},Q.a.createElement(Gg.a,{onClick:function(){Hg.a.openProject(ji.getStackblitzPrefillConfig(),{openFile:"src/app.tsx"})}})))}}]),a}(Q.a.Component),Jg=m(301),Pf=m(242),Li=function(o){Object(I.a)(a,o);var s=Object(V.a)(a);function a(n){var e;return Object(L.a)(this,a),e=s.call(this,n),e.refContainer=function(t){e.container=t},a.restoreIframeSize(),e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.updateIframeSize(),window.ResizeObserver){var t=new window.ResizeObserver(function(){e.updateIframeSize()});t.observe(this.container)}else window.addEventListener("resize",function(){return e.updateIframeSize()});setTimeout(function(){var r=document.getElementById("loading");r&&r.parentNode&&r.parentNode.removeChild(r)},1e3)}},{key:"updateIframeSize",value:function(){var e=window.frameElement;if(e){var t=this.container.scrollHeight||this.container.clientHeight;e.style.width="100%",e.style.height="".concat(t+16,"px"),e.style.border="0",e.style.overflow="hidden",a.saveIframeSize()}}},{key:"render",value:function(){return Q.a.createElement("div",{className:"demo-wrap",ref:this.refContainer},Q.a.createElement(Yg,null),this.props.children)}}]),a}(Q.a.Component);(function(o){var s=window.location.pathname,a="x6-iframe-size";function n(){var r=localStorage.getItem(a),i;if(r)try{i=JSON.parse(r)}catch(l){}else i={};return i}function e(){var r=window.frameElement;if(r){var i=r.style,l={width:i.width,height:i.height},u=n();u[s]=l,localStorage.setItem(a,JSON.stringify(u))}}o.saveIframeSize=e;function t(){var r=window.frameElement;if(r){var i=n(),l=i[s];l&&(r.style.width=l.width||"100%",r.style.height=l.height||"auto")}}o.restoreIframeSize=t})(Li||(Li={}));var Nf=m(243),Zg=function(s){var a=s.children;return Q.a.createElement(Jg.a.ErrorBoundary,null,Q.a.createElement(Li,null,a))};hs.a.render(Q.a.createElement(Zg,null,Q.a.createElement(zg,null)),document.getElementById("root"))}},[[207,1,2]]]);
